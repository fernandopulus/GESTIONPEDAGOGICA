var Ife=Object.defineProperty;var Ffe=(e,t,r)=>t in e?Ife(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mB=(e,t,r)=>Ffe(e,typeof t!="symbol"?t+"":t,r);function Ofe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var E0t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dfe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var pB={exports:{}},qb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D7;function Pfe(){if(D7)return qb;D7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return qb.Fragment=t,qb.jsx=r,qb.jsxs=r,qb}var P7;function Rfe(){return P7||(P7=1,pB.exports=Pfe()),pB.exports}var l=Rfe(),gB={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R7;function Lfe(){if(R7)return cn;R7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(Y){return Y===null||typeof Y!="object"?null:(Y=f&&Y[f]||Y["@@iterator"],typeof Y=="function"?Y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function b(Y,te,P){this.props=Y,this.context=te,this.refs=x,this.updater=P||p}b.prototype.isReactComponent={},b.prototype.setState=function(Y,te){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,te,"setState")},b.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function y(){}y.prototype=b.prototype;function w(Y,te,P){this.props=Y,this.context=te,this.refs=x,this.updater=P||p}var _=w.prototype=new y;_.constructor=w,g(_,b.prototype),_.isPureReactComponent=!0;var j=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function E(Y,te,P,H,X,Z){return P=Z.ref,{$$typeof:e,type:Y,key:te,ref:P!==void 0?P:null,props:Z}}function N(Y,te){return E(Y.type,te,void 0,void 0,void 0,Y.props)}function B(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function R(Y){var te={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(P){return te[P]})}var D=/\/+/g;function O(Y,te){return typeof Y=="object"&&Y!==null&&Y.key!=null?R(""+Y.key):te.toString(36)}function L(){}function M(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(L,L):(Y.status="pending",Y.then(function(te){Y.status==="pending"&&(Y.status="fulfilled",Y.value=te)},function(te){Y.status==="pending"&&(Y.status="rejected",Y.reason=te)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function J(Y,te,P,H,X){var Z=typeof Y;(Z==="undefined"||Z==="boolean")&&(Y=null);var ae=!1;if(Y===null)ae=!0;else switch(Z){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(Y.$$typeof){case e:case t:ae=!0;break;case d:return ae=Y._init,J(ae(Y._payload),te,P,H,X)}}if(ae)return X=X(Y),ae=H===""?"."+O(Y,0):H,j(X)?(P="",ae!=null&&(P=ae.replace(D,"$&/")+"/"),J(X,te,P,"",function(ce){return ce})):X!=null&&(B(X)&&(X=N(X,P+(X.key==null||Y&&Y.key===X.key?"":(""+X.key).replace(D,"$&/")+"/")+ae)),te.push(X)),1;ae=0;var le=H===""?".":H+":";if(j(Y))for(var ie=0;ie<Y.length;ie++)H=Y[ie],Z=le+O(H,ie),ae+=J(H,te,P,Z,X);else if(ie=h(Y),typeof ie=="function")for(Y=ie.call(Y),ie=0;!(H=Y.next()).done;)H=H.value,Z=le+O(H,ie++),ae+=J(H,te,P,Z,X);else if(Z==="object"){if(typeof Y.then=="function")return J(M(Y),te,P,H,X);throw te=String(Y),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ae}function V(Y,te,P){if(Y==null)return Y;var H=[],X=0;return J(Y,H,"","",function(Z){return te.call(P,Z,X++)}),H}function K(Y){if(Y._status===-1){var te=Y._result;te=te(),te.then(function(P){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=P)},function(P){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=P)}),Y._status===-1&&(Y._status=0,Y._result=te)}if(Y._status===1)return Y._result.default;throw Y._result}var z=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function G(){}return cn.Children={map:V,forEach:function(Y,te,P){V(Y,function(){te.apply(this,arguments)},P)},count:function(Y){var te=0;return V(Y,function(){te++}),te},toArray:function(Y){return V(Y,function(te){return te})||[]},only:function(Y){if(!B(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},cn.Component=b,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=w,cn.StrictMode=n,cn.Suspense=c,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,cn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return k.H.useMemoCache(Y)}},cn.cache=function(Y){return function(){return Y.apply(null,arguments)}},cn.cloneElement=function(Y,te,P){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var H=g({},Y.props),X=Y.key,Z=void 0;if(te!=null)for(ae in te.ref!==void 0&&(Z=void 0),te.key!==void 0&&(X=""+te.key),te)!I.call(te,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&te.ref===void 0||(H[ae]=te[ae]);var ae=arguments.length-2;if(ae===1)H.children=P;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];H.children=le}return E(Y.type,X,void 0,void 0,Z,H)},cn.createContext=function(Y){return Y={$$typeof:i,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},cn.createElement=function(Y,te,P){var H,X={},Z=null;if(te!=null)for(H in te.key!==void 0&&(Z=""+te.key),te)I.call(te,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(X[H]=te[H]);var ae=arguments.length-2;if(ae===1)X.children=P;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];X.children=le}if(Y&&Y.defaultProps)for(H in ae=Y.defaultProps,ae)X[H]===void 0&&(X[H]=ae[H]);return E(Y,Z,void 0,void 0,null,X)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(Y){return{$$typeof:o,render:Y}},cn.isValidElement=B,cn.lazy=function(Y){return{$$typeof:d,_payload:{_status:-1,_result:Y},_init:K}},cn.memo=function(Y,te){return{$$typeof:u,type:Y,compare:te===void 0?null:te}},cn.startTransition=function(Y){var te=k.T,P={};k.T=P;try{var H=Y(),X=k.S;X!==null&&X(P,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(G,z)}catch(Z){z(Z)}finally{k.T=te}},cn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},cn.use=function(Y){return k.H.use(Y)},cn.useActionState=function(Y,te,P){return k.H.useActionState(Y,te,P)},cn.useCallback=function(Y,te){return k.H.useCallback(Y,te)},cn.useContext=function(Y){return k.H.useContext(Y)},cn.useDebugValue=function(){},cn.useDeferredValue=function(Y,te){return k.H.useDeferredValue(Y,te)},cn.useEffect=function(Y,te,P){var H=k.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(Y,te)},cn.useId=function(){return k.H.useId()},cn.useImperativeHandle=function(Y,te,P){return k.H.useImperativeHandle(Y,te,P)},cn.useInsertionEffect=function(Y,te){return k.H.useInsertionEffect(Y,te)},cn.useLayoutEffect=function(Y,te){return k.H.useLayoutEffect(Y,te)},cn.useMemo=function(Y,te){return k.H.useMemo(Y,te)},cn.useOptimistic=function(Y,te){return k.H.useOptimistic(Y,te)},cn.useReducer=function(Y,te,P){return k.H.useReducer(Y,te,P)},cn.useRef=function(Y){return k.H.useRef(Y)},cn.useState=function(Y){return k.H.useState(Y)},cn.useSyncExternalStore=function(Y,te,P){return k.H.useSyncExternalStore(Y,te,P)},cn.useTransition=function(){return k.H.useTransition()},cn.version="19.1.1",cn}var L7;function j1(){return L7||(L7=1,gB.exports=Lfe()),gB.exports}var S=j1();const nt=_l(S),Mfe=Ofe({__proto__:null,default:nt},[S]);var xB={exports:{}},Wb={},vB={exports:{}},bB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M7;function Ufe(){return M7||(M7=1,function(e){function t(V,K){var z=V.length;V.push(K);e:for(;0<z;){var G=z-1>>>1,Y=V[G];if(0<a(Y,K))V[G]=K,V[z]=Y,z=G;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var K=V[0],z=V.pop();if(z!==K){V[0]=z;e:for(var G=0,Y=V.length,te=Y>>>1;G<te;){var P=2*(G+1)-1,H=V[P],X=P+1,Z=V[X];if(0>a(H,z))X<Y&&0>a(Z,H)?(V[G]=Z,V[X]=z,G=X):(V[G]=H,V[P]=z,G=P);else if(X<Y&&0>a(Z,z))V[G]=Z,V[X]=z,G=X;else break e}}return K}function a(V,K){var z=V.sortIndex-K.sortIndex;return z!==0?z:V.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function j(V){for(var K=r(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=V)n(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=r(u)}}function k(V){if(x=!1,j(V),!g)if(r(c)!==null)g=!0,I||(I=!0,O());else{var K=r(u);K!==null&&J(k,K.startTime-V)}}var I=!1,E=-1,N=5,B=-1;function R(){return b?!0:!(e.unstable_now()-B<N)}function D(){if(b=!1,I){var V=e.unstable_now();B=V;var K=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),p=!0;var z=h;try{t:{for(j(V),f=r(c);f!==null&&!(f.expirationTime>V&&R());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var Y=G(f.expirationTime<=V);if(V=e.unstable_now(),typeof Y=="function"){f.callback=Y,j(V),K=!0;break t}f===r(c)&&n(c),j(V)}else n(c);f=r(c)}if(f!==null)K=!0;else{var te=r(u);te!==null&&J(k,te.startTime-V),K=!1}}break e}finally{f=null,h=z,p=!1}K=void 0}}finally{K?O():I=!1}}}var O;if(typeof _=="function")O=function(){_(D)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,M=L.port2;L.port1.onmessage=D,O=function(){M.postMessage(null)}}else O=function(){y(D,0)};function J(V,K){E=y(function(){V(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var z=h;h=K;try{return V()}finally{h=z}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=h;h=V;try{return K()}finally{h=z}},e.unstable_scheduleCallback=function(V,K,z){var G=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?G+z:G):z=G,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,V={id:d++,callback:K,priorityLevel:V,startTime:z,expirationTime:Y,sortIndex:-1},z>G?(V.sortIndex=z,t(u,V),r(c)===null&&V===r(u)&&(x?(w(E),E=-1):x=!0,J(k,z-G))):(V.sortIndex=Y,t(c,V),g||p||(g=!0,I||(I=!0,O()))),V},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(V){var K=h;return function(){var z=h;h=K;try{return V.apply(this,arguments)}finally{h=z}}}}(bB)),bB}var U7;function Qfe(){return U7||(U7=1,vB.exports=Ufe()),vB.exports}var yB={exports:{}},Do={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q7;function Hfe(){if(Q7)return Do;Q7=1;var e=j1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Do.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Do.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Do.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},Do.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Do.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Do.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Do.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Do.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Do.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Do.requestFormReset=function(c){n.d.r(c)},Do.unstable_batchedUpdates=function(c,u){return c(u)},Do.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},Do.useFormStatus=function(){return i.H.useHostTransitionStatus()},Do.version="19.1.1",Do}var H7;function _Y(){if(H7)return yB.exports;H7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yB.exports=Hfe(),yB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V7;function Vfe(){if(V7)return Wb;V7=1;var e=Qfe(),t=j1(),r=_Y();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,v=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(v=m.return),A=m.return;while(A)}return m.tag===3?v:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var v=A,C=m;;){var U=v.return;if(U===null)break;var q=U.alternate;if(q===null){if(C=U.return,C!==null){v=C;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===v)return o(U),A;if(q===C)return o(U),m;q=q.sibling}throw Error(n(188))}if(v.return!==C.return)v=U,C=q;else{for(var ue=!1,ye=U.child;ye;){if(ye===v){ue=!0,v=U,C=q;break}if(ye===C){ue=!0,C=U,v=q;break}ye=ye.sibling}if(!ue){for(ye=q.child;ye;){if(ye===v){ue=!0,v=q,C=U;break}if(ye===C){ue=!0,C=q,v=U;break}ye=ye.sibling}if(!ue)throw Error(n(189))}}if(v.alternate!==C)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var L=Symbol.for("react.client.reference");function M(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===L?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case j:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return m=A.displayName||null,m!==null?m:M(A.type)||"Memo";case N:m=A._payload,A=A._init;try{return M(A(m))}catch{}}return null}var J=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},G=[],Y=-1;function te(A){return{current:A}}function P(A){0>Y||(A.current=G[Y],G[Y]=null,Y--)}function H(A,m){Y++,G[Y]=A.current,A.current=m}var X=te(null),Z=te(null),ae=te(null),le=te(null);function ie(A,m){switch(H(ae,m),H(Z,A),H(X,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?c7(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=c7(m),A=u7(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}P(X),H(X,A)}function ce(){P(X),P(Z),P(ae)}function fe(A){A.memoizedState!==null&&H(le,A);var m=X.current,v=u7(m,A.type);m!==v&&(H(Z,A),H(X,v))}function Ie(A){Z.current===A&&(P(X),P(Z)),le.current===A&&(P(le),Vb._currentValue=z)}var ne=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,Fe=e.unstable_cancelCallback,Se=e.unstable_shouldYield,me=e.unstable_requestPaint,Te=e.unstable_now,Me=e.unstable_getCurrentPriorityLevel,We=e.unstable_ImmediatePriority,be=e.unstable_UserBlockingPriority,De=e.unstable_NormalPriority,Re=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,ct=e.unstable_setDisableYieldValue,pt=null,It=null;function Mt(A){if(typeof Ze=="function"&&ct(A),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(pt,A)}catch{}}var Pt=Math.clz32?Math.clz32:jr,Qt=Math.log,wt=Math.LN2;function jr(A){return A>>>=0,A===0?32:31-(Qt(A)/wt|0)|0}var tr=256,an=4194304;function Nr(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function $r(A,m,v){var C=A.pendingLanes;if(C===0)return 0;var U=0,q=A.suspendedLanes,ue=A.pingedLanes;A=A.warmLanes;var ye=C&134217727;return ye!==0?(C=ye&~q,C!==0?U=Nr(C):(ue&=ye,ue!==0?U=Nr(ue):v||(v=ye&~A,v!==0&&(U=Nr(v))))):(ye=C&~q,ye!==0?U=Nr(ye):ue!==0?U=Nr(ue):v||(v=C&~A,v!==0&&(U=Nr(v)))),U===0?0:m!==0&&m!==U&&(m&q)===0&&(q=U&-U,v=m&-m,q>=v||q===32&&(v&4194048)!==0)?m:U}function In(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function Pr(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var A=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),A}function hn(){var A=an;return an<<=1,(an&62914560)===0&&(an=4194304),A}function la(A){for(var m=[],v=0;31>v;v++)m.push(A);return m}function ja(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function rn(A,m,v,C,U,q){var ue=A.pendingLanes;A.pendingLanes=v,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=v,A.entangledLanes&=v,A.errorRecoveryDisabledLanes&=v,A.shellSuspendCounter=0;var ye=A.entanglements,Pe=A.expirationTimes,lt=A.hiddenUpdates;for(v=ue&~v;0<v;){var St=31-Pt(v),Ot=1<<St;ye[St]=0,Pe[St]=-1;var At=lt[St];if(At!==null)for(lt[St]=null,St=0;St<At.length;St++){var ht=At[St];ht!==null&&(ht.lane&=-536870913)}v&=~Ot}C!==0&&pr(A,C,0),q!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=q&~(ue&~m))}function pr(A,m,v){A.pendingLanes|=m,A.suspendedLanes&=~m;var C=31-Pt(m);A.entangledLanes|=m,A.entanglements[C]=A.entanglements[C]|1073741824|v&4194090}function et(A,m){var v=A.entangledLanes|=m;for(A=A.entanglements;v;){var C=31-Pt(v),U=1<<C;U&m|A[C]&m&&(A[C]|=m),v&=~U}}function gt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Je(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xt(){var A=K.p;return A!==0?A:(A=window.event,A===void 0?32:j7(A.type))}function Et(A,m){var v=K.p;try{return K.p=A,m()}finally{K.p=v}}var bt=Math.random().toString(36).slice(2),nr="__reactFiber$"+bt,xr="__reactProps$"+bt,Wr="__reactContainer$"+bt,Zr="__reactEvents$"+bt,qr="__reactListeners$"+bt,he="__reactHandles$"+bt,je="__reactResources$"+bt,Ce="__reactMarker$"+bt;function we(A){delete A[nr],delete A[xr],delete A[Zr],delete A[qr],delete A[he]}function Ne(A){var m=A[nr];if(m)return m;for(var v=A.parentNode;v;){if(m=v[Wr]||v[nr]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(A=h7(A);A!==null;){if(v=A[nr])return v;A=h7(A)}return m}A=v,v=A.parentNode}return null}function Be(A){if(A=A[nr]||A[Wr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Ye(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function dt(A){var m=A[je];return m||(m=A[je]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ce]=!0}var rt=new Set,it={};function Ft(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(it[A]=m,A=0;A<m.length;A++)rt.add(m[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Gt={};function Sr(A){return ne.call(Gt,A)?!0:ne.call(Ht,A)?!1:Jt.test(A)?Gt[A]=!0:(Ht[A]=!0,!1)}function sn(A,m,v){if(Sr(m))if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+v)}}function on(A,m,v){if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+v)}}function An(A,m,v,C){if(C===null)A.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(v);return}A.setAttributeNS(m,v,""+C)}}var hs,Co;function ms(A){if(hs===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);hs=m&&m[1]||"",Co=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+A+Co}var Zs=!1;function Ts(A,m){if(!A||Zs)return"";Zs=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(ht){var At=ht}Reflect.construct(A,[],Ot)}else{try{Ot.call()}catch(ht){At=ht}A.call(Ot.prototype)}}else{try{throw Error()}catch(ht){At=ht}(Ot=A())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(ht){if(ht&&At&&typeof ht.stack=="string")return[ht.stack,At.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=C.DetermineComponentFrameRoot(),ue=q[0],ye=q[1];if(ue&&ye){var Pe=ue.split(`
`),lt=ye.split(`
`);for(U=C=0;C<Pe.length&&!Pe[C].includes("DetermineComponentFrameRoot");)C++;for(;U<lt.length&&!lt[U].includes("DetermineComponentFrameRoot");)U++;if(C===Pe.length||U===lt.length)for(C=Pe.length-1,U=lt.length-1;1<=C&&0<=U&&Pe[C]!==lt[U];)U--;for(;1<=C&&0<=U;C--,U--)if(Pe[C]!==lt[U]){if(C!==1||U!==1)do if(C--,U--,0>U||Pe[C]!==lt[U]){var St=`
`+Pe[C].replace(" at new "," at ");return A.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",A.displayName)),St}while(1<=C&&0<=U);break}}}finally{Zs=!1,Error.prepareStackTrace=v}return(v=A?A.displayName||A.name:"")?ms(v):""}function gi(A){switch(A.tag){case 26:case 27:case 5:return ms(A.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return Ts(A.type,!1);case 11:return Ts(A.type.render,!1);case 1:return Ts(A.type,!0);case 31:return ms("Activity");default:return""}}function xa(A){try{var m="";do m+=gi(A),A=A.return;while(A);return m}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function ei(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Xd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Hh(A){var m=Xd(A)?"checked":"value",v=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),C=""+A[m];if(!A.hasOwnProperty(m)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var U=v.get,q=v.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return U.call(this)},set:function(ue){C=""+ue,q.call(this,ue)}}),Object.defineProperty(A,m,{enumerable:v.enumerable}),{getValue:function(){return C},setValue:function(ue){C=""+ue},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Wc(A){A._valueTracker||(A._valueTracker=Hh(A))}function df(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var v=m.getValue(),C="";return A&&(C=Xd(A)?A.checked?"true":"false":A.value),A=C,A!==v?(m.setValue(A),!0):!1}function xi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Yd=/[\n"\\]/g;function Fn(A){return A.replace(Yd,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function vi(A,m,v,C,U,q,ue,ye){A.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.type=ue:A.removeAttribute("type"),m!=null?ue==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+ei(m)):A.value!==""+ei(m)&&(A.value=""+ei(m)):ue!=="submit"&&ue!=="reset"||A.removeAttribute("value"),m!=null?Yc(A,ue,ei(m)):v!=null?Yc(A,ue,ei(v)):C!=null&&A.removeAttribute("value"),U==null&&q!=null&&(A.defaultChecked=!!q),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?A.name=""+ei(ye):A.removeAttribute("name")}function Xc(A,m,v,C,U,q,ue,ye){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(A.type=q),m!=null||v!=null){if(!(q!=="submit"&&q!=="reset"||m!=null))return;v=v!=null?""+ei(v):"",m=m!=null?""+ei(m):v,ye||m===A.value||(A.value=m),A.defaultValue=m}C=C??U,C=typeof C!="function"&&typeof C!="symbol"&&!!C,A.checked=ye?A.checked:!!C,A.defaultChecked=!!C,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(A.name=ue)}function Yc(A,m,v){m==="number"&&xi(A.ownerDocument)===A||A.defaultValue===""+v||(A.defaultValue=""+v)}function Sl(A,m,v,C){if(A=A.options,m){m={};for(var U=0;U<v.length;U++)m["$"+v[U]]=!0;for(v=0;v<A.length;v++)U=m.hasOwnProperty("$"+A[v].value),A[v].selected!==U&&(A[v].selected=U),U&&C&&(A[v].defaultSelected=!0)}else{for(v=""+ei(v),m=null,U=0;U<A.length;U++){if(A[U].value===v){A[U].selected=!0,C&&(A[U].defaultSelected=!0);return}m!==null||A[U].disabled||(m=A[U])}m!==null&&(m.selected=!0)}}function Vn(A,m,v){if(m!=null&&(m=""+ei(m),m!==A.value&&(A.value=m),v==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=v!=null?""+ei(v):""}function Jc(A,m,v,C){if(m==null){if(C!=null){if(v!=null)throw Error(n(92));if(J(C)){if(1<C.length)throw Error(n(93));C=C[0]}v=C}v==null&&(v=""),m=v}v=ei(m),A.defaultValue=v,C=A.textContent,C===v&&C!==""&&C!==null&&(A.value=C)}function _o(A,m){if(m){var v=A.firstChild;if(v&&v===A.lastChild&&v.nodeType===3){v.nodeValue=m;return}}A.textContent=m}var oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vh(A,m,v){var C=m.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":C?A.setProperty(m,v):typeof v!="number"||v===0||oc.has(m)?m==="float"?A.cssFloat=v:A[m]=(""+v).trim():A[m]=v+"px"}function Af(A,m,v){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?A.setProperty(C,""):C==="float"?A.cssFloat="":A[C]="");for(var U in m)C=m[U],m.hasOwnProperty(U)&&v[U]!==C&&Vh(A,U,C)}else for(var q in m)m.hasOwnProperty(q)&&Vh(A,q,m[q])}function ff(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(A){return Jd.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var kl=null;function ca(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var uc=null,jl=null;function Ir(A){var m=Be(A);if(m&&(A=m.stateNode)){var v=A[xr]||null;e:switch(A=m.stateNode,m.type){case"input":if(vi(A,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),m=v.name,v.type==="radio"&&m!=null){for(v=A;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Fn(""+m)+'"][type="radio"]'),m=0;m<v.length;m++){var C=v[m];if(C!==A&&C.form===A.form){var U=C[xr]||null;if(!U)throw Error(n(90));vi(C,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(m=0;m<v.length;m++)C=v[m],C.form===A.form&&df(C)}break e;case"textarea":Vn(A,v.value,v.defaultValue);break e;case"select":m=v.value,m!=null&&Sl(A,!!v.multiple,m,!1)}}}var Bl=!1;function zh(A,m,v){if(Bl)return A(m,v);Bl=!0;try{var C=A(m);return C}finally{if(Bl=!1,(uc!==null||jl!==null)&&(YE(),uc&&(m=uc,A=jl,jl=uc=null,Ir(m),A)))for(m=0;m<A.length;m++)Ir(A[m])}}function Fi(A,m){var v=A.stateNode;if(v===null)return null;var C=v[xr]||null;if(C===null)return null;v=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(A=A.type,C=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!C;break e;default:A=!1}if(A)return null;if(v&&typeof v!="function")throw Error(n(231,m,typeof v));return v}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(No)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){no=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{no=!1}var So=null,Zc=null,dc=null;function hf(){if(dc)return dc;var A,m=Zc,v=m.length,C,U="value"in So?So.value:So.textContent,q=U.length;for(A=0;A<v&&m[A]===U[A];A++);var ue=v-A;for(C=1;C<=ue&&m[v-C]===U[q-C];C++);return dc=U.slice(A,1<C?1-C:void 0)}function ko(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Oi(){return!0}function Il(){return!1}function ps(A){function m(v,C,U,q,ue){this._reactName=v,this._targetInst=U,this.type=C,this.nativeEvent=q,this.target=ue,this.currentTarget=null;for(var ye in A)A.hasOwnProperty(ye)&&(v=A[ye],this[ye]=v?v(q):q[ye]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Oi:Il,this.isPropagationStopped=Il,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),m}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=ps(bn),Fl=d({},bn,{view:0,detail:0}),mf=ps(Fl),qu,Wu,ll,Di=d({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:au,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==ll&&(ll&&A.type==="mousemove"?(qu=A.screenX-ll.screenX,Wu=A.screenY-ll.screenY):Wu=qu=0,ll=A),qu)},movementY:function(A){return"movementY"in A?A.movementY:Wu}}),gs=ps(Di),$h=d({},Di,{dataTransfer:0}),tu=ps($h),bi=d({},Fl,{relatedTarget:0}),ru=ps(bi),Ac=d({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zd=ps(Ac),Xu=d({},bn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),eA=ps(Xu),pf=d({},bn,{data:0}),Yu=ps(pf),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=tA[A])?!!m[A]:!1}function au(){return Zu}var Gh=d({},Fl,{key:function(A){if(A.key){var m=nu[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=ko(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Ju[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:au,charCode:function(A){return A.type==="keypress"?ko(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?ko(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),fc=ps(Gh),su=d({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=ps(su),Pi=d({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:au}),rA=ps(Pi),W=d({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=ps(W),Oe=d({},Di,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ps(Oe),Ge=d({},bn,{newState:0,oldState:0}),vt=ps(Ge),Lt=[9,13,27,32],Zt=No&&"CompositionEvent"in window,F=null;No&&"documentMode"in document&&(F=document.documentMode);var re=No&&"TextEvent"in window&&!F,oe=No&&(!Zt||F&&8<F&&11>=F),ve=" ",ze=!1;function ot(A,m){switch(A){case"keyup":return Lt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Fr=!1;function yn(A,m){switch(A){case"compositionend":return Ut(m);case"keypress":return m.which!==32?null:(ze=!0,ve);case"textInput":return A=m.data,A===ve&&ze?null:A;default:return null}}function Xr(A,m){if(Fr)return A==="compositionend"||!Zt&&ot(A,m)?(A=hf(),dc=Zc=So=null,Fr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return oe&&m.locale!=="ko"?null:m.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!zn[A.type]:m==="textarea"}function Ol(A,m,v,C){uc?jl?jl.push(C):jl=[C]:uc=C,m=nC(m,"onChange"),0<m.length&&(v=new eu("onChange","change",null,v,C),A.push({event:v,listeners:m}))}var es=null,jo=null;function iu(A){a7(A,0)}function nA(A){var m=Ye(A);if(df(m))return A}function Kh(A,m){if(A==="change")return m}var gf=!1;if(No){var Is;if(No){var aA="oninput"in document;if(!aA){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),aA=typeof xf.oninput=="function"}Is=aA}else Is=!1;gf=Is&&(!document.documentMode||9<document.documentMode)}function vf(){es&&(es.detachEvent("onpropertychange",qh),jo=es=null)}function qh(A){if(A.propertyName==="value"&&nA(jo)){var m=[];Ol(m,jo,A,ca(A)),zh(iu,m)}}function Bo(A,m,v){A==="focusin"?(vf(),es=m,jo=v,es.attachEvent("onpropertychange",qh)):A==="focusout"&&vf()}function ub(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return nA(jo)}function Wm(A,m){if(A==="click")return nA(m)}function Wg(A,m){if(A==="input"||A==="change")return nA(m)}function Dl(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ti=typeof Object.is=="function"?Object.is:Dl;function sA(A,m){if(ti(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var v=Object.keys(A),C=Object.keys(m);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var U=v[C];if(!ne.call(m,U)||!ti(A[U],m[U]))return!1}return!0}function Xm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function td(A,m){var v=Xm(A);A=0;for(var C;v;){if(v.nodeType===3){if(C=A+v.textContent.length,A<=m&&C>=m)return{node:v,offset:m-A};A=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Xm(v)}}function iA(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?iA(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function ao(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=xi(A.document);m instanceof A.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)A=m.contentWindow;else break;m=xi(A.document)}return m}function yi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var oA=No&&"documentMode"in document&&11>=document.documentMode,To=null,hc=null,ou=null,mc=!1;function Ga(A,m,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;mc||To==null||To!==xi(C)||(C=To,"selectionStart"in C&&yi(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),ou&&sA(ou,C)||(ou=C,C=nC(hc,"onSelect"),0<C.length&&(m=new eu("onSelect","select",null,m,v),A.push({event:m,listeners:C}),m.target=To)))}function pc(A,m){var v={};return v[A.toLowerCase()]=m.toLowerCase(),v["Webkit"+A]="webkit"+m,v["Moz"+A]="moz"+m,v}var xs={animationend:pc("Animation","AnimationEnd"),animationiteration:pc("Animation","AnimationIteration"),animationstart:pc("Animation","AnimationStart"),transitionrun:pc("Transition","TransitionRun"),transitionstart:pc("Transition","TransitionStart"),transitioncancel:pc("Transition","TransitionCancel"),transitionend:pc("Transition","TransitionEnd")},Io={},bf={};No&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function lu(A){if(Io[A])return Io[A];if(!xs[A])return A;var m=xs[A],v;for(v in m)if(m.hasOwnProperty(v)&&v in bf)return Io[A]=m[v];return A}var Wh=lu("animationend"),lA=lu("animationiteration"),cA=lu("animationstart"),uA=lu("transitionrun"),yf=lu("transitionstart"),Xh=lu("transitioncancel"),dA=lu("transitionend"),rd=new Map,wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wf.push("scrollEnd");function Ka(A,m){rd.set(A,m),Ft(m,[A])}var cl=new WeakMap;function mn(A,m){if(typeof A=="object"&&A!==null){var v=cl.get(A);return v!==void 0?v:(m={value:A,source:m,stack:xa(m)},cl.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var pn=[],va=0,ts=0;function Pl(){for(var A=va,m=ts=va=0;m<A;){var v=pn[m];pn[m++]=null;var C=pn[m];pn[m++]=null;var U=pn[m];pn[m++]=null;var q=pn[m];if(pn[m++]=null,C!==null&&U!==null){var ue=C.pending;ue===null?U.next=U:(U.next=ue.next,ue.next=U),C.pending=U}q!==0&&Xg(v,U,q)}}function AA(A,m,v,C){pn[va++]=A,pn[va++]=m,pn[va++]=v,pn[va++]=C,ts|=C,A.lanes|=C,A=A.alternate,A!==null&&(A.lanes|=C)}function fA(A,m,v,C){return AA(A,m,v,C),Ef(A)}function nd(A,m){return AA(A,null,null,m),Ef(A)}function Xg(A,m,v){A.lanes|=v;var C=A.alternate;C!==null&&(C.lanes|=v);for(var U=!1,q=A.return;q!==null;)q.childLanes|=v,C=q.alternate,C!==null&&(C.childLanes|=v),q.tag===22&&(A=q.stateNode,A===null||A._visibility&1||(U=!0)),A=q,q=q.return;return A.tag===3?(q=A.stateNode,U&&m!==null&&(U=31-Pt(v),A=q.hiddenUpdates,C=A[U],C===null?A[U]=[m]:C.push(m),m.lane=v|536870912),q):null}function Ef(A){if(50<Db)throw Db=0,Mj=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ri={};function Rl(A,m,v,C){this.tag=A,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(A,m,v,C){return new Rl(A,m,v,C)}function Yh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function cu(A,m){var v=A.alternate;return v===null?(v=Ri(A.tag,m,A.key,A.mode),v.elementType=A.elementType,v.type=A.type,v.stateNode=A.stateNode,v.alternate=A,A.alternate=v):(v.pendingProps=m,v.type=A.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=A.flags&65011712,v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,m=A.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=A.sibling,v.index=A.index,v.ref=A.ref,v.refCleanup=A.refCleanup,v}function Ym(A,m){A.flags&=65011714;var v=A.alternate;return v===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=v.childLanes,A.lanes=v.lanes,A.child=v.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=v.memoizedProps,A.memoizedState=v.memoizedState,A.updateQueue=v.updateQueue,A.type=v.type,m=v.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function Cf(A,m,v,C,U,q){var ue=0;if(C=A,typeof A=="function")Yh(A)&&(ue=1);else if(typeof A=="string")ue=vfe(A,v,X.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Ri(31,v,m,U),A.elementType=B,A.lanes=q,A;case g:return ad(v.children,U,q,m);case x:ue=8,U|=24;break;case b:return A=Ri(12,v,m,U|2),A.elementType=b,A.lanes=q,A;case k:return A=Ri(13,v,m,U),A.elementType=k,A.lanes=q,A;case I:return A=Ri(19,v,m,U),A.elementType=I,A.lanes=q,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:ue=10;break e;case w:ue=9;break e;case j:ue=11;break e;case E:ue=14;break e;case N:ue=16,C=null;break e}ue=29,v=Error(n(130,A===null?"null":typeof A,"")),C=null}return m=Ri(ue,v,m,U),m.elementType=A,m.type=C,m.lanes=q,m}function ad(A,m,v,C){return A=Ri(7,A,C,m),A.lanes=v,A}function Yg(A,m,v){return A=Ri(6,A,null,m),A.lanes=v,A}function Jm(A,m,v){return m=Ri(4,A.children!==null?A.children:[],A.key,m),m.lanes=v,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var hA=[],sd=0,Jh=null,Jg=0,Ll=[],ul=0,_f=null,id=1,od="";function Nf(A,m){hA[sd++]=Jg,hA[sd++]=Jh,Jh=A,Jg=m}function yE(A,m,v){Ll[ul++]=id,Ll[ul++]=od,Ll[ul++]=_f,_f=A;var C=id;A=od;var U=32-Pt(C)-1;C&=~(1<<U),v+=1;var q=32-Pt(m)+U;if(30<q){var ue=U-U%5;q=(C&(1<<ue)-1).toString(32),C>>=ue,U-=ue,id=1<<32-Pt(m)+U|v<<U|C,od=q+A}else id=1<<q|v<<U|C,od=A}function Zm(A){A.return!==null&&(Nf(A,1),yE(A,1,0))}function ep(A){for(;A===Jh;)Jh=hA[--sd],hA[sd]=null,Jg=hA[--sd],hA[sd]=null;for(;A===_f;)_f=Ll[--ul],Ll[ul]=null,od=Ll[--ul],Ll[ul]=null,id=Ll[--ul],Ll[ul]=null}var Fs=null,qa=null,Mn=!1,mA=null,uu=!1,db=Error(n(519));function Sf(A){var m=Error(n(418,""));throw Zh(mn(m,A)),db}function wE(A){var m=A.stateNode,v=A.type,C=A.memoizedProps;switch(m[nr]=A,m[xr]=C,v){case"dialog":Nn("cancel",m),Nn("close",m);break;case"iframe":case"object":case"embed":Nn("load",m);break;case"video":case"audio":for(v=0;v<Rb.length;v++)Nn(Rb[v],m);break;case"source":Nn("error",m);break;case"img":case"image":case"link":Nn("error",m),Nn("load",m);break;case"details":Nn("toggle",m);break;case"input":Nn("invalid",m),Xc(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),Wc(m);break;case"select":Nn("invalid",m);break;case"textarea":Nn("invalid",m),Jc(m,C.value,C.defaultValue,C.children),Wc(m)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||m.textContent===""+v||C.suppressHydrationWarning===!0||l7(m.textContent,v)?(C.popover!=null&&(Nn("beforetoggle",m),Nn("toggle",m)),C.onScroll!=null&&Nn("scroll",m),C.onScrollEnd!=null&&Nn("scrollend",m),C.onClick!=null&&(m.onclick=aC),m=!0):m=!1,m||Sf(A)}function ld(A){for(Fs=A.return;Fs;)switch(Fs.tag){case 5:case 13:uu=!1;return;case 27:case 3:uu=!0;return;default:Fs=Fs.return}}function so(A){if(A!==Fs)return!1;if(!Mn)return ld(A),Mn=!0,!1;var m=A.tag,v;if((v=m!==3&&m!==27)&&((v=m===5)&&(v=A.type,v=!(v!=="form"&&v!=="button")||tB(A.type,A.memoizedProps)),v=!v),v&&qa&&Sf(A),ld(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(v=A.data,v==="/$"){if(m===0){qa=pd(A.nextSibling);break e}m--}else v!=="$"&&v!=="$!"&&v!=="$?"||m++;A=A.nextSibling}qa=null}}else m===27?(m=qa,p0(A.type)?(A=sB,sB=null,qa=A):qa=m):qa=Fs?pd(A.stateNode.nextSibling):null;return!0}function dl(){qa=Fs=null,Mn=!1}function EE(){var A=mA;return A!==null&&(Ql===null?Ql=A:Ql.push.apply(Ql,A),mA=null),A}function Zh(A){mA===null?mA=[A]:mA.push(A)}var du=te(null),ni=null,cd=null;function pA(A,m,v){H(du,m._currentValue),m._currentValue=v}function Au(A){A._currentValue=du.current,P(du)}function Zg(A,m,v){for(;A!==null;){var C=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),A===v)break;A=A.return}}function ex(A,m,v,C){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var q=U.dependencies;if(q!==null){var ue=U.child;q=q.firstContext;e:for(;q!==null;){var ye=q;q=U;for(var Pe=0;Pe<m.length;Pe++)if(ye.context===m[Pe]){q.lanes|=v,ye=q.alternate,ye!==null&&(ye.lanes|=v),Zg(q.return,v,A),C||(ue=null);break e}q=ye.next}}else if(U.tag===18){if(ue=U.return,ue===null)throw Error(n(341));ue.lanes|=v,q=ue.alternate,q!==null&&(q.lanes|=v),Zg(ue,v,A),ue=null}else ue=U.child;if(ue!==null)ue.return=U;else for(ue=U;ue!==null;){if(ue===A){ue=null;break}if(U=ue.sibling,U!==null){U.return=ue.return,ue=U;break}ue=ue.return}U=ue}}function e0(A,m,v,C){A=null;for(var U=m,q=!1;U!==null;){if(!q){if((U.flags&524288)!==0)q=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ue=U.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var ye=U.type;ti(U.pendingProps.value,ue.value)||(A!==null?A.push(ye):A=[ye])}}else if(U===le.current){if(ue=U.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(Vb):A=[Vb])}U=U.return}A!==null&&ex(m,A,v,C),m.flags|=262144}function tx(A){for(A=A.firstContext;A!==null;){if(!ti(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function fu(A){ni=A,cd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Os(A){return rx(ni,A)}function gA(A,m){return ni===null&&fu(A),rx(A,m)}function rx(A,m){var v=m._currentValue;if(m={context:m,memoizedValue:v,next:null},cd===null){if(A===null)throw Error(n(308));cd=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else cd=cd.next=m;return v}var uj=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(v,C){A.push(C)}};this.abort=function(){m.aborted=!0,A.forEach(function(v){return v()})}},CE=e.unstable_scheduleCallback,dj=e.unstable_NormalPriority,Ds={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ab(){return{controller:new uj,data:new Map,refCount:0}}function tp(A){A.refCount--,A.refCount===0&&CE(dj,function(){A.controller.abort()})}var rp=null,fb=0,kf=0,ud=null;function Aj(A,m){if(rp===null){var v=rp=[];fb=0,kf=Gj(),ud={status:"pending",value:void 0,then:function(C){v.push(C)}}}return fb++,m.then(_E,_E),m}function _E(){if(--fb===0&&rp!==null){ud!==null&&(ud.status="fulfilled");var A=rp;rp=null,kf=0,ud=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function NE(A,m){var v=[],C={status:"pending",value:null,reason:null,then:function(U){v.push(U)}};return A.then(function(){C.status="fulfilled",C.value=m;for(var U=0;U<v.length;U++)(0,v[U])(m)},function(U){for(C.status="rejected",C.reason=U,U=0;U<v.length;U++)(0,v[U])(void 0)}),C}var T=V.S;V.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Aj(A,m),T!==null&&T(A,m)};var Q=te(null);function ee(){var A=Q.current;return A!==null?A:Ta.pooledCache}function se(A,m){m===null?H(Q,Q.current):H(Q,m.pool)}function de(){var A=ee();return A===null?null:{parent:Ds._currentValue,pool:A}}var pe=Error(n(460)),ge=Error(n(474)),xe=Error(n(542)),Ee={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function st(A,m,v){switch(v=A[v],v===void 0?A.push(m):v!==m&&(m.then(Ue,Ue),m=v),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Bt(A),A;default:if(typeof m.status=="string")m.then(Ue,Ue);else{if(A=Ta,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(C){if(m.status==="pending"){var U=m;U.status="fulfilled",U.value=C}},function(C){if(m.status==="pending"){var U=m;U.status="rejected",U.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Bt(A),A}throw tt=m,pe}}var tt=null;function Ke(){if(tt===null)throw Error(n(459));var A=tt;return tt=null,A}function Bt(A){if(A===pe||A===xe)throw Error(n(483))}var mt=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Nt(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Tt(A,m,v){var C=A.updateQueue;if(C===null)return null;if(C=C.shared,(da&2)!==0){var U=C.pending;return U===null?m.next=m:(m.next=U.next,U.next=m),C.pending=m,m=Ef(A),Xg(A,null,v),m}return AA(A,C,m,v),Ef(A)}function kt(A,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194048)!==0)){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,et(A,v)}}function rr(A,m){var v=A.updateQueue,C=A.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var U=null,q=null;if(v=v.firstBaseUpdate,v!==null){do{var ue={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};q===null?U=q=ue:q=q.next=ue,v=v.next}while(v!==null);q===null?U=q=m:q=q.next=m}else U=q=m;v={baseState:C.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:C.shared,callbacks:C.callbacks},A.updateQueue=v;return}A=v.lastBaseUpdate,A===null?v.firstBaseUpdate=m:A.next=m,v.lastBaseUpdate=m}var Yt=!1;function br(){if(Yt){var A=ud;if(A!==null)throw A}}function er(A,m,v,C){Yt=!1;var U=A.updateQueue;mt=!1;var q=U.firstBaseUpdate,ue=U.lastBaseUpdate,ye=U.shared.pending;if(ye!==null){U.shared.pending=null;var Pe=ye,lt=Pe.next;Pe.next=null,ue===null?q=lt:ue.next=lt,ue=Pe;var St=A.alternate;St!==null&&(St=St.updateQueue,ye=St.lastBaseUpdate,ye!==ue&&(ye===null?St.firstBaseUpdate=lt:ye.next=lt,St.lastBaseUpdate=Pe))}if(q!==null){var Ot=U.baseState;ue=0,St=lt=Pe=null,ye=q;do{var At=ye.lane&-536870913,ht=At!==ye.lane;if(ht?(Rn&At)===At:(C&At)===At){At!==0&&At===kf&&(Yt=!0),St!==null&&(St=St.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Gr=A,Or=ye;At=m;var ya=v;switch(Or.tag){case 1:if(Gr=Or.payload,typeof Gr=="function"){Ot=Gr.call(ya,Ot,At);break e}Ot=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Or.payload,At=typeof Gr=="function"?Gr.call(ya,Ot,At):Gr,At==null)break e;Ot=d({},Ot,At);break e;case 2:mt=!0}}At=ye.callback,At!==null&&(A.flags|=64,ht&&(A.flags|=8192),ht=U.callbacks,ht===null?U.callbacks=[At]:ht.push(At))}else ht={lane:At,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},St===null?(lt=St=ht,Pe=Ot):St=St.next=ht,ue|=At;if(ye=ye.next,ye===null){if(ye=U.shared.pending,ye===null)break;ht=ye,ye=ht.next,ht.next=null,U.lastBaseUpdate=ht,U.shared.pending=null}}while(!0);St===null&&(Pe=Ot),U.baseState=Pe,U.firstBaseUpdate=lt,U.lastBaseUpdate=St,q===null&&(U.shared.lanes=0),A0|=ue,A.lanes=ue,A.memoizedState=Ot}}function Dn(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function $n(A,m){var v=A.callbacks;if(v!==null)for(A.callbacks=null,A=0;A<v.length;A++)Dn(v[A],m)}var fn=te(null),ln=te(0);function ra(A,m){A=Lf,H(ln,A),H(fn,m),Lf=A|m.baseLanes}function Gn(){H(ln,Lf),H(fn,fn.current)}function Yr(){Lf=ln.current,P(fn),P(ln)}var ua=0,kr=null,Ur=null,On=null,Pn=!1,ai=!1,Ps=!1,rs=0,ns=0,vs=null,Ml=0;function Kn(){throw Error(n(321))}function bs(A,m){if(m===null)return!1;for(var v=0;v<m.length&&v<A.length;v++)if(!ti(A[v],m[v]))return!1;return!0}function gc(A,m,v,C,U,q){return ua=q,kr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,V.H=A===null||A.memoizedState===null?HM:VM,Ps=!1,q=v(C,U),Ps=!1,ai&&(q=jf(m,v,C,U)),xA(A),q}function xA(A){V.H=LE;var m=Ur!==null&&Ur.next!==null;if(ua=0,On=Ur=kr=null,Pn=!1,ns=0,vs=null,m)throw Error(n(300));A===null||Li||(A=A.dependencies,A!==null&&tx(A)&&(Li=!0))}function jf(A,m,v,C){kr=A;var U=0;do{if(ai&&(vs=null),ns=0,ai=!1,25<=U)throw Error(n(301));if(U+=1,On=Ur=null,A.updateQueue!=null){var q=A.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}V.H=BAe,q=m(v,C)}while(ai);return q}function vA(){var A=V.H,m=A.useState()[0];return m=typeof m.then=="function"?bA(m):m,A=A.useState()[0],(Ur!==null?Ur.memoizedState:null)!==A&&(kr.flags|=1024),m}function Ba(){var A=rs!==0;return rs=0,A}function np(A,m,v){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~v}function nx(A){if(Pn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Pn=!1}ua=0,On=Ur=kr=null,ai=!1,ns=rs=0,vs=null}function io(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?kr.memoizedState=On=A:On=On.next=A,On}function Ra(){if(Ur===null){var A=kr.alternate;A=A!==null?A.memoizedState:null}else A=Ur.next;var m=On===null?kr.memoizedState:On.next;if(m!==null)On=m,Ur=A;else{if(A===null)throw kr.alternate===null?Error(n(467)):Error(n(310));Ur=A,A={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},On===null?kr.memoizedState=On=A:On=On.next=A}return On}function Bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bA(A){var m=ns;return ns+=1,vs===null&&(vs=[]),A=st(vs,A,m),m=kr,(On===null?m.memoizedState:On.next)===null&&(m=m.alternate,V.H=m===null||m.memoizedState===null?HM:VM),A}function Fo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return bA(A);if(A.$$typeof===_)return Os(A)}throw Error(n(438,String(A)))}function yA(A){var m=null,v=kr.updateQueue;if(v!==null&&(m=v.memoCache),m==null){var C=kr.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(U){return U.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),v===null&&(v=Bf(),kr.updateQueue=v),v.memoCache=m,v=m.data[m.index],v===void 0)for(v=m.data[m.index]=Array(A),C=0;C<A;C++)v[C]=R;return m.index++,v}function Oo(A,m){return typeof m=="function"?m(A):m}function ap(A){var m=Ra();return t0(m,Ur,A)}function t0(A,m,v){var C=A.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=v;var U=A.baseQueue,q=C.pending;if(q!==null){if(U!==null){var ue=U.next;U.next=q.next,q.next=ue}m.baseQueue=U=q,C.pending=null}if(q=A.baseState,U===null)A.memoizedState=q;else{m=U.next;var ye=ue=null,Pe=null,lt=m,St=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(Rn&Ot)===Ot:(ua&Ot)===Ot){var At=lt.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===kf&&(St=!0);else if((ua&At)===At){lt=lt.next,At===kf&&(St=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(ye=Pe=Ot,ue=q):Pe=Pe.next=Ot,kr.lanes|=At,A0|=At;Ot=lt.action,Ps&&v(q,Ot),q=lt.hasEagerState?lt.eagerState:v(q,Ot)}else At={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(ye=Pe=At,ue=q):Pe=Pe.next=At,kr.lanes|=Ot,A0|=Ot;lt=lt.next}while(lt!==null&&lt!==m);if(Pe===null?ue=q:Pe.next=ye,!ti(q,A.memoizedState)&&(Li=!0,St&&(v=ud,v!==null)))throw v;A.memoizedState=q,A.baseState=ue,A.baseQueue=Pe,C.lastRenderedState=q}return U===null&&(C.lanes=0),[A.memoizedState,C.dispatch]}function ax(A){var m=Ra(),v=m.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=A;var C=v.dispatch,U=v.pending,q=m.memoizedState;if(U!==null){v.pending=null;var ue=U=U.next;do q=A(q,ue.action),ue=ue.next;while(ue!==U);ti(q,m.memoizedState)||(Li=!0),m.memoizedState=q,m.baseQueue===null&&(m.baseState=q),v.lastRenderedState=q}return[q,C]}function sp(A,m,v){var C=kr,U=Ra(),q=Mn;if(q){if(v===void 0)throw Error(n(407));v=v()}else v=m();var ue=!ti((Ur||U).memoizedState,v);ue&&(U.memoizedState=v,Li=!0),U=U.queue;var ye=r0.bind(null,C,U,A);if(s0(2048,8,ye,[A]),U.getSnapshot!==m||ue||On!==null&&On.memoizedState.tag&1){if(C.flags|=2048,Ad(9,cp(),ip.bind(null,C,U,v,m),null),Ta===null)throw Error(n(349));q||(ua&124)!==0||sx(C,m,v)}return v}function sx(A,m,v){A.flags|=16384,A={getSnapshot:m,value:v},m=kr.updateQueue,m===null?(m=Bf(),kr.updateQueue=m,m.stores=[A]):(v=m.stores,v===null?m.stores=[A]:v.push(A))}function ip(A,m,v,C){m.value=v,m.getSnapshot=C,SE(m)&&kE(A)}function r0(A,m,v){return v(function(){SE(m)&&kE(A)})}function SE(A){var m=A.getSnapshot;A=A.value;try{var v=m();return!ti(A,v)}catch{return!0}}function kE(A){var m=nd(A,2);m!==null&&Ec(m,A,2)}function op(A){var m=io();if(typeof A=="function"){var v=A;if(A=v(),Ps){Mt(!0);try{v()}finally{Mt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:A},m}function dd(A,m,v,C){return A.baseState=v,t0(A,Ur,typeof C=="function"?C:Oo)}function fj(A,m,v,C,U){if(RE(A))throw Error(n(485));if(A=m.action,A!==null){var q={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){q.listeners.push(ue)}};V.T!==null?v(!0):q.isTransition=!1,C(q),v=m.pending,v===null?(q.next=m.pending=q,jE(m,q)):(q.next=v.next,m.pending=v.next=q)}}function jE(A,m){var v=m.action,C=m.payload,U=A.state;if(m.isTransition){var q=V.T,ue={};V.T=ue;try{var ye=v(U,C),Pe=V.S;Pe!==null&&Pe(ue,ye),BE(A,m,ye)}catch(lt){n0(A,m,lt)}finally{V.T=q}}else try{q=v(U,C),BE(A,m,q)}catch(lt){n0(A,m,lt)}}function BE(A,m,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){hb(A,m,C)},function(C){return n0(A,m,C)}):hb(A,m,v)}function hb(A,m,v){m.status="fulfilled",m.value=v,mb(m),A.state=v,m=A.pending,m!==null&&(v=m.next,v===m?A.pending=null:(v=v.next,m.next=v,jE(A,v)))}function n0(A,m,v){var C=A.pending;if(A.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=v,mb(m),m=m.next;while(m!==C)}A.action=null}function mb(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function pb(A,m){return m}function lp(A,m){if(Mn){var v=Ta.formState;if(v!==null){e:{var C=kr;if(Mn){if(qa){t:{for(var U=qa,q=uu;U.nodeType!==8;){if(!q){U=null;break t}if(U=pd(U.nextSibling),U===null){U=null;break t}}q=U.data,U=q==="F!"||q==="F"?U:null}if(U){qa=pd(U.nextSibling),C=U.data==="F!";break e}}Sf(C)}C=!1}C&&(m=v[0])}}return v=io(),v.memoizedState=v.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pb,lastRenderedState:m},v.queue=C,v=MM.bind(null,kr,C),C.dispatch=v,C=op(!1),q=hj.bind(null,kr,!1,C.queue),C=io(),U={state:m,dispatch:null,action:A,pending:null},C.queue=U,v=fj.bind(null,kr,U,q,v),U.dispatch=v,C.memoizedState=A,[m,v,!1]}function ix(A){var m=Ra();return a0(m,Ur,A)}function a0(A,m,v){if(m=t0(A,m,pb)[0],A=ap(Oo)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=bA(m)}catch(ue){throw ue===pe?xe:ue}else C=m;m=Ra();var U=m.queue,q=U.dispatch;return v!==m.memoizedState&&(kr.flags|=2048,Ad(9,cp(),TE.bind(null,U,v),null)),[C,q,A]}function TE(A,m){A.action=m}function IE(A){var m=Ra(),v=Ur;if(v!==null)return a0(m,v,A);Ra(),m=m.memoizedState,v=Ra();var C=v.queue.dispatch;return v.memoizedState=A,[m,C,!1]}function Ad(A,m,v,C){return A={tag:A,create:v,deps:C,inst:m,next:null},m=kr.updateQueue,m===null&&(m=Bf(),kr.updateQueue=m),v=m.lastEffect,v===null?m.lastEffect=A.next=A:(C=v.next,v.next=A,A.next=C,m.lastEffect=A),A}function cp(){return{destroy:void 0,resource:void 0}}function ox(){return Ra().memoizedState}function xc(A,m,v,C){var U=io();C=C===void 0?null:C,kr.flags|=A,U.memoizedState=Ad(1|m,cp(),v,C)}function s0(A,m,v,C){var U=Ra();C=C===void 0?null:C;var q=U.memoizedState.inst;Ur!==null&&C!==null&&bs(C,Ur.memoizedState.deps)?U.memoizedState=Ad(m,q,v,C):(kr.flags|=A,U.memoizedState=Ad(1|m,q,v,C))}function gb(A,m){xc(8390656,8,A,m)}function FE(A,m){s0(2048,8,A,m)}function xb(A,m){return s0(4,2,A,m)}function Tf(A,m){return s0(4,4,A,m)}function OE(A,m){if(typeof m=="function"){A=A();var v=m(A);return function(){typeof v=="function"?v():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function vb(A,m,v){v=v!=null?v.concat([A]):null,s0(4,4,OE.bind(null,m,A),v)}function bb(){}function yb(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;return m!==null&&bs(m,C[1])?C[0]:(v.memoizedState=[A,m],A)}function DE(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;if(m!==null&&bs(m,C[1]))return C[0];if(C=A(),Ps){Mt(!0);try{A()}finally{Mt(!1)}}return v.memoizedState=[C,m],C}function If(A,m,v){return v===void 0||(ua&1073741824)!==0?A.memoizedState=m:(A.memoizedState=v,A=DU(),kr.lanes|=A,A0|=A,v)}function lx(A,m,v,C){return ti(v,m)?v:fn.current!==null?(A=If(A,v,C),ti(A,m)||(Li=!0),A):(ua&42)===0?(Li=!0,A.memoizedState=v):(A=DU(),kr.lanes|=A,A0|=A,m)}function up(A,m,v,C,U){var q=K.p;K.p=q!==0&&8>q?q:8;var ue=V.T,ye={};V.T=ye,hj(A,!1,m,v);try{var Pe=U(),lt=V.S;if(lt!==null&&lt(ye,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var St=NE(Pe,C);_b(A,m,St,wc(A))}else _b(A,m,C,wc(A))}catch(Ot){_b(A,m,{then:function(){},status:"rejected",reason:Ot},wc())}finally{K.p=q,V.T=ue}}function fd(){}function hu(A,m,v,C){if(A.tag!==5)throw Error(n(476));var U=hd(A).queue;up(A,U,m,z,v===null?fd:function(){return dp(A),v(C)})}function hd(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:z},next:null};var v={};return m.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:v},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function dp(A){var m=hd(A).next.queue;_b(A,m,{},wc())}function Ap(){return Os(Vb)}function wb(){return Ra().memoizedState}function PE(){return Ra().memoizedState}function Eb(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var v=wc();A=Nt(v);var C=Tt(m,A,v);C!==null&&(Ec(C,m,v),kt(C,m,v)),m={cache:Ab()},A.payload=m;return}m=m.return}}function Cb(A,m,v){var C=wc();v={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},RE(A)?UM(m,v):(v=fA(A,m,v,C),v!==null&&(Ec(v,A,C),QM(v,m,C)))}function MM(A,m,v){var C=wc();_b(A,m,v,C)}function _b(A,m,v,C){var U={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(RE(A))UM(m,U);else{var q=A.alternate;if(A.lanes===0&&(q===null||q.lanes===0)&&(q=m.lastRenderedReducer,q!==null))try{var ue=m.lastRenderedState,ye=q(ue,v);if(U.hasEagerState=!0,U.eagerState=ye,ti(ye,ue))return AA(A,m,U,0),Ta===null&&Pl(),!1}catch{}finally{}if(v=fA(A,m,U,C),v!==null)return Ec(v,A,C),QM(v,m,C),!0}return!1}function hj(A,m,v,C){if(C={lane:2,revertLane:Gj(),action:C,hasEagerState:!1,eagerState:null,next:null},RE(A)){if(m)throw Error(n(479))}else m=fA(A,v,C,2),m!==null&&Ec(m,A,2)}function RE(A){var m=A.alternate;return A===kr||m!==null&&m===kr}function UM(A,m){ai=Pn=!0;var v=A.pending;v===null?m.next=m:(m.next=v.next,v.next=m),A.pending=m}function QM(A,m,v){if((v&4194048)!==0){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,et(A,v)}}var LE={readContext:Os,use:Fo,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},HM={readContext:Os,use:Fo,useCallback:function(A,m){return io().memoizedState=[A,m===void 0?null:m],A},useContext:Os,useEffect:gb,useImperativeHandle:function(A,m,v){v=v!=null?v.concat([A]):null,xc(4194308,4,OE.bind(null,m,A),v)},useLayoutEffect:function(A,m){return xc(4194308,4,A,m)},useInsertionEffect:function(A,m){xc(4,2,A,m)},useMemo:function(A,m){var v=io();m=m===void 0?null:m;var C=A();if(Ps){Mt(!0);try{A()}finally{Mt(!1)}}return v.memoizedState=[C,m],C},useReducer:function(A,m,v){var C=io();if(v!==void 0){var U=v(m);if(Ps){Mt(!0);try{v(m)}finally{Mt(!1)}}}else U=m;return C.memoizedState=C.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},C.queue=A,A=A.dispatch=Cb.bind(null,kr,A),[C.memoizedState,A]},useRef:function(A){var m=io();return A={current:A},m.memoizedState=A},useState:function(A){A=op(A);var m=A.queue,v=MM.bind(null,kr,m);return m.dispatch=v,[A.memoizedState,v]},useDebugValue:bb,useDeferredValue:function(A,m){var v=io();return If(v,A,m)},useTransition:function(){var A=op(!1);return A=up.bind(null,kr,A.queue,!0,!1),io().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,v){var C=kr,U=io();if(Mn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=m(),Ta===null)throw Error(n(349));(Rn&124)!==0||sx(C,m,v)}U.memoizedState=v;var q={value:v,getSnapshot:m};return U.queue=q,gb(r0.bind(null,C,q,A),[A]),C.flags|=2048,Ad(9,cp(),ip.bind(null,C,q,v,m),null),v},useId:function(){var A=io(),m=Ta.identifierPrefix;if(Mn){var v=od,C=id;v=(C&~(1<<32-Pt(C)-1)).toString(32)+v,m="«"+m+"R"+v,v=rs++,0<v&&(m+="H"+v.toString(32)),m+="»"}else v=Ml++,m="«"+m+"r"+v.toString(32)+"»";return A.memoizedState=m},useHostTransitionStatus:Ap,useFormState:lp,useActionState:lp,useOptimistic:function(A){var m=io();m.memoizedState=m.baseState=A;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=v,m=hj.bind(null,kr,!0,v),v.dispatch=m,[A,m]},useMemoCache:yA,useCacheRefresh:function(){return io().memoizedState=Eb.bind(null,kr)}},VM={readContext:Os,use:Fo,useCallback:yb,useContext:Os,useEffect:FE,useImperativeHandle:vb,useInsertionEffect:xb,useLayoutEffect:Tf,useMemo:DE,useReducer:ap,useRef:ox,useState:function(){return ap(Oo)},useDebugValue:bb,useDeferredValue:function(A,m){var v=Ra();return lx(v,Ur.memoizedState,A,m)},useTransition:function(){var A=ap(Oo)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:bA(A),m]},useSyncExternalStore:sp,useId:wb,useHostTransitionStatus:Ap,useFormState:ix,useActionState:ix,useOptimistic:function(A,m){var v=Ra();return dd(v,Ur,A,m)},useMemoCache:yA,useCacheRefresh:PE},BAe={readContext:Os,use:Fo,useCallback:yb,useContext:Os,useEffect:FE,useImperativeHandle:vb,useInsertionEffect:xb,useLayoutEffect:Tf,useMemo:DE,useReducer:ax,useRef:ox,useState:function(){return ax(Oo)},useDebugValue:bb,useDeferredValue:function(A,m){var v=Ra();return Ur===null?If(v,A,m):lx(v,Ur.memoizedState,A,m)},useTransition:function(){var A=ax(Oo)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:bA(A),m]},useSyncExternalStore:sp,useId:wb,useHostTransitionStatus:Ap,useFormState:IE,useActionState:IE,useOptimistic:function(A,m){var v=Ra();return Ur!==null?dd(v,Ur,A,m):(v.baseState=A,[A,v.queue.dispatch])},useMemoCache:yA,useCacheRefresh:PE},cx=null,Nb=0;function ME(A){var m=Nb;return Nb+=1,cx===null&&(cx=[]),st(cx,A,m)}function Sb(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function UE(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function zM(A){var m=A._init;return m(A._payload)}function $M(A){function m(Xe,He){if(A){var at=Xe.deletions;at===null?(Xe.deletions=[He],Xe.flags|=16):at.push(He)}}function v(Xe,He){if(!A)return null;for(;He!==null;)m(Xe,He),He=He.sibling;return null}function C(Xe){for(var He=new Map;Xe!==null;)Xe.key!==null?He.set(Xe.key,Xe):He.set(Xe.index,Xe),Xe=Xe.sibling;return He}function U(Xe,He){return Xe=cu(Xe,He),Xe.index=0,Xe.sibling=null,Xe}function q(Xe,He,at){return Xe.index=at,A?(at=Xe.alternate,at!==null?(at=at.index,at<He?(Xe.flags|=67108866,He):at):(Xe.flags|=67108866,He)):(Xe.flags|=1048576,He)}function ue(Xe){return A&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function ye(Xe,He,at,jt){return He===null||He.tag!==6?(He=Yg(at,Xe.mode,jt),He.return=Xe,He):(He=U(He,at),He.return=Xe,He)}function Pe(Xe,He,at,jt){var hr=at.type;return hr===g?St(Xe,He,at.props.children,jt,at.key):He!==null&&(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===N&&zM(hr)===He.type)?(He=U(He,at.props),Sb(He,at),He.return=Xe,He):(He=Cf(at.type,at.key,at.props,null,Xe.mode,jt),Sb(He,at),He.return=Xe,He)}function lt(Xe,He,at,jt){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=Jm(at,Xe.mode,jt),He.return=Xe,He):(He=U(He,at.children||[]),He.return=Xe,He)}function St(Xe,He,at,jt,hr){return He===null||He.tag!==7?(He=ad(at,Xe.mode,jt,hr),He.return=Xe,He):(He=U(He,at),He.return=Xe,He)}function Ot(Xe,He,at){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=Yg(""+He,Xe.mode,at),He.return=Xe,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return at=Cf(He.type,He.key,He.props,null,Xe.mode,at),Sb(at,He),at.return=Xe,at;case p:return He=Jm(He,Xe.mode,at),He.return=Xe,He;case N:var jt=He._init;return He=jt(He._payload),Ot(Xe,He,at)}if(J(He)||O(He))return He=ad(He,Xe.mode,at,null),He.return=Xe,He;if(typeof He.then=="function")return Ot(Xe,ME(He),at);if(He.$$typeof===_)return Ot(Xe,gA(Xe,He),at);UE(Xe,He)}return null}function At(Xe,He,at,jt){var hr=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return hr!==null?null:ye(Xe,He,""+at,jt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case h:return at.key===hr?Pe(Xe,He,at,jt):null;case p:return at.key===hr?lt(Xe,He,at,jt):null;case N:return hr=at._init,at=hr(at._payload),At(Xe,He,at,jt)}if(J(at)||O(at))return hr!==null?null:St(Xe,He,at,jt,null);if(typeof at.then=="function")return At(Xe,He,ME(at),jt);if(at.$$typeof===_)return At(Xe,He,gA(Xe,at),jt);UE(Xe,at)}return null}function ht(Xe,He,at,jt,hr){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return Xe=Xe.get(at)||null,ye(He,Xe,""+jt,hr);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case h:return Xe=Xe.get(jt.key===null?at:jt.key)||null,Pe(He,Xe,jt,hr);case p:return Xe=Xe.get(jt.key===null?at:jt.key)||null,lt(He,Xe,jt,hr);case N:var wn=jt._init;return jt=wn(jt._payload),ht(Xe,He,at,jt,hr)}if(J(jt)||O(jt))return Xe=Xe.get(at)||null,St(He,Xe,jt,hr,null);if(typeof jt.then=="function")return ht(Xe,He,at,ME(jt),hr);if(jt.$$typeof===_)return ht(Xe,He,at,gA(He,jt),hr);UE(He,jt)}return null}function Gr(Xe,He,at,jt){for(var hr=null,wn=null,wr=He,Rr=He=0,Ui=null;wr!==null&&Rr<at.length;Rr++){wr.index>Rr?(Ui=wr,wr=null):Ui=wr.sibling;var qn=At(Xe,wr,at[Rr],jt);if(qn===null){wr===null&&(wr=Ui);break}A&&wr&&qn.alternate===null&&m(Xe,wr),He=q(qn,He,Rr),wn===null?hr=qn:wn.sibling=qn,wn=qn,wr=Ui}if(Rr===at.length)return v(Xe,wr),Mn&&Nf(Xe,Rr),hr;if(wr===null){for(;Rr<at.length;Rr++)wr=Ot(Xe,at[Rr],jt),wr!==null&&(He=q(wr,He,Rr),wn===null?hr=wr:wn.sibling=wr,wn=wr);return Mn&&Nf(Xe,Rr),hr}for(wr=C(wr);Rr<at.length;Rr++)Ui=ht(wr,Xe,Rr,at[Rr],jt),Ui!==null&&(A&&Ui.alternate!==null&&wr.delete(Ui.key===null?Rr:Ui.key),He=q(Ui,He,Rr),wn===null?hr=Ui:wn.sibling=Ui,wn=Ui);return A&&wr.forEach(function(y0){return m(Xe,y0)}),Mn&&Nf(Xe,Rr),hr}function Or(Xe,He,at,jt){if(at==null)throw Error(n(151));for(var hr=null,wn=null,wr=He,Rr=He=0,Ui=null,qn=at.next();wr!==null&&!qn.done;Rr++,qn=at.next()){wr.index>Rr?(Ui=wr,wr=null):Ui=wr.sibling;var y0=At(Xe,wr,qn.value,jt);if(y0===null){wr===null&&(wr=Ui);break}A&&wr&&y0.alternate===null&&m(Xe,wr),He=q(y0,He,Rr),wn===null?hr=y0:wn.sibling=y0,wn=y0,wr=Ui}if(qn.done)return v(Xe,wr),Mn&&Nf(Xe,Rr),hr;if(wr===null){for(;!qn.done;Rr++,qn=at.next())qn=Ot(Xe,qn.value,jt),qn!==null&&(He=q(qn,He,Rr),wn===null?hr=qn:wn.sibling=qn,wn=qn);return Mn&&Nf(Xe,Rr),hr}for(wr=C(wr);!qn.done;Rr++,qn=at.next())qn=ht(wr,Xe,Rr,qn.value,jt),qn!==null&&(A&&qn.alternate!==null&&wr.delete(qn.key===null?Rr:qn.key),He=q(qn,He,Rr),wn===null?hr=qn:wn.sibling=qn,wn=qn);return A&&wr.forEach(function(Tfe){return m(Xe,Tfe)}),Mn&&Nf(Xe,Rr),hr}function ya(Xe,He,at,jt){if(typeof at=="object"&&at!==null&&at.type===g&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case h:e:{for(var hr=at.key;He!==null;){if(He.key===hr){if(hr=at.type,hr===g){if(He.tag===7){v(Xe,He.sibling),jt=U(He,at.props.children),jt.return=Xe,Xe=jt;break e}}else if(He.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===N&&zM(hr)===He.type){v(Xe,He.sibling),jt=U(He,at.props),Sb(jt,at),jt.return=Xe,Xe=jt;break e}v(Xe,He);break}else m(Xe,He);He=He.sibling}at.type===g?(jt=ad(at.props.children,Xe.mode,jt,at.key),jt.return=Xe,Xe=jt):(jt=Cf(at.type,at.key,at.props,null,Xe.mode,jt),Sb(jt,at),jt.return=Xe,Xe=jt)}return ue(Xe);case p:e:{for(hr=at.key;He!==null;){if(He.key===hr)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){v(Xe,He.sibling),jt=U(He,at.children||[]),jt.return=Xe,Xe=jt;break e}else{v(Xe,He);break}else m(Xe,He);He=He.sibling}jt=Jm(at,Xe.mode,jt),jt.return=Xe,Xe=jt}return ue(Xe);case N:return hr=at._init,at=hr(at._payload),ya(Xe,He,at,jt)}if(J(at))return Gr(Xe,He,at,jt);if(O(at)){if(hr=O(at),typeof hr!="function")throw Error(n(150));return at=hr.call(at),Or(Xe,He,at,jt)}if(typeof at.then=="function")return ya(Xe,He,ME(at),jt);if(at.$$typeof===_)return ya(Xe,He,gA(Xe,at),jt);UE(Xe,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,He!==null&&He.tag===6?(v(Xe,He.sibling),jt=U(He,at),jt.return=Xe,Xe=jt):(v(Xe,He),jt=Yg(at,Xe.mode,jt),jt.return=Xe,Xe=jt),ue(Xe)):v(Xe,He)}return function(Xe,He,at,jt){try{Nb=0;var hr=ya(Xe,He,at,jt);return cx=null,hr}catch(wr){if(wr===pe||wr===xe)throw wr;var wn=Ri(29,wr,null,Xe.mode);return wn.lanes=jt,wn.return=Xe,wn}finally{}}}var ux=$M(!0),GM=$M(!1),mu=te(null),wA=null;function i0(A){var m=A.alternate;H(wi,wi.current&1),H(mu,A),wA===null&&(m===null||fn.current!==null||m.memoizedState!==null)&&(wA=A)}function KM(A){if(A.tag===22){if(H(wi,wi.current),H(mu,A),wA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(wA=A)}}else o0()}function o0(){H(wi,wi.current),H(mu,mu.current)}function Ff(A){P(mu),wA===A&&(wA=null),P(wi)}var wi=te(0);function QE(A){for(var m=A;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||aB(v)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function mj(A,m,v,C){m=A.memoizedState,v=v(C,m),v=v==null?m:d({},m,v),A.memoizedState=v,A.lanes===0&&(A.updateQueue.baseState=v)}var pj={enqueueSetState:function(A,m,v){A=A._reactInternals;var C=wc(),U=Nt(C);U.payload=m,v!=null&&(U.callback=v),m=Tt(A,U,C),m!==null&&(Ec(m,A,C),kt(m,A,C))},enqueueReplaceState:function(A,m,v){A=A._reactInternals;var C=wc(),U=Nt(C);U.tag=1,U.payload=m,v!=null&&(U.callback=v),m=Tt(A,U,C),m!==null&&(Ec(m,A,C),kt(m,A,C))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var v=wc(),C=Nt(v);C.tag=2,m!=null&&(C.callback=m),m=Tt(A,C,v),m!==null&&(Ec(m,A,v),kt(m,A,v))}};function qM(A,m,v,C,U,q,ue){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(C,q,ue):m.prototype&&m.prototype.isPureReactComponent?!sA(v,C)||!sA(U,q):!0}function WM(A,m,v,C){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,C),m.state!==A&&pj.enqueueReplaceState(m,m.state,null)}function fp(A,m){var v=m;if("ref"in m){v={};for(var C in m)C!=="ref"&&(v[C]=m[C])}if(A=A.defaultProps){v===m&&(v=d({},v));for(var U in A)v[U]===void 0&&(v[U]=A[U])}return v}var HE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function XM(A){HE(A)}function YM(A){console.error(A)}function JM(A){HE(A)}function VE(A,m){try{var v=A.onUncaughtError;v(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function ZM(A,m,v){try{var C=A.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function gj(A,m,v){return v=Nt(v),v.tag=3,v.payload={element:null},v.callback=function(){VE(A,m)},v}function eU(A){return A=Nt(A),A.tag=3,A}function tU(A,m,v,C){var U=v.type.getDerivedStateFromError;if(typeof U=="function"){var q=C.value;A.payload=function(){return U(q)},A.callback=function(){ZM(m,v,C)}}var ue=v.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(A.callback=function(){ZM(m,v,C),typeof U!="function"&&(f0===null?f0=new Set([this]):f0.add(this));var ye=C.stack;this.componentDidCatch(C.value,{componentStack:ye!==null?ye:""})})}function TAe(A,m,v,C,U){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=v.alternate,m!==null&&e0(m,v,U,!0),v=mu.current,v!==null){switch(v.tag){case 13:return wA===null?Qj():v.alternate===null&&ys===0&&(ys=3),v.flags&=-257,v.flags|=65536,v.lanes=U,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?v.updateQueue=new Set([C]):m.add(C),Vj(A,C,U)),!1;case 22:return v.flags|=65536,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=m):(v=m.retryQueue,v===null?m.retryQueue=new Set([C]):v.add(C)),Vj(A,C,U)),!1}throw Error(n(435,v.tag))}return Vj(A,C,U),Qj(),!1}if(Mn)return m=mu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=U,C!==db&&(A=Error(n(422),{cause:C}),Zh(mn(A,v)))):(C!==db&&(m=Error(n(423),{cause:C}),Zh(mn(m,v))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,C=mn(C,v),U=gj(A.stateNode,C,U),rr(A,U),ys!==4&&(ys=2)),!1;var q=Error(n(520),{cause:C});if(q=mn(q,v),Ob===null?Ob=[q]:Ob.push(q),ys!==4&&(ys=2),m===null)return!0;C=mn(C,v),v=m;do{switch(v.tag){case 3:return v.flags|=65536,A=U&-U,v.lanes|=A,A=gj(v.stateNode,C,A),rr(v,A),!1;case 1:if(m=v.type,q=v.stateNode,(v.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(f0===null||!f0.has(q))))return v.flags|=65536,U&=-U,v.lanes|=U,U=eU(U),tU(U,A,v,C),rr(v,U),!1}v=v.return}while(v!==null);return!1}var rU=Error(n(461)),Li=!1;function oo(A,m,v,C){m.child=A===null?GM(m,null,v,C):ux(m,A.child,v,C)}function nU(A,m,v,C,U){v=v.render;var q=m.ref;if("ref"in C){var ue={};for(var ye in C)ye!=="ref"&&(ue[ye]=C[ye])}else ue=C;return fu(m),C=gc(A,m,v,ue,q,U),ye=Ba(),A!==null&&!Li?(np(A,m,U),Of(A,m,U)):(Mn&&ye&&Zm(m),m.flags|=1,oo(A,m,C,U),m.child)}function aU(A,m,v,C,U){if(A===null){var q=v.type;return typeof q=="function"&&!Yh(q)&&q.defaultProps===void 0&&v.compare===null?(m.tag=15,m.type=q,sU(A,m,q,C,U)):(A=Cf(v.type,null,C,m,m.mode,U),A.ref=m.ref,A.return=m,m.child=A)}if(q=A.child,!_j(A,U)){var ue=q.memoizedProps;if(v=v.compare,v=v!==null?v:sA,v(ue,C)&&A.ref===m.ref)return Of(A,m,U)}return m.flags|=1,A=cu(q,C),A.ref=m.ref,A.return=m,m.child=A}function sU(A,m,v,C,U){if(A!==null){var q=A.memoizedProps;if(sA(q,C)&&A.ref===m.ref)if(Li=!1,m.pendingProps=C=q,_j(A,U))(A.flags&131072)!==0&&(Li=!0);else return m.lanes=A.lanes,Of(A,m,U)}return xj(A,m,v,C,U)}function iU(A,m,v){var C=m.pendingProps,U=C.children,q=A!==null?A.memoizedState:null;if(C.mode==="hidden"){if((m.flags&128)!==0){if(C=q!==null?q.baseLanes|v:v,A!==null){for(U=m.child=A.child,q=0;U!==null;)q=q|U.lanes|U.childLanes,U=U.sibling;m.childLanes=q&~C}else m.childLanes=0,m.child=null;return oU(A,m,C,v)}if((v&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&se(m,q!==null?q.cachePool:null),q!==null?ra(m,q):Gn(),KM(m);else return m.lanes=m.childLanes=536870912,oU(A,m,q!==null?q.baseLanes|v:v,v)}else q!==null?(se(m,q.cachePool),ra(m,q),o0(),m.memoizedState=null):(A!==null&&se(m,null),Gn(),o0());return oo(A,m,U,v),m.child}function oU(A,m,v,C){var U=ee();return U=U===null?null:{parent:Ds._currentValue,pool:U},m.memoizedState={baseLanes:v,cachePool:U},A!==null&&se(m,null),Gn(),KM(m),A!==null&&e0(A,m,C,!0),null}function zE(A,m){var v=m.ref;if(v===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(A===null||A.ref!==v)&&(m.flags|=4194816)}}function xj(A,m,v,C,U){return fu(m),v=gc(A,m,v,C,void 0,U),C=Ba(),A!==null&&!Li?(np(A,m,U),Of(A,m,U)):(Mn&&C&&Zm(m),m.flags|=1,oo(A,m,v,U),m.child)}function lU(A,m,v,C,U,q){return fu(m),m.updateQueue=null,v=jf(m,C,v,U),xA(A),C=Ba(),A!==null&&!Li?(np(A,m,q),Of(A,m,q)):(Mn&&C&&Zm(m),m.flags|=1,oo(A,m,v,q),m.child)}function cU(A,m,v,C,U){if(fu(m),m.stateNode===null){var q=ri,ue=v.contextType;typeof ue=="object"&&ue!==null&&(q=Os(ue)),q=new v(C,q),m.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=pj,m.stateNode=q,q._reactInternals=m,q=m.stateNode,q.props=C,q.state=m.memoizedState,q.refs={},Qe(m),ue=v.contextType,q.context=typeof ue=="object"&&ue!==null?Os(ue):ri,q.state=m.memoizedState,ue=v.getDerivedStateFromProps,typeof ue=="function"&&(mj(m,v,ue,C),q.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ue=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ue!==q.state&&pj.enqueueReplaceState(q,q.state,null),er(m,C,q,U),br(),q.state=m.memoizedState),typeof q.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(A===null){q=m.stateNode;var ye=m.memoizedProps,Pe=fp(v,ye);q.props=Pe;var lt=q.context,St=v.contextType;ue=ri,typeof St=="object"&&St!==null&&(ue=Os(St));var Ot=v.getDerivedStateFromProps;St=typeof Ot=="function"||typeof q.getSnapshotBeforeUpdate=="function",ye=m.pendingProps!==ye,St||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ye||lt!==ue)&&WM(m,q,C,ue),mt=!1;var At=m.memoizedState;q.state=At,er(m,C,q,U),br(),lt=m.memoizedState,ye||At!==lt||mt?(typeof Ot=="function"&&(mj(m,v,Ot,C),lt=m.memoizedState),(Pe=mt||qM(m,v,Pe,C,At,lt,ue))?(St||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(m.flags|=4194308)):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=lt),q.props=C,q.state=lt,q.context=ue,C=Pe):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{q=m.stateNode,Ve(A,m),ue=m.memoizedProps,St=fp(v,ue),q.props=St,Ot=m.pendingProps,At=q.context,lt=v.contextType,Pe=ri,typeof lt=="object"&&lt!==null&&(Pe=Os(lt)),ye=v.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ue!==Ot||At!==Pe)&&WM(m,q,C,Pe),mt=!1,At=m.memoizedState,q.state=At,er(m,C,q,U),br();var ht=m.memoizedState;ue!==Ot||At!==ht||mt||A!==null&&A.dependencies!==null&&tx(A.dependencies)?(typeof ye=="function"&&(mj(m,v,ye,C),ht=m.memoizedState),(St=mt||qM(m,v,St,C,At,ht,Pe)||A!==null&&A.dependencies!==null&&tx(A.dependencies))?(lt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(C,ht,Pe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(C,ht,Pe)),typeof q.componentDidUpdate=="function"&&(m.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=ht),q.props=C,q.state=ht,q.context=Pe,C=St):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),C=!1)}return q=C,zE(A,m),C=(m.flags&128)!==0,q||C?(q=m.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:q.render(),m.flags|=1,A!==null&&C?(m.child=ux(m,A.child,null,U),m.child=ux(m,null,v,U)):oo(A,m,v,U),m.memoizedState=q.state,A=m.child):A=Of(A,m,U),A}function uU(A,m,v,C){return dl(),m.flags|=256,oo(A,m,v,C),m.child}var vj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bj(A){return{baseLanes:A,cachePool:de()}}function yj(A,m,v){return A=A!==null?A.childLanes&~v:0,m&&(A|=pu),A}function dU(A,m,v){var C=m.pendingProps,U=!1,q=(m.flags&128)!==0,ue;if((ue=q)||(ue=A!==null&&A.memoizedState===null?!1:(wi.current&2)!==0),ue&&(U=!0,m.flags&=-129),ue=(m.flags&32)!==0,m.flags&=-33,A===null){if(Mn){if(U?i0(m):o0(),Mn){var ye=qa,Pe;if(Pe=ye){e:{for(Pe=ye,ye=uu;Pe.nodeType!==8;){if(!ye){ye=null;break e}if(Pe=pd(Pe.nextSibling),Pe===null){ye=null;break e}}ye=Pe}ye!==null?(m.memoizedState={dehydrated:ye,treeContext:_f!==null?{id,overflow:od}:null,retryLane:536870912,hydrationErrors:null},Pe=Ri(18,null,null,0),Pe.stateNode=ye,Pe.return=m,m.child=Pe,Fs=m,qa=null,Pe=!0):Pe=!1}Pe||Sf(m)}if(ye=m.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return aB(ye)?m.lanes=32:m.lanes=536870912,null;Ff(m)}return ye=C.children,C=C.fallback,U?(o0(),U=m.mode,ye=$E({mode:"hidden",children:ye},U),C=ad(C,U,v,null),ye.return=m,C.return=m,ye.sibling=C,m.child=ye,U=m.child,U.memoizedState=bj(v),U.childLanes=yj(A,ue,v),m.memoizedState=vj,C):(i0(m),wj(m,ye))}if(Pe=A.memoizedState,Pe!==null&&(ye=Pe.dehydrated,ye!==null)){if(q)m.flags&256?(i0(m),m.flags&=-257,m=Ej(A,m,v)):m.memoizedState!==null?(o0(),m.child=A.child,m.flags|=128,m=null):(o0(),U=C.fallback,ye=m.mode,C=$E({mode:"visible",children:C.children},ye),U=ad(U,ye,v,null),U.flags|=2,C.return=m,U.return=m,C.sibling=U,m.child=C,ux(m,A.child,null,v),C=m.child,C.memoizedState=bj(v),C.childLanes=yj(A,ue,v),m.memoizedState=vj,m=U);else if(i0(m),aB(ye)){if(ue=ye.nextSibling&&ye.nextSibling.dataset,ue)var lt=ue.dgst;ue=lt,C=Error(n(419)),C.stack="",C.digest=ue,Zh({value:C,source:null,stack:null}),m=Ej(A,m,v)}else if(Li||e0(A,m,v,!1),ue=(v&A.childLanes)!==0,Li||ue){if(ue=Ta,ue!==null&&(C=v&-v,C=(C&42)!==0?1:gt(C),C=(C&(ue.suspendedLanes|v))!==0?0:C,C!==0&&C!==Pe.retryLane))throw Pe.retryLane=C,nd(A,C),Ec(ue,A,C),rU;ye.data==="$?"||Qj(),m=Ej(A,m,v)}else ye.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Pe.treeContext,qa=pd(ye.nextSibling),Fs=m,Mn=!0,mA=null,uu=!1,A!==null&&(Ll[ul++]=id,Ll[ul++]=od,Ll[ul++]=_f,id=A.id,od=A.overflow,_f=m),m=wj(m,C.children),m.flags|=4096);return m}return U?(o0(),U=C.fallback,ye=m.mode,Pe=A.child,lt=Pe.sibling,C=cu(Pe,{mode:"hidden",children:C.children}),C.subtreeFlags=Pe.subtreeFlags&65011712,lt!==null?U=cu(lt,U):(U=ad(U,ye,v,null),U.flags|=2),U.return=m,C.return=m,C.sibling=U,m.child=C,C=U,U=m.child,ye=A.child.memoizedState,ye===null?ye=bj(v):(Pe=ye.cachePool,Pe!==null?(lt=Ds._currentValue,Pe=Pe.parent!==lt?{parent:lt,pool:lt}:Pe):Pe=de(),ye={baseLanes:ye.baseLanes|v,cachePool:Pe}),U.memoizedState=ye,U.childLanes=yj(A,ue,v),m.memoizedState=vj,C):(i0(m),v=A.child,A=v.sibling,v=cu(v,{mode:"visible",children:C.children}),v.return=m,v.sibling=null,A!==null&&(ue=m.deletions,ue===null?(m.deletions=[A],m.flags|=16):ue.push(A)),m.child=v,m.memoizedState=null,v)}function wj(A,m){return m=$E({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function $E(A,m){return A=Ri(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Ej(A,m,v){return ux(m,A.child,null,v),A=wj(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function AU(A,m,v){A.lanes|=m;var C=A.alternate;C!==null&&(C.lanes|=m),Zg(A.return,m,v)}function Cj(A,m,v,C,U){var q=A.memoizedState;q===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:U}:(q.isBackwards=m,q.rendering=null,q.renderingStartTime=0,q.last=C,q.tail=v,q.tailMode=U)}function fU(A,m,v){var C=m.pendingProps,U=C.revealOrder,q=C.tail;if(oo(A,m,C.children,v),C=wi.current,(C&2)!==0)C=C&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&AU(A,v,m);else if(A.tag===19)AU(A,v,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}C&=1}switch(H(wi,C),U){case"forwards":for(v=m.child,U=null;v!==null;)A=v.alternate,A!==null&&QE(A)===null&&(U=v),v=v.sibling;v=U,v===null?(U=m.child,m.child=null):(U=v.sibling,v.sibling=null),Cj(m,!1,U,v,q);break;case"backwards":for(v=null,U=m.child,m.child=null;U!==null;){if(A=U.alternate,A!==null&&QE(A)===null){m.child=U;break}A=U.sibling,U.sibling=v,v=U,U=A}Cj(m,!0,v,null,q);break;case"together":Cj(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Of(A,m,v){if(A!==null&&(m.dependencies=A.dependencies),A0|=m.lanes,(v&m.childLanes)===0)if(A!==null){if(e0(A,m,v,!1),(v&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,v=cu(A,A.pendingProps),m.child=v,v.return=m;A.sibling!==null;)A=A.sibling,v=v.sibling=cu(A,A.pendingProps),v.return=m;v.sibling=null}return m.child}function _j(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&tx(A)))}function IAe(A,m,v){switch(m.tag){case 3:ie(m,m.stateNode.containerInfo),pA(m,Ds,A.memoizedState.cache),dl();break;case 27:case 5:fe(m);break;case 4:ie(m,m.stateNode.containerInfo);break;case 10:pA(m,m.type,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(i0(m),m.flags|=128,null):(v&m.child.childLanes)!==0?dU(A,m,v):(i0(m),A=Of(A,m,v),A!==null?A.sibling:null);i0(m);break;case 19:var U=(A.flags&128)!==0;if(C=(v&m.childLanes)!==0,C||(e0(A,m,v,!1),C=(v&m.childLanes)!==0),U){if(C)return fU(A,m,v);m.flags|=128}if(U=m.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),H(wi,wi.current),C)break;return null;case 22:case 23:return m.lanes=0,iU(A,m,v);case 24:pA(m,Ds,A.memoizedState.cache)}return Of(A,m,v)}function hU(A,m,v){if(A!==null)if(A.memoizedProps!==m.pendingProps)Li=!0;else{if(!_j(A,v)&&(m.flags&128)===0)return Li=!1,IAe(A,m,v);Li=(A.flags&131072)!==0}else Li=!1,Mn&&(m.flags&1048576)!==0&&yE(m,Jg,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var C=m.elementType,U=C._init;if(C=U(C._payload),m.type=C,typeof C=="function")Yh(C)?(A=fp(C,A),m.tag=1,m=cU(null,m,C,A,v)):(m.tag=0,m=xj(null,m,C,A,v));else{if(C!=null){if(U=C.$$typeof,U===j){m.tag=11,m=nU(null,m,C,A,v);break e}else if(U===E){m.tag=14,m=aU(null,m,C,A,v);break e}}throw m=M(C)||C,Error(n(306,m,""))}}return m;case 0:return xj(A,m,m.type,m.pendingProps,v);case 1:return C=m.type,U=fp(C,m.pendingProps),cU(A,m,C,U,v);case 3:e:{if(ie(m,m.stateNode.containerInfo),A===null)throw Error(n(387));C=m.pendingProps;var q=m.memoizedState;U=q.element,Ve(A,m),er(m,C,null,v);var ue=m.memoizedState;if(C=ue.cache,pA(m,Ds,C),C!==q.cache&&ex(m,[Ds],v,!0),br(),C=ue.element,q.isDehydrated)if(q={element:C,isDehydrated:!1,cache:ue.cache},m.updateQueue.baseState=q,m.memoizedState=q,m.flags&256){m=uU(A,m,C,v);break e}else if(C!==U){U=mn(Error(n(424)),m),Zh(U),m=uU(A,m,C,v);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(qa=pd(A.firstChild),Fs=m,Mn=!0,mA=null,uu=!0,v=GM(m,null,C,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(dl(),C===U){m=Of(A,m,v);break e}oo(A,m,C,v)}m=m.child}return m;case 26:return zE(A,m),A===null?(v=x7(m.type,null,m.pendingProps,null))?m.memoizedState=v:Mn||(v=m.type,A=m.pendingProps,C=sC(ae.current).createElement(v),C[nr]=m,C[xr]=A,co(C,v,A),$e(C),m.stateNode=C):m.memoizedState=x7(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return fe(m),A===null&&Mn&&(C=m.stateNode=m7(m.type,m.pendingProps,ae.current),Fs=m,uu=!0,U=qa,p0(m.type)?(sB=U,qa=pd(C.firstChild)):qa=U),oo(A,m,m.pendingProps.children,v),zE(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Mn&&((U=C=qa)&&(C=ife(C,m.type,m.pendingProps,uu),C!==null?(m.stateNode=C,Fs=m,qa=pd(C.firstChild),uu=!1,U=!0):U=!1),U||Sf(m)),fe(m),U=m.type,q=m.pendingProps,ue=A!==null?A.memoizedProps:null,C=q.children,tB(U,q)?C=null:ue!==null&&tB(U,ue)&&(m.flags|=32),m.memoizedState!==null&&(U=gc(A,m,vA,null,null,v),Vb._currentValue=U),zE(A,m),oo(A,m,C,v),m.child;case 6:return A===null&&Mn&&((A=v=qa)&&(v=ofe(v,m.pendingProps,uu),v!==null?(m.stateNode=v,Fs=m,qa=null,A=!0):A=!1),A||Sf(m)),null;case 13:return dU(A,m,v);case 4:return ie(m,m.stateNode.containerInfo),C=m.pendingProps,A===null?m.child=ux(m,null,C,v):oo(A,m,C,v),m.child;case 11:return nU(A,m,m.type,m.pendingProps,v);case 7:return oo(A,m,m.pendingProps,v),m.child;case 8:return oo(A,m,m.pendingProps.children,v),m.child;case 12:return oo(A,m,m.pendingProps.children,v),m.child;case 10:return C=m.pendingProps,pA(m,m.type,C.value),oo(A,m,C.children,v),m.child;case 9:return U=m.type._context,C=m.pendingProps.children,fu(m),U=Os(U),C=C(U),m.flags|=1,oo(A,m,C,v),m.child;case 14:return aU(A,m,m.type,m.pendingProps,v);case 15:return sU(A,m,m.type,m.pendingProps,v);case 19:return fU(A,m,v);case 31:return C=m.pendingProps,v=m.mode,C={mode:C.mode,children:C.children},A===null?(v=$E(C,v),v.ref=m.ref,m.child=v,v.return=m,m=v):(v=cu(A.child,C),v.ref=m.ref,m.child=v,v.return=m,m=v),m;case 22:return iU(A,m,v);case 24:return fu(m),C=Os(Ds),A===null?(U=ee(),U===null&&(U=Ta,q=Ab(),U.pooledCache=q,q.refCount++,q!==null&&(U.pooledCacheLanes|=v),U=q),m.memoizedState={parent:C,cache:U},Qe(m),pA(m,Ds,U)):((A.lanes&v)!==0&&(Ve(A,m),er(m,null,null,v),br()),U=A.memoizedState,q=m.memoizedState,U.parent!==C?(U={parent:C,cache:C},m.memoizedState=U,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=U),pA(m,Ds,C)):(C=q.cache,pA(m,Ds,C),C!==U.cache&&ex(m,[Ds],v,!0))),oo(A,m,m.pendingProps.children,v),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function Df(A){A.flags|=4}function mU(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!E7(m)){if(m=mu.current,m!==null&&((Rn&4194048)===Rn?wA!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||m!==wA))throw tt=Ee,ge;A.flags|=8192}}function GE(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?hn():536870912,A.lanes|=m,hx|=m)}function kb(A,m){if(!Mn)switch(A.tailMode){case"hidden":m=A.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?A.tail=null:v.sibling=null;break;case"collapsed":v=A.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:C.sibling=null}}function as(A){var m=A.alternate!==null&&A.alternate.child===A.child,v=0,C=0;if(m)for(var U=A.child;U!==null;)v|=U.lanes|U.childLanes,C|=U.subtreeFlags&65011712,C|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)v|=U.lanes|U.childLanes,C|=U.subtreeFlags,C|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=C,A.childLanes=v,m}function FAe(A,m,v){var C=m.pendingProps;switch(ep(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(m),null;case 1:return as(m),null;case 3:return v=m.stateNode,C=null,A!==null&&(C=A.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),Au(Ds),ce(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(A===null||A.child===null)&&(so(m)?Df(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,EE())),as(m),null;case 26:return v=m.memoizedState,A===null?(Df(m),v!==null?(as(m),mU(m,v)):(as(m),m.flags&=-16777217)):v?v!==A.memoizedState?(Df(m),as(m),mU(m,v)):(as(m),m.flags&=-16777217):(A.memoizedProps!==C&&Df(m),as(m),m.flags&=-16777217),null;case 27:Ie(m),v=ae.current;var U=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==C&&Df(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return as(m),null}A=X.current,so(m)?wE(m):(A=m7(U,C,v),m.stateNode=A,Df(m))}return as(m),null;case 5:if(Ie(m),v=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==C&&Df(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return as(m),null}if(A=X.current,so(m))wE(m);else{switch(U=sC(ae.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof C.is=="string"?U.createElement("select",{is:C.is}):U.createElement("select"),C.multiple?A.multiple=!0:C.size&&(A.size=C.size);break;default:A=typeof C.is=="string"?U.createElement(v,{is:C.is}):U.createElement(v)}}A[nr]=m,A[xr]=C;e:for(U=m.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===m)break e;for(;U.sibling===null;){if(U.return===null||U.return===m)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}m.stateNode=A;e:switch(co(A,v,C),v){case"button":case"input":case"select":case"textarea":A=!!C.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Df(m)}}return as(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==C&&Df(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(A=ae.current,so(m)){if(A=m.stateNode,v=m.memoizedProps,C=null,U=Fs,U!==null)switch(U.tag){case 27:case 5:C=U.memoizedProps}A[nr]=m,A=!!(A.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||l7(A.nodeValue,v)),A||Sf(m)}else A=sC(A).createTextNode(C),A[nr]=m,m.stateNode=A}return as(m),null;case 13:if(C=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=so(m),C!==null&&C.dehydrated!==null){if(A===null){if(!U)throw Error(n(318));if(U=m.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[nr]=m}else dl(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;as(m),U=!1}else U=EE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return m.flags&256?(Ff(m),m):(Ff(m),null)}if(Ff(m),(m.flags&128)!==0)return m.lanes=v,m;if(v=C!==null,A=A!==null&&A.memoizedState!==null,v){C=m.child,U=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(U=C.alternate.memoizedState.cachePool.pool);var q=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(q=C.memoizedState.cachePool.pool),q!==U&&(C.flags|=2048)}return v!==A&&v&&(m.child.flags|=8192),GE(m,m.updateQueue),as(m),null;case 4:return ce(),A===null&&Xj(m.stateNode.containerInfo),as(m),null;case 10:return Au(m.type),as(m),null;case 19:if(P(wi),U=m.memoizedState,U===null)return as(m),null;if(C=(m.flags&128)!==0,q=U.rendering,q===null)if(C)kb(U,!1);else{if(ys!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(q=QE(A),q!==null){for(m.flags|=128,kb(U,!1),A=q.updateQueue,m.updateQueue=A,GE(m,A),m.subtreeFlags=0,A=v,v=m.child;v!==null;)Ym(v,A),v=v.sibling;return H(wi,wi.current&1|2),m.child}A=A.sibling}U.tail!==null&&Te()>WE&&(m.flags|=128,C=!0,kb(U,!1),m.lanes=4194304)}else{if(!C)if(A=QE(q),A!==null){if(m.flags|=128,C=!0,A=A.updateQueue,m.updateQueue=A,GE(m,A),kb(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Mn)return as(m),null}else 2*Te()-U.renderingStartTime>WE&&v!==536870912&&(m.flags|=128,C=!0,kb(U,!1),m.lanes=4194304);U.isBackwards?(q.sibling=m.child,m.child=q):(A=U.last,A!==null?A.sibling=q:m.child=q,U.last=q)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=Te(),m.sibling=null,A=wi.current,H(wi,C?A&1|2:A&1),m):(as(m),null);case 22:case 23:return Ff(m),Yr(),C=m.memoizedState!==null,A!==null?A.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(v&536870912)!==0&&(m.flags&128)===0&&(as(m),m.subtreeFlags&6&&(m.flags|=8192)):as(m),v=m.updateQueue,v!==null&&GE(m,v.retryQueue),v=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==v&&(m.flags|=2048),A!==null&&P(Q),null;case 24:return v=null,A!==null&&(v=A.memoizedState.cache),m.memoizedState.cache!==v&&(m.flags|=2048),Au(Ds),as(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function OAe(A,m){switch(ep(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return Au(Ds),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return Ie(m),null;case 13:if(Ff(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));dl()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return P(wi),null;case 4:return ce(),null;case 10:return Au(m.type),null;case 22:case 23:return Ff(m),Yr(),A!==null&&P(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return Au(Ds),null;case 25:return null;default:return null}}function pU(A,m){switch(ep(m),m.tag){case 3:Au(Ds),ce();break;case 26:case 27:case 5:Ie(m);break;case 4:ce();break;case 13:Ff(m);break;case 19:P(wi);break;case 10:Au(m.type);break;case 22:case 23:Ff(m),Yr(),A!==null&&P(Q);break;case 24:Au(Ds)}}function jb(A,m){try{var v=m.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var U=C.next;v=U;do{if((v.tag&A)===A){C=void 0;var q=v.create,ue=v.inst;C=q(),ue.destroy=C}v=v.next}while(v!==U)}}catch(ye){Ca(m,m.return,ye)}}function l0(A,m,v){try{var C=m.updateQueue,U=C!==null?C.lastEffect:null;if(U!==null){var q=U.next;C=q;do{if((C.tag&A)===A){var ue=C.inst,ye=ue.destroy;if(ye!==void 0){ue.destroy=void 0,U=m;var Pe=v,lt=ye;try{lt()}catch(St){Ca(U,Pe,St)}}}C=C.next}while(C!==q)}}catch(St){Ca(m,m.return,St)}}function gU(A){var m=A.updateQueue;if(m!==null){var v=A.stateNode;try{$n(m,v)}catch(C){Ca(A,A.return,C)}}}function xU(A,m,v){v.props=fp(A.type,A.memoizedProps),v.state=A.memoizedState;try{v.componentWillUnmount()}catch(C){Ca(A,m,C)}}function Bb(A,m){try{var v=A.ref;if(v!==null){switch(A.tag){case 26:case 27:case 5:var C=A.stateNode;break;case 30:C=A.stateNode;break;default:C=A.stateNode}typeof v=="function"?A.refCleanup=v(C):v.current=C}}catch(U){Ca(A,m,U)}}function EA(A,m){var v=A.ref,C=A.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(U){Ca(A,m,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(U){Ca(A,m,U)}else v.current=null}function vU(A){var m=A.type,v=A.memoizedProps,C=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(U){Ca(A,A.return,U)}}function Nj(A,m,v){try{var C=A.stateNode;tfe(C,A.type,v,m),C[xr]=m}catch(U){Ca(A,A.return,U)}}function bU(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&p0(A.type)||A.tag===4}function Sj(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||bU(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&p0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function kj(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(A,m):(m=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,m.appendChild(A),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=aC));else if(C!==4&&(C===27&&p0(A.type)&&(v=A.stateNode,m=null),A=A.child,A!==null))for(kj(A,m,v),A=A.sibling;A!==null;)kj(A,m,v),A=A.sibling}function KE(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?v.insertBefore(A,m):v.appendChild(A);else if(C!==4&&(C===27&&p0(A.type)&&(v=A.stateNode),A=A.child,A!==null))for(KE(A,m,v),A=A.sibling;A!==null;)KE(A,m,v),A=A.sibling}function yU(A){var m=A.stateNode,v=A.memoizedProps;try{for(var C=A.type,U=m.attributes;U.length;)m.removeAttributeNode(U[0]);co(m,C,v),m[nr]=A,m[xr]=v}catch(q){Ca(A,A.return,q)}}var Pf=!1,Rs=!1,jj=!1,wU=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function DAe(A,m){if(A=A.containerInfo,Zj=dC,A=ao(A),yi(A)){if("selectionStart"in A)var v={start:A.selectionStart,end:A.selectionEnd};else e:{v=(v=A.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var U=C.anchorOffset,q=C.focusNode;C=C.focusOffset;try{v.nodeType,q.nodeType}catch{v=null;break e}var ue=0,ye=-1,Pe=-1,lt=0,St=0,Ot=A,At=null;t:for(;;){for(var ht;Ot!==v||U!==0&&Ot.nodeType!==3||(ye=ue+U),Ot!==q||C!==0&&Ot.nodeType!==3||(Pe=ue+C),Ot.nodeType===3&&(ue+=Ot.nodeValue.length),(ht=Ot.firstChild)!==null;)At=Ot,Ot=ht;for(;;){if(Ot===A)break t;if(At===v&&++lt===U&&(ye=ue),At===q&&++St===C&&(Pe=ue),(ht=Ot.nextSibling)!==null)break;Ot=At,At=Ot.parentNode}Ot=ht}v=ye===-1||Pe===-1?null:{start:ye,end:Pe}}else v=null}v=v||{start:0,end:0}}else v=null;for(eB={focusedElem:A,selectionRange:v},dC=!1,Mi=m;Mi!==null;)if(m=Mi,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Mi=A;else for(;Mi!==null;){switch(m=Mi,q=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&q!==null){A=void 0,v=m,U=q.memoizedProps,q=q.memoizedState,C=v.stateNode;try{var Gr=fp(v.type,U,v.elementType===v.type);A=C.getSnapshotBeforeUpdate(Gr,q),C.__reactInternalSnapshotBeforeUpdate=A}catch(Or){Ca(v,v.return,Or)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,v=A.nodeType,v===9)nB(A);else if(v===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":nB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Mi=A;break}Mi=m.return}}function EU(A,m,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:c0(A,v),C&4&&jb(5,v);break;case 1:if(c0(A,v),C&4)if(A=v.stateNode,m===null)try{A.componentDidMount()}catch(ue){Ca(v,v.return,ue)}else{var U=fp(v.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(U,m,A.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ca(v,v.return,ue)}}C&64&&gU(v),C&512&&Bb(v,v.return);break;case 3:if(c0(A,v),C&64&&(A=v.updateQueue,A!==null)){if(m=null,v.child!==null)switch(v.child.tag){case 27:case 5:m=v.child.stateNode;break;case 1:m=v.child.stateNode}try{$n(A,m)}catch(ue){Ca(v,v.return,ue)}}break;case 27:m===null&&C&4&&yU(v);case 26:case 5:c0(A,v),m===null&&C&4&&vU(v),C&512&&Bb(v,v.return);break;case 12:c0(A,v);break;case 13:c0(A,v),C&4&&NU(A,v),C&64&&(A=v.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(v=zAe.bind(null,v),lfe(A,v))));break;case 22:if(C=v.memoizedState!==null||Pf,!C){m=m!==null&&m.memoizedState!==null||Rs,U=Pf;var q=Rs;Pf=C,(Rs=m)&&!q?u0(A,v,(v.subtreeFlags&8772)!==0):c0(A,v),Pf=U,Rs=q}break;case 30:break;default:c0(A,v)}}function CU(A){var m=A.alternate;m!==null&&(A.alternate=null,CU(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&we(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Wa=null,Ul=!1;function Rf(A,m,v){for(v=v.child;v!==null;)_U(A,m,v),v=v.sibling}function _U(A,m,v){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(pt,v)}catch{}switch(v.tag){case 26:Rs||EA(v,m),Rf(A,m,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Rs||EA(v,m);var C=Wa,U=Ul;p0(v.type)&&(Wa=v.stateNode,Ul=!1),Rf(A,m,v),Mb(v.stateNode),Wa=C,Ul=U;break;case 5:Rs||EA(v,m);case 6:if(C=Wa,U=Ul,Wa=null,Rf(A,m,v),Wa=C,Ul=U,Wa!==null)if(Ul)try{(Wa.nodeType===9?Wa.body:Wa.nodeName==="HTML"?Wa.ownerDocument.body:Wa).removeChild(v.stateNode)}catch(q){Ca(v,m,q)}else try{Wa.removeChild(v.stateNode)}catch(q){Ca(v,m,q)}break;case 18:Wa!==null&&(Ul?(A=Wa,f7(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,v.stateNode),Kb(A)):f7(Wa,v.stateNode));break;case 4:C=Wa,U=Ul,Wa=v.stateNode.containerInfo,Ul=!0,Rf(A,m,v),Wa=C,Ul=U;break;case 0:case 11:case 14:case 15:Rs||l0(2,v,m),Rs||l0(4,v,m),Rf(A,m,v);break;case 1:Rs||(EA(v,m),C=v.stateNode,typeof C.componentWillUnmount=="function"&&xU(v,m,C)),Rf(A,m,v);break;case 21:Rf(A,m,v);break;case 22:Rs=(C=Rs)||v.memoizedState!==null,Rf(A,m,v),Rs=C;break;default:Rf(A,m,v)}}function NU(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Kb(A)}catch(v){Ca(m,m.return,v)}}function PAe(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new wU),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new wU),m;default:throw Error(n(435,A.tag))}}function Bj(A,m){var v=PAe(A);m.forEach(function(C){var U=$Ae.bind(null,A,C);v.has(C)||(v.add(C),C.then(U,U))})}function vc(A,m){var v=m.deletions;if(v!==null)for(var C=0;C<v.length;C++){var U=v[C],q=A,ue=m,ye=ue;e:for(;ye!==null;){switch(ye.tag){case 27:if(p0(ye.type)){Wa=ye.stateNode,Ul=!1;break e}break;case 5:Wa=ye.stateNode,Ul=!1;break e;case 3:case 4:Wa=ye.stateNode.containerInfo,Ul=!0;break e}ye=ye.return}if(Wa===null)throw Error(n(160));_U(q,ue,U),Wa=null,Ul=!1,q=U.alternate,q!==null&&(q.return=null),U.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)SU(m,A),m=m.sibling}var md=null;function SU(A,m){var v=A.alternate,C=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:vc(m,A),bc(A),C&4&&(l0(3,A,A.return),jb(3,A),l0(5,A,A.return));break;case 1:vc(m,A),bc(A),C&512&&(Rs||v===null||EA(v,v.return)),C&64&&Pf&&(A=A.updateQueue,A!==null&&(C=A.callbacks,C!==null&&(v=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var U=md;if(vc(m,A),bc(A),C&512&&(Rs||v===null||EA(v,v.return)),C&4){var q=v!==null?v.memoizedState:null;if(C=A.memoizedState,v===null)if(C===null)if(A.stateNode===null){e:{C=A.type,v=A.memoizedProps,U=U.ownerDocument||U;t:switch(C){case"title":q=U.getElementsByTagName("title")[0],(!q||q[Ce]||q[nr]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=U.createElement(C),U.head.insertBefore(q,U.querySelector("head > title"))),co(q,C,v),q[nr]=A,$e(q),C=q;break e;case"link":var ue=y7("link","href",U).get(C+(v.href||""));if(ue){for(var ye=0;ye<ue.length;ye++)if(q=ue[ye],q.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&q.getAttribute("rel")===(v.rel==null?null:v.rel)&&q.getAttribute("title")===(v.title==null?null:v.title)&&q.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){ue.splice(ye,1);break t}}q=U.createElement(C),co(q,C,v),U.head.appendChild(q);break;case"meta":if(ue=y7("meta","content",U).get(C+(v.content||""))){for(ye=0;ye<ue.length;ye++)if(q=ue[ye],q.getAttribute("content")===(v.content==null?null:""+v.content)&&q.getAttribute("name")===(v.name==null?null:v.name)&&q.getAttribute("property")===(v.property==null?null:v.property)&&q.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&q.getAttribute("charset")===(v.charSet==null?null:v.charSet)){ue.splice(ye,1);break t}}q=U.createElement(C),co(q,C,v),U.head.appendChild(q);break;default:throw Error(n(468,C))}q[nr]=A,$e(q),C=q}A.stateNode=C}else w7(U,A.type,A.stateNode);else A.stateNode=b7(U,C,A.memoizedProps);else q!==C?(q===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):q.count--,C===null?w7(U,A.type,A.stateNode):b7(U,C,A.memoizedProps)):C===null&&A.stateNode!==null&&Nj(A,A.memoizedProps,v.memoizedProps)}break;case 27:vc(m,A),bc(A),C&512&&(Rs||v===null||EA(v,v.return)),v!==null&&C&4&&Nj(A,A.memoizedProps,v.memoizedProps);break;case 5:if(vc(m,A),bc(A),C&512&&(Rs||v===null||EA(v,v.return)),A.flags&32){U=A.stateNode;try{_o(U,"")}catch(ht){Ca(A,A.return,ht)}}C&4&&A.stateNode!=null&&(U=A.memoizedProps,Nj(A,U,v!==null?v.memoizedProps:U)),C&1024&&(jj=!0);break;case 6:if(vc(m,A),bc(A),C&4){if(A.stateNode===null)throw Error(n(162));C=A.memoizedProps,v=A.stateNode;try{v.nodeValue=C}catch(ht){Ca(A,A.return,ht)}}break;case 3:if(lC=null,U=md,md=iC(m.containerInfo),vc(m,A),md=U,bc(A),C&4&&v!==null&&v.memoizedState.isDehydrated)try{Kb(m.containerInfo)}catch(ht){Ca(A,A.return,ht)}jj&&(jj=!1,kU(A));break;case 4:C=md,md=iC(A.stateNode.containerInfo),vc(m,A),bc(A),md=C;break;case 12:vc(m,A),bc(A);break;case 13:vc(m,A),bc(A),A.child.flags&8192&&A.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Pj=Te()),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,Bj(A,C)));break;case 22:U=A.memoizedState!==null;var Pe=v!==null&&v.memoizedState!==null,lt=Pf,St=Rs;if(Pf=lt||U,Rs=St||Pe,vc(m,A),Rs=St,Pf=lt,bc(A),C&8192)e:for(m=A.stateNode,m._visibility=U?m._visibility&-2:m._visibility|1,U&&(v===null||Pe||Pf||Rs||hp(A)),v=null,m=A;;){if(m.tag===5||m.tag===26){if(v===null){Pe=v=m;try{if(q=Pe.stateNode,U)ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{ye=Pe.stateNode;var Ot=Pe.memoizedProps.style,At=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;ye.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ht){Ca(Pe,Pe.return,ht)}}}else if(m.tag===6){if(v===null){Pe=m;try{Pe.stateNode.nodeValue=U?"":Pe.memoizedProps}catch(ht){Ca(Pe,Pe.return,ht)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=A.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,Bj(A,v))));break;case 19:vc(m,A),bc(A),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,Bj(A,C)));break;case 30:break;case 21:break;default:vc(m,A),bc(A)}}function bc(A){var m=A.flags;if(m&2){try{for(var v,C=A.return;C!==null;){if(bU(C)){v=C;break}C=C.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var U=v.stateNode,q=Sj(A);KE(A,q,U);break;case 5:var ue=v.stateNode;v.flags&32&&(_o(ue,""),v.flags&=-33);var ye=Sj(A);KE(A,ye,ue);break;case 3:case 4:var Pe=v.stateNode.containerInfo,lt=Sj(A);kj(A,lt,Pe);break;default:throw Error(n(161))}}catch(St){Ca(A,A.return,St)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function kU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;kU(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function c0(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)EU(A,m.alternate,m),m=m.sibling}function hp(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:l0(4,m,m.return),hp(m);break;case 1:EA(m,m.return);var v=m.stateNode;typeof v.componentWillUnmount=="function"&&xU(m,m.return,v),hp(m);break;case 27:Mb(m.stateNode);case 26:case 5:EA(m,m.return),hp(m);break;case 22:m.memoizedState===null&&hp(m);break;case 30:hp(m);break;default:hp(m)}A=A.sibling}}function u0(A,m,v){for(v=v&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,U=A,q=m,ue=q.flags;switch(q.tag){case 0:case 11:case 15:u0(U,q,v),jb(4,q);break;case 1:if(u0(U,q,v),C=q,U=C.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(lt){Ca(C,C.return,lt)}if(C=q,U=C.updateQueue,U!==null){var ye=C.stateNode;try{var Pe=U.shared.hiddenCallbacks;if(Pe!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Pe.length;U++)Dn(Pe[U],ye)}catch(lt){Ca(C,C.return,lt)}}v&&ue&64&&gU(q),Bb(q,q.return);break;case 27:yU(q);case 26:case 5:u0(U,q,v),v&&C===null&&ue&4&&vU(q),Bb(q,q.return);break;case 12:u0(U,q,v);break;case 13:u0(U,q,v),v&&ue&4&&NU(U,q);break;case 22:q.memoizedState===null&&u0(U,q,v),Bb(q,q.return);break;case 30:break;default:u0(U,q,v)}m=m.sibling}}function Tj(A,m){var v=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==v&&(A!=null&&A.refCount++,v!=null&&tp(v))}function Ij(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&tp(A))}function CA(A,m,v,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)jU(A,m,v,C),m=m.sibling}function jU(A,m,v,C){var U=m.flags;switch(m.tag){case 0:case 11:case 15:CA(A,m,v,C),U&2048&&jb(9,m);break;case 1:CA(A,m,v,C);break;case 3:CA(A,m,v,C),U&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&tp(A)));break;case 12:if(U&2048){CA(A,m,v,C),A=m.stateNode;try{var q=m.memoizedProps,ue=q.id,ye=q.onPostCommit;typeof ye=="function"&&ye(ue,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Pe){Ca(m,m.return,Pe)}}else CA(A,m,v,C);break;case 13:CA(A,m,v,C);break;case 23:break;case 22:q=m.stateNode,ue=m.alternate,m.memoizedState!==null?q._visibility&2?CA(A,m,v,C):Tb(A,m):q._visibility&2?CA(A,m,v,C):(q._visibility|=2,dx(A,m,v,C,(m.subtreeFlags&10256)!==0)),U&2048&&Tj(ue,m);break;case 24:CA(A,m,v,C),U&2048&&Ij(m.alternate,m);break;default:CA(A,m,v,C)}}function dx(A,m,v,C,U){for(U=U&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var q=A,ue=m,ye=v,Pe=C,lt=ue.flags;switch(ue.tag){case 0:case 11:case 15:dx(q,ue,ye,Pe,U),jb(8,ue);break;case 23:break;case 22:var St=ue.stateNode;ue.memoizedState!==null?St._visibility&2?dx(q,ue,ye,Pe,U):Tb(q,ue):(St._visibility|=2,dx(q,ue,ye,Pe,U)),U&&lt&2048&&Tj(ue.alternate,ue);break;case 24:dx(q,ue,ye,Pe,U),U&&lt&2048&&Ij(ue.alternate,ue);break;default:dx(q,ue,ye,Pe,U)}m=m.sibling}}function Tb(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var v=A,C=m,U=C.flags;switch(C.tag){case 22:Tb(v,C),U&2048&&Tj(C.alternate,C);break;case 24:Tb(v,C),U&2048&&Ij(C.alternate,C);break;default:Tb(v,C)}m=m.sibling}}var Ib=8192;function Ax(A){if(A.subtreeFlags&Ib)for(A=A.child;A!==null;)BU(A),A=A.sibling}function BU(A){switch(A.tag){case 26:Ax(A),A.flags&Ib&&A.memoizedState!==null&&yfe(md,A.memoizedState,A.memoizedProps);break;case 5:Ax(A);break;case 3:case 4:var m=md;md=iC(A.stateNode.containerInfo),Ax(A),md=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=Ib,Ib=16777216,Ax(A),Ib=m):Ax(A));break;default:Ax(A)}}function TU(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function Fb(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Mi=C,FU(C,A)}TU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)IU(A),A=A.sibling}function IU(A){switch(A.tag){case 0:case 11:case 15:Fb(A),A.flags&2048&&l0(9,A,A.return);break;case 3:Fb(A);break;case 12:Fb(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,qE(A)):Fb(A);break;default:Fb(A)}}function qE(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Mi=C,FU(C,A)}TU(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:l0(8,m,m.return),qE(m);break;case 22:v=m.stateNode,v._visibility&2&&(v._visibility&=-3,qE(m));break;default:qE(m)}A=A.sibling}}function FU(A,m){for(;Mi!==null;){var v=Mi;switch(v.tag){case 0:case 11:case 15:l0(8,v,m);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:tp(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,Mi=C;else e:for(v=A;Mi!==null;){C=Mi;var U=C.sibling,q=C.return;if(CU(C),C===v){Mi=null;break e}if(U!==null){U.return=q,Mi=U;break e}Mi=q}}}var RAe={getCacheForType:function(A){var m=Os(Ds),v=m.data.get(A);return v===void 0&&(v=A(),m.data.set(A,v)),v}},LAe=typeof WeakMap=="function"?WeakMap:Map,da=0,Ta=null,_n=null,Rn=0,Aa=0,yc=null,d0=!1,fx=!1,Fj=!1,Lf=0,ys=0,A0=0,mp=0,Oj=0,pu=0,hx=0,Ob=null,Ql=null,Dj=!1,Pj=0,WE=1/0,XE=null,f0=null,lo=0,h0=null,mx=null,px=0,Rj=0,Lj=null,OU=null,Db=0,Mj=null;function wc(){if((da&2)!==0&&Rn!==0)return Rn&-Rn;if(V.T!==null){var A=kf;return A!==0?A:Gj()}return xt()}function DU(){pu===0&&(pu=(Rn&536870912)===0||Mn?fs():536870912);var A=mu.current;return A!==null&&(A.flags|=32),pu}function Ec(A,m,v){(A===Ta&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)&&(gx(A,0),m0(A,Rn,pu,!1)),ja(A,v),((da&2)===0||A!==Ta)&&(A===Ta&&((da&2)===0&&(mp|=v),ys===4&&m0(A,Rn,pu,!1)),_A(A))}function PU(A,m,v){if((da&6)!==0)throw Error(n(327));var C=!v&&(m&124)===0&&(m&A.expiredLanes)===0||In(A,m),U=C?QAe(A,m):Hj(A,m,!0),q=C;do{if(U===0){fx&&!C&&m0(A,m,0,!1);break}else{if(v=A.current.alternate,q&&!MAe(v)){U=Hj(A,m,!1),q=!1;continue}if(U===2){if(q=m,A.errorRecoveryDisabledLanes&q)var ue=0;else ue=A.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){m=ue;e:{var ye=A;U=Ob;var Pe=ye.current.memoizedState.isDehydrated;if(Pe&&(gx(ye,ue).flags|=256),ue=Hj(ye,ue,!1),ue!==2){if(Fj&&!Pe){ye.errorRecoveryDisabledLanes|=q,mp|=q,U=4;break e}q=Ql,Ql=U,q!==null&&(Ql===null?Ql=q:Ql.push.apply(Ql,q))}U=ue}if(q=!1,U!==2)continue}}if(U===1){gx(A,0),m0(A,m,0,!0);break}e:{switch(C=A,q=U,q){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:m0(C,m,pu,!d0);break e;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(U=Pj+300-Te(),10<U)){if(m0(C,m,pu,!d0),$r(C,0,!0)!==0)break e;C.timeoutHandle=d7(RU.bind(null,C,v,Ql,XE,Dj,m,pu,mp,hx,d0,q,2,-0,0),U);break e}RU(C,v,Ql,XE,Dj,m,pu,mp,hx,d0,q,0,-0,0)}}break}while(!0);_A(A)}function RU(A,m,v,C,U,q,ue,ye,Pe,lt,St,Ot,At,ht){if(A.timeoutHandle=-1,Ot=m.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(Hb={stylesheets:null,count:0,unsuspend:bfe},BU(m),Ot=wfe(),Ot!==null)){A.cancelPendingCommit=Ot(zU.bind(null,A,m,q,v,C,U,ue,ye,Pe,St,1,At,ht)),m0(A,q,ue,!lt);return}zU(A,m,q,v,C,U,ue,ye,Pe)}function MAe(A){for(var m=A;;){var v=m.tag;if((v===0||v===11||v===15)&&m.flags&16384&&(v=m.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var U=v[C],q=U.getSnapshot;U=U.value;try{if(!ti(q(),U))return!1}catch{return!1}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function m0(A,m,v,C){m&=~Oj,m&=~mp,A.suspendedLanes|=m,A.pingedLanes&=~m,C&&(A.warmLanes|=m),C=A.expirationTimes;for(var U=m;0<U;){var q=31-Pt(U),ue=1<<q;C[q]=-1,U&=~ue}v!==0&&pr(A,v,m)}function YE(){return(da&6)===0?(Pb(0),!1):!0}function Uj(){if(_n!==null){if(Aa===0)var A=_n.return;else A=_n,cd=ni=null,nx(A),cx=null,Nb=0,A=_n;for(;A!==null;)pU(A.alternate,A),A=A.return;_n=null}}function gx(A,m){var v=A.timeoutHandle;v!==-1&&(A.timeoutHandle=-1,nfe(v)),v=A.cancelPendingCommit,v!==null&&(A.cancelPendingCommit=null,v()),Uj(),Ta=A,_n=v=cu(A.current,null),Rn=m,Aa=0,yc=null,d0=!1,fx=In(A,m),Fj=!1,hx=pu=Oj=mp=A0=ys=0,Ql=Ob=null,Dj=!1,(m&8)!==0&&(m|=m&32);var C=A.entangledLanes;if(C!==0)for(A=A.entanglements,C&=m;0<C;){var U=31-Pt(C),q=1<<U;m|=A[U],C&=~q}return Lf=m,Pl(),v}function LU(A,m){kr=null,V.H=LE,m===pe||m===xe?(m=Ke(),Aa=3):m===ge?(m=Ke(),Aa=4):Aa=m===rU?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,yc=m,_n===null&&(ys=1,VE(A,mn(m,A.current)))}function MU(){var A=V.H;return V.H=LE,A===null?LE:A}function UU(){var A=V.A;return V.A=RAe,A}function Qj(){ys=4,d0||(Rn&4194048)!==Rn&&mu.current!==null||(fx=!0),(A0&134217727)===0&&(mp&134217727)===0||Ta===null||m0(Ta,Rn,pu,!1)}function Hj(A,m,v){var C=da;da|=2;var U=MU(),q=UU();(Ta!==A||Rn!==m)&&(XE=null,gx(A,m)),m=!1;var ue=ys;e:do try{if(Aa!==0&&_n!==null){var ye=_n,Pe=yc;switch(Aa){case 8:Uj(),ue=6;break e;case 3:case 2:case 9:case 6:mu.current===null&&(m=!0);var lt=Aa;if(Aa=0,yc=null,xx(A,ye,Pe,lt),v&&fx){ue=0;break e}break;default:lt=Aa,Aa=0,yc=null,xx(A,ye,Pe,lt)}}UAe(),ue=ys;break}catch(St){LU(A,St)}while(!0);return m&&A.shellSuspendCounter++,cd=ni=null,da=C,V.H=U,V.A=q,_n===null&&(Ta=null,Rn=0,Pl()),ue}function UAe(){for(;_n!==null;)QU(_n)}function QAe(A,m){var v=da;da|=2;var C=MU(),U=UU();Ta!==A||Rn!==m?(XE=null,WE=Te()+500,gx(A,m)):fx=In(A,m);e:do try{if(Aa!==0&&_n!==null){m=_n;var q=yc;t:switch(Aa){case 1:Aa=0,yc=null,xx(A,m,q,1);break;case 2:case 9:if(ke(q)){Aa=0,yc=null,HU(m);break}m=function(){Aa!==2&&Aa!==9||Ta!==A||(Aa=7),_A(A)},q.then(m,m);break e;case 3:Aa=7;break e;case 4:Aa=5;break e;case 7:ke(q)?(Aa=0,yc=null,HU(m)):(Aa=0,yc=null,xx(A,m,q,7));break;case 5:var ue=null;switch(_n.tag){case 26:ue=_n.memoizedState;case 5:case 27:var ye=_n;if(!ue||E7(ue)){Aa=0,yc=null;var Pe=ye.sibling;if(Pe!==null)_n=Pe;else{var lt=ye.return;lt!==null?(_n=lt,JE(lt)):_n=null}break t}}Aa=0,yc=null,xx(A,m,q,5);break;case 6:Aa=0,yc=null,xx(A,m,q,6);break;case 8:Uj(),ys=6;break e;default:throw Error(n(462))}}HAe();break}catch(St){LU(A,St)}while(!0);return cd=ni=null,V.H=C,V.A=U,da=v,_n!==null?0:(Ta=null,Rn=0,Pl(),ys)}function HAe(){for(;_n!==null&&!Se();)QU(_n)}function QU(A){var m=hU(A.alternate,A,Lf);A.memoizedProps=A.pendingProps,m===null?JE(A):_n=m}function HU(A){var m=A,v=m.alternate;switch(m.tag){case 15:case 0:m=lU(v,m,m.pendingProps,m.type,void 0,Rn);break;case 11:m=lU(v,m,m.pendingProps,m.type.render,m.ref,Rn);break;case 5:nx(m);default:pU(v,m),m=_n=Ym(m,Lf),m=hU(v,m,Lf)}A.memoizedProps=A.pendingProps,m===null?JE(A):_n=m}function xx(A,m,v,C){cd=ni=null,nx(m),cx=null,Nb=0;var U=m.return;try{if(TAe(A,U,m,v,Rn)){ys=1,VE(A,mn(v,A.current)),_n=null;return}}catch(q){if(U!==null)throw _n=U,q;ys=1,VE(A,mn(v,A.current)),_n=null;return}m.flags&32768?(Mn||C===1?A=!0:fx||(Rn&536870912)!==0?A=!1:(d0=A=!0,(C===2||C===9||C===3||C===6)&&(C=mu.current,C!==null&&C.tag===13&&(C.flags|=16384))),VU(m,A)):JE(m)}function JE(A){var m=A;do{if((m.flags&32768)!==0){VU(m,d0);return}A=m.return;var v=FAe(m.alternate,m,Lf);if(v!==null){_n=v;return}if(m=m.sibling,m!==null){_n=m;return}_n=m=A}while(m!==null);ys===0&&(ys=5)}function VU(A,m){do{var v=OAe(A.alternate,A);if(v!==null){v.flags&=32767,_n=v;return}if(v=A.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!m&&(A=A.sibling,A!==null)){_n=A;return}_n=A=v}while(A!==null);ys=6,_n=null}function zU(A,m,v,C,U,q,ue,ye,Pe){A.cancelPendingCommit=null;do ZE();while(lo!==0);if((da&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(q=m.lanes|m.childLanes,q|=ts,rn(A,v,q,ue,ye,Pe),A===Ta&&(_n=Ta=null,Rn=0),mx=m,h0=A,px=v,Rj=q,Lj=U,OU=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,GAe(De,function(){return WU(),null})):(A.callbackNode=null,A.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=V.T,V.T=null,U=K.p,K.p=2,ue=da,da|=4;try{DAe(A,m,v)}finally{da=ue,K.p=U,V.T=C}}lo=1,$U(),GU(),KU()}}function $U(){if(lo===1){lo=0;var A=h0,m=mx,v=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||v){v=V.T,V.T=null;var C=K.p;K.p=2;var U=da;da|=4;try{SU(m,A);var q=eB,ue=ao(A.containerInfo),ye=q.focusedElem,Pe=q.selectionRange;if(ue!==ye&&ye&&ye.ownerDocument&&iA(ye.ownerDocument.documentElement,ye)){if(Pe!==null&&yi(ye)){var lt=Pe.start,St=Pe.end;if(St===void 0&&(St=lt),"selectionStart"in ye)ye.selectionStart=lt,ye.selectionEnd=Math.min(St,ye.value.length);else{var Ot=ye.ownerDocument||document,At=Ot&&Ot.defaultView||window;if(At.getSelection){var ht=At.getSelection(),Gr=ye.textContent.length,Or=Math.min(Pe.start,Gr),ya=Pe.end===void 0?Or:Math.min(Pe.end,Gr);!ht.extend&&Or>ya&&(ue=ya,ya=Or,Or=ue);var Xe=td(ye,Or),He=td(ye,ya);if(Xe&&He&&(ht.rangeCount!==1||ht.anchorNode!==Xe.node||ht.anchorOffset!==Xe.offset||ht.focusNode!==He.node||ht.focusOffset!==He.offset)){var at=Ot.createRange();at.setStart(Xe.node,Xe.offset),ht.removeAllRanges(),Or>ya?(ht.addRange(at),ht.extend(He.node,He.offset)):(at.setEnd(He.node,He.offset),ht.addRange(at))}}}}for(Ot=[],ht=ye;ht=ht.parentNode;)ht.nodeType===1&&Ot.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<Ot.length;ye++){var jt=Ot[ye];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}dC=!!Zj,eB=Zj=null}finally{da=U,K.p=C,V.T=v}}A.current=m,lo=2}}function GU(){if(lo===2){lo=0;var A=h0,m=mx,v=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||v){v=V.T,V.T=null;var C=K.p;K.p=2;var U=da;da|=4;try{EU(A,m.alternate,m)}finally{da=U,K.p=C,V.T=v}}lo=3}}function KU(){if(lo===4||lo===3){lo=0,me();var A=h0,m=mx,v=px,C=OU;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?lo=5:(lo=0,mx=h0=null,qU(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(f0=null),Je(v),m=m.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(pt,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=V.T,U=K.p,K.p=2,V.T=null;try{for(var q=A.onRecoverableError,ue=0;ue<C.length;ue++){var ye=C[ue];q(ye.value,{componentStack:ye.stack})}}finally{V.T=m,K.p=U}}(px&3)!==0&&ZE(),_A(A),U=A.pendingLanes,(v&4194090)!==0&&(U&42)!==0?A===Mj?Db++:(Db=0,Mj=A):Db=0,Pb(0)}}function qU(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,tp(m)))}function ZE(A){return $U(),GU(),KU(),WU()}function WU(){if(lo!==5)return!1;var A=h0,m=Rj;Rj=0;var v=Je(px),C=V.T,U=K.p;try{K.p=32>v?32:v,V.T=null,v=Lj,Lj=null;var q=h0,ue=px;if(lo=0,mx=h0=null,px=0,(da&6)!==0)throw Error(n(331));var ye=da;if(da|=4,IU(q.current),jU(q,q.current,ue,v),da=ye,Pb(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(pt,q)}catch{}return!0}finally{K.p=U,V.T=C,qU(A,m)}}function XU(A,m,v){m=mn(v,m),m=gj(A.stateNode,m,2),A=Tt(A,m,2),A!==null&&(ja(A,2),_A(A))}function Ca(A,m,v){if(A.tag===3)XU(A,A,v);else for(;m!==null;){if(m.tag===3){XU(m,A,v);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(f0===null||!f0.has(C))){A=mn(v,A),v=eU(2),C=Tt(m,v,2),C!==null&&(tU(v,C,m,A),ja(C,2),_A(C));break}}m=m.return}}function Vj(A,m,v){var C=A.pingCache;if(C===null){C=A.pingCache=new LAe;var U=new Set;C.set(m,U)}else U=C.get(m),U===void 0&&(U=new Set,C.set(m,U));U.has(v)||(Fj=!0,U.add(v),A=VAe.bind(null,A,m,v),m.then(A,A))}function VAe(A,m,v){var C=A.pingCache;C!==null&&C.delete(m),A.pingedLanes|=A.suspendedLanes&v,A.warmLanes&=~v,Ta===A&&(Rn&v)===v&&(ys===4||ys===3&&(Rn&62914560)===Rn&&300>Te()-Pj?(da&2)===0&&gx(A,0):Oj|=v,hx===Rn&&(hx=0)),_A(A)}function YU(A,m){m===0&&(m=hn()),A=nd(A,m),A!==null&&(ja(A,m),_A(A))}function zAe(A){var m=A.memoizedState,v=0;m!==null&&(v=m.retryLane),YU(A,v)}function $Ae(A,m){var v=0;switch(A.tag){case 13:var C=A.stateNode,U=A.memoizedState;U!==null&&(v=U.retryLane);break;case 19:C=A.stateNode;break;case 22:C=A.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),YU(A,v)}function GAe(A,m){return _e(A,m)}var eC=null,vx=null,zj=!1,tC=!1,$j=!1,pp=0;function _A(A){A!==vx&&A.next===null&&(vx===null?eC=vx=A:vx=vx.next=A),tC=!0,zj||(zj=!0,qAe())}function Pb(A,m){if(!$j&&tC){$j=!0;do for(var v=!1,C=eC;C!==null;){if(A!==0){var U=C.pendingLanes;if(U===0)var q=0;else{var ue=C.suspendedLanes,ye=C.pingedLanes;q=(1<<31-Pt(42|A)+1)-1,q&=U&~(ue&~ye),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(v=!0,t7(C,q))}else q=Rn,q=$r(C,C===Ta?q:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(q&3)===0||In(C,q)||(v=!0,t7(C,q));C=C.next}while(v);$j=!1}}function KAe(){JU()}function JU(){tC=zj=!1;var A=0;pp!==0&&(rfe()&&(A=pp),pp=0);for(var m=Te(),v=null,C=eC;C!==null;){var U=C.next,q=ZU(C,m);q===0?(C.next=null,v===null?eC=U:v.next=U,U===null&&(vx=v)):(v=C,(A!==0||(q&3)!==0)&&(tC=!0)),C=U}Pb(A)}function ZU(A,m){for(var v=A.suspendedLanes,C=A.pingedLanes,U=A.expirationTimes,q=A.pendingLanes&-62914561;0<q;){var ue=31-Pt(q),ye=1<<ue,Pe=U[ue];Pe===-1?((ye&v)===0||(ye&C)!==0)&&(U[ue]=Pr(ye,m)):Pe<=m&&(A.expiredLanes|=ye),q&=~ye}if(m=Ta,v=Rn,v=$r(A,A===m?v:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C=A.callbackNode,v===0||A===m&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)return C!==null&&C!==null&&Fe(C),A.callbackNode=null,A.callbackPriority=0;if((v&3)===0||In(A,v)){if(m=v&-v,m===A.callbackPriority)return m;switch(C!==null&&Fe(C),Je(v)){case 2:case 8:v=be;break;case 32:v=De;break;case 268435456:v=qe;break;default:v=De}return C=e7.bind(null,A),v=_e(v,C),A.callbackPriority=m,A.callbackNode=v,m}return C!==null&&C!==null&&Fe(C),A.callbackPriority=2,A.callbackNode=null,2}function e7(A,m){if(lo!==0&&lo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var v=A.callbackNode;if(ZE()&&A.callbackNode!==v)return null;var C=Rn;return C=$r(A,A===Ta?C:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C===0?null:(PU(A,C,m),ZU(A,Te()),A.callbackNode!=null&&A.callbackNode===v?e7.bind(null,A):null)}function t7(A,m){if(ZE())return null;PU(A,m,!0)}function qAe(){afe(function(){(da&6)!==0?_e(We,KAe):JU()})}function Gj(){return pp===0&&(pp=fs()),pp}function r7(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:cc(""+A)}function n7(A,m){var v=m.ownerDocument.createElement("input");return v.name=m.name,v.value=m.value,A.id&&v.setAttribute("form",A.id),m.parentNode.insertBefore(v,m),A=new FormData(A),v.parentNode.removeChild(v),A}function WAe(A,m,v,C,U){if(m==="submit"&&v&&v.stateNode===U){var q=r7((U[xr]||null).action),ue=C.submitter;ue&&(m=(m=ue[xr]||null)?r7(m.formAction):ue.getAttribute("formAction"),m!==null&&(q=m,ue=null));var ye=new eu("action","action",null,C,U);A.push({event:ye,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(pp!==0){var Pe=ue?n7(U,ue):new FormData(U);hu(v,{pending:!0,data:Pe,method:U.method,action:q},null,Pe)}}else typeof q=="function"&&(ye.preventDefault(),Pe=ue?n7(U,ue):new FormData(U),hu(v,{pending:!0,data:Pe,method:U.method,action:q},q,Pe))},currentTarget:U}]})}}for(var Kj=0;Kj<wf.length;Kj++){var qj=wf[Kj],XAe=qj.toLowerCase(),YAe=qj[0].toUpperCase()+qj.slice(1);Ka(XAe,"on"+YAe)}Ka(Wh,"onAnimationEnd"),Ka(lA,"onAnimationIteration"),Ka(cA,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(uA,"onTransitionRun"),Ka(yf,"onTransitionStart"),Ka(Xh,"onTransitionCancel"),Ka(dA,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rb));function a7(A,m){m=(m&4)!==0;for(var v=0;v<A.length;v++){var C=A[v],U=C.event;C=C.listeners;e:{var q=void 0;if(m)for(var ue=C.length-1;0<=ue;ue--){var ye=C[ue],Pe=ye.instance,lt=ye.currentTarget;if(ye=ye.listener,Pe!==q&&U.isPropagationStopped())break e;q=ye,U.currentTarget=lt;try{q(U)}catch(St){HE(St)}U.currentTarget=null,q=Pe}else for(ue=0;ue<C.length;ue++){if(ye=C[ue],Pe=ye.instance,lt=ye.currentTarget,ye=ye.listener,Pe!==q&&U.isPropagationStopped())break e;q=ye,U.currentTarget=lt;try{q(U)}catch(St){HE(St)}U.currentTarget=null,q=Pe}}}}function Nn(A,m){var v=m[Zr];v===void 0&&(v=m[Zr]=new Set);var C=A+"__bubble";v.has(C)||(s7(m,A,2,!1),v.add(C))}function Wj(A,m,v){var C=0;m&&(C|=4),s7(v,A,C,m)}var rC="_reactListening"+Math.random().toString(36).slice(2);function Xj(A){if(!A[rC]){A[rC]=!0,rt.forEach(function(v){v!=="selectionchange"&&(JAe.has(v)||Wj(v,!1,A),Wj(v,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[rC]||(m[rC]=!0,Wj("selectionchange",!1,m))}}function s7(A,m,v,C){switch(j7(m)){case 2:var U=_fe;break;case 8:U=Nfe;break;default:U=uB}v=U.bind(null,m,v,A),U=void 0,!no||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(U=!0),C?U!==void 0?A.addEventListener(m,v,{capture:!0,passive:U}):A.addEventListener(m,v,!0):U!==void 0?A.addEventListener(m,v,{passive:U}):A.addEventListener(m,v,!1)}function Yj(A,m,v,C,U){var q=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var ye=C.stateNode.containerInfo;if(ye===U)break;if(ue===4)for(ue=C.return;ue!==null;){var Pe=ue.tag;if((Pe===3||Pe===4)&&ue.stateNode.containerInfo===U)return;ue=ue.return}for(;ye!==null;){if(ue=Ne(ye),ue===null)return;if(Pe=ue.tag,Pe===5||Pe===6||Pe===26||Pe===27){C=q=ue;continue e}ye=ye.parentNode}}C=C.return}zh(function(){var lt=q,St=ca(v),Ot=[];e:{var At=rd.get(A);if(At!==void 0){var ht=eu,Gr=A;switch(A){case"keypress":if(ko(v)===0)break e;case"keydown":case"keyup":ht=fc;break;case"focusin":Gr="focus",ht=ru;break;case"focusout":Gr="blur",ht=ru;break;case"beforeblur":case"afterblur":ht=ru;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=rA;break;case Wh:case lA:case cA:ht=Zd;break;case dA:ht=Ae;break;case"scroll":case"scrollend":ht=mf;break;case"wheel":ht=Le;break;case"copy":case"cut":case"paste":ht=eA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=ed;break;case"toggle":case"beforetoggle":ht=vt}var Or=(m&4)!==0,ya=!Or&&(A==="scroll"||A==="scrollend"),Xe=Or?At!==null?At+"Capture":null:At;Or=[];for(var He=lt,at;He!==null;){var jt=He;if(at=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||at===null||Xe===null||(jt=Fi(He,Xe),jt!=null&&Or.push(Lb(He,jt,at))),ya)break;He=He.return}0<Or.length&&(At=new ht(At,Gr,null,v,St),Ot.push({event:At,listeners:Or}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ht=A==="mouseout"||A==="pointerout",At&&v!==kl&&(Gr=v.relatedTarget||v.fromElement)&&(Ne(Gr)||Gr[Wr]))break e;if((ht||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,ht?(Gr=v.relatedTarget||v.toElement,ht=lt,Gr=Gr?Ne(Gr):null,Gr!==null&&(ya=s(Gr),Or=Gr.tag,Gr!==ya||Or!==5&&Or!==27&&Or!==6)&&(Gr=null)):(ht=null,Gr=lt),ht!==Gr)){if(Or=gs,jt="onMouseLeave",Xe="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Or=ed,jt="onPointerLeave",Xe="onPointerEnter",He="pointer"),ya=ht==null?At:Ye(ht),at=Gr==null?At:Ye(Gr),At=new Or(jt,He+"leave",ht,v,St),At.target=ya,At.relatedTarget=at,jt=null,Ne(St)===lt&&(Or=new Or(Xe,He+"enter",Gr,v,St),Or.target=at,Or.relatedTarget=ya,jt=Or),ya=jt,ht&&Gr)t:{for(Or=ht,Xe=Gr,He=0,at=Or;at;at=bx(at))He++;for(at=0,jt=Xe;jt;jt=bx(jt))at++;for(;0<He-at;)Or=bx(Or),He--;for(;0<at-He;)Xe=bx(Xe),at--;for(;He--;){if(Or===Xe||Xe!==null&&Or===Xe.alternate)break t;Or=bx(Or),Xe=bx(Xe)}Or=null}else Or=null;ht!==null&&i7(Ot,At,ht,Or,!1),Gr!==null&&ya!==null&&i7(Ot,ya,Gr,Or,!0)}}e:{if(At=lt?Ye(lt):window,ht=At.nodeName&&At.nodeName.toLowerCase(),ht==="select"||ht==="input"&&At.type==="file")var hr=Kh;else if(ta(At))if(gf)hr=Wg;else{hr=ub;var wn=Bo}else ht=At.nodeName,!ht||ht.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?lt&&ff(lt.elementType)&&(hr=Kh):hr=Wm;if(hr&&(hr=hr(A,lt))){Ol(Ot,hr,v,St);break e}wn&&wn(A,At,lt),A==="focusout"&&lt&&At.type==="number"&&lt.memoizedProps.value!=null&&Yc(At,"number",At.value)}switch(wn=lt?Ye(lt):window,A){case"focusin":(ta(wn)||wn.contentEditable==="true")&&(To=wn,hc=lt,ou=null);break;case"focusout":ou=hc=To=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,Ga(Ot,v,St);break;case"selectionchange":if(oA)break;case"keydown":case"keyup":Ga(Ot,v,St)}var wr;if(Zt)e:{switch(A){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else Fr?ot(A,v)&&(Rr="onCompositionEnd"):A==="keydown"&&v.keyCode===229&&(Rr="onCompositionStart");Rr&&(oe&&v.locale!=="ko"&&(Fr||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&Fr&&(wr=hf()):(So=St,Zc="value"in So?So.value:So.textContent,Fr=!0)),wn=nC(lt,Rr),0<wn.length&&(Rr=new Yu(Rr,A,null,v,St),Ot.push({event:Rr,listeners:wn}),wr?Rr.data=wr:(wr=Ut(v),wr!==null&&(Rr.data=wr)))),(wr=re?yn(A,v):Xr(A,v))&&(Rr=nC(lt,"onBeforeInput"),0<Rr.length&&(wn=new Yu("onBeforeInput","beforeinput",null,v,St),Ot.push({event:wn,listeners:Rr}),wn.data=wr)),WAe(Ot,A,lt,v,St)}a7(Ot,m)})}function Lb(A,m,v){return{instance:A,listener:m,currentTarget:v}}function nC(A,m){for(var v=m+"Capture",C=[];A!==null;){var U=A,q=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||q===null||(U=Fi(A,v),U!=null&&C.unshift(Lb(A,U,q)),U=Fi(A,m),U!=null&&C.push(Lb(A,U,q))),A.tag===3)return C;A=A.return}return[]}function bx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function i7(A,m,v,C,U){for(var q=m._reactName,ue=[];v!==null&&v!==C;){var ye=v,Pe=ye.alternate,lt=ye.stateNode;if(ye=ye.tag,Pe!==null&&Pe===C)break;ye!==5&&ye!==26&&ye!==27||lt===null||(Pe=lt,U?(lt=Fi(v,q),lt!=null&&ue.unshift(Lb(v,lt,Pe))):U||(lt=Fi(v,q),lt!=null&&ue.push(Lb(v,lt,Pe)))),v=v.return}ue.length!==0&&A.push({event:m,listeners:ue})}var ZAe=/\r\n?/g,efe=/\u0000|\uFFFD/g;function o7(A){return(typeof A=="string"?A:""+A).replace(ZAe,`
`).replace(efe,"")}function l7(A,m){return m=o7(m),o7(A)===m}function aC(){}function ba(A,m,v,C,U,q){switch(v){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||_o(A,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&_o(A,""+C);break;case"className":on(A,"class",C);break;case"tabIndex":on(A,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":on(A,v,C);break;case"style":Af(A,C,q);break;case"data":if(m!=="object"){on(A,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||v!=="href")){A.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=cc(""+C),A.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){A.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(v==="formAction"?(m!=="input"&&ba(A,m,"name",U.name,U,null),ba(A,m,"formEncType",U.formEncType,U,null),ba(A,m,"formMethod",U.formMethod,U,null),ba(A,m,"formTarget",U.formTarget,U,null)):(ba(A,m,"encType",U.encType,U,null),ba(A,m,"method",U.method,U,null),ba(A,m,"target",U.target,U,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=cc(""+C),A.setAttribute(v,C);break;case"onClick":C!=null&&(A.onclick=aC);break;case"onScroll":C!=null&&Nn("scroll",A);break;case"onScrollEnd":C!=null&&Nn("scrollend",A);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"multiple":A.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":A.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){A.removeAttribute("xlink:href");break}v=cc(""+C),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""+C):A.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""):A.removeAttribute(v);break;case"capture":case"download":C===!0?A.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,C):A.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?A.setAttribute(v,C):A.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?A.removeAttribute(v):A.setAttribute(v,C);break;case"popover":Nn("beforetoggle",A),Nn("toggle",A),sn(A,"popover",C);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":sn(A,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=lc.get(v)||v,sn(A,v,C))}}function Jj(A,m,v,C,U,q){switch(v){case"style":Af(A,C,q);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"children":typeof C=="string"?_o(A,C):(typeof C=="number"||typeof C=="bigint")&&_o(A,""+C);break;case"onScroll":C!=null&&Nn("scroll",A);break;case"onScrollEnd":C!=null&&Nn("scrollend",A);break;case"onClick":C!=null&&(A.onclick=aC);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(U=v.endsWith("Capture"),m=v.slice(2,U?v.length-7:void 0),q=A[xr]||null,q=q!=null?q[v]:null,typeof q=="function"&&A.removeEventListener(m,q,U),typeof C=="function")){typeof q!="function"&&q!==null&&(v in A?A[v]=null:A.hasAttribute(v)&&A.removeAttribute(v)),A.addEventListener(m,C,U);break e}v in A?A[v]=C:C===!0?A.setAttribute(v,""):sn(A,v,C)}}}function co(A,m,v){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",A),Nn("load",A);var C=!1,U=!1,q;for(q in v)if(v.hasOwnProperty(q)){var ue=v[q];if(ue!=null)switch(q){case"src":C=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,q,ue,v,null)}}U&&ba(A,m,"srcSet",v.srcSet,v,null),C&&ba(A,m,"src",v.src,v,null);return;case"input":Nn("invalid",A);var ye=q=ue=U=null,Pe=null,lt=null;for(C in v)if(v.hasOwnProperty(C)){var St=v[C];if(St!=null)switch(C){case"name":U=St;break;case"type":ue=St;break;case"checked":Pe=St;break;case"defaultChecked":lt=St;break;case"value":q=St;break;case"defaultValue":ye=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,m));break;default:ba(A,m,C,St,v,null)}}Xc(A,q,ye,Pe,lt,ue,U,!1),Wc(A);return;case"select":Nn("invalid",A),C=ue=q=null;for(U in v)if(v.hasOwnProperty(U)&&(ye=v[U],ye!=null))switch(U){case"value":q=ye;break;case"defaultValue":ue=ye;break;case"multiple":C=ye;default:ba(A,m,U,ye,v,null)}m=q,v=ue,A.multiple=!!C,m!=null?Sl(A,!!C,m,!1):v!=null&&Sl(A,!!C,v,!0);return;case"textarea":Nn("invalid",A),q=U=C=null;for(ue in v)if(v.hasOwnProperty(ue)&&(ye=v[ue],ye!=null))switch(ue){case"value":C=ye;break;case"defaultValue":U=ye;break;case"children":q=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(91));break;default:ba(A,m,ue,ye,v,null)}Jc(A,C,U,q),Wc(A);return;case"option":for(Pe in v)if(v.hasOwnProperty(Pe)&&(C=v[Pe],C!=null))switch(Pe){case"selected":A.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ba(A,m,Pe,C,v,null)}return;case"dialog":Nn("beforetoggle",A),Nn("toggle",A),Nn("cancel",A),Nn("close",A);break;case"iframe":case"object":Nn("load",A);break;case"video":case"audio":for(C=0;C<Rb.length;C++)Nn(Rb[C],A);break;case"image":Nn("error",A),Nn("load",A);break;case"details":Nn("toggle",A);break;case"embed":case"source":case"link":Nn("error",A),Nn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in v)if(v.hasOwnProperty(lt)&&(C=v[lt],C!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,lt,C,v,null)}return;default:if(ff(m)){for(St in v)v.hasOwnProperty(St)&&(C=v[St],C!==void 0&&Jj(A,m,St,C,v,void 0));return}}for(ye in v)v.hasOwnProperty(ye)&&(C=v[ye],C!=null&&ba(A,m,ye,C,v,null))}function tfe(A,m,v,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,q=null,ue=null,ye=null,Pe=null,lt=null,St=null;for(ht in v){var Ot=v[ht];if(v.hasOwnProperty(ht)&&Ot!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":Pe=Ot;default:C.hasOwnProperty(ht)||ba(A,m,ht,null,C,Ot)}}for(var At in C){var ht=C[At];if(Ot=v[At],C.hasOwnProperty(At)&&(ht!=null||Ot!=null))switch(At){case"type":q=ht;break;case"name":U=ht;break;case"checked":lt=ht;break;case"defaultChecked":St=ht;break;case"value":ue=ht;break;case"defaultValue":ye=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,m));break;default:ht!==Ot&&ba(A,m,At,ht,C,Ot)}}vi(A,ue,ye,Pe,lt,St,q,U);return;case"select":ht=ue=ye=At=null;for(q in v)if(Pe=v[q],v.hasOwnProperty(q)&&Pe!=null)switch(q){case"value":break;case"multiple":ht=Pe;default:C.hasOwnProperty(q)||ba(A,m,q,null,C,Pe)}for(U in C)if(q=C[U],Pe=v[U],C.hasOwnProperty(U)&&(q!=null||Pe!=null))switch(U){case"value":At=q;break;case"defaultValue":ye=q;break;case"multiple":ue=q;default:q!==Pe&&ba(A,m,U,q,C,Pe)}m=ye,v=ue,C=ht,At!=null?Sl(A,!!v,At,!1):!!C!=!!v&&(m!=null?Sl(A,!!v,m,!0):Sl(A,!!v,v?[]:"",!1));return;case"textarea":ht=At=null;for(ye in v)if(U=v[ye],v.hasOwnProperty(ye)&&U!=null&&!C.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:ba(A,m,ye,null,C,U)}for(ue in C)if(U=C[ue],q=v[ue],C.hasOwnProperty(ue)&&(U!=null||q!=null))switch(ue){case"value":At=U;break;case"defaultValue":ht=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==q&&ba(A,m,ue,U,C,q)}Vn(A,At,ht);return;case"option":for(var Gr in v)if(At=v[Gr],v.hasOwnProperty(Gr)&&At!=null&&!C.hasOwnProperty(Gr))switch(Gr){case"selected":A.selected=!1;break;default:ba(A,m,Gr,null,C,At)}for(Pe in C)if(At=C[Pe],ht=v[Pe],C.hasOwnProperty(Pe)&&At!==ht&&(At!=null||ht!=null))switch(Pe){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(A,m,Pe,At,C,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Or in v)At=v[Or],v.hasOwnProperty(Or)&&At!=null&&!C.hasOwnProperty(Or)&&ba(A,m,Or,null,C,At);for(lt in C)if(At=C[lt],ht=v[lt],C.hasOwnProperty(lt)&&At!==ht&&(At!=null||ht!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ba(A,m,lt,At,C,ht)}return;default:if(ff(m)){for(var ya in v)At=v[ya],v.hasOwnProperty(ya)&&At!==void 0&&!C.hasOwnProperty(ya)&&Jj(A,m,ya,void 0,C,At);for(St in C)At=C[St],ht=v[St],!C.hasOwnProperty(St)||At===ht||At===void 0&&ht===void 0||Jj(A,m,St,At,C,ht);return}}for(var Xe in v)At=v[Xe],v.hasOwnProperty(Xe)&&At!=null&&!C.hasOwnProperty(Xe)&&ba(A,m,Xe,null,C,At);for(Ot in C)At=C[Ot],ht=v[Ot],!C.hasOwnProperty(Ot)||At===ht||At==null&&ht==null||ba(A,m,Ot,At,C,ht)}var Zj=null,eB=null;function sC(A){return A.nodeType===9?A:A.ownerDocument}function c7(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u7(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function tB(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var rB=null;function rfe(){var A=window.event;return A&&A.type==="popstate"?A===rB?!1:(rB=A,!0):(rB=null,!1)}var d7=typeof setTimeout=="function"?setTimeout:void 0,nfe=typeof clearTimeout=="function"?clearTimeout:void 0,A7=typeof Promise=="function"?Promise:void 0,afe=typeof queueMicrotask=="function"?queueMicrotask:typeof A7<"u"?function(A){return A7.resolve(null).then(A).catch(sfe)}:d7;function sfe(A){setTimeout(function(){throw A})}function p0(A){return A==="head"}function f7(A,m){var v=m,C=0,U=0;do{var q=v.nextSibling;if(A.removeChild(v),q&&q.nodeType===8)if(v=q.data,v==="/$"){if(0<C&&8>C){v=C;var ue=A.ownerDocument;if(v&1&&Mb(ue.documentElement),v&2&&Mb(ue.body),v&4)for(v=ue.head,Mb(v),ue=v.firstChild;ue;){var ye=ue.nextSibling,Pe=ue.nodeName;ue[Ce]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||v.removeChild(ue),ue=ye}}if(U===0){A.removeChild(q),Kb(m);return}U--}else v==="$"||v==="$?"||v==="$!"?U++:C=v.charCodeAt(0)-48;else C=0;v=q}while(v);Kb(m)}function nB(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var v=m;switch(m=m.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":nB(v),we(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}A.removeChild(v)}}function ife(A,m,v,C){for(;A.nodeType===1;){var U=v;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(C){if(!A[Ce])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(q=A.getAttribute("rel"),q==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(q!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(q=A.getAttribute("src"),(q!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&q&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var q=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===q)return A}else return A;if(A=pd(A.nextSibling),A===null)break}return null}function ofe(A,m,v){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!v||(A=pd(A.nextSibling),A===null))return null;return A}function aB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function lfe(A,m){var v=A.ownerDocument;if(A.data!=="$?"||v.readyState==="complete")m();else{var C=function(){m(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),A._reactRetry=C}}function pd(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var sB=null;function h7(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var v=A.data;if(v==="$"||v==="$!"||v==="$?"){if(m===0)return A;m--}else v==="/$"&&m++}A=A.previousSibling}return null}function m7(A,m,v){switch(m=sC(v),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Mb(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);we(A)}var gu=new Map,p7=new Set;function iC(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Mf=K.d;K.d={f:cfe,r:ufe,D:dfe,C:Afe,L:ffe,m:hfe,X:pfe,S:mfe,M:gfe};function cfe(){var A=Mf.f(),m=YE();return A||m}function ufe(A){var m=Be(A);m!==null&&m.tag===5&&m.type==="form"?dp(m):Mf.r(A)}var yx=typeof document>"u"?null:document;function g7(A,m,v){var C=yx;if(C&&typeof m=="string"&&m){var U=Fn(m);U='link[rel="'+A+'"][href="'+U+'"]',typeof v=="string"&&(U+='[crossorigin="'+v+'"]'),p7.has(U)||(p7.add(U),A={rel:A,crossOrigin:v,href:m},C.querySelector(U)===null&&(m=C.createElement("link"),co(m,"link",A),$e(m),C.head.appendChild(m)))}}function dfe(A){Mf.D(A),g7("dns-prefetch",A,null)}function Afe(A,m){Mf.C(A,m),g7("preconnect",A,m)}function ffe(A,m,v){Mf.L(A,m,v);var C=yx;if(C&&A&&m){var U='link[rel="preload"][as="'+Fn(m)+'"]';m==="image"&&v&&v.imageSrcSet?(U+='[imagesrcset="'+Fn(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(U+='[imagesizes="'+Fn(v.imageSizes)+'"]')):U+='[href="'+Fn(A)+'"]';var q=U;switch(m){case"style":q=wx(A);break;case"script":q=Ex(A)}gu.has(q)||(A=d({rel:"preload",href:m==="image"&&v&&v.imageSrcSet?void 0:A,as:m},v),gu.set(q,A),C.querySelector(U)!==null||m==="style"&&C.querySelector(Ub(q))||m==="script"&&C.querySelector(Qb(q))||(m=C.createElement("link"),co(m,"link",A),$e(m),C.head.appendChild(m)))}}function hfe(A,m){Mf.m(A,m);var v=yx;if(v&&A){var C=m&&typeof m.as=="string"?m.as:"script",U='link[rel="modulepreload"][as="'+Fn(C)+'"][href="'+Fn(A)+'"]',q=U;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=Ex(A)}if(!gu.has(q)&&(A=d({rel:"modulepreload",href:A},m),gu.set(q,A),v.querySelector(U)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Qb(q)))return}C=v.createElement("link"),co(C,"link",A),$e(C),v.head.appendChild(C)}}}function mfe(A,m,v){Mf.S(A,m,v);var C=yx;if(C&&A){var U=dt(C).hoistableStyles,q=wx(A);m=m||"default";var ue=U.get(q);if(!ue){var ye={loading:0,preload:null};if(ue=C.querySelector(Ub(q)))ye.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},v),(v=gu.get(q))&&iB(A,v);var Pe=ue=C.createElement("link");$e(Pe),co(Pe,"link",A),Pe._p=new Promise(function(lt,St){Pe.onload=lt,Pe.onerror=St}),Pe.addEventListener("load",function(){ye.loading|=1}),Pe.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,oC(ue,m,C)}ue={type:"stylesheet",instance:ue,count:1,state:ye},U.set(q,ue)}}}function pfe(A,m){Mf.X(A,m);var v=yx;if(v&&A){var C=dt(v).hoistableScripts,U=Ex(A),q=C.get(U);q||(q=v.querySelector(Qb(U)),q||(A=d({src:A,async:!0},m),(m=gu.get(U))&&oB(A,m),q=v.createElement("script"),$e(q),co(q,"link",A),v.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function gfe(A,m){Mf.M(A,m);var v=yx;if(v&&A){var C=dt(v).hoistableScripts,U=Ex(A),q=C.get(U);q||(q=v.querySelector(Qb(U)),q||(A=d({src:A,async:!0,type:"module"},m),(m=gu.get(U))&&oB(A,m),q=v.createElement("script"),$e(q),co(q,"link",A),v.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function x7(A,m,v,C){var U=(U=ae.current)?iC(U):null;if(!U)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(m=wx(v.href),v=dt(U).hoistableStyles,C=v.get(m),C||(C={type:"style",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){A=wx(v.href);var q=dt(U).hoistableStyles,ue=q.get(A);if(ue||(U=U.ownerDocument||U,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(A,ue),(q=U.querySelector(Ub(A)))&&!q._p&&(ue.instance=q,ue.state.loading=5),gu.has(A)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},gu.set(A,v),q||xfe(U,A,v,ue.state))),m&&C===null)throw Error(n(528,""));return ue}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=v.async,v=v.src,typeof v=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Ex(v),v=dt(U).hoistableScripts,C=v.get(m),C||(C={type:"script",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function wx(A){return'href="'+Fn(A)+'"'}function Ub(A){return'link[rel="stylesheet"]['+A+"]"}function v7(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function xfe(A,m,v,C){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=A.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),co(m,"link",v),$e(m),A.head.appendChild(m))}function Ex(A){return'[src="'+Fn(A)+'"]'}function Qb(A){return"script[async]"+A}function b7(A,m,v){if(m.count++,m.instance===null)switch(m.type){case"style":var C=A.querySelector('style[data-href~="'+Fn(v.href)+'"]');if(C)return m.instance=C,$e(C),C;var U=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(A.ownerDocument||A).createElement("style"),$e(C),co(C,"style",U),oC(C,v.precedence,A),m.instance=C;case"stylesheet":U=wx(v.href);var q=A.querySelector(Ub(U));if(q)return m.state.loading|=4,m.instance=q,$e(q),q;C=v7(v),(U=gu.get(U))&&iB(C,U),q=(A.ownerDocument||A).createElement("link"),$e(q);var ue=q;return ue._p=new Promise(function(ye,Pe){ue.onload=ye,ue.onerror=Pe}),co(q,"link",C),m.state.loading|=4,oC(q,v.precedence,A),m.instance=q;case"script":return q=Ex(v.src),(U=A.querySelector(Qb(q)))?(m.instance=U,$e(U),U):(C=v,(U=gu.get(q))&&(C=d({},v),oB(C,U)),A=A.ownerDocument||A,U=A.createElement("script"),$e(U),co(U,"link",C),A.head.appendChild(U),m.instance=U);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,oC(C,v.precedence,A));return m.instance}function oC(A,m,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=C.length?C[C.length-1]:null,q=U,ue=0;ue<C.length;ue++){var ye=C[ue];if(ye.dataset.precedence===m)q=ye;else if(q!==U)break}q?q.parentNode.insertBefore(A,q.nextSibling):(m=v.nodeType===9?v.head:v,m.insertBefore(A,m.firstChild))}function iB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function oB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var lC=null;function y7(A,m,v){if(lC===null){var C=new Map,U=lC=new Map;U.set(v,C)}else U=lC,C=U.get(v),C||(C=new Map,U.set(v,C));if(C.has(A))return C;for(C.set(A,null),v=v.getElementsByTagName(A),U=0;U<v.length;U++){var q=v[U];if(!(q[Ce]||q[nr]||A==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=q.getAttribute(m)||"";ue=A+ue;var ye=C.get(ue);ye?ye.push(q):C.set(ue,[q])}}return C}function w7(A,m,v){A=A.ownerDocument||A,A.head.insertBefore(v,m==="title"?A.querySelector("head > title"):null)}function vfe(A,m,v){if(v===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function E7(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Hb=null;function bfe(){}function yfe(A,m,v){if(Hb===null)throw Error(n(475));var C=Hb;if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var U=wx(v.href),q=A.querySelector(Ub(U));if(q){A=q._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(C.count++,C=cC.bind(C),A.then(C,C)),m.state.loading|=4,m.instance=q,$e(q);return}q=A.ownerDocument||A,v=v7(v),(U=gu.get(U))&&iB(v,U),q=q.createElement("link"),$e(q);var ue=q;ue._p=new Promise(function(ye,Pe){ue.onload=ye,ue.onerror=Pe}),co(q,"link",v),m.instance=q}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(C.count++,m=cC.bind(C),A.addEventListener("load",m),A.addEventListener("error",m))}}function wfe(){if(Hb===null)throw Error(n(475));var A=Hb;return A.stylesheets&&A.count===0&&lB(A,A.stylesheets),0<A.count?function(m){var v=setTimeout(function(){if(A.stylesheets&&lB(A,A.stylesheets),A.unsuspend){var C=A.unsuspend;A.unsuspend=null,C()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(v)}}:null}function cC(){if(this.count--,this.count===0){if(this.stylesheets)lB(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var uC=null;function lB(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,uC=new Map,m.forEach(Efe,A),uC=null,cC.call(A))}function Efe(A,m){if(!(m.state.loading&4)){var v=uC.get(A);if(v)var C=v.get(null);else{v=new Map,uC.set(A,v);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<U.length;q++){var ue=U[q];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(v.set(ue.dataset.precedence,ue),C=ue)}C&&v.set(null,C)}U=m.instance,ue=U.getAttribute("data-precedence"),q=v.get(ue)||C,q===C&&v.set(null,U),v.set(ue,U),this.count++,C=cC.bind(this),U.addEventListener("load",C),U.addEventListener("error",C),q?q.parentNode.insertBefore(U,q.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),m.state.loading|=4}}var Vb={$$typeof:_,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Cfe(A,m,v,C,U,q,ue,ye){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=C,this.onUncaughtError=U,this.onCaughtError=q,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function C7(A,m,v,C,U,q,ue,ye,Pe,lt,St,Ot){return A=new Cfe(A,m,v,ue,ye,Pe,lt,Ot),m=1,q===!0&&(m|=24),q=Ri(3,null,null,m),A.current=q,q.stateNode=A,m=Ab(),m.refCount++,A.pooledCache=m,m.refCount++,q.memoizedState={element:C,isDehydrated:v,cache:m},Qe(q),A}function _7(A){return A?(A=ri,A):ri}function N7(A,m,v,C,U,q){U=_7(U),C.context===null?C.context=U:C.pendingContext=U,C=Nt(m),C.payload={element:v},q=q===void 0?null:q,q!==null&&(C.callback=q),v=Tt(A,C,m),v!==null&&(Ec(v,A,m),kt(v,A,m))}function S7(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var v=A.retryLane;A.retryLane=v!==0&&v<m?v:m}}function cB(A,m){S7(A,m),(A=A.alternate)&&S7(A,m)}function k7(A){if(A.tag===13){var m=nd(A,67108864);m!==null&&Ec(m,A,67108864),cB(A,67108864)}}var dC=!0;function _fe(A,m,v,C){var U=V.T;V.T=null;var q=K.p;try{K.p=2,uB(A,m,v,C)}finally{K.p=q,V.T=U}}function Nfe(A,m,v,C){var U=V.T;V.T=null;var q=K.p;try{K.p=8,uB(A,m,v,C)}finally{K.p=q,V.T=U}}function uB(A,m,v,C){if(dC){var U=dB(C);if(U===null)Yj(A,m,C,AC,v),B7(A,C);else if(kfe(U,A,m,v,C))C.stopPropagation();else if(B7(A,C),m&4&&-1<Sfe.indexOf(A)){for(;U!==null;){var q=Be(U);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ue=Nr(q.pendingLanes);if(ue!==0){var ye=q;for(ye.pendingLanes|=2,ye.entangledLanes|=2;ue;){var Pe=1<<31-Pt(ue);ye.entanglements[1]|=Pe,ue&=~Pe}_A(q),(da&6)===0&&(WE=Te()+500,Pb(0))}}break;case 13:ye=nd(q,2),ye!==null&&Ec(ye,q,2),YE(),cB(q,2)}if(q=dB(C),q===null&&Yj(A,m,C,AC,v),q===U)break;U=q}U!==null&&C.stopPropagation()}else Yj(A,m,C,null,v)}}function dB(A){return A=ca(A),AB(A)}var AC=null;function AB(A){if(AC=null,A=Ne(A),A!==null){var m=s(A);if(m===null)A=null;else{var v=m.tag;if(v===13){if(A=i(m),A!==null)return A;A=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return AC=A,null}function j7(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case We:return 2;case be:return 8;case De:case Re:return 32;case qe:return 268435456;default:return 32}default:return 32}}var fB=!1,g0=null,x0=null,v0=null,zb=new Map,$b=new Map,b0=[],Sfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B7(A,m){switch(A){case"focusin":case"focusout":g0=null;break;case"dragenter":case"dragleave":x0=null;break;case"mouseover":case"mouseout":v0=null;break;case"pointerover":case"pointerout":zb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":$b.delete(m.pointerId)}}function Gb(A,m,v,C,U,q){return A===null||A.nativeEvent!==q?(A={blockedOn:m,domEventName:v,eventSystemFlags:C,nativeEvent:q,targetContainers:[U]},m!==null&&(m=Be(m),m!==null&&k7(m)),A):(A.eventSystemFlags|=C,m=A.targetContainers,U!==null&&m.indexOf(U)===-1&&m.push(U),A)}function kfe(A,m,v,C,U){switch(m){case"focusin":return g0=Gb(g0,A,m,v,C,U),!0;case"dragenter":return x0=Gb(x0,A,m,v,C,U),!0;case"mouseover":return v0=Gb(v0,A,m,v,C,U),!0;case"pointerover":var q=U.pointerId;return zb.set(q,Gb(zb.get(q)||null,A,m,v,C,U)),!0;case"gotpointercapture":return q=U.pointerId,$b.set(q,Gb($b.get(q)||null,A,m,v,C,U)),!0}return!1}function T7(A){var m=Ne(A.target);if(m!==null){var v=s(m);if(v!==null){if(m=v.tag,m===13){if(m=i(v),m!==null){A.blockedOn=m,Et(A.priority,function(){if(v.tag===13){var C=wc();C=gt(C);var U=nd(v,C);U!==null&&Ec(U,v,C),cB(v,C)}});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){A.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}A.blockedOn=null}function fC(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var v=dB(A.nativeEvent);if(v===null){v=A.nativeEvent;var C=new v.constructor(v.type,v);kl=C,v.target.dispatchEvent(C),kl=null}else return m=Be(v),m!==null&&k7(m),A.blockedOn=v,!1;m.shift()}return!0}function I7(A,m,v){fC(A)&&v.delete(m)}function jfe(){fB=!1,g0!==null&&fC(g0)&&(g0=null),x0!==null&&fC(x0)&&(x0=null),v0!==null&&fC(v0)&&(v0=null),zb.forEach(I7),$b.forEach(I7)}function hC(A,m){A.blockedOn===m&&(A.blockedOn=null,fB||(fB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jfe)))}var mC=null;function F7(A){mC!==A&&(mC=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){mC===A&&(mC=null);for(var m=0;m<A.length;m+=3){var v=A[m],C=A[m+1],U=A[m+2];if(typeof C!="function"){if(AB(C||v)===null)continue;break}var q=Be(v);q!==null&&(A.splice(m,3),m-=3,hu(q,{pending:!0,data:U,method:v.method,action:C},C,U))}}))}function Kb(A){function m(Pe){return hC(Pe,A)}g0!==null&&hC(g0,A),x0!==null&&hC(x0,A),v0!==null&&hC(v0,A),zb.forEach(m),$b.forEach(m);for(var v=0;v<b0.length;v++){var C=b0[v];C.blockedOn===A&&(C.blockedOn=null)}for(;0<b0.length&&(v=b0[0],v.blockedOn===null);)T7(v),v.blockedOn===null&&b0.shift();if(v=(A.ownerDocument||A).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var U=v[C],q=v[C+1],ue=U[xr]||null;if(typeof q=="function")ue||F7(v);else if(ue){var ye=null;if(q&&q.hasAttribute("formAction")){if(U=q,ue=q[xr]||null)ye=ue.formAction;else if(AB(U)!==null)continue}else ye=ue.action;typeof ye=="function"?v[C+1]=ye:(v.splice(C,3),C-=3),F7(v)}}}function hB(A){this._internalRoot=A}pC.prototype.render=hB.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var v=m.current,C=wc();N7(v,C,A,m,null,null)},pC.prototype.unmount=hB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;N7(A.current,2,null,A,null,null),YE(),m[Wr]=null}};function pC(A){this._internalRoot=A}pC.prototype.unstable_scheduleHydration=function(A){if(A){var m=xt();A={blockedOn:null,target:A,priority:m};for(var v=0;v<b0.length&&m!==0&&m<b0[v].priority;v++);b0.splice(v,0,A),v===0&&T7(A)}};var O7=t.version;if(O7!=="19.1.1")throw Error(n(527,O7,"19.1.1"));K.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var Bfe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gC.isDisabled&&gC.supportsFiber)try{pt=gC.inject(Bfe),It=gC}catch{}}return Wb.createRoot=function(A,m){if(!a(A))throw Error(n(299));var v=!1,C="",U=XM,q=YM,ue=JM,ye=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(U=m.onUncaughtError),m.onCaughtError!==void 0&&(q=m.onCaughtError),m.onRecoverableError!==void 0&&(ue=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ye=m.unstable_transitionCallbacks)),m=C7(A,1,!1,null,null,v,C,U,q,ue,ye,null),A[Wr]=m.current,Xj(A),new hB(m)},Wb.hydrateRoot=function(A,m,v){if(!a(A))throw Error(n(299));var C=!1,U="",q=XM,ue=YM,ye=JM,Pe=null,lt=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(U=v.identifierPrefix),v.onUncaughtError!==void 0&&(q=v.onUncaughtError),v.onCaughtError!==void 0&&(ue=v.onCaughtError),v.onRecoverableError!==void 0&&(ye=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Pe=v.unstable_transitionCallbacks),v.formState!==void 0&&(lt=v.formState)),m=C7(A,1,!0,m,v??null,C,U,q,ue,ye,Pe,lt),m.context=_7(null),v=m.current,C=wc(),C=gt(C),U=Nt(C),U.callback=null,Tt(v,U,C),v=C,m.current.lanes=v,ja(m,v),_A(m),A[Wr]=m.current,Xj(A),new pC(m)},Wb.version="19.1.1",Wb}var z7;function zfe(){if(z7)return xB.exports;z7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xB.exports=Vfe(),xB.exports}var $fe=zfe();const Gfe=_l($fe),Kfe=()=>{};var $7={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NY=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},qfe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},SY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(NY(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):qfe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Wfe;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Wfe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xfe=function(e){const t=NY(e);return SY.encodeByteArray(t,!0)},L5=function(e){return Xfe(e).replace(/\./g,"")},kY=function(e){try{return SY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yfe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jfe=()=>Yfe().__FIREBASE_DEFAULTS__,Zfe=()=>{if(typeof process>"u"||typeof $7>"u")return;const e=$7.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ehe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&kY(e[1]);return t&&JSON.parse(t)},$S=()=>{try{return Kfe()||Jfe()||Zfe()||ehe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},jY=e=>{var t,r;return(r=(t=$S())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},wD=e=>{const t=jY(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},BY=()=>{var e;return(e=$S())==null?void 0:e.config},TY=e=>{var t;return(t=$S())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function GS(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[L5(JSON.stringify(r)),L5(JSON.stringify(i)),""].join(".")}const Wy={};function rhe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Wy))Wy[t]?e.emulator.push(t):e.prod.push(t);return e}function nhe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let G7=!1;function KS(e,t){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||Wy[e]===t||Wy[e]||G7)return;Wy[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=rhe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{G7=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=nhe(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),x=r("learnmore"),b=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;o(_),d(b,x);const j=u();c(w,y),_.append(w,g,b,j),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ahe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nl())}function she(){var t;const e=(t=$S())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ihe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ohe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function lhe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function che(){const e=nl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function uhe(){return!she()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dhe(){try{return typeof indexedDB=="object"}catch{return!1}}function Ahe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fhe="FirebaseError";class Vd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=fhe,Object.setPrototypeOf(this,Vd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_2.prototype.create)}}class _2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?hhe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Vd(a,o,n)}}function hhe(e,t){return e.replace(mhe,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const mhe=/\{\$([^}]+)}/g;function phe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function hm(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(K7(s)&&K7(i)){if(!hm(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function K7(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Sy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function ky(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function ghe(e,t){const r=new xhe(e,t);return r.subscribe.bind(r)}class xhe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");vhe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=wB),a.error===void 0&&(a.error=wB),a.complete===void 0&&(a.complete=wB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vhe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function wB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e){return e&&e._delegate?e._delegate:e}class hh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bhe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new the;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(whe(t))try{this.getOrInitializeService({instanceIdentifier:wp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=wp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=wp){return this.instances.has(t)}getOptions(t=wp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:yhe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=wp){return this.component?this.component.multipleInstances?t:wp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yhe(e){return e===wp?void 0:e}function whe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ehe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new bhe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kn||(kn={}));const Che={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},_he=kn.INFO,Nhe={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},She=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Nhe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let ED=class{constructor(t){this.name=t,this._logLevel=_he,this._logHandler=She,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Che[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...t),this._logHandler(this,kn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...t),this._logHandler(this,kn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kn.INFO,...t),this._logHandler(this,kn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kn.WARN,...t),this._logHandler(this,kn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...t),this._logHandler(this,kn.ERROR,...t)}};const khe=(e,t)=>t.some(r=>e instanceof r);let q7,W7;function jhe(){return q7||(q7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bhe(){return W7||(W7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FY=new WeakMap,m6=new WeakMap,OY=new WeakMap,EB=new WeakMap,CD=new WeakMap;function The(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(em(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&FY.set(r,e)}).catch(()=>{}),CD.set(t,e),t}function Ihe(e){if(m6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});m6.set(e,t)}let p6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return m6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||OY.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return em(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Fhe(e){p6=e(p6)}function Ohe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(CB(this),t,...r);return OY.set(n,t.sort?t.sort():[t]),em(n)}:Bhe().includes(e)?function(...t){return e.apply(CB(this),t),em(FY.get(this))}:function(...t){return em(e.apply(CB(this),t))}}function Dhe(e){return typeof e=="function"?Ohe(e):(e instanceof IDBTransaction&&Ihe(e),khe(e,jhe())?new Proxy(e,p6):e)}function em(e){if(e instanceof IDBRequest)return The(e);if(EB.has(e))return EB.get(e);const t=Dhe(e);return t!==e&&(EB.set(e,t),CD.set(t,e)),t}const CB=e=>CD.get(e);function Phe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=em(i);return n&&i.addEventListener("upgradeneeded",c=>{n(em(i.result),c.oldVersion,c.newVersion,em(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Rhe=["get","getKey","getAll","getAllKeys","count"],Lhe=["put","add","delete","clear"],_B=new Map;function X7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(_B.get(t))return _B.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Lhe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Rhe.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return _B.set(t,s),s}Fhe(e=>({...e,get:(t,r,n)=>X7(t,r)||e.get(t,r,n),has:(t,r)=>!!X7(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mhe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Uhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Uhe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const g6="@firebase/app",Y7="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new ED("@firebase/app"),Qhe="@firebase/app-compat",Hhe="@firebase/analytics-compat",Vhe="@firebase/analytics",zhe="@firebase/app-check-compat",$he="@firebase/app-check",Ghe="@firebase/auth",Khe="@firebase/auth-compat",qhe="@firebase/database",Whe="@firebase/data-connect",Xhe="@firebase/database-compat",Yhe="@firebase/functions",Jhe="@firebase/functions-compat",Zhe="@firebase/installations",e0e="@firebase/installations-compat",t0e="@firebase/messaging",r0e="@firebase/messaging-compat",n0e="@firebase/performance",a0e="@firebase/performance-compat",s0e="@firebase/remote-config",i0e="@firebase/remote-config-compat",o0e="@firebase/storage",l0e="@firebase/storage-compat",c0e="@firebase/firestore",u0e="@firebase/ai",d0e="@firebase/firestore-compat",A0e="firebase",f0e="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="[DEFAULT]",h0e={[g6]:"fire-core",[Qhe]:"fire-core-compat",[Vhe]:"fire-analytics",[Hhe]:"fire-analytics-compat",[$he]:"fire-app-check",[zhe]:"fire-app-check-compat",[Ghe]:"fire-auth",[Khe]:"fire-auth-compat",[qhe]:"fire-rtdb",[Whe]:"fire-data-connect",[Xhe]:"fire-rtdb-compat",[Yhe]:"fire-fn",[Jhe]:"fire-fn-compat",[Zhe]:"fire-iid",[e0e]:"fire-iid-compat",[t0e]:"fire-fcm",[r0e]:"fire-fcm-compat",[n0e]:"fire-perf",[a0e]:"fire-perf-compat",[s0e]:"fire-rc",[i0e]:"fire-rc-compat",[o0e]:"fire-gcs",[l0e]:"fire-gcs-compat",[c0e]:"fire-fst",[d0e]:"fire-fst-compat",[u0e]:"fire-vertex","fire-js":"fire-js",[A0e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=new Map,m0e=new Map,v6=new Map;function J7(e,t){try{e.container.addComponent(t)}catch(r){mh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function mm(e){const t=e.name;if(v6.has(t))return mh.debug(`There were multiple attempts to register component ${t}.`),!1;v6.set(t,e);for(const r of _w.values())J7(r,e);for(const r of m0e.values())J7(r,e);return!0}function S2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Ic(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tm=new _2("app","Firebase",p0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0e{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new hh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=f0e;function _D(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:x6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw tm.create("bad-app-name",{appName:String(a)});if(r||(r=BY()),!r)throw tm.create("no-options");const s=_w.get(a);if(s){if(hm(r,s.options)&&hm(n,s.config))return s;throw tm.create("duplicate-app",{appName:a})}const i=new Ehe(a);for(const c of v6.values())i.addComponent(c);const o=new g0e(r,n,i);return _w.set(a,o),o}function qS(e=x6){const t=_w.get(e);if(!t&&e===x6&&BY())return _D();if(!t)throw tm.create("no-app",{appName:e});return t}function Z7(){return Array.from(_w.values())}function Lu(e,t,r){let n=h0e[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mh.warn(i.join(" "));return}mm(new hh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0e="firebase-heartbeat-database",v0e=1,Nw="firebase-heartbeat-store";let NB=null;function DY(){return NB||(NB=Phe(x0e,v0e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Nw)}catch(r){console.warn(r)}}}}).catch(e=>{throw tm.create("idb-open",{originalErrorMessage:e.message})})),NB}async function b0e(e){try{const r=(await DY()).transaction(Nw),n=await r.objectStore(Nw).get(PY(e));return await r.done,n}catch(t){if(t instanceof Vd)mh.warn(t.message);else{const r=tm.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});mh.warn(r.message)}}}async function e9(e,t){try{const n=(await DY()).transaction(Nw,"readwrite");await n.objectStore(Nw).put(t,PY(e)),await n.done}catch(r){if(r instanceof Vd)mh.warn(r.message);else{const n=tm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});mh.warn(n.message)}}}function PY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0e=1024,w0e=30;class E0e{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new _0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t9();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>w0e){const i=N0e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){mh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=t9(),{heartbeatsToSend:n,unsentEntries:a}=C0e(this._heartbeatsCache.heartbeats),s=L5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return mh.warn(r),""}}}function t9(){return new Date().toISOString().substring(0,10)}function C0e(e,t=y0e){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),r9(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),r9(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class _0e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dhe()?Ahe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await b0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return e9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return e9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function r9(e){return L5(JSON.stringify({version:2,heartbeats:e})).length}function N0e(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0e(e){mm(new hh("platform-logger",t=>new Mhe(t),"PRIVATE")),mm(new hh("heartbeat",t=>new E0e(t),"PRIVATE")),Lu(g6,Y7,e),Lu(g6,Y7,"esm2020"),Lu("fire-js","")}S0e("");function RY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k0e=RY,LY=new _2("auth","Firebase",RY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new ED("@firebase/auth");function j0e(e,...t){M5.logLevel<=kn.WARN&&M5.warn(`Auth (${jg}): ${e}`,...t)}function W_(e,...t){M5.logLevel<=kn.ERROR&&M5.error(`Auth (${jg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(e,...t){throw ND(e,...t)}function KA(e,...t){return ND(e,...t)}function MY(e,t,r){const n={...k0e(),[t]:r};return new _2("auth","Firebase",n).create(t,{appName:e.name})}function rm(e){return MY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ND(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return LY.create(e,...t)}function Vr(e,t,...r){if(!e)throw ND(t,...r)}function Xf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw W_(t),new Error(t)}function ph(e,t){e||Xf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function B0e(){return n9()==="http:"||n9()==="https:"}function n9(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B0e()||ohe()||"connection"in navigator)?navigator.onLine:!0}function I0e(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(t,r){this.shortDelay=t,this.longDelay=r,ph(r>t,"Short delay should be less than long delay!"),this.isMobile=ahe()||lhe()}get(){return T0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(e,t){ph(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D0e=new k2(3e4,6e4);function Dm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Fh(e,t,r,n,a={}){return QY(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=N2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return ihe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Ih(e.emulatorConfig.host)&&(u.credentials="include"),UY.fetch()(await HY(e,e.config.apiHost,r,o),u)})}async function QY(e,t,r){e._canInitEmulator=!1;const n={...F0e,...t};try{const a=new R0e(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw xC(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xC(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw xC(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw xC(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MY(e,d,u);Md(e,d)}}catch(a){if(a instanceof Vd)throw a;Md(e,"network-request-failed",{message:String(a)})}}async function WS(e,t,r,n,a={}){const s=await Fh(e,t,r,n,a);return"mfaPendingCredential"in s&&Md(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function HY(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?SD(e.config,a):`${e.config.apiScheme}://${a}`;return O0e.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function P0e(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R0e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(KA(this.auth,"network-request-failed")),D0e.get())})}}function xC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=KA(e,t,n);return a.customData._tokenResponse=r,a}function a9(e){return e!==void 0&&e.enterprise!==void 0}class L0e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return P0e(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function M0e(e,t){return Fh(e,"GET","/v2/recaptchaConfig",Dm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0e(e,t){return Fh(e,"POST","/v1/accounts:delete",t)}async function U5(e,t){return Fh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Q0e(e,t=!1){const r=Yn(e),n=await r.getIdToken(t),a=kD(n);Vr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Xy(SB(a.auth_time)),issuedAtTime:Xy(SB(a.iat)),expirationTime:Xy(SB(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function SB(e){return Number(e)*1e3}function kD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return W_("JWT malformed, contained fewer than 3 sections"),null;try{const a=kY(r);return a?JSON.parse(a):(W_("Failed to decode base64 JWT payload"),null)}catch(a){return W_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function s9(e){const t=kD(e);return Vr(t,"internal-error"),Vr(typeof t.exp<"u","internal-error"),Vr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Vd&&H0e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function H0e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xy(this.lastLoginAt),this.creationTime=Xy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Sw(e,U5(t,{idToken:r}));Vr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?VY(a.providerUserInfo):[],i=$0e(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new y6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function z0e(e){const t=Yn(e);await Q5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function $0e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function VY(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0e(e,t){const r=await QY(e,{},async()=>{const n=N2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await HY(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&Ih(e.emulatorConfig.host)&&(c.credentials="include"),UY.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function K0e(e,t){return Fh(e,"POST","/v2/accounts:revokeToken",Dm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vr(t.idToken,"internal-error"),Vr(typeof t.idToken<"u","internal-error"),Vr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):s9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Vr(t.length!==0,"internal-error");const r=s9(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Vr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await G0e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new yv;return n&&(Vr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Vr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Vr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new yv,this.toJSON())}_performRefresh(){return Xf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(e,t){Vr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Nd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new V0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new y6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Sw(this,this.stsTokenManager.getToken(this.auth,t));return Vr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Q0e(this,t)}reload(){return z0e(this)}_assign(t){this!==t&&(Vr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Nd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await Q5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ic(this.auth.app))return Promise.reject(rm(this.auth));const t=await this.getIdToken();return await Sw(this,U0e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:x}=r;Vr(f&&x,t,"internal-error");const b=yv.fromJSON(this.name,x);Vr(typeof f=="string",t,"internal-error"),w0(n,t.name),w0(a,t.name),Vr(typeof h=="boolean",t,"internal-error"),Vr(typeof p=="boolean",t,"internal-error"),w0(s,t.name),w0(i,t.name),w0(o,t.name),w0(c,t.name),w0(u,t.name),w0(d,t.name);const y=new Nd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new yv;a.updateFromServerResponse(r);const s=new Nd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await Q5(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Vr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?VY(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new yv;o.updateFromIdToken(n);const c=new Nd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new y6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=new Map;function Yf(e){ph(e instanceof Function,"Expected a class definition");let t=i9.get(e);return t?(ph(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,i9.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}zY.type="NONE";const o9=zY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(e,t,r){return`firebase:${e}:${t}:${r}`}class wv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=X_(this.userKey,a.apiKey,s),this.fullPersistenceKey=X_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await U5(this.auth,{idToken:t}).catch(()=>{});return r?Nd._fromGetAccountInfoResponse(this.auth,r,t):null}return Nd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new wv(Yf(o9),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Yf(o9);const i=X_(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await U5(t,{idToken:d}).catch(()=>{});if(!h)break;f=await Nd._fromGetAccountInfoResponse(t,h,d)}else f=Nd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new wv(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new wv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qY(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($Y(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(XY(t))return"Blackberry";if(YY(t))return"Webos";if(GY(t))return"Safari";if((t.includes("chrome/")||KY(t))&&!t.includes("edge/"))return"Chrome";if(WY(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function $Y(e=nl()){return/firefox\//i.test(e)}function GY(e=nl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function KY(e=nl()){return/crios\//i.test(e)}function qY(e=nl()){return/iemobile/i.test(e)}function WY(e=nl()){return/android/i.test(e)}function XY(e=nl()){return/blackberry/i.test(e)}function YY(e=nl()){return/webos/i.test(e)}function jD(e=nl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function q0e(e=nl()){var t;return jD(e)&&!!((t=window.navigator)!=null&&t.standalone)}function W0e(){return che()&&document.documentMode===10}function JY(e=nl()){return jD(e)||WY(e)||YY(e)||XY(e)||/windows phone/i.test(e)||qY(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZY(e,t=[]){let r;switch(e){case"Browser":r=l9(nl());break;case"Worker":r=`${l9(nl())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${jg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0e(e,t={}){return Fh(e,"GET","/v2/passwordPolicy",Dm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0e=6;class Z0e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??J0e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eme{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c9(this),this.idTokenSubscription=new c9(this),this.beforeStateQueue=new X0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Yf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await wv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await U5(this,{idToken:t}),n=await Nd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Ic(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Q5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=I0e()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ic(this.app))return Promise.reject(rm(this));const r=t?Yn(t):null;return r&&Vr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Vr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ic(this.app)?Promise.reject(rm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ic(this.app)?Promise.reject(rm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Y0e(this),r=new Z0e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new _2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await K0e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Yf(t)||this._popupRedirectResolver;Vr(r,this,"argument-error"),this.redirectPersistenceManager=await wv.create(this,[Yf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ZY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Ic(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&j0e(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Bg(e){return Yn(e)}class c9{constructor(t){this.auth=t,this.observer=null,this.addObserver=ghe(r=>this.observer=r)}get next(){return Vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tme(e){XS=e}function eJ(e){return XS.loadJS(e)}function rme(){return XS.recaptchaEnterpriseScript}function nme(){return XS.gapiScript}function ame(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class sme{constructor(){this.enterprise=new ime}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class ime{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const ome="recaptcha-enterprise",tJ="NO_RECAPTCHA";class lme{constructor(t){this.type=ome,this.auth=Bg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{M0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new L0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;a9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(tJ)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sme().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&a9(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=rme();c.length!==0&&(c+=o),eJ(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function u9(e,t,r,n=!1,a=!1){const s=new lme(e);let i;if(a)i=tJ;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function w6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await u9(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await u9(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cme(e,t){const r=S2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(hm(s,t??{}))return a;Md(a,"already-initialized")}return r.initialize({options:t})}function ume(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Yf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function dme(e,t,r){const n=Bg(e);Vr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=rJ(t),{host:i,port:o}=Ame(t),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Vr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Vr(hm(u,n.config.emulator)&&hm(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Ih(i)?(GS(`${s}//${i}${c}`),KS("Auth",!0)):fme()}function rJ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ame(e){const t=rJ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:d9(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:d9(i)}}}function d9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function fme(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Xf("not implemented")}_getIdTokenResponse(t){return Xf("not implemented")}_linkToIdToken(t,r){return Xf("not implemented")}_getReauthenticationResolver(t){return Xf("not implemented")}}async function hme(e,t){return Fh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mme(e,t){return WS(e,"POST","/v1/accounts:signInWithPassword",Dm(e,t))}async function pme(e,t){return Fh(e,"POST","/v1/accounts:sendOobCode",Dm(e,t))}async function gme(e,t){return pme(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xme(e,t){return WS(e,"POST","/v1/accounts:signInWithEmailLink",Dm(e,t))}async function vme(e,t){return WS(e,"POST","/v1/accounts:signInWithEmailLink",Dm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends BD{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new kw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new kw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w6(t,r,"signInWithPassword",mme);case"emailLink":return xme(t,{email:this._email,oobCode:this._password});default:Md(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w6(t,n,"signUpPassword",hme);case"emailLink":return vme(t,{idToken:r,email:this._email,oobCode:this._password});default:Md(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ev(e,t){return WS(e,"POST","/v1/accounts:signInWithIdp",Dm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bme="http://localhost";class og extends BD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new og(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Md("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new og(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Ev(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Ev(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Ev(t,r)}buildRequest(){const t={requestUri:bme,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=N2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yme(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wme(e){const t=Sy(ky(e)).link,r=t?Sy(ky(t)).deep_link_id:null,n=Sy(ky(e)).deep_link_id;return(n?Sy(ky(n)).link:null)||n||r||t||e}class TD{constructor(t){const r=Sy(ky(t)),n=r.apiKey??null,a=r.oobCode??null,s=yme(r.mode??null);Vr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=wme(t);try{return new TD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.providerId=B1.PROVIDER_ID}static credential(t,r){return kw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=TD.parseLink(r);return Vr(n,"argument-error"),kw._fromEmailAndCode(t,n.code,n.tenantId)}}B1.PROVIDER_ID="password";B1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";B1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2 extends nJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends j2{constructor(){super("facebook.com")}static credential(t){return og._fromParams({providerId:L0.PROVIDER_ID,signInMethod:L0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return L0.credentialFromTaggedObject(t)}static credentialFromError(t){return L0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return L0.credential(t.oauthAccessToken)}catch{return null}}}L0.FACEBOOK_SIGN_IN_METHOD="facebook.com";L0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends j2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return og._fromParams({providerId:M0.PROVIDER_ID,signInMethod:M0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return M0.credentialFromTaggedObject(t)}static credentialFromError(t){return M0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return M0.credential(r,n)}catch{return null}}}M0.GOOGLE_SIGN_IN_METHOD="google.com";M0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0 extends j2{constructor(){super("github.com")}static credential(t){return og._fromParams({providerId:U0.PROVIDER_ID,signInMethod:U0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return U0.credentialFromTaggedObject(t)}static credentialFromError(t){return U0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return U0.credential(t.oauthAccessToken)}catch{return null}}}U0.GITHUB_SIGN_IN_METHOD="github.com";U0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends j2{constructor(){super("twitter.com")}static credential(t,r){return og._fromParams({providerId:Q0.PROVIDER_ID,signInMethod:Q0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Q0.credentialFromTaggedObject(t)}static credentialFromError(t){return Q0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Q0.credential(r,n)}catch{return null}}}Q0.TWITTER_SIGN_IN_METHOD="twitter.com";Q0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Nd._fromIdTokenResponse(t,n,a),i=A9(n);return new zv({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=A9(n);return new zv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function A9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5 extends Vd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,H5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new H5(t,r,n,a)}}function aJ(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H5._fromErrorAndOperation(e,s,t,n):s})}async function Eme(e,t,r=!1){const n=await Sw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return zv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cme(e,t,r=!1){const{auth:n}=e;if(Ic(n.app))return Promise.reject(rm(n));const a="reauthenticate";try{const s=await Sw(e,aJ(n,a,t,e),r);Vr(s.idToken,n,"internal-error");const i=kD(s.idToken);Vr(i,n,"internal-error");const{sub:o}=i;return Vr(e.uid===o,n,"user-mismatch"),zv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Md(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sJ(e,t,r=!1){if(Ic(e.app))return Promise.reject(rm(e));const n="signIn",a=await aJ(e,n,t),s=await zv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function _me(e,t){return sJ(Bg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nme(e){const t=Bg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Sme(e,t,r){const n=Bg(e);await w6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gme)}function kme(e,t,r){return Ic(e.app)?Promise.reject(rm(e)):_me(Yn(e),B1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Nme(e),n})}function jme(e,t,r,n){return Yn(e).onIdTokenChanged(t,r,n)}function Bme(e,t,r){return Yn(e).beforeAuthStateChanged(t,r)}function iJ(e,t,r,n){return Yn(e).onAuthStateChanged(t,r,n)}function Tme(e){return Yn(e).signOut()}const V5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(V5,"1"),this.storage.removeItem(V5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=1e3,Fme=10;class lJ extends oJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JY(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);W0e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,Fme):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},Ime)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}lJ.type="LOCAL";const Ome=lJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ extends oJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}cJ.type="SESSION";const uJ=cJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dme(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new YS(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await Dme(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}YS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pme{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=ID("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){return window}function Rme(e){qA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dJ(){return typeof qA().WorkerGlobalScope<"u"&&typeof qA().importScripts=="function"}async function Lme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mme(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Ume(){return dJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ="firebaseLocalStorageDb",Qme=1,z5="firebaseLocalStorage",fJ="fbase_key";class B2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function JS(e,t){return e.transaction([z5],t?"readwrite":"readonly").objectStore(z5)}function Hme(){const e=indexedDB.deleteDatabase(AJ);return new B2(e).toPromise()}function E6(){const e=indexedDB.open(AJ,Qme);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(z5,{keyPath:fJ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(z5)?t(n):(n.close(),await Hme(),t(await E6()))})})}async function f9(e,t,r){const n=JS(e,!0).put({[fJ]:t,value:r});return new B2(n).toPromise()}async function Vme(e,t){const r=JS(e,!1).get(t),n=await new B2(r).toPromise();return n===void 0?null:n.value}function h9(e,t){const r=JS(e,!0).delete(t);return new B2(r).toPromise()}const zme=800,$me=3;class hJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await E6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>$me)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=YS._getInstance(Ume()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Lme(),!this.activeServiceWorker)return;this.sender=new Pme(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Mme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await E6();return await f9(t,V5,"1"),await h9(t,V5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>f9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Vme(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>h9(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=JS(a,!1).getAll();return new B2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hJ.type="LOCAL";const Gme=hJ;new k2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kme(e,t){return t?Yf(t):(Vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD extends BD{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ev(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Ev(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Ev(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function qme(e){return sJ(e.auth,new FD(e),e.bypassAuthState)}function Wme(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),Cme(r,new FD(e),e.bypassAuthState)}async function Xme(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),Eme(r,new FD(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return qme;case"linkViaPopup":case"linkViaRedirect":return Xme;case"reauthViaPopup":case"reauthViaRedirect":return Wme;default:Md(this.auth,"internal-error")}}resolve(t){ph(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ph(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme=new k2(2e3,1e4);class ov extends mJ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,ov.currentPopupAction&&ov.currentPopupAction.cancel(),ov.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vr(t,this.auth,"internal-error"),t}async onExecution(){ph(this.filter.length===1,"Popup operations only handle one event");const t=ID();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(KA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(KA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ov.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(KA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Yme.get())};t()}}ov.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme="pendingRedirect",Y_=new Map;class Zme extends mJ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=Y_.get(this.auth._key());if(!t){try{const n=await epe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}Y_.set(this.auth._key(),t)}return this.bypassAuthState||Y_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function epe(e,t){const r=npe(t),n=rpe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function tpe(e,t){Y_.set(e._key(),t)}function rpe(e){return Yf(e._redirectPersistence)}function npe(e){return X_(Jme,e.config.apiKey,e.name)}async function ape(e,t,r=!1){if(Ic(e.app))return Promise.reject(rm(e));const n=Bg(e),a=Kme(n,t),i=await new Zme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const spe=600*1e3;class ipe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ope(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!pJ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(KA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=spe&&this.cachedEventUids.clear(),this.cachedEventUids.has(m9(t))}saveEventToCache(t){this.cachedEventUids.add(m9(t)),this.lastProcessedEventTime=Date.now()}}function m9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function pJ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function ope(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pJ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lpe(e,t={}){return Fh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,upe=/^https?/;async function dpe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await lpe(e);for(const r of t)try{if(Ape(r))return}catch{}Md(e,"unauthorized-domain")}function Ape(e){const t=b6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!upe.test(r))return!1;if(cpe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fpe=new k2(3e4,6e4);function p9(){const e=qA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function hpe(e){return new Promise((t,r)=>{var a,s,i;function n(){p9(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{p9(),r(KA(e,"network-request-failed"))},timeout:fpe.get()})}if((s=(a=qA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=qA().gapi)!=null&&i.load)n();else{const o=ame("iframefcb");return qA()[o]=()=>{gapi.load?n():r(KA(e,"network-request-failed"))},eJ(`${nme()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw J_=null,t})}let J_=null;function mpe(e){return J_=J_||hpe(e),J_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppe=new k2(5e3,15e3),gpe="__/auth/iframe",xpe="emulator/auth/iframe",vpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ype(e){const t=e.config;Vr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?SD(t,xpe):`https://${e.config.authDomain}/${gpe}`,n={apiKey:t.apiKey,appName:e.name,v:jg},a=bpe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${N2(n).slice(1)}`}async function wpe(e){const t=await mpe(e),r=qA().gapi;return Vr(r,e,"internal-error"),t.open({where:document.body,url:ype(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vpe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=KA(e,"network-request-failed"),o=qA().setTimeout(()=>{s(i)},ppe.get());function c(){qA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cpe=500,_pe=600,Npe="_blank",Spe="http://localhost";class g9{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kpe(e,t,r,n=Cpe,a=_pe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...Epe,width:n.toString(),height:a.toString(),top:s,left:i},u=nl().toLowerCase();r&&(o=KY(u)?Npe:r),$Y(u)&&(t=t||Spe,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(q0e(u)&&o!=="_self")return jpe(t||"",o),new g9(null);const f=window.open(t||"",o,d);Vr(f,e,"popup-blocked");try{f.focus()}catch{}return new g9(f)}function jpe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe="__/auth/handler",Tpe="emulator/auth/handler",Ipe=encodeURIComponent("fac");async function x9(e,t,r,n,a,s){Vr(e.config.authDomain,e,"auth-domain-config-required"),Vr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:jg,eventId:a};if(t instanceof nJ){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",phe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof j2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),u=c?`#${Ipe}=${encodeURIComponent(c)}`:"";return`${Fpe(e)}?${N2(o).slice(1)}${u}`}function Fpe({config:e}){return e.emulator?SD(e,Tpe):`https://${e.authDomain}/${Bpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="webStorageSupport";class Ope{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uJ,this._completeRedirectFn=ape,this._overrideRedirectResult=tpe}async _openPopup(t,r,n,a){var i;ph((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await x9(t,r,n,b6(),a);return kpe(t,s,ID())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await x9(t,r,n,b6(),a);return Rme(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(ph(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await wpe(t),n=new ipe(t);return r.register("authEvent",a=>(Vr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(kB,{type:kB},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[kB];s!==void 0&&r(!!s),Md(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=dpe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return JY()||GY()||jD()}}const Dpe=Ope;var v9="@firebase/auth",b9="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ppe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rpe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lpe(e){mm(new hh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Vr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZY(e)},u=new eme(n,a,s,c);return ume(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),mm(new hh("auth-internal",t=>{const r=Bg(t.getProvider("auth").getImmediate());return(n=>new Ppe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lu(v9,b9,Rpe(e)),Lu(v9,b9,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mpe=300,Upe=TY("authIdTokenMaxAge")||Mpe;let y9=null;const Qpe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Upe)return;const a=r==null?void 0:r.token;y9!==a&&(y9=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function gJ(e=qS()){const t=S2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=cme(e,{popupRedirectResolver:Dpe,persistence:[Gme,Ome,uJ]}),n=TY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=Qpe(s.toString());Bme(r,i,()=>i(r.currentUser)),jme(r,o=>i(o))}}const a=jY("auth");return a&&dme(r,`http://${a}`),r}function Hpe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}tme({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=KA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Hpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lpe("Browser");var Vpe="firebase",zpe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lu(Vpe,zpe,"app");var w9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nm,xJ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,N){function B(){}B.prototype=N.prototype,E.D=N.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(R,D,O){for(var L=Array(arguments.length-2),M=2;M<arguments.length;M++)L[M-2]=arguments[M];return N.prototype[D].apply(R,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,N,B){B||(B=0);var R=Array(16);if(typeof N=="string")for(var D=0;16>D;++D)R[D]=N.charCodeAt(B++)|N.charCodeAt(B++)<<8|N.charCodeAt(B++)<<16|N.charCodeAt(B++)<<24;else for(D=0;16>D;++D)R[D]=N[B++]|N[B++]<<8|N[B++]<<16|N[B++]<<24;N=E.g[0],B=E.g[1],D=E.g[2];var O=E.g[3],L=N+(O^B&(D^O))+R[0]+3614090360&4294967295;N=B+(L<<7&4294967295|L>>>25),L=O+(D^N&(B^D))+R[1]+3905402710&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(B^O&(N^B))+R[2]+606105819&4294967295,D=O+(L<<17&4294967295|L>>>15),L=B+(N^D&(O^N))+R[3]+3250441966&4294967295,B=D+(L<<22&4294967295|L>>>10),L=N+(O^B&(D^O))+R[4]+4118548399&4294967295,N=B+(L<<7&4294967295|L>>>25),L=O+(D^N&(B^D))+R[5]+1200080426&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(B^O&(N^B))+R[6]+2821735955&4294967295,D=O+(L<<17&4294967295|L>>>15),L=B+(N^D&(O^N))+R[7]+4249261313&4294967295,B=D+(L<<22&4294967295|L>>>10),L=N+(O^B&(D^O))+R[8]+1770035416&4294967295,N=B+(L<<7&4294967295|L>>>25),L=O+(D^N&(B^D))+R[9]+2336552879&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(B^O&(N^B))+R[10]+4294925233&4294967295,D=O+(L<<17&4294967295|L>>>15),L=B+(N^D&(O^N))+R[11]+2304563134&4294967295,B=D+(L<<22&4294967295|L>>>10),L=N+(O^B&(D^O))+R[12]+1804603682&4294967295,N=B+(L<<7&4294967295|L>>>25),L=O+(D^N&(B^D))+R[13]+4254626195&4294967295,O=N+(L<<12&4294967295|L>>>20),L=D+(B^O&(N^B))+R[14]+2792965006&4294967295,D=O+(L<<17&4294967295|L>>>15),L=B+(N^D&(O^N))+R[15]+1236535329&4294967295,B=D+(L<<22&4294967295|L>>>10),L=N+(D^O&(B^D))+R[1]+4129170786&4294967295,N=B+(L<<5&4294967295|L>>>27),L=O+(B^D&(N^B))+R[6]+3225465664&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^B&(O^N))+R[11]+643717713&4294967295,D=O+(L<<14&4294967295|L>>>18),L=B+(O^N&(D^O))+R[0]+3921069994&4294967295,B=D+(L<<20&4294967295|L>>>12),L=N+(D^O&(B^D))+R[5]+3593408605&4294967295,N=B+(L<<5&4294967295|L>>>27),L=O+(B^D&(N^B))+R[10]+38016083&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^B&(O^N))+R[15]+3634488961&4294967295,D=O+(L<<14&4294967295|L>>>18),L=B+(O^N&(D^O))+R[4]+3889429448&4294967295,B=D+(L<<20&4294967295|L>>>12),L=N+(D^O&(B^D))+R[9]+568446438&4294967295,N=B+(L<<5&4294967295|L>>>27),L=O+(B^D&(N^B))+R[14]+3275163606&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^B&(O^N))+R[3]+4107603335&4294967295,D=O+(L<<14&4294967295|L>>>18),L=B+(O^N&(D^O))+R[8]+1163531501&4294967295,B=D+(L<<20&4294967295|L>>>12),L=N+(D^O&(B^D))+R[13]+2850285829&4294967295,N=B+(L<<5&4294967295|L>>>27),L=O+(B^D&(N^B))+R[2]+4243563512&4294967295,O=N+(L<<9&4294967295|L>>>23),L=D+(N^B&(O^N))+R[7]+1735328473&4294967295,D=O+(L<<14&4294967295|L>>>18),L=B+(O^N&(D^O))+R[12]+2368359562&4294967295,B=D+(L<<20&4294967295|L>>>12),L=N+(B^D^O)+R[5]+4294588738&4294967295,N=B+(L<<4&4294967295|L>>>28),L=O+(N^B^D)+R[8]+2272392833&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^B)+R[11]+1839030562&4294967295,D=O+(L<<16&4294967295|L>>>16),L=B+(D^O^N)+R[14]+4259657740&4294967295,B=D+(L<<23&4294967295|L>>>9),L=N+(B^D^O)+R[1]+2763975236&4294967295,N=B+(L<<4&4294967295|L>>>28),L=O+(N^B^D)+R[4]+1272893353&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^B)+R[7]+4139469664&4294967295,D=O+(L<<16&4294967295|L>>>16),L=B+(D^O^N)+R[10]+3200236656&4294967295,B=D+(L<<23&4294967295|L>>>9),L=N+(B^D^O)+R[13]+681279174&4294967295,N=B+(L<<4&4294967295|L>>>28),L=O+(N^B^D)+R[0]+3936430074&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^B)+R[3]+3572445317&4294967295,D=O+(L<<16&4294967295|L>>>16),L=B+(D^O^N)+R[6]+76029189&4294967295,B=D+(L<<23&4294967295|L>>>9),L=N+(B^D^O)+R[9]+3654602809&4294967295,N=B+(L<<4&4294967295|L>>>28),L=O+(N^B^D)+R[12]+3873151461&4294967295,O=N+(L<<11&4294967295|L>>>21),L=D+(O^N^B)+R[15]+530742520&4294967295,D=O+(L<<16&4294967295|L>>>16),L=B+(D^O^N)+R[2]+3299628645&4294967295,B=D+(L<<23&4294967295|L>>>9),L=N+(D^(B|~O))+R[0]+4096336452&4294967295,N=B+(L<<6&4294967295|L>>>26),L=O+(B^(N|~D))+R[7]+1126891415&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~B))+R[14]+2878612391&4294967295,D=O+(L<<15&4294967295|L>>>17),L=B+(O^(D|~N))+R[5]+4237533241&4294967295,B=D+(L<<21&4294967295|L>>>11),L=N+(D^(B|~O))+R[12]+1700485571&4294967295,N=B+(L<<6&4294967295|L>>>26),L=O+(B^(N|~D))+R[3]+2399980690&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~B))+R[10]+4293915773&4294967295,D=O+(L<<15&4294967295|L>>>17),L=B+(O^(D|~N))+R[1]+2240044497&4294967295,B=D+(L<<21&4294967295|L>>>11),L=N+(D^(B|~O))+R[8]+1873313359&4294967295,N=B+(L<<6&4294967295|L>>>26),L=O+(B^(N|~D))+R[15]+4264355552&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~B))+R[6]+2734768916&4294967295,D=O+(L<<15&4294967295|L>>>17),L=B+(O^(D|~N))+R[13]+1309151649&4294967295,B=D+(L<<21&4294967295|L>>>11),L=N+(D^(B|~O))+R[4]+4149444226&4294967295,N=B+(L<<6&4294967295|L>>>26),L=O+(B^(N|~D))+R[11]+3174756917&4294967295,O=N+(L<<10&4294967295|L>>>22),L=D+(N^(O|~B))+R[2]+718787259&4294967295,D=O+(L<<15&4294967295|L>>>17),L=B+(O^(D|~N))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+N&4294967295,E.g[1]=E.g[1]+(D+(L<<21&4294967295|L>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+O&4294967295}n.prototype.u=function(E,N){N===void 0&&(N=E.length);for(var B=N-this.blockSize,R=this.B,D=this.h,O=0;O<N;){if(D==0)for(;O<=B;)a(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<N;)if(R[D++]=E.charCodeAt(O++),D==this.blockSize){a(this,R),D=0;break}}else for(;O<N;)if(R[D++]=E[O++],D==this.blockSize){a(this,R),D=0;break}}this.h=D,this.o+=N},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var N=1;N<E.length-8;++N)E[N]=0;var B=8*this.o;for(N=E.length-8;N<E.length;++N)E[N]=B&255,B/=256;for(this.u(E),E=Array(16),N=B=0;4>N;++N)for(var R=0;32>R;R+=8)E[B++]=this.g[N]>>>R&255;return E};function s(E,N){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=N(E)}function i(E,N){this.h=N;for(var B=[],R=!0,D=E.length-1;0<=D;D--){var O=E[D]|0;R&&O==N||(B[D]=O,R=!1)}this.g=B}var o={};function c(E){return-128<=E&&128>E?s(E,function(N){return new i([N|0],0>N?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(u(-E));for(var N=[],B=1,R=0;E>=B;R++)N[R]=E/B|0,B*=4294967296;return new i(N,0)}function d(E,N){if(E.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E.charAt(0)=="-")return b(d(E.substring(1),N));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(N,8)),R=f,D=0;D<E.length;D+=8){var O=Math.min(8,E.length-D),L=parseInt(E.substring(D,D+O),N);8>O?(O=u(Math.pow(N,O)),R=R.j(O).add(u(L))):(R=R.j(B),R=R.add(u(L)))}return R}var f=c(0),h=c(1),p=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-b(this).m();for(var E=0,N=1,B=0;B<this.g.length;B++){var R=this.i(B);E+=(0<=R?R:4294967296+R)*N,N*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+b(this).toString(E);for(var N=u(Math.pow(E,6)),B=this,R="";;){var D=j(B,N).g;B=y(B,D.j(N));var O=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=D,g(B))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var N=0;N<E.g.length;N++)if(E.g[N]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function b(E){for(var N=E.g.length,B=[],R=0;R<N;R++)B[R]=~E.g[R];return new i(B,~E.h).add(h)}e.abs=function(){return x(this)?b(this):this},e.add=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0,D=0;D<=N;D++){var O=R+(this.i(D)&65535)+(E.i(D)&65535),L=(O>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);R=L>>>16,O&=65535,L&=65535,B[D]=L<<16|O}return new i(B,B[B.length-1]&-2147483648?-1:0)};function y(E,N){return E.add(b(N))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?b(this).j(b(E)):b(b(this).j(E));if(x(E))return b(this.j(b(E)));if(0>this.l(p)&&0>E.l(p))return u(this.m()*E.m());for(var N=this.g.length+E.g.length,B=[],R=0;R<2*N;R++)B[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<E.g.length;D++){var O=this.i(R)>>>16,L=this.i(R)&65535,M=E.i(D)>>>16,J=E.i(D)&65535;B[2*R+2*D]+=L*J,w(B,2*R+2*D),B[2*R+2*D+1]+=O*J,w(B,2*R+2*D+1),B[2*R+2*D+1]+=L*M,w(B,2*R+2*D+1),B[2*R+2*D+2]+=O*M,w(B,2*R+2*D+2)}for(R=0;R<N;R++)B[R]=B[2*R+1]<<16|B[2*R];for(R=N;R<2*N;R++)B[R]=0;return new i(B,0)};function w(E,N){for(;(E[N]&65535)!=E[N];)E[N+1]+=E[N]>>>16,E[N]&=65535,N++}function _(E,N){this.g=E,this.h=N}function j(E,N){if(g(N))throw Error("division by zero");if(g(E))return new _(f,f);if(x(E))return N=j(b(E),N),new _(b(N.g),b(N.h));if(x(N))return N=j(E,b(N)),new _(b(N.g),N.h);if(30<E.g.length){if(x(E)||x(N))throw Error("slowDivide_ only works with positive integers.");for(var B=h,R=N;0>=R.l(E);)B=k(B),R=k(R);var D=I(B,1),O=I(R,1);for(R=I(R,2),B=I(B,2);!g(R);){var L=O.add(R);0>=L.l(E)&&(D=D.add(B),O=L),R=I(R,1),B=I(B,1)}return N=y(E,D.j(N)),new _(D,N)}for(D=f;0<=E.l(N);){for(B=Math.max(1,Math.floor(E.m()/N.m())),R=Math.ceil(Math.log(B)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=u(B),L=O.j(N);x(L)||0<L.l(E);)B-=R,O=u(B),L=O.j(N);g(O)&&(O=h),D=D.add(O),E=y(E,L)}return new _(D,E)}e.A=function(E){return j(this,E).h},e.and=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0;R<N;R++)B[R]=this.i(R)&E.i(R);return new i(B,this.h&E.h)},e.or=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0;R<N;R++)B[R]=this.i(R)|E.i(R);return new i(B,this.h|E.h)},e.xor=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0;R<N;R++)B[R]=this.i(R)^E.i(R);return new i(B,this.h^E.h)};function k(E){for(var N=E.g.length+1,B=[],R=0;R<N;R++)B[R]=E.i(R)<<1|E.i(R-1)>>>31;return new i(B,E.h)}function I(E,N){var B=N>>5;N%=32;for(var R=E.g.length-B,D=[],O=0;O<R;O++)D[O]=0<N?E.i(O+B)>>>N|E.i(O+B+1)<<32-N:E.i(O+B);return new i(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,xJ=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,nm=i}).apply(typeof w9<"u"?w9:typeof self<"u"?self:typeof window<"u"?window:{});var vC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vJ,jy,bJ,Z_,C6,yJ,wJ,EJ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,re,oe){return F==Array.prototype||F==Object.prototype||(F[re]=oe.value),F};function r(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof vC=="object"&&vC];for(var re=0;re<F.length;++re){var oe=F[re];if(oe&&oe.Math==Math)return oe}throw Error("Cannot find global object")}var n=r(this);function a(F,re){if(re)e:{var oe=n;F=F.split(".");for(var ve=0;ve<F.length-1;ve++){var ze=F[ve];if(!(ze in oe))break e;oe=oe[ze]}F=F[F.length-1],ve=oe[F],re=re(ve),re!=ve&&re!=null&&t(oe,F,{configurable:!0,writable:!0,value:re})}}function s(F,re){F instanceof String&&(F+="");var oe=0,ve=!1,ze={next:function(){if(!ve&&oe<F.length){var ot=oe++;return{value:re(ot,F[ot]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(F){return F||function(){return s(this,function(re,oe){return oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(F){var re=typeof F;return re=re!="object"?re:F?Array.isArray(F)?"array":re:"null",re=="array"||re=="object"&&typeof F.length=="number"}function u(F){var re=typeof F;return re=="object"&&F!=null||re=="function"}function d(F,re,oe){return F.call.apply(F.bind,arguments)}function f(F,re,oe){if(!F)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ve),F.apply(re,ze)}}return function(){return F.apply(re,arguments)}}function h(F,re,oe){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(F,re){var oe=Array.prototype.slice.call(arguments,1);return function(){var ve=oe.slice();return ve.push.apply(ve,arguments),F.apply(this,ve)}}function g(F,re){function oe(){}oe.prototype=re.prototype,F.aa=re.prototype,F.prototype=new oe,F.prototype.constructor=F,F.Qb=function(ve,ze,ot){for(var Ut=Array(arguments.length-2),Fr=2;Fr<arguments.length;Fr++)Ut[Fr-2]=arguments[Fr];return re.prototype[ze].apply(ve,Ut)}}function x(F){const re=F.length;if(0<re){const oe=Array(re);for(let ve=0;ve<re;ve++)oe[ve]=F[ve];return oe}return[]}function b(F,re){for(let oe=1;oe<arguments.length;oe++){const ve=arguments[oe];if(c(ve)){const ze=F.length||0,ot=ve.length||0;F.length=ze+ot;for(let Ut=0;Ut<ot;Ut++)F[ze+Ut]=ve[Ut]}else F.push(ve)}}class y{constructor(re,oe){this.i=re,this.j=oe,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function w(F){return/^[\s\xa0]*$/.test(F)}function _(){var F=o.navigator;return F&&(F=F.userAgent)?F:""}function j(F){return j[" "](F),F}j[" "]=function(){};var k=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function I(F,re,oe){for(const ve in F)re.call(oe,F[ve],ve,F)}function E(F,re){for(const oe in F)re.call(void 0,F[oe],oe,F)}function N(F){const re={};for(const oe in F)re[oe]=F[oe];return re}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(F,re){let oe,ve;for(let ze=1;ze<arguments.length;ze++){ve=arguments[ze];for(oe in ve)F[oe]=ve[oe];for(let ot=0;ot<B.length;ot++)oe=B[ot],Object.prototype.hasOwnProperty.call(ve,oe)&&(F[oe]=ve[oe])}}function D(F){var re=1;F=F.split(":");const oe=[];for(;0<re&&F.length;)oe.push(F.shift()),re--;return F.length&&oe.push(F.join(":")),oe}function O(F){o.setTimeout(()=>{throw F},0)}function L(){var F=G;let re=null;return F.g&&(re=F.g,F.g=F.g.next,F.g||(F.h=null),re.next=null),re}class M{constructor(){this.h=this.g=null}add(re,oe){const ve=J.get();ve.set(re,oe),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var J=new y(()=>new V,F=>F.reset());class V{constructor(){this.next=this.g=this.h=null}set(re,oe){this.h=re,this.g=oe,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,G=new M,Y=()=>{const F=o.Promise.resolve(void 0);K=()=>{F.then(te)}};var te=()=>{for(var F;F=L();){try{F.h.call(F.g)}catch(oe){O(oe)}var re=J;re.j(F),100>re.h&&(re.h++,F.next=re.g,re.g=F)}z=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(F,re){this.type=F,this.g=this.target=re,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var F=!1,re=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const oe=()=>{};o.addEventListener("test",oe,re),o.removeEventListener("test",oe,re)}catch{}return F}();function Z(F,re){if(H.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var oe=this.type=F.type,ve=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=re,re=F.relatedTarget){if(k){e:{try{j(re.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(re=null)}}else oe=="mouseover"?re=F.fromElement:oe=="mouseout"&&(re=F.toElement);this.relatedTarget=re,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:ae[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&Z.aa.h.call(this)}}g(Z,H);var ae={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ce(F,re,oe,ve,ze){this.listener=F,this.proxy=null,this.src=re,this.type=oe,this.capture=!!ve,this.ha=ze,this.key=++ie,this.da=this.fa=!1}function fe(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function Ie(F){this.src=F,this.g={},this.h=0}Ie.prototype.add=function(F,re,oe,ve,ze){var ot=F.toString();F=this.g[ot],F||(F=this.g[ot]=[],this.h++);var Ut=_e(F,re,ve,ze);return-1<Ut?(re=F[Ut],oe||(re.fa=!1)):(re=new ce(re,this.src,ot,!!ve,ze),re.fa=oe,F.push(re)),re};function ne(F,re){var oe=re.type;if(oe in F.g){var ve=F.g[oe],ze=Array.prototype.indexOf.call(ve,re,void 0),ot;(ot=0<=ze)&&Array.prototype.splice.call(ve,ze,1),ot&&(fe(re),F.g[oe].length==0&&(delete F.g[oe],F.h--))}}function _e(F,re,oe,ve){for(var ze=0;ze<F.length;++ze){var ot=F[ze];if(!ot.da&&ot.listener==re&&ot.capture==!!oe&&ot.ha==ve)return ze}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),Se={};function me(F,re,oe,ve,ze){if(Array.isArray(re)){for(var ot=0;ot<re.length;ot++)me(F,re[ot],oe,ve,ze);return null}return oe=ct(oe),F&&F[le]?F.K(re,oe,u(ve)?!!ve.capture:!1,ze):Te(F,re,oe,!1,ve,ze)}function Te(F,re,oe,ve,ze,ot){if(!re)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,Fr=qe(F);if(Fr||(F[Fe]=Fr=new Ie(F)),oe=Fr.add(re,oe,ve,Ut,ot),oe.proxy)return oe;if(ve=Me(),oe.proxy=ve,ve.src=F,ve.listener=oe,F.addEventListener)X||(ze=Ut),ze===void 0&&(ze=!1),F.addEventListener(re.toString(),ve,ze);else if(F.attachEvent)F.attachEvent(De(re.toString()),ve);else if(F.addListener&&F.removeListener)F.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return oe}function Me(){function F(oe){return re.call(F.src,F.listener,oe)}const re=Re;return F}function We(F,re,oe,ve,ze){if(Array.isArray(re))for(var ot=0;ot<re.length;ot++)We(F,re[ot],oe,ve,ze);else ve=u(ve)?!!ve.capture:!!ve,oe=ct(oe),F&&F[le]?(F=F.i,re=String(re).toString(),re in F.g&&(ot=F.g[re],oe=_e(ot,oe,ve,ze),-1<oe&&(fe(ot[oe]),Array.prototype.splice.call(ot,oe,1),ot.length==0&&(delete F.g[re],F.h--)))):F&&(F=qe(F))&&(re=F.g[re.toString()],F=-1,re&&(F=_e(re,oe,ve,ze)),(oe=-1<F?re[F]:null)&&be(oe))}function be(F){if(typeof F!="number"&&F&&!F.da){var re=F.src;if(re&&re[le])ne(re.i,F);else{var oe=F.type,ve=F.proxy;re.removeEventListener?re.removeEventListener(oe,ve,F.capture):re.detachEvent?re.detachEvent(De(oe),ve):re.addListener&&re.removeListener&&re.removeListener(ve),(oe=qe(re))?(ne(oe,F),oe.h==0&&(oe.src=null,re[Fe]=null)):fe(F)}}}function De(F){return F in Se?Se[F]:Se[F]="on"+F}function Re(F,re){if(F.da)F=!0;else{re=new Z(re,this);var oe=F.listener,ve=F.ha||F.src;F.fa&&be(F),F=oe.call(ve,re)}return F}function qe(F){return F=F[Fe],F instanceof Ie?F:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(F){return typeof F=="function"?F:(F[Ze]||(F[Ze]=function(re){return F.handleEvent(re)}),F[Ze])}function pt(){P.call(this),this.i=new Ie(this),this.M=this,this.F=null}g(pt,P),pt.prototype[le]=!0,pt.prototype.removeEventListener=function(F,re,oe,ve){We(this,F,re,oe,ve)};function It(F,re){var oe,ve=F.F;if(ve)for(oe=[];ve;ve=ve.F)oe.push(ve);if(F=F.M,ve=re.type||re,typeof re=="string")re=new H(re,F);else if(re instanceof H)re.target=re.target||F;else{var ze=re;re=new H(ve,F),R(re,ze)}if(ze=!0,oe)for(var ot=oe.length-1;0<=ot;ot--){var Ut=re.g=oe[ot];ze=Mt(Ut,ve,!0,re)&&ze}if(Ut=re.g=F,ze=Mt(Ut,ve,!0,re)&&ze,ze=Mt(Ut,ve,!1,re)&&ze,oe)for(ot=0;ot<oe.length;ot++)Ut=re.g=oe[ot],ze=Mt(Ut,ve,!1,re)&&ze}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var F=this.i,re;for(re in F.g){for(var oe=F.g[re],ve=0;ve<oe.length;ve++)fe(oe[ve]);delete F.g[re],F.h--}}this.F=null},pt.prototype.K=function(F,re,oe,ve){return this.i.add(String(F),re,!1,oe,ve)},pt.prototype.L=function(F,re,oe,ve){return this.i.add(String(F),re,!0,oe,ve)};function Mt(F,re,oe,ve){if(re=F.i.g[String(re)],!re)return!0;re=re.concat();for(var ze=!0,ot=0;ot<re.length;++ot){var Ut=re[ot];if(Ut&&!Ut.da&&Ut.capture==oe){var Fr=Ut.listener,yn=Ut.ha||Ut.src;Ut.fa&&ne(F.i,Ut),ze=Fr.call(yn,ve)!==!1&&ze}}return ze&&!ve.defaultPrevented}function Pt(F,re,oe){if(typeof F=="function")oe&&(F=h(F,oe));else if(F&&typeof F.handleEvent=="function")F=h(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:o.setTimeout(F,re||0)}function Qt(F){F.g=Pt(()=>{F.g=null,F.i&&(F.i=!1,Qt(F))},F.l);const re=F.h;F.h=null,F.m.apply(null,re)}class wt extends P{constructor(re,oe){super(),this.m=re,this.l=oe,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(F){P.call(this),this.h=F,this.g={}}g(jr,P);var tr=[];function an(F){I(F.g,function(re,oe){this.g.hasOwnProperty(oe)&&be(re)},F),F.g={}}jr.prototype.N=function(){jr.aa.N.call(this),an(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=o.JSON.stringify,$r=o.JSON.parse,In=class{stringify(F){return o.JSON.stringify(F,void 0)}parse(F){return o.JSON.parse(F,void 0)}};function Pr(){}Pr.prototype.h=null;function fs(F){return F.h||(F.h=F.i())}function hn(){}var la={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ja(){H.call(this,"d")}g(ja,H);function rn(){H.call(this,"c")}g(rn,H);var pr={},et=null;function gt(){return et=et||new pt}pr.La="serverreachability";function Je(F){H.call(this,pr.La,F)}g(Je,H);function xt(F){const re=gt();It(re,new Je(re))}pr.STAT_EVENT="statevent";function Et(F,re){H.call(this,pr.STAT_EVENT,F),this.stat=re}g(Et,H);function bt(F){const re=gt();It(re,new Et(re,F))}pr.Ma="timingevent";function nr(F,re){H.call(this,pr.Ma,F),this.size=re}g(nr,H);function xr(F,re){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){F()},re)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Zr(F,re,oe,ve,ze,ot){F.info(function(){if(F.g)if(ot)for(var Ut="",Fr=ot.split("&"),yn=0;yn<Fr.length;yn++){var Xr=Fr[yn].split("=");if(1<Xr.length){var zn=Xr[0];Xr=Xr[1];var ta=zn.split("_");Ut=2<=ta.length&&ta[1]=="type"?Ut+(zn+"="+Xr+"&"):Ut+(zn+"=redacted&")}}else Ut=null;else Ut=ot;return"XMLHTTP REQ ("+ve+") [attempt "+ze+"]: "+re+`
`+oe+`
`+Ut})}function qr(F,re,oe,ve,ze,ot,Ut){F.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+ze+"]: "+re+`
`+oe+`
`+ot+" "+Ut})}function he(F,re,oe,ve){F.info(function(){return"XMLHTTP TEXT ("+re+"): "+Ce(F,oe)+(ve?" "+ve:"")})}function je(F,re){F.info(function(){return"TIMEOUT: "+re})}Wr.prototype.info=function(){};function Ce(F,re){if(!F.g)return re;if(!re)return null;try{var oe=JSON.parse(re);if(oe){for(F=0;F<oe.length;F++)if(Array.isArray(oe[F])){var ve=oe[F];if(!(2>ve.length)){var ze=ve[1];if(Array.isArray(ze)&&!(1>ze.length)){var ot=ze[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Nr(oe)}catch{return re}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Be;function Ye(){}g(Ye,Pr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Be=new Ye;function dt(F,re,oe,ve){this.j=F,this.i=re,this.l=oe,this.R=ve||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var rt={},it={};function Ft(F,re,oe){F.L=1,F.v=Jc(vi(re)),F.m=oe,F.P=!0,Vt(F,null)}function Vt(F,re){F.F=Date.now(),Gt(F),F.A=vi(F.v);var oe=F.A,ve=F.R;Array.isArray(ve)||(ve=[String(ve)]),Ir(oe.i,"t",ve),F.C=0,oe=F.j.J,F.h=new $e,F.g=Ae(F.j,oe?re:null,!F.m),0<F.O&&(F.M=new wt(h(F.Y,F,F.g),F.O)),re=F.U,oe=F.g,ve=F.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(tr[0]=ze.toString()),ze=tr);for(var ot=0;ot<ze.length;ot++){var Ut=me(oe,ze[ot],ve||re.handleEvent,!1,re.h||re);if(!Ut)break;re.g[Ut.key]=Ut}re=F.H?N(F.H):{},F.m?(F.u||(F.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,re)):(F.u="GET",F.g.ea(F.A,F.u,null,re)),xt(),Zr(F.i,F.u,F.A,F.l,F.R,F.m)}dt.prototype.ca=function(F){F=F.target;const re=this.M;re&&gs(F)==3?re.j():this.Y(F)},dt.prototype.Y=function(F){try{if(F==this.g)e:{const ta=gs(this.g);var re=this.g.Ba();const Ol=this.g.Z();if(!(3>ta)&&(ta!=3||this.g&&(this.h.h||this.g.oa()||$h(this.g)))){this.J||ta!=4||re==7||(re==8||0>=Ol?xt(3):xt(2)),sn(this);var oe=this.g.Z();this.X=oe;t:if(Jt(this)){var ve=$h(this.g);F="";var ze=ve.length,ot=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Ut="";break t}this.h.i=new o.TextDecoder}for(re=0;re<ze;re++)this.h.h=!0,F+=this.h.i.decode(ve[re],{stream:!(ot&&re==ze-1)});ve.length=0,this.h.g+=F,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=oe==200,qr(this.i,this.u,this.A,this.l,this.R,ta,oe),this.o){if(this.T&&!this.K){t:{if(this.g){var Fr,yn=this.g;if((Fr=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Fr)){var Xr=Fr;break t}}Xr=null}if(oe=Xr)he(this.i,this.l,oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,oe);else{this.o=!1,this.s=3,bt(12),An(this),on(this);break e}}if(this.P){oe=!0;let es;for(;!this.J&&this.C<Ut.length;)if(es=Ht(this,Ut),es==it){ta==4&&(this.s=4,bt(14),oe=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(es==rt){this.s=4,bt(15),he(this.i,this.l,Ut,"[Invalid Chunk]"),oe=!1;break}else he(this.i,this.l,es,null),hs(this,es);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ta!=4||Ut.length!=0||this.h.h||(this.s=1,bt(16),oe=!1),this.o=this.o&&oe,!oe)he(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Ut.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),au(zn),zn.M=!0,bt(11))}}else he(this.i,this.l,Ut,null),hs(this,Ut);ta==4&&An(this),this.o&&!this.J&&(ta==4?su(this.j,this):(this.o=!1,Gt(this)))}else tu(this.g),oe==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),An(this),on(this)}}}catch{}finally{}};function Jt(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function Ht(F,re){var oe=F.C,ve=re.indexOf(`
`,oe);return ve==-1?it:(oe=Number(re.substring(oe,ve)),isNaN(oe)?rt:(ve+=1,ve+oe>re.length?it:(re=re.slice(ve,ve+oe),F.C=ve+oe,re)))}dt.prototype.cancel=function(){this.J=!0,An(this)};function Gt(F){F.S=Date.now()+F.I,Sr(F,F.I)}function Sr(F,re){if(F.B!=null)throw Error("WatchDog timer not null");F.B=xr(h(F.ba,F),re)}function sn(F){F.B&&(o.clearTimeout(F.B),F.B=null)}dt.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?(je(this.i,this.A),this.L!=2&&(xt(),bt(17)),An(this),this.s=2,on(this)):Sr(this,this.S-F)};function on(F){F.j.G==0||F.J||su(F.j,F)}function An(F){sn(F);var re=F.M;re&&typeof re.ma=="function"&&re.ma(),F.M=null,an(F.U),F.g&&(re=F.g,F.g=null,re.abort(),re.ma())}function hs(F,re){try{var oe=F.j;if(oe.G!=0&&(oe.g==F||gi(oe.h,F))){if(!F.K&&gi(oe.h,F)&&oe.G==3){try{var ve=oe.Da.g.parse(re)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var ze=ve;if(ze[0]==0){e:if(!oe.u){if(oe.g)if(oe.g.F+3e3<F.F)fc(oe),Zd(oe);else break e;Zu(oe),bt(18)}}else oe.za=ze[1],0<oe.za-oe.T&&37500>ze[2]&&oe.F&&oe.v==0&&!oe.C&&(oe.C=xr(h(oe.Za,oe),6e3));if(1>=Ts(oe.h)&&oe.ca){try{oe.ca()}catch{}oe.ca=void 0}}else Pi(oe,11)}else if((F.K||oe.g==F)&&fc(oe),!w(re))for(ze=oe.Da.g.parse(re),re=0;re<ze.length;re++){let Xr=ze[re];if(oe.T=Xr[0],Xr=Xr[1],oe.G==2)if(Xr[0]=="c"){oe.K=Xr[1],oe.ia=Xr[2];const zn=Xr[3];zn!=null&&(oe.la=zn,oe.j.info("VER="+oe.la));const ta=Xr[4];ta!=null&&(oe.Aa=ta,oe.j.info("SVER="+oe.Aa));const Ol=Xr[5];Ol!=null&&typeof Ol=="number"&&0<Ol&&(ve=1.5*Ol,oe.L=ve,oe.j.info("backChannelRequestTimeoutMs_="+ve)),ve=oe;const es=F.g;if(es){const jo=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var ot=ve.h;ot.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(xa(ot,ot.h),ot.h=null))}if(ve.D){const iu=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(ve.ya=iu,Vn(ve.I,ve.D,iu))}}oe.G=3,oe.l&&oe.l.ua(),oe.ba&&(oe.R=Date.now()-F.F,oe.j.info("Handshake RTT: "+oe.R+"ms")),ve=oe;var Ut=F;if(ve.qa=W(ve,ve.J?ve.ia:null,ve.W),Ut.K){ei(ve.h,Ut);var Fr=Ut,yn=ve.L;yn&&(Fr.I=yn),Fr.B&&(sn(Fr),Gt(Fr)),ve.g=Ut}else tA(ve);0<oe.i.length&&eA(oe)}else Xr[0]!="stop"&&Xr[0]!="close"||Pi(oe,7);else oe.G==3&&(Xr[0]=="stop"||Xr[0]=="close"?Xr[0]=="stop"?Pi(oe,7):Ac(oe):Xr[0]!="noop"&&oe.l&&oe.l.ta(Xr),oe.v=0)}}xt(4)}catch{}}var Co=class{constructor(F,re){this.g=F,this.map=re}};function ms(F){this.l=F||10,o.PerformanceNavigationTiming?(F=o.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zs(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function Ts(F){return F.h?1:F.g?F.g.size:0}function gi(F,re){return F.h?F.h==re:F.g?F.g.has(re):!1}function xa(F,re){F.g?F.g.add(re):F.h=re}function ei(F,re){F.h&&F.h==re?F.h=null:F.g&&F.g.has(re)&&F.g.delete(re)}ms.prototype.cancel=function(){if(this.i=Xd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Xd(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let re=F.i;for(const oe of F.g.values())re=re.concat(oe.D);return re}return x(F.i)}function Hh(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(c(F)){for(var re=[],oe=F.length,ve=0;ve<oe;ve++)re.push(F[ve]);return re}re=[],oe=0;for(ve in F)re[oe++]=F[ve];return re}function Wc(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(c(F)||typeof F=="string"){var re=[];F=F.length;for(var oe=0;oe<F;oe++)re.push(oe);return re}re=[],oe=0;for(const ve in F)re[oe++]=ve;return re}}}function df(F,re){if(F.forEach&&typeof F.forEach=="function")F.forEach(re,void 0);else if(c(F)||typeof F=="string")Array.prototype.forEach.call(F,re,void 0);else for(var oe=Wc(F),ve=Hh(F),ze=ve.length,ot=0;ot<ze;ot++)re.call(void 0,ve[ot],oe&&oe[ot],F)}var xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yd(F,re){if(F){F=F.split("&");for(var oe=0;oe<F.length;oe++){var ve=F[oe].indexOf("="),ze=null;if(0<=ve){var ot=F[oe].substring(0,ve);ze=F[oe].substring(ve+1)}else ot=F[oe];re(ot,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Fn(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof Fn){this.h=F.h,Xc(this,F.j),this.o=F.o,this.g=F.g,Yc(this,F.s),this.l=F.l;var re=F.i,oe=new kl;oe.i=re.i,re.g&&(oe.g=new Map(re.g),oe.h=re.h),Sl(this,oe),this.m=F.m}else F&&(re=String(F).match(xi))?(this.h=!1,Xc(this,re[1]||"",!0),this.o=_o(re[2]||""),this.g=_o(re[3]||"",!0),Yc(this,re[4]),this.l=_o(re[5]||"",!0),Sl(this,re[6]||"",!0),this.m=_o(re[7]||"")):(this.h=!1,this.i=new kl(null,this.h))}Fn.prototype.toString=function(){var F=[],re=this.j;re&&F.push(oc(re,Af,!0),":");var oe=this.g;return(oe||re=="file")&&(F.push("//"),(re=this.o)&&F.push(oc(re,Af,!0),"@"),F.push(encodeURIComponent(String(oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),oe=this.s,oe!=null&&F.push(":",String(oe))),(oe=this.l)&&(this.g&&oe.charAt(0)!="/"&&F.push("/"),F.push(oc(oe,oe.charAt(0)=="/"?lc:ff,!0))),(oe=this.i.toString())&&F.push("?",oe),(oe=this.m)&&F.push("#",oc(oe,cc)),F.join("")};function vi(F){return new Fn(F)}function Xc(F,re,oe){F.j=oe?_o(re,!0):re,F.j&&(F.j=F.j.replace(/:$/,""))}function Yc(F,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);F.s=re}else F.s=null}function Sl(F,re,oe){re instanceof kl?(F.i=re,zh(F.i,F.h)):(oe||(re=oc(re,Jd)),F.i=new kl(re,F.h))}function Vn(F,re,oe){F.i.set(re,oe)}function Jc(F){return Vn(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function _o(F,re){return F?re?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function oc(F,re,oe){return typeof F=="string"?(F=encodeURI(F).replace(re,Vh),oe&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function Vh(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var Af=/[#\/\?@]/g,ff=/[#\?:]/g,lc=/[#\?]/g,Jd=/[#\?@]/g,cc=/#/g;function kl(F,re){this.h=this.g=null,this.i=F||null,this.j=!!re}function ca(F){F.g||(F.g=new Map,F.h=0,F.i&&Yd(F.i,function(re,oe){F.add(decodeURIComponent(re.replace(/\+/g," ")),oe)}))}e=kl.prototype,e.add=function(F,re){ca(this),this.i=null,F=Bl(this,F);var oe=this.g.get(F);return oe||this.g.set(F,oe=[]),oe.push(re),this.h+=1,this};function uc(F,re){ca(F),re=Bl(F,re),F.g.has(re)&&(F.i=null,F.h-=F.g.get(re).length,F.g.delete(re))}function jl(F,re){return ca(F),re=Bl(F,re),F.g.has(re)}e.forEach=function(F,re){ca(this),this.g.forEach(function(oe,ve){oe.forEach(function(ze){F.call(re,ze,ve,this)},this)},this)},e.na=function(){ca(this);const F=Array.from(this.g.values()),re=Array.from(this.g.keys()),oe=[];for(let ve=0;ve<re.length;ve++){const ze=F[ve];for(let ot=0;ot<ze.length;ot++)oe.push(re[ve])}return oe},e.V=function(F){ca(this);let re=[];if(typeof F=="string")jl(this,F)&&(re=re.concat(this.g.get(Bl(this,F))));else{F=Array.from(this.g.values());for(let oe=0;oe<F.length;oe++)re=re.concat(F[oe])}return re},e.set=function(F,re){return ca(this),this.i=null,F=Bl(this,F),jl(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[re]),this.h+=1,this},e.get=function(F,re){return F?(F=this.V(F),0<F.length?String(F[0]):re):re};function Ir(F,re,oe){uc(F,re),0<oe.length&&(F.i=null,F.g.set(Bl(F,re),x(oe)),F.h+=oe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],re=Array.from(this.g.keys());for(var oe=0;oe<re.length;oe++){var ve=re[oe];const ot=encodeURIComponent(String(ve)),Ut=this.V(ve);for(ve=0;ve<Ut.length;ve++){var ze=ot;Ut[ve]!==""&&(ze+="="+encodeURIComponent(String(Ut[ve]))),F.push(ze)}}return this.i=F.join("&")};function Bl(F,re){return re=String(re),F.j&&(re=re.toLowerCase()),re}function zh(F,re){re&&!F.j&&(ca(F),F.i=null,F.g.forEach(function(oe,ve){var ze=ve.toLowerCase();ve!=ze&&(uc(this,ve),Ir(this,ze,oe))},F)),F.j=re}function Fi(F,re){const oe=new Wr;if(o.Image){const ve=new Image;ve.onload=p(no,oe,"TestLoadImage: loaded",!0,re,ve),ve.onerror=p(no,oe,"TestLoadImage: error",!1,re,ve),ve.onabort=p(no,oe,"TestLoadImage: abort",!1,re,ve),ve.ontimeout=p(no,oe,"TestLoadImage: timeout",!1,re,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=F}else re(!1)}function No(F,re){const oe=new Wr,ve=new AbortController,ze=setTimeout(()=>{ve.abort(),no(oe,"TestPingServer: timeout",!1,re)},1e4);fetch(F,{signal:ve.signal}).then(ot=>{clearTimeout(ze),ot.ok?no(oe,"TestPingServer: ok",!0,re):no(oe,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(ze),no(oe,"TestPingServer: error",!1,re)})}function no(F,re,oe,ve,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ve(oe)}catch{}}function Tl(){this.g=new In}function So(F,re,oe){const ve=oe||"";try{df(F,function(ze,ot){let Ut=ze;u(ze)&&(Ut=Nr(ze)),re.push(ve+ot+"="+encodeURIComponent(Ut))})}catch(ze){throw re.push(ve+"type="+encodeURIComponent("_badmap")),ze}}function Zc(F){this.l=F.Ub||null,this.j=F.eb||!1}g(Zc,Pr),Zc.prototype.g=function(){return new dc(this.l,this.j)},Zc.prototype.i=function(F){return function(){return F}}({});function dc(F,re){pt.call(this),this.D=F,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(dc,pt),e=dc.prototype,e.open=function(F,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=re,this.readyState=1,Oi(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(re.body=F),(this.D||o).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ko(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hf(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function hf(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var re=F.value?F.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!F.done}))&&(this.response=this.responseText+=re)}F.done?ko(this):Oi(this),this.readyState==3&&hf(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,ko(this))},e.Qa=function(F){this.g&&(this.response=F,ko(this))},e.ga=function(){this.g&&ko(this)};function ko(F){F.readyState=4,F.l=null,F.j=null,F.v=null,Oi(F)}e.setRequestHeader=function(F,re){this.u.append(F,re)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],re=this.h.entries();for(var oe=re.next();!oe.done;)oe=oe.value,F.push(oe[0]+": "+oe[1]),oe=re.next();return F.join(`\r
`)};function Oi(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function Il(F){let re="";return I(F,function(oe,ve){re+=ve,re+=":",re+=oe,re+=`\r
`}),re}function ps(F,re,oe){e:{for(ve in oe){var ve=!1;break e}ve=!0}ve||(oe=Il(oe),typeof F=="string"?oe!=null&&encodeURIComponent(String(oe)):Vn(F,re,oe))}function bn(F){pt.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(bn,pt);var eu=/^https?$/i,Fl=["POST","PUT"];e=bn.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,re,oe,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);re=re?re.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Be.g(),this.v=this.o?fs(this.o):fs(Be),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(re,String(F),!0),this.B=!1}catch(ot){mf(this,ot);return}if(F=oe||"",oe=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var ze in ve)oe.set(ze,ve[ze]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const ot of ve.keys())oe.set(ot,ve.get(ot));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(oe.keys()).find(ot=>ot.toLowerCase()=="content-type"),ze=o.FormData&&F instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Fl,re,void 0))||ve||ze||oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Ut]of oe)this.g.setRequestHeader(ot,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Di(this),this.u=!0,this.g.send(F),this.u=!1}catch(ot){mf(this,ot)}};function mf(F,re){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=re,F.m=5,qu(F),ll(F)}function qu(F){F.A||(F.A=!0,It(F,"complete"),It(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,It(this,"complete"),It(this,"abort"),ll(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ll(this,!0)),bn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wu(this):this.bb())},e.bb=function(){Wu(this)};function Wu(F){if(F.h&&typeof i<"u"&&(!F.v[1]||gs(F)!=4||F.Z()!=2)){if(F.u&&gs(F)==4)Pt(F.Ea,0,F);else if(It(F,"readystatechange"),gs(F)==4){F.h=!1;try{const Ut=F.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var oe;if(!(oe=re)){var ve;if(ve=Ut===0){var ze=String(F.D).match(xi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),ve=!eu.test(ze?ze.toLowerCase():"")}oe=ve}if(oe)It(F,"complete"),It(F,"success");else{F.m=6;try{var ot=2<gs(F)?F.g.statusText:""}catch{ot=""}F.l=ot+" ["+F.Z()+"]",qu(F)}}finally{ll(F)}}}}function ll(F,re){if(F.g){Di(F);const oe=F.g,ve=F.v[0]?()=>{}:null;F.g=null,F.v=null,re||It(F,"ready");try{oe.onreadystatechange=ve}catch{}}}function Di(F){F.I&&(o.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function gs(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var re=this.g.responseText;return F&&re.indexOf(F)==0&&(re=re.substring(F.length)),$r(re)}};function $h(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function tu(F){const re={};F=(F.g&&2<=gs(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<F.length;ve++){if(w(F[ve]))continue;var oe=D(F[ve]);const ze=oe[0];if(oe=oe[1],typeof oe!="string")continue;oe=oe.trim();const ot=re[ze]||[];re[ze]=ot,ot.push(oe)}E(re,function(ve){return ve.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(F,re,oe){return oe&&oe.internalChannelParams&&oe.internalChannelParams[F]||re}function ru(F){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,F),this.cb=bi("retryDelaySeedMs",1e4,F),this.Wa=bi("forwardChannelMaxRetries",2,F),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(F&&F.concurrentRequestLimit),this.Da=new Tl,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ru.prototype,e.la=8,e.G=1,e.connect=function(F,re,oe,ve){bt(0),this.W=F,this.H=re||{},oe&&ve!==void 0&&(this.H.OSID=oe,this.H.OAID=ve),this.F=this.X,this.I=W(this,null,this.W),eA(this)};function Ac(F){if(Xu(F),F.G==3){var re=F.U++,oe=vi(F.I);if(Vn(oe,"SID",F.K),Vn(oe,"RID",re),Vn(oe,"TYPE","terminate"),nu(F,oe),re=new dt(F,F.j,re),re.L=2,re.v=Jc(vi(oe)),oe=!1,o.navigator&&o.navigator.sendBeacon)try{oe=o.navigator.sendBeacon(re.v.toString(),"")}catch{}!oe&&o.Image&&(new Image().src=re.v,oe=!0),oe||(re.g=Ae(re.j,null),re.g.ea(re.v)),re.F=Date.now(),Gt(re)}rA(F)}function Zd(F){F.g&&(au(F),F.g.cancel(),F.g=null)}function Xu(F){Zd(F),F.u&&(o.clearTimeout(F.u),F.u=null),fc(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&o.clearTimeout(F.s),F.s=null)}function eA(F){if(!Zs(F.h)&&!F.s){F.s=!0;var re=F.Ga;K||Y(),z||(K(),z=!0),G.add(re,F),F.B=0}}function pf(F,re){return Ts(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=re.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=xr(h(F.Ga,F,re),ed(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const ze=new dt(this,this.j,F);let ot=this.o;if(this.S&&(ot?(ot=N(ot),R(ot,this.S)):ot=this.S),this.m!==null||this.O||(ze.H=ot,ot=null),this.P)e:{for(var re=0,oe=0;oe<this.i.length;oe++){t:{var ve=this.i[oe];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(re+=ve,4096<re){re=oe;break e}if(re===4096||oe===this.i.length-1){re=oe+1;break e}}re=1e3}else re=1e3;re=Ju(this,ze,re),oe=vi(this.I),Vn(oe,"RID",F),Vn(oe,"CVER",22),this.D&&Vn(oe,"X-HTTP-Session-Id",this.D),nu(this,oe),ot&&(this.O?re="headers="+encodeURIComponent(String(Il(ot)))+"&"+re:this.m&&ps(oe,this.m,ot)),xa(this.h,ze),this.Ua&&Vn(oe,"TYPE","init"),this.P?(Vn(oe,"$req",re),Vn(oe,"SID","null"),ze.T=!0,Ft(ze,oe,null)):Ft(ze,oe,re),this.G=2}}else this.G==3&&(F?Yu(this,F):this.i.length==0||Zs(this.h)||Yu(this))};function Yu(F,re){var oe;re?oe=re.l:oe=F.U++;const ve=vi(F.I);Vn(ve,"SID",F.K),Vn(ve,"RID",oe),Vn(ve,"AID",F.T),nu(F,ve),F.m&&F.o&&ps(ve,F.m,F.o),oe=new dt(F,F.j,oe,F.B+1),F.m===null&&(oe.H=F.o),re&&(F.i=re.D.concat(F.i)),re=Ju(F,oe,1e3),oe.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),xa(F.h,oe),Ft(oe,ve,re)}function nu(F,re){F.H&&I(F.H,function(oe,ve){Vn(re,ve,oe)}),F.l&&df({},function(oe,ve){Vn(re,ve,oe)})}function Ju(F,re,oe){oe=Math.min(F.i.length,oe);var ve=F.l?h(F.l.Na,F.l,F):null;e:{var ze=F.i;let ot=-1;for(;;){const Ut=["count="+oe];ot==-1?0<oe?(ot=ze[0].g,Ut.push("ofs="+ot)):ot=0:Ut.push("ofs="+ot);let Fr=!0;for(let yn=0;yn<oe;yn++){let Xr=ze[yn].g;const zn=ze[yn].map;if(Xr-=ot,0>Xr)ot=Math.max(0,ze[yn].g-100),Fr=!1;else try{So(zn,Ut,"req"+Xr+"_")}catch{ve&&ve(zn)}}if(Fr){ve=Ut.join("&");break e}}}return F=F.i.splice(0,oe),re.D=F,ve}function tA(F){if(!F.g&&!F.u){F.Y=1;var re=F.Fa;K||Y(),z||(K(),z=!0),G.add(re,F),F.v=0}}function Zu(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=xr(h(F.Fa,F),ed(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,Gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=xr(h(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Zd(this),Gh(this))};function au(F){F.A!=null&&(o.clearTimeout(F.A),F.A=null)}function Gh(F){F.g=new dt(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var re=vi(F.qa);Vn(re,"RID","rpc"),Vn(re,"SID",F.K),Vn(re,"AID",F.T),Vn(re,"CI",F.F?"0":"1"),!F.F&&F.ja&&Vn(re,"TO",F.ja),Vn(re,"TYPE","xmlhttp"),nu(F,re),F.m&&F.o&&ps(re,F.m,F.o),F.L&&(F.g.I=F.L);var oe=F.g;F=F.ia,oe.L=1,oe.v=Jc(vi(re)),oe.m=null,oe.P=!0,Vt(oe,F)}e.Za=function(){this.C!=null&&(this.C=null,Zd(this),Zu(this),bt(19))};function fc(F){F.C!=null&&(o.clearTimeout(F.C),F.C=null)}function su(F,re){var oe=null;if(F.g==re){fc(F),au(F),F.g=null;var ve=2}else if(gi(F.h,re))oe=re.D,ei(F.h,re),ve=1;else return;if(F.G!=0){if(re.o)if(ve==1){oe=re.m?re.m.length:0,re=Date.now()-re.F;var ze=F.B;ve=gt(),It(ve,new nr(ve,oe)),eA(F)}else tA(F);else if(ze=re.s,ze==3||ze==0&&0<re.X||!(ve==1&&pf(F,re)||ve==2&&Zu(F)))switch(oe&&0<oe.length&&(re=F.h,re.i=re.i.concat(oe)),ze){case 1:Pi(F,5);break;case 4:Pi(F,10);break;case 3:Pi(F,6);break;default:Pi(F,2)}}}function ed(F,re){let oe=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(oe*=2),oe*re}function Pi(F,re){if(F.j.info("Error code "+re),re==2){var oe=h(F.fb,F),ve=F.Xa;const ze=!ve;ve=new Fn(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xc(ve,"https"),Jc(ve),ze?Fi(ve.toString(),oe):No(ve.toString(),oe)}else bt(2);F.G=0,F.l&&F.l.sa(re),rA(F),Xu(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function rA(F){if(F.G=0,F.ka=[],F.l){const re=Xd(F.h);(re.length!=0||F.i.length!=0)&&(b(F.ka,re),b(F.ka,F.i),F.h.i.length=0,x(F.i),F.i.length=0),F.l.ra()}}function W(F,re,oe){var ve=oe instanceof Fn?vi(oe):new Fn(oe);if(ve.g!="")re&&(ve.g=re+"."+ve.g),Yc(ve,ve.s);else{var ze=o.location;ve=ze.protocol,re=re?re+"."+ze.hostname:ze.hostname,ze=+ze.port;var ot=new Fn(null);ve&&Xc(ot,ve),re&&(ot.g=re),ze&&Yc(ot,ze),oe&&(ot.l=oe),ve=ot}return oe=F.D,re=F.ya,oe&&re&&Vn(ve,oe,re),Vn(ve,"VER",F.la),nu(F,ve),ve}function Ae(F,re,oe){if(re&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=F.Ca&&!F.pa?new bn(new Zc({eb:oe})):new bn(F.pa),re.Ha(F.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oe(){}e=Oe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(F,re){return new Ge(F,re)};function Ge(F,re){pt.call(this),this.g=new ru(re),this.l=F,this.h=re&&re.messageUrlParams||null,F=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(F?F["X-WebChannel-Content-Type"]=re.messageContentType:F={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(F?F["X-WebChannel-Client-Profile"]=re.va:F={"X-WebChannel-Client-Profile":re.va}),this.g.S=F,(F=re&&re.Sb)&&!w(F)&&(this.g.m=F),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!w(re)&&(this.g.D=re,F=this.h,F!==null&&re in F&&(F=this.h,re in F&&delete F[re])),this.j=new Zt(this)}g(Ge,pt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Ac(this.g)},Ge.prototype.o=function(F){var re=this.g;if(typeof F=="string"){var oe={};oe.__data__=F,F=oe}else this.u&&(oe={},oe.__data__=Nr(F),F=oe);re.i.push(new Co(re.Ya++,F)),re.G==3&&eA(re)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,Ge.aa.N.call(this)};function vt(F){ja.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var re=F.__sm__;if(re){e:{for(const oe in re){F=oe;break e}F=void 0}(this.i=F)&&(F=this.i,re=re!==null&&F in re?re[F]:void 0),this.data=re}else this.data=F}g(vt,ja);function Lt(){rn.call(this),this.status=1}g(Lt,rn);function Zt(F){this.g=F}g(Zt,Oe),Zt.prototype.ua=function(){It(this.g,"a")},Zt.prototype.ta=function(F){It(this.g,new vt(F))},Zt.prototype.sa=function(F){It(this.g,new Lt)},Zt.prototype.ra=function(){It(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,EJ=function(){return new Le},wJ=function(){return gt()},yJ=pr,C6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,Z_=we,Ne.COMPLETE="complete",bJ=Ne,hn.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",pt.prototype.listen=pt.prototype.K,jy=hn,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,vJ=bn}).apply(typeof vC<"u"?vC:typeof self<"u"?self:typeof window<"u"?window:{});const E9="@firebase/firestore",C9="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};zo.UNAUTHENTICATED=new zo(null),zo.GOOGLE_CREDENTIALS=new zo("google-credentials-uid"),zo.FIRST_PARTY=new zo("first-party-uid"),zo.MOCK_USER=new zo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new ED("@firebase/firestore");function Jx(){return lg.logLevel}function ur(e,...t){if(lg.logLevel<=kn.DEBUG){const r=t.map(OD);lg.debug(`Firestore (${T1}): ${e}`,...r)}}function gh(e,...t){if(lg.logLevel<=kn.ERROR){const r=t.map(OD);lg.error(`Firestore (${T1}): ${e}`,...r)}}function cg(e,...t){if(lg.logLevel<=kn.WARN){const r=t.map(OD);lg.warn(`Firestore (${T1}): ${e}`,...r)}}function OD(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,CJ(e,n,r)}function CJ(e,t,r){let n=`FIRESTORE (${T1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw gh(n),new Error(n)}function ia(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||CJ(t,a,n)}function tn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends Vd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class NJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(zo.UNAUTHENTICATED))}shutdown(){}}class $pe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Gpe{constructor(t){this.t=t,this.currentUser=zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ia(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new sh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sh,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{ur("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(ur("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sh)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(ur("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ia(typeof n.accessToken=="string",31837,{l:n}),new _J(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ia(t===null||typeof t=="string",2055,{h:t}),new zo(t)}}class Kpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=zo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new Kpe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(zo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _9{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wpe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ic(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ia(this.o===void 0,3512);const n=s=>{s.error!=null&&ur("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,ur("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{ur("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):ur("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _9(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ia(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new _9(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xpe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Xpe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function jn(e,t){return e<t?-1:e>t?1:0}function _6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return jB(a)===jB(s)?jn(a,s):jB(a)?1:-1}return jn(e.length,t.length)}const Ype=55296,Jpe=57343;function jB(e){const t=e.charCodeAt(0);return t>=Ype&&t<=Jpe}function $v(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="__name__";class FA{constructor(t,r,n){r===void 0?r=0:r>t.length&&zr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&zr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return FA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof FA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=FA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return jn(t.length,r.length)}static compareSegments(t,r){const n=FA.isNumericId(t),a=FA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?FA.extractNumericId(t).compare(FA.extractNumericId(r)):_6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return nm.fromString(t.substring(4,t.length-2))}}class Na extends FA{construct(t,r,n){return new Na(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xt(_t.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Na(r)}static emptyPath(){return new Na([])}}const Zpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ki extends FA{construct(t,r,n){return new Ki(t,r,n)}static isValidIdentifier(t){return Zpe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ki.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N9}static keyField(){return new Ki([N9])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Xt(_t.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Xt(_t.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(_t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Xt(_t.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ki(r)}static emptyPath(){return new Ki([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.path=t}static fromPath(t){return new yr(Na.fromString(t))}static fromName(t){return new yr(Na.fromString(t).popFirst(5))}static empty(){return new yr(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Na.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yr(new Na(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(e,t,r){if(!r)throw new Xt(_t.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function kJ(e,t,r,n){if(t===!0&&n===!0)throw new Xt(_t.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function S9(e){if(!yr.isDocumentKey(e))throw new Xt(_t.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function k9(e){if(yr.isDocumentKey(e))throw new Xt(_t.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jJ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function e4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":zr(12329,{type:typeof e})}function tl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(_t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=e4(e);throw new Xt(_t.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function ege(e,t){if(t<=0)throw new Xt(_t.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t){const r={typeString:e};return t&&(r.value=t),r}function T2(e,t){if(!jJ(e))throw new Xt(_t.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Xt(_t.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=-62135596800,B9=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*B9);return new ir(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<j9)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B9}_compareTo(t){return this.seconds===t.seconds?jn(this.nanoseconds,t.nanoseconds):jn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(T2(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-j9;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:hi("string",ir._jsonSchemaVersion),seconds:hi("number"),nanoseconds:hi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{static fromTimestamp(t){return new Jr(t)}static min(){return new Jr(new ir(0,0))}static max(){return new Jr(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=-1;function tge(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Jr.fromTimestamp(n===1e9?new ir(r+1,0):new ir(r,n));return new pm(a,yr.empty(),t)}function rge(e){return new pm(e.readTime,e.key,jw)}class pm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new pm(Jr.min(),yr.empty(),jw)}static max(){return new pm(Jr.max(),yr.empty(),jw)}}function nge(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=yr.comparator(e.documentKey,t.documentKey),r!==0?r:jn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const age="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sge{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(e){if(e.code!==_t.FAILED_PRECONDITION||e.message!==age)throw e;ur("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.reject(r)}static resolve(t){return new Dt((r,n)=>{r(t)})}static reject(t){return new Dt((r,n)=>{n(t)})}static waitFor(t){return new Dt((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Dt.resolve(!1);for(const n of t)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Dt((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Dt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function ige(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function F1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}t4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=-1;function r4(e){return e==null}function $5(e){return e===0&&1/e==-1/0}function oge(e){return typeof e=="number"&&Number.isInteger(e)&&!$5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ="";function lge(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=T9(t)),t=cge(e.get(r),t);return T9(t)}function cge(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case BJ:r+="";break;default:r+=s}}return r}function T9(e){return e+BJ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Pm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function TJ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,r){this.comparator=t,this.root=r||po.EMPTY}insert(t,r){return new ls(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,po.BLACK,null,null))}remove(t){return new ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,po.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bC(this.root,t,this.comparator,!1)}getReverseIterator(){return new bC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bC(this.root,t,this.comparator,!0)}}class bC{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class po{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??po.RED,this.left=a??po.EMPTY,this.right=s??po.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new po(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return po.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return po.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zr(27949);return t+(this.isRed()?0:1)}}po.EMPTY=null,po.RED=!0,po.BLACK=!1;po.EMPTY=new class{constructor(){this.size=0}get key(){throw zr(57766)}get value(){throw zr(16141)}get color(){throw zr(16727)}get left(){throw zr(29726)}get right(){throw zr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new po(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this.comparator=t,this.data=new ls(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new F9(this.data.getIterator())}getIteratorFrom(t){return new F9(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ni)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ni(this.comparator);return r.data=t,r}}class F9{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(t){this.fields=t,t.sort(Ki.comparator)}static empty(){return new Rc([])}unionWith(t){let r=new Ni(Ki.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Rc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return $v(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IJ("Invalid base64 string: "+s):s}}(t);return new Zi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Zi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zi.EMPTY_BYTE_STRING=new Zi("");const uge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gm(e){if(ia(!!e,39018),typeof e=="string"){let t=0;const r=uge.exec(e);if(ia(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Hs(e.seconds),nanos:Hs(e.nanos)}}function Hs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function xm(e){return typeof e=="string"?Zi.fromBase64String(e):Zi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FJ="server_timestamp",OJ="__type__",DJ="__previous_value__",PJ="__local_write_time__";function n4(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[OJ])==null?void 0:n.stringValue)===FJ}function a4(e){const t=e.mapValue.fields[DJ];return n4(t)?a4(t):t}function Bw(e){const t=gm(e.mapValue.fields[PJ].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dge{constructor(t,r,n,a,s,i,o,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const G5="(default)";class Gv{constructor(t,r){this.projectId=t,this.database=r||G5}static empty(){return new Gv("","")}get isDefaultDatabase(){return this.database===G5}isEqual(t){return t instanceof Gv&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RJ="__type__",Age="__max__",yC={mapValue:{}},LJ="__vector__",K5="value";function vm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?n4(e)?4:hge(e)?9007199254740991:fge(e)?10:11:zr(28295,{value:e})}function tf(e,t){if(e===t)return!0;const r=vm(e);if(r!==vm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bw(e).isEqual(Bw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=gm(a.timestampValue),o=gm(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return xm(a.bytesValue).isEqual(xm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Hs(a.geoPointValue.latitude)===Hs(s.geoPointValue.latitude)&&Hs(a.geoPointValue.longitude)===Hs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Hs(a.integerValue)===Hs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Hs(a.doubleValue),o=Hs(s.doubleValue);return i===o?$5(i)===$5(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return $v(e.arrayValue.values||[],t.arrayValue.values||[],tf);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(I9(i)!==I9(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!tf(i[c],o[c])))return!1;return!0}(e,t);default:return zr(52216,{left:e})}}function Tw(e,t){return(e.values||[]).find(r=>tf(r,t))!==void 0}function Kv(e,t){if(e===t)return 0;const r=vm(e),n=vm(t);if(r!==n)return jn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return jn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Hs(s.integerValue||s.doubleValue),c=Hs(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return O9(e.timestampValue,t.timestampValue);case 4:return O9(Bw(e),Bw(t));case 5:return _6(e.stringValue,t.stringValue);case 6:return function(s,i){const o=xm(s),c=xm(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=jn(o[u],c[u]);if(d!==0)return d}return jn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=jn(Hs(s.latitude),Hs(i.latitude));return o!==0?o:jn(Hs(s.longitude),Hs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return D9(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,x;const o=s.fields||{},c=i.fields||{},u=(h=o[K5])==null?void 0:h.arrayValue,d=(p=c[K5])==null?void 0:p.arrayValue,f=jn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:D9(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===yC.mapValue&&i===yC.mapValue)return 0;if(s===yC.mapValue)return 1;if(i===yC.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=_6(c[f],d[f]);if(h!==0)return h;const p=Kv(o[c[f]],u[d[f]]);if(p!==0)return p}return jn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw zr(23264,{he:r})}}function O9(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return jn(e,t);const r=gm(e),n=gm(t),a=jn(r.seconds,n.seconds);return a!==0?a:jn(r.nanos,n.nanos)}function D9(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Kv(r[a],n[a]);if(s)return s}return jn(r.length,n.length)}function qv(e){return N6(e)}function N6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=gm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return xm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return yr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=N6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${N6(r.fields[i])}`;return a+"}"}(e.mapValue):zr(61005,{value:e})}function e5(e){switch(vm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=a4(e);return t?16+e5(t):16;case 5:return 2*e.stringValue.length;case 6:return xm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+e5(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Pm(n.fields,(s,i)=>{a+=s.length+e5(i)}),a}(e.mapValue);default:throw zr(13486,{value:e})}}function q5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function S6(e){return!!e&&"integerValue"in e}function PD(e){return!!e&&"arrayValue"in e}function P9(e){return!!e&&"nullValue"in e}function R9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function t5(e){return!!e&&"mapValue"in e}function fge(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[RJ])==null?void 0:n.stringValue)===LJ}function Yy(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Pm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Yy(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Yy(e.arrayValue.values[r]);return t}return{...e}}function hge(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Age}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t){this.value=t}static empty(){return new Xl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!t5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yy(r)}setAll(t){let r=Ki.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Yy(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());t5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return tf(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];t5(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Pm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Xl(Yy(this.value))}}function MJ(e){const t=[];return Pm(e.fields,(r,n)=>{const a=new Ki([r]);if(t5(n)){const s=MJ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Rc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new qo(t,0,Jr.min(),Jr.min(),Jr.min(),Xl.empty(),0)}static newFoundDocument(t,r,n,a){return new qo(t,1,r,Jr.min(),n,a,0)}static newNoDocument(t,r){return new qo(t,2,r,Jr.min(),Jr.min(),Xl.empty(),0)}static newUnknownDocument(t,r){return new qo(t,3,r,Jr.min(),Jr.min(),Xl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Jr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,r){this.position=t,this.inclusive=r}}function L9(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=yr.comparator(yr.fromName(i.referenceValue),r.key):n=Kv(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function M9(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!tf(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t,r="asc"){this.field=t,this.dir=r}}function mge(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{}class fi extends UJ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new gge(t,r,n):r==="array-contains"?new bge(t,n):r==="in"?new yge(t,n):r==="not-in"?new wge(t,n):r==="array-contains-any"?new Ege(t,n):new fi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new xge(t,n):new vge(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Kv(r,this.value)):r!==null&&vm(this.value)===vm(r)&&this.matchesComparison(Kv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ud extends UJ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Ud(t,r)}matches(t){return QJ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QJ(e){return e.op==="and"}function HJ(e){return pge(e)&&QJ(e)}function pge(e){for(const t of e.filters)if(t instanceof Ud)return!1;return!0}function k6(e){if(e instanceof fi)return e.field.canonicalString()+e.op.toString()+qv(e.value);if(HJ(e))return e.filters.map(t=>k6(t)).join(",");{const t=e.filters.map(r=>k6(r)).join(",");return`${e.op}(${t})`}}function VJ(e,t){return e instanceof fi?function(n,a){return a instanceof fi&&n.op===a.op&&n.field.isEqual(a.field)&&tf(n.value,a.value)}(e,t):e instanceof Ud?function(n,a){return a instanceof Ud&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&VJ(i,a.filters[o]),!0):!1}(e,t):void zr(19439)}function zJ(e){return e instanceof fi?function(r){return`${r.field.canonicalString()} ${r.op} ${qv(r.value)}`}(e):e instanceof Ud?function(r){return r.op.toString()+" {"+r.getFilters().map(zJ).join(" ,")+"}"}(e):"Filter"}class gge extends fi{constructor(t,r,n){super(t,r,n),this.key=yr.fromName(n.referenceValue)}matches(t){const r=yr.comparator(t.key,this.key);return this.matchesComparison(r)}}class xge extends fi{constructor(t,r){super(t,"in",r),this.keys=$J("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class vge extends fi{constructor(t,r){super(t,"not-in",r),this.keys=$J("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function $J(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>yr.fromName(n.referenceValue))}class bge extends fi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return PD(r)&&Tw(r.arrayValue,this.value)}}class yge extends fi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Tw(this.value.arrayValue,r)}}class wge extends fi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Tw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Tw(this.value.arrayValue,r)}}class Ege extends fi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!PD(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Tw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cge{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function U9(e,t=null,r=[],n=[],a=null,s=null,i=null){return new Cge(e,t,r,n,a,s,i)}function RD(e){const t=tn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>k6(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),r4(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>qv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>qv(n)).join(",")),t.Te=r}return t.Te}function LD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!mge(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!VJ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!M9(e.startAt,t.startAt)&&M9(e.endAt,t.endAt)}function j6(e){return yr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _ge(e,t,r,n,a,s,i,o){return new Tg(e,t,r,n,a,s,i,o)}function s4(e){return new Tg(e)}function Q9(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function MD(e){return e.collectionGroup!==null}function Cv(e){const t=tn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ni(Ki.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Iw(s,n))}),r.has(Ki.keyField().canonicalString())||t.Ie.push(new Iw(Ki.keyField(),n))}return t.Ie}function WA(e){const t=tn(e);return t.Ee||(t.Ee=Nge(t,Cv(e))),t.Ee}function Nge(e,t){if(e.limitType==="F")return U9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Iw(a.field,s)});const r=e.endAt?new Wv(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Wv(e.startAt.position,e.startAt.inclusive):null;return U9(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function B6(e,t){const r=e.filters.concat([t]);return new Tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function W5(e,t,r){return new Tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function i4(e,t){return LD(WA(e),WA(t))&&e.limitType===t.limitType}function GJ(e){return`${RD(WA(e))}|lt:${e.limitType}`}function Zx(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>zJ(a)).join(", ")}]`),r4(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>qv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>qv(a)).join(",")),`Target(${n})`}(WA(e))}; limitType=${e.limitType})`}function o4(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Cv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=L9(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,Cv(n),a)||n.endAt&&!function(i,o,c){const u=L9(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,Cv(n),a))}(e,t)}function Sge(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function KJ(e){return(t,r)=>{let n=!1;for(const a of Cv(e)){const s=kge(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function kge(e,t,r){const n=e.field.isKeyField()?yr.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Kv(c,u):zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Pm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return TJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jge=new ls(yr.comparator);function xh(){return jge}const qJ=new ls(yr.comparator);function By(...e){let t=qJ;for(const r of e)t=t.insert(r.key,r);return t}function WJ(e){let t=qJ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Op(){return Jy()}function XJ(){return Jy()}function Jy(){return new Ig(e=>e.toString(),(e,t)=>e.isEqual(t))}const Bge=new ls(yr.comparator),Tge=new Ni(yr.comparator);function Bn(...e){let t=Tge;for(const r of e)t=t.add(r);return t}const Ige=new Ni(jn);function Fge(){return Ige}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$5(t)?"-0":t}}function YJ(e){return{integerValue:""+e}}function Oge(e,t){return oge(t)?YJ(t):UD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this._=void 0}}function Dge(e,t,r){return e instanceof Fw?function(a,s){const i={fields:{[OJ]:{stringValue:FJ},[PJ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&n4(s)&&(s=a4(s)),s&&(i.fields[DJ]=s),{mapValue:i}}(r,t):e instanceof Xv?ZJ(e,t):e instanceof Ow?eZ(e,t):function(a,s){const i=JJ(a,s),o=H9(i)+H9(a.Ae);return S6(i)&&S6(a.Ae)?YJ(o):UD(a.serializer,o)}(e,t)}function Pge(e,t,r){return e instanceof Xv?ZJ(e,t):e instanceof Ow?eZ(e,t):r}function JJ(e,t){return e instanceof X5?function(n){return S6(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Fw extends l4{}class Xv extends l4{constructor(t){super(),this.elements=t}}function ZJ(e,t){const r=tZ(t);for(const n of e.elements)r.some(a=>tf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Ow extends l4{constructor(t){super(),this.elements=t}}function eZ(e,t){let r=tZ(t);for(const n of e.elements)r=r.filter(a=>!tf(a,n));return{arrayValue:{values:r}}}class X5 extends l4{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function H9(e){return Hs(e.integerValue||e.doubleValue)}function tZ(e){return PD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(t,r){this.field=t,this.transform=r}}function Rge(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof Xv&&a instanceof Xv||n instanceof Ow&&a instanceof Ow?$v(n.elements,a.elements,tf):n instanceof X5&&a instanceof X5?tf(n.Ae,a.Ae):n instanceof Fw&&a instanceof Fw}(e.transform,t.transform)}class Lge{constructor(t,r){this.version=t,this.transformResults=r}}class wl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new wl}static exists(t){return new wl(void 0,t)}static updateTime(t){return new wl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function r5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class c4{}function nZ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new u4(e.key,wl.none()):new I2(e.key,e.data,wl.none());{const r=e.data,n=Xl.empty();let a=new Ni(Ki.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Rm(e.key,n,new Rc(a.toArray()),wl.none())}}function Mge(e,t,r){e instanceof I2?function(a,s,i){const o=a.value.clone(),c=z9(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Rm?function(a,s,i){if(!r5(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=z9(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(aZ(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Zy(e,t,r,n){return e instanceof I2?function(s,i,o,c){if(!r5(s.precondition,i))return o;const u=s.value.clone(),d=$9(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Rm?function(s,i,o,c){if(!r5(s.precondition,i))return o;const u=$9(s.fieldTransforms,c,i),d=i.data;return d.setAll(aZ(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return r5(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function Uge(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=JJ(n.transform,a||null);s!=null&&(r===null&&(r=Xl.empty()),r.set(n.field,s))}return r||null}function V9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&$v(n,a,(s,i)=>Rge(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class I2 extends c4{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Rm extends c4{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aZ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function z9(e,t,r){const n=new Map;ia(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,Pge(i,o,r[a]))}return n}function $9(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,Dge(s,i,t))}return n}class u4 extends c4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qge extends c4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hge{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&Mge(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Zy(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Zy(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=XJ();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=nZ(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Jr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Bn())}isEqual(t){return this.batchId===t.batchId&&$v(this.mutations,t.mutations,(r,n)=>V9(r,n))&&$v(this.baseMutations,t.baseMutations,(r,n)=>V9(r,n))}}class QD{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ia(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return Bge}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new QD(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vge{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zge{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,Ln;function $ge(e){switch(e){case _t.OK:return zr(64938);case _t.CANCELLED:case _t.UNKNOWN:case _t.DEADLINE_EXCEEDED:case _t.RESOURCE_EXHAUSTED:case _t.INTERNAL:case _t.UNAVAILABLE:case _t.UNAUTHENTICATED:return!1;case _t.INVALID_ARGUMENT:case _t.NOT_FOUND:case _t.ALREADY_EXISTS:case _t.PERMISSION_DENIED:case _t.FAILED_PRECONDITION:case _t.ABORTED:case _t.OUT_OF_RANGE:case _t.UNIMPLEMENTED:case _t.DATA_LOSS:return!0;default:return zr(15467,{code:e})}}function sZ(e){if(e===void 0)return gh("GRPC error has no .code"),_t.UNKNOWN;switch(e){case ii.OK:return _t.OK;case ii.CANCELLED:return _t.CANCELLED;case ii.UNKNOWN:return _t.UNKNOWN;case ii.DEADLINE_EXCEEDED:return _t.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return _t.RESOURCE_EXHAUSTED;case ii.INTERNAL:return _t.INTERNAL;case ii.UNAVAILABLE:return _t.UNAVAILABLE;case ii.UNAUTHENTICATED:return _t.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return _t.INVALID_ARGUMENT;case ii.NOT_FOUND:return _t.NOT_FOUND;case ii.ALREADY_EXISTS:return _t.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return _t.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return _t.FAILED_PRECONDITION;case ii.ABORTED:return _t.ABORTED;case ii.OUT_OF_RANGE:return _t.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return _t.UNIMPLEMENTED;case ii.DATA_LOSS:return _t.DATA_LOSS;default:return zr(39323,{code:e})}}(Ln=ii||(ii={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kge=new nm([4294967295,4294967295],0);function G9(e){const t=Gge().encode(e),r=new xJ;return r.update(t),new Uint8Array(r.digest())}function K9(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new nm([r,n],0),new nm([a,s],0)]}class HD{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Ty(`Invalid padding: ${r}`);if(n<0)throw new Ty(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Ty(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Ty(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=nm.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(nm.fromNumber(n)));return a.compare(Kge)===1&&(a=new nm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=G9(t),[n,a]=K9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new HD(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=G9(t),[n,a]=K9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Ty extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,F2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new d4(Jr.min(),a,new ls(jn),xh(),Bn())}}class F2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new F2(n,r,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class iZ{constructor(t,r){this.targetId=t,this.Ce=r}}class oZ{constructor(t,r,n=Zi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class q9{constructor(){this.ve=0,this.Fe=W9(),this.Me=Zi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bn(),r=Bn(),n=Bn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:zr(38017,{changeType:s})}}),new F2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=W9()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ia(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qge{constructor(t){this.Ge=t,this.ze=new Map,this.je=xh(),this.Je=wC(),this.He=wC(),this.Ye=new ls(jn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(j6(s))if(n===0){const i=new yr(s.path);this.et(r,i,qo.newNoDocument(i,Jr.min()))}else ia(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=xm(n).toUint8Array()}catch(c){if(c instanceof IJ)return cg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new HD(i,a,s)}catch(c){return cg(c instanceof Ty?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&j6(o.target)){const c=new yr(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,qo.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Bn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new d4(t,r,this.Ye,this.je,n);return this.je=xh(),this.Je=wC(),this.He=wC(),this.Ye=new ls(jn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new q9,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ni(jn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ni(jn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||ur("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new q9),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function wC(){return new ls(yr.comparator)}function W9(){return new ls(yr.comparator)}const Wge={asc:"ASCENDING",desc:"DESCENDING"},Xge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yge={and:"AND",or:"OR"};class Jge{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function T6(e,t){return e.useProto3Json||r4(t)?t:{value:t}}function Y5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lZ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zge(e,t){return Y5(e,t.toTimestamp())}function XA(e){return ia(!!e,49232),Jr.fromTimestamp(function(r){const n=gm(r);return new ir(n.seconds,n.nanos)}(e))}function VD(e,t){return I6(e,t).canonicalString()}function I6(e,t){const r=function(a){return new Na(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function cZ(e){const t=Na.fromString(e);return ia(hZ(t),10190,{key:t.toString()}),t}function F6(e,t){return VD(e.databaseId,t.path)}function BB(e,t){const r=cZ(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new yr(dZ(r))}function uZ(e,t){return VD(e.databaseId,t)}function exe(e){const t=cZ(e);return t.length===4?Na.emptyPath():dZ(t)}function O6(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dZ(e){return ia(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function X9(e,t,r){return{name:F6(e,t),fields:r.value.mapValue.fields}}function txe(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:zr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ia(d===void 0||typeof d=="string",58123),Zi.fromBase64String(d||"")):(ia(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Zi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?_t.UNKNOWN:sZ(u.code);return new Xt(d,u.message||"")}(i);r=new oZ(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=BB(e,n.document.name),s=XA(n.document.updateTime),i=n.document.createTime?XA(n.document.createTime):Jr.min(),o=new Xl({mapValue:{fields:n.document.fields}}),c=qo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new n5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=BB(e,n.document),s=n.readTime?XA(n.readTime):Jr.min(),i=qo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new n5([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=BB(e,n.document),s=n.removedTargetIds||[];r=new n5([],s,a,null)}else{if(!("filter"in t))return zr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new zge(a,s),o=n.targetId;r=new iZ(o,i)}}return r}function rxe(e,t){let r;if(t instanceof I2)r={update:X9(e,t.key,t.value)};else if(t instanceof u4)r={delete:F6(e,t.key)};else if(t instanceof Rm)r={update:X9(e,t.key,t.data),updateMask:dxe(t.fieldMask)};else{if(!(t instanceof Qge))return zr(16599,{Vt:t.type});r={verify:F6(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Fw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Xv)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ow)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof X5)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw zr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Zge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:zr(27497)}(e,t.precondition)),r}function nxe(e,t){return e&&e.length>0?(ia(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?XA(a.updateTime):XA(s);return i.isEqual(Jr.min())&&(i=XA(s)),new Lge(i,a.transformResults||[])}(r,t))):[]}function axe(e,t){return{documents:[uZ(e,t.path)]}}function sxe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=uZ(e,a);const s=function(u){if(u.length!==0)return fZ(Ud.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:ev(h.field),direction:lxe(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=T6(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function ixe(e){let t=exe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ia(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=AZ(f);return h instanceof Ud&&HJ(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new Iw(tv(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,r4(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new Wv(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new Wv(p,h)}(r.endAt)),_ge(t,a,i,s,o,"F",c,u)}function oxe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function AZ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=tv(r.unaryFilter.field);return fi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=tv(r.unaryFilter.field);return fi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tv(r.unaryFilter.field);return fi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=tv(r.unaryFilter.field);return fi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zr(61313);default:return zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return fi.create(tv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zr(58110);default:return zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Ud.create(r.compositeFilter.filters.map(n=>AZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return zr(1026)}}(r.compositeFilter.op))}(e):zr(30097,{filter:e})}function lxe(e){return Wge[e]}function cxe(e){return Xge[e]}function uxe(e){return Yge[e]}function ev(e){return{fieldPath:e.canonicalString()}}function tv(e){return Ki.fromServerFormat(e.fieldPath)}function fZ(e){return e instanceof fi?function(r){if(r.op==="=="){if(R9(r.value))return{unaryFilter:{field:ev(r.field),op:"IS_NAN"}};if(P9(r.value))return{unaryFilter:{field:ev(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(R9(r.value))return{unaryFilter:{field:ev(r.field),op:"IS_NOT_NAN"}};if(P9(r.value))return{unaryFilter:{field:ev(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ev(r.field),op:cxe(r.op),value:r.value}}}(e):e instanceof Ud?function(r){const n=r.getFilters().map(a=>fZ(a));return n.length===1?n[0]:{compositeFilter:{op:uxe(r.op),filters:n}}}(e):zr(54877,{filter:e})}function dxe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function hZ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,r,n,a,s=Jr.min(),i=Jr.min(),o=Zi.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new $0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new $0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(t){this.yt=t}}function fxe(e){const t=ixe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?W5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(){this.Cn=new mxe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Dt.resolve()}getCollectionParents(t,r){return Dt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Dt.resolve()}deleteFieldIndex(t,r){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,r){return Dt.resolve()}getDocumentsMatchingTarget(t,r){return Dt.resolve(null)}getIndexType(t,r){return Dt.resolve(0)}getFieldIndexes(t,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,r){return Dt.resolve(pm.min())}getMinOffsetFromCollectionGroup(t,r){return Dt.resolve(pm.min())}updateCollectionGroup(t,r,n){return Dt.resolve()}updateIndexEntries(t,r){return Dt.resolve()}}class mxe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Ni(Na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Ni(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mZ=41943040;class $l{static withCacheSize(t){return new $l(t,$l.DEFAULT_COLLECTION_PERCENTILE,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$l.DEFAULT_COLLECTION_PERCENTILE=10,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$l.DEFAULT=new $l(mZ,$l.DEFAULT_COLLECTION_PERCENTILE,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$l.DISABLED=new $l(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Yv(0)}static cr(){return new Yv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="LruGarbageCollector",pxe=1048576;function Z9([e,t],[r,n]){const a=jn(e,r);return a===0?jn(t,n):a}class gxe{constructor(t){this.Ir=t,this.buffer=new Ni(Z9),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Z9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class xxe{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ur(J9,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){F1(r)?ur(J9,"Ignoring IndexedDB error during garbage collection: ",r):await I1(r)}await this.Vr(3e5)})}}class vxe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Dt.resolve(t4.ce);const n=new gxe(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(ur("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(Y9)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(ur("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y9):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ur("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),Jx()<=kn.DEBUG&&ur("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function bxe(e,t){return new vxe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yxe{constructor(){this.changes=new Ig(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,qo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wxe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Exe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&Zy(n.mutation,a,Rc.empty(),ir.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Bn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Bn()){const a=Op();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=By();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Op();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Bn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=xh();const i=Jy(),o=function(){return Jy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Rm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Zy(d.mutation,u,d.mutation.getFieldMask(),ir.now())):i.set(u.key,Rc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new wxe(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=Jy();let a=new ls((i,o)=>i-o),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Rc.empty();d=o.applyToLocalView(u,d),n.set(c,d);const f=(a.get(o.batchId)||Bn()).add(c);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=XJ();d.forEach(h=>{if(!s.has(h)){const p=nZ(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Dt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return yr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):MD(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Dt.resolve(Op());let o=jw,c=s;return i.next(u=>Dt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Bn())).next(d=>({batchId:o,changes:WJ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new yr(r)).next(n=>{let a=By();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=By();return this.indexManager.getCollectionParents(t,s).next(o=>Dt.forEach(o,c=>{const u=function(f,h){return new Tg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,qo.newInvalidDocument(d)))});let o=By();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Zy(d.mutation,u,Rc.empty(),ir.now()),o4(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Dt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:XA(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(t,r){return Dt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:fxe(a.bundledQuery),readTime:XA(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _xe{constructor(){this.overlays=new ls(yr.comparator),this.qr=new Map}getOverlay(t,r){return Dt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Op();return Dt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Dt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Dt.resolve()}getOverlaysForCollection(t,r,n){const a=Op(),s=r.length+1,i=new yr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ls((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Op(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Op(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Dt.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Vge(r,n));let s=this.qr.get(r);s===void 0&&(s=Bn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxe{constructor(){this.sessionToken=Zi.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.Qr=new Ni(Vi.$r),this.Ur=new Ni(Vi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Vi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Vi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new yr(new Na([])),n=new Vi(r,t),a=new Vi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new yr(new Na([])),n=new Vi(r,t),a=new Vi(r,t+1);let s=Bn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Vi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Vi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return yr.comparator(t.key,r.key)||jn(t.Yr,r.Yr)}static Kr(t,r){return jn(t.Yr,r.Yr)||yr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ni(Vi.$r)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Hge(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Vi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Dt.resolve(i)}lookupMutationBatch(t,r){return Dt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?DD:this.tr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Vi(r,0),a=new Vi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ni(jn);return r.forEach(a=>{const s=new Vi(a,0),i=new Vi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Dt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;yr.isDocumentKey(s)||(s=s.child(""));const i=new Vi(new yr(s),0);let o=new Ni(jn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),Dt.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ia(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Dt.forEach(r.mutations,a=>{const s=new Vi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Vi(r,0),a=this.Zr.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kxe{constructor(t){this.ri=t,this.docs=function(){return new ls(yr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():qo.newInvalidDocument(r))}getEntries(t,r){let n=xh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():qo.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=xh();const i=r.path,o=new yr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||nge(rge(d),n)<=0||(a.has(d.key)||o4(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){zr(9500)}ii(t,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new jxe(this)}getSize(t){return Dt.resolve(this.size)}}class jxe extends yxe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bxe{constructor(t){this.persistence=t,this.si=new Ig(r=>RD(r),LD),this.lastRemoteSnapshotVersion=Jr.min(),this.highestTargetId=0,this.oi=0,this._i=new zD,this.targetCount=0,this.ai=Yv.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Dt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Yv(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Dt.resolve()}updateTargetData(t,r){return this.Pr(r),Dt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Dt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Dt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Dt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Dt.resolve(n)}containsKey(t,r){return Dt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(t,r){this.ui={},this.overlays={},this.ci=new t4(0),this.li=!1,this.li=!0,this.hi=new Nxe,this.referenceDelegate=t(this),this.Pi=new Bxe(this),this.indexManager=new hxe,this.remoteDocumentCache=function(a){return new kxe(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Axe(r),this.Ii=new Cxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new _xe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new Sxe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){ur("MemoryPersistence","Starting transaction:",t);const a=new Txe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Dt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Txe extends sge{constructor(t){super(),this.currentSequenceNumber=t}}class $D{constructor(t){this.persistence=t,this.Ri=new zD,this.Vi=null}static mi(t){return new $D(t)}get fi(){if(this.Vi)return this.Vi;throw zr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Dt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Dt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.fi,n=>{const a=yr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Jr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Dt.or([()=>Dt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class J5{constructor(t,r){this.persistence=t,this.pi=new Ig(n=>lge(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=bxe(this,r)}static mi(t,r){return new J5(t,r)}Ei(){}di(t){return Dt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Dt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Dt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Jr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=e5(t.data.value)),r}br(t,r,n){return Dt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Dt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Bn(),a=Bn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new GD(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uhe()?8:ige(nl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new Ixe;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Jx()<=kn.DEBUG&&ur("QueryEngine","SDK will not create cache indexes for query:",Zx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dt.resolve()):(Jx()<=kn.DEBUG&&ur("QueryEngine","Query:",Zx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Jx()<=kn.DEBUG&&ur("QueryEngine","The SDK decides to create cache indexes for query:",Zx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,WA(r))):Dt.resolve())}ys(t,r){if(Q9(r))return Dt.resolve(null);let n=WA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=W5(r,null,"F"),n=WA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Bn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(t,W5(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return Q9(r)||a.isEqual(Jr.min())?Dt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Dt.resolve(null):(Jx()<=kn.DEBUG&&ur("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Zx(r)),this.vs(t,i,r,tge(a,jw)).next(o=>o))})}Ds(t,r){let n=new Ni(KJ(t));return r.forEach((a,s)=>{o4(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return Jx()<=kn.DEBUG&&ur("QueryEngine","Using full collection scan to execute query:",Zx(r)),this.ps.getDocumentsMatchingQuery(t,r,pm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="LocalStore",Oxe=3e8;class Dxe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ls(jn),this.xs=new Ig(s=>RD(s),LD),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Exe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Pxe(e,t,r,n){return new Dxe(e,t,r,n)}async function gZ(e,t){const r=tn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=Bn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function Rxe(e,t){const r=tn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Dt.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(x=>{const b=u.docVersions.get(g);ia(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=Bn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function xZ(e){const t=tn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Lxe(e,t){const r=tn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Zi.EMPTY_BYTE_STRING,Jr.min()).withLastLimboFreeSnapshotVersion(Jr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(x,b,y){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Oxe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let c=xh(),u=Bn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(Mxe(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Jr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Dt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function Mxe(e,t,r){let n=Bn(),a=Bn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=xh();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Jr.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):ur(KD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function Uxe(e,t){const r=tn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=DD),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Qxe(e,t){const r=tn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Dt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new $0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function D6(e,t,r){const n=tn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!F1(i))throw i;ur(KD,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function eQ(e,t,r){const n=tn(e);let a=Jr.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=tn(c),h=f.xs.get(d);return h!==void 0?Dt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,WA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Jr.min(),r?s:Bn())).next(o=>(Hxe(n,Sge(t),o),{documents:o,Qs:s})))}function Hxe(e,t,r){let n=e.Os.get(t)||Jr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class tQ{constructor(){this.activeTargetIds=Fge()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Vxe{constructor(){this.Mo=new tQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new tQ,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zxe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ="ConnectivityMonitor";class nQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ur(rQ,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ur(rQ,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EC=null;function P6(){return EC===null?EC=function(){return 268435456+Math.round(2147483648*Math.random())}():EC++,"0x"+EC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="RestConnection",$xe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gxe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===G5?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=P6(),o=this.zo(t,r.toUriEncodedString());ur(TB,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),d=Ih(u);return this.Jo(t,o,c,n,d).then(f=>(ur(TB,`Received RPC '${t}' ${i}: `,f),f),f=>{throw cg(TB,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+T1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=$xe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="WebChannelConnection";class qxe extends Gxe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=P6();return new Promise((o,c)=>{const u=new vJ;u.setWithCredentials(!0),u.listenOnce(bJ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Z_.NO_ERROR:const f=u.getResponseJson();ur(Po,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case Z_.TIMEOUT:ur(Po,`RPC '${t}' ${i} timed out`),c(new Xt(_t.DEADLINE_EXCEEDED,"Request time out"));break;case Z_.HTTP_ERROR:const h=u.getStatus();if(ur(Po,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(_t).indexOf(w)>=0?w:_t.UNKNOWN}(g.status);c(new Xt(x,g.message))}else c(new Xt(_t.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Xt(_t.UNAVAILABLE,"Connection failed."));break;default:zr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ur(Po,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);ur(Po,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=P6(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=EJ(),o=wJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");ur(Po,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,p=!1;const g=new Kxe({Yo:b=>{p?ur(Po,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(ur(Po,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),ur(Po,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,y,w)=>{b.listen(y,_=>{try{w(_)}catch(j){setTimeout(()=>{throw j},0)}})};return x(f,jy.EventType.OPEN,()=>{p||(ur(Po,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,jy.EventType.CLOSE,()=>{p||(p=!0,ur(Po,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,jy.EventType.ERROR,b=>{p||(p=!0,cg(Po,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Xt(_t.UNAVAILABLE,"The operation could not be completed")))}),x(f,jy.EventType.MESSAGE,b=>{var y;if(!p){const w=b.data[0];ia(!!w,16349);const _=w,j=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(j){ur(Po,`RPC '${t}' stream ${a} received error:`,j);const k=j.status;let I=function(B){const R=ii[B];if(R!==void 0)return sZ(R)}(k),E=j.message;I===void 0&&(I=_t.INTERNAL,E="Unknown error status: "+k+" with message "+j.message),p=!0,g.a_(new Xt(I,E)),f.close()}else ur(Po,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(o,yJ.STAT_EVENT,b=>{b.stat===C6.PROXY?ur(Po,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===C6.NOPROXY&&ur(Po,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function IB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(e){return new Jge(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&ur("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ="PersistentStream";class bZ{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vZ(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===_t.RESOURCE_EXHAUSTED?(gh(r.toString()),gh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===_t.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Xt(_t.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ur(aQ,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(ur(aQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wxe extends bZ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=txe(this.serializer,t),n=function(s){if(!("targetChange"in s))return Jr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Jr.min():i.readTime?XA(i.readTime):Jr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=O6(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=j6(c)?{documents:axe(s,c)}:{query:sxe(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=lZ(s,i.resumeToken);const u=T6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Jr.min())>0){o.readTime=Y5(s,i.snapshotVersion.toTimestamp());const u=T6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=oxe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=O6(this.serializer),r.removeTarget=t,this.q_(r)}}class Xxe extends bZ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ia(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ia(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ia(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=nxe(t.writeResults,t.commitTime),n=XA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=O6(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>rxe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yxe{}class Jxe extends Yxe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Xt(_t.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,I6(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(_t.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,I6(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(_t.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Zxe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gh(r),this.aa=!1):ur("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="RemoteStore";class eve{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Fg(this)&&(ur(ug,"Restarting streams for network reachability change."),await async function(c){const u=tn(c);u.Ea.add(4),await O2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await f4(u)}(this))})}),this.Ra=new Zxe(n,a)}}async function f4(e){if(Fg(e))for(const t of e.da)await t(!0)}async function O2(e){for(const t of e.da)await t(!1)}function yZ(e,t){const r=tn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),YD(r)?XD(r):O1(r).O_()&&WD(r,t))}function qD(e,t){const r=tn(e),n=O1(r);r.Ia.delete(t),n.O_()&&wZ(r,t),r.Ia.size===0&&(n.O_()?n.L_():Fg(r)&&r.Ra.set("Unknown"))}function WD(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}O1(e).Y_(t)}function wZ(e,t){e.Va.Ue(t),O1(e).Z_(t)}function XD(e){e.Va=new qge({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),O1(e).start(),e.Ra.ua()}function YD(e){return Fg(e)&&!O1(e).x_()&&e.Ia.size>0}function Fg(e){return tn(e).Ea.size===0}function EZ(e){e.Va=void 0}async function tve(e){e.Ra.set("Online")}async function rve(e){e.Ia.forEach((t,r)=>{WD(e,t)})}async function nve(e,t){EZ(e),YD(e)?(e.Ra.ha(t),XD(e)):e.Ra.set("Unknown")}async function ave(e,t,r){if(e.Ra.set("Online"),t instanceof oZ&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){ur(ug,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Z5(e,n)}else if(t instanceof n5?e.Va.Ze(t):t instanceof iZ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Jr.min()))try{const n=await xZ(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Zi.EMPTY_BYTE_STRING,d.snapshotVersion)),wZ(s,c);const f=new $0(d.target,c,u,d.sequenceNumber);WD(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){ur(ug,"Failed to raise snapshot:",n),await Z5(e,n)}}async function Z5(e,t,r){if(!F1(t))throw t;e.Ea.add(1),await O2(e),e.Ra.set("Offline"),r||(r=()=>xZ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ur(ug,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await f4(e)})}function CZ(e,t){return t().catch(r=>Z5(e,r,t))}async function h4(e){const t=tn(e),r=bm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:DD;for(;sve(t);)try{const a=await Uxe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,ive(t,a)}catch(a){await Z5(t,a)}_Z(t)&&NZ(t)}function sve(e){return Fg(e)&&e.Ta.length<10}function ive(e,t){e.Ta.push(t);const r=bm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function _Z(e){return Fg(e)&&!bm(e).x_()&&e.Ta.length>0}function NZ(e){bm(e).start()}async function ove(e){bm(e).ra()}async function lve(e){const t=bm(e);for(const r of e.Ta)t.ea(r.mutations)}async function cve(e,t,r){const n=e.Ta.shift(),a=QD.from(n,t,r);await CZ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await h4(e)}async function uve(e,t){t&&bm(e).X_&&await async function(n,a){if(function(i){return $ge(i)&&i!==_t.ABORTED}(a.code)){const s=n.Ta.shift();bm(n).B_(),await CZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await h4(n)}}(e,t),_Z(e)&&NZ(e)}async function sQ(e,t){const r=tn(e);r.asyncQueue.verifyOperationInProgress(),ur(ug,"RemoteStore received new credentials");const n=Fg(r);r.Ea.add(3),await O2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await f4(r)}async function dve(e,t){const r=tn(e);t?(r.Ea.delete(2),await f4(r)):t||(r.Ea.add(2),await O2(r),r.Ra.set("Unknown"))}function O1(e){return e.ma||(e.ma=function(r,n,a){const s=tn(r);return s.sa(),new Wxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:tve.bind(null,e),t_:rve.bind(null,e),r_:nve.bind(null,e),H_:ave.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),YD(e)?XD(e):e.Ra.set("Unknown")):(await e.ma.stop(),EZ(e))})),e.ma}function bm(e){return e.fa||(e.fa=function(r,n,a){const s=tn(r);return s.sa(),new Xxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ove.bind(null,e),r_:uve.bind(null,e),ta:lve.bind(null,e),na:cve.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await h4(e)):(await e.fa.stop(),e.Ta.length>0&&(ur(ug,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new sh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new JD(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(_t.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZD(e,t){if(gh("AsyncQueue",`${t}: ${e}`),F1(e))return new Xt(_t.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{static emptySet(t){return new _v(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||yr.comparator(r.key,n.key):(r,n)=>yr.comparator(r.key,n.key),this.keyedMap=By(),this.sortedSet=new ls(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof _v)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new _v;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(){this.ga=new ls(yr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):zr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Jv{constructor(t,r,n,a,s,i,o,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Jv(t,r,_v.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&i4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class fve{constructor(){this.queries=oQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=tn(r),s=a.queries;a.queries=oQ(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Xt(_t.ABORTED,"Firestore shutting down"))}}function oQ(){return new Ig(e=>GJ(e),i4)}async function eP(e,t){const r=tn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Ave,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=ZD(i,`Initialization of query '${Zx(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&rP(r)}async function tP(e,t){const r=tn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function hve(e,t){const r=tn(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&rP(r)}function mve(e,t,r){const n=tn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function rP(e){e.Ca.forEach(t=>{t.next()})}var R6,lQ;(lQ=R6||(R6={})).Ma="default",lQ.Cache="cache";class nP{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Jv(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Jv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==R6.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(t){this.key=t}}class kZ{constructor(t){this.key=t}}class pve{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bn(),this.mutatedKeys=Bn(),this.eu=KJ(t),this.tu=new _v(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new iQ,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=o4(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==x&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(i=i.add(p),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr(20277,{Rt:b})}};return x(p)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new Jv(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new kZ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new SZ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Bn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Jv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const aP="SyncEngine";class gve{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class xve{constructor(t){this.key=t,this.hu=!1}}class vve{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Ig(o=>GJ(o),i4),this.Iu=new Map,this.Eu=new Set,this.du=new ls(yr.comparator),this.Au=new Map,this.Ru=new zD,this.Vu={},this.mu=new Map,this.fu=Yv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bve(e,t,r=!0){const n=OZ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await jZ(n,t,r,!0),a}async function yve(e,t){const r=OZ(e);await jZ(r,t,!0,!1)}async function jZ(e,t,r,n){const a=await Qxe(e.localStore,WA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await wve(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&yZ(e.remoteStore,a),o}async function wve(e,t,r,n,a){e.pu=(f,h,p)=>async function(x,b,y,w){let _=b.view.ru(y);_.Cs&&(_=await eQ(x.localStore,b.query,!1).then(({documents:E})=>b.view.ru(E,_)));const j=w&&w.targetChanges.get(b.targetId),k=w&&w.targetMismatches.get(b.targetId)!=null,I=b.view.applyChanges(_,x.isPrimaryClient,j,k);return uQ(x,b.targetId,I.au),I.snapshot}(e,f,h,p);const s=await eQ(e.localStore,t,!0),i=new pve(t,s.Qs),o=i.ru(s.documents),c=F2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,c);uQ(e,r,u.au);const d=new gve(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function Eve(e,t,r){const n=tn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!i4(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await D6(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&qD(n.remoteStore,a.targetId),L6(n,a.targetId)}).catch(I1)):(L6(n,a.targetId),await D6(n.localStore,a.targetId,!0))}async function Cve(e,t){const r=tn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),qD(r.remoteStore,n.targetId))}async function _ve(e,t,r){const n=Ive(e);try{const a=await function(i,o){const c=tn(i),u=ir.now(),d=o.reduce((p,g)=>p.add(g.key),Bn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=xh(),x=Bn();return c.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const w of o){const _=Uge(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new Rm(w.key,_,MJ(_.value.mapValue),wl.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:WJ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new ls(jn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await D2(n,a.changes),await h4(n.remoteStore)}catch(a){const s=ZD(a,"Failed to persist write");r.reject(s)}}async function BZ(e,t){const r=tn(e);try{const n=await Lxe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(ia(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?ia(i.hu,14607):a.removedDocuments.size>0&&(ia(i.hu,42227),i.hu=!1))}),await D2(r,n,t)}catch(n){await I1(n)}}function cQ(e,t,r){const n=tn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=tn(i);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&rP(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Nve(e,t,r){const n=tn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ls(yr.comparator);i=i.insert(s,qo.newNoDocument(s,Jr.min()));const o=Bn().add(s),c=new d4(Jr.min(),new Map,new ls(jn),i,o);await BZ(n,c),n.du=n.du.remove(s),n.Au.delete(t),sP(n)}else await D6(n.localStore,t,!1).then(()=>L6(n,t,r)).catch(I1)}async function Sve(e,t){const r=tn(e),n=t.batch.batchId;try{const a=await Rxe(r.localStore,t);IZ(r,n,null),TZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await D2(r,a)}catch(a){await I1(a)}}async function kve(e,t,r){const n=tn(e);try{const a=await function(i,o){const c=tn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(ia(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);IZ(n,t,r),TZ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await D2(n,a)}catch(a){await I1(a)}}function TZ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function IZ(e,t,r){const n=tn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function L6(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||FZ(e,n)})}function FZ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(qD(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),sP(e))}function uQ(e,t,r){for(const n of r)n instanceof SZ?(e.Ru.addReference(n.key,t),jve(e,n)):n instanceof kZ?(ur(aP,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||FZ(e,n.key)):zr(19791,{wu:n})}function jve(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(ur(aP,"New document in limbo: "+r),e.Eu.add(n),sP(e))}function sP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new yr(Na.fromString(t)),n=e.fu.next();e.Au.set(n,new xve(r)),e.du=e.du.insert(r,n),yZ(e.remoteStore,new $0(WA(s4(r.path)),n,"TargetPurposeLimboResolution",t4.ce))}}async function D2(e,t,r){const n=tn(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=GD.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=tn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Dt.forEach(u,h=>Dt.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Dt.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!F1(f))throw f;ur(KD,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function Bve(e,t){const r=tn(e);if(!r.currentUser.isEqual(t)){ur(aP,"User change. New user:",t.toKey());const n=await gZ(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Xt(_t.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await D2(r,n.Ls)}}function Tve(e,t){const r=tn(e),n=r.Au.get(t);if(n&&n.hu)return Bn().add(n.key);{let a=Bn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function OZ(e){const t=tn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tve.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nve.bind(null,t),t.Pu.H_=hve.bind(null,t.eventManager),t.Pu.yu=mve.bind(null,t.eventManager),t}function Ive(e){const t=tn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sve.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kve.bind(null,t),t}class eN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=A4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Pxe(this.persistence,new Fxe,t.initialUser,this.serializer)}Cu(t){return new pZ($D.mi,this.serializer)}Du(t){return new Vxe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eN.provider={build:()=>new eN};class Fve extends eN{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ia(this.persistence.referenceDelegate instanceof J5,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new xxe(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?$l.withCacheSize(this.cacheSizeBytes):$l.DEFAULT;return new pZ(n=>J5.mi(n,r),this.serializer)}}class M6{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>cQ(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bve.bind(null,this.syncEngine),await dve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new fve}()}createDatastore(t){const r=A4(t.databaseInfo.databaseId),n=function(s){return new qxe(s)}(t.databaseInfo);return function(s,i,o,c){return new Jxe(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new eve(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>cQ(this.syncEngine,r,0),function(){return nQ.v()?new nQ:new zxe}())}createSyncEngine(t,r){return function(a,s,i,o,c,u,d){const f=new vve(a,s,i,o,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=tn(a);ur(ug,"RemoteStore shutting down."),s.Ea.add(5),await O2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}M6.provider={build:()=>new M6};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):gh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="FirestoreClient";class Ove{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=zo.UNAUTHENTICATED,this.clientId=ZS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{ur(ym,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ur(ym,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new sh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=ZD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function FB(e,t){e.asyncQueue.verifyOperationInProgress(),ur(ym,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await gZ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function dQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await Dve(e);ur(ym,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>sQ(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>sQ(t.remoteStore,a)),e._onlineComponents=t}async function Dve(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ur(ym,"Using user provided OfflineComponentProvider");try{await FB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===_t.FAILED_PRECONDITION||a.code===_t.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;cg("Error using user provided cache. Falling back to memory cache: "+r),await FB(e,new eN)}}else ur(ym,"Using default OfflineComponentProvider"),await FB(e,new Fve(void 0));return e._offlineComponents}async function DZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ur(ym,"Using user provided OnlineComponentProvider"),await dQ(e,e._uninitializedComponentsProvider._online)):(ur(ym,"Using default OnlineComponentProvider"),await dQ(e,new M6))),e._onlineComponents}function Pve(e){return DZ(e).then(t=>t.syncEngine)}async function tN(e){const t=await DZ(e),r=t.eventManager;return r.onListen=bve.bind(null,t.syncEngine),r.onUnlisten=Eve.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=yve.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Cve.bind(null,t.syncEngine),r}function Rve(e,t,r={}){const n=new sh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new iP({next:h=>{d.Nu(),i.enqueueAndForget(()=>tP(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Xt(_t.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new Xt(_t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new nP(s4(o.path),d,{includeMetadataChanges:!0,qa:!0});return eP(s,f)}(await tN(e),e.asyncQueue,t,r,n)),n.promise}function Lve(e,t,r={}){const n=new sh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new iP({next:h=>{d.Nu(),i.enqueueAndForget(()=>tP(s,f)),h.fromCache&&c.source==="server"?u.reject(new Xt(_t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new nP(o,d,{includeMetadataChanges:!0,qa:!0});return eP(s,f)}(await tN(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PZ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RZ="firestore.googleapis.com",fQ=!0;class hQ{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(_t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RZ,this.ssl=fQ}else this.host=t.host,this.ssl=t.ssl??fQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mZ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pxe)throw new Xt(_t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PZ(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xt(_t.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class m4{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(_t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hQ(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new NJ;switch(n.type){case"firstParty":return new qpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xt(_t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=AQ.get(r);n&&(ur("ComponentProvider","Removing Datastore"),AQ.delete(r),n.terminate())}(this),Promise.resolve()}}function LZ(e,t,r,n={}){var u;e=tl(e,m4);const a=Ih(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(GS(`https://${o}`),KS("Firestore",!0)),s.host!==RZ&&s.host!==o&&cg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!hm(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=zo.MOCK_USER;else{d=IY(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Xt(_t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zo(h)}e._authCredentials=new $pe(new _J(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new zd(this.firestore,t,this._query)}}class ss{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ih(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ss(this.firestore,t,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(T2(r,ss._jsonSchema))return new ss(t,n||null,new yr(Na.fromString(r.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:hi("string",ss._jsonSchemaVersion),referencePath:hi("string")};class ih extends zd{constructor(t,r,n){super(t,r,s4(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ss(this.firestore,null,new yr(t))}withConverter(t){return new ih(this.firestore,t,this._path)}}function yt(e,t,...r){if(e=Yn(e),SJ("collection","path",t),e instanceof m4){const n=Na.fromString(t,...r);return k9(n),new ih(e,null,n)}{if(!(e instanceof ss||e instanceof ih))throw new Xt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return k9(n),new ih(e.firestore,null,n)}}function sr(e,t,...r){if(e=Yn(e),arguments.length===1&&(t=ZS.newId()),SJ("doc","path",t),e instanceof m4){const n=Na.fromString(t,...r);return S9(n),new ss(e,null,new yr(n))}{if(!(e instanceof ss||e instanceof ih))throw new Xt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return S9(n),new ss(e.firestore,e instanceof ih?e.converter:null,new yr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ="AsyncQueue";class pQ{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vZ(this,"async_queue_retry"),this._c=()=>{const n=IB();n&&ur(mQ,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=IB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=IB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new sh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!F1(t))throw t;ur(mQ,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,gh("INTERNAL UNHANDLED ERROR: ",gQ(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=JD.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&zr(47125,{Pc:gQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function gQ(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Qd extends m4{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new pQ,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pQ(t),this._firestoreClient=void 0,await t}}}function oP(e,t){const r=typeof e=="object"?e:qS(),n=typeof e=="string"?e:G5,a=S2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=wD("firestore");s&&LZ(a,...s)}return a}function D1(e){if(e._terminated)throw new Xt(_t.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Mve(e),e._firestoreClient}function Mve(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,u,d){return new dge(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PZ(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Ove(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Fc(Zi.fromBase64String(t))}catch(r){throw new Xt(_t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Fc(Zi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Fc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(T2(t,Fc._jsonSchema))return Fc.fromBase64String(t.bytes)}}Fc._jsonSchemaVersion="firestore/bytes/1.0",Fc._jsonSchema={type:hi("string",Fc._jsonSchemaVersion),bytes:hi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(_t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ki(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(_t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(_t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return jn(this._lat,t._lat)||jn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Td._jsonSchemaVersion}}static fromJSON(t){if(T2(t,Td._jsonSchema))return new Td(t.latitude,t.longitude)}}Td._jsonSchemaVersion="firestore/geoPoint/1.0",Td._jsonSchema={type:hi("string",Td._jsonSchemaVersion),latitude:hi("number"),longitude:hi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Id._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(T2(t,Id._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Id(t.vectorValues);throw new Xt(_t.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Id._jsonSchemaVersion="firestore/vectorValue/1.0",Id._jsonSchema={type:hi("string",Id._jsonSchemaVersion),vectorValues:hi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uve=/^__.*__$/;class Qve{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Rm(t,this.data,this.fieldMask,r,this.fieldTransforms):new I2(t,this.data,r,this.fieldTransforms)}}class MZ{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Rm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function UZ(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr(40011,{Ac:e})}}class p4{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new p4({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return rN(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(UZ(this.Ac)&&Uve.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Hve{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||A4(t)}Cc(t,r,n,a=!1){return new p4({Ac:t,methodName:r,Dc:n,path:Ki.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L1(e){const t=e._freezeSettings(),r=A4(e._databaseId);return new Hve(e._databaseId,!!t.ignoreUndefinedProperties,r)}function lP(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);dP("Data must be an object, but it was:",i,n);const o=zZ(n,i);let c,u;if(s.merge)c=new Rc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=U6(t,f,r);if(!i.contains(h))throw new Xt(_t.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);GZ(d,h)||d.push(h)}c=new Rc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Qve(new Xl(o),c,u)}class g4 extends R1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof g4}}function Vve(e,t,r){return new p4({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class cP extends R1{_toFieldTransform(t){return new rZ(t.path,new Fw)}isEqual(t){return t instanceof cP}}class uP extends R1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Vve(this,t,!0),n=this.vc.map(s=>M1(s,r)),a=new Xv(n);return new rZ(t.path,a)}isEqual(t){return t instanceof uP&&hm(this.vc,t.vc)}}function QZ(e,t,r,n){const a=e.Cc(1,t,r);dP("Data must be an object, but it was:",a,n);const s=[],i=Xl.empty();Pm(n,(c,u)=>{const d=AP(t,c,r);u=Yn(u);const f=a.yc(d);if(u instanceof g4)s.push(d);else{const h=M1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new Rc(s);return new MZ(i,o,a.fieldTransforms)}function HZ(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[U6(t,n,r)],c=[a];if(s.length%2!=0)throw new Xt(_t.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(U6(t,s[h])),c.push(s[h+1]);const u=[],d=Xl.empty();for(let h=o.length-1;h>=0;--h)if(!GZ(u,o[h])){const p=o[h];let g=c[h];g=Yn(g);const x=i.yc(p);if(g instanceof g4)u.push(p);else{const b=M1(g,x);b!=null&&(u.push(p),d.set(p,b))}}const f=new Rc(u);return new MZ(d,f,i.fieldTransforms)}function VZ(e,t,r,n=!1){return M1(r,e.Cc(n?4:3,t))}function M1(e,t){if($Z(e=Yn(e)))return dP("Unsupported field value:",t,e),zZ(e,t);if(e instanceof R1)return function(n,a){if(!UZ(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=M1(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Yn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Oge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ir.fromDate(n);return{timestampValue:Y5(a.serializer,s)}}if(n instanceof ir){const s=new ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Y5(a.serializer,s)}}if(n instanceof Td)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Fc)return{bytesValue:lZ(a.serializer,n._byteString)};if(n instanceof ss){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:VD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Id)return function(i,o){return{mapValue:{fields:{[RJ]:{stringValue:LJ},[K5]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return UD(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${e4(n)}`)}(e,t)}function zZ(e,t){const r={};return TJ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pm(e,(n,a)=>{const s=M1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function $Z(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof Td||e instanceof Fc||e instanceof ss||e instanceof R1||e instanceof Id)}function dP(e,t,r){if(!$Z(r)||!jJ(r)){const n=e4(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function U6(e,t,r){if((t=Yn(t))instanceof P1)return t._internalPath;if(typeof t=="string")return AP(e,t);throw rN("Field path arguments must be of type string or ",e,!1,void 0,r)}const zve=new RegExp("[~\\*/\\[\\]]");function AP(e,t,r){if(t.search(zve)>=0)throw rN(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new P1(...t.split("."))._internalPath}catch{throw rN(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function rN(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Xt(_t.INVALID_ARGUMENT,o+e+c)}function GZ(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $ve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(x4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class $ve extends fP{data(){return super.data()}}function x4(e,t){return typeof t=="string"?AP(e,t):t instanceof P1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KZ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(_t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hP{}class P2 extends hP{}function zt(e,t,...r){let n=[];t instanceof hP&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof v4).length,o=s.filter(c=>c instanceof R2).length;if(i>1||i>0&&o>0)throw new Xt(_t.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class R2 extends P2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new R2(t,r,n)}_apply(t){const r=this._parse(t);return WZ(t._query,r),new zd(t.firestore,t.converter,B6(t._query,r))}_parse(t){const r=L1(t.firestore);return function(s,i,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(_t.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){bQ(f,d);const g=[];for(const x of f)g.push(vQ(c,s,x));h={arrayValue:{values:g}}}else h=vQ(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||bQ(f,d),h=VZ(o,i,f,d==="in"||d==="not-in");return fi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Dr(e,t,r){const n=t,a=x4("where",e);return R2._create(a,n,r)}class v4 extends hP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new v4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ud.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)WZ(i,c),i=B6(i,c)}(t._query,r),new zd(t.firestore,t.converter,B6(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class b4 extends P2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new b4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Xt(_t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Xt(_t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iw(s,i)}(t._query,this._field,this._direction);return new zd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Tg(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function gr(e,t="asc"){const r=t,n=x4("orderBy",e);return b4._create(n,r)}class y4 extends P2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new y4(t,r,n)}_apply(t){return new zd(t.firestore,t.converter,W5(t._query,this._limit,this._limitType))}}function Fd(e){return ege("limit",e),y4._create("limit",e,"F")}class w4 extends P2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new w4(t,r,n)}_apply(t){const r=Gve(t,this.type,this._docOrFields,this._inclusive);return new zd(t.firestore,t.converter,function(a,s){return new Tg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function qZ(...e){return w4._create("startAfter",e,!1)}function Gve(e,t,r,n){if(r[0]=Yn(r[0]),r[0]instanceof fP)return function(s,i,o,c,u){if(!c)throw new Xt(_t.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of Cv(s))if(f.field.isKeyField())d.push(q5(i,c.key));else{const h=c.data.field(f.field);if(n4(h))throw new Xt(_t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new Wv(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=L1(e.firestore);return function(i,o,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Xt(_t.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!MD(i)&&x.indexOf("/")!==-1)throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const b=i.path.child(Na.fromString(x));if(!yr.isDocumentKey(b))throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new yr(b);p.push(q5(o,y))}else{const b=VZ(c,u,x);p.push(b)}}return new Wv(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function vQ(e,t,r){if(typeof(r=Yn(r))=="string"){if(r==="")throw new Xt(_t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MD(t)&&r.indexOf("/")!==-1)throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Na.fromString(r));if(!yr.isDocumentKey(n))throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return q5(e,new yr(n))}if(r instanceof ss)return q5(e,r._key);throw new Xt(_t.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${e4(r)}.`)}function bQ(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(_t.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function WZ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(_t.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(_t.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class XZ{convertValue(t,r="none"){switch(vm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(xm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Pm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[K5].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Hs(i.doubleValue));return new Id(r)}convertGeoPoint(t){return new Td(Hs(t.latitude),Hs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=a4(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Bw(t));default:return null}}convertTimestamp(t){const r=gm(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Na.fromString(t);ia(hZ(n),9688,{name:t});const a=new Gv(n.get(1),n.get(3)),s=new yr(n.popFirst(5));return a.isEqual(r)||gh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class lv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class am extends fP{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ew(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(x4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(_t.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=am._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}am._jsonSchemaVersion="firestore/documentSnapshot/1.0",am._jsonSchema={type:hi("string",am._jsonSchemaVersion),bundleSource:hi("string","DocumentSnapshot"),bundleName:hi("string"),bundle:hi("string")};class ew extends am{data(t={}){return super.data(t)}}class sm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new lv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new ew(this._firestore,this._userDataWriter,n.key,n,new lv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(_t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new ew(a._firestore,a._userDataWriter,o.doc.key,o.doc,new lv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new ew(a._firestore,a._userDataWriter,o.doc.key,o.doc,new lv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Kve(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(_t.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=sm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ZS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Kve(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e){e=tl(e,ss);const t=tl(e.firestore,Qd);return Rve(D1(t),e._key).then(r=>YZ(t,e,r))}sm._jsonSchemaVersion="firestore/querySnapshot/1.0",sm._jsonSchema={type:hi("string",sm._jsonSchemaVersion),bundleSource:hi("string","QuerySnapshot"),bundleName:hi("string"),bundle:hi("string")};class pP extends XZ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function Qn(e){e=tl(e,zd);const t=tl(e.firestore,Qd),r=D1(t),n=new pP(t);return KZ(e._query),Lve(r,e._query).then(a=>new sm(t,n,e,a))}function pi(e,t,r){e=tl(e,ss);const n=tl(e.firestore,Qd),a=mP(e.converter,t,r);return U1(n,[lP(L1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,wl.none())])}function Kc(e,t,r,...n){e=tl(e,ss);const a=tl(e.firestore,Qd),s=L1(a);let i;return i=typeof(t=Yn(t))=="string"||t instanceof P1?HZ(s,"updateDoc",e._key,t,r,n):QZ(s,"updateDoc",e._key,t),U1(a,[i.toMutation(e._key,wl.exists(!0))])}function za(e){return U1(tl(e.firestore,Qd),[new u4(e._key,wl.none())])}function vn(e,t){const r=tl(e.firestore,Qd),n=sr(e),a=mP(e.converter,t);return U1(r,[lP(L1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,wl.exists(!1))]).then(()=>n)}function fr(e,...t){var c,u,d;e=Yn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||xQ(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(xQ(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof ss)i=tl(e.firestore,Qd),o=s4(e._key.path),s={next:f=>{t[n]&&t[n](YZ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=tl(e,zd);i=tl(f.firestore,Qd),o=f._query;const h=new pP(i);s={next:p=>{t[n]&&t[n](new sm(i,h,f,p))},error:t[n+1],complete:t[n+2]},KZ(e._query)}return function(h,p,g,x){const b=new iP(x),y=new nP(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>eP(await tN(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>tP(await tN(h),y))}}(D1(i),o,a,s)}function U1(e,t){return function(n,a){const s=new sh;return n.asyncQueue.enqueueAndForget(async()=>_ve(await Pve(n),a,s)),s.promise}(D1(e),t)}function YZ(e,t,r){const n=r.docs.get(t._key),a=new pP(e);return new am(e,a,t._key,n,new lv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=L1(t)}set(t,r,n){this._verifyNotCommitted();const a=OB(t,this._firestore),s=mP(a.converter,r,n),i=lP(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,wl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=OB(t,this._firestore);let i;return i=typeof(r=Yn(r))=="string"||r instanceof P1?HZ(this._dataReader,"WriteBatch.update",s._key,r,n,a):QZ(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,wl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=OB(t,this._firestore);return this._mutations=this._mutations.concat(new u4(r._key,wl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(_t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function OB(e,t){if((e=Yn(e)).firestore!==t)throw new Xt(_t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Si(){return new cP("serverTimestamp")}function ZZ(...e){return new uP("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(e){return D1(e=tl(e,Qd)),new JZ(e,t=>U1(e,t))}(function(t,r=!0){(function(a){T1=a})(jg),mm(new hh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Qd(new Gpe(n.getProvider("auth-internal")),new Wpe(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(_t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gv(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Lu(E9,C9,t),Lu(E9,C9,"esm2020")})();const qve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:XZ,Bytes:Fc,CollectionReference:ih,DocumentReference:ss,DocumentSnapshot:am,FieldPath:P1,FieldValue:R1,Firestore:Qd,FirestoreError:Xt,GeoPoint:Td,Query:zd,QueryCompositeFilterConstraint:v4,QueryConstraint:P2,QueryDocumentSnapshot:ew,QueryFieldFilterConstraint:R2,QueryLimitConstraint:y4,QueryOrderByConstraint:b4,QuerySnapshot:sm,QueryStartAtConstraint:w4,SnapshotMetadata:lv,Timestamp:ir,VectorValue:Id,WriteBatch:JZ,_AutoId:ZS,_ByteString:Zi,_DatabaseId:Gv,_DocumentKey:yr,_EmptyAuthCredentialsProvider:NJ,_FieldPath:Ki,_cast:tl,_logWarn:cg,_validateIsNotUsedTogether:kJ,addDoc:vn,arrayUnion:ZZ,collection:yt,connectFirestoreEmulator:LZ,deleteDoc:za,doc:sr,ensureFirestoreConfigured:D1,executeWrite:U1,getDoc:Og,getDocs:Qn,getFirestore:oP,limit:Fd,onSnapshot:fr,orderBy:gr,query:zt,serverTimestamp:Si,setDoc:pi,startAfter:qZ,updateDoc:Kc,where:Dr,writeBatch:Dg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eee="firebasestorage.googleapis.com",tee="storageBucket",Wve=120*1e3,Xve=600*1e3,Yve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Vd{constructor(t,r,n=0){super(DB(t),`Firebase Storage: ${r} (${DB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,As.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return DB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Va;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Va||(Va={}));function DB(e){return"storage/"+e}function gP(){const e="An unknown error occurred, please check the error payload for server response.";return new As(Va.UNKNOWN,e)}function Jve(e){return new As(Va.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Zve(e){return new As(Va.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e1e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new As(Va.UNAUTHENTICATED,e)}function t1e(){return new As(Va.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function r1e(e){return new As(Va.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ree(){return new As(Va.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nee(){return new As(Va.CANCELED,"User canceled the upload/download.")}function n1e(e){return new As(Va.INVALID_URL,"Invalid URL '"+e+"'.")}function a1e(e){return new As(Va.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function s1e(){return new As(Va.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tee+"' property when initializing the app?")}function aee(){return new As(Va.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function i1e(){return new As(Va.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function o1e(){return new As(Va.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function l1e(e){return new As(Va.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Q6(e){return new As(Va.INVALID_ARGUMENT,e)}function see(){return new As(Va.APP_DELETED,"The Firebase app was deleted.")}function c1e(e){return new As(Va.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tw(e,t){return new As(Va.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Xb(e){throw new As(Va.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=xl.makeFromUrl(t,r)}catch{return new xl(t,"")}if(n.path==="")return n;throw a1e(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===eee?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${b}`,"i"),_=[{regex:o,indices:c,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let j=0;j<_.length;j++){const k=_[j],I=k.regex.exec(t);if(I){const E=I[k.indices.bucket];let N=I[k.indices.path];N||(N=""),n=new xl(E,N),k.postModify(n);break}}if(n==null)throw n1e(t);return n}}class u1e{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1e(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,c())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(c()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let _;o===1?(o=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function A1e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1e(e){return e!==void 0}function h1e(e){return typeof e=="function"}function m1e(e){return typeof e=="object"&&!Array.isArray(e)}function E4(e){return typeof e=="string"||e instanceof String}function yQ(e){return xP()&&e instanceof Blob}function xP(){return typeof Blob<"u"}function H6(e,t,r,n){if(n<t)throw Q6(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw Q6(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function iee(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var zp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(zp||(zp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oee(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{constructor(t,r,n,a,s,i,o,c,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new CC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===zp.NO_ERROR,c=s.getStatus();if(!o||oee(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===zp.ABORT;n(!1,new CC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new CC(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());f1e(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=gP();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?see():nee();i(c)}else{const c=ree();i(c)}};this.canceled_?r(!1,new CC(!1,null,!0)):this.backoffId_=d1e(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&A1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class CC{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function g1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function x1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function v1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function b1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function y1e(e,t,r,n,a,s,i=!0,o=!1){const c=iee(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return v1e(d,t),g1e(d,r),x1e(d,s),b1e(d,n),new p1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function E1e(...e){const t=w1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(xP())return new Blob(e);throw new As(Va.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1e(e){if(typeof atob>"u")throw l1e("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class PB{constructor(t,r){this.data=t,this.contentType=r||null}}function N1e(e,t){switch(e){case QA.RAW:return new PB(lee(t));case QA.BASE64:case QA.BASE64URL:return new PB(cee(e,t));case QA.DATA_URL:return new PB(k1e(t),j1e(t))}throw gP()}function lee(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function S1e(e){let t;try{t=decodeURIComponent(e)}catch{throw tw(QA.DATA_URL,"Malformed data URL.")}return lee(t)}function cee(e,t){switch(e){case QA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw tw(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case QA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw tw(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=_1e(t)}catch(a){throw a.message.includes("polyfill")?a:tw(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class uee{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw tw(QA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=B1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function k1e(e){const t=new uee(e);return t.base64?cee(QA.BASE64,t.rest):S1e(t.rest)}function j1e(e){return new uee(e).contentType}function B1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,r){let n=0,a="";yQ(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(yQ(this.data_)){const n=this.data_,a=C1e(n,t,r);return a===null?null:new Gf(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Gf(n,!0)}}static getBlob(...t){if(xP()){const r=t.map(n=>n instanceof Gf?n.data_:n);return new Gf(E1e.apply(null,r))}else{const r=t.map(i=>E4(i)?N1e(QA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new Gf(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(e){let t;try{t=JSON.parse(e)}catch{return null}return m1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function I1e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function dee(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1e(e,t){return t}class Al{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||F1e}}let _C=null;function O1e(e){return!E4(e)||e.length<2?e:dee(e)}function bP(){if(_C)return _C;const e=[];e.push(new Al("bucket")),e.push(new Al("generation")),e.push(new Al("metageneration")),e.push(new Al("name","fullPath",!0));function t(s,i){return O1e(i)}const r=new Al("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new Al("size");return a.xform=n,e.push(a),e.push(new Al("timeCreated")),e.push(new Al("updated")),e.push(new Al("md5Hash",null,!0)),e.push(new Al("cacheControl",null,!0)),e.push(new Al("contentDisposition",null,!0)),e.push(new Al("contentEncoding",null,!0)),e.push(new Al("contentLanguage",null,!0)),e.push(new Al("contentType",null,!0)),e.push(new Al("metadata","customMetadata",!0)),_C=e,_C}function D1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new xl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function P1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return D1e(n,e),n}function Aee(e,t,r){const n=vP(t);return n===null?null:P1e(e,n,r)}function R1e(e,t,r,n){const a=vP(t);if(a===null||!E4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=Pg(h,r,n),g=iee({alt:"media",token:u});return p+g})[0]}function fee(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ="prefixes",EQ="items";function L1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[wQ])for(const a of r[wQ]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new xl(t,s));n.prefixes.push(i)}if(r[EQ])for(const a of r[EQ]){const s=e._makeStorageReference(new xl(t,a.name));n.items.push(s)}return n}function M1e(e,t,r){const n=vP(r);return n===null?null:L1e(e,t,n)}class Lm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(e){if(!e)throw gP()}function yP(e,t){function r(n,a){const s=Aee(e,a,t);return YA(s!==null),s}return r}function U1e(e,t){function r(n,a){const s=M1e(e,t,a);return YA(s!==null),s}return r}function Q1e(e,t){function r(n,a){const s=Aee(e,a,t);return YA(s!==null),R1e(s,a,e.host,e._protocol)}return r}function Q1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=t1e():a=e1e():r.getStatus()===402?a=Zve(e.bucket):r.getStatus()===403?a=r1e(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function wP(e){const t=Q1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Jve(e.path)),s.serverResponse=a.serverResponse,s}return r}function H1e(e,t,r){const n=t.fullServerUrl(),a=Pg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Lm(a,s,yP(e,r),i);return o.errorHandler=wP(t),o}function V1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=Pg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Lm(o,c,U1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=Q1(t),d}function z1e(e,t,r){const n=t.fullServerUrl(),a=Pg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Lm(a,s,Q1e(e,r),i);return o.errorHandler=wP(t),o}function $1e(e,t){const r=t.fullServerUrl(),n=Pg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const o=new Lm(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=wP(t),o}function G1e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function hee(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=G1e(null,t)),n}function mee(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let j=0;j<2;j++)_=_+Math.random().toString().slice(2);return _}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const u=hee(t,n,a),d=fee(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",p=Gf.getBlob(f,n,h);if(p===null)throw aee();const g={name:u.fullPath},x=Pg(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,w=new Lm(x,b,yP(e,r),y);return w.urlParams=g,w.headers=i,w.body=p.uploadData(),w.errorHandler=Q1(t),w}class nN{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function EP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{YA(!1)}return YA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function K1e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=hee(t,n,a),o={name:i.fullPath},c=Pg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=fee(i,r),h=e.maxUploadRetryTime;function p(x){EP(x);let b;try{b=x.getResponseHeader("X-Goog-Upload-URL")}catch{YA(!1)}return YA(E4(b)),b}const g=new Lm(c,u,p,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=Q1(t),g}function q1e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=EP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{YA(!1)}f||YA(!1);const h=Number(f);return YA(!isNaN(h)),new nN(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,c=new Lm(r,i,s,o);return c.headers=a,c.errorHandler=Q1(t),c}const CQ=256*1024;function W1e(e,t,r,n,a,s,i,o){const c=new nN(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw i1e();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw aee();function b(j,k){const I=EP(j,["active","final"]),E=c.current+d,N=n.size();let B;return I==="final"?B=yP(t,s)(j,k):B=null,new nN(E,N,I==="final",B)}const y="POST",w=t.maxUploadRetryTime,_=new Lm(r,y,b,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=o||null,_.errorHandler=Q1(e),_}const Gl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function RB(e){switch(e){case"running":case"pausing":case"canceling":return Gl.RUNNING;case"paused":return Gl.PAUSED;case"success":return Gl.SUCCESS;case"canceled":return Gl.CANCELED;case"error":return Gl.ERROR;default:return Gl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1e{constructor(t,r,n){if(h1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class Y1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Xb("cannot .send() more than once");if(Ih(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class J1e extends Y1e{initXhr(){this.xhr_.responseType="text"}}function Kf(){return new J1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=bP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Va.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(oee(a.status,[]))if(s)a=ree();else{this.sleepTime=Math.max(this.sleepTime*2,Yve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Va.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=K1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Kf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=q1e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Kf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=CQ*this._chunkMultiplier,r=new nN(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=W1e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(i,Kf,a,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){CQ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=H1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Kf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=mee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Kf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=nee(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=RB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new X1e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(RB(this._state)){case Gl.SUCCESS:Cx(this._resolve.bind(null,this.snapshot))();break;case Gl.CANCELED:case Gl.ERROR:const r=this._reject;Cx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(RB(this._state)){case Gl.RUNNING:case Gl.PAUSED:t.next&&Cx(t.next.bind(t,this.snapshot))();break;case Gl.SUCCESS:t.complete&&Cx(t.complete.bind(t))();break;case Gl.CANCELED:case Gl.ERROR:t.error&&Cx(t.error.bind(t,this._error))();break;default:t.error&&Cx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,r){this._service=t,r instanceof xl?this._location=r:this._location=xl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new dg(t,r)}get root(){const t=new xl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dee(this._location.path)}get storage(){return this._service}get parent(){const t=T1e(this._location.path);if(t===null)return null;const r=new xl(this._location.bucket,t);return new dg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw c1e(t)}}function ebe(e,t,r){e._throwIfRoot("uploadBytes");const n=mee(e.storage,e._location,bP(),new Gf(t,!0),r);return e.storage.makeRequestWithTokens(n,Kf).then(a=>({metadata:a,ref:e}))}function tbe(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Z1e(e,new Gf(t),r)}function rbe(e){const t={prefixes:[],items:[]};return pee(e,t).then(()=>t)}async function pee(e,t,r){const a=await nbe(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await pee(e,t,a.nextPageToken)}function nbe(e,t){t!=null&&typeof t.maxResults=="number"&&H6("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=V1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Kf)}function abe(e){e._throwIfRoot("getDownloadURL");const t=z1e(e.storage,e._location,bP());return e.storage.makeRequestWithTokens(t,Kf).then(r=>{if(r===null)throw o1e();return r})}function sbe(e){e._throwIfRoot("deleteObject");const t=$1e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Kf)}function ibe(e,t){const r=I1e(e._location.path,t),n=new xl(e._location.bucket,r);return new dg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function obe(e){return/^[A-Za-z]+:\/\//.test(e)}function lbe(e,t){return new dg(e,t)}function gee(e,t){if(e instanceof CP){const r=e;if(r._bucket==null)throw s1e();const n=new dg(r,r._bucket);return t!=null?gee(n,t):n}else return t!==void 0?ibe(e,t):e}function cbe(e,t){if(t&&obe(t)){if(e instanceof CP)return lbe(e,t);throw Q6("To use ref(service, url), the first argument must be a Storage instance.")}else return gee(e,t)}function _Q(e,t){const r=t==null?void 0:t[tee];return r==null?null:xl.makeFromBucketSpec(r,e)}function ube(e,t,r,n={}){e.host=`${t}:${r}`;const a=Ih(t);a&&(GS(`https://${e.host}/b`),KS("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:IY(s,e.app.options.projectId))}class CP{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=eee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Wve,this._maxUploadRetryTime=Xve,this._requests=new Set,a!=null?this._bucket=xl.makeFromBucketSpec(a,this._host):this._bucket=_Q(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=xl.makeFromBucketSpec(this._url,t):this._bucket=_Q(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){H6("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){H6("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Ic(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new dg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new u1e(see());{const i=y1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const NQ="@firebase/storage",SQ="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xee="storage";function _P(e,t,r){return e=Yn(e),ebe(e,t,r)}function dbe(e,t,r){return e=Yn(e),tbe(e,t,r)}function Abe(e){return e=Yn(e),rbe(e)}function C4(e){return e=Yn(e),abe(e)}function fbe(e){return e=Yn(e),sbe(e)}function L2(e,t){return e=Yn(e),cbe(e,t)}function NP(e=qS(),t){e=Yn(e);const n=S2(e,xee).getImmediate({identifier:t}),a=wD("storage");return a&&hbe(n,...a),n}function hbe(e,t,r,n={}){ube(e,t,r,n)}function mbe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new CP(r,n,a,t,jg)}function pbe(){mm(new hh(xee,mbe,"PUBLIC").setMultipleInstances(!0)),Lu(NQ,SQ,""),Lu(NQ,SQ,"esm2020")}pbe();const gbe={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},SP=_D(gbe),M2=gJ(SP),Tr=oP(SP),kP=NP(SP),vee=Object.freeze(Object.defineProperty({__proto__:null,auth:M2,db:Tr,storage:kP},Symbol.toStringTag,{value:"Module"})),xbe=async(e,t)=>{try{return(await kme(M2,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},LB=async()=>{try{await Tme(M2)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},vbe=async e=>{try{await Sme(M2,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},bee=async e=>{try{const t=sr(Tr,"usuarios",e),r=await Og(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Wt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Wt||{}),dn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(dn||{}),kp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(kp||{});const bbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),ybe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Xs="w-6 h-6",_4="w-24 h-24",jP=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),wbe=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Ebe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Cbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Iy=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Fy=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),yee=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),_be=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Nbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Sbe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:_4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),kbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),jbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),kQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),NC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),MB=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),SC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),UB=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Bbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Tbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Ibe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Fbe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),kC=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),Obe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),QB=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),Dbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Xs,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Pbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Xs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),BQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Xs,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),Rbe=[{id:Wt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx(_be,{})},{id:Wt.PROFESORADO,label:"Profesorado",icon:l.jsx(Nbe,{})},{id:Wt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(Sbe,{})},{id:Wt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(kbe,{})}],Lbe={[Wt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(jbe,{})},{name:"Administración",icon:l.jsx(Fbe,{})},{name:"Seguimiento Curricular",icon:l.jsx(Pbe,{})},{name:"Acompañamiento docente",icon:l.jsx(Ibe,{})},{name:"Análisis Taxonómico",icon:l.jsx(BQ,{})},{name:"Interdisciplinario",icon:l.jsx(QB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(kQ,{})},{name:"Crear horarios",icon:l.jsx(MB,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(SC,{})},{name:"Inclusión",icon:l.jsx(kC,{})},{name:"Calendario Académico",icon:l.jsx(NC,{})},{name:"Muro de Anuncios",icon:l.jsx(Iy,{})},{name:"Mensajería Interna",icon:l.jsx(Fy,{})},{name:"Generador de Actas",icon:l.jsx(UB,{})}],[Wt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(jQ,{})},{name:"Mis Acompañamientos",icon:l.jsx(Obe,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(Bbe,{})},{name:"Análisis Taxonómico",icon:l.jsx(BQ,{})},{name:"Interdisciplinario",icon:l.jsx(QB,{})},{name:"Inclusión",icon:l.jsx(kC,{})},{name:"Actividades Remotas",icon:l.jsx(Tbe,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(UB,{})},{name:"Evaluaciones Formativas",icon:l.jsx(SC,{})},{name:"Desarrollo Profesional",icon:l.jsx(kC,{})},{name:"Evaluación de Competencias",icon:l.jsx(ybe,{})},{name:"Calendario Académico",icon:l.jsx(NC,{})},{name:"Muro de Anuncios",icon:l.jsx(Iy,{})},{name:"Mensajería Interna",icon:l.jsx(Fy,{})},{name:"Generador de Actas",icon:l.jsx(kQ,{})}],[Wt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(SC,{})},{name:"Asistencia Dual",icon:l.jsx(MB,{})},{name:"Pañol",icon:l.jsx(Dbe,{})},{name:"Gestión de Empresas",icon:l.jsx(bbe,{})},{name:"Calendario Académico",icon:l.jsx(NC,{})},{name:"Muro de Anuncios",icon:l.jsx(Iy,{})},{name:"Mensajería Interna",icon:l.jsx(Fy,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:l.jsx(kC,{})},{name:"Generador de Actas",icon:l.jsx(UB,{})}],[Wt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(jQ,{})},{name:"Evaluación Formativa",icon:l.jsx(SC,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(QB,{})},{name:"Asistencia a Empresa",icon:l.jsx(MB,{})},{name:"Calendario Académico",icon:l.jsx(NC,{})},{name:"Muro de Anuncios",icon:l.jsx(Iy,{})},{name:"Mensajería Interna",icon:l.jsx(Fy,{})}]},TQ=["1º Medio","2º Medio","3º Medio","4º Medio"],Wi=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ks=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],V6=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],a5=["Lunes","Martes","Miércoles","Jueves","Viernes"],z6=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Mbe={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},Nv={[dn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},Ube=Object.values(kp),HB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],VB=["Vinculado","Desvinculado","En proceso","Empresa"],$p=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Qbe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],aN=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],rw=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],wee=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],jC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Hbe=["Mecánica Industrial","Mecánica Automotriz"],Vbe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],zbe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},$be=["Pasantía","Visita","Certificación","Formación en empresa"],Gbe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},Kbe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},qf={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},IQ=["Pendiente","En Proceso","Cumplida"],FQ=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],qbe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(jP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},BC=({trigger:e,children:t,onOpen:r})=>{const[n,a]=S.useState(!1),s=S.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return S.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},OQ="usuariosLiceo",Wbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(OQ);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(OQ,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},DQ="usuariosLiceo",Xbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(DQ);let p=h?JSON.parse(h):[];const g=p.findIndex(x=>x.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(DQ,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ybe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jbe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),PQ=e=>{const t=Jbe(e);return t.charAt(0).toUpperCase()+t.slice(1)},Eee=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Zbe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tye=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>S.createElement("svg",{ref:c,...eye,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Eee("lucide",a),...!s&&!Zbe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(e,t)=>{const r=S.forwardRef(({className:n,...a},s)=>S.createElement(tye,{ref:s,iconNode:t,className:Eee(`lucide-${Ybe(PQ(e))}`,`lucide-${e}`,n),...a}));return r.displayName=PQ(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nye=$t("activity",rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aye=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],TC=$t("arrow-left",aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sye=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],iye=$t("bell-ring",sye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oye=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],lye=$t("book-marked",oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cye=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],uye=$t("book-open-check",cye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dye=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Hd=$t("book-open",dye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aye=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],fye=$t("brain-circuit",Aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hye=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Dw=$t("brain",hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mye=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Cee=$t("briefcase",mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pye=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],sN=$t("building-2",pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gye=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],xye=$t("building",gye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],bye=$t("calendar-check",vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mu=$t("calendar",yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Sd=$t("chart-column",wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Cye=$t("chart-line",Eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ye=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Nye=$t("chart-no-axes-column",_ye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sye=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_ee=$t("chart-pie",Sye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kye=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pw=$t("chevron-left",kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jye=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],BP=$t("chevron-right",jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Od=$t("circle-alert",Bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tye=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],TP=$t("circle-check-big",Tye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xi=$t("circle-check",Iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],IC=$t("circle-plus",Fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Dye=$t("clipboard-check",Oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pye=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ag=$t("clipboard-list",Pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rye=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G0=$t("clock",Rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wm=$t("download",Lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mye=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Uye=$t("factory",Mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Hye=$t("file-check",Qye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],zye=$t("file-pen",Vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ye=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],Gye=$t("file-play",$ye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],qye=$t("file-spreadsheet",Kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Dd=$t("file-text",Wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],Yye=$t("folder-closed",Xye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],RQ=$t("folder-open",Jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zye=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IP=$t("funnel",Zye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],iN=$t("gauge",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],fg=$t("graduation-cap",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rwe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],nwe=$t("hash",rwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const awe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Nee=$t("hourglass",awe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const swe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],iwe=$t("image",swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const owe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lwe=$t("info",owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],See=$t("layout-dashboard",cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uwe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],FP=$t("layers",uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Awe=$t("layout-grid",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fwe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],hwe=$t("layout-list",fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mwe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],LQ=$t("link-2",mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],gwe=$t("link",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xwe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],nw=$t("list-checks",xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vwe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],K0=$t("loader-circle",vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bwe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ywe=$t("mail",bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wwe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],oN=$t("map-pin",wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ewe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Cwe=$t("megaphone",Ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _we=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Nwe=$t("menu",_we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kee=$t("message-square",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],MQ=$t("notebook-pen",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jwe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Bwe=$t("palette",jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$6=$t("pen-line",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iwe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],OP=$t("pencil",Iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Owe=$t("percent",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dwe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Uu=$t("plus",Dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pwe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Rwe=$t("puzzle",Pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],jee=$t("refresh-ccw",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Uwe=$t("route",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qwe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Hwe=$t("ruler",Qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vh=$t("save",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zwe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],zB=$t("school",zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $we=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],UQ=$t("scroll-text",$we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],N4=$t("search",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qwe=$t("settings",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xwe=$t("shield-check",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Gp=$t("sparkles",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jwe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Bee=$t("square-pen",Jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zwe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],G6=$t("square-plus",Zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],t2e=$t("star",e2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zv=$t("target",r2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Eo=$t("trash-2",n2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],lN=$t("trending-up",a2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],i2e=$t("university",s2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],U2=$t("upload",o2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],c2e=$t("user-minus",l2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],d2e=$t("user-plus",u2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rw=$t("user",A2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Yb=$t("users-round",f2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ec=$t("users",h2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],jp=$t("video",m2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2e=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],g2e=$t("wand-sparkles",p2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],s5=$t("wrench",x2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cN=$t("x",v2e);async function b2e(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Si()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await vn(yt(Tr,"notificaciones"),t)).id}function y2e(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const o=Array.from(i.values()).sort((c,u)=>{var h,p;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=zt(yt(Tr,"notificaciones"),Dr("docenteEmailLower","==",e.email.toLowerCase()),gr("createdAt","desc"));r.push(fr(i,o=>{n=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=zt(yt(Tr,"notificaciones"),Dr("docenteNombre","==",e.nombreCompleto),gr("createdAt","desc"));r.push(fr(i,o=>{a=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function w2e(e){const t=sr(Tr,"notificaciones",e);await Kc(t,{leida:!0})}async function E2e(e){const t=sr(Tr,"notificaciones",e);await za(t)}const QQ="anunciosMuro",HQ="mensajesInternos",VQ="lir-read-status",C2e=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},_2e=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,d]=S.useState([]),[f,h]=S.useState([]),[p,g]=S.useState(!1),[x,b]=S.useState(!1),[y,w]=S.useState([]),_=S.useCallback(()=>{try{const B=localStorage.getItem(`${VQ}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),j=S.useCallback(B=>{try{localStorage.setItem(`${VQ}-${e.id}`,JSON.stringify(B))}catch(R){console.error("Failed to set read status:",R)}},[e.id]);S.useEffect(()=>{const B=JSON.parse(localStorage.getItem(QQ)||"[]"),R=_();d(B.filter(O=>!R.announcements.includes(O.id)));const D=JSON.parse(localStorage.getItem(HQ)||"[]");h(D.filter(O=>O.para===e.email).sort((O,L)=>new Date(L.fecha).getTime()-new Date(O.fecha).getTime()).slice(0,5))},[e.id,_,o]),S.useEffect(()=>{if(!(e!=null&&e.email))return;const B=y2e({email:e.email,nombreCompleto:e.nombreCompleto},R=>{const D=R.filter(O=>O.tipo&&(O.tipo.toLowerCase()==="pie"||O.tipo==="nueva_intervencion"));w(D)});return()=>B()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const k=()=>{const B=_(),R=JSON.parse(localStorage.getItem(QQ)||"[]").map(D=>D.id);B.announcements=R,j(B),d([])},I=()=>{const B=_(),D=JSON.parse(localStorage.getItem(HQ)||"[]").filter(O=>O.para===e.email).map(O=>O.id);B.messages=[...new Set([...B.messages,...D])],j(B),c()},E=y.filter(B=>!B.leida).length,N=B=>{var R;try{const D=(R=B.createdAt)!=null&&R.toDate?B.createdAt.toDate():new Date(B.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(Ebe,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(Cbe,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(BC,{onOpen:k,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[l.jsx(Iy,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(BC,{trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[l.jsx(Rwe,{className:"w-5 h-5"}),E>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:l.jsxs("div",{className:"p-2 w-80",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),l.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&l.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>l.jsx("li",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),l.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",l.jsx("b",{children:B.estudianteNombre})]}),l.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:N(B)})]}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&l.jsx("button",{onClick:()=>B.id&&w2e(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),l.jsx("button",{onClick:()=>B.id&&E2e(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),l.jsx(BC,{onOpen:I,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(Fy,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(BC,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(C2e,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&l.jsx(Wbe,{user:e,onClose:()=>g(!1),onSave:n}),x&&l.jsx(Xbe,{user:e,onClose:()=>b(!1),onSave:n})]})},N2e={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},DP=Z7().length?Z7()[0]:_D(N2e),ft=oP(DP),K6=gJ(DP),S2e=NP(DP),Q2="reemplazos_docentes",k2e="usuarios",PP=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},j2e=e=>{const t=e.data();return{id:e.id,...t}},B2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await vn(yt(ft,Q2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},T2e=async(e,t)=>{try{const r=sr(ft,Q2,e),n=await Og(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await za(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},I2e=(e,t,r=50)=>{try{const n=zt(yt(ft,Q2),Dr("userId","==",e),gr("diaAusencia","desc"),Fd(r));return fr(n,a=>{const s=a.docs.map(PP);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},F2e=e=>{try{const t=zt(yt(ft,k2e),Dr("profile","==",Wt.PROFESORADO));return fr(t,n=>{const a=n.docs.map(j2e);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},O2e=async e=>{try{const t=zt(yt(ft,Q2),Dr("userId","==",e)),n=(await Qn(t)).docs.map(PP),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},D2e=async(e,t)=>{try{if(!t.trim())return[];const r=zt(yt(ft,Q2),Dr("userId","==",e),gr("diaAusencia","desc"),Fd(100)),a=(await Qn(r)).docs.map(PP),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},P2e=Array.from({length:12},(e,t)=>t+1),zQ={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},R2e=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?I2e(e,f=>{r(f),a(!1)}):void 0,[e]);const o=S.useCallback(async d=>{try{return i(null),await B2e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=S.useCallback(async d=>{try{i(null),await T2e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=S.useCallback(async d=>{try{return i(null),d.trim()?await D2e(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:u}},L2e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0);S.useEffect(()=>F2e(i=>{t(i),n(!1)}),[]);const a=S.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},_x=({label:e,icon:t,children:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),l.jsxs("div",{className:"relative",children:[t&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),M2e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",U2e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",Q2e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",E0=({title:e,value:t,icon:r})=>l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),H2e=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),l.jsx("div",{className:"grid gap-3",children:e.map(r=>l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:r.label}),l.jsx("span",{children:r.value})]}),l.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:l.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},V2e=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[l.jsx(Sd,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):l.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"font-medium",children:n.label}),l.jsx("span",{children:n.value})]}),l.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:l.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},z2e=({userId:e,reemplazos:t})=>{const[r,n]=S.useState(null),[a,s]=S.useState(!1),i=S.useCallback(async()=>{try{s(!0);const b=await O2e(e);n(b)}finally{s(!1)}},[e]);S.useEffect(()=>{e&&i()},[e,i]);const o=new Date,c=o.getMonth(),u=o.getFullYear(),d=S.useMemo(()=>(t||[]).filter(b=>{const y=new Date(b.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(b=>b.docenteAusente).filter(Boolean)),h=new Set(d.map(b=>b.docenteReemplazante).filter(Boolean)),p=new Set(d.map(b=>b.curso).filter(Boolean)),g=new Set(d.map(b=>b.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:p.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(K0,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(E0,{title:"Total",value:r.totalReemplazos,icon:l.jsx(iye,{className:"h-6 w-6"})}),l.jsx(E0,{title:"Realizadas",value:r.horasRealizadas,icon:l.jsx(Xi,{className:"h-6 w-6"})}),l.jsx(E0,{title:"Cubiertas",value:r.horasCubiertas,icon:l.jsx(Dye,{className:"h-6 w-6"})}),l.jsx(E0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:l.jsx(Owe,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(E0,{title:"Profesores ausentes",value:f.size,icon:l.jsx(c2e,{className:"h-6 w-6"})}),l.jsx(E0,{title:"Profesores que reemplazan",value:h.size,icon:l.jsx(d2e,{className:"h-6 w-6"})}),l.jsx(E0,{title:"Cursos (únicos)",value:p.size,icon:l.jsx(ec,{className:"h-6 w-6"})}),l.jsx(E0,{title:"Asignaturas ausentes",value:g.size,icon:l.jsx(Hd,{className:"h-6 w-6"})})]}),l.jsx(H2e,{data:x})]})},$2e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=R2e(t),{profesorNames:c,loading:u}=L2e(),[d,f]=S.useState(zQ),[h,p]=S.useState(""),[g,x]=S.useState([]),[b,y]=S.useState(null),[w,_]=S.useState(!1),[j,k]=S.useState(!1);S.useEffect(()=>{(async()=>{if(!h.trim())return x(r);k(!0);try{const z=await s(h);x(z)}finally{k(!1)}})()},[r,h,s]);const I=S.useCallback(K=>{const{name:z,value:G}=K.target;f(Y=>({...Y,[z]:G}))},[]),E=S.useCallback(K=>{f(z=>{const Y=z.bloquesAfectados.includes(K)?z.bloquesAfectados.filter(te=>te!==K):[...z.bloquesAfectados,K].sort((te,P)=>te-P);return{...z,bloquesAfectados:Y}})},[]),N=S.useCallback(async K=>{K.preventDefault(),y(null),_(!0);const{docenteAusente:z,asignaturaAusente:G,curso:Y,diaAusencia:te,bloquesAfectados:P,docenteReemplazante:H,asignaturaReemplazante:X}=d;if(!z||!G||!Y||!te||!H||!X||P.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(z===H){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const Z=G.trim().toLowerCase()===X.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ae={...d,resultado:Z};await n(ae),f(zQ);const le=document.createElement("div");le.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",le.textContent=Z==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(le),setTimeout(()=>{document.body.contains(le)&&document.body.removeChild(le)},2500)}catch(Z){console.error(Z),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),B=S.useCallback(async K=>{if(window.confirm("¿Eliminar este registro?"))try{await a(K)}catch(z){console.error(z),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),R="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return l.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const D=new Date,O=D.getMonth(),L=D.getFullYear(),M=S.useMemo(()=>(r||[]).filter(K=>{if(!K.diaAusencia)return!1;const z=new Date(K.diaAusencia+"T00:00:00");return z.getMonth()===O&&z.getFullYear()===L}),[r,O,L]),J=S.useMemo(()=>{const K={};for(const z of M){const G=z.curso||"Sin curso";K[G]=(K[G]||0)+1}return K},[M]),V=S.useMemo(()=>Object.entries(J).sort(([K],[z])=>K.localeCompare(z,"es")).map(([K,z])=>({label:K,value:z})),[J]);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),l.jsx(z2e,{userId:t,reemplazos:r})]}),l.jsx(V2e,{data:V}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[l.jsx(K0,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):l.jsxs("form",{onSubmit:N,className:"space-y-8",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ec,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),l.jsx(_x,{label:"Nombre",icon:l.jsx(fg,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(_x,{label:"Asignatura",icon:l.jsx(Hd,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Wi.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(_x,{label:"Curso",icon:l.jsx(ec,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"curso",value:d.curso,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(_x,{label:"Día de ausencia",icon:l.jsx(Mu,{className:"h-5 w-5"}),children:l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:I,className:R,required:!0,disabled:w})}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx(G0,{className:"h-5 w-5 text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:P2e.map(K=>{const z=d.bloquesAfectados.includes(K);return l.jsx("button",{type:"button",onClick:()=>E(K),disabled:w,className:`${M2e} ${z?U2e:Q2e}`,"aria-pressed":z,children:K},K)})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ec,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),l.jsx(_x,{label:"Nombre",icon:l.jsx(fg,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(_x,{label:"Asignatura",icon:l.jsx(Hd,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Wi.map(K=>l.jsx("option",{value:K,children:K},K))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(Xi,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?l.jsxs(l.Fragment,{children:[l.jsx(K0,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):l.jsxs(l.Fragment,{children:[l.jsx(vh,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:j?l.jsx(K0,{className:"h-5 w-5 animate-spin"}):l.jsx(N4,{className:"h-5 w-5"})}),l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:K=>p(K.target.value),className:R,disabled:j})]})]}),i?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[l.jsx(K0,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(K=>l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:K},K))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(K=>l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(K.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.curso}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteAusente,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaAusente})]}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteReemplazante,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaReemplazante})]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.bloquesAfectados.join(", ")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${K.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(Xi,{className:"h-4 w-4"}),K.resultado]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsx("button",{onClick:()=>B(K.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:l.jsx(Eo,{className:"h-4 w-4"})})})]},K.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&l.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},G2e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=yt(Tr,"reemplazos"),r=zt(t,gr("fecha","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},K2e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=yt(Tr,"acompanamientos"),r=zt(t,gr("fecha","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},q2e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=yt(Tr,"calendar_events"),r=zt(t,gr("date","asc"));return fr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},NA=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),gp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=S.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=S.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},W2e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0),[c,u]=S.useState(null);return S.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=G2e(b=>{t(b),h()}),g=K2e(b=>{n(b),h()}),x=q2e(b=>{s(b),h()});return()=>{p(),g(),x()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},X2e=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=W2e(),[i,o]=S.useState(rw);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),S.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):rw)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(rw)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=S.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(k=>k.resultado==="Hora realizada").length,x=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(k,I)=>k.reduce((E,N)=>{const B=N[I];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),j=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:x,tasaCobertura:b,inasistenciasPorDocente:Object.entries(w).map(([k,I])=>({label:k,value:I})),reemplazosPorDocente:Object.entries(_).map(([k,I])=>({label:k,value:I})),inasistenciasPorCurso:Object.entries(j).map(([k,I])=>({label:k,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=S.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(I=>{I.criteria.forEach(E=>{g.set(E.name,I.domain)})});let x=0,b=0;const y={},w={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([E,N])=>{x+=N,b++,y[I.docente].total+=N,y[I.docente].count++;const B=g.get(E);B&&(w[B]||(w[B]={total:0,count:0}),w[B].total+=N,w[B].count++)})});const _=b>0?(x/b).toFixed(2):"N/A",j=Object.entries(y).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0})),k=Object.entries(w).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:_,desempenoPorDocente:j,desempenoPorDominio:k}},[r,i]),d=S.useMemo(()=>{const p={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const x of n)p.hasOwnProperty(x.type)&&p[x.type]++;const g=Object.entries(p).map(([x,b])=>({label:Nv[x].label,value:b}));return{totalEvaluaciones:p[dn.EVALUACION],totalActos:p[dn.ACTO],totalActividadesFocalizadas:p[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(NA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(NA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(NA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(NA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(gp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(gp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(gp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(gp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(NA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(NA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(gp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),l.jsx(gp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(NA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(NA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(NA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(NA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(gp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var x,b;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Nv[p.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((b=Nv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var $Q;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})($Q||($Q={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GQ;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(GQ||(GQ={}));var KQ;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(KQ||(KQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qQ=["user","model","function","system"];var WQ;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(WQ||(WQ={}));var XQ;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(XQ||(XQ={}));var YQ;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(YQ||(YQ={}));var JQ;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(JQ||(JQ={}));var aw;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(aw||(aw={}));var ZQ;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(ZQ||(ZQ={}));var eH;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(eH||(eH={}));var tH;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(tH||(tH={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Nx extends Jo{constructor(t,r){super(t),this.response=r}}class Tee extends Jo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class im extends Jo{}class Iee extends Jo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2e="https://generativelanguage.googleapis.com",J2e="v1beta",Z2e="0.24.1",eEe="genai-js";var hg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(hg||(hg={}));class tEe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||J2e;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Y2e}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function rEe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${eEe}/${Z2e}`),t.join(" ")}async function nEe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",rEe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new im(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new im(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new im(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function aEe(e,t,r,n,a,s){const i=new tEe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},lEe(s)),{method:"POST",headers:await nEe(i),body:a})}}async function H2(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await aEe(e,t,r,n,a,s);return sEe(o,c,i)}async function sEe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){iEe(a,e)}return n.ok||await oEe(n,e),n}function iEe(e,t){let r=e;throw r.name==="AbortError"?(r=new Iee(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Tee||e instanceof im||(r=new Jo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function oEe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new Tee(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function lEe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),i5(e.candidates[0]))throw new Nx(`${O0(e)}`,e);return cEe(e)}else if(e.promptFeedback)throw new Nx(`Text not available. ${O0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),i5(e.candidates[0]))throw new Nx(`${O0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),rH(e)[0]}else if(e.promptFeedback)throw new Nx(`Function call not available. ${O0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),i5(e.candidates[0]))throw new Nx(`${O0(e)}`,e);return rH(e)}else if(e.promptFeedback)throw new Nx(`Function call not available. ${O0(e)}`,e)},e}function cEe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function rH(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const uEe=[aw.RECITATION,aw.SAFETY,aw.LANGUAGE];function i5(e){return!!e.finishReason&&uEe.includes(e.finishReason)}function O0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];i5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Lw(e){return this instanceof Lw?(this.v=e,this):new Lw(e)}function dEe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,x){s.push([h,p,g,x])>1||o(h,p)})})}function o(h,p){try{c(n[h](p))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof Lw?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function AEe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=mEe(t),[n,a]=r.tee();return{stream:hEe(n),response:fEe(a)}}async function fEe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return RP(pEe(t));t.push(a)}}function hEe(e){return dEe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Lw(r.read());if(a)break;yield yield Lw(RP(n))}})}function mEe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new Jo("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(nH),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new Jo(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(nH)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new Iee("Request aborted when reading from the stream"):o=new Jo("Error reading from the stream"),o})}}})}function pEe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fee(e,t,r,n){const a=await H2(t,hg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return AEe(a)}async function Oee(e,t,r,n){const s=await(await H2(t,hg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:RP(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dee(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Mw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return gEe(t)}function gEe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new Jo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Jo("No content is provided for sending chat message.");return n?t:r}function xEe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new im("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Mw(e);n.contents=[s]}return{generateContentRequest:n}}function aH(e){let t;return e.contents?t=e:t={contents:[Mw(e)]},e.systemInstruction&&(t.systemInstruction=Dee(e.systemInstruction)),t}function vEe(e){return typeof e=="string"||Array.isArray(e)?{content:Mw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],bEe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function yEe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Jo(`First content should be with role 'user', got ${n}`);if(!qQ.includes(n))throw new Jo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(qQ)}`);if(!Array.isArray(a))throw new Jo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Jo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of sH)c in o&&(s[c]+=1);const i=bEe[n];for(const o of sH)if(!i.includes(o)&&s[o]>0)throw new Jo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function iH(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH="SILENT_ERROR";class wEe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(yEe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=Mw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Oee(this._apiKey,this.model,d,f)).then(p=>{var g;if(iH(p.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=O0(p.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=Mw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=Fee(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(oH)}).then(p=>p.response).then(p=>{if(iH(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=O0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==oH&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EEe(e,t,r,n){return(await H2(t,hg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CEe(e,t,r,n){return(await H2(t,hg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function _Ee(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await H2(t,hg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Dee(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=aH(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Oee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=aH(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Fee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new wEe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=xEe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return EEe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=vEe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return CEe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return _Ee(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Jo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new lH(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new im("Cached content must contain a `name` field.");if(!t.model)throw new im("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new im(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new lH(this.apiKey,s,n)}}const LP="horario_asignaciones",Pee="horarios_generados",NEe="usuarios",Ree=e=>{const t=e.data();return{id:e.id,...t}},SEe=e=>{const t=zt(yt(ft,LP));return fr(t,n=>{const a=n.docs.map(s=>Ree(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},kEe=async e=>{try{return(await vn(yt(ft,LP),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},jEe=async e=>{try{const t=sr(ft,LP,e);await za(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},cH=async e=>{try{const t=sr(ft,Pee,"global");await pi(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},BEe=e=>{const t=sr(ft,Pee,"global");return fr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},TEe=e=>{const t=zt(yt(ft,NEe),Dr("profile","==",Wt.PROFESORADO));return fr(t,n=>{const a=n.docs.map(s=>Ree(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},IEe=({horarios:e})=>Object.keys(e).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ks.map(t=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),l.jsx("tbody",{children:a5.map(t=>l.jsxs(nt.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+Ks.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),z6.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Ks.map(s=>{var o,c;const i=(c=(o=e[s])==null?void 0:o[t])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),FEe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState({curso:"",asignatura:"",profesor:""}),[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState(Ks[0]),[d,f]=S.useState(!1),[h,p]=S.useState(!0),[g,x]=S.useState(null),[b,y]=S.useState(null),[w,_]=S.useState(null),[j,k]=S.useState({asignatura:"",profesor:""}),[I,E]=S.useState("edicion"),[N,B]=S.useState("");S.useEffect(()=>{p(!0);const z=SEe(t),G=BEe(o),Y=TEe(te=>{const P=te.map(H=>H.nombreCompleto).sort();s(P),p(!1)});return()=>{z(),G(),Y()}},[]);const R=async z=>{if(z.preventDefault(),x(null),!r.curso||!r.asignatura||!r.profesor){x("Todos los campos de la asignación son obligatorios.");return}try{await kEe({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(G){x(G instanceof Error?G.message:"Error al guardar la asignación.")}},D=async z=>{try{await jEe(z)}catch(G){x(G instanceof Error?G.message:"Error al eliminar la asignación.")}},O=async()=>{if(e.length===0){x("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}f(!0),x(null),y(null);try{const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new cs(z),Y=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${a5.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(z6,null,2)}
                - Cursos del liceo: ${Ks.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(Mbe,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${N||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,Z=(await(await G.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Y)).response).text().replace(/^```json\s*|```\s*$/g,""),ae=JSON.parse(Z);await cH(ae),y("¡Horario generado y guardado con éxito!")}catch(z){console.error("Error al generar horario con IA:",z),x("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{f(!1)}},L=(z,G,Y)=>{_({dia:z,bloque:G}),k({asignatura:(Y==null?void 0:Y.asignatura)||"",profesor:(Y==null?void 0:Y.profesor)||""})},M=async()=>{if(!w)return;const{dia:z,bloque:G}=w,Y=JSON.parse(JSON.stringify(i));Y[c]||(Y[c]={}),Y[c][z]||(Y[c][z]={}),Y[c][z][G]={asignatura:j.asignatura||null,profesor:j.profesor||null};try{await cH(Y),_(null)}catch(te){x(te instanceof Error?te.message:"Error al guardar la edición.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>{const z=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),a5.map(G=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:G},G))]})}),l.jsx("tbody",{children:z6.map(({bloque:G,inicio:Y,fin:te})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:G}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${Y} - ${te}`})]}),a5.map(P=>{var Z;const H=(w==null?void 0:w.dia)===P&&(w==null?void 0:w.bloque)===G,X=(Z=z[P])==null?void 0:Z[G];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!H&&L(P,G,X),children:H?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:j.asignatura,onChange:ae=>k(le=>({...le,asignatura:ae.target.value})),className:J+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:j.profesor,onChange:ae=>k(le=>({...le,profesor:ae.target.value})),className:J+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>_(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:M,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):X!=null&&X.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:X.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",X.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${P}-${G}`)})]},G))})]})})},K=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),l.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:z=>n(G=>({...G,curso:z.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),Ks.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:z=>n(G=>({...G,asignatura:z.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),Wi.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:z=>n(G=>({...G,profesor:z.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:e.map(z=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[z.curso," - ",z.asignatura," - ",l.jsx("strong",{children:z.profesor})]}),l.jsx("button",{onClick:()=>D(z.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},z.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:N,onChange:z=>B(z.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:J})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:O,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&l.jsx("p",{className:"text-red-600",children:g}),b&&l.jsx("p",{className:"text-green-600",children:b})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:z=>u(z.target.value),className:J+" md:w-1/3",children:Ks.map(z=>l.jsx("option",{value:z,children:z},z))})]}),Object.keys(i).length>0?V():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>E("edicion"),className:`${I==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),l.jsx("button",{onClick:()=>E("global"),className:`${I==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),I==="edicion"?K():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(IEe,{horarios:i})]})]})},S4="acciones_pedagogicas",OEe=(e,t)=>{var a,s,i,o;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((o=(i=r.creadoTs)==null?void 0:i.toMillis)==null?void 0:o.call(i))??Date.now()}};async function DEe(){const e=[];try{const t=zt(yt(ft,S4),gr("creadoTs","desc"));(await Qn(t)).docs.forEach(n=>e.push(OEe(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function PEe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:ir.now()};await vn(yt(ft,S4),t)}async function REe(e,t){const r=sr(yt(ft,S4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await Kc(r,n)}async function LEe(e){const t=sr(yt(ft,S4),e);await za(t)}function Lee(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Lee(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function xn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Lee(e))&&(n&&(n+=" "),n+=t);return n}var $B={},GB={},uH;function MEe(){return uH||(uH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(GB)),GB}var KB={},dH;function Mee(){return dH||(dH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(KB)),KB}var qB={},AH;function Uee(){return AH||(AH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(qB)),qB}var WB={},fH;function MP(){return fH||(fH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(WB)),WB}var hH;function UP(){return hH||(hH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MEe(),r=Mee(),n=Uee(),a=MP();function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}($B)),$B}var XB,mH;function UEe(){return mH||(mH=1,XB=UP().get),XB}var QEe=UEe();const Em=_l(QEe);var YB={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pH;function HEe(){if(pH)return na;pH=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(k){if(typeof k=="object"&&k!==null){var I=k.$$typeof;switch(I){case t:switch(k=k.type,k){case c:case u:case n:case s:case a:case f:return k;default:switch(k=k&&k.$$typeof,k){case o:case d:case g:case p:case i:return k;default:return I}}case r:return I}}}function j(k){return _(k)===u}return na.AsyncMode=c,na.ConcurrentMode=u,na.ContextConsumer=o,na.ContextProvider=i,na.Element=t,na.ForwardRef=d,na.Fragment=n,na.Lazy=g,na.Memo=p,na.Portal=r,na.Profiler=s,na.StrictMode=a,na.Suspense=f,na.isAsyncMode=function(k){return j(k)||_(k)===c},na.isConcurrentMode=j,na.isContextConsumer=function(k){return _(k)===o},na.isContextProvider=function(k){return _(k)===i},na.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},na.isForwardRef=function(k){return _(k)===d},na.isFragment=function(k){return _(k)===n},na.isLazy=function(k){return _(k)===g},na.isMemo=function(k){return _(k)===p},na.isPortal=function(k){return _(k)===r},na.isProfiler=function(k){return _(k)===s},na.isStrictMode=function(k){return _(k)===a},na.isSuspense=function(k){return _(k)===f},na.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===u||k===s||k===a||k===f||k===h||typeof k=="object"&&k!==null&&(k.$$typeof===g||k.$$typeof===p||k.$$typeof===i||k.$$typeof===o||k.$$typeof===d||k.$$typeof===b||k.$$typeof===y||k.$$typeof===w||k.$$typeof===x)},na.typeOf=_,na}var gH;function VEe(){return gH||(gH=1,YB.exports=HEe()),YB.exports}var zEe=VEe(),Yi=e=>e===0?0:e>0?1:-1,Qc=e=>typeof e=="number"&&e!=+e,Dp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,dr=e=>(typeof e=="number"||e instanceof Number)&&!Qc(e),rf=e=>dr(e)||typeof e=="string",$Ee=0,Uw=e=>{var t=++$Ee;return"".concat(e||"").concat(t)},El=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dr(t)&&typeof t!="string")return n;var s;if(Dp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Qc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Qee=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},cv=(e,t)=>dr(e)&&dr(t)?r=>e+r*(t-e):()=>t;function Sx(e,t,r){return dr(e)&&dr(t)?e+r*(t-e):t}function GEe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Em(n,t))===r)}var ks=e=>e===null||typeof e>"u",V2=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),KEe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function QP(e){if(typeof e!="string")return!1;var t=KEe;return t.includes(e)}var qEe=["viewBox","children"],xH=["points","pathLength"],JB={svg:qEe,polygon:xH,polyline:xH},HP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{QP(a)&&(n[a]=s=>r[a](r,s))}),n},WEe=(e,t,r)=>n=>(e(t,r,n),null),Rg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];QP(a)&&typeof s=="function"&&(n||(n={}),n[a]=WEe(s,t,r))}),n},XEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Hee(e){if(typeof e!="string")return!1;var t=XEe;return t.includes(e)}function il(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Hee(n)});return Object.fromEntries(t)}var vH=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",bH=null,ZB=null,Vee=e=>{if(e===bH&&Array.isArray(ZB))return ZB;var t=[];return S.Children.forEach(e,r=>{ks(r)||(zEe.isFragment(r)?t=t.concat(Vee(r.props.children)):t.push(r))}),ZB=t,bH=e,t};function z2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>vH(a)):n=[vH(t)],Vee(e).forEach(a=>{var s=Em(a,"type.displayName")||Em(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var YEe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(JB==null?void 0:JB[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||Hee(t)),c=!!r&&QP(t);return i||o||c},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;YEe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},JEe=["children","width","height","viewBox","className","style","title","desc"];function q6(){return q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q6.apply(null,arguments)}function ZEe(e,t){if(e==null)return{};var r,n,a=eCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VP=S.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=e,d=ZEe(e,JEe),f=s||{width:n,height:a,x:0,y:0},h=xn("recharts-surface",i);return S.createElement("svg",q6({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),tCe=["children","className"];function W6(){return W6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W6.apply(null,arguments)}function rCe(e,t){if(e==null)return{};var r,n,a=nCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var us=S.forwardRef((e,t)=>{var{children:r,className:n}=e,a=rCe(e,tCe),s=xn("recharts-layer",n);return S.createElement("g",W6({className:s},Xn(a,!0),{ref:t}),r)}),zP=_Y(),zee=S.createContext(null),aCe=()=>S.useContext(zee);function Oa(e){return function(){return e}}const $ee=Math.cos,uN=Math.sin,$d=Math.sqrt,dN=Math.PI,k4=2*dN,X6=Math.PI,Y6=2*X6,Ep=1e-6,sCe=Y6-Ep;function Gee(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function iCe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Gee;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class oCe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Gee:iCe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Ep)if(!(Math.abs(f*c-u*d)>Ep)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,x=c*c+u*u,b=p*p+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((X6-Math.acos((x+h-b)/(2*y*w)))/2),j=_/w,k=_/y;Math.abs(j-1)>Ep&&this._append`L${t+j*d},${r+j*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+k*c},${this._y1=r+k*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ep||Math.abs(this._y1-d)>Ep)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Y6+Y6),h>sCe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Ep&&this._append`A${n},${n},0,${+(h>=X6)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function $P(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new oCe(t)}function GP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Kee(e){this._context=e}Kee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function j4(e){return new Kee(e)}function qee(e){return e[0]}function Wee(e){return e[1]}function Xee(e,t){var r=Oa(!0),n=null,a=j4,s=null,i=$P(o);e=typeof e=="function"?e:e===void 0?qee:Oa(e),t=typeof t=="function"?t:t===void 0?Wee:Oa(t);function o(c){var u,d=(c=GP(c)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function FC(e,t,r){var n=null,a=Oa(!0),s=null,i=j4,o=null,c=$P(u);e=typeof e=="function"?e:e===void 0?qee:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Wee:Oa(+r);function u(f){var h,p,g,x=(f=GP(f)).length,b,y=!1,w,_=new Array(x),j=new Array(x);for(s==null&&(o=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(_[g],j[g]);o.lineEnd(),o.areaEnd()}y&&(_[h]=+e(b,h,f),j[h]=+t(b,h,f),o.point(n?+n(b,h,f):_[h],r?+r(b,h,f):j[h]))}if(w)return o=null,w+""||null}function d(){return Xee().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Yee{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function lCe(e){return new Yee(e,!0)}function cCe(e){return new Yee(e,!1)}const KP={draw(e,t){const r=$d(t/dN);e.moveTo(r,0),e.arc(0,0,r,0,k4)}},uCe={draw(e,t){const r=$d(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Jee=$d(1/3),dCe=Jee*2,ACe={draw(e,t){const r=$d(t/dCe),n=r*Jee;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},fCe={draw(e,t){const r=$d(t),n=-r/2;e.rect(n,n,r,r)}},hCe=.8908130915292852,Zee=uN(dN/10)/uN(7*dN/10),mCe=uN(k4/10)*Zee,pCe=-$ee(k4/10)*Zee,gCe={draw(e,t){const r=$d(t*hCe),n=mCe*r,a=pCe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=k4*s/5,o=$ee(i),c=uN(i);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},e3=$d(3),xCe={draw(e,t){const r=-$d(t/(e3*3));e.moveTo(0,r*2),e.lineTo(-e3*r,-r),e.lineTo(e3*r,-r),e.closePath()}},xu=-.5,vu=$d(3)/2,J6=1/$d(12),vCe=(J6/2+1)*3,bCe={draw(e,t){const r=$d(t/vCe),n=r/2,a=r*J6,s=n,i=r*J6+r,o=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,c),e.lineTo(xu*n-vu*a,vu*n+xu*a),e.lineTo(xu*s-vu*i,vu*s+xu*i),e.lineTo(xu*o-vu*c,vu*o+xu*c),e.lineTo(xu*n+vu*a,xu*a-vu*n),e.lineTo(xu*s+vu*i,xu*i-vu*s),e.lineTo(xu*o+vu*c,xu*c-vu*o),e.closePath()}};function yCe(e,t){let r=null,n=$P(a);e=typeof e=="function"?e:Oa(e||KP),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function AN(){}function fN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ete(e){this._context=e}ete.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wCe(e){return new ete(e)}function tte(e){this._context=e}tte.prototype={areaStart:AN,areaEnd:AN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ECe(e){return new tte(e)}function rte(e){this._context=e}rte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:fN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CCe(e){return new rte(e)}function nte(e){this._context=e}nte.prototype={areaStart:AN,areaEnd:AN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _Ce(e){return new nte(e)}function yH(e){return e<0?-1:1}function wH(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(yH(s)+yH(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function EH(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function t3(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function hN(e){this._context=e}hN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:t3(this,this._t0,EH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,t3(this,EH(this,r=wH(this,e,t)),r);break;default:t3(this,this._t0,r=wH(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function ate(e){this._context=new ste(e)}(ate.prototype=Object.create(hN.prototype)).point=function(e,t){hN.prototype.point.call(this,t,e)};function ste(e){this._context=e}ste.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function NCe(e){return new hN(e)}function SCe(e){return new ate(e)}function ite(e){this._context=e}ite.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=CH(e),a=CH(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CH(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function kCe(e){return new ite(e)}function B4(e,t){this._context=e,this._t=t}B4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function jCe(e){return new B4(e,.5)}function BCe(e){return new B4(e,0)}function TCe(e){return new B4(e,1)}function e1(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Z6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ICe(e,t){return e[t]}function FCe(e){const t=[];return t.key=e,t}function OCe(){var e=Oa([]),t=Z6,r=e1,n=ICe;function a(s){var i=Array.from(e.apply(this,arguments),FCe),o,c=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=GP(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?Z6:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??e1,a):r},a}function DCe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}e1(e,t)}}function PCe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}e1(e,t)}}function RCe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var x=e[t[g]],b=x[n][1]||0,y=x[n-1][1]||0;p+=b-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,e1(e,t)}}var LCe=["type","size","sizeType"];function eF(){return eF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eF.apply(null,arguments)}function _H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_H(Object(r),!0).forEach(function(n){MCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_H(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MCe(e,t,r){return(t=UCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UCe(e){var t=QCe(e,"string");return typeof t=="symbol"?t:t+""}function QCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HCe(e,t){if(e==null)return{};var r,n,a=VCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ote={symbolCircle:KP,symbolCross:uCe,symbolDiamond:ACe,symbolSquare:fCe,symbolStar:gCe,symbolTriangle:xCe,symbolWye:bCe},zCe=Math.PI/180,$Ce=e=>{var t="symbol".concat(V2(e));return ote[t]||KP},GCe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*zCe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},KCe=(e,t)=>{ote["symbol".concat(V2(e))]=t},qP=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=HCe(e,LCe),s=NH(NH({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=$Ce(t),h=yCe().type(f).size(GCe(r,n,t));return h()},{className:o,cx:c,cy:u}=s,d=Xn(s,!0);return c===+c&&u===+u&&r===+r?S.createElement("path",eF({},d,{className:xn("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};qP.registerSymbol=KCe;function tF(){return tF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tF.apply(null,arguments)}function SH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SH(Object(r),!0).forEach(function(n){WP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WP(e,t,r){return(t=WCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WCe(e){var t=XCe(e,"string");return typeof t=="symbol"?t:t+""}function XCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bu=32;class XP extends S.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=bu/2,s=bu/6,i=bu/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return S.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:bu,y2:a,className:"recharts-legend-icon"});if(c==="line")return S.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(bu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return S.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(bu/8,"h").concat(bu,"v").concat(bu*3/4,"h").concat(-bu,"z"),className:"recharts-legend-icon"});if(S.isValidElement(t.legendIcon)){var u=qCe({},t);return delete u.legendIcon,S.cloneElement(t.legendIcon,u)}return S.createElement(qP,{fill:o,cx:a,cy:a,size:bu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:bu,height:bu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,p=xn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return S.createElement("li",tF({className:p,style:c,key:"legend-item-".concat(f)},Rg(this.props,d,f)),S.createElement(VP,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),S.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return S.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}WP(XP,"displayName","Legend");WP(XP,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var r3={},n3={},kH;function YCe(){return kH||(kH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(n3)),n3}var a3={},jH;function T4(){return jH||(jH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(a3)),a3}var s3={},i3={},o3={},BH;function JCe(){return BH||(BH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(o3)),o3}var TH;function YP(){return TH||(TH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JCe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(i3)),i3}var l3={},IH;function ZCe(){return IH||(IH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(l3)),l3}var FH;function e_e(){return FH||(FH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YP(),r=ZCe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(s3)),s3}var c3={},u3={},OH;function t_e(){return OH||(OH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(u3)),u3}var d3={},A3={},f3={},h3={},DH;function lte(){return DH||(DH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(h3)),h3}var m3={},PH;function cte(){return PH||(PH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(m3)),m3}var p3={},RH;function JP(){return RH||(RH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(p3)),p3}var LH;function r_e(){return LH||(LH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZP(),r=lte(),n=cte(),a=JP();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(x,b,y,w,_,j){const k=p(x,b,y,w,_,j);return k!==void 0?!!k:i(x,b,g,j)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return c(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<x.length;b++){const y=x[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,b]of h.entries()){const y=f.get(x);if(p(y,b,x,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let b=0;b<h.length;b++){const y=h[b];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const j=f[_];let k=!1;if(p(j,y,b,f,h,g)&&(k=!0),k){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(f3)),f3}var MH;function ZP(){return MH||(MH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r_e();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(A3)),A3}var g3={},x3={},v3={},UH;function ute(){return UH||(UH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(v3)),v3}var b3={},QH;function eR(){return QH||(QH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(b3)),b3}var y3={},HH;function tR(){return HH||(HH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",x="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",N="[object BigInt64Array]",B="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=N,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=x,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(y3)),y3}var w3={},VH;function n_e(){return VH||(VH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(w3)),w3}var zH;function dte(){return zH||(zH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ute(),r=eR(),n=tR(),a=cte(),s=n_e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,p);if(x!=null)return x;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,w]of d)b.set(y,o(w,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),c(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),c(b,d,h,p,g),b}return d}function c(d,f,h=d,p,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<x.length;b++){const y=x[b],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c}(x3)),x3}var $H;function a_e(){return $H||($H=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dte();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(g3)),g3}var GH;function s_e(){return GH||(GH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZP(),r=a_e();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(d3)),d3}var E3={},C3={},_3={},KH;function i_e(){return KH||(KH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dte(),r=tR();function n(a,s){return t.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(_3)),_3}var qH;function o_e(){return qH||(qH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i_e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(C3)),C3}var N3={},S3={},WH;function Ate(){return WH||(WH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(S3)),S3}var k3={},XH;function l_e(){return XH||(XH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eR();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(k3)),k3}var YH;function c_e(){return YH||(YH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mee(),r=Ate(),n=l_e(),a=MP();function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(N3)),N3}var JH;function u_e(){return JH||(JH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZP(),r=Uee(),n=o_e(),a=UP(),s=c_e();function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(E3)),E3}var ZH;function rR(){return ZH||(ZH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T4(),r=t_e(),n=s_e(),a=u_e();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(c3)),c3}var eV;function d_e(){return eV||(eV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YCe(),r=T4(),n=e_e(),a=rR();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(r3)),r3}var j3,tV;function A_e(){return tV||(tV=1,j3=d_e().uniqBy),j3}var f_e=A_e();const rV=_l(f_e);function fte(e,t,r){return t===!0?rV(e,r):typeof t=="function"?rV(e,t):e}var B3={exports:{}},T3={},I3={exports:{}},F3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nV;function h_e(){if(nV)return F3;nV=1;var e=j1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),x=g[0].inst,b=g[1];return s(function(){x.value=p,x.getSnapshot=h,c(x)&&b({inst:x})},[f,p,h]),a(function(){return c(x)&&b({inst:x}),f(function(){c(x)&&b({inst:x})})},[f]),i(p),p}function c(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return F3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,F3}var aV;function m_e(){return aV||(aV=1,I3.exports=h_e()),I3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sV;function p_e(){if(sV)return T3;sV=1;var e=j1(),t=m_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return T3.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function y(I){if(!w){if(w=!0,_=I,I=h(I),p!==void 0&&x.hasValue){var E=x.value;if(p(E,I))return j=E}return j=I}if(E=j,n(_,I))return E;var N=h(I);return p!==void 0&&p(E,N)?(_=I,E):(_=I,j=N)}var w=!1,_,j,k=f===void 0?null:f;return[function(){return y(d())},k===null?void 0:function(){return y(k())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},T3}var iV;function g_e(){return iV||(iV=1,B3.exports=p_e()),B3.exports}var hte=g_e();const x_e=_l(hte);var nR=S.createContext(null),v_e=e=>e,$a=()=>{var e=S.useContext(nR);return e?e.store.dispatch:v_e},o5=()=>{},b_e=()=>o5,y_e=(e,t)=>e===t;function or(e){var t=S.useContext(nR);return hte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:b_e,t?t.store.getState:o5,t?t.store.getState:o5,t?e:o5,y_e)}function w_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function E_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function C_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var oV=e=>Array.isArray(e)?e:[e];function __e(e){const t=Array.isArray(e[0])?e[0]:e;return C_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function N_e(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var S_e=class{constructor(e){this.value=e}deref(){return this.value}},k_e=typeof WeakRef<"u"?WeakRef:S_e,j_e=0,lV=1;function OC(){return{s:j_e,v:void 0,o:null,p:null}}function mte(e,t={}){let r=OC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const b=x.get(g);b===void 0?(o=OC(),x.set(g,o)):o=b}else{let x=o.p;x===null&&(o.p=x=new Map);const b=x.get(g);b===void 0?(o=OC(),x.set(g,o)):o=b}}const u=o;let d;if(o.s===lV)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new k_e(d):d}return u.s=lV,u.v=d,d}return i.clearCache=()=>{r=OC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function B_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),w_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=mte,argsMemoizeOptions:g=[]}=d,x=oV(h),b=oV(g),y=__e(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=p(function(){i++;const k=N_e(y,arguments);return o=w.apply(null,k),o},...b);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ut=B_e(mte),T_e=Object.assign((e,t=ut)=>{E_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>T_e}),O3={},D3={},P3={},cV;function I_e(){return cV||(cV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(P3)),P3}var R3={},L3={},uV;function pte(){return uV||(uV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(L3)),L3}var dV;function F_e(){return dV||(dV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pte(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(R3)),R3}var AV;function O_e(){return AV||(AV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I_e(),r=F_e(),n=MP();function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let x=p;for(let b=0;b<g.length&&x!=null;++b)x=x[g[b]];return x},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let x=0;x<f.length;x++){const b=t.compareValues(p.criteria[x],g.criteria[x],o[x]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(D3)),D3}var M3={},fV;function D_e(){return fV||(fV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(M3)),M3}var U3={},hV;function gte(){return hV||(hV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ate(),r=YP(),n=lte(),a=JP();function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}e.isIterateeCall=s}(U3)),U3}var mV;function P_e(){return mV||(mV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O_e(),r=D_e(),n=gte();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(O3)),O3}var Q3,pV;function R_e(){return pV||(pV=1,Q3=P_e().sortBy),Q3}var L_e=R_e();const I4=_l(L_e);var xte=e=>e.legend.settings,M_e=e=>e.legend.size,U_e=e=>e.legend.payload,Q_e=ut([U_e,xte],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?I4(n,r):n});function H_e(){return or(Q_e)}var DC=1;function vte(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>DC||Math.abs(i.left-t.left)>DC||Math.abs(i.top-t.top)>DC||Math.abs(i.width-t.width)>DC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function fo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var V_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",gV=V_e,H3=()=>Math.random().toString(36).substring(7).split("").join("."),z_e={INIT:`@@redux/INIT${H3()}`,REPLACE:`@@redux/REPLACE${H3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${H3()}`},mN=z_e;function aR(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bte(e,t,r){if(typeof e!="function")throw new Error(fo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(fo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(fo(1));return r(bte)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(c)throw new Error(fo(3));return a}function f(b){if(typeof b!="function")throw new Error(fo(4));if(c)throw new Error(fo(5));let y=!0;u();const w=o++;return i.set(w,b),function(){if(y){if(c)throw new Error(fo(6));y=!1,u(),i.delete(w),s=null}}}function h(b){if(!aR(b))throw new Error(fo(7));if(typeof b.type>"u")throw new Error(fo(8));if(typeof b.type!="string")throw new Error(fo(17));if(c)throw new Error(fo(9));try{c=!0,a=n(a,b)}finally{c=!1}return(s=i).forEach(w=>{w()}),b}function p(b){if(typeof b!="function")throw new Error(fo(10));n=b,h({type:mN.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(fo(11));function w(){const j=y;j.next&&j.next(d())}return w(),{unsubscribe:b(w)}},[gV](){return this}}}return h({type:mN.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[gV]:g}}function $_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:mN.INIT})>"u")throw new Error(fo(12));if(typeof r(void 0,{type:mN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fo(13))})}function yte(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{$_e(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(fo(14));u[f]=g,c=c||g!==p}return c=c||n.length!==Object.keys(i).length,c?u:i}}function pN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function G_e(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(fo(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(i));return s=pN(...o)(a.dispatch),{...a,dispatch:s}}}function wte(e){return aR(e)&&"type"in e&&typeof e.type=="string"}var Ete=Symbol.for("immer-nothing"),xV=Symbol.for("immer-draftable"),Hc=Symbol.for("immer-state");function Ed(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var t1=Object.getPrototypeOf;function mg(e){return!!e&&!!e[Hc]}function bh(e){var t;return e?Cte(e)||Array.isArray(e)||!!e[xV]||!!((t=e.constructor)!=null&&t[xV])||O4(e)||D4(e):!1}var K_e=Object.prototype.constructor.toString();function Cte(e){if(!e||typeof e!="object")return!1;const t=t1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===K_e}function gN(e,t){F4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function F4(e){const t=e[Hc];return t?t.type_:Array.isArray(e)?1:O4(e)?2:D4(e)?3:0}function rF(e,t){return F4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _te(e,t,r){const n=F4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function q_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function O4(e){return e instanceof Map}function D4(e){return e instanceof Set}function Cp(e){return e.copy_||e.base_}function nF(e,t){if(O4(e))return new Map(e);if(D4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Cte(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Hc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(t1(e),n)}else{const n=t1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function sR(e,t=!1){return P4(e)||mg(e)||!bh(e)||(F4(e)>1&&(e.set=e.add=e.clear=e.delete=W_e),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>sR(n,!0))),e}function W_e(){Ed(2)}function P4(e){return Object.isFrozen(e)}var X_e={};function pg(e){const t=X_e[e];return t||Ed(0,e),t}var Qw;function Nte(){return Qw}function Y_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vV(e,t){t&&(pg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function aF(e){sF(e),e.drafts_.forEach(J_e),e.drafts_=null}function sF(e){e===Qw&&(Qw=e.parent_)}function bV(e){return Qw=Y_e(Qw,e)}function J_e(e){const t=e[Hc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yV(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Hc].modified_&&(aF(t),Ed(4)),bh(e)&&(e=xN(t,e),t.parent_||vN(t,e)),t.patches_&&pg("Patches").generateReplacementPatches_(r[Hc].base_,e,t.patches_,t.inversePatches_)):e=xN(t,r,[]),aF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ete?e:void 0}function xN(e,t,r){if(P4(t))return t;const n=t[Hc];if(!n)return gN(t,(a,s)=>wV(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return vN(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),gN(s,(o,c)=>wV(e,n,a,o,c,r,i)),vN(e,a,!1),r&&e.patches_&&pg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function wV(e,t,r,n,a,s,i){if(mg(a)){const o=s&&t&&t.type_!==3&&!rF(t.assigned_,n)?s.concat(n):void 0,c=xN(e,a,o);if(_te(r,n,c),mg(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(bh(a)&&!P4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xN(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&vN(e,a)}}function vN(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sR(t,r)}function Z_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Nte(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=iR;r&&(a=[n],s=Hw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var iR={get(e,t){if(t===Hc)return e;const r=Cp(e);if(!rF(r,t))return e5e(e,r,t);const n=r[t];return e.finalized_||!bh(n)?n:n===V3(e.base_,t)?(z3(e),e.copy_[t]=oF(n,e)):n},has(e,t){return t in Cp(e)},ownKeys(e){return Reflect.ownKeys(Cp(e))},set(e,t,r){const n=Ste(Cp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=V3(Cp(e),t),s=a==null?void 0:a[Hc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(q_e(r,a)&&(r!==void 0||rF(e.base_,t)))return!0;z3(e),iF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return V3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,z3(e),iF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Cp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ed(11)},getPrototypeOf(e){return t1(e.base_)},setPrototypeOf(){Ed(12)}},Hw={};gN(iR,(e,t)=>{Hw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Hw.deleteProperty=function(e,t){return Hw.set.call(this,e,t,void 0)};Hw.set=function(e,t,r){return iR.set.call(this,e[0],t,r,e[0])};function V3(e,t){const r=e[Hc];return(r?Cp(r):e)[t]}function e5e(e,t,r){var a;const n=Ste(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Ste(e,t){if(!(t in e))return;let r=t1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=t1(r)}}function iF(e){e.modified_||(e.modified_=!0,e.parent_&&iF(e.parent_))}function z3(e){e.copy_||(e.copy_=nF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var t5e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ed(6),n!==void 0&&typeof n!="function"&&Ed(7);let a;if(bh(t)){const s=bV(this),i=oF(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?aF(s):sF(s)}return vV(s,n),yV(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Ete&&(a=void 0),this.autoFreeze_&&sR(a,!0),n){const s=[],i=[];pg("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else Ed(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bh(e)||Ed(8),mg(e)&&(e=oh(e));const t=bV(this),r=oF(e,void 0);return r[Hc].isManual_=!0,sF(t),r}finishDraft(e,t){const r=e&&e[Hc];(!r||!r.isManual_)&&Ed(9);const{scope_:n}=r;return vV(n,t),yV(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=pg("Patches").applyPatches_;return mg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function oF(e,t){const r=O4(e)?pg("MapSet").proxyMap_(e,t):D4(e)?pg("MapSet").proxySet_(e,t):Z_e(e,t);return(t?t.scope_:Nte()).drafts_.push(r),r}function oh(e){return mg(e)||Ed(10,e),kte(e)}function kte(e){if(!bh(e)||P4(e))return e;const t=e[Hc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=nF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=nF(e,!0);return gN(r,(n,a)=>{_te(r,n,kte(a))}),t&&(t.finalized_=!1),r}var Vc=new t5e,jte=Vc.produce;Vc.produceWithPatches.bind(Vc);Vc.setAutoFreeze.bind(Vc);Vc.setUseStrictShallowCopy.bind(Vc);Vc.applyPatches.bind(Vc);Vc.createDraft.bind(Vc);Vc.finishDraft.bind(Vc);function Bte(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var r5e=Bte(),n5e=Bte,a5e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pN:pN.apply(null,arguments)};function Hu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Mc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>wte(n)&&n.type===e,r}var Tte=class Oy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Oy.prototype)}static get[Symbol.species](){return Oy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Oy(...t[0].concat(this)):new Oy(...t.concat(this))}};function EV(e){return bh(e)?jte(e,()=>{}):e}function PC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function s5e(e){return typeof e=="boolean"}var i5e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new Tte;return r&&(s5e(r)?i.push(r5e):i.push(n5e(r.extraArgument))),i},o5e="RTK_autoBatch",CV=e=>t=>{setTimeout(t,e)},l5e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:CV(10):e.type==="callback"?e.queueNotification:CV(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[o5e]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},c5e=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Tte(e);return n&&a.push(l5e(typeof n=="object"?n:void 0)),a};function u5e(e){const t=i5e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(aR(r))o=yte(r);else throw new Error(Mc(1));let c;typeof n=="function"?c=n(t):c=t();let u=pN;a&&(u=a5e({trace:!1,...typeof a=="object"&&a}));const d=G_e(...c),f=c5e(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return bte(o,s,p)}function Ite(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Mc(28));if(o in t)throw new Error(Mc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function d5e(e){return typeof e=="function"}function A5e(e,t){let[r,n,a]=Ite(t),s;if(d5e(e))s=()=>EV(e());else{const o=EV(e);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(mg(d)){const p=f(d,c);return p===void 0?d:p}else{if(bh(d))return jte(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var f5e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",h5e=(e=21)=>{let t="",r=e;for(;r--;)t+=f5e[Math.random()*64|0];return t},m5e=Symbol.for("rtk-slice-createasyncthunk");function p5e(e,t){return`${e}/${t}`}function g5e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[m5e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Mc(11));const o=(typeof a.reducers=="function"?a.reducers(v5e()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,k){const I=typeof j=="string"?j:j.type;if(!I)throw new Error(Mc(12));if(I in u.sliceCaseReducersByType)throw new Error(Mc(13));return u.sliceCaseReducersByType[I]=k,d},addMatcher(j,k){return u.sliceMatchers.push({matcher:j,reducer:k}),d},exposeAction(j,k){return u.actionCreators[j]=k,d},exposeCaseReducer(j,k){return u.sliceCaseReducersByName[j]=k,d}};c.forEach(j=>{const k=o[j],I={reducerName:j,type:p5e(s,j),createNotation:typeof a.reducers=="function"};y5e(k)?E5e(I,k,d,t):b5e(I,k,d)});function f(){const[j={},k=[],I=void 0]=typeof a.extraReducers=="function"?Ite(a.extraReducers):[a.extraReducers],E={...j,...u.sliceCaseReducersByType};return A5e(a.initialState,N=>{for(let B in E)N.addCase(B,E[B]);for(let B of u.sliceMatchers)N.addMatcher(B.matcher,B.reducer);for(let B of k)N.addMatcher(B.matcher,B.reducer);I&&N.addDefaultCase(I)})}const h=j=>j,p=new Map,g=new WeakMap;let x;function b(j,k){return x||(x=f()),x(j,k)}function y(){return x||(x=f()),x.getInitialState()}function w(j,k=!1){function I(N){let B=N[j];return typeof B>"u"&&k&&(B=PC(g,I,y)),B}function E(N=h){const B=PC(p,k,()=>new WeakMap);return PC(B,N,()=>{const R={};for(const[D,O]of Object.entries(a.selectors??{}))R[D]=x5e(O,N,()=>PC(g,N,y),k);return R})}return{reducerPath:j,getSelectors:E,get selectors(){return E(I)},selectSlice:I}}const _={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(j,{reducerPath:k,...I}={}){const E=k??i;return j.inject({reducerPath:E,reducer:b},I),{..._,...w(E,!0)}}};return _}}function x5e(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var qc=g5e();function v5e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function b5e({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!w5e(n))throw new Error(Mc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Hu(e,i):Hu(e))}function y5e(e){return e._reducerDefinitionType==="asyncThunk"}function w5e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function E5e({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Mc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||RC,pending:o||RC,rejected:c||RC,settled:u||RC})}function RC(){}var C5e="task",Fte="listener",Ote="completed",oR="cancelled",_5e=`task-${oR}`,N5e=`task-${Ote}`,lF=`${Fte}-${oR}`,S5e=`${Fte}-${Ote}`,R4=class{constructor(e){mB(this,"name","TaskAbortError");mB(this,"message");this.code=e,this.message=`${C5e} ${oR} (reason: ${e})`}},lR=(e,t)=>{if(typeof e!="function")throw new TypeError(Mc(32))},bN=()=>{},Dte=(e,t=bN)=>(e.catch(t),e),Pte=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Kp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},qp=e=>{if(e.aborted){const{reason:t}=e;throw new R4(t)}};function Rte(e,t){let r=bN;return new Promise((n,a)=>{const s=()=>a(new R4(e.reason));if(e.aborted){s();return}r=Pte(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=bN})}var k5e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof R4?"cancelled":"rejected",error:r}}finally{t==null||t()}},yN=e=>t=>Dte(Rte(e,t).then(r=>(qp(e),r))),Lte=e=>{const t=yN(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Sv}=Object,_V={},L4="listenerMiddleware",j5e=(e,t)=>{const r=n=>Pte(e,()=>Kp(n,e.reason));return(n,a)=>{lR(n);const s=new AbortController;r(s);const i=k5e(async()=>{qp(e),qp(s.signal);const o=await n({pause:yN(s.signal),delay:Lte(s.signal),signal:s.signal});return qp(s.signal),o},()=>Kp(s,N5e));return a!=null&&a.autoJoin&&t.push(i.catch(bN)),{result:yN(e)(i),cancel(){Kp(s,_5e)}}}},B5e=(e,t)=>{const r=async(n,a)=>{qp(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Rte(t,Promise.race(o));return qp(t),c}finally{s()}};return(n,a)=>Dte(r(n,a))},Mte=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Hu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Mc(21));return lR(s),{predicate:a,type:t,effect:s}},Ute=Sv(e=>{const{type:t,predicate:r,effect:n}=Mte(e);return{id:h5e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Mc(22))}}},{withTypes:()=>Ute}),NV=(e,t)=>{const{type:r,effect:n,predicate:a}=Mte(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},cF=e=>{e.pending.forEach(t=>{Kp(t,lF)})},T5e=e=>()=>{e.forEach(cF),e.clear()},SV=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Qte=Sv(Hu(`${L4}/add`),{withTypes:()=>Qte}),I5e=Hu(`${L4}/removeAll`),Hte=Sv(Hu(`${L4}/remove`),{withTypes:()=>Hte}),F5e=(...e)=>{console.error(`${L4}/error`,...e)},$2=(e={})=>{const t=new Map,{extra:r,onError:n=F5e}=e;lR(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&cF(d)}),s=d=>{const f=NV(t,d)??Ute(d);return a(f)};Sv(s,{withTypes:()=>s});const i=d=>{const f=NV(t,d);return f&&(f.unsubscribe(),d.cancelActive&&cF(f)),!!f};Sv(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,x=B5e(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Sv({},h,{getOriginalState:p,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Lte(g.signal),pause:yN(g.signal),extra:r,signal:g.signal,fork:j5e(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(Kp(y,lF),_.delete(y))})},cancel:()=>{Kp(g,lF),d.pending.delete(g)},throwIfCancelled:()=>{qp(g.signal)}})))}catch(y){y instanceof R4||SV(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Kp(g,S5e),d.pending.delete(g)}},c=T5e(t);return{middleware:d=>f=>h=>{if(!wte(h))return f(h);if(Qte.match(h))return s(h.payload);if(I5e.match(h)){c();return}if(Hte.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===_V)throw new Error(Mc(23));return p};let x;try{if(x=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,b,p)}catch(j){_=!1,SV(n,j,{raisedBy:"predicate"})}_&&o(w,h,d,g)}}}finally{p=_V}return x},startListening:s,stopListening:i,clearListeners:c}};function Mc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var O5e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Vte=qc({name:"chartLayout",initialState:O5e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:D5e,setLayout:P5e,setChartSize:R5e,setScale:L5e}=Vte.actions,M5e=Vte.reducer;function kV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kV(Object(r),!0).forEach(function(n){U5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U5e(e,t,r){return(t=Q5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q5e(e){var t=H5e(e,"string");return typeof t=="symbol"?t:t+""}function H5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wN=Math.PI/180,V5e=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-wN*n)*r,y:t+Math.sin(-wN*n)*r}),zte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},z5e=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},$5e=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=z5e({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:V5e(c),angleInRadian:c}},G5e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},K5e=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},q5e=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=$5e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=G5e(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?jV(jV({},t),{},{radius:a,angle:K5e(d,t)}):null},$te=e=>!S.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Gte(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function BV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BV(Object(r),!0).forEach(function(n){W5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W5e(e,t,r){return(t=X5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X5e(e){var t=Y5e(e,"string");return typeof t=="symbol"?t:t+""}function Y5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return ks(e)||ks(t)?r:rf(t)?Em(e,t,r):typeof t=="function"?t(e):r}var J5e=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Yi(d-u)!==Yi(f-d)){var p=[];if(Yi(f-d)===Yi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];p[0]=Math.min(d,(x+d)/2),p[1]=Math.max(d,(x+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var _=0;_<o;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:i}=t[_]);break}}return i},Z5e=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&dr(e[s]))return Bu(Bu({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&dr(e[i]))return Bu(Bu({},e),{},{[i]:e[i]+(a||0)})}return e},Mm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Kte=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},qte=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=p==="angleAxis"&&s&&s.length>=2?Yi(s[0]-s[1])*2*x:x,f||h){var b=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:i(_)+x,value:y,offset:x,index:w}});return b.filter(y=>!Qc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},TV=1e-4,eNe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-TV,s=Math.max(n[0],n[1])+TV,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},tNe=(e,t)=>{if(!t||t.length!==2||!dr(t[0])||!dr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!dr(e[0])||e[0]<r)&&(a[0]=r),(!dr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},rNe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Qc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},nNe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Qc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},aNe={sign:rNe,expand:DCe,none:e1,silhouette:PCe,wiggle:RCe,positive:nNe},sNe=(e,t,r)=>{var n=aNe[r],a=OCe().keys(t).value((s,i)=>+Pa(s,i,0)).order(Z6).offset(n);return a(e)};function iNe(e){return e==null?void 0:String(e)}var IV=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Pa(s,t.dataKey,t.scale.domain()[i]);return ks(o)?null:t.scale(o)-a/2+n},oNe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},lNe=e=>{var t=e.flat(2).filter(dr);return[Math.min(...t),Math.max(...t)]},cNe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],uNe=(e,t,r)=>{if(e!=null)return cNe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Gte(u,t,r),f=lNe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},FV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=I4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function DV(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Bu(Bu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function H1(e,t){if(e)return String(e);if(typeof t=="string")return t}function dNe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?q5e({x:e,y:t},n):null}var ANe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return Bu(Bu(Bu({},n),ea(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return Bu(Bu(Bu({},n),ea(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},fNe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Oh=e=>e.layout.width,Dh=e=>e.layout.height,hNe=e=>e.layout.scale,Wte=e=>e.layout.margin,cR=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),uR=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Xte="data-recharts-item-index",Yte="data-recharts-item-data-key",M4=60;function PV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PV(Object(r),!0).forEach(function(n){mNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mNe(e,t,r){return(t=pNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pNe(e){var t=gNe(e,"string");return typeof t=="symbol"?t:t+""}function gNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xNe=e=>e.brush.height,ji=ut([Oh,Dh,Wte,xNe,cR,uR,xte,M_e],(e,t,r,n,a,s,i,o)=>{var c=s.reduce((g,x)=>{var{orientation:b}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:M4;return C0(C0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:b}=x;return!x.mirror&&!x.hide?C0(C0({},g),{},{[b]:Em(g,"".concat(b))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=C0(C0({},u),c),f=d.bottom;d.bottom+=n,d=Z5e(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return C0(C0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),vNe=ut(ji,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Jte=ut(Oh,Dh,(e,t)=>({x:0,y:0,width:e,height:t})),bNe=S.createContext(null),sc=()=>S.useContext(bNe)!=null,U4=e=>e.brush,Q4=ut([U4,ji,Wte],(e,t,r)=>({height:e.height,x:dr(e.x)?e.x:t.left,y:dr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:dr(e.width)?e.width:t.width})),dR=()=>{var e,t=sc(),r=or(vNe),n=or(Q4),a=(e=or(U4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},yNe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Zte=()=>{var e;return(e=or(ji))!==null&&e!==void 0?e:yNe},AR=()=>or(Oh),fR=()=>or(Dh),wNe={top:0,right:0,bottom:0,left:0},ENe=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:wNe},Tn=e=>e.layout.layoutType,hR=()=>or(Tn),CNe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},ere=qc({name:"legend",initialState:CNe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=oh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:RV,setLegendSettings:_Ne,addLegendPayload:tre,removeLegendPayload:rre}=ere.actions,NNe=ere.reducer,SNe=["contextPayload"];function uF(){return uF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uF.apply(null,arguments)}function LV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LV(Object(r),!0).forEach(function(n){mR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mR(e,t,r){return(t=kNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kNe(e){var t=jNe(e,"string");return typeof t=="symbol"?t:t+""}function jNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BNe(e,t){if(e==null)return{};var r,n,a=TNe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function INe(e){return e.value}function FNe(e){var{contextPayload:t}=e,r=BNe(e,SNe),n=fte(t,e.payloadUniqBy,INe),a=r1(r1({},r),{},{payload:n});return S.isValidElement(e.content)?S.cloneElement(e.content,a):typeof e.content=="function"?S.createElement(e.content,a):S.createElement(XP,a)}function ONe(e,t,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),r1(r1({},u),d)}function DNe(e){var t=$a();return S.useEffect(()=>{t(_Ne(e))},[t,e]),null}function PNe(e){var t=$a();return S.useEffect(()=>(t(RV(e)),()=>{t(RV({width:0,height:0}))}),[t,e]),null}function RNe(e){var t=H_e(),r=aCe(),n=ENe(),{width:a,height:s,wrapperStyle:i,portal:o}=e,[c,u]=vte([t]),d=AR(),f=fR(),h=d-(n.left||0)-(n.right||0),p=V1.getWidthOrHeight(e.layout,s,a,h),g=o?i:r1(r1({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},ONe(i,e,n,d,f,c)),i),x=o??r;if(x==null)return null;var b=S.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},S.createElement(DNe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),S.createElement(PNe,{width:c.width,height:c.height}),S.createElement(FNe,uF({},e,p,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return zP.createPortal(b,x)}class V1 extends S.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&dr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return S.createElement(RNe,this.props)}}mR(V1,"displayName","Legend");mR(V1,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function dF(){return dF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dF.apply(null,arguments)}function MV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MV(Object(r),!0).forEach(function(n){LNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LNe(e,t,r){return(t=MNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MNe(e){var t=UNe(e,"string");return typeof t=="symbol"?t:t+""}function UNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QNe(e){return Array.isArray(e)&&rf(e[0])&&rf(e[1])?e.join(" ~ "):e}var HNe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var k={padding:0,margin:0},I=(o?I4(s,o):s).map((E,N)=>{if(E.type==="none")return null;var B=E.formatter||i||QNe,{value:R,name:D}=E,O=R,L=D;if(B){var M=B(R,D,E,N,s);if(Array.isArray(M))[O,L]=M;else if(M!=null)O=M;else return null}var J=$3({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:J},rf(L)?S.createElement("span",{className:"recharts-tooltip-item-name"},L):null,rf(L)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},O),S.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},g=$3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=$3({margin:0},a),b=!ks(d),y=b?d:"",w=xn("recharts-default-tooltip",c),_=xn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var j=h?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",dF({className:w,style:g},j),S.createElement("p",{className:_,style:x},S.isValidElement(y)?y:"".concat(y)),p())},Jb="recharts-tooltip-wrapper",VNe={visibility:"hidden"};function zNe(e){var{coordinate:t,translateX:r,translateY:n}=e;return xn(Jb,{["".concat(Jb,"-right")]:dr(r)&&t&&dr(t.x)&&r>=t.x,["".concat(Jb,"-left")]:dr(r)&&t&&dr(t.x)&&r<t.x,["".concat(Jb,"-bottom")]:dr(n)&&t&&dr(t.y)&&n>=t.y,["".concat(Jb,"-top")]:dr(n)&&t&&dr(t.y)&&n<t.y})}function UV(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&dr(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+o,b=h+u;return x>b?Math.max(d,h):Math.max(f,h)}function $Ne(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function GNe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=UV({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=UV({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=$Ne({translateX:d,translateY:f,useTranslate3d:o})):u=VNe,{cssProperties:u,cssClasses:zNe({translateX:d,translateY:f,coordinate:r})}}function QV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QV(Object(r),!0).forEach(function(n){AF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AF(e,t,r){return(t=KNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KNe(e){var t=qNe(e,"string");return typeof t=="symbol"?t:t+""}function qNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class WNe extends S.PureComponent{constructor(){super(...arguments),AF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),AF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:x,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=GNe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:p}),j=y?{}:LC(LC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=LC(LC({},j),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},s)}}var XNe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Lg={isSsr:XNe()},nre=()=>or(e=>e.rootProps.accessibilityLayer);function zc(e){return Number.isFinite(e)}function n1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function fF(){return fF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fF.apply(null,arguments)}function HV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HV(Object(r),!0).forEach(function(n){YNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YNe(e,t,r){return(t=JNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JNe(e){var t=ZNe(e,"string");return typeof t=="symbol"?t:t+""}function ZNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zV={curveBasisClosed:ECe,curveBasisOpen:CCe,curveBasis:wCe,curveBumpX:lCe,curveBumpY:cCe,curveLinearClosed:_Ce,curveLinear:j4,curveMonotoneX:NCe,curveMonotoneY:SCe,curveNatural:kCe,curveStep:jCe,curveStepAfter:TCe,curveStepBefore:BCe},MC=e=>zc(e.x)&&zc(e.y),Zb=e=>e.x,ey=e=>e.y,eSe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(V2(e));return(r==="curveMonotone"||r==="curveBump")&&t?zV["".concat(r).concat(t==="vertical"?"Y":"X")]:zV[r]||j4},tSe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=eSe(t,a),o=s?r.filter(MC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>MC(f)):n,d=o.map((f,h)=>VV(VV({},f),{},{base:u[h]}));return a==="vertical"?c=FC().y(ey).x1(Zb).x0(f=>f.base.x):c=FC().x(Zb).y1(ey).y0(f=>f.base.y),c.defined(MC).curve(i),c(d)}return a==="vertical"&&dr(n)?c=FC().y(ey).x1(Zb).x0(n):dr(n)?c=FC().x(Zb).y1(ey).y0(n):c=Xee().x(Zb).y(ey),c.defined(MC).curve(i),c(o)},are=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?tSe(e):n;return S.createElement("path",fF({},il(e),HP(e),{className:xn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},rSe=["x","y","top","left","width","height","className"];function hF(){return hF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hF.apply(null,arguments)}function $V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$V(Object(r),!0).forEach(function(n){aSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$V(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aSe(e,t,r){return(t=sSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sSe(e){var t=iSe(e,"string");return typeof t=="symbol"?t:t+""}function iSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oSe(e,t){if(e==null)return{};var r,n,a=lSe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cSe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),uSe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,c=oSe(e,rSe),u=nSe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!dr(t)||!dr(r)||!dr(s)||!dr(i)||!dr(n)||!dr(a)?null:S.createElement("path",hF({},Xn(u,!0),{className:xn("recharts-cross",o),d:cSe(t,r,s,i,n,a)}))};function dSe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function GV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ASe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GV(Object(r),!0).forEach(function(n){fSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fSe(e,t,r){return(t=hSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hSe(e){var t=mSe(e,"string");return typeof t=="symbol"?t:t+""}function mSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $u(e,t){var r=ASe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var G3={},K3={},q3={},KV;function pSe(){return KV||(KV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(q3)),q3}var qV;function gSe(){return qV||(qV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pSe(),r=ute(),n=eR(),a=tR(),s=JP();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,x){const b=x(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),b=f.get(d);if(x!=null&&b!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!o(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const j=y[_],k=w.findIndex(I=>o(j,I,void 0,u,d,f,h));if(k===-1)return!1;w.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let j=0;j<w.length;j++){const k=w[j],I=u[k];if(!Object.hasOwn(d,k))return!1;const E=d[k];if(!o(I,E,k,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(K3)),K3}var W3={},WV;function xSe(){return WV||(WV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(W3)),W3}var XV;function vSe(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gSe(),r=xSe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(G3)),G3}var X3,YV;function bSe(){return YV||(YV=1,X3=vSe().isEqual),X3}var ySe=bSe();const wSe=_l(ySe);var EN=1e-4,sre=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ire=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),JV=(e,t)=>r=>{var n=sre(e,t);return ire(n,r)},ESe=(e,t)=>r=>{var n=sre(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return ire(a,r)},ZV=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=JV(t,r),d=JV(n,a),f=ESe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var x=g>1?1:g,b=x,y=0;y<8;++y){var w=u(b)-x,_=f(b);if(Math.abs(w-x)<EN||_<EN)return d(b);b=h(b-w/_)}return d(b)};return p.isStepper=!1,p},CSe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<EN&&Math.abs(f)<EN?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},ore=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZV(e);case"spring":return CSe();default:if(e.split("(")[0]==="cubic-bezier")return ZV(e)}return typeof e=="function"?e:null};function ez(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ez(Object(r),!0).forEach(function(n){_Se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Se(e,t,r){return(t=NSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NSe(e){var t=SSe(e,"string");return typeof t=="symbol"?t:t+""}function SSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kSe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),jSe=(e,t,r)=>e.map(n=>"".concat(kSe(n)," ").concat(t,"ms ").concat(r)).join(","),BSe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),zw=(e,t)=>Object.keys(t).reduce((r,n)=>tz(tz({},r),{},{[n]:e(n,t[n])}),{});function rz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rz(Object(r),!0).forEach(function(n){TSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TSe(e,t,r){return(t=ISe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ISe(e){var t=FSe(e,"string");return typeof t=="symbol"?t:t+""}function FSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CN=(e,t,r)=>e+(t-e)*r,mF=e=>{var{from:t,to:r}=e;return t!==r},lre=(e,t,r)=>{var n=zw((a,s)=>{if(mF(s)){var[i,o]=e(s.from,s.to,s.velocity);return go(go({},s),{},{from:i,velocity:o})}return s},t);return r<1?zw((a,s)=>mF(s)?go(go({},s),{},{velocity:CN(s.velocity,n[a].velocity,r),from:CN(s.from,n[a].from,r)}):s,t):lre(e,n,r-1)};function OSe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>go(go({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>zw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(mF).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=lre(r,o,g),a(go(go(go({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function DSe(e,t,r,n,a,s,i){var o=null,c=a.reduce((f,h)=>go(go({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=zw((x,b)=>CN(...b,r(h)),c);if(s(go(go(go({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=zw((x,b)=>CN(...b,r(1)),c);s(go(go(go({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const cre=(e,t,r,n,a,s)=>{var i=BSe(e,t);return r.isStepper===!0?OSe(e,t,r,i,a,s):DSe(e,t,r,n,i,a,s)};function PSe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class RSe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function LSe(){return PSe(new RSe)}var MSe=S.createContext(LSe);function ure(e,t){var r=S.useContext(MSe);return S.useMemo(()=>t??r(e),[e,t,r])}var USe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function pF(){return pF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pF.apply(null,arguments)}function QSe(e,t){if(e==null)return{};var r,n,a=HSe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nz(Object(r),!0).forEach(function(n){Pp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pp(e,t,r){return(t=VSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VSe(e){var t=zSe(e,"string");return typeof t=="symbol"?t:t+""}function zSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pR extends S.PureComponent{constructor(t,r){super(t,r),Pp(this,"mounted",!1),Pp(this,"manager",void 0),Pp(this,"stopJSAnimation",null),Pp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(wSe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(_0(_0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c}=t,u=cre(r,n,ore(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=jSe(Object.keys(d),n,i);this.manager.start([o,r,_0(_0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,x=QSe(t,USe),b=S.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,I=S.cloneElement(_,_0(_0({},x),{},{style:_0(_0({},j),y),className:k}));return I};return b===1?w(S.Children.only(r)):S.createElement("div",null,S.Children.map(r,_=>w(_)))}}Pp(pR,"displayName","Animate");Pp(pR,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function _N(e){var t,r=ure((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return S.createElement(pR,pF({},e,{animationManager:r}))}function NN(){return NN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NN.apply(null,arguments)}var az=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},$Se={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dre=e=>{var t=$u(e,$Se),r=S.useRef(null),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var b=xn("recharts-rectangle",d);return x?S.createElement(_N,{canBegin:n>0,from:{width:o,height:c,x:s,y:i},to:{width:o,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:j,y:k}=y;return S.createElement(_N,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},S.createElement("path",NN({},Xn(t,!0),{className:b,d:az(j,k,w,_,u),ref:r})))}):S.createElement("path",NN({},Xn(t,!0),{className:b,d:az(s,i,o,c,u)}))};function Are(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=ea(t,r,n,a),o=ea(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function gF(){return gF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gF.apply(null,arguments)}var GSe=(e,t)=>{var r=Yi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},UC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/wN,f=c?a:a+s*d,h=ea(t,r,u,f),p=ea(t,r,n,f),g=c?a-s*d:a,x=ea(t,r,u*Math.cos(d*wN),g);return{center:h,circleTangency:p,lineTangency:x,theta:d}},fre=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=GSe(s,i),c=s+o,u=ea(t,r,a,s),d=ea(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ea(t,r,n,s),p=ea(t,r,n,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},KSe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Yi(u-c),{circleTangency:f,lineTangency:h,theta:p}=UC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:x,theta:b}=UC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):fre({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=UC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:I,lineTangency:E,theta:N}=UC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),B=o?Math.abs(c-u):Math.abs(c-u)-k-N;if(B<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},qSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},hre=e=>{var t=$u(e,qSe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=xn("recharts-sector",f),p=s-a,g=El(i,p,0,!0),x;return g>0&&Math.abs(u-d)<360?x=KSe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):x=fre({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),S.createElement("path",gF({},Xn(t,!0),{className:h,d:x}))};function WSe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=ea(o,c,u,f),p=ea(o,c,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return Are(t);return[{x:n,y:a},{x:s,y:i}]}var Y3={},J3={},Z3={},sz;function XSe(){return sz||(sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pte();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(Z3)),Z3}var iz;function YSe(){return iz||(iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XSe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(J3)),J3}var oz;function JSe(){return oz||(oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gte(),r=YSe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}e.range=n}(Y3)),Y3}var eT,lz;function ZSe(){return lz||(lz=1,eT=JSe().range),eT}var e4e=ZSe();const mre=_l(e4e);function om(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function t4e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gR(e){let t,r,n;e.length!==2?(t=om,r=(o,c)=>om(e(o),c),n=(o,c)=>e(o)-c):(t=e===om||e===t4e?e:r4e,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:i,right:s}}function r4e(){return 0}function pre(e){return e===null?NaN:+e}function*n4e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const a4e=gR(om),G2=a4e.right;gR(pre).center;class cz extends Map{constructor(t,r=o4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(uz(this,t))}has(t){return super.has(uz(this,t))}set(t,r){return super.set(s4e(this,t),r)}delete(t){return super.delete(i4e(this,t))}}function uz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function s4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function i4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function o4e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function l4e(e=om){if(e===om)return gre;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function gre(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const c4e=Math.sqrt(50),u4e=Math.sqrt(10),d4e=Math.sqrt(2);function SN(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=c4e?10:s>=u4e?5:s>=d4e?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?SN(e,t,r*2):[o,c,u]}function xF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?SN(t,e,r):SN(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function vF(e,t,r){return t=+t,e=+e,r=+r,SN(e,t,r)[2]}function bF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?vF(t,e,r):vF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function dz(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Az(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function xre(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?gre:l4e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));xre(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(ty(e,r,t),a(e[n],s)>0&&ty(e,r,n);i<o;){for(ty(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?ty(e,r,o):(++o,ty(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ty(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function A4e(e,t,r){if(e=Float64Array.from(n4e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Az(e);if(t>=1)return dz(e);var n,a=(n-1)*t,s=Math.floor(a),i=dz(xre(e,s).subarray(0,s+1)),o=Az(e.subarray(s+1));return i+(o-i)*(a-s)}}function f4e(e,t,r=pre){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function h4e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Gu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ph(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const yF=Symbol("implicit");function H4(){var e=new cz,t=[],r=[],n=yF;function a(s){let i=e.get(s);if(i===void 0){if(n!==yF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new cz;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return H4(t,r).unknown(n)},Gu.apply(a,arguments),a}function xR(){var e=H4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,x=p?n:a;s=(x-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),o&&(g=Math.round(g),i=Math.round(i));var b=h4e(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return xR(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},Gu.apply(f(),arguments)}function vre(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vre(t())},e}function m4e(){return vre(xR.apply(null,arguments).paddingInner(1))}function vR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function bre(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function K2(){}var $w=.7,kN=1/$w,kv="\\s*([+-]?\\d+)\\s*",Gw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",JA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p4e=/^#([0-9a-f]{3,8})$/,g4e=new RegExp(`^rgb\\(${kv},${kv},${kv}\\)$`),x4e=new RegExp(`^rgb\\(${JA},${JA},${JA}\\)$`),v4e=new RegExp(`^rgba\\(${kv},${kv},${kv},${Gw}\\)$`),b4e=new RegExp(`^rgba\\(${JA},${JA},${JA},${Gw}\\)$`),y4e=new RegExp(`^hsl\\(${Gw},${JA},${JA}\\)$`),w4e=new RegExp(`^hsla\\(${Gw},${JA},${JA},${Gw}\\)$`),fz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vR(K2,gg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hz,formatHex:hz,formatHex8:E4e,formatHsl:C4e,formatRgb:mz,toString:mz});function hz(){return this.rgb().formatHex()}function E4e(){return this.rgb().formatHex8()}function C4e(){return yre(this).formatHsl()}function mz(){return this.rgb().formatRgb()}function gg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=p4e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?pz(t):r===3?new Yl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?QC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?QC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=g4e.exec(e))?new Yl(t[1],t[2],t[3],1):(t=x4e.exec(e))?new Yl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=v4e.exec(e))?QC(t[1],t[2],t[3],t[4]):(t=b4e.exec(e))?QC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=y4e.exec(e))?vz(t[1],t[2]/100,t[3]/100,1):(t=w4e.exec(e))?vz(t[1],t[2]/100,t[3]/100,t[4]):fz.hasOwnProperty(e)?pz(fz[e]):e==="transparent"?new Yl(NaN,NaN,NaN,0):null}function pz(e){return new Yl(e>>16&255,e>>8&255,e&255,1)}function QC(e,t,r,n){return n<=0&&(e=t=r=NaN),new Yl(e,t,r,n)}function _4e(e){return e instanceof K2||(e=gg(e)),e?(e=e.rgb(),new Yl(e.r,e.g,e.b,e.opacity)):new Yl}function wF(e,t,r,n){return arguments.length===1?_4e(e):new Yl(e,t,r,n??1)}function Yl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}vR(Yl,wF,bre(K2,{brighter(e){return e=e==null?kN:Math.pow(kN,e),new Yl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$w:Math.pow($w,e),new Yl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yl(Wp(this.r),Wp(this.g),Wp(this.b),jN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gz,formatHex:gz,formatHex8:N4e,formatRgb:xz,toString:xz}));function gz(){return`#${Rp(this.r)}${Rp(this.g)}${Rp(this.b)}`}function N4e(){return`#${Rp(this.r)}${Rp(this.g)}${Rp(this.b)}${Rp((isNaN(this.opacity)?1:this.opacity)*255)}`}function xz(){const e=jN(this.opacity);return`${e===1?"rgb(":"rgba("}${Wp(this.r)}, ${Wp(this.g)}, ${Wp(this.b)}${e===1?")":`, ${e})`}`}function jN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Rp(e){return e=Wp(e),(e<16?"0":"")+e.toString(16)}function vz(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Cd(e,t,r,n)}function yre(e){if(e instanceof Cd)return new Cd(e.h,e.s,e.l,e.opacity);if(e instanceof K2||(e=gg(e)),!e)return new Cd;if(e instanceof Cd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new Cd(i,o,c,e.opacity)}function S4e(e,t,r,n){return arguments.length===1?yre(e):new Cd(e,t,r,n??1)}function Cd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}vR(Cd,S4e,bre(K2,{brighter(e){return e=e==null?kN:Math.pow(kN,e),new Cd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$w:Math.pow($w,e),new Cd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Yl(tT(e>=240?e-240:e+120,a,n),tT(e,a,n),tT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Cd(bz(this.h),HC(this.s),HC(this.l),jN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jN(this.opacity);return`${e===1?"hsl(":"hsla("}${bz(this.h)}, ${HC(this.s)*100}%, ${HC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bz(e){return e=(e||0)%360,e<0?e+360:e}function HC(e){return Math.max(0,Math.min(1,e||0))}function tT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const bR=e=>()=>e;function k4e(e,t){return function(r){return e+r*t}}function j4e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function B4e(e){return(e=+e)==1?wre:function(t,r){return r-t?j4e(t,r,e):bR(isNaN(t)?r:t)}}function wre(e,t){var r=t-e;return r?k4e(e,r):bR(isNaN(e)?t:e)}const BN=function e(t){var r=B4e(t);function n(a,s){var i=r((a=wF(a)).r,(s=wF(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=wre(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function T4e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function I4e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function F4e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=z1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function O4e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function wd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function D4e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=z1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var EF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rT=new RegExp(EF.source,"g");function P4e(e){return function(){return e}}function R4e(e){return function(t){return e(t)+""}}function Ere(e,t){var r=EF.lastIndex=rT.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=EF.exec(e))&&(a=rT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:wd(n,a)})),r=rT.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?R4e(c[0].x):P4e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function z1(e,t){var r=typeof t,n;return t==null||r==="boolean"?bR(t):(r==="number"?wd:r==="string"?(n=gg(t))?(t=n,BN):Ere:t instanceof gg?BN:t instanceof Date?O4e:I4e(t)?T4e:Array.isArray(t)?F4e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?D4e:wd)(e,t)}function yR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var yz=180/Math.PI,CF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cre(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*yz,skewX:Math.atan(c)*yz,scaleX:i,scaleY:o}}var VC;function L4e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?CF:Cre(t.a,t.b,t.c,t.d,t.e,t.f)}function M4e(e){return e==null||(VC||(VC=document.createElementNS("http://www.w3.org/2000/svg","g")),VC.setAttribute("transform",e),!(e=VC.transform.baseVal.consolidate()))?CF:(e=e.matrix,Cre(e.a,e.b,e.c,e.d,e.e,e.f))}function _re(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push("translate(",null,t,null,r);g.push({i:x-4,x:wd(u,f)},{i:x-2,x:wd(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:wd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:wd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push(a(p)+"scale(",null,",",null,")");g.push({i:x-4,x:wd(u,f)},{i:x-2,x:wd(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,x=h.length,b;++g<x;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var U4e=_re(L4e,"px, ","px)","deg)"),Q4e=_re(M4e,", ",")",")"),H4e=1e-12;function wz(e){return((e=Math.exp(e))+1/e)/2}function V4e(e){return((e=Math.exp(e))-1/e)/2}function z4e(e){return((e=Math.exp(2*e))-1)/(e+1)}const $4e=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-c,x=p*p+g*g,b,y;if(x<H4e)y=Math.log(h/u)/t,b=function(E){return[o+E*p,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),j=(h*h-u*u-n*x)/(2*h*r*w),k=Math.log(Math.sqrt(_*_+1)-_),I=Math.log(Math.sqrt(j*j+1)-j);y=(I-k)/t,b=function(E){var N=E*y,B=wz(k),R=u/(r*w)*(B*z4e(t*N+k)-V4e(k));return[o+R*p,c+R*g,u*B/wz(t*N+k)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);function G4e(e,t){t===void 0&&(t=e,e=z1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function K4e(e){return function(){return e}}function TN(e){return+e}var Ez=[0,1];function vl(e){return e}function _F(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:K4e(isNaN(t)?NaN:.5)}function q4e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function W4e(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=_F(a,n),s=r(i,s)):(n=_F(n,a),s=r(s,i)),function(o){return s(n(o))}}function X4e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=_F(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var c=G2(e,o,1,n)-1;return s[c](a[c](o))}}function q2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function V4(){var e=Ez,t=Ez,r=z1,n,a,s,i=vl,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==vl&&(i=q4e(e[0],e[h-1])),o=h>2?X4e:W4e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),wd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,TN),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=yR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:vl,d()):i!==vl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function wR(){return V4()(vl,vl)}function Y4e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function IN(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function a1(e){return e=IN(Math.abs(e)),e?e[1]:NaN}function J4e(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function Z4e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var eke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kw(e){if(!(t=eke.exec(e)))throw new Error("invalid format: "+e);var t;return new ER({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kw.prototype=ER.prototype;function ER(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ER.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tke(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Nre;function rke(e,t){var r=IN(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Nre=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+IN(e,Math.max(0,t+s-1))[0]}function Cz(e,t){var r=IN(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const _z={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Y4e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Cz(e*100,t),r:Cz,s:rke,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nz(e){return e}var Sz=Array.prototype.map,kz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nke(e){var t=e.grouping===void 0||e.thousands===void 0?Nz:J4e(Sz.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Nz:Z4e(Sz.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Kw(f);var h=f.fill,p=f.align,g=f.sign,x=f.symbol,b=f.zero,y=f.width,w=f.comma,_=f.precision,j=f.trim,k=f.type;k==="n"?(w=!0,k="g"):_z[k]||(_===void 0&&(_=12),j=!0,k="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=x==="$"?n:/[%p]/.test(k)?i:"",N=_z[k],B=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(D){var O=I,L=E,M,J,V;if(k==="c")L=N(D)+L,D="";else{D=+D;var K=D<0||1/D<0;if(D=isNaN(D)?c:N(Math.abs(D),_),j&&(D=tke(D)),K&&+D==0&&g!=="+"&&(K=!1),O=(K?g==="("?g:o:g==="-"||g==="("?"":g)+O,L=(k==="s"?kz[8+Nre/3]:"")+L+(K&&g==="("?")":""),B){for(M=-1,J=D.length;++M<J;)if(V=D.charCodeAt(M),48>V||V>57){L=(V===46?a+D.slice(M+1):D.slice(M))+L,D=D.slice(0,M);break}}}w&&!b&&(D=t(D,1/0));var z=O.length+D.length+L.length,G=z<y?new Array(y-z+1).join(h):"";switch(w&&b&&(D=t(G+D,G.length?y-L.length:1/0),G=""),p){case"<":D=O+D+L+G;break;case"=":D=O+G+D+L;break;case"^":D=G.slice(0,z=G.length>>1)+O+D+L+G.slice(z);break;default:D=G+O+D+L;break}return s(D)}return R.toString=function(){return f+""},R}function d(f,h){var p=u((f=Kw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(a1(h)/3)))*3,x=Math.pow(10,-g),b=kz[8+g/3];return function(y){return p(x*y)+b}}return{format:u,formatPrefix:d}}var zC,CR,Sre;ake({thousands:",",grouping:[3],currency:["$",""]});function ake(e){return zC=nke(e),CR=zC.format,Sre=zC.formatPrefix,zC}function ske(e){return Math.max(0,-a1(Math.abs(e)))}function ike(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(a1(t)/3)))*3-a1(Math.abs(e)))}function oke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a1(t)-a1(e))+1}function kre(e,t,r,n){var a=bF(e,t,r),s;switch(n=Kw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=ike(a,i))&&(n.precision=s),Sre(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=oke(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=ske(a))&&(n.precision=s-(n.type==="%")*2);break}}return CR(n)}function Um(e){var t=e.domain;return e.ticks=function(r){var n=t();return xF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return kre(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=vF(i,o,r),u===c)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function jre(){var e=wR();return e.copy=function(){return q2(e,jre())},Gu.apply(e,arguments),Um(e)}function Bre(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,TN),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Bre(e).unknown(t)},e=arguments.length?Array.from(e,TN):[0,1],Um(r)}function Tre(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function jz(e){return Math.log(e)}function Bz(e){return Math.exp(e)}function lke(e){return-Math.log(-e)}function cke(e){return-Math.exp(-e)}function uke(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dke(e){return e===10?uke:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ake(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Tz(e){return(t,r)=>-e(-t,r)}function _R(e){const t=e(jz,Bz),r=t.domain;let n=10,a,s;function i(){return a=Ake(n),s=dke(n),r()[0]<0?(a=Tz(a),s=Tz(s),e(lke,cke)):e(jz,Bz),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,x;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<b&&(y=xF(u,d,b))}else y=xF(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Kw(c)).precision==null&&(c.trim=!0),c=CR(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Tre(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function Ire(){const e=_R(V4()).domain([1,10]);return e.copy=()=>q2(e,Ire()).base(e.base()),Gu.apply(e,arguments),e}function Iz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Fz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function NR(e){var t=1,r=e(Iz(t),Fz(t));return r.constant=function(n){return arguments.length?e(Iz(t=+n),Fz(t)):t},Um(r)}function Fre(){var e=NR(V4());return e.copy=function(){return q2(e,Fre()).constant(e.constant())},Gu.apply(e,arguments)}function Oz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fke(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hke(e){return e<0?-e*e:e*e}function SR(e){var t=e(vl,vl),r=1;function n(){return r===1?e(vl,vl):r===.5?e(fke,hke):e(Oz(r),Oz(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Um(t)}function kR(){var e=SR(V4());return e.copy=function(){return q2(e,kR()).exponent(e.exponent())},Gu.apply(e,arguments),e}function mke(){return kR.apply(null,arguments).exponent(.5)}function Dz(e){return Math.sign(e)*e*e}function pke(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ore(){var e=wR(),t=[0,1],r=!1,n;function a(s){var i=pke(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(Dz(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,TN)).map(Dz)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Ore(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Gu.apply(a,arguments),Um(a)}function Dre(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=f4e(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[G2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(om),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Dre().domain(e).range(t).unknown(n)},Gu.apply(s,arguments)}function Pre(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[G2(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Pre().domain([e,t]).range(a).unknown(s)},Gu.apply(Um(i),arguments)}function Rre(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[G2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Rre().domain(e).range(t).unknown(r)},Gu.apply(a,arguments)}const nT=new Date,aT=new Date;function Bi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return c},a.filter=s=>Bi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(nT.setTime(+s),aT.setTime(+i),e(nT),e(aT),Math.floor(r(nT,aT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const FN=Bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);FN.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):FN);FN.range;const Jf=1e3,Ou=Jf*60,Zf=Ou*60,yh=Zf*24,jR=yh*7,Pz=yh*30,sT=yh*365,Lp=Bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getUTCSeconds());Lp.range;const BR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jf)},(e,t)=>{e.setTime(+e+t*Ou)},(e,t)=>(t-e)/Ou,e=>e.getMinutes());BR.range;const TR=Bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ou)},(e,t)=>(t-e)/Ou,e=>e.getUTCMinutes());TR.range;const IR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jf-e.getMinutes()*Ou)},(e,t)=>{e.setTime(+e+t*Zf)},(e,t)=>(t-e)/Zf,e=>e.getHours());IR.range;const FR=Bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zf)},(e,t)=>(t-e)/Zf,e=>e.getUTCHours());FR.range;const W2=Bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ou)/yh,e=>e.getDate()-1);W2.range;const z4=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yh,e=>e.getUTCDate()-1);z4.range;const Lre=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yh,e=>Math.floor(e/yh));Lre.range;function Mg(e){return Bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ou)/jR)}const $4=Mg(0),ON=Mg(1),gke=Mg(2),xke=Mg(3),s1=Mg(4),vke=Mg(5),bke=Mg(6);$4.range;ON.range;gke.range;xke.range;s1.range;vke.range;bke.range;function Ug(e){return Bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/jR)}const G4=Ug(0),DN=Ug(1),yke=Ug(2),wke=Ug(3),i1=Ug(4),Eke=Ug(5),Cke=Ug(6);G4.range;DN.range;yke.range;wke.range;i1.range;Eke.range;Cke.range;const OR=Bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());OR.range;const DR=Bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());DR.range;const wh=Bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());wh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});wh.range;const Eh=Bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Eh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Eh.range;function Mre(e,t,r,n,a,s){const i=[[Lp,1,Jf],[Lp,5,5*Jf],[Lp,15,15*Jf],[Lp,30,30*Jf],[s,1,Ou],[s,5,5*Ou],[s,15,15*Ou],[s,30,30*Ou],[a,1,Zf],[a,3,3*Zf],[a,6,6*Zf],[a,12,12*Zf],[n,1,yh],[n,2,2*yh],[r,1,jR],[t,1,Pz],[t,3,3*Pz],[e,1,sT]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=gR(([,,b])=>b).right(i,h);if(p===i.length)return e.every(bF(u/sT,d/sT,f));if(p===0)return FN.every(Math.max(bF(u,d,f),1));const[g,x]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(x)}return[o,c]}const[_ke,Nke]=Mre(Eh,DR,G4,Lre,FR,TR),[Ske,kke]=Mre(wh,OR,$4,W2,IR,BR);function iT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function oT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ry(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function jke(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=ny(a),d=ay(a),f=ny(s),h=ay(s),p=ny(i),g=ay(i),x=ny(o),b=ay(o),y=ny(c),w=ay(c),_={a:K,A:z,b:G,B:Y,c:null,d:Hz,e:Hz,f:Jke,g:lje,G:uje,H:Wke,I:Xke,j:Yke,L:Ure,m:Zke,M:eje,p:te,q:P,Q:$z,s:Gz,S:tje,u:rje,U:nje,V:aje,w:sje,W:ije,x:null,X:null,y:oje,Y:cje,Z:dje,"%":zz},j={a:H,A:X,b:Z,B:ae,c:null,d:Vz,e:Vz,f:mje,g:_je,G:Sje,H:Aje,I:fje,j:hje,L:Hre,m:pje,M:gje,p:le,q:ie,Q:$z,s:Gz,S:xje,u:vje,U:bje,V:yje,w:wje,W:Eje,x:null,X:null,y:Cje,Y:Nje,Z:kje,"%":zz},k={a:R,A:D,b:O,B:L,c:M,d:Uz,e:Uz,f:$ke,g:Mz,G:Lz,H:Qz,I:Qz,j:Qke,L:zke,m:Uke,M:Hke,p:B,q:Mke,Q:Kke,s:qke,S:Vke,u:Oke,U:Dke,V:Pke,w:Fke,W:Rke,x:J,X:V,y:Mz,Y:Lz,Z:Lke,"%":Gke};_.x=I(r,_),_.X=I(n,_),_.c=I(t,_),j.x=I(r,j),j.X=I(n,j),j.c=I(t,j);function I(ce,fe){return function(Ie){var ne=[],_e=-1,Fe=0,Se=ce.length,me,Te,Me;for(Ie instanceof Date||(Ie=new Date(+Ie));++_e<Se;)ce.charCodeAt(_e)===37&&(ne.push(ce.slice(Fe,_e)),(Te=Rz[me=ce.charAt(++_e)])!=null?me=ce.charAt(++_e):Te=me==="e"?" ":"0",(Me=fe[me])&&(me=Me(Ie,Te)),ne.push(me),Fe=_e+1);return ne.push(ce.slice(Fe,_e)),ne.join("")}}function E(ce,fe){return function(Ie){var ne=ry(1900,void 0,1),_e=N(ne,ce,Ie+="",0),Fe,Se;if(_e!=Ie.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(fe&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Fe=oT(ry(ne.y,0,1)),Se=Fe.getUTCDay(),Fe=Se>4||Se===0?DN.ceil(Fe):DN(Fe),Fe=z4.offset(Fe,(ne.V-1)*7),ne.y=Fe.getUTCFullYear(),ne.m=Fe.getUTCMonth(),ne.d=Fe.getUTCDate()+(ne.w+6)%7):(Fe=iT(ry(ne.y,0,1)),Se=Fe.getDay(),Fe=Se>4||Se===0?ON.ceil(Fe):ON(Fe),Fe=W2.offset(Fe,(ne.V-1)*7),ne.y=Fe.getFullYear(),ne.m=Fe.getMonth(),ne.d=Fe.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Se="Z"in ne?oT(ry(ne.y,0,1)).getUTCDay():iT(ry(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Se+5)%7:ne.w+ne.U*7-(Se+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,oT(ne)):iT(ne)}}function N(ce,fe,Ie,ne){for(var _e=0,Fe=fe.length,Se=Ie.length,me,Te;_e<Fe;){if(ne>=Se)return-1;if(me=fe.charCodeAt(_e++),me===37){if(me=fe.charAt(_e++),Te=k[me in Rz?fe.charAt(_e++):me],!Te||(ne=Te(ce,Ie,ne))<0)return-1}else if(me!=Ie.charCodeAt(ne++))return-1}return ne}function B(ce,fe,Ie){var ne=u.exec(fe.slice(Ie));return ne?(ce.p=d.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function R(ce,fe,Ie){var ne=p.exec(fe.slice(Ie));return ne?(ce.w=g.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function D(ce,fe,Ie){var ne=f.exec(fe.slice(Ie));return ne?(ce.w=h.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function O(ce,fe,Ie){var ne=y.exec(fe.slice(Ie));return ne?(ce.m=w.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function L(ce,fe,Ie){var ne=x.exec(fe.slice(Ie));return ne?(ce.m=b.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function M(ce,fe,Ie){return N(ce,t,fe,Ie)}function J(ce,fe,Ie){return N(ce,r,fe,Ie)}function V(ce,fe,Ie){return N(ce,n,fe,Ie)}function K(ce){return i[ce.getDay()]}function z(ce){return s[ce.getDay()]}function G(ce){return c[ce.getMonth()]}function Y(ce){return o[ce.getMonth()]}function te(ce){return a[+(ce.getHours()>=12)]}function P(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return i[ce.getUTCDay()]}function X(ce){return s[ce.getUTCDay()]}function Z(ce){return c[ce.getUTCMonth()]}function ae(ce){return o[ce.getUTCMonth()]}function le(ce){return a[+(ce.getUTCHours()>=12)]}function ie(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var fe=I(ce+="",_);return fe.toString=function(){return ce},fe},parse:function(ce){var fe=E(ce+="",!1);return fe.toString=function(){return ce},fe},utcFormat:function(ce){var fe=I(ce+="",j);return fe.toString=function(){return ce},fe},utcParse:function(ce){var fe=E(ce+="",!0);return fe.toString=function(){return ce},fe}}}var Rz={"-":"",_:" ",0:"0"},eo=/^\s*\d+/,Bke=/^%/,Tke=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function Ike(e){return e.replace(Tke,"\\$&")}function ny(e){return new RegExp("^(?:"+e.map(Ike).join("|")+")","i")}function ay(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Fke(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Oke(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Dke(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Pke(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Rke(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Lz(e,t,r){var n=eo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Mz(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Lke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Mke(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Uke(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Uz(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Qke(e,t,r){var n=eo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Qz(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Hke(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Vke(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function zke(e,t,r){var n=eo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $ke(e,t,r){var n=eo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Gke(e,t,r){var n=Bke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Kke(e,t,r){var n=eo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function qke(e,t,r){var n=eo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Hz(e,t){return Jn(e.getDate(),t,2)}function Wke(e,t){return Jn(e.getHours(),t,2)}function Xke(e,t){return Jn(e.getHours()%12||12,t,2)}function Yke(e,t){return Jn(1+W2.count(wh(e),e),t,3)}function Ure(e,t){return Jn(e.getMilliseconds(),t,3)}function Jke(e,t){return Ure(e,t)+"000"}function Zke(e,t){return Jn(e.getMonth()+1,t,2)}function eje(e,t){return Jn(e.getMinutes(),t,2)}function tje(e,t){return Jn(e.getSeconds(),t,2)}function rje(e){var t=e.getDay();return t===0?7:t}function nje(e,t){return Jn($4.count(wh(e)-1,e),t,2)}function Qre(e){var t=e.getDay();return t>=4||t===0?s1(e):s1.ceil(e)}function aje(e,t){return e=Qre(e),Jn(s1.count(wh(e),e)+(wh(e).getDay()===4),t,2)}function sje(e){return e.getDay()}function ije(e,t){return Jn(ON.count(wh(e)-1,e),t,2)}function oje(e,t){return Jn(e.getFullYear()%100,t,2)}function lje(e,t){return e=Qre(e),Jn(e.getFullYear()%100,t,2)}function cje(e,t){return Jn(e.getFullYear()%1e4,t,4)}function uje(e,t){var r=e.getDay();return e=r>=4||r===0?s1(e):s1.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function dje(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function Vz(e,t){return Jn(e.getUTCDate(),t,2)}function Aje(e,t){return Jn(e.getUTCHours(),t,2)}function fje(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function hje(e,t){return Jn(1+z4.count(Eh(e),e),t,3)}function Hre(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function mje(e,t){return Hre(e,t)+"000"}function pje(e,t){return Jn(e.getUTCMonth()+1,t,2)}function gje(e,t){return Jn(e.getUTCMinutes(),t,2)}function xje(e,t){return Jn(e.getUTCSeconds(),t,2)}function vje(e){var t=e.getUTCDay();return t===0?7:t}function bje(e,t){return Jn(G4.count(Eh(e)-1,e),t,2)}function Vre(e){var t=e.getUTCDay();return t>=4||t===0?i1(e):i1.ceil(e)}function yje(e,t){return e=Vre(e),Jn(i1.count(Eh(e),e)+(Eh(e).getUTCDay()===4),t,2)}function wje(e){return e.getUTCDay()}function Eje(e,t){return Jn(DN.count(Eh(e)-1,e),t,2)}function Cje(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function _je(e,t){return e=Vre(e),Jn(e.getUTCFullYear()%100,t,2)}function Nje(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function Sje(e,t){var r=e.getUTCDay();return e=r>=4||r===0?i1(e):i1.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function kje(){return"+0000"}function zz(){return"%"}function $z(e){return+e}function Gz(e){return Math.floor(+e/1e3)}var kx,zre,$re;jje({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jje(e){return kx=jke(e),zre=kx.format,kx.parse,$re=kx.utcFormat,kx.utcParse,kx}function Bje(e){return new Date(e)}function Tje(e){return e instanceof Date?+e:+new Date(+e)}function PR(e,t,r,n,a,s,i,o,c,u){var d=wR(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),x=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),j=u("%Y");function k(I){return(c(I)<I?p:o(I)<I?g:i(I)<I?x:s(I)<I?b:n(I)<I?a(I)<I?y:w:r(I)<I?_:j)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,Tje)):h().map(Bje)},d.ticks=function(I){var E=h();return e(E[0],E[E.length-1],I??10)},d.tickFormat=function(I,E){return E==null?k:u(E)},d.nice=function(I){var E=h();return(!I||typeof I.range!="function")&&(I=t(E[0],E[E.length-1],I??10)),I?h(Tre(E,I)):d},d.copy=function(){return q2(d,PR(e,t,r,n,a,s,i,o,c,u))},d}function Ije(){return Gu.apply(PR(Ske,kke,wh,OR,$4,W2,IR,BR,Lp,zre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Fje(){return Gu.apply(PR(_ke,Nke,Eh,DR,G4,z4,FR,TR,Lp,$re).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function K4(){var e=0,t=1,r,n,a,s,i=vl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(z1),u.rangeRound=d(yR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Qm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Gre(){var e=Um(K4()(vl));return e.copy=function(){return Qm(e,Gre())},Ph.apply(e,arguments)}function Kre(){var e=_R(K4()).domain([1,10]);return e.copy=function(){return Qm(e,Kre()).base(e.base())},Ph.apply(e,arguments)}function qre(){var e=NR(K4());return e.copy=function(){return Qm(e,qre()).constant(e.constant())},Ph.apply(e,arguments)}function RR(){var e=SR(K4());return e.copy=function(){return Qm(e,RR()).exponent(e.exponent())},Ph.apply(e,arguments)}function Oje(){return RR.apply(null,arguments).exponent(.5)}function Wre(){var e=[],t=vl;function r(n){if(n!=null&&!isNaN(n=+n))return t((G2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(om),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>A4e(e,s/n))},r.copy=function(){return Wre(t).domain(e)},Ph.apply(r,arguments)}function q4(){var e=0,t=.5,r=1,n=1,a,s,i,o,c,u=vl,d,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?o:c),u(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(u=x,p):u};function g(x){return function(b){var y,w,_;return arguments.length?([y,w,_]=b,u=G4e(x,[y,w,_]),p):[u(0),u(.5),u(1)]}}return p.range=g(z1),p.rangeRound=g(yR),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Xre(){var e=Um(q4()(vl));return e.copy=function(){return Qm(e,Xre())},Ph.apply(e,arguments)}function Yre(){var e=_R(q4()).domain([.1,1,10]);return e.copy=function(){return Qm(e,Yre()).base(e.base())},Ph.apply(e,arguments)}function Jre(){var e=NR(q4());return e.copy=function(){return Qm(e,Jre()).constant(e.constant())},Ph.apply(e,arguments)}function LR(){var e=SR(q4());return e.copy=function(){return Qm(e,LR()).exponent(e.exponent())},Ph.apply(e,arguments)}function Dje(){return LR.apply(null,arguments).exponent(.5)}const Dy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:xR,scaleDiverging:Xre,scaleDivergingLog:Yre,scaleDivergingPow:LR,scaleDivergingSqrt:Dje,scaleDivergingSymlog:Jre,scaleIdentity:Bre,scaleImplicit:yF,scaleLinear:jre,scaleLog:Ire,scaleOrdinal:H4,scalePoint:m4e,scalePow:kR,scaleQuantile:Dre,scaleQuantize:Pre,scaleRadial:Ore,scaleSequential:Gre,scaleSequentialLog:Kre,scaleSequentialPow:RR,scaleSequentialQuantile:Wre,scaleSequentialSqrt:Oje,scaleSequentialSymlog:qre,scaleSqrt:mke,scaleSymlog:Fre,scaleThreshold:Rre,scaleTime:Ije,scaleUtc:Fje,tickFormat:kre},Symbol.toStringTag,{value:"Module"}));var Hm=e=>e.chartData,W4=ut([Hm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),MR=(e,t,r,n)=>n?W4(e):Hm(e);function o1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zc(t)&&zc(r))return!0}return!1}function Kz(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Pje(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(zc(r))a=r;else if(typeof r=="function")return;if(zc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(o1(i))return i}}function Rje(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(o1(n))return Kz(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(dr(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&FV.test(a)){var c=FV.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(dr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&OV.test(s)){var d=OV.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(o1(h))return t==null?h:Kz(h,t,r)}}}var $1=1e9,Lje={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},QR,Za=!0,Vu="[DecimalError] ",Xp=Vu+"Invalid argument: ",UR=Vu+"Exponent out of range: ",G1=Math.floor,_p=Math.pow,Mje=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Oc,zi=1e7,La=7,Zre=9007199254740991,PN=G1(Zre/La),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return lh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Sa(lh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return mi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Oc))throw Error(Vu+"NaN");if(r.s<1)throw Error(Vu+(r.s?"NaN":"-Infinity"));return r.eq(Oc)?new n(0):(Za=!1,t=lh(qw(r,s),qw(e,s),s),Za=!0,Sa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rne(t,e):ene(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Vu+"NaN");return r.s?(Za=!1,t=lh(r,e,0,1).times(e),Za=!0,r.minus(t)):Sa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return tne(this)};Ar.naturalLogarithm=Ar.ln=function(){return qw(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ene(t,e):rne(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Xp+e);if(t=mi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Vu+"NaN")}for(e=mi(o),Za=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=HA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=G1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(lh(o,s,i+2)).times(.5),HA(s.d).slice(0,i)===(t=HA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Za=!0,Sa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,o,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%zi|0,t=o/zi|0;s[a]=(s[a]+t)%zi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Za?Sa(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(nf(e,0,$1),t===void 0?t=n.rounding:nf(t,0,8),Sa(r,e+mi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=xg(n,!0):(nf(e,0,$1),t===void 0?t=a.rounding:nf(t,0,8),n=Sa(new a(n),e+1,t),r=xg(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?xg(a):(nf(e,0,$1),t===void 0?t=s.rounding:nf(t,0,8),n=Sa(new s(a),e+mi(a)+1,t),r=xg(n.abs(),!1,e+mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),mi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Oc);if(o=new c(o),!o.s){if(e.s<1)throw Error(Vu+"Infinity");return o}if(o.eq(Oc))return o;if(n=c.precision,e.eq(Oc))return Sa(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Zre){for(a=new c(Oc),t=Math.ceil(n/La+4),Za=!1;r%2&&(a=a.times(o),Wz(a.d,t)),r=G1(r/2),r!==0;)o=o.times(o),Wz(o.d,t);return Za=!0,e.s<0?new c(Oc).div(a):Sa(a,n)}}else if(s<0)throw Error(Vu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Za=!1,a=e.times(qw(o,n+u)),Za=!0,a=tne(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=mi(a),n=xg(a,r<=s.toExpNeg||r>=s.toExpPos)):(nf(e,1,$1),t===void 0?t=s.rounding:nf(t,0,8),a=Sa(new s(a),e,t),r=mi(a),n=xg(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(nf(e,1,$1),t===void 0?t=n.rounding:nf(t,0,8)),Sa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mi(e),r=e.constructor;return xg(e,t<=r.toExpNeg||t>=r.toExpPos)};function ene(e,t){var r,n,a,s,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Za?Sa(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(f/La),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/zi|0,c[s]%=zi;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,Za?Sa(t,f):t}function nf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Xp+e)}function HA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=D0(r)),s+=n;i=e[t],n=i+"",r=La-n.length,r&&(s+=D0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var lh=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%zi|0,i=s/zi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*zi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,I,E,N,B=n.constructor,R=n.s==a.s?1:-1,D=n.d,O=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Vu+"Division by zero");for(c=n.e-a.e,E=O.length,k=D.length,p=new B(R),g=p.d=[],u=0;O[u]==(D[u]||0);)++u;if(O[u]>(D[u]||0)&&--c,s==null?w=s=B.precision:i?w=s+(mi(n)-mi(a))+1:w=s,w<0)return new B(0);if(w=w/La+2|0,u=0,E==1)for(d=0,O=O[0],w++;(u<k||d)&&w--;u++)_=d*zi+(D[u]||0),g[u]=_/O|0,d=_%O|0;else{for(d=zi/(O[0]+1)|0,d>1&&(O=e(O,d),D=e(D,d),E=O.length,k=D.length),j=E,x=D.slice(0,E),b=x.length;b<E;)x[b++]=0;N=O.slice(),N.unshift(0),I=O[0],O[1]>=zi/2&&++I;do d=0,o=t(O,x,E,b),o<0?(y=x[0],E!=b&&(y=y*zi+(x[1]||0)),d=y/I|0,d>1?(d>=zi&&(d=zi-1),f=e(O,d),h=f.length,b=x.length,o=t(f,x,h,b),o==1&&(d--,r(f,E<h?N:O,h))):(d==0&&(o=d=1),f=O.slice()),h=f.length,h<b&&f.unshift(0),r(x,f,b),o==-1&&(b=x.length,o=t(O,x,E,b),o<1&&(d++,r(x,E<b?N:O,b))),b=x.length):o===0&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[b++]=D[j]||0:(x=[D[j]],b=1);while((j++<k||x[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=c,Sa(p,i?s+mi(p)+1:s)}}();function tne(e,t){var r,n,a,s,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(mi(e)>16)throw Error(UR+mi(e));if(!e.s)return new d(Oc);for(Za=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(_p(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Oc),d.precision=o;;){if(a=Sa(a.times(e),o),r=r.times(++c),i=s.plus(lh(a,r,o)),HA(i.d).slice(0,o)===HA(s.d).slice(0,o)){for(;u--;)s=Sa(s.times(s),o);return d.precision=f,t==null?(Za=!0,Sa(s,f)):s}s=i}}function mi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function lT(e,t,r){if(t>e.LN10.sd())throw Za=!0,r&&(e.precision=r),Error(Vu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function D0(e){for(var t="";e--;)t+="0";return t}function qw(e,t){var r,n,a,s,i,o,c,u,d,f=1,h=10,p=e,g=p.d,x=p.constructor,b=x.precision;if(p.s<1)throw Error(Vu+(p.s?"NaN":"-Infinity"));if(p.eq(Oc))return new x(0);if(t==null?(Za=!1,u=b):u=t,p.eq(10))return t==null&&(Za=!0),lT(x,u);if(u+=h,x.precision=u,r=HA(g),n=r.charAt(0),s=mi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=HA(p.d),n=r.charAt(0),f++;s=mi(p),n>1?(p=new x("0."+r),s++):p=new x(n+"."+r.slice(1))}else return c=lT(x,u+2,b).times(s+""),p=qw(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=b,t==null?(Za=!0,Sa(p,b)):p;for(o=i=p=lh(p.minus(Oc),p.plus(Oc),u),d=Sa(p.times(p),u),a=3;;){if(i=Sa(i.times(d),u),c=o.plus(lh(i,new x(a),u)),HA(c.d).slice(0,u)===HA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(lT(x,u+2,b).times(s+""))),o=lh(o,new x(f),u),x.precision=b,t==null?(Za=!0,Sa(o,b)):o;o=c,a+=2}}function qz(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=G1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Za&&(e.e>PN||e.e<-PN))throw Error(UR+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,i,o,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=La,a=n-La+i}if(r!==void 0&&(s=_p(10,i-a-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/_p(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=mi(e),f.length=1,t=t-s-1,f[0]=_p(10,(La-t%La)%La),e.e=G1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=_p(10,La-n),f[d]=a>0?(u/_p(10,i-a)%_p(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==zi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=zi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Za&&(e.e>PN||e.e<-PN))throw Error(UR+mi(e));return e}function rne(e,t){var r,n,a,s,i,o,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Za?Sa(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(p/La),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=zi-1;--c[s],c[a]+=zi}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Za?Sa(t,p):t):new h(0)}function xg(e,t,r){var n,a=mi(e),s=HA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+D0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+D0(-a-1)+s,r&&(n=r-i)>0&&(s+=D0(n))):a>=i?(s+=D0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+D0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=D0(n))),e.s<0?"-"+s:s}function Wz(e,t){if(e.length>t)return e.length=t,!0}function nne(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Xp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return qz(i,s.toString())}else if(typeof s!="string")throw Error(Xp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,Mje.test(s))qz(i,s);else throw Error(Xp+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=nne,a.config=a.set=Uje,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Uje(e){if(!e||typeof e!="object")throw Error(Vu+"Object expected");var t,r,n,a=["precision",1,$1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(G1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Xp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Xp+r+": "+n);return this}var QR=nne(Lje);Oc=new QR(1);const ma=QR;var Qje=e=>e,ane={},sne=e=>e===ane,Xz=e=>function t(){return arguments.length===0||arguments.length===1&&sne(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ine=(e,t)=>e===1?t:Xz(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==ane).length;return s>=e?t(...n):ine(e-s,Xz(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>sne(d)?o.shift():d);return t(...u,...o)}))}),X4=e=>ine(e.length,e),NF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Hje=X4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Vje=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Qje;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}},SF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),one=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function lne(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function cne(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}X4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});X4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});X4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var une=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},dne=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=lne(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ma(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return t?new ma(c.toNumber()):new ma(Math.ceil(c.toNumber()))},zje=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow(lne(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var i=Math.floor((t-1)/2),o=Vje(Hje(c=>a.add(new ma(c-i).mul(n)).toNumber()),NF);return o(0,t)},Ane=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var i=dne(new ma(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ma(0):(o=new ma(t).add(r).div(2),o=o.sub(new ma(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ma(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?Ane(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ma(c).mul(i)),tickMax:o.add(new ma(u).mul(i))})};function $je(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=une([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...NF(0,n-1).map(()=>1/0)]:[...NF(0,n-1).map(()=>-1/0),o];return t>r?SF(c):c}if(i===o)return zje(i,n,a);var{step:u,tickMin:d,tickMax:f}=Ane(i,o,s,a,0),h=cne(d,f.add(new ma(.1).mul(u)),u);return t>r?SF(h):h}function Gje(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=une([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),c=dne(new ma(i).sub(s).div(o-1),a,0),u=[...cne(new ma(s),new ma(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?SF(u):u}var Kje=one($je),qje=one(Gje),fne=e=>e.rootProps.maxBarSize,Wje=e=>e.rootProps.barGap,hne=e=>e.rootProps.barCategoryGap,Xje=e=>e.rootProps.barSize,X2=e=>e.rootProps.stackOffset,HR=e=>e.options.chartName,VR=e=>e.rootProps.syncId,mne=e=>e.rootProps.syncMethod,zR=e=>e.options.eventEmitter,LA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Kl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},Y4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Yje={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:LA.angleAxisId,includeHidden:!1,name:void 0,reversed:LA.reversed,scale:LA.scale,tick:LA.tick,tickCount:void 0,ticks:void 0,type:LA.type,unit:void 0},Jje={allowDataOverflow:Kl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Kl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Kl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Kl.scale,tick:Kl.tick,tickCount:Kl.tickCount,ticks:void 0,type:Kl.type,unit:void 0},Zje={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:LA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:LA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:LA.scale,tick:LA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},eBe={allowDataOverflow:Kl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Kl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Kl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Kl.scale,tick:Kl.tick,tickCount:Kl.tickCount,ticks:void 0,type:"category",unit:void 0},K1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Zje:Yje,Y2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?eBe:Jje,J4=e=>e.polarOptions,$R=ut([Oh,Dh,ji],zte),pne=ut([J4,$R],(e,t)=>{if(e!=null)return El(e.innerRadius,t,0)}),gne=ut([J4,$R],(e,t)=>{if(e!=null)return El(e.outerRadius,t,t*.8)}),tBe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},xne=ut([J4],tBe),rBe=ut([K1,xne],Y4),vne=ut([$R,pne,gne],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),nBe=ut([Y2,vne],Y4),q1=ut([Tn,J4,pne,gne,Oh,Dh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:El(i,a,a/2),cy:El(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,J2=(e,t,r)=>r;function GR(e){return e==null?void 0:e.id}var Ti=e=>{var t=Tn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},W1=e=>e.tooltip.settings.axisId,Ii=e=>{var t=Ti(e),r=W1(e);return X1(e,t,r)};function bne(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,c=(o=i.data)!==null&&o!==void 0?o:n;if(!(c==null||c.length===0)){var u=GR(i);c.forEach((d,f)=>{var h=a==null?f:String(Pa(d,a,null)),p=Pa(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function Z4(e){return e.stackId!=null&&e.dataKey!=null}function Yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(r),!0).forEach(function(n){aBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aBe(e,t,r){return(t=sBe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sBe(e){var t=iBe(e,"string");return typeof t=="symbol"?t:t+""}function iBe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kF=[0,"auto"],kc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Rh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??kc},jc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:kF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:M4},Vm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??jc},oBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},KR=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??oBe},Ys=(e,t,r)=>{switch(t){case"xAxis":return Rh(e,r);case"yAxis":return Vm(e,r);case"zAxis":return KR(e,r);case"angleAxis":return K1(e,r);case"radiusAxis":return Y2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lBe=(e,t,r)=>{switch(t){case"xAxis":return Rh(e,r);case"yAxis":return Vm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},X1=(e,t,r)=>{switch(t){case"xAxis":return Rh(e,r);case"yAxis":return Vm(e,r);case"angleAxis":return K1(e,r);case"radiusAxis":return Y2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yne=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function qR(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var WR=e=>e.graphicalItems.cartesianItems,cBe=ut([ka,J2],qR),XR=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Z2=ut([WR,Ys,cBe],XR),wne=ut([Z2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Z4)),Ene=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Cne=ut([Z2],Ene),YR=e=>e.map(t=>t.data).filter(Boolean).flat(1),uBe=ut([Z2],YR),JR=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},ZR=ut([uBe,MR],JR),eL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),ek=ut([ZR,Ys,Z2],eL);function _ne(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Qg(e){return e.filter(t=>rf(t)||t instanceof Date).map(Number).filter(t=>Qc(t)===!1)}function dBe(e,t,r){return!r||typeof t!="number"||Qc(t)?[]:r.length?Qg(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!zc(s)||!zc(i)))return[t-s,t+i]})):[]}var ABe=ut([wne,MR,Ii],bne),Nne=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,c=o.map(GR);return[i,{stackedData:sNe(e,c,r),graphicalItems:o}]}))},jF=ut([ABe,wne,X2],Nne),Sne=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=uNe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},fBe=ut([jF,Hm,ka],Sne),kne=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>_ne(a,f)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:dBe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),tk=e=>e.errorBars,jne=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>_ne(r,n));ut([Cne,tk,ka],jne);var hBe=ut([ZR,Ys,Cne,tk,ka],kne);function mBe(e){var{value:t}=e;if(rf(t)||t instanceof Date)return t}var Jz=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Qg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},pBe=(e,t,r)=>{var n=e.map(mBe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Qee(n))?mre(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},tL=e=>{var t;if(e==null||!("domain"in e))return kF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Qg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:kF},LN=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},Bne=e=>e.referenceElements.dots,Y1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),gBe=ut([Bne,ka,J2],Y1),Tne=e=>e.referenceElements.areas,xBe=ut([Tne,ka,J2],Y1),Ine=e=>e.referenceElements.lines,vBe=ut([Ine,ka,J2],Y1),Fne=(e,t)=>{var r=Qg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bBe=ut(gBe,ka,Fne),One=(e,t)=>{var r=Qg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yBe=ut([xBe,ka],One),Dne=(e,t)=>{var r=Qg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wBe=ut(vBe,ka,Dne),EBe=ut(bBe,wBe,yBe,(e,t,r)=>LN(e,r,t)),Pne=ut([Ys],tL),rL=(e,t,r,n,a,s,i)=>{var o=Pje(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?LN(r,a,Jz(n)):LN(a,Jz(n));return Rje(t,u,e.allowDataOverflow)},CBe=ut([Ys,Pne,fBe,hBe,EBe,Tn,ka],rL),_Be=[0,1],nL=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=Mm(t,s);return u&&o==null?mre(0,r.length):c==="category"?pBe(n,e,u):a==="expand"?_Be:i}},aL=ut([Ys,Tn,ZR,ek,X2,ka,CBe],nL),Rne=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(V2(s));return o in Dy?o:"point"}}},zm=ut([Ys,Tn,yne,HR,ka],Rne);function NBe(e){if(e!=null){if(e in Dy)return Dy[e]();var t="scale".concat(V2(e));if(t in Dy)return Dy[t]()}}function rk(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=NBe(t);if(a!=null){var s=a.domain(r).range(n);return eNe(s),s}}}var sL=(e,t,r)=>{var n=tL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&o1(e))return Kje(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&o1(e))return qje(e,t.tickCount,t.allowDecimals)}},iL=ut([aL,X1,zm],sL),oL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&o1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},SBe=ut([Ys,aL,iL,ka],oL),kBe=ut(ek,Ys,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Qg(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),Lne=ut(kBe,Tn,hne,ji,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!zc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=El(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),jBe=(e,t)=>{var r=Rh(e,t);return r==null||typeof r.padding!="string"?0:Lne(e,"xAxis",t,r.padding)},BBe=(e,t)=>{var r=Vm(e,t);return r==null||typeof r.padding!="string"?0:Lne(e,"yAxis",t,r.padding)},TBe=ut(Rh,jBe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),IBe=ut(Vm,BBe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),FBe=ut([ji,TBe,Q4,U4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),OBe=ut([ji,Tn,IBe,Q4,U4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),eE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return FBe(e,r,n);case"yAxis":return OBe(e,r,n);case"zAxis":return(a=KR(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return xne(e);case"radiusAxis":return vne(e,r);default:return}},Mne=ut([Ys,eE],Y4),J1=ut([Ys,zm,SBe,Mne],rk);ut([Z2,tk,ka],jne);function Une(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var nk=(e,t)=>t,ak=(e,t,r)=>r,DBe=ut(cR,nk,ak,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Une)),PBe=ut(uR,nk,ak,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Une)),Qne=(e,t)=>({width:e.width,height:t.height}),RBe=(e,t)=>{var r=typeof t.width=="number"?t.width:M4;return{width:r,height:e.height}},Hne=ut(ji,Rh,Qne),LBe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},MBe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},UBe=ut(Dh,ji,DBe,nk,ak,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=Qne(t,o);i==null&&(i=LBe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),QBe=ut(Oh,ji,PBe,nk,ak,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=RBe(t,o);i==null&&(i=MBe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),HBe=(e,t)=>{var r=ji(e),n=Rh(e,t);if(n!=null){var a=UBe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},VBe=(e,t)=>{var r=ji(e),n=Vm(e,t);if(n!=null){var a=QBe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Vne=ut(ji,Vm,(e,t)=>{var r=typeof t.width=="number"?t.width:M4;return{width:r,height:e.height}}),Zz=(e,t,r)=>{switch(t){case"xAxis":return Hne(e,r).width;case"yAxis":return Vne(e,r).height;default:return}},zne=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Mm(e,n),c=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&Qee(c))return c}},tE=ut([Tn,ek,Ys,ka],zne),lL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Mm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},cL=ut([Tn,ek,X1,ka],lL),e$=ut([Tn,lBe,zm,J1,tE,cL,eE,iL,ka],(e,t,r,n,a,s,i,o,c)=>{if(t==null)return null;var u=Mm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),$ne=(e,t,r,n,a,s,i,o,c)=>{if(!(t==null||n==null)){var u=Mm(e,c),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=c==="angleAxis"&&s!=null&&s.length>=2?Yi(s[0]-s[1])*2*g:g;var x=f||a;if(x){var b=x.map((y,w)=>{var _=i?i.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return b.filter(y=>!Qc(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},Gne=ut([Tn,X1,zm,J1,iL,eE,tE,cL,ka],$ne),Kne=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Mm(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Yi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},l1=ut([Tn,X1,J1,eE,tE,cL,ka],Kne),c1=ut(Ys,J1,(e,t)=>{if(!(e==null||t==null))return RN(RN({},e),{},{scale:t})}),zBe=ut([Ys,zm,aL,Mne],rk);ut((e,t,r)=>KR(e,r),zBe,(e,t)=>{if(!(e==null||t==null))return RN(RN({},e),{},{scale:t})});var $Be=ut([Tn,cR,uR],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),qne=e=>e.options.defaultTooltipEventType,Wne=e=>e.options.validateTooltipEventTypes;function Xne(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function uL(e,t){var r=qne(e),n=Wne(e);return Xne(t,r,n)}function GBe(e){return or(t=>uL(t,e))}var Yne=(e,t)=>{var r,n=Number(t);if(!(Qc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},KBe=e=>e.tooltip.settings,H0={active:!1,index:null,dataKey:void 0,coordinate:void 0},qBe={itemInteraction:{click:H0,hover:H0},axisInteraction:{click:H0,hover:H0},keyboardInteraction:H0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Jne=qc({name:"tooltip",initialState:qBe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=oh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:WBe,removeTooltipEntrySettings:XBe,setTooltipSettingsState:YBe,setActiveMouseOverItemIndex:Zne,mouseLeaveItem:JBe,mouseLeaveChart:eae,setActiveClickItemIndex:ZBe,setMouseOverAxisIndex:tae,setMouseClickAxisIndex:e3e,setSyncInteraction:BF,setKeyboardInteraction:TF}=Jne.actions,t3e=Jne.reducer;function t$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t$(Object(r),!0).forEach(function(n){r3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r3e(e,t,r){return(t=n3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n3e(e){var t=a3e(e,"string");return typeof t=="symbol"?t:t+""}function a3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s3e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function i3e(e){return e.index!=null}var rae=(e,t,r,n)=>{if(t==null)return H0;var a=s3e(e,t,r);if(a==null)return H0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(i3e(a)){if(s)return $C($C({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return $C($C({},H0),{},{coordinate:a.coordinate})},dL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!zc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},nae=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},aae=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},rE=e=>e.options.tooltipPayloadSearcher,Z1=e=>e.tooltip;function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(n){o3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o3e(e,t,r){return(t=l3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l3e(e){var t=c3e(e,"string");return typeof t=="symbol"?t:t+""}function c3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u3e(e,t){return e??t}var sae=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:x,settings:b}=p,y=u3e(x,o),w=Array.isArray(y)?Gte(y,u,d):y,_=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?k=GEe(w,n.dataKey,a):k=s(w,t,c,j),Array.isArray(k))k.forEach(E=>{var N=n$(n$({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(DV({tooltipEntrySettings:N,dataKey:E.dataKey,payload:E.payload,value:Pa(E.payload,E.dataKey),name:E.name}))});else{var I;h.push(DV({tooltipEntrySettings:b,dataKey:_,payload:k,value:Pa(k,_),name:(I=Pa(k,j))!==null&&I!==void 0?I:b==null?void 0:b.name}))}return h},f)}},AL=ut([Ii,Tn,yne,HR,Ti],Rne),d3e=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),A3e=ut([Ti,W1],qR),nE=ut([d3e,Ii,A3e],XR),f3e=ut([nE],e=>e.filter(Z4)),h3e=ut([nE],YR),eb=ut([h3e,Hm],JR),m3e=ut([f3e,Hm,Ii],bne),fL=ut([eb,Ii,nE],eL),p3e=ut([Ii],tL),g3e=ut([nE],e=>e.filter(Z4)),x3e=ut([m3e,g3e,X2],Nne),v3e=ut([x3e,Hm,Ti],Sne),b3e=ut([nE],Ene),y3e=ut([eb,Ii,b3e,tk,Ti],kne),w3e=ut([Bne,Ti,W1],Y1),E3e=ut([w3e,Ti],Fne),C3e=ut([Tne,Ti,W1],Y1),_3e=ut([C3e,Ti],One),N3e=ut([Ine,Ti,W1],Y1),S3e=ut([N3e,Ti],Dne),k3e=ut([E3e,S3e,_3e],LN),j3e=ut([Ii,p3e,v3e,y3e,k3e,Tn,Ti],rL),iae=ut([Ii,Tn,eb,fL,X2,Ti,j3e],nL),B3e=ut([iae,Ii,AL],sL),T3e=ut([Ii,iae,B3e,Ti],oL),oae=e=>{var t=Ti(e),r=W1(e),n=!1;return eE(e,t,r,n)},lae=ut([Ii,oae],Y4),cae=ut([Ii,AL,T3e,lae],rk),I3e=ut([Tn,fL,Ii,Ti],zne),F3e=ut([Tn,fL,Ii,Ti],lL),O3e=(e,t,r,n,a,s,i,o)=>{if(t){var{type:c}=t,u=Mm(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Yi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},Lh=ut([Tn,Ii,AL,cae,oae,I3e,F3e,Ti],O3e),hL=ut([qne,Wne,KBe],(e,t,r)=>Xne(r.shared,e,t)),uae=e=>e.tooltip.settings.trigger,mL=e=>e.tooltip.settings.defaultIndex,sk=ut([Z1,hL,uae,mL],rae),Cm=ut([sk,eb],dL),dae=ut([Lh,Cm],Yne),Aae=ut([sk],e=>{if(e)return e.dataKey}),fae=ut([Z1,hL,uae,mL],aae),D3e=ut([Oh,Dh,Tn,ji,Lh,mL,fae,rE],nae),P3e=ut([sk,D3e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),R3e=ut([sk],e=>e.active),L3e=ut([fae,Cm,Hm,Ii,dae,rE,hL],sae),M3e=ut([L3e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function a$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a$(Object(r),!0).forEach(function(n){U3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U3e(e,t,r){return(t=Q3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q3e(e){var t=H3e(e,"string");return typeof t=="symbol"?t:t+""}function H3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V3e=()=>or(Ii),z3e=()=>{var e=V3e(),t=or(Lh),r=or(cae);return Vw(s$(s$({},e),{},{scale:r}),t)},$3e=()=>or(HR),pL=(e,t)=>t,hae=(e,t,r)=>r,gL=(e,t,r,n)=>n,G3e=ut(Lh,e=>I4(e,t=>t.coordinate)),xL=ut([Z1,pL,hae,gL],rae),mae=ut([xL,eb],dL),K3e=(e,t,r)=>{if(t!=null){var n=Z1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},pae=ut([Z1,pL,hae,gL],aae),MN=ut([Oh,Dh,Tn,ji,Lh,gL,pae,rE],nae),q3e=ut([xL,MN],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),gae=ut(Lh,mae,Yne),W3e=ut([pae,mae,Hm,Ii,gae,rE,pL],sae),X3e=ut([xL],e=>({isActive:e.active,activeIndex:e.index})),Y3e=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var c=dNe(e.chartX,e.chartY,t,r,o);if(c){var u=fNe(c,t),d=J5e(u,i,s,n,a),f=ANe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function IF(){return IF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IF.apply(null,arguments)}function i$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i$(Object(r),!0).forEach(function(n){J3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J3e(e,t,r){return(t=Z3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z3e(e){var t=eTe(e,"string");return typeof t=="symbol"?t:t+""}function eTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tTe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=uSe;else if(u==="BarChart")p=dSe(i,d,a,s),g=dre;else if(i==="radial"){var{cx:x,cy:b,radius:y,startAngle:w,endAngle:_}=Are(d);p={cx:x,cy:b,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=hre}else p={points:WSe(i,d,a)},g=are;var j=typeof o=="object"&&"className"in o?o.className:void 0,k=GC(GC(GC(GC({stroke:"#ccc",pointerEvents:"none"},a),p),Xn(o,!1)),{},{payload:f,payloadIndex:h,className:xn("recharts-tooltip-cursor",j)});return S.isValidElement(o)?S.cloneElement(o,k):S.createElement(g,k)}function rTe(e){var t=z3e(),r=Zte(),n=hR(),a=$3e();return S.createElement(tTe,IF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var xae=S.createContext(null),nTe=()=>S.useContext(xae),cT={exports:{}},o$;function aTe(){return o$||(o$=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],y=arguments.length,w,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];b.fn.apply(b.context,w)}else{var j=b.length,k;for(_=0;_<j;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),y){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,d);break;case 3:b[_].fn.call(b[_].context,d,f);break;case 4:b[_].fn.call(b[_].context,d,f,h);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];b[_].fn.apply(b[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var x=0,b=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&b.push(g[x]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(cT)),cT.exports}var sTe=aTe();const iTe=_l(sTe);var Ww=new iTe,FF="recharts.syncEvent.tooltip",l$="recharts.syncEvent.brush";function vL(e,t){if(t){var r=Number.parseInt(t,10);if(!Qc(r))return e==null?void 0:e[r]}}var oTe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},vae=qc({name:"options",initialState:oTe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),lTe=vae.reducer,{createEventEmitter:cTe}=vae.actions;function uTe(e){return e.tooltip.syncInteraction}var dTe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},bae=qc({name:"chartData",initialState:dTe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:c$,setDataStartEndIndexes:ATe,setComputedData:k0t}=bae.actions,fTe=bae.reducer,yae=()=>{};function hTe(){var e=or(VR),t=or(zR),r=$a(),n=or(mne),a=or(Lh),s=hR(),i=dR(),o=or(c=>c.rootProps.className);S.useEffect(()=>{if(e==null)return yae;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(BF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=x,w=Math.min(b,i.x+i.width),_=Math.min(y,i.y+i.height),j={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},k=BF({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(k)}}};return Ww.on(FF,c),()=>{Ww.off(FF,c)}},[o,r,t,e,n,a,s,i])}function mTe(){var e=or(VR),t=or(zR),r=$a();S.useEffect(()=>{if(e==null)return yae;var n=(a,s,i)=>{t!==i&&e===a&&r(ATe(s))};return Ww.on(l$,n),()=>{Ww.off(l$,n)}},[r,t,e])}function pTe(){var e=$a();S.useEffect(()=>{e(cTe())},[e]),hTe(),mTe()}function gTe(e,t,r,n,a,s){var i=or(h=>K3e(h,e,t)),o=or(zR),c=or(VR),u=or(mne),d=or(uTe),f=d==null?void 0:d.active;S.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=BF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Ww.emit(FF,c,h,o)}},[f,r,i,a,n,o,c,u,s])}function u$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(r),!0).forEach(function(n){xTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xTe(e,t,r){return(t=vTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vTe(e){var t=bTe(e,"string");return typeof t=="symbol"?t:t+""}function bTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yTe(e){return e.dataKey}function wTe(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(HNe,t)}var A$=[],ETe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Lg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function eh(e){var t=$u(e,ETe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:b,trigger:y,defaultIndex:w,portal:_,axisId:j}=t,k=$a(),I=typeof w=="number"?String(w):w;S.useEffect(()=>{k(YBe({shared:b,trigger:y,axisId:j,active:r,defaultIndex:I}))},[k,b,y,j,r,I]);var E=dR(),N=nre(),B=GBe(b),{activeIndex:R,isActive:D}=or(Z=>X3e(Z,B,y,I)),O=or(Z=>W3e(Z,B,y,I)),L=or(Z=>gae(Z,B,y,I)),M=or(Z=>q3e(Z,B,y,I)),J=O,V=nTe(),K=r??D,[z,G]=vte([J,K]),Y=B==="axis"?L:void 0;gTe(B,y,M,Y,R,K);var te=_??V;if(te==null)return null;var P=J??A$;K||(P=A$),o&&P.length&&(P=fte(J.filter(Z=>Z.value!=null&&(Z.hide!==!0||t.includeHidden)),d,yTe));var H=P.length>0,X=S.createElement(WNe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:K,coordinate:M,hasPayload:H,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:z,innerRef:G,hasPortalFromProps:!!_},wTe(i,d$(d$({},t),{},{payload:P,label:Y,active:K,coordinate:M,accessibilityLayer:N})));return S.createElement(S.Fragment,null,zP.createPortal(X,te),K&&S.createElement(rTe,{cursor:x,tooltipEventType:B,coordinate:M,payload:J,index:R}))}var uT={},dT={},AT={},f$;function CTe(){return f$||(f$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),x()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,o=w;const _=h==null;p(),c&&_&&d()};return y.schedule=p,y.cancel=x,y.flush=b,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(AT)),AT}var h$;function _Te(){return h$||(h$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CTe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),p=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(dT)),dT}var m$;function NTe(){return m$||(m$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Te();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(uT)),uT}var fT,p$;function STe(){return p$||(p$=1,fT=NTe().throttle),fT}var kTe=STe();const jTe=_l(kTe);var sw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){BTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BTe(e,t,r){return(t=TTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TTe(e){var t=ITe(e,"string");return typeof t=="symbol"?t:t+""}function ITe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var th=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,x=S.useRef(null),b=S.useRef();b.current=p,S.useImperativeHandle(t,()=>x.current);var[y,w]=S.useState({containerWidth:n.width,containerHeight:n.height}),_=S.useCallback((k,I)=>{w(E=>{var N=Math.round(k),B=Math.round(I);return E.containerWidth===N&&E.containerHeight===B?E:{containerWidth:N,containerHeight:B}})},[]);S.useEffect(()=>{var k=B=>{var R,{width:D,height:O}=B[0].contentRect;_(D,O),(R=b.current)===null||R===void 0||R.call(b,D,O)};d>0&&(k=jTe(k,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(k),{width:E,height:N}=x.current.getBoundingClientRect();return _(E,N),I.observe(x.current),()=>{I.disconnect()}},[_,d]);var j=S.useMemo(()=>{var{containerWidth:k,containerHeight:I}=y;if(k<0||I<0)return null;sw(Dp(a)||Dp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),sw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Dp(a)?k:a,N=Dp(s)?I:s;return r&&r>0&&(E?N=E/r:N&&(E=N*r),c&&N>c&&(N=c)),sw(E>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,N,a,s,i,o,r),S.Children.map(u,B=>S.cloneElement(B,{width:E,height:N,style:hT({width:E,height:N},B.props.style)}))},[r,u,s,c,o,i,y,a]);return S.createElement("div",{id:f?"".concat(f):void 0,className:xn("recharts-responsive-container",h),style:hT(hT({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:x},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),_m=e=>null;_m.displayName="Cell";function FTe(e,t,r){return(t=OTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OTe(e){var t=DTe(e,"string");return typeof t=="symbol"?t:t+""}function DTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class PTe{constructor(t){FTe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function x$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RTe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x$(Object(r),!0).forEach(function(n){LTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LTe(e,t,r){return(t=MTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MTe(e){var t=UTe(e,"string");return typeof t=="symbol"?t:t+""}function UTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QTe={cacheSize:2e3,enableCache:!0},wae=RTe({},QTe),v$=new PTe(wae.cacheSize),HTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},b$="recharts_measurement_span";function VTe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var y$=(e,t)=>{try{var r=document.getElementById(b$);r||(r=document.createElement("span"),r.setAttribute("id",b$),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,HTe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},iw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lg.isSsr)return{width:0,height:0};if(!wae.enableCache)return y$(t,r);var n=VTe(t,r),a=v$.get(n);if(a)return a;var s=y$(t,r);return v$.set(n,s),s},w$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,E$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zTe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$Te=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Eae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},GTe=Object.keys(Eae),uv="NaN";function KTe(e,t){return e*Eae[t]}class Vl{static parse(t){var r,[,n,a]=(r=$Te.exec(t))!==null&&r!==void 0?r:[];return new Vl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Qc(t)&&(this.unit=""),r!==""&&!zTe.test(r)&&(this.num=NaN,this.unit=""),GTe.includes(r)&&(this.num=KTe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Vl(NaN,""):new Vl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Vl(NaN,""):new Vl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Vl(NaN,""):new Vl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Vl(NaN,""):new Vl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qc(this.num)}}function Cae(e){if(e.includes(uv))return uv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=w$.exec(t))!==null&&r!==void 0?r:[],i=Vl.parse(n??""),o=Vl.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return uv;t=t.replace(w$,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=E$.exec(t))!==null&&u!==void 0?u:[],p=Vl.parse(d??""),g=Vl.parse(h??""),x=f==="+"?p.add(g):p.subtract(g);if(x.isNaN())return uv;t=t.replace(E$,x.toString())}return t}var C$=/\(([^()]*)\)/;function qTe(e){for(var t=e,r;(r=C$.exec(t))!=null;){var[,n]=r;t=t.replace(C$,Cae(n))}return t}function WTe(e){var t=e.replace(/\s+/g,"");return t=qTe(t),t=Cae(t),t}function XTe(e){try{return WTe(e)}catch{return uv}}function mT(e){var t=XTe(e.slice(5,-1));return t===uv?"":t}var YTe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JTe=["dx","dy","angle","className","breakAll"];function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(null,arguments)}function _$(e,t){if(e==null)return{};var r,n,a=ZTe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _ae=/[ \f\n\r\t\v\u2028\u2029]+/,Nae=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(_ae));var s=a.map(o=>({word:o,width:iw(o,n).width})),i=r?0:iw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},eIe=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=e,u=dr(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((O,L)=>{var{word:M,width:J}=L,V=O[O.length-1];if(V&&(n==null||a||V.width+J+r<Number(n)))V.words.push(M),V.width+=J+r;else{var K={words:[M],width:J};O.push(K)}return O},[])},h=f(t),p=R=>R.reduce((D,O)=>D.width>O.width?D:O);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var x="…",b=R=>{var D=d.slice(0,R),O=Nae({breakAll:c,style:o,children:D+x}).wordsWithComputedWidth,L=f(O),M=L.length>s||p(L).width>Number(n);return[M,L]},y=0,w=d.length-1,_=0,j;y<=w&&_<=d.length-1;){var k=Math.floor((y+w)/2),I=k-1,[E,N]=b(I),[B]=b(k);if(!E&&!B&&(y=k+1),E&&B&&(w=k-1),!E&&B){j=N;break}_++}return j||h},N$=e=>{var t=ks(e)?[]:e.toString().split(_ae);return[{words:t}]},tIe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Lg.isSsr){var o,c,u=Nae({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return N$(n);return eIe({breakAll:s,children:n,maxLines:i,style:a},o,c,t,r)}return N$(n)},S$="#808080",tb=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=S$}=e,d=_$(e,YTe),f=S.useMemo(()=>tIe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:x,breakAll:b}=d,y=_$(d,JTe);if(!rf(r)||!rf(n))return null;var w=r+(dr(h)?h:0),_=n+(dr(p)?p:0),j;switch(c){case"start":j=mT("calc(".concat(s,")"));break;case"middle":j=mT("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:j=mT("calc(".concat(f.length-1," * -").concat(a,")"));break}var k=[];if(i){var I=f[0].width,{width:E}=d;k.push("scale(".concat(dr(E)?E/I:1,")"))}return g&&k.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),k.length&&(y.transform=k.join(" ")),S.createElement("text",OF({},Xn(y,!0),{ref:t,x:w,y:_,className:xn("recharts-text",x),textAnchor:o,fill:u.includes("url")?S$:u}),f.map((N,B)=>{var R=N.words.join(b?"":" ");return S.createElement("tspan",{x:w,dy:B===0?j:a,key:"".concat(R,"-").concat(B)},R)}))});tb.displayName="Text";var rIe=["offset"],nIe=["labelRef"];function k$(e,t){if(e==null)return{};var r,n,a=aIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function j$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j$(Object(r),!0).forEach(function(n){sIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sIe(e,t,r){return(t=iIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iIe(e){var t=oIe(e,"string");return typeof t=="symbol"?t:t+""}function oIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wf.apply(null,arguments)}var lIe=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},bL=e=>e!=null&&typeof e=="function",cIe=(e,t)=>{var r=Yi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},uIe=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,x=cIe(f,h),b=x>=0?1:-1,y,w;a==="insideStart"?(y=f+b*s,w=p):a==="insideEnd"?(y=h-b*s,w=!p):a==="end"&&(y=h+b*s,w=p),w=x<=0?w:!w;var _=ea(o,c,g,y),j=ea(o,c,g,y+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),I=ks(e.id)?Uw("recharts-radial-line-"):e.id;return S.createElement("text",Wf({},r,{dominantBaseline:"central",className:xn("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:I,d:k})),S.createElement("textPath",{xlinkHref:"#".concat(I)},t))},dIe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=ea(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=ea(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},AIe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,x=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return ws(ws({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var w={x:s+o/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return ws(ws({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:o}:{})}if(a==="left"){var _={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return ws(ws({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:s+o+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"};return ws(ws({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var k=r?{width:o,height:c}:{};return a==="insideLeft"?ws({x:s+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"},k):a==="insideRight"?ws({x:s+o-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},k):a==="insideTop"?ws({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},k):a==="insideBottom"?ws({x:s+o/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},k):a==="insideTopLeft"?ws({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},k):a==="insideTopRight"?ws({x:s+o-g,y:i+d,textAnchor:x,verticalAnchor:h},k):a==="insideBottomLeft"?ws({x:s+g,y:i+c-d,textAnchor:b,verticalAnchor:f},k):a==="insideBottomRight"?ws({x:s+o-g,y:i+c-d,textAnchor:x,verticalAnchor:f},k):a&&typeof a=="object"&&(dr(a.x)||Dp(a.x))&&(dr(a.y)||Dp(a.y))?ws({x:s+El(a.x,o),y:i+El(a.y,c),textAnchor:"end",verticalAnchor:"end"},k):ws({x:s+o/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},fIe=e=>"cx"in e&&dr(e.cx);function Wl(e){var{offset:t=5}=e,r=k$(e,rIe),n=ws({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=or(q1),p=dR(),g=s==="center"?p:h??p,x=a||g;if(!x||ks(i)&&ks(o)&&!S.isValidElement(c)&&typeof c!="function")return null;var b=ws(ws({},n),{},{viewBox:x});if(S.isValidElement(c)){var{labelRef:y}=b,w=k$(b,nIe);return S.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=S.createElement(c,b),S.isValidElement(_))return _}else _=lIe(n);var j=fIe(x),k=Xn(n,!0);if(j&&(s==="insideStart"||s==="insideEnd"||s==="end"))return uIe(n,_,k,x);var I=j?dIe(x,n.offset,n.position):AIe(n,x);return S.createElement(tb,Wf({ref:f,className:xn("recharts-label",u)},k,I,{breakAll:d}),_)}Wl.displayName="Label";var Sae=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:x,clockWise:b,labelViewBox:y}=e;if(y)return y;if(dr(g)&&dr(x)){if(dr(d)&&dr(f))return{x:d,y:f,width:g,height:x};if(dr(h)&&dr(p))return{x:h,y:p,width:g,height:x}}if(dr(d)&&dr(f))return{x:d,y:f,width:0,height:0};if(dr(t)&&dr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},hIe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(Wl,Wf({key:"label-implicit"},n)):rf(e)?S.createElement(Wl,Wf({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===Wl?S.cloneElement(e,ws({key:"label-implicit"},n)):S.createElement(Wl,Wf({key:"label-implicit",content:e},n)):bL(e)?S.createElement(Wl,Wf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(Wl,Wf({},e,{key:"label-implicit"},n)):null},mIe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=Sae(t),o=z2(a,Wl).map((u,d)=>S.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var c=hIe(t.label,r||i,s);return[c,...o]};Wl.parseViewBox=Sae;Wl.renderCallByParent=mIe;var pT={},gT={},B$;function pIe(){return B$||(B$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(gT)),gT}var xT={},T$;function gIe(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(xT)),xT}var I$;function xIe(){return I$||(I$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pIe(),r=gIe(),n=YP();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(pT)),pT}var vT,F$;function vIe(){return F$||(F$=1,vT=xIe().last),vT}var bIe=vIe();const kae=_l(bIe);var yIe=["valueAccessor"],wIe=["data","dataKey","clockWise","id","textBreakAll"];function UN(){return UN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UN.apply(null,arguments)}function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(n){EIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EIe(e,t,r){return(t=CIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CIe(e){var t=_Ie(e,"string");return typeof t=="symbol"?t:t+""}function _Ie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P$(e,t){if(e==null)return{};var r,n,a=NIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SIe=e=>Array.isArray(e.value)?kae(e.value):e.value;function lm(e){var{valueAccessor:t=SIe}=e,r=P$(e,yIe),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,c=P$(r,wIe);return!n||!n.length?null:S.createElement(us,{className:"recharts-label-list"},n.map((u,d)=>{var f=ks(a)?t(u,d):Pa(u&&u.payload,a),h=ks(i)?{}:{id:"".concat(i,"-").concat(d)};return S.createElement(Wl,UN({},Xn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:Wl.parseViewBox(ks(s)?u:D$(D$({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}lm.displayName="LabelList";function kIe(e,t){return e?e===!0?S.createElement(lm,{key:"labelList-implicit",data:t}):S.isValidElement(e)||bL(e)?S.createElement(lm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?S.createElement(lm,UN({data:t},e,{key:"labelList-implicit"})):null:null}function jIe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=z2(n,lm).map((i,o)=>S.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=kIe(e.label,t);return[s,...a]}lm.renderCallByParent=jIe;var BIe=["points","className","baseLinePoints","connectNulls"];function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dv.apply(null,arguments)}function TIe(e,t){if(e==null)return{};var r,n,a=IIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function IIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var R$=e=>e&&e.x===+e.x&&e.y===+e.y,FIe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{R$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),R$(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ow=(e,t)=>{var r=FIe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},OIe=(e,t,r)=>{var n=ow(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(ow(t.reverse(),r).slice(1))},jae=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=TIe(e,BIe);if(!t||!t.length)return null;var i=xn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",c=OIe(t,n,a);return S.createElement("g",{className:i},S.createElement("path",dv({},Xn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),o?S.createElement("path",dv({},Xn(s,!0),{fill:"none",d:ow(t,a)})):null,o?S.createElement("path",dv({},Xn(s,!0),{fill:"none",d:ow(n,a)})):null)}var u=ow(t,a);return S.createElement("path",dv({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function DF(){return DF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DF.apply(null,arguments)}var yL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=xn("recharts-dot",a);return t===+t&&r===+r&&n===+n?S.createElement("circle",DF({},il(e),HP(e),{className:s,cx:t,cy:r,r:n})):null},wL=e=>e.graphicalItems.polarItems,DIe=ut([ka,J2],qR),EL=ut([wL,Ys,DIe],XR),PIe=ut([EL],YR),CL=ut([PIe,W4],JR),Bae=ut([CL,Ys,EL],eL),RIe=ut([CL,Ys,EL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),L$=()=>{},LIe=ut([Ys,Pne,L$,RIe,L$,Tn,ka],rL),Tae=ut([Ys,Tn,CL,Bae,X2,ka,LIe],nL),Iae=ut([Tae,Ys,zm],sL),MIe=ut([Ys,Tae,Iae,ka],oL),_L=(e,t,r)=>{switch(t){case"angleAxis":return K1(e,r);case"radiusAxis":return Y2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},NL=(e,t,r)=>{switch(t){case"angleAxis":return rBe(e,r);case"radiusAxis":return nBe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rb=ut([_L,zm,MIe,NL],rk),Fae=ut([Tn,Bae,X1,ka],lL),nb=ut([Tn,_L,zm,rb,Iae,NL,tE,Fae,ka],$ne);ut([Tn,_L,rb,NL,tE,Fae,ka],Kne);var UIe=(e,t)=>nb(e,"angleAxis",t,!1),QIe=ut([UIe],e=>{if(e)return e.map(t=>t.coordinate)}),HIe=(e,t)=>nb(e,"radiusAxis",t,!1),VIe=ut([HIe],e=>{if(e)return e.map(t=>t.coordinate)}),zIe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function $Ie(e,t){if(e==null)return{};var r,n,a=GIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function GIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ch.apply(null,arguments)}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){KIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KIe(e,t,r){return(t=qIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qIe(e){var t=WIe(e,"string");return typeof t=="symbol"?t:t+""}function WIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XIe=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=ea(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},YIe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=u1({stroke:"#ccc"},il(e));return S.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=ea(t,r,n,c),d=ea(t,r,a,c);return S.createElement("line",Ch({},o,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},JIe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=u1(u1({stroke:"#ccc"},il(e)),{},{fill:"none"});return S.createElement("circle",Ch({},s,{className:xn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},ZIe=e=>{var{radius:t,index:r}=e,n=u1(u1({stroke:"#ccc"},il(e)),{},{fill:"none"});return S.createElement("path",Ch({},n,{className:xn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:XIe(t,e.cx,e.cy,e.polarAngles)}))},e6e=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:S.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?S.createElement(JIe,Ch({key:s},e,{radius:n,index:a})):S.createElement(ZIe,Ch({key:s},e,{radius:n,index:a}))}))},Oae=e=>{var t,r,n,a,s,i,o,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:x,outerRadius:b}=e,y=$Ie(e,zIe),w=or(q1),_=u1({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(o=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:b)!==null&&o!==void 0?o:0},y),{polarAngles:j,polarRadius:k,cx:I,cy:E,innerRadius:N,outerRadius:B}=_,R=or(M=>QIe(M,f)),D=or(M=>VIe(M,h)),O=Array.isArray(j)?j:R,L=Array.isArray(k)?k:D;return B<=0||O==null||L==null?null:S.createElement("g",{className:"recharts-polar-grid"},S.createElement(YIe,Ch({cx:I,cy:E,innerRadius:N,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:O,polarRadius:L})),S.createElement(e6e,Ch({cx:I,cy:E,innerRadius:N,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:O,polarRadius:L})))};Oae.displayName="PolarGrid";var bT={},yT={},U$;function t6e(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c>s&&(s=c,a=o)}return a}e.maxBy=t}(yT)),yT}var Q$;function r6e(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t6e(),r=T4(),n=rR();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(bT)),bT}var wT,H$;function n6e(){return H$||(H$=1,wT=r6e().maxBy),wT}var a6e=n6e();const s6e=_l(a6e);var ET={},CT={},V$;function i6e(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c<s&&(s=c,a=o)}return a}e.minBy=t}(CT)),CT}var z$;function o6e(){return z$||(z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i6e(),r=T4(),n=rR();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(ET)),ET}var _T,$$;function l6e(){return $$||($$=1,_T=o6e().minBy),_T}var c6e=l6e();const u6e=_l(c6e);var d6e={radiusAxis:{},angleAxis:{}},Dae=qc({name:"polarAxis",initialState:d6e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:A6e,removeRadiusAxis:f6e,addAngleAxis:h6e,removeAngleAxis:m6e}=Dae.actions,p6e=Dae.reducer,g6e=["cx","cy","angle","axisLine"],x6e=["angle","tickFormatter","stroke","tick"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xw.apply(null,arguments)}function G$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(r),!0).forEach(function(n){ik(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ik(e,t,r){return(t=v6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v6e(e){var t=b6e(e,"string");return typeof t=="symbol"?t:t+""}function b6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pae(e,t){if(e==null)return{};var r,n,a=y6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Rae="radiusAxis";function w6e(e){var t=$a();return S.useEffect(()=>(t(A6e(e)),()=>{t(f6e(e))})),null}var E6e=(e,t,r,n)=>{var{coordinate:a}=e;return ea(r,n,a,t)},C6e=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},_6e=(e,t,r,n)=>{var a=s6e(n,i=>i.coordinate||0),s=u6e(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},N6e=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=Pae(e,g6e),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=ea(r,n,o[0],a),u=ea(r,n,o[1],a),d=VA(VA(VA({},il(i)),{},{fill:"none"},Xn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return S.createElement("line",Xw({className:"recharts-polar-radius-axis-line"},d))},S6e=(e,t,r)=>{var n;return S.isValidElement(e)?n=S.cloneElement(e,t):typeof e=="function"?n=e(t):n=S.createElement(tb,Xw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},k6e=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=Pae(e,x6e),o=C6e(e.orientation),c=il(i),u=Xn(s,!1),d=t.map((f,h)=>{var p=E6e(f,e.angle,e.cx,e.cy),g=VA(VA(VA(VA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return S.createElement(us,Xw({className:xn("recharts-polar-radius-axis-tick",$te(s)),key:"tick-".concat(f.coordinate)},Rg(e,f,h)),S6e(s,g,n?n(f.value,h):f.value))});return S.createElement(us,{className:"recharts-polar-radius-axis-ticks"},d)},j6e=e=>{var{radiusAxisId:t}=e,r=or(q1),n=or(c=>rb(c,"radiusAxis",t)),a=or(c=>nb(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=VA(VA(VA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return S.createElement(us,{className:xn("recharts-polar-radius-axis",Rae,s.className)},o&&N6e(s,a),i&&k6e(s,a),Wl.renderCallByParent(s,_6e(s.angle,s.cx,s.cy,a)))};class ok extends S.PureComponent{render(){return S.createElement(S.Fragment,null,S.createElement(w6e,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),S.createElement(j6e,this.props))}}ik(ok,"displayName","PolarRadiusAxis");ik(ok,"axisType",Rae);ik(ok,"defaultProps",Kl);var B6e=["children"];function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_h.apply(null,arguments)}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){lk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lk(e,t,r){return(t=T6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T6e(e){var t=I6e(e,"string");return typeof t=="symbol"?t:t+""}function I6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F6e(e,t){if(e==null)return{};var r,n,a=O6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function O6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var D6e=Math.PI/180,q$=1e-5,Lae="angleAxis";function P6e(e){var t=$a(),r=S.useMemo(()=>{var{children:s}=e,i=F6e(e,B6e);return i},[e]),n=or(s=>K1(s,r.id)),a=r===n;return S.useEffect(()=>(t(h6e(r)),()=>{t(m6e(r))}),[t,r]),a?e.children:null}var R6e=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,c=ea(r,n,a,e.coordinate),u=ea(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},L6e=(e,t)=>{var r=Math.cos(-e.coordinate*D6e);return r>q$?t==="outer"?"start":"end":r<-q$?t==="outer"?"end":"start":"middle"},M6e=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=MA(MA({},il(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return S.createElement(yL,_h({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var c=i.map(u=>ea(t,r,n,u.coordinate));return S.createElement(jae,_h({className:"recharts-polar-angle-axis-line"},o,{points:c}))},U6e=e=>{var{tick:t,tickProps:r,value:n}=e;return t?S.isValidElement(t)?S.cloneElement(t,r):typeof t=="function"?t(r):S.createElement(tb,_h({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},Q6e=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=il(e),o=Xn(t,!1),c=MA(MA({},i),{},{fill:"none"},Xn(r,!1)),u=s.map((d,f)=>{var h=R6e(d,e),p=L6e(d,e.orientation),g=MA(MA(MA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return S.createElement(us,_h({className:xn("recharts-polar-angle-axis-tick",$te(t)),key:"tick-".concat(d.coordinate)},Rg(e,d,f)),r&&S.createElement("line",_h({className:"recharts-polar-angle-axis-tick-line"},c,h)),S.createElement(U6e,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return S.createElement(us,{className:"recharts-polar-angle-axis-ticks"},u)},H6e=e=>{var{angleAxisId:t}=e,r=or(q1),n=or(o=>rb(o,"angleAxis",t)),a=sc(),s=or(o=>nb(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=MA(MA(MA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return S.createElement(us,{className:xn("recharts-polar-angle-axis",Lae,i.className)},S.createElement(M6e,_h({},i,{ticks:s})),S.createElement(Q6e,_h({},i,{ticks:s})))};class ck extends S.PureComponent{render(){return this.props.radius<=0?null:S.createElement(P6e,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},S.createElement(H6e,this.props))}}lk(ck,"displayName","PolarAngleAxis");lk(ck,"axisType",Lae);lk(ck,"defaultProps",LA);function W$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(r),!0).forEach(function(n){V6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V6e(e,t,r){return(t=z6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z6e(e){var t=$6e(e,"string");return typeof t=="symbol"?t:t+""}function $6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G6e=(e,t)=>t,SL=ut([wL,G6e],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),K6e=[],kL=(e,t,r)=>(r==null?void 0:r.length)===0?K6e:r,Mae=ut([W4,SL,kL],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>X$(X$({},t.presentationProps),s.props))),a!=null)return a}}),q6e=ut([Mae,SL,kL],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Pa(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:H1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),W6e=ut([Mae,SL,kL,ji],(e,t,r,n)=>{if(!(t==null||e==null))return HFe({offset:n,pieSettings:t,displayedData:e,cells:r})}),NT={},Y$;function X6e(){return Y$||(Y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(NT)),NT}var ST,J$;function Y6e(){return J$||(J$=1,ST=X6e().isPlainObject),ST}var J6e=Y6e();const Z6e=_l(J6e);function QN(){return QN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QN.apply(null,arguments)}var Z$=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},eFe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tFe=e=>{var t=$u(e,eFe),r=S.useRef(),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var x=xn("recharts-trapezoid",d);return g?S.createElement(_N,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:w,height:_,x:j,y:k}=b;return S.createElement(_N,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},S.createElement("path",QN({},Xn(t,!0),{className:x,d:Z$(j,k,y,w,_),ref:r})))}):S.createElement("g",null,S.createElement("path",QN({},Xn(t,!0),{className:x,d:Z$(s,i,o,c,u)})))},rFe=["option","shapeType","propTransformer","activeClassName","isActive"];function nFe(e,t){if(e==null)return{};var r,n,a=aFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eG(Object(r),!0).forEach(function(n){sFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sFe(e,t,r){return(t=iFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iFe(e){var t=oFe(e,"string");return typeof t=="symbol"?t:t+""}function oFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lFe(e,t){return HN(HN({},t),e)}function cFe(e,t){return e==="symbols"}function tG(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return S.createElement(dre,r);case"trapezoid":return S.createElement(tFe,r);case"sector":return S.createElement(hre,r);case"symbols":if(cFe(t))return S.createElement(qP,r);break;default:return null}}function uFe(e){return S.isValidElement(e)?e.props:e}function Uae(e){var{option:t,shapeType:r,propTransformer:n=lFe,activeClassName:a="recharts-active-shape",isActive:s}=e,i=nFe(e,rFe),o;if(S.isValidElement(t))o=S.cloneElement(t,HN(HN({},i),uFe(t)));else if(typeof t=="function")o=t(i);else if(Z6e(t)&&typeof t!="boolean"){var c=n(t,i);o=S.createElement(tG,{shapeType:r,elementProps:c})}else{var u=i;o=S.createElement(tG,{shapeType:r,elementProps:u})}return s?S.createElement(us,{className:a},o):o}var jL=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(Zne({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},BL=e=>{var t=$a();return(r,n)=>a=>{e==null||e(r,n,a),t(JBe())}},TL=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(ZBe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function IL(e){var{fn:t,args:r}=e,n=$a(),a=sc();return S.useEffect(()=>{if(!a){var s=t(r);return n(WBe(s)),()=>{n(XBe(s))}}},[t,r,n,a]),null}var Qae=()=>{};function dFe(e){var{legendPayload:t}=e,r=$a(),n=sc();return S.useEffect(()=>n?Qae:(r(tre(t)),()=>{r(rre(t))}),[r,n,t]),null}function Hae(e){var{legendPayload:t}=e,r=$a(),n=or(Tn);return S.useEffect(()=>n!=="centric"&&n!=="radial"?Qae:(r(tre(t)),()=>{r(rre(t))}),[r,n,t]),null}function FL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(Uw(t)),n=S.useRef(e);return n.current!==e&&(r.current=Uw(t),n.current=e),r.current}var kT,AFe=()=>{var[e]=S.useState(()=>Uw("uid-"));return e},fFe=(kT=Mfe.useId)!==null&&kT!==void 0?kT:AFe;function hFe(e,t){var r=fFe();return t||(e?"".concat(e,"-").concat(r):r)}var mFe=S.createContext(void 0),OL=e=>{var{id:t,type:r,children:n}=e,a=hFe("recharts-".concat(r),t);return S.createElement(mFe.Provider,{value:a},n(a))},pFe={cartesianItems:[],polarItems:[]},Vae=qc({name:"graphicalItems",initialState:pFe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=oh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=oh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=oh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:gFe,replaceCartesianGraphicalItem:xFe,removeCartesianGraphicalItem:vFe,addPolarGraphicalItem:bFe,removePolarGraphicalItem:yFe}=Vae.actions,wFe=Vae.reducer;function EFe(e){var t=$a(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(gFe(e)):r.current!==e&&t(xFe({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(vFe(r.current)),r.current=null)},[t]),null}function zae(e){var t=$a();return S.useEffect(()=>(t(bFe(e)),()=>{t(yFe(e))}),[t,e]),null}function CFe(){}var _Fe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rG={t:0},jT={t:1};function DL(e){var t=$u(e,_Fe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=ure("JavascriptAnimate",t.animationManager),[f,h]=S.useState(r?rG:jT),p=S.useRef(null);return S.useEffect(()=>{r||h(jT)},[r]),S.useEffect(()=>{if(!r||!n)return CFe;var g=cre(rG,jT,ore(s),a,h,d.getTimeoutController()),x=()=>{p.current=g()};return d.start([c,i,x,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,c,o,d]),u(f.t)}var NFe=["onMouseEnter","onClick","onMouseLeave"],SFe=["id"],kFe=["id"];function PL(e,t){if(e==null)return{};var r,n,a=jFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nG(Object(r),!0).forEach(function(n){BFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BFe(e,t,r){return(t=TFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TFe(e){var t=IFe(e,"string");return typeof t=="symbol"?t:t+""}function IFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nh.apply(null,arguments)}function FFe(e){var t=S.useMemo(()=>z2(e.children,_m),[e.children]),r=or(n=>q6e(n,e.id,t));return r==null?null:S.createElement(Hae,{legendPayload:r})}function OFe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:H1(o,t),hide:c,type:u,color:i,unit:""}}}var DFe=(e,t)=>e>t?"start":e<t?"end":"middle",PFe=(e,t,r)=>typeof t=="function"?t(e):El(t,r,r*.8),RFe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=zte(s,i),c=a+El(e.cx,s,s/2),u=n+El(e.cy,i,i/2),d=El(e.innerRadius,o,0),f=PFe(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},LFe=(e,t)=>{var r=Yi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},MFe=(e,t)=>{if(S.isValidElement(e))return S.cloneElement(e,t);if(typeof e=="function")return e(t);var r=xn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return S.createElement(are,Nh({},t,{type:"linear",className:r}))},UFe=(e,t,r)=>{if(S.isValidElement(e))return S.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),S.isValidElement(n)))return n;var a=xn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return S.createElement(tb,Nh({},t,{alignmentBaseline:"middle",className:a}),n)};function QFe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=il(r),c=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,x=ea(h.cx,h.cy,h.outerRadius+d,g),b=_s(_s(_s(_s({},o),h),{},{stroke:"none"},c),{},{index:p,textAnchor:DFe(x.x,h.cx)},x),y=_s(_s(_s(_s({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[ea(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return S.createElement(us,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&MFe(s,y),UFe(a,b,Pa(h,i)))});return S.createElement(us,{className:"recharts-pie-labels"},f)}function $ae(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=or(Cm),{onMouseEnter:o,onClick:c,onMouseLeave:u}=a,d=PL(a,NFe),f=jL(o,a.dataKey),h=BL(u),p=TL(c,a.dataKey);return t==null?null:S.createElement(S.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(x)===i,y=i?n:null,w=b?r:y,_=_s(_s({},g),{},{stroke:g.stroke,tabIndex:-1,[Xte]:x,[Yte]:a.dataKey});return S.createElement(us,Nh({tabIndex:-1,className:"recharts-pie-sector"},Rg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:p(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),S.createElement(Uae,Nh({option:w,isActive:b,shapeType:"sector"},_)))}),S.createElement(QFe,{sectors:t,props:a,showLabels:s}))}function HFe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=LFe(o,c),g=Math.abs(p),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(I=>Pa(I,u,0)!==0).length,y=(g>=360?b:b-1)*x,w=g-b*h-y,_=n.reduce((I,E)=>{var N=Pa(E,u,0);return I+(dr(N)?N:0)},0),j;if(_>0){var k;j=n.map((I,E)=>{var N=Pa(I,u,0),B=Pa(I,d,E),R=RFe(r,s,I),D=(dr(N)?N:0)/_,O,L=_s(_s({},I),a&&a[E]&&a[E].props);E?O=k.endAngle+Yi(p)*x*(N!==0?1:0):O=o;var M=O+Yi(p)*((N!==0?h:0)+D*w),J=(O+M)/2,V=(R.innerRadius+R.outerRadius)/2,K=[{name:B,value:N,payload:L,dataKey:u,type:f}],z=ea(R.cx,R.cy,V,J);return k=_s(_s(_s(_s({},r.presentationProps),{},{percent:D,cornerRadius:i,name:B,tooltipPayload:K,midAngle:J,middleRadius:V,tooltipPosition:z},L),R),{},{value:Pa(I,u),startAngle:O,endAngle:M,payload:L,paddingAngle:Yi(p)*x}),k})}return j}function VFe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=FL(t,"recharts-pie-"),p=r.current,[g,x]=S.useState(!0),b=S.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=S.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return S.createElement(DL,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((I,E)=>{var N=p&&p[E],B=E>0?Em(I,"paddingAngle",0):0;if(N){var R=cv(N.endAngle-N.startAngle,I.endAngle-I.startAngle),D=_s(_s({},I),{},{startAngle:k+B,endAngle:k+R(w)+B});_.push(D),k=D.endAngle}else{var{endAngle:O,startAngle:L}=I,M=cv(0,O-L),J=M(w),V=_s(_s({},I),{},{startAngle:k+B,endAngle:k+J+B});_.push(V),k=V.endAngle}}),r.current=_,S.createElement(us,null,S.createElement($ae,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function zFe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=S.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?S.createElement(VFe,{props:e,previousSectorsRef:s}):S.createElement($ae,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function $Fe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=xn("recharts-pie",r);return t?null:S.createElement(us,{tabIndex:n,className:a},S.createElement(zFe,e))}var GFe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Lg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function KFe(e){var{id:t}=e,r=PL(e,SFe),n=S.useMemo(()=>z2(e.children,_m),[e.children]),a=or(s=>W6e(s,t,n));return S.createElement(S.Fragment,null,S.createElement(IL,{fn:OFe,args:_s(_s({},e),{},{sectors:a})}),S.createElement($Fe,Nh({},r,{sectors:a})))}function uk(e){var t=$u(e,GFe),{id:r}=t,n=PL(t,kFe),a=il(n);return S.createElement(OL,{id:r,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(zae,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),S.createElement(FFe,Nh({},n,{id:s})),S.createElement(KFe,Nh({},n,{id:s})),n.children))}uk.displayName="Pie";var qFe=ut([ji],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),WFe=ut([qFe,Oh,Dh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Gae=()=>or(WFe),XFe=()=>or(M3e);function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(n){YFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YFe(e,t,r){return(t=JFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JFe(e){var t=ZFe(e,"string");return typeof t=="symbol"?t:t+""}function ZFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eOe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=sG(sG({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),HP(a)),o;return S.isValidElement(a)?o=S.cloneElement(a,i):typeof a=="function"?o=a(i):o=S.createElement(yL,i),S.createElement(us,{className:"recharts-active-dot"},o)};function tOe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=or(Cm),i=XFe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return ks(o)?null:eOe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(n){rOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rOe(e,t,r){return(t=nOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nOe(e){var t=aOe(e,"string");return typeof t=="symbol"?t:t+""}function aOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kae=(e,t)=>rb(e,"radiusAxis",t),sOe=ut([Kae],e=>{if(e!=null)return{scale:e}}),iOe=ut([Y2,Kae],(e,t)=>{if(!(e==null||t==null))return VN(VN({},e),{},{scale:t})}),oOe=(e,t,r,n)=>nb(e,"radiusAxis",t,n),qae=(e,t,r)=>K1(e,r),Wae=(e,t,r)=>rb(e,"angleAxis",r),lOe=ut([qae,Wae],(e,t)=>{if(!(e==null||t==null))return VN(VN({},e),{},{scale:t})}),cOe=(e,t,r,n)=>nb(e,"angleAxis",r,n),uOe=ut([qae,Wae,q1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),dOe=(e,t,r,n,a)=>a,AOe=ut([Tn,iOe,oOe,lOe,cOe],(e,t,r,n,a)=>Mm(e,"radiusAxis")?Vw(t,r,!1):Vw(n,a,!1)),fOe=ut([wL,dOe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),hOe=ut([sOe,uOe,W4,fOe,AOe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,o+1);return EOe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),mOe=["id"];function pOe(e,t){if(e==null)return{};var r,n,a=gOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oG(Object(r),!0).forEach(function(n){RL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RL(e,t,r){return(t=xOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xOe(e){var t=vOe(e,"string");return typeof t=="symbol"?t:t+""}function vOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d1.apply(null,arguments)}function LL(e,t){return e&&e!=="none"?e:t}var bOe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:LL(n,a),value:H1(r,t),payload:e}]};function yOe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:H1(s,t),hide:i,type:o,color:LL(r,a),unit:""}}}function wOe(e,t){var r;return S.isValidElement(e)?r=S.cloneElement(e,t):typeof e=="function"?r=e(t):r=S.createElement(yL,d1({},t,{className:xn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function EOe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Pa(h,r.dataKey,p),x=Pa(h,a),b=r.scale(g)+d,y=Array.isArray(x)?kae(x):x,w=ks(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(bl(bl({},ea(i,o,w,b)),{},{name:g,value:x,cx:i,cy:o,radius:w,angle:b,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=ks(p)?void 0:t.scale(p);f.push(bl(bl({},h),{},{radius:g},ea(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function COe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=pOe(r,mOe),o=il(i),c=Xn(n,!0),u=t.map((d,f)=>{var h=bl(bl(bl({key:"dot-".concat(f),r:3},o),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return wOe(n,h)});return S.createElement(us,{className:"recharts-radar-dots"},u)}function Xae(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return S.isValidElement(a)?d=S.cloneElement(a,bl(bl({},r),{},{points:t})):typeof a=="function"?d=a(bl(bl({},r),{},{points:t})):d=S.createElement(jae,d1({},Xn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),S.createElement(us,{className:"recharts-radar-polygon"},d,S.createElement(COe,{props:r,points:t}),n&&lm.renderCallByParent(r,t))}function _Oe(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=FL(t,"recharts-radar-"),[h,p]=S.useState(!0),g=S.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),x=S.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return S.createElement(DL,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},b=>{var y=d&&d.length/n.length,w=b===1?n:n.map((_,j)=>{var k=d&&d[Math.floor(j*y)];if(k){var I=cv(k.x,_.x),E=cv(k.y,_.y);return bl(bl({},_),{},{x:I(b),y:E(b)})}var N=cv(_.cx,_.x),B=cv(_.cy,_.y);return bl(bl({},_),{},{x:N(b),y:B(b)})});return b>0&&(r.current=w),S.createElement(Xae,{points:w,props:t,showLabels:!h})})}function NOe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=S.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?S.createElement(_Oe,{props:e,previousPointsRef:a}):S.createElement(Xae,{points:t,props:e,showLabels:!0})}var SOe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Lg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class kOe extends S.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=xn("recharts-radar",r);return S.createElement(S.Fragment,null,S.createElement(us,{className:a},S.createElement(NOe,this.props)),S.createElement(tOe,{points:n,mainColor:LL(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function jOe(e){var t=sc(),r=or(n=>hOe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return S.createElement(kOe,d1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class ML extends S.PureComponent{render(){return S.createElement(OL,{id:this.props.id,type:"radar"},t=>S.createElement(S.Fragment,null,S.createElement(zae,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),S.createElement(Hae,{legendPayload:bOe(this.props)}),S.createElement(IL,{fn:yOe,args:this.props}),S.createElement(jOe,d1({},this.props,{id:t}))))}}RL(ML,"displayName","Radar");RL(ML,"defaultProps",SOe);var BOe="Invariant failed";function TOe(e,t){throw new Error(BOe)}var IOe=["x","y"];function PF(){return PF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PF.apply(null,arguments)}function lG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lG(Object(r),!0).forEach(function(n){FOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FOe(e,t,r){return(t=OOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OOe(e){var t=DOe(e,"string");return typeof t=="symbol"?t:t+""}function DOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function POe(e,t){if(e==null)return{};var r,n,a=ROe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ROe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function LOe(e,t){var{x:r,y:n}=e,a=POe(e,IOe),s="".concat(r),i=parseInt(s,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return sy(sy(sy(sy(sy({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Yae(e){return S.createElement(Uae,PF({shapeType:"rectangle",propTransformer:LOe,activeClassName:"recharts-active-bar"},e))}var MOe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(dr(t))return t;var s=dr(n)||ks(n);return s?t(n,a):(s||TOe(),r)}},UOe={},Jae=qc({name:"errorBars",initialState:UOe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:j0t,removeErrorBar:B0t}=Jae.actions,QOe=Jae.reducer,HOe=["children"];function VOe(e,t){if(e==null)return{};var r,n,a=zOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $Oe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},GOe=S.createContext($Oe);function KOe(e){var{children:t}=e,r=VOe(e,HOe);return S.createElement(GOe.Provider,{value:r},t)}function Zae(e,t){var r,n,a=or(u=>Rh(u,e)),s=or(u=>Vm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:kc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:jc.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function qOe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Gae(),{needClipX:s,needClipY:i,needClip:o}=Zae(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=a;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var WOe=["onMouseEnter","onMouseLeave","onClick"],XOe=["value","background","tooltipPosition"],YOe=["id"],JOe=["onMouseEnter","onClick","onMouseLeave"];function A1(){return A1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A1.apply(null,arguments)}function cG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cG(Object(r),!0).forEach(function(n){ZOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZOe(e,t,r){return(t=eDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eDe(e){var t=tDe(e,"string");return typeof t=="symbol"?t:t+""}function tDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zN(e,t){if(e==null)return{};var r,n,a=rDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nDe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:H1(r,t),payload:e}]};function aDe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:H1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function sDe(e){var t=or(Cm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=zN(s,WOe),d=jL(i,n),f=BL(o),h=TL(c,n);if(!a||r==null)return null;var p=Xn(a,!1);return S.createElement(S.Fragment,null,r.map((g,x)=>{var{value:b,background:y,tooltipPosition:w}=g,_=zN(g,XOe);if(!y)return null;var j=d(g,x),k=f(g,x),I=h(g,x),E=Wo(Wo(Wo(Wo(Wo({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),p),Rg(u,g,x)),{},{onMouseEnter:j,onMouseLeave:k,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return S.createElement(Yae,A1({key:"background-bar-".concat(x)},E))}))}function ese(e){var{data:t,props:r,showLabels:n}=e,a=il(r),{id:s}=a,i=zN(a,YOe),{shape:o,dataKey:c,activeBar:u}=r,d=or(Cm),f=or(Aae),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,x=zN(r,JOe),b=jL(h,c),y=BL(g),w=TL(p,c);return t?S.createElement(S.Fragment,null,t.map((_,j)=>{var k=u&&String(j)===d&&(f==null||c===f),I=k?u:o,E=Wo(Wo(Wo({},i),_),{},{isActive:k,option:I,index:j,dataKey:c});return S.createElement(us,A1({className:"recharts-bar-rectangle"},Rg(x,_,j),{onMouseEnter:b(_,j),onMouseLeave:y(_,j),onClick:w(_,j),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(j)}),S.createElement(Yae,E))}),n&&lm.renderCallByParent(r,t)):null}function iDe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=FL(t,"recharts-bar-"),[p,g]=S.useState(!1),x=S.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=S.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return S.createElement(DL,{begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:b,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,j)=>{var k=f&&f[j];if(k)return Wo(Wo({},_),{},{x:Sx(k.x,_.x,y),y:Sx(k.y,_.y,y),width:Sx(k.width,_.width,y),height:Sx(k.height,_.height,y)});if(a==="horizontal"){var I=Sx(0,_.height,y);return Wo(Wo({},_),{},{y:_.y+_.height-I,height:I})}var E=Sx(0,_.width,y);return Wo(Wo({},_),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:S.createElement(us,null,S.createElement(ese,{props:t,data:w,showLabels:!p}))})}function oDe(e){var{data:t,isAnimationActive:r}=e,n=S.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?S.createElement(iDe,{previousRectanglesRef:n,props:e}):S.createElement(ese,{props:e,data:t,showLabels:!0})}var tse=0,lDe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class cDe extends S.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=xn("recharts-bar",a),f=u;return S.createElement(us,{className:d,id:u},o&&S.createElement("defs",null,S.createElement(qOe,{clipPathId:f,xAxisId:s,yAxisId:i})),S.createElement(us,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},S.createElement(sDe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),S.createElement(oDe,this.props)),this.props.children)}}var uDe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Lg.isSsr,legendType:"rect",minPointSize:tse,xAxisId:0,yAxisId:0};function dDe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Zae(t,r),h=hR(),p=sc(),g=z2(e.children,_m),x=or(w=>LDe(w,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,S.createElement(KOe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:lDe,errorBarOffset:b},S.createElement(cDe,A1({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function ADe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,x=d?g.scale.domain():null,b=oNe({numericAxis:g});return f.map((y,w)=>{var _,j,k,I,E,N;d?_=tNe(d[w],x):(_=Pa(y,r),Array.isArray(_)||(_=[b,_]));var B=MOe(n,tse)(_[1],w);if(t==="horizontal"){var R,[D,O]=[o.scale(_[0]),o.scale(_[1])];j=IV({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),k=(R=O??D)!==null&&R!==void 0?R:void 0,I=a.size;var L=D-O;if(E=Qc(L)?0:L,N={x:j,y:h.top,width:I,height:h.height},Math.abs(B)>0&&Math.abs(E)<Math.abs(B)){var M=Yi(E||B)*(Math.abs(B)-Math.abs(E));k-=M,E+=M}}else{var[J,V]=[i.scale(_[0]),i.scale(_[1])];if(j=J,k=IV({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),I=V-J,E=a.size,N={x:h.left,y:k,width:h.width,height:E},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var K=Yi(I||B)*(Math.abs(B)-Math.abs(I));I+=K}}if(j==null||k==null||I==null||E==null)return null;var z=Wo(Wo({},y),{},{x:j,y:k,width:I,height:E,value:d?_:_[1],payload:y,background:N,tooltipPosition:{x:j+I/2,y:k+E/2}},p&&p[w]&&p[w].props);return z}).filter(Boolean)}function f1(e){var t=$u(e,uDe),r=sc();return S.createElement(OL,{id:t.id,type:"bar"},n=>S.createElement(S.Fragment,null,S.createElement(dFe,{legendPayload:nDe(t)}),S.createElement(IL,{fn:aDe,args:t}),S.createElement(EFe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:iNe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),S.createElement(dDe,A1({},t,{id:n}))))}f1.displayName="Bar";function uG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uG(Object(r),!0).forEach(function(n){fDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fDe(e,t,r){return(t=hDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hDe(e){var t=mDe(e,"string");return typeof t=="symbol"?t:t+""}function mDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pDe=(e,t)=>t,gDe=(e,t,r)=>r,xDe=(e,t,r,n)=>n,vDe=(e,t,r,n,a)=>a,aE=ut([WR,vDe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),bDe=ut([aE],e=>e==null?void 0:e.maxBarSize),yDe=(e,t,r,n,a,s)=>s,dG=(e,t,r)=>{var n=r??e;if(!ks(n))return El(n,t,0)},wDe=ut([Tn,WR,pDe,gDe,xDe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),EDe=(e,t,r,n)=>{var a=Tn(e);return a==="horizontal"?jF(e,"yAxis",r,n):jF(e,"xAxis",t,n)},CDe=(e,t,r)=>{var n=Tn(e);return n==="horizontal"?Zz(e,"xAxis",t):Zz(e,"yAxis",r)},_De=(e,t,r)=>{var n={},a=e.filter(Z4),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=dG(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=dG(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},NDe=ut([wDe,Xje,CDe],_De),SDe=(e,t,r,n,a)=>{var s,i,o=aE(e,t,r,n,a);if(o!=null){var c=Tn(e),u=fne(e),{maxBarSize:d}=o,f=ks(d)?u:d,h,p;return c==="horizontal"?(h=c1(e,"xAxis",t,n),p=l1(e,"xAxis",t,n)):(h=c1(e,"yAxis",r,n),p=l1(e,"yAxis",r,n)),(s=(i=Vw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},rse=(e,t,r,n)=>{var a=Tn(e),s,i;return a==="horizontal"?(s=c1(e,"xAxis",t,n),i=l1(e,"xAxis",t,n)):(s=c1(e,"yAxis",r,n),i=l1(e,"yAxis",r,n)),Vw(s,i)};function kDe(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=El(e,r,0,!0),o,c=[];if(zc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,w)=>{var _,j={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},k=[...y,j];return p=k[k.length-1].position,k},c)}else{var g=El(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var b=zc(a)?Math.min(x,a):x;o=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*_+(x-b)/2,size:b}}],c)}return o}}var jDe=(e,t,r,n,a,s,i)=>{var o=ks(i)?t:i,c=kDe(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(u=>KC(KC({},u),{},{position:KC(KC({},u.position),{},{offset:u.position.offset-a/2})}))),c},BDe=ut([NDe,fne,Wje,hne,SDe,rse,bDe],jDe),TDe=(e,t,r,n)=>c1(e,"xAxis",t,n),IDe=(e,t,r,n)=>c1(e,"yAxis",r,n),FDe=(e,t,r,n)=>l1(e,"xAxis",t,n),ODe=(e,t,r,n)=>l1(e,"yAxis",r,n),DDe=ut([BDe,aE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),PDe=(e,t)=>{var r=GR(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},RDe=ut([EDe,aE],PDe),LDe=ut([ji,TDe,IDe,FDe,ODe,DDe,Tn,MR,rse,RDe,aE,yDe],(e,t,r,n,a,s,i,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,b;if(x!=null&&x.length>0?b=x:b=h==null?void 0:h.slice(p,g+1),b!=null)return ADe({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),nse=e=>{var{chartData:t}=e,r=$a(),n=sc();return S.useEffect(()=>n?()=>{}:(r(c$(t)),()=>{r(c$(void 0))}),[t,r,n]),null},AG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ase=qc({name:"brush",initialState:AG,reducers:{setBrushSettings(e,t){return t.payload==null?AG:t.payload}}}),{setBrushSettings:T0t}=ase.actions,MDe=ase.reducer;function UDe(e,t,r){return(t=QDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QDe(e){var t=HDe(e,"string");return typeof t=="symbol"?t:t+""}function HDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class UL{static create(t){return new UL(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}UDe(UL,"EPS",1e-4);function VDe(e){return(e%180+180)%180}var zDe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=VDe(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},$De={dots:[],areas:[],lines:[]},sse=qc({name:"referenceElements",initialState:$De,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=oh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=oh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=oh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:I0t,removeDot:F0t,addArea:O0t,removeArea:D0t,addLine:P0t,removeLine:R0t}=sse.actions,GDe=sse.reducer,KDe=S.createContext(void 0),qDe=e=>{var{children:t}=e,[r]=S.useState("".concat(Uw("recharts"),"-clip")),n=Gae();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return S.createElement(KDe.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function BT(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function ise(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function WDe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return zDe(n,r)}function XDe(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function $N(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function YDe(e,t){return ise(e,t+1)}function JDe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:ise(n,u)};var x=c,b,y=()=>(b===void 0&&(b=r(g,x)),b),w=g.coordinate,_=c===0||$N(e,w,y,d,o);_||(c=0,d=i,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function fG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fG(Object(r),!0).forEach(function(n){ZDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZDe(e,t,r){return(t=ePe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ePe(e){var t=tPe(e,"string");return typeof t=="symbol"?t:t+""}function tPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rPe(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:c}=t,u=function(h){var p=s[h],g,x=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*x()/2-c);s[h]=p=Vo(Vo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Vo(Vo({},p),{},{tickCoord:p.coordinate});var y=$N(e,p.tickCoord,x,o,c);y&&(c=p.tickCoord-e*(x()/2+a),s[h]=Vo(Vo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function nPe(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Vo(Vo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=$N(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Vo(Vo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,x=function(w){var _=i[w],j,k=()=>(j===void 0&&(j=r(_,w)),j);if(w===0){var I=e*(_.coordinate-e*k()/2-c);i[w]=_=Vo(Vo({},_),{},{tickCoord:I<0?_.coordinate-I*e:_.coordinate})}else i[w]=_=Vo(Vo({},_),{},{tickCoord:_.coordinate});var E=$N(e,_.tickCoord,k,c,u);E&&(c=_.tickCoord+e*(k()/2+a),i[w]=Vo(Vo({},_),{},{isShow:!0}))},b=0;b<g;b++)x(b);return i}function QL(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(dr(c)||Lg.isSsr){var h;return(h=YDe(a,dr(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",x=d&&g==="width"?iw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,j)=>{var k=typeof u=="function"?u(_.value,j):_.value;return g==="width"?WDe(iw(k,{fontSize:t,letterSpacing:r}),x,f):iw(k,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Yi(a[1].coordinate-a[0].coordinate):1,w=XDe(s,y,g);return c==="equidistantPreserveStart"?JDe(y,w,b,a,i):(c==="preserveStart"||c==="preserveStartEnd"?p=nPe(y,w,b,a,i,c==="preserveStartEnd"):p=rPe(y,w,b,a,i),p.filter(_=>_.isShow))}var aPe=["viewBox"],sPe=["viewBox"];function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Av.apply(null,arguments)}function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){HL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mG(e,t){if(e==null)return{};var r,n,a=iPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function HL(e,t,r){return(t=oPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oPe(e){var t=lPe(e,"string");return typeof t=="symbol"?t:t+""}function lPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $m extends S.Component{constructor(t){super(t),this.tickRefs=S.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=mG(t,aPe),s=this.props,{viewBox:i}=s,o=mG(s,sPe);return!BT(n,i)||!BT(a,o)||!BT(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,p,g,x,b=c?-1:1,y=t.tickSize||o,w=dr(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!c*s,h=p-b*y,x=h-b*u,g=w;break;case"left":h=p=t.coordinate,f=r+ +!c*a,d=f-b*y,g=d-b*u,x=w;break;case"right":h=p=t.coordinate,f=r+ +c*a,d=f+b*y,g=d+b*u,x=w;break;default:d=f=t.coordinate,p=n+ +c*s,h=p+b*y,x=h+b*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,c=Ei(Ei(Ei({},Xn(this.props,!1)),Xn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=Ei(Ei({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=Ei(Ei({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return S.createElement("line",Av({},c,{className:xn("recharts-cartesian-axis-line",Em(o,"className"))}))}static renderTickItem(t,r,n){var a,s=xn(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))a=S.cloneElement(t,Ei(Ei({},r),{},{className:s}));else if(typeof t=="function")a=t(Ei(Ei({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=xn(i,t.className)),a=S.createElement(tb,Av({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:c,padding:u}=this.props,d=QL(Ei(Ei({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=il(this.props),g=Xn(i,!1),x=Ei(Ei({},p),{},{fill:"none"},Xn(a,!1)),b=d.map((y,w)=>{var{line:_,tick:j}=this.getTickLineCoord(y),k=Ei(Ei(Ei(Ei({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),j),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return S.createElement(us,Av({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Rg(this.props,y,w)),a&&S.createElement("line",Av({},x,_,{className:xn("recharts-cartesian-axis-tick-line",Em(a,"className"))})),i&&$m.renderTickItem(i,k,"".concat(typeof o=="function"?o(y.value,w):y.value).concat(c||"")))});return b.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:S.createElement(us,{className:xn("recharts-cartesian-axis",a),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Wl.renderCallByParent(this.props))}}HL($m,"displayName","CartesianAxis");HL($m,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var cPe=["x1","y1","x2","y2","key"],uPe=["offset"],dPe=["xAxisId","yAxisId"],APe=["xAxisId","yAxisId"];function pG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pG(Object(r),!0).forEach(function(n){fPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fPe(e,t,r){return(t=hPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hPe(e){var t=mPe(e,"string");return typeof t=="symbol"?t:t+""}function mPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mp.apply(null,arguments)}function GN(e,t){if(e==null)return{};var r,n,a=pPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gPe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function ose(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,c=GN(t,cPe),u=il(c),{offset:d}=u,f=GN(u,uPe);r=S.createElement("line",Mp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function xPe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=GN(e,dPe),c=a.map((u,d)=>{var f=Xo(Xo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return ose(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function vPe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=GN(e,APe),c=a.map((u,d)=>{var f=Xo(Xo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return ose(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function bPe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function yPe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var wPe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Kte(QL(Xo(Xo(Xo({},$m.defaultProps),r),{},{ticks:qte(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},EPe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Kte(QL(Xo(Xo(Xo({},$m.defaultProps),r),{},{ticks:qte(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},CPe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Yw(e){var t=AR(),r=fR(),n=Zte(),a=Xo(Xo({},$u(e,CPe)),{},{x:dr(e.x)?e.x:n.left,y:dr(e.y)?e.y:n.top,width:dr(e.width)?e.width:n.width,height:dr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=sc(),x=or(B=>e$(B,"xAxis",s,g)),b=or(B=>e$(B,"yAxis",i,g));if(!dr(u)||u<=0||!dr(d)||d<=0||!dr(o)||o!==+o||!dr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||wPe,w=a.horizontalCoordinatesGenerator||EPe,{horizontalPoints:_,verticalPoints:j}=a;if((!_||!_.length)&&typeof w=="function"){var k=h&&h.length,I=w({yAxis:b?Xo(Xo({},b),{},{ticks:k?h:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:f);sw(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}if((!j||!j.length)&&typeof y=="function"){var E=p&&p.length,N=y({xAxis:x?Xo(Xo({},x),{},{ticks:E?p:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);sw(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(j=N)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(gPe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),S.createElement(bPe,Mp({},a,{horizontalPoints:_})),S.createElement(yPe,Mp({},a,{verticalPoints:j})),S.createElement(xPe,Mp({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:b})),S.createElement(vPe,Mp({},a,{offset:n,verticalPoints:j,xAxis:x,yAxis:b})))}Yw.displayName="CartesianGrid";function gG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gG(Object(r),!0).forEach(function(n){_Pe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Pe(e,t,r){return(t=NPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NPe(e){var t=SPe(e,"string");return typeof t=="symbol"?t:t+""}function SPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kPe={xAxis:{},yAxis:{},zAxis:{}},lse=qc({name:"cartesianAxis",initialState:kPe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=xG(xG({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:jPe,removeXAxis:BPe,addYAxis:TPe,removeYAxis:IPe,addZAxis:L0t,removeZAxis:M0t,updateYAxisWidth:FPe}=lse.actions,OPe=lse.reducer,DPe=["children"],PPe=["dangerouslySetInnerHTML","ticks"];function cse(e,t,r){return(t=RPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RPe(e){var t=LPe(e,"string");return typeof t=="symbol"?t:t+""}function LPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RF(){return RF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RF.apply(null,arguments)}function use(e,t){if(e==null)return{};var r,n,a=MPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UPe(e){var t=$a(),r=S.useMemo(()=>{var{children:s}=e,i=use(e,DPe);return i},[e]),n=or(s=>Rh(s,r.id)),a=r===n;return S.useEffect(()=>(t(jPe(r)),()=>{t(BPe(r))}),[r,t]),a?e.children:null}var QPe=e=>{var{xAxisId:t,className:r}=e,n=or(Jte),a=sc(),s="xAxis",i=or(p=>J1(p,s,t,a)),o=or(p=>Gne(p,s,t,a)),c=or(p=>Hne(p,t)),u=or(p=>HBe(p,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=use(e,PPe);return S.createElement($m,RF({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:xn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},HPe=e=>{var t,r,n,a,s;return S.createElement(UPe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},S.createElement(QPe,e))};class vg extends S.Component{render(){return S.createElement(HPe,this.props)}}cse(vg,"displayName","XAxis");cse(vg,"defaultProps",{allowDataOverflow:kc.allowDataOverflow,allowDecimals:kc.allowDecimals,allowDuplicatedCategory:kc.allowDuplicatedCategory,height:kc.height,hide:!1,mirror:kc.mirror,orientation:kc.orientation,padding:kc.padding,reversed:kc.reversed,scale:kc.scale,tickCount:kc.tickCount,type:kc.type,xAxisId:0});var VPe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},zPe=["dangerouslySetInnerHTML","ticks"];function dse(e,t,r){return(t=$Pe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Pe(e){var t=GPe(e,"string");return typeof t=="symbol"?t:t+""}function GPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LF(){return LF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LF.apply(null,arguments)}function KPe(e,t){if(e==null)return{};var r,n,a=qPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function WPe(e){var t=$a();return S.useEffect(()=>(t(TPe(e)),()=>{t(IPe(e))}),[e,t]),null}var XPe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=S.useRef(null),o=S.useRef(null),c=or(Jte),u=sc(),d=$a(),f="yAxis",h=or(_=>J1(_,f,r,u)),p=or(_=>Vne(_,r)),g=or(_=>VBe(_,r)),x=or(_=>Gne(_,f,r,u));if(S.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!p||bL(s)||S.isValidElement(s))){var j=i.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:I,tickMargin:E}=j.props,N=VPe({ticks:k,label:o.current,labelGapWithTick:5,tickSize:I,tickMargin:E});Math.round(p.width)!==Math.round(N)&&d(FPe({id:r,width:N}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,w=KPe(e,zPe);return S.createElement($m,LF({},w,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:xn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},YPe=e=>{var t,r,n,a,s;return S.createElement(S.Fragment,null,S.createElement(WPe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),S.createElement(XPe,e))},JPe={allowDataOverflow:jc.allowDataOverflow,allowDecimals:jc.allowDecimals,allowDuplicatedCategory:jc.allowDuplicatedCategory,hide:!1,mirror:jc.mirror,orientation:jc.orientation,padding:jc.padding,reversed:jc.reversed,scale:jc.scale,tickCount:jc.tickCount,type:jc.type,width:jc.width,yAxisId:0};class bg extends S.Component{render(){return S.createElement(YPe,this.props)}}dse(bg,"displayName","YAxis");dse(bg,"defaultProps",JPe);var TT={exports:{}},IT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vG;function ZPe(){if(vG)return IT;vG=1;var e=j1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return IT.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(k){if(!y){if(y=!0,w=k,k=f(k),h!==void 0&&g.hasValue){var I=g.value;if(h(I,k))return _=I}return _=k}if(I=_,r(w,k))return I;var E=f(k);return h!==void 0&&h(I,E)?(w=k,I):(w=k,_=E)}var y=!1,w,_,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,h]);var x=n(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),o(x),x},IT}var bG;function eRe(){return bG||(bG=1,TT.exports=ZPe()),TT.exports}eRe();function tRe(e){e()}function rRe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){tRe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var yG={notify(){},get:()=>[]};function nRe(e,t){let r,n=yG,a=0,s=!1;function i(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=rRe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=yG)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var aRe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sRe=aRe(),iRe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",oRe=iRe(),lRe=()=>sRe||oRe?S.useLayoutEffect:S.useEffect,cRe=lRe(),FT=Symbol.for("react-redux-context"),OT=typeof globalThis<"u"?globalThis:{};function uRe(){if(!S.createContext)return{};const e=OT[FT]??(OT[FT]=new Map);let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var dRe=uRe();function ARe(e){const{children:t,context:r,serverState:n,store:a}=e,s=S.useMemo(()=>{const c=nRe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=S.useMemo(()=>a.getState(),[a]);cRe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||dRe;return S.createElement(o.Provider,{value:s},t)}var fRe=ARe,hRe=(e,t)=>t,VL=ut([hRe,Tn,q1,Ti,lae,Lh,G3e,ji],Y3e),zL=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Ase=Hu("mouseClick"),fse=$2();fse.startListening({actionCreator:Ase,effect:(e,t)=>{var r=e.payload,n=VL(t.getState(),zL(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(e3e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var MF=Hu("mouseMove"),hse=$2();hse.startListening({actionCreator:MF,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=uL(n,n.tooltip.settings.shared),s=VL(n,zL(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(tae({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(eae()))}});function mRe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var wG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},mse=qc({name:"rootProps",initialState:wG,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:wG.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),pRe=mse.reducer,{updateOptions:gRe}=mse.actions,pse=qc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:xRe}=pse.actions,vRe=pse.reducer,gse=Hu("keyDown"),xse=Hu("focus"),$L=$2();$L.startListening({actionCreator:gse,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(dL(a,eb(r))),o=Lh(r);if(s==="Enter"){var c=MN(r,"axis","hover",String(a.index));t.dispatch(TF({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=$Be(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=MN(r,"axis","hover",String(h));t.dispatch(TF({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});$L.startListening({actionCreator:xse,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=MN(r,"axis","hover",String(s));t.dispatch(TF({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var Eu=Hu("externalEvent"),vse=$2();vse.startListening({actionCreator:Eu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:P3e(r),activeDataKey:Aae(r),activeIndex:Cm(r),activeLabel:dae(r),activeTooltipIndex:Cm(r),isTooltipActive:R3e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var bRe=ut([Z1],e=>e.tooltipItemPayloads),yRe=ut([bRe,rE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),bse=Hu("touchMove"),yse=$2();yse.startListening({actionCreator:bse,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=uL(n,n.tooltip.settings.shared);if(a==="axis"){var s=VL(n,zL({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(tae({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Xte),d=(i=c.getAttribute(Yte))!==null&&i!==void 0?i:void 0,f=yRe(t.getState(),u,d);t.dispatch(Zne({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var wRe=yte({brush:MDe,cartesianAxis:OPe,chartData:fTe,errorBars:QOe,graphicalItems:wFe,layout:M5e,legend:NNe,options:lTe,polarAxis:p6e,polarOptions:vRe,referenceElements:GDe,rootProps:pRe,tooltip:t3e}),ERe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return u5e({reducer:wRe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([fse.middleware,hse.middleware,$L.middleware,vse.middleware,yse.middleware]),devTools:{serialize:{replacer:mRe},name:"recharts-".concat(r)}})};function wse(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=sc(),s=S.useRef(null);if(a)return r;s.current==null&&(s.current=ERe(t,n));var i=nR;return S.createElement(fRe,{context:i,store:s.current},r)}function Ese(e){var{layout:t,width:r,height:n,margin:a}=e,s=$a(),i=sc();return S.useEffect(()=>{i||(s(P5e(t)),s(R5e({width:r,height:n})),s(D5e(a)))},[s,i,t,r,n,a]),null}function Cse(e){var t=$a();return S.useEffect(()=>{t(gRe(e))},[t,e]),null}var CRe=["children"];function _Re(e,t){if(e==null)return{};var r,n,a=NRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KN(){return KN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KN.apply(null,arguments)}var SRe={width:"100%",height:"100%"},kRe=S.forwardRef((e,t)=>{var r=AR(),n=fR(),a=nre();if(!n1(r)||!n1(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,S.createElement(VP,KN({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:SRe,ref:t}),s)}),jRe=e=>{var{children:t}=e,r=or(Q4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return S.createElement(VP,{width:n,height:a,x:i,y:s},t)},EG=S.forwardRef((e,t)=>{var{children:r}=e,n=_Re(e,CRe),a=sc();return a?S.createElement(jRe,null,r):S.createElement(kRe,KN({ref:t},n),r)});function BRe(){var e=$a(),[t,r]=S.useState(null),n=or(hNe);return S.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;zc(s)&&s!==n&&e(L5e(s))}},[t,e,n]),r}function CG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CG(Object(r),!0).forEach(function(n){IRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IRe(e,t,r){return(t=FRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FRe(e){var t=ORe(e,"string");return typeof t=="symbol"?t:t+""}function ORe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DRe=S.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:x,style:b,width:y}=e,w=$a(),[_,j]=S.useState(null),[k,I]=S.useState(null);pTe();var E=BRe(),N=S.useCallback(P=>{E(P),typeof t=="function"&&t(P),j(P),I(P)},[E,t,j,I]),B=S.useCallback(P=>{w(Ase(P)),w(Eu({handler:s,reactEvent:P}))},[w,s]),R=S.useCallback(P=>{w(MF(P)),w(Eu({handler:u,reactEvent:P}))},[w,u]),D=S.useCallback(P=>{w(eae()),w(Eu({handler:d,reactEvent:P}))},[w,d]),O=S.useCallback(P=>{w(MF(P)),w(Eu({handler:f,reactEvent:P}))},[w,f]),L=S.useCallback(()=>{w(xse())},[w]),M=S.useCallback(P=>{w(gse(P.key))},[w]),J=S.useCallback(P=>{w(Eu({handler:i,reactEvent:P}))},[w,i]),V=S.useCallback(P=>{w(Eu({handler:o,reactEvent:P}))},[w,o]),K=S.useCallback(P=>{w(Eu({handler:c,reactEvent:P}))},[w,c]),z=S.useCallback(P=>{w(Eu({handler:h,reactEvent:P}))},[w,h]),G=S.useCallback(P=>{w(Eu({handler:x,reactEvent:P}))},[w,x]),Y=S.useCallback(P=>{w(bse(P)),w(Eu({handler:g,reactEvent:P}))},[w,g]),te=S.useCallback(P=>{w(Eu({handler:p,reactEvent:P}))},[w,p]);return S.createElement(xae.Provider,{value:_},S.createElement(zee.Provider,{value:k},S.createElement("div",{className:xn("recharts-wrapper",n),style:TRe({position:"relative",cursor:"default",width:y,height:a},b),onClick:B,onContextMenu:J,onDoubleClick:V,onFocus:L,onKeyDown:M,onMouseDown:K,onMouseEnter:R,onMouseLeave:D,onMouseMove:O,onMouseUp:z,onTouchEnd:te,onTouchMove:Y,onTouchStart:G,ref:N},r)))}),PRe=["children","className","width","height","style","compact","title","desc"];function RRe(e,t){if(e==null)return{};var r,n,a=LRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _se=S.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:c,desc:u}=e,d=RRe(e,PRe),f=il(d);return o?S.createElement(EG,{otherAttributes:f,title:c,desc:u},r):S.createElement(DRe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(EG,{otherAttributes:f,title:c,desc:u,ref:t},S.createElement(qDe,null,r)))}),MRe=["width","height"];function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UF.apply(null,arguments)}function URe(e,t){if(e==null)return{};var r,n,a=QRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HRe={top:5,right:5,bottom:5,left:5},VRe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:HRe,reverseStackOrder:!1,syncMethod:"index"},zRe=S.forwardRef(function(t,r){var n,a=$u(t.categoricalChartProps,VRe),{width:s,height:i}=a,o=URe(a,MRe);if(!n1(s)||!n1(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(wse,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},S.createElement(nse,{chartData:h.data}),S.createElement(Ese,{width:s,height:i,layout:a.layout,margin:a.margin}),S.createElement(Cse,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(_se,UF({},o,{width:s,height:i,ref:r})))}),$Re=["axis","item"],Jw=S.forwardRef((e,t)=>S.createElement(zRe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$Re,tooltipPayloadSearcher:vL,categoricalChartProps:e,ref:t}));function GRe(e){var t=$a();return S.useEffect(()=>{t(xRe(e))},[t,e]),null}var KRe=["width","height","layout"];function QF(){return QF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QF.apply(null,arguments)}function qRe(e,t){if(e==null)return{};var r,n,a=WRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XRe={top:5,right:5,bottom:5,left:5},YRe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:XRe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Nse=S.forwardRef(function(t,r){var n,a=$u(t.categoricalChartProps,YRe),{width:s,height:i,layout:o}=a,c=qRe(a,KRe);if(!n1(s)||!n1(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return S.createElement(wse,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},S.createElement(nse,{chartData:a.data}),S.createElement(Ese,{width:s,height:i,layout:o,margin:a.margin}),S.createElement(Cse,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(GRe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),S.createElement(_se,QF({width:s,height:i},c,{ref:r})))}),JRe=["item"],ZRe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},GL=S.forwardRef((e,t)=>{var r=$u(e,ZRe);return S.createElement(Nse,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:JRe,tooltipPayloadSearcher:vL,categoricalChartProps:r,ref:t})}),eLe=["axis"],tLe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},rLe=S.forwardRef((e,t)=>{var r=$u(e,tLe);return S.createElement(Nse,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eLe,tooltipPayloadSearcher:vL,categoricalChartProps:r,ref:t})});const N0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],_G={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},iy="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",uo="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Cc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",DT="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",PT="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",RT="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",qC="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",nLe="from-sky-500 to-indigo-500",aLe="from-emerald-500 to-lime-500",sLe="from-amber-500 to-rose-500",iLe="from-fuchsia-500 to-purple-600",LT={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Od,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:Nee,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:Xi,dot:"bg-emerald-500"}},oLe=e=>{const t=LT[e].icon;return l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${LT[e].badge}`,children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${LT[e].dot}`}),l.jsx(t,{className:"h-4 w-4"})," ",e]})},lLe=()=>{var G,Y;const[e,t]=S.useState("registro"),[r,n]=S.useState([]),[a,s]=S.useState(_G),[i,o]=S.useState(null),[c,u]=S.useState(null),[d,f]=S.useState(!1),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState(""),[w,_]=S.useState(""),j=S.useMemo(()=>qf[a.dimension]??[],[a.dimension]),k=S.useCallback(async()=>{f(!0);try{const te=await DEe();n(te)}catch(te){console.error(te),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);S.useEffect(()=>{k()},[k]);const I=te=>{const{name:P,value:H}=te.target;s(X=>({...X,[P]:H}))},E=te=>{const P=te.split(",").map(H=>H.trim()).filter(Boolean);s(H=>({...H,indicadores:P}))},N=te=>{const P=te.split(",").map(H=>H.trim()).filter(Boolean);s(H=>({...H,enlaces:P}))},B=()=>{s(_G),o(null),u(null)},R=async te=>{if(te.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{i?await REe(i,a):await PEe(a),await k(),B(),t("seguimiento")}catch(P){console.error(P),u("Error al guardar la acción.")}},D=te=>{o(te.id),s({...te,enlaces:te.enlaces??[],indicadores:te.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},O=async te=>{confirm("¿Eliminar esta acción?")&&(await LEe(te),await k())},L=S.useMemo(()=>r.filter(te=>{const P=!h||te.responsable.toLowerCase().includes(h.toLowerCase())||te.descripcion.toLowerCase().includes(h.toLowerCase())||te.subdimension.toLowerCase().includes(h.toLowerCase()),H=!g||te.dimension===g,X=!b||te.subdimension===b,Z=!w||te.estado===w;return P&&H&&X&&Z}),[r,h,g,b,w]),M=S.useMemo(()=>{const te=new Map;return r.forEach(P=>te.set(P.dimension,(te.get(P.dimension)??0)+1)),Array.from(te.entries()).map(([P,H])=>({name:P,value:H}))},[r]),J=S.useMemo(()=>{const te=new Map;return r.forEach(P=>te.set(P.estado,(te.get(P.estado)??0)+1)),Array.from(te.entries()).map(([P,H])=>({name:P,value:H}))},[r]),V=S.useMemo(()=>{const te=r.map(P=>P.avance??0);return te.length?Math.round(te.reduce((P,H)=>P+H,0)/te.length):0},[r]),K=S.useMemo(()=>{const te=new Map;return r.forEach(P=>te.set(P.subdimension,(te.get(P.subdimension)??0)+1)),Array.from(te.entries()).map(([P,H])=>({name:P,value:H})).sort((P,H)=>H.value-P.value).slice(0,6)},[r]),z=()=>{const te=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],P=r.map(le=>[le.id,le.fechaRegistro,le.responsable,le.dimension,le.subdimension,le.descripcion.replace(/\n/g," "),le.objetivos??"",(le.indicadores??[]).join("|"),le.cobertura??"",le.fechaInicio??"",le.fechaCumplimiento,le.estado,le.avance??0,(le.enlaces??[]).join("|")]),H=[te.join(","),...P.map(le=>le.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),X=new Blob([H],{type:"text/csv;charset=utf-8"}),Z=URL.createObjectURL(X),ae=document.createElement("a");ae.href=Z,ae.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ae.click(),URL.revokeObjectURL(Z)};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),l.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[l.jsx(Gp,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),l.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Bwe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[l.jsx(jee,{className:"h-4 w-4"})," Refrescar"]}),l.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[l.jsx(wm,{className:"h-4 w-4"})," CSV"]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("button",{onClick:()=>t("registro"),className:`${DT} ${e==="registro"?PT:RT}`,children:[l.jsx(Ag,{className:"h-4 w-4"})," Registro"]}),l.jsxs("button",{onClick:()=>t("seguimiento"),className:`${DT} ${e==="seguimiento"?PT:RT}`,children:[l.jsx(nw,{className:"h-4 w-4"})," Seguimiento"]}),l.jsxs("button",{onClick:()=>t("dashboard"),className:`${DT} ${e==="dashboard"?PT:RT}`,children:[l.jsx(Cye,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&l.jsx("div",{className:iy,children:l.jsxs("form",{onSubmit:R,className:"p-6 md:p-8 space-y-6",children:[c&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[l.jsx(Od,{className:"h-5 w-5"}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Fecha de Registro"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),l.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:uo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Responsable"}),l.jsxs("div",{className:"relative",children:[l.jsx(Rw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),l.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:uo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Cobertura (niveles/cursos)"}),l.jsxs("div",{className:"relative",children:[l.jsx(Zv,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),l.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:I,className:uo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Dimensión PME"}),l.jsxs("div",{className:"relative",children:[l.jsx(Awe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:uo+" pl-10",children:[l.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(qf).map(te=>l.jsx("option",{value:te,children:te},te))]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Cc,children:"Subdimensión"}),l.jsxs("div",{className:"relative",children:[l.jsx(IP,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),l.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:uo+" pl-10",disabled:!a.dimension,children:[l.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),j.map(te=>l.jsx("option",{value:te,children:te},te))]})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Cc,children:"Descripción de la Acción"}),l.jsxs("div",{className:"relative",children:[l.jsx(Dd,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),l.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:uo+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Cc,children:"Objetivos (opcional)"}),l.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propósitos pedagógicos",className:uo})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Indicadores (separados por coma)"}),l.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:te=>E(te.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:uo})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Fecha de Inicio"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),l.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:uo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Fecha de Cumplimiento"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:uo+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Estado"}),l.jsx("select",{name:"estado",value:a.estado,onChange:I,className:uo,children:IQ.map(te=>l.jsx("option",{value:te,children:te},te))})]}),l.jsxs("div",{children:[l.jsx("label",{className:Cc,children:"Avance (%)"}),l.jsxs("div",{className:"relative",children:[l.jsx(iN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:uo+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Cc,children:"Enlaces de evidencia (separados por coma)"}),l.jsxs("div",{className:"relative",children:[l.jsx(LQ,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:te=>N(te.target.value),placeholder:"https://..., https://...",className:uo+" pl-10"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i&&l.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[i?l.jsx(vh,{className:"h-4 w-4"}):l.jsx(Uu,{className:"h-4 w-4"}),i?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&l.jsx("div",{className:iy,children:l.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"relative md:col-span-2",children:[l.jsx(N4,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),l.jsx("input",{className:uo+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:te=>p(te.target.value)})]}),l.jsxs("select",{value:g,onChange:te=>{x(te.target.value),y("")},className:uo,children:[l.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(qf).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:b,onChange:te=>y(te.target.value),className:uo,children:[l.jsx("option",{value:"",children:"Todas las subdimensiones"}),(qf[g]??Object.values(qf).flat()).map(te=>l.jsx("option",{value:te,children:te},te))]}),l.jsxs("select",{value:w,onChange:te=>_(te.target.value),className:uo,children:[l.jsx("option",{value:"",children:"Todos los estados"}),IQ.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[L.map(te=>{var P,H;return l.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[l.jsx("td",{className:"px-4 py-4 align-top text-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((H=(P=te.responsable)==null?void 0:P.slice(0,1))==null?void 0:H.toUpperCase())||"?"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:te.responsable}),l.jsx("div",{className:"text-xs text-slate-500",children:te.cobertura})]})]})}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[l.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:te.dimension}),l.jsx("div",{className:"text-xs text-slate-500",children:te.subdimension})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[l.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:te.descripcion}),te.enlaces&&te.enlaces.length>0&&l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:te.enlaces.map((X,Z)=>l.jsxs("a",{href:X,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[l.jsx(LQ,{className:"h-3.5 w-3.5"})," Evidencia ",Z+1]},Z))})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",te.fechaRegistro||"-"]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",te.fechaInicio||"-"]}),l.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",te.fechaCumplimiento]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:oLe(te.estado)}),l.jsxs("td",{className:"px-4 py-4 align-top",children:[l.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(te.avance??0,0),100)}%`}})}),l.jsxs("div",{className:"text-xs text-center mt-1",children:[te.avance??0,"%"]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("button",{onClick:()=>D(te),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:l.jsx(OP,{className:"h-5 w-5 text-amber-600"})}),l.jsx("button",{onClick:()=>O(te.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:l.jsx(Eo,{className:"h-5 w-5 text-rose-600"})})]})})]},te.id)}),L.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:`${qC} ${nLe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Sd,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),l.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),l.jsx("div",{className:`${qC} ${aLe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Xi,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),l.jsx("div",{className:"text-2xl font-black",children:((G=J.find(te=>te.name==="Cumplida"))==null?void 0:G.value)??0})]})]})}),l.jsx("div",{className:`${qC} ${sLe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Nee,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),l.jsx("div",{className:"text-2xl font-black",children:((Y=J.find(te=>te.name==="En Proceso"))==null?void 0:Y.value)??0})]})]})}),l.jsx("div",{className:`${qC} ${iLe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(iN,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),l.jsxs("div",{className:"text-2xl font-black",children:[V,"%"]})]})]})})]}),l.jsxs("div",{className:iy+" p-5",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),l.jsx("div",{className:"h-64",children:l.jsx(th,{width:"100%",height:"100%",children:l.jsxs(Jw,{data:M,children:[l.jsx(Yw,{strokeDasharray:"3 3"}),l.jsx(vg,{dataKey:"name",hide:!0}),l.jsx(bg,{allowDecimals:!1}),l.jsx(eh,{}),l.jsx(f1,{dataKey:"value",children:M.map((te,P)=>l.jsx(_m,{fill:N0[P%N0.length]},P))})]})})}),l.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:M.map((te,P)=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:N0[P%N0.length]}}),l.jsx("span",{className:"flex-1",children:te.name}),l.jsx("span",{className:"font-semibold",children:te.value})]},P))})]}),l.jsxs("div",{className:iy+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),l.jsx("div",{className:"h-64",children:l.jsx(th,{width:"100%",height:"100%",children:l.jsxs(GL,{children:[l.jsx(uk,{data:J,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:J.map((te,P)=>l.jsx(_m,{fill:N0[P%N0.length]},P))}),l.jsx(V1,{}),l.jsx(eh,{})]})})})]}),l.jsxs("div",{className:iy+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),l.jsxs("ul",{className:"space-y-2",children:[K.map((te,P)=>l.jsxs("li",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:N0[P%N0.length]}}),te.name]}),l.jsx("span",{className:"font-semibold",children:te.value})]},P)),K.length===0&&l.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},dk="planificaciones",Sse="actividades_calendario",kse=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},cLe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await vn(yt(ft,dk),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},uLe=async(e,t,r)=>{try{const n=sr(ft,dk,e),a=await Og(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Kc(n,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},dLe=async(e,t)=>{try{const r=sr(ft,dk,e),n=await Og(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await za(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},ALe=(e,t)=>{const r=zt(yt(ft,dk),Dr("userId","==",e),gr("fechaCreacion","desc"));return fr(r,n=>{const a=n.docs.map(kse);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},fLe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await vn(yt(ft,Sse),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},hLe=(e,t)=>{const r=zt(yt(ft,Sse),Dr("userId","==",e),gr("fecha","desc"));return fr(r,n=>{const a=n.docs.map(kse);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},mLe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);return S.useEffect(()=>e?(a(!0),ALe(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await cLe(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await uLe(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await dLe(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},HF=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},pLe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?hLe(e,u=>{r(u),a(!1)}):void 0,[e]);const o=S.useCallback(async c=>{try{return i(null),await fLe(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},gLe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=S.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},xLe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=S.useState(e.progreso??0),[o,c]=S.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},vLe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=S.useState(e),[o,c]=S.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,x]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[x]:p}}):b=>({...b,[h]:p}))},d=async()=>{c(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},bLe=({userId:e})=>{const{actividades:t,save:r}=pLe(e),[n,a]=S.useState("list"),[s,i]=S.useState(null),[o,c]=S.useState(!1),[u,d]=S.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=S.useState(f);S.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:E,value:N}=I.target;p(B=>({...B,[E]:N}))},b=(I,E,N)=>{p(B=>({...B,tareas:B.tareas.map(R=>R.id===I?{...R,[E]:N}:R)}))},y=()=>{p(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=I=>{p(E=>({...E,tareas:E.tareas.filter(N=>N.id!==I)}))},_=async I=>{I.preventDefault(),c(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(N=>N.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{HF("Planificación - Actividad Calendario");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new cs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),M={...h,objetivo:L.replace(/(\*\*|\*)/g,"")},J=await r(M),V={...M,id:J};i(V),a("summary")}catch(N){console.error("Error al generar objetivo con IA:",N),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...h,objetivo:"No generado"},R=await r(B),D={...B,id:R};i(D),a("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},j=async I=>{if(I)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},k=`
  w-full px-4 py-2.5 rounded-lg border border-slate-200 
  bg-white dark:bg-slate-800 
  text-slate-900 dark:text-slate-100 
  placeholder:text-slate-400 dark:placeholder:text-slate-500
  focus:border-indigo-500 dark:focus:border-indigo-600 
  focus:ring-2 focus:ring-indigo-500/20 dark:focus:ring-indigo-600/20
  focus:outline-none
  transition-colors
  disabled:opacity-50 disabled:cursor-not-allowed
`;return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:_,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:k,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:k,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:k,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:k,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:k,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((I,E)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>w(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:I.descripcion,onChange:N=>b(I.id,"descripcion",N.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:I.responsable,onChange:N=>b(I.id,"responsable",N.target.value),placeholder:"Responsable",className:k,required:!0,disabled:o}),l.jsx("input",{value:I.recursos,onChange:N=>b(I.id,"recursos",N.target.value),placeholder:"Recursos Necesarios",className:k,disabled:o})]})]},I.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>j(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},yLe=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=mLe(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=S.useState(o),[d,f]=S.useState(null),[h,p]=S.useState(!1),[g,x]=S.useState(null),[b,y]=S.useState("unidad"),[w,_]=S.useState(null),[j,k]=S.useState(null),I=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=S.useMemo(()=>{const Y=e.cursos||[],te=new Set;return Y.forEach(P=>{P.startsWith("1º")?te.add("1º Medio"):P.startsWith("2º")?te.add("2º Medio"):P.startsWith("3º")?te.add("3º Medio"):P.startsWith("4º")&&te.add("4º Medio")}),Array.from(te)},[e.cursos]);S.useEffect(()=>{u(Y=>({...Y,asignatura:I[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(Y=>({id:Y.id,autor:Y.autor,tipo:Y.tipo,coincideConUserId:Y.autor===t}))})},[I,E,e,t,r]);const N=Y=>{const{name:te,value:P}=Y.target;u(H=>({...H,[te]:te==="cantidadClases"?parseInt(P,10):P}))},B=()=>{const{asignatura:Y,nivel:te,nombreUnidad:P,contenidos:H,cantidadClases:X,observaciones:Z,ideasParaUnidad:ae}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${Y}
    - Nivel: ${te}
    - Nombre de la Unidad: "${P}"
    - Contenidos clave a trabajar (insumo principal): "${H}"
    - Cantidad de clases para la unidad: ${X}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Z||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${X} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},R=async Y=>{if(Y.preventDefault(),p(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{HF("Planificación - Unidad");const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new cs(te).getGenerativeModel({model:"gemini-1.5-pro"}),X=B(),Z={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},ie=(await(await H.generateContent({contents:[{parts:[{text:X}]}],generationConfig:{responseMimeType:"application/json",responseSchema:Z}})).response).text(),ce=JSON.parse(ie),fe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,fe),f({...fe,id:d.id});else{const Ie=await n(fe);f({...fe,id:Ie})}}catch(te){console.error("Error al generar planificación con IA",te),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},D=async(Y,te)=>{p(!0),x(null);const P=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${te.asignatura}
    - Nivel: ${te.nivel}
    - Objetivo de la clase: ${Y.objetivosAprendizaje}
    - Contenidos: ${Y.contenidosConceptuales}
    - Actividades sugeridas: ${Y.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{HF("Planificación - Utilizar Clase");const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=new cs(H).getGenerativeModel({model:"gemini-1.5-pro"}),ae={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await Z.generateContent({contents:[{parts:[{text:P}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ae}})).response).text(),fe=JSON.parse(ce),Ie={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:te.asignatura,nivel:te.nivel,contenidos:Y.contenidosConceptuales,observaciones:"",nombreClase:Y.actividades,duracionClase:80,momentosClase:fe,detalleLeccionOrigen:Y};await n(Ie),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(H){console.error("Error al generar plan de clase con IA",H),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},O=Y=>{Y.tipo==="Unidad"&&(u({asignatura:Y.asignatura,nivel:Y.nivel,nombreUnidad:Y.nombreUnidad,contenidos:Y.contenidos,cantidadClases:Y.cantidadClases,observaciones:Y.observaciones,ideasParaUnidad:Y.ideasParaUnidad||""}),f(Y),window.scrollTo({top:0,behavior:"smooth"}))},L=async Y=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(Y),(d==null?void 0:d.id)===Y&&(f(null),u(o))}catch(te){console.error("Error al eliminar planificación:",te),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},M=async Y=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(Y),(w==null?void 0:w.id)===Y&&_(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(te){console.error("Error al eliminar plan de clase:",te),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},J=(Y,te)=>{d&&k({planId:d.id,lessonIndex:Y,lessonData:te})},V=async Y=>{if(j)try{const{planId:te,lessonIndex:P}=j,H=r.find(ae=>ae.id===te&&ae.tipo==="Unidad");if(!H)return;const X=[...H.detallesLeccion];X[P]=Y;const Z={...H,detallesLeccion:X};await a(te,Z),f(Z),k(null)}catch(te){console.error("Error al actualizar lección:",te),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:N,className:K,disabled:h,children:I.length>0?I.map(Y=>l.jsx("option",{value:Y,children:Y},Y)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:N,className:K,disabled:h,children:E.length>0?E.map(Y=>l.jsx("option",{value:Y,children:Y},Y)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:N,className:K,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:N,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:K,disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:N,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:K,disabled:h})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:N,className:K,min:"1",max:"20",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:N,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:K,disabled:h})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:h||i,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:h?l.jsx(jee,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Gp,{className:"w-5 h-5"}),l.jsx("span",{children:d?"Regenerar Plan":"Generar con IA"})]})})}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx(xLe,{plan:d,onEditLesson:J,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(Y=>Y.tipo==="Unidad").length>0?r.filter(Y=>Y.tipo==="Unidad").map(Y=>l.jsx("div",{className:`p-5 border rounded-xl transition-all ${(d==null?void 0:d.id)===Y.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:Y.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(Y.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",Y.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>O(Y),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:h,children:[l.jsx(zye,{className:"w-4 h-4"}),l.jsx("span",{children:"Editar"})]}),l.jsxs("button",{onClick:()=>L(Y.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:h,children:[l.jsx(Eo,{className:"w-4 h-4"}),l.jsx("span",{children:"Eliminar"})]})]})]})},Y.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),G=()=>{const Y=r.filter(te=>te.tipo==="Clase").sort((te,P)=>new Date(P.fechaCreacion).getTime()-new Date(te.fechaCreacion).getTime());return w?l.jsx(vLe,{plan:w,onBack:()=>_(null),onDelete:M,onSave:async te=>{try{await a(te.id,te),_(te)}catch(P){console.error("Error al actualizar plan de clase:",P),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(lye,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:Y.length>0?Y.map(te=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(te.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",te.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>_(te),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},te.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx(See,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:l.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[l.jsxs("button",{onClick:()=>y("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${b==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[l.jsx(Hd,{className:"w-4 h-4"}),l.jsx("span",{children:"Unidad"})]}),l.jsxs("button",{onClick:()=>y("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${b==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[l.jsx(i2e,{className:"w-4 h-4"}),l.jsx("span",{children:"Clase"})]}),l.jsxs("button",{onClick:()=>y("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${b==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[l.jsx(Mu,{className:"w-4 h-4"}),l.jsx("span",{children:"Actividades Calendario"})]})]})}),b==="unidad"&&z(),b==="clase"&&G(),b==="calendario"&&l.jsx(bLe,{userId:t}),j&&l.jsx(gLe,{lesson:j.lessonData,onClose:()=>k(null),onSave:V,isLoading:h})]})},Ak="events",wLe=async()=>{try{const e=zt(yt(Tr,Ak),gr("date","asc"));return(await Qn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},ELe=async e=>{try{return{id:(await vn(yt(Tr,Ak),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},CLe=async(e,t)=>{try{const r=sr(Tr,Ak,e);await Kc(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},_Le=async e=>{try{const t=sr(Tr,Ak,e);await za(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},NLe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],NG={[dn.EVALUACION]:l.jsx(Hd,{className:"h-4 w-4"}),[dn.ACTO]:l.jsx(Cwe,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:l.jsx(Zv,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:l.jsx(Uwe,{className:"h-4 w-4"})},SLe=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},kLe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=S.useState({});S.useEffect(()=>{c(a||{type:dn.EVALUACION,subtype:kp.PRUEBA_PARCIAL,asignatura:Wi[0],curso:Ks[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:b,value:y}=x.target;c(w=>({...w,[b]:y}))},f=x=>{c(b=>{if(b.type===dn.SALIDA_PEDAGOGICA){const y=b.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...b,cursos:w.sort()}}return b})},h=x=>{var y;x.preventDefault();let b;switch(o.type){case dn.EVALUACION:{const w={date:s,type:dn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===kp.RUBRICA||o.subtype===kp.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(w.enlace=o.enlace.trim()),b=w;break}case dn.ACTO:b={date:s,type:dn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.ACTIVIDAD_FOCALIZADA:b={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.SALIDA_PEDAGOGICA:b={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case dn.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:Ube.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:Wi.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ks.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===kp.RUBRICA||o.subtype===kp.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsxs("div",{className:"relative",children:[l.jsx(oN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),l.jsxs("div",{className:"relative",children:[l.jsx(G0,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsxs("div",{className:"relative",children:[l.jsx(oN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ks.map(x=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),l.jsx("span",{children:x})]},x))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:l.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),l.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:l.jsx(cN,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(dn).map(x=>l.jsx("option",{value:x,children:x},x))})]}),g()]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[l.jsx(Eo,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[l.jsx(cN,{className:"h-4 w-4"}),"Cancelar"]}),l.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[l.jsx(vh,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},jLe=({profile:e})=>{const[t,r]=S.useState(new Date),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(null),[u,d]=S.useState(!1),[f,h]=S.useState(Object.values(dn)),[p,g]=S.useState(!1),[x,b]=S.useState(null),[y,w]=S.useState(null),_=S.useCallback(async()=>{i(!0);try{const D=await wLe();a(D),c(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);S.useEffect(()=>{_()},[_]);const j=S.useMemo(()=>{const D=t.getFullYear(),O=t.getMonth(),L=new Date(D,O,1).getDay(),M=new Date(D,O+1,0).getDate(),J=[];let V=1;for(let K=0;K<6;K++){const z=[];for(let G=0;G<7;G++)K===0&&G<L||V>M?z.push(null):(z.push(new Date(D,O,V)),V++);if(J.push(z),V>M)break}return J},[t]),k=D=>{h(O=>O.includes(D)?O.filter(L=>L!==D):[...O,D])},I=()=>{f.length===Object.values(dn).length?h([]):h(Object.values(dn))},E=D=>{e!==Wt.ESTUDIANTE&&(b(D.toISOString().split("T")[0]),w(null),g(!0))},N=(D,O)=>{O.stopPropagation(),e!==Wt.ESTUDIANTE&&(b(D.date),w(D),g(!0))},B=async D=>{d(!0);try{y?await CLe(y.id,D):await ELe(D),await _(),g(!1)}catch(O){console.error("Error al guardar evento:",O);const L=O instanceof Error?O.message:"Error desconocido";c(`Error al guardar el evento: ${L}`)}finally{d(!1)}},R=async()=>{if(y){d(!0);try{await _Le(y.id),await _(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const O=D instanceof Error?D.message:"Error desconocido";c(`No se pudo eliminar el evento: ${O}`)}finally{d(!1)}}};return l.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),l.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&l.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&l.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[l.jsx(lwe,{className:"h-5 w-5 mt-0.5"}),l.jsx("p",{children:"No hay eventos registrados en la nube."})]}),l.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[l.jsx(IP,{className:"h-4 w-4"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(D=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${Nv[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[l.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>k(D),className:"hidden"}),l.jsx("span",{className:"shrink-0",children:NG[D]}),l.jsx("span",{children:Nv[D].label})]},D))]})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(Pw,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(BP,{className:"h-5 w-5"})})]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:NLe.map(D=>l.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:j.flat().map((D,O)=>{const L=D&&D.toDateString()===new Date().toDateString(),M=D==null?void 0:D.toISOString().split("T")[0],J=M?n.filter(V=>V.date===M&&f.includes(V.type)):[];return l.jsx("div",{onClick:()=>D&&E(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Wt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:J.map(V=>l.jsxs("div",{onClick:K=>N(V,K),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Nv[V.type].color}`,children:[l.jsx("span",{className:"shrink-0",children:NG[V.type]}),l.jsx("span",{className:"truncate",children:SLe(V)})]},V.id))}),e!==Wt.ESTUDIANTE&&l.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:l.jsx(Uu,{className:"h-4 w-4"})})]})},O)})})]}),p&&l.jsx(kLe,{isOpen:p,onClose:()=>g(!1),onSave:B,onDelete:R,event:y,date:x,isLoading:u})]})},fk="anuncios",BLe=async()=>{try{const e=zt(yt(Tr,fk),gr("fechaPublicacion","desc"));return(await Qn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},TLe=async e=>{try{return{id:(await vn(yt(Tr,fk),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},ILe=async(e,t)=>{try{const r=sr(Tr,fk,e);await Kc(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},FLe=async e=>{try{const t=sr(Tr,fk,e);await za(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},SG=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],OLe=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=S.useState({tipo:"Todos",cursos:[]}),f=S.useCallback(async()=>{a(!0);try{const E=await BLe();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);S.useEffect(()=>{f()},[f]);const h=E=>{const{name:N,value:B}=E.target;c(R=>({...R,[N]:B}))},p=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(N=>{var R;if(N.tipo!=="Cursos")return N;const B=(R=N.cursos)!=null&&R.includes(E)?N.cursos.filter(D=>D!==E):[...N.cursos||[],E];return{...N,cursos:B}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const N={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await TLe(N),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(N){console.error("Error al crear anuncio:",N),i("Error al publicar el anuncio en la nube.")}},b=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await FLe(E),await f()}catch(N){console.error("Error al eliminar anuncio:",N),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const N=t.find(B=>B.id===E);N&&(await ILe(E,{destacado:!N.destacado}),await f())}catch(N){console.error("Error al actualizar anuncio:",N),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=S.useMemo(()=>[...t].sort((E,N)=>E.destacado&&!N.destacado?-1:!E.destacado&&N.destacado?1:new Date(N.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),_=S.useMemo(()=>{const E=e.profile,N=e.curso;return w.filter(B=>{if(E===Wt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==Wt.ESTUDIANTE;const{tipo:R,cursos:D}=B.destinatarios;return R==="Todos"||R==="Profesores"&&E===Wt.PROFESORADO||R==="Coordinación TP"&&E===Wt.COORDINACION_TP?!0:R==="Cursos"?E===Wt.ESTUDIANTE?D==null?void 0:D.includes(N||""):!0:!1})},[w,e]),j=E=>e.profile===Wt.ESTUDIANTE?!1:e.profile===Wt.SUBDIRECCION||e.profile===E.profileCreador,k=()=>e.profile===Wt.SUBDIRECCION||e.profile===Wt.PROFESORADO,I="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Wt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:I})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>p(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ks.map(E=>{var N;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(N=u.cursos)==null?void 0:N.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:I})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((E,N)=>{const B=SG[N%SG.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:E.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[k()&&l.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),j(E)&&l.jsx("button",{onClick:()=>b(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},jse="api_logs",DLe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await vn(yt(ft,jse),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},PLe=e=>{const t=zt(yt(ft,jse),gr("timestamp","desc"));return fr(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},h1=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}DLe(e,t)},KL="actas_de_reunion",RLe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},LLe=e=>{const t=zt(yt(ft,KL),gr("fechaCreacion","desc"));return fr(t,n=>{const a=n.docs.map(s=>RLe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},MLe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await vn(yt(ft,KL),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},ULe=async e=>{try{const t=sr(ft,KL,e);await za(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},Bse=window.SpeechRecognition||window.webkitSpeechRecognition,kG=!!Bse,QLe=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),HLe=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState({tipoReunion:HB[0],asistentes:"",textoReunion:""}),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(!0),[p,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{h(!0);const E=LLe(N=>{r(N),!n&&N.length>0&&a(N[0]),h(!1)});return()=>E()},[n]);const b=E=>{const{name:N,value:B}=E.target;i(R=>({...R,[N]:B}))},y=S.useCallback(()=>{var E;if(!kG){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new Bse,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=N=>{let B="";for(let R=N.resultIndex;R<N.results.length;++R)N.results[R].isFinal&&(B+=N.results[R][0].transcript+". ");i(R=>({...R,textoReunion:R.textoReunion+B}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=N=>{console.error("Speech recognition error",N.error),g(`Error de reconocimiento: ${N.error}`),c(!1)},x.current.start())},[o]),w=async E=>{E.preventDefault();const{tipoReunion:N,asistentes:B,textoReunion:R}=s;if(!N||!B.trim()||!R.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{h1("Generador de Actas");const D="",L=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),M=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${R}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,z=(await(await L.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(z),Y={fechaCreacion:new Date().toISOString(),...s,...G},te=await MLe(Y,e);i({tipoReunion:HB[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await ULe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(N){console.error("Error deleting acta:",N),alert("No se pudo eliminar el acta.")}},j=E=>{a(E)},k=E=>E.temas||E.acuerdos||E.plazos||E.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,R)=>l.jsx("li",{children:B},R))})]}),E.acuerdos&&E.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,R)=>l.jsx("li",{children:B},R))})]}),E.plazos&&E.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,R)=>l.jsx("li",{children:B},R))})]}),E.responsables&&E.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,R)=>l.jsx("li",{children:B},R))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:I,children:HB.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:I}),kG&&l.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(QLe,{isListening:o})})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>l.jsxs("button",{onClick:()=>j(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,N)=>E.trim()&&l.jsx("li",{children:E.trim()},N))}),k(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},VLe="modulepreload",zLe=function(e){return"/"+e},jG={},m1=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=zLe(u),u in jG)return;jG[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":VLe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function pa(e){"@babel/helpers - typeof";return pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(e)}var Zo=Uint8Array,Lc=Uint16Array,qL=Int32Array,hk=new Zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mk=new Zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),VF=new Zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tse=function(e,t){for(var r=new Lc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new qL(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Ise=Tse(hk,2),Fse=Ise.b,zF=Ise.r;Fse[28]=258,zF[258]=28;var Ose=Tse(mk,0),$Le=Ose.b,BG=Ose.r,$F=new Lc(32768);for(var Ua=0;Ua<32768;++Ua){var S0=(Ua&43690)>>1|(Ua&21845)<<1;S0=(S0&52428)>>2|(S0&13107)<<2,S0=(S0&61680)>>4|(S0&3855)<<4,$F[Ua]=((S0&65280)>>8|(S0&255)<<8)>>1}var ZA=function(e,t,r){for(var n=e.length,a=0,s=new Lc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Lc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Lc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[$F[f]>>c]=u}else for(o=new Lc(n),a=0;a<n;++a)e[a]&&(o[a]=$F[i[e[a]-1]++]>>15-e[a]);return o},Nm=new Zo(288);for(var Ua=0;Ua<144;++Ua)Nm[Ua]=8;for(var Ua=144;Ua<256;++Ua)Nm[Ua]=9;for(var Ua=256;Ua<280;++Ua)Nm[Ua]=7;for(var Ua=280;Ua<288;++Ua)Nm[Ua]=8;var Zw=new Zo(32);for(var Ua=0;Ua<32;++Ua)Zw[Ua]=5;var GLe=ZA(Nm,9,0),KLe=ZA(Nm,9,1),qLe=ZA(Zw,5,0),WLe=ZA(Zw,5,1),MT=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},gd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},UT=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},WL=function(e){return(e+7)/8|0},Dse=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Zo(e.subarray(t,r))},XLe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yd=function(e,t,r){var n=new Error(t||XLe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,yd),!r)throw n;return n},YLe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Zo(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new Zo(a*3));var u=function(Ie){var ne=r.length;if(Ie>ne){var _e=new Zo(Math.max(ne*2,Ie));_e.set(r),r=_e}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,x=t.m,b=t.n,y=a*8;do{if(!p){d=gd(e,f,1);var w=gd(e,f+1,3);if(f+=3,w)if(w==1)p=KLe,g=WLe,x=9,b=5;else if(w==2){var I=gd(e,f,31)+257,E=gd(e,f+10,15)+4,N=I+gd(e,f+5,31)+1;f+=14;for(var B=new Zo(N),R=new Zo(19),D=0;D<E;++D)R[VF[D]]=gd(e,f+D*3,7);f+=E*3;for(var O=MT(R),L=(1<<O)-1,M=ZA(R,O,1),D=0;D<N;){var J=M[gd(e,f,L)];f+=J&15;var _=J>>4;if(_<16)B[D++]=_;else{var V=0,K=0;for(_==16?(K=3+gd(e,f,3),f+=2,V=B[D-1]):_==17?(K=3+gd(e,f,7),f+=3):_==18&&(K=11+gd(e,f,127),f+=7);K--;)B[D++]=V}}var z=B.subarray(0,I),G=B.subarray(I);x=MT(z),b=MT(G),p=ZA(z,x,1),g=ZA(G,b,1)}else yd(1);else{var _=WL(f)+4,j=e[_-4]|e[_-3]<<8,k=_+j;if(k>a){c&&yd(0);break}o&&u(h+j),r.set(e.subarray(_,k),h),t.b=h+=j,t.p=f=k*8,t.f=d;continue}if(f>y){c&&yd(0);break}}o&&u(h+131072);for(var Y=(1<<x)-1,te=(1<<b)-1,P=f;;P=f){var V=p[UT(e,f)&Y],H=V>>4;if(f+=V&15,f>y){c&&yd(0);break}if(V||yd(2),H<256)r[h++]=H;else if(H==256){P=f,p=null;break}else{var X=H-254;if(H>264){var D=H-257,Z=hk[D];X=gd(e,f,(1<<Z)-1)+Fse[D],f+=Z}var ae=g[UT(e,f)&te],le=ae>>4;ae||yd(3),f+=ae&15;var G=$Le[le];if(le>3){var Z=mk[le];G+=UT(e,f)&(1<<Z)-1,f+=Z}if(f>y){c&&yd(0);break}o&&u(h+131072);var ie=h+X;if(h<G){var ce=s-G,fe=Math.min(G,ie);for(ce+h<0&&yd(3);h<fe;++h)r[h]=n[ce+h]}for(;h<ie;++h)r[h]=r[h-G]}}t.l=p,t.p=P,t.b=h,t.f=d,p&&(d=1,t.m=x,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?Dse(r,0,h):r.subarray(0,h)},Uf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},oy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},QT=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Rse,l:0};if(a==1){var i=new Zo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(k,I){return k.f-I.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Lc(h+1),g=GF(r[d-1],p,0);if(g>t){var n=0,x=0,b=g-t,y=1<<b;for(s.sort(function(I,E){return p[E.s]-p[I.s]||I.f-E.f});n<a;++n){var w=s[n].s;if(p[w]>t)x+=y-(1<<g-p[w]),p[w]=t;else break}for(x>>=b;x>0;){var _=s[n].s;p[_]<t?x-=1<<t-p[_]++-1:++n}for(;n>=0&&x;--n){var j=s[n].s;p[j]==t&&(--p[j],++x)}g=t}return{t:new Zo(p),l:g}},GF=function(e,t,r){return e.s==-1?Math.max(GF(e.l,t,r+1),GF(e.r,t,r+1)):t[e.s]=r},TG=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Lc(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},ly=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Pse=function(e,t,r){var n=r.length,a=WL(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},IG=function(e,t,r,n,a,s,i,o,c,u,d){Uf(t,d++,r),++a[256];for(var f=QT(a,15),h=f.t,p=f.l,g=QT(s,15),x=g.t,b=g.l,y=TG(h),w=y.c,_=y.n,j=TG(x),k=j.c,I=j.n,E=new Lc(19),N=0;N<w.length;++N)++E[w[N]&31];for(var N=0;N<k.length;++N)++E[k[N]&31];for(var B=QT(E,7),R=B.t,D=B.l,O=19;O>4&&!R[VF[O-1]];--O);var L=u+5<<3,M=ly(a,Nm)+ly(s,Zw)+i,J=ly(a,h)+ly(s,x)+i+14+3*O+ly(E,R)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&L<=M&&L<=J)return Pse(t,d,e.subarray(c,c+u));var V,K,z,G;if(Uf(t,d,1+(J<M)),d+=2,J<M){V=ZA(h,p,0),K=h,z=ZA(x,b,0),G=x;var Y=ZA(R,D,0);Uf(t,d,_-257),Uf(t,d+5,I-1),Uf(t,d+10,O-4),d+=14;for(var N=0;N<O;++N)Uf(t,d+3*N,R[VF[N]]);d+=3*O;for(var te=[w,k],P=0;P<2;++P)for(var H=te[P],N=0;N<H.length;++N){var X=H[N]&31;Uf(t,d,Y[X]),d+=R[X],X>15&&(Uf(t,d,H[N]>>5&127),d+=H[N]>>12)}}else V=GLe,K=Nm,z=qLe,G=Zw;for(var N=0;N<o;++N){var Z=n[N];if(Z>255){var X=Z>>18&31;oy(t,d,V[X+257]),d+=K[X+257],X>7&&(Uf(t,d,Z>>23&31),d+=hk[X]);var ae=Z&31;oy(t,d,z[ae]),d+=G[ae],ae>3&&(oy(t,d,Z>>5&8191),d+=mk[ae])}else oy(t,d,V[Z]),d+=K[Z]}return oy(t,d,V[256]),d+K[256]},JLe=new qL([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rse=new Zo(0),ZLe=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Zo(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=JLe[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,x=s.p||new Lc(32768),b=s.h||new Lc(g+1),y=Math.ceil(r/3),w=2*y,_=function(Fe){return(e[Fe]^e[Fe+1]<<y^e[Fe+2]<<w)&g},j=new qL(25e3),k=new Lc(288),I=new Lc(32),E=0,N=0,B=s.i||0,R=0,D=s.w||0,O=0;B+2<i;++B){var L=_(B),M=B&32767,J=b[L];if(x[M]=J,b[L]=M,D<=B){var V=i-B;if((E>7e3||R>24576)&&(V>423||!u)){d=IG(e,c,0,j,k,I,N,R,O,B-O,d),R=E=N=0,O=B;for(var K=0;K<286;++K)k[K]=0;for(var K=0;K<30;++K)I[K]=0}var z=2,G=0,Y=p,te=M-J&32767;if(V>2&&L==_(B-te))for(var P=Math.min(h,V)-1,H=Math.min(32767,B),X=Math.min(258,V);te<=H&&--Y&&M!=J;){if(e[B+z]==e[B+z-te]){for(var Z=0;Z<X&&e[B+Z]==e[B+Z-te];++Z);if(Z>z){if(z=Z,G=te,Z>P)break;for(var ae=Math.min(te,Z-2),le=0,K=0;K<ae;++K){var ie=B-te+K&32767,ce=x[ie],fe=ie-ce&32767;fe>le&&(le=fe,J=ie)}}}M=J,J=x[M],te+=M-J&32767}if(G){j[R++]=268435456|zF[z]<<18|BG[G];var Ie=zF[z]&31,ne=BG[G]&31;N+=hk[Ie]+mk[ne],++k[257+Ie],++I[ne],D=B+z,++E}else j[R++]=e[B],++k[e[B]]}}for(B=Math.max(B,D);B<i;++B)j[R++]=e[B],++k[e[B]];d=IG(e,c,u,j,k,I,N,R,O,B-O,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=b,s.p=x,s.i=B,s.w=D)}else{for(var B=s.w||0;B<i+u;B+=65535){var _e=B+65535;_e>=i&&(c[d/8|0]=u,_e=i),d=Pse(c,d+1,e.subarray(B,_e))}s.i=i}return Dse(o,0,n+WL(d)+a)},Lse=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},e8e=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Zo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return ZLe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Mse=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},t8e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Lse();a.p(t.dictionary),Mse(e,2,a.d())}},r8e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&yd(6,"invalid zlib data"),(e[1]>>5&1)==1&&yd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function KF(e,t){t||(t={});var r=Lse();r.p(e);var n=e8e(e,t,t.dictionary?6:2,4);return t8e(n,t),Mse(n,n.length-4,r.d()),n}function n8e(e,t){return YLe(e.subarray(r8e(e),-4),{i:2},t,t)}var a8e=typeof TextDecoder<"u"&&new TextDecoder,s8e=0;try{a8e.decode(Rse,{stream:!0}),s8e=1}catch{}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function HT(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var _a={log:HT,warn:function(e){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):HT.call(null,arguments))},error:function(e){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):HT(e))}};function VT(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Np(n.response,t,r)},n.onerror=function(){_a.error("could not download file")},n.send()}function FG(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function WC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var lw,qF,Np=Qr.saveAs||((typeof window>"u"?"undefined":pa(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Qr.URL||Qr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?FG(a.href)?VT(e,t,r):WC(a,a.target="_blank"):WC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){WC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(FG(e))VT(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){WC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:pa(s)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return VT(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":pa(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Qr.URL||Qr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Use(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zT(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Ro(r,n,a,s,t[0],7,-680876936),s=Ro(s,r,n,a,t[1],12,-389564586),a=Ro(a,s,r,n,t[2],17,606105819),n=Ro(n,a,s,r,t[3],22,-1044525330),r=Ro(r,n,a,s,t[4],7,-176418897),s=Ro(s,r,n,a,t[5],12,1200080426),a=Ro(a,s,r,n,t[6],17,-1473231341),n=Ro(n,a,s,r,t[7],22,-45705983),r=Ro(r,n,a,s,t[8],7,1770035416),s=Ro(s,r,n,a,t[9],12,-1958414417),a=Ro(a,s,r,n,t[10],17,-42063),n=Ro(n,a,s,r,t[11],22,-1990404162),r=Ro(r,n,a,s,t[12],7,1804603682),s=Ro(s,r,n,a,t[13],12,-40341101),a=Ro(a,s,r,n,t[14],17,-1502002290),r=Lo(r,n=Ro(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Lo(s,r,n,a,t[6],9,-1069501632),a=Lo(a,s,r,n,t[11],14,643717713),n=Lo(n,a,s,r,t[0],20,-373897302),r=Lo(r,n,a,s,t[5],5,-701558691),s=Lo(s,r,n,a,t[10],9,38016083),a=Lo(a,s,r,n,t[15],14,-660478335),n=Lo(n,a,s,r,t[4],20,-405537848),r=Lo(r,n,a,s,t[9],5,568446438),s=Lo(s,r,n,a,t[14],9,-1019803690),a=Lo(a,s,r,n,t[3],14,-187363961),n=Lo(n,a,s,r,t[8],20,1163531501),r=Lo(r,n,a,s,t[13],5,-1444681467),s=Lo(s,r,n,a,t[2],9,-51403784),a=Lo(a,s,r,n,t[7],14,1735328473),r=Mo(r,n=Lo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Mo(s,r,n,a,t[8],11,-2022574463),a=Mo(a,s,r,n,t[11],16,1839030562),n=Mo(n,a,s,r,t[14],23,-35309556),r=Mo(r,n,a,s,t[1],4,-1530992060),s=Mo(s,r,n,a,t[4],11,1272893353),a=Mo(a,s,r,n,t[7],16,-155497632),n=Mo(n,a,s,r,t[10],23,-1094730640),r=Mo(r,n,a,s,t[13],4,681279174),s=Mo(s,r,n,a,t[0],11,-358537222),a=Mo(a,s,r,n,t[3],16,-722521979),n=Mo(n,a,s,r,t[6],23,76029189),r=Mo(r,n,a,s,t[9],4,-640364487),s=Mo(s,r,n,a,t[12],11,-421815835),a=Mo(a,s,r,n,t[15],16,530742520),r=Uo(r,n=Mo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Uo(s,r,n,a,t[7],10,1126891415),a=Uo(a,s,r,n,t[14],15,-1416354905),n=Uo(n,a,s,r,t[5],21,-57434055),r=Uo(r,n,a,s,t[12],6,1700485571),s=Uo(s,r,n,a,t[3],10,-1894986606),a=Uo(a,s,r,n,t[10],15,-1051523),n=Uo(n,a,s,r,t[1],21,-2054922799),r=Uo(r,n,a,s,t[8],6,1873313359),s=Uo(s,r,n,a,t[15],10,-30611744),a=Uo(a,s,r,n,t[6],15,-1560198380),n=Uo(n,a,s,r,t[13],21,1309151649),r=Uo(r,n,a,s,t[4],6,-145523070),s=Uo(s,r,n,a,t[11],10,-1120210379),a=Uo(a,s,r,n,t[2],15,718787259),n=Uo(n,a,s,r,t[9],21,-343485551),e[0]=q0(r,e[0]),e[1]=q0(n,e[1]),e[2]=q0(a,e[2]),e[3]=q0(s,e[3])}function pk(e,t,r,n,a,s){return t=q0(q0(t,e),q0(n,s)),q0(t<<a|t>>>32-a,r)}function Ro(e,t,r,n,a,s,i){return pk(t&r|~t&n,e,t,a,s,i)}function Lo(e,t,r,n,a,s,i){return pk(t&n|r&~n,e,t,a,s,i)}function Mo(e,t,r,n,a,s,i){return pk(t^r^n,e,t,a,s,i)}function Uo(e,t,r,n,a,s,i){return pk(r^(t|~n),e,t,a,s,i)}function Qse(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)zT(n,i8e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(zT(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,zT(n,a),n}function i8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}lw=Qr.atob.bind(Qr),qF=Qr.btoa.bind(Qr);var OG="0123456789abcdef".split("");function o8e(e){for(var t="",r=0;r<4;r++)t+=OG[e>>8*r+4&15]+OG[e>>8*r&15];return t}function l8e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function WF(e){return Qse(e).map(l8e).join("")}var c8e=function(e){for(var t=0;t<e.length;t++)e[t]=o8e(e[t]);return e.join("")}(Qse("hello"))!="5d41402abc4b2a76b9719d911017c592";function q0(e,t){if(c8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function XF(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(c=0;c<f;c++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DG={print:4,modify:8,copy:16,"annot-forms":32};function rv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(DG.perm!==void 0)throw new Error("Invalid permission: "+o);a+=DG[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=WF(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=XF(this.encryptionKey,this.padding)}function nv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function PG(e){if(pa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Qr.console&&_a.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function qN(e){if(!(this instanceof qN))return new qN(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Hse(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Bp(e,t,r,n,a){if(!(this instanceof Bp))return new Bp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Hse.call(this,n,a)}function fv(e,t,r,n,a){if(!(this instanceof fv))return new fv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Hse.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;pa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=PG;var g="1.3",x=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(W){g=W};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(W){return b[W]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function j(){this.saveGraphicsState(),me(new bt(wt,0,0,-wt,0,Pi()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",_=w.ADVANCED}function k(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var I=p.__private__.combineFontStyleAndFontWeight=function(W,Ae){if(W=="bold"&&Ae=="normal"||W=="bold"&&Ae==400||W=="normal"&&Ae=="italic"||W=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(W=Ae==400||Ae==="normal"?W==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||W!=="normal"?(Ae==700?"bold":Ae)+""+W:"bold"),W};p.advancedAPI=function(W){var Ae=_===w.COMPAT;return Ae&&j.call(this),typeof W!="function"||(W(this),Ae&&k.call(this)),this},p.compatAPI=function(W){var Ae=_===w.ADVANCED;return Ae&&k.call(this),typeof W!="function"||(W(this),Ae&&j.call(this)),this},p.isAdvancedAPI=function(){return _===w.ADVANCED};var E,N=function(W){if(_!==w.ADVANCED)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=p.roundToPrecision=p.__private__.roundToPrecision=function(W,Ae){var Oe=t||Ae;if(isNaN(W)||isNaN(Oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(Oe).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return B(W,c)}:c==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return B(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return B(W,16)};var R=p.f2=p.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return B(W,2)},D=p.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return B(W,3)},O=p.scale=p.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?W*wt:_===w.ADVANCED?W:void 0},L=function(W){return _===w.COMPAT?Pi()-W:_===w.ADVANCED?W:void 0},M=function(W){return O(L(W))};p.__private__.setPrecision=p.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(t=parseInt(W,10))};var J,V="00000000000000000000000000000000",K=p.__private__.getFileId=function(){return V},z=p.__private__.setFileId=function(W){return V=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new rv(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};p.setFileId=function(W){return z(W),this},p.getFileId=function(){return K()};var G=p.__private__.convertDateToPDFDate=function(W){var Ae=W.getTimezoneOffset(),Oe=Ae<0?"+":"-",Le=Math.floor(Math.abs(Ae/60)),Ge=Math.abs(Ae%60),vt=[Oe,X(Le),"'",X(Ge),"'"].join("");return["D:",W.getFullYear(),X(W.getMonth()+1),X(W.getDate()),X(W.getHours()),X(W.getMinutes()),X(W.getSeconds()),vt].join("")},Y=p.__private__.convertPDFDateToDate=function(W){var Ae=parseInt(W.substr(2,4),10),Oe=parseInt(W.substr(6,2),10)-1,Le=parseInt(W.substr(8,2),10),Ge=parseInt(W.substr(10,2),10),vt=parseInt(W.substr(12,2),10),Lt=parseInt(W.substr(14,2),10);return new Date(Ae,Oe,Le,Ge,vt,Lt,0)},te=p.__private__.setCreationDate=function(W){var Ae;if(W===void 0&&(W=new Date),W instanceof Date)Ae=G(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=W}return J=Ae},P=p.__private__.getCreationDate=function(W){var Ae=J;return W==="jsDate"&&(Ae=Y(J)),Ae};p.setCreationDate=function(W){return te(W),this},p.getCreationDate=function(W){return P(W)};var H,X=p.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},Z=p.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},ae=0,le=[],ie=[],ce=0,fe=[],Ie=[],ne=!1,_e=ie,Fe=function(){ae=0,ce=0,ie=[],le=[],fe=[],Ce=qr(),we=qr()};p.__private__.setCustomOutputDestination=function(W){ne=!0,_e=W};var Se=function(W){ne||(_e=W)};p.__private__.resetCustomOutputDestination=function(){ne=!1,_e=ie};var me=p.__private__.out=function(W){return W=W.toString(),ce+=W.length+1,_e.push(W),_e},Te=p.__private__.write=function(W){return me(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},Me=p.__private__.getArrayBuffer=function(W){for(var Ae=W.length,Oe=new ArrayBuffer(Ae),Le=new Uint8Array(Oe);Ae--;)Le[Ae]=W.charCodeAt(Ae);return Oe},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return We};var be=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(W){return be=_===w.ADVANCED?W/wt:W,this};var De,Re=p.__private__.getFontSize=p.getFontSize=function(){return _===w.COMPAT?be:be*wt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(W){return qe=W,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,ct=p.__private__.setZoomMode=function(W){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))De=W;else if(isNaN(W)){if(Ae.indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');De=W}else De=parseInt(W,10)};p.__private__.getZoomMode=function(){return De};var pt,It=p.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');Ze=W};p.__private__.getPageMode=function(){return Ze};var Mt=p.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');pt=W};p.__private__.getLayoutMode=function(){return pt},p.__private__.setDisplayMode=p.setDisplayMode=function(W,Ae,Oe){return ct(W),Mt(Ae),It(Oe),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(W){if(Object.keys(Pt).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[W]},p.__private__.getDocumentProperties=function(){return Pt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(W){for(var Ae in Pt)Pt.hasOwnProperty(Ae)&&W[Ae]&&(Pt[Ae]=W[Ae]);return this},p.__private__.setDocumentProperty=function(W,Ae){if(Object.keys(Pt).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[W]=Ae};var Qt,wt,jr,tr,an,Nr={},$r={},In=[],Pr={},fs={},hn={},la={},ja=null,rn=0,pr=[],et=new PG(p),gt=e.hotfixes||[],Je={},xt={},Et=[],bt=function W(Ae,Oe,Le,Ge,vt,Lt){if(!(this instanceof W))return new W(Ae,Oe,Le,Ge,vt,Lt);isNaN(Ae)&&(Ae=1),isNaN(Oe)&&(Oe=0),isNaN(Le)&&(Le=0),isNaN(Ge)&&(Ge=1),isNaN(vt)&&(vt=0),isNaN(Lt)&&(Lt=0),this._matrix=[Ae,Oe,Le,Ge,vt,Lt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(W)},bt.prototype.multiply=function(W){var Ae=W.sx*this.sx+W.shy*this.shx,Oe=W.sx*this.shy+W.shy*this.sy,Le=W.shx*this.sx+W.sy*this.shx,Ge=W.shx*this.shy+W.sy*this.sy,vt=W.tx*this.sx+W.ty*this.shx+this.tx,Lt=W.tx*this.shy+W.ty*this.sy+this.ty;return new bt(Ae,Oe,Le,Ge,vt,Lt)},bt.prototype.decompose=function(){var W=this.sx,Ae=this.shy,Oe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty,Lt=Math.sqrt(W*W+Ae*Ae),Zt=(W/=Lt)*Oe+(Ae/=Lt)*Le;Oe-=W*Zt,Le-=Ae*Zt;var F=Math.sqrt(Oe*Oe+Le*Le);return Zt/=F,W*(Le/=F)<Ae*(Oe/=F)&&(W=-W,Ae=-Ae,Zt=-Zt,Lt=-Lt),{scale:new bt(Lt,0,0,F,0,0),translate:new bt(1,0,0,1,Ge,vt),rotate:new bt(W,Ae,-Ae,W,0,0),skew:new bt(1,0,Zt,1,0,0)}},bt.prototype.toString=function(W){return this.join(" ")},bt.prototype.inversed=function(){var W=this.sx,Ae=this.shy,Oe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty,Lt=1/(W*Le-Ae*Oe),Zt=Le*Lt,F=-Ae*Lt,re=-Oe*Lt,oe=W*Lt;return new bt(Zt,F,re,oe,-Zt*Ge-re*vt,-F*Ge-oe*vt)},bt.prototype.applyToPoint=function(W){var Ae=W.x*this.sx+W.y*this.shx+this.tx,Oe=W.x*this.shy+W.y*this.sy+this.ty;return new Ju(Ae,Oe)},bt.prototype.applyToRectangle=function(W){var Ae=this.applyToPoint(W),Oe=this.applyToPoint(new Ju(W.x+W.w,W.y+W.h));return new tA(Ae.x,Ae.y,Oe.x-Ae.x,Oe.y-Ae.y)},bt.prototype.clone=function(){var W=this.sx,Ae=this.shy,Oe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty;return new bt(W,Ae,Oe,Le,Ge,vt)},p.Matrix=bt;var nr=p.matrixMult=function(W,Ae){return Ae.multiply(W)},xr=new bt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=xr;var Wr=function(W,Ae){if(!fs[W]){var Oe=(Ae instanceof Bp?"Sh":"P")+(Object.keys(Pr).length+1).toString(10);Ae.id=Oe,fs[W]=Oe,Pr[Oe]=Ae,et.publish("addPattern",Ae)}};p.ShadingPattern=Bp,p.TilingPattern=fv,p.addShadingPattern=function(W,Ae){return N("addShadingPattern()"),Wr(W,Ae),this},p.beginTilingPattern=function(W){N("beginTilingPattern()"),au(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},p.endTilingPattern=function(W,Ae){N("endTilingPattern()"),Ae.stream=Ie[H].join(`
`),Wr(W,Ae),et.publish("endTilingPattern",Ae),Et.pop().restore()};var Zr=p.__private__.newObject=function(){var W=qr();return he(W,!0),W},qr=p.__private__.newObjectDeferred=function(){return ae++,le[ae]=function(){return ce},ae},he=function(W,Ae){return Ae=typeof Ae=="boolean"&&Ae,le[W]=ce,Ae&&me(W+" 0 obj"),W},je=p.__private__.newAdditionalObject=function(){var W={objId:qr(),content:""};return fe.push(W),W},Ce=qr(),we=qr(),Ne=p.__private__.decodeColorString=function(W){var Ae=W.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Oe=parseFloat(Ae[0]);Ae=[Oe,Oe,Oe,"r"]}for(var Le="#",Ge=0;Ge<3;Ge++)Le+=("0"+Math.floor(255*parseFloat(Ae[Ge])).toString(16)).slice(-2);return Le},Be=p.__private__.encodeColorString=function(W){var Ae;typeof W=="string"&&(W={ch1:W});var Oe=W.ch1,Le=W.ch2,Ge=W.ch3,vt=W.ch4,Lt=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Oe=="string"&&Oe.charAt(0)!=="#"){var Zt=new Use(Oe);if(Zt.ok)Oe=Zt.toHex();else if(!/^\d*\.?\d*$/.test(Oe))throw new Error('Invalid color "'+Oe+'" passed to jsPDF.encodeColorString.')}if(typeof Oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Oe)&&(Oe="#"+Oe[1]+Oe[1]+Oe[2]+Oe[2]+Oe[3]+Oe[3]),typeof Oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Oe)){var F=parseInt(Oe.substr(1),16);Oe=F>>16&255,Le=F>>8&255,Ge=255&F}if(Le===void 0||vt===void 0&&Oe===Le&&Le===Ge)if(typeof Oe=="string")Ae=Oe+" "+Lt[0];else switch(W.precision){case 2:Ae=R(Oe/255)+" "+Lt[0];break;case 3:default:Ae=D(Oe/255)+" "+Lt[0]}else if(vt===void 0||pa(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return Ae=["1.","1.","1.",Lt[1]].join(" ");if(typeof Oe=="string")Ae=[Oe,Le,Ge,Lt[1]].join(" ");else switch(W.precision){case 2:Ae=[R(Oe/255),R(Le/255),R(Ge/255),Lt[1]].join(" ");break;default:case 3:Ae=[D(Oe/255),D(Le/255),D(Ge/255),Lt[1]].join(" ")}}else if(typeof Oe=="string")Ae=[Oe,Le,Ge,vt,Lt[2]].join(" ");else switch(W.precision){case 2:Ae=[R(Oe),R(Le),R(Ge),R(vt),Lt[2]].join(" ");break;case 3:default:Ae=[D(Oe),D(Le),D(Ge),D(vt),Lt[2]].join(" ")}return Ae},Ye=p.__private__.getFilters=function(){return i},dt=p.__private__.putStream=function(W){var Ae=(W=W||{}).data||"",Oe=W.filters||Ye(),Le=W.alreadyAppliedFilters||[],Ge=W.addLength1||!1,vt=Ae.length,Lt=W.objectId,Zt=function(Fr){return Fr};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=ca.encryptor(Lt,0));var F={};Oe===!0&&(Oe=["FlateEncode"]);var re=W.additionalKeyValues||[],oe=(F=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(Ae,Oe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(F.data.length!==0&&(re.push({key:"Length",value:F.data.length}),Ge===!0&&re.push({key:"Length1",value:vt})),oe.length!=0)if(oe.split("/").length-1==1)re.push({key:"Filter",value:oe});else{re.push({key:"Filter",value:"["+oe+"]"});for(var ve=0;ve<re.length;ve+=1)if(re[ve].key==="DecodeParms"){for(var ze=[],ot=0;ot<F.reverseChain.split("/").length-1;ot+=1)ze.push("null");ze.push(re[ve].value),re[ve].value="["+ze.join(" ")+"]"}}me("<<");for(var Ut=0;Ut<re.length;Ut++)me("/"+re[Ut].key+" "+re[Ut].value);me(">>"),F.data.length!==0&&(me("stream"),me(Zt(F.data)),me("endstream"))},$e=p.__private__.putPage=function(W){var Ae=W.number,Oe=W.data,Le=W.objId,Ge=W.contentsObjId;he(Le,!0),me("<</Type /Page"),me("/Parent "+W.rootDictionaryObjId+" 0 R"),me("/Resources "+W.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(E(W.mediaBox.bottomLeftX))+" "+parseFloat(E(W.mediaBox.bottomLeftY))+" "+E(W.mediaBox.topRightX)+" "+E(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&me("/CropBox ["+E(W.cropBox.bottomLeftX)+" "+E(W.cropBox.bottomLeftY)+" "+E(W.cropBox.topRightX)+" "+E(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&me("/BleedBox ["+E(W.bleedBox.bottomLeftX)+" "+E(W.bleedBox.bottomLeftY)+" "+E(W.bleedBox.topRightX)+" "+E(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&me("/TrimBox ["+E(W.trimBox.bottomLeftX)+" "+E(W.trimBox.bottomLeftY)+" "+E(W.trimBox.topRightX)+" "+E(W.trimBox.topRightY)+"]"),W.artBox!==null&&me("/ArtBox ["+E(W.artBox.bottomLeftX)+" "+E(W.artBox.bottomLeftY)+" "+E(W.artBox.topRightX)+" "+E(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&me("/UserUnit "+W.userUnit),et.publish("putPage",{objId:Le,pageContext:pr[Ae],pageNumber:Ae,page:Oe}),me("/Contents "+Ge+" 0 R"),me(">>"),me("endobj");var vt=Oe.join(`
`);return _===w.ADVANCED&&(vt+=`
Q`),he(Ge,!0),dt({data:vt,filters:Ye(),objectId:Ge}),me("endobj"),Le},rt=p.__private__.putPages=function(){var W,Ae,Oe=[];for(W=1;W<=rn;W++)pr[W].objId=qr(),pr[W].contentsObjId=qr();for(W=1;W<=rn;W++)Oe.push($e({number:W,data:Ie[W],objId:pr[W].objId,contentsObjId:pr[W].contentsObjId,mediaBox:pr[W].mediaBox,cropBox:pr[W].cropBox,bleedBox:pr[W].bleedBox,trimBox:pr[W].trimBox,artBox:pr[W].artBox,userUnit:pr[W].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));he(Ce,!0),me("<</Type /Pages");var Le="/Kids [";for(Ae=0;Ae<rn;Ae++)Le+=Oe[Ae]+" 0 R ";me(Le+"]"),me("/Count "+rn),me(">>"),me("endobj"),et.publish("postPutPages")},it=function(W){et.publish("putFont",{font:W,out:me,newObject:Zr,putStream:dt}),W.isAlreadyPutted!==!0&&(W.objectNumber=Zr(),me("<<"),me("/Type /Font"),me("/BaseFont /"+nv(W.postScriptName)),me("/Subtype /Type1"),typeof W.encoding=="string"&&me("/Encoding /"+W.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},Ft=function(){for(var W in Nr)Nr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&it(Nr[W])},Vt=function(W){W.objectNumber=Zr();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[E(W.x),E(W.y),E(W.x+W.width),E(W.y+W.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var Oe=W.pages[1].join(`
`);dt({data:Oe,additionalKeyValues:Ae,objectId:W.objectNumber}),me("endobj")},Jt=function(){for(var W in Je)Je.hasOwnProperty(W)&&Vt(Je[W])},Ht=function(W,Ae){var Oe,Le=[],Ge=1/(Ae-1);for(Oe=0;Oe<1;Oe+=Ge)Le.push(Oe);if(Le.push(1),W[0].offset!=0){var vt={offset:0,color:W[0].color};W.unshift(vt)}if(W[W.length-1].offset!=1){var Lt={offset:1,color:W[W.length-1].color};W.push(Lt)}for(var Zt="",F=0,re=0;re<Le.length;re++){for(Oe=Le[re];Oe>W[F+1].offset;)F++;var oe=W[F].offset,ve=(Oe-oe)/(W[F+1].offset-oe),ze=W[F].color,ot=W[F+1].color;Zt+=Z(Math.round((1-ve)*ze[0]+ve*ot[0]).toString(16))+Z(Math.round((1-ve)*ze[1]+ve*ot[1]).toString(16))+Z(Math.round((1-ve)*ze[2]+ve*ot[2]).toString(16))}return Zt.trim()},Gt=function(W,Ae){Ae||(Ae=21);var Oe=Zr(),Le=Ht(W.colors,Ae),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+Ae+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Le,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Oe}),me("endobj"),W.objectNumber=Zr(),me("<< /ShadingType "+W.type),me("/ColorSpace /DeviceRGB");var vt="/Coords ["+E(parseFloat(W.coords[0]))+" "+E(parseFloat(W.coords[1]))+" ";W.type===2?vt+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3])):vt+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3]))+" "+E(parseFloat(W.coords[4]))+" "+E(parseFloat(W.coords[5])),me(vt+="]"),W.matrix&&me("/Matrix ["+W.matrix.toString()+"]"),me("/Function "+Oe+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},Sr=function(W,Ae){var Oe=qr(),Le=Zr();Ae.push({resourcesOid:Oe,objectOid:Le}),W.objectNumber=Le;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+W.boundingBox.map(E).join(" ")+"]"}),Ge.push({key:"XStep",value:E(W.xStep)}),Ge.push({key:"YStep",value:E(W.yStep)}),Ge.push({key:"Resources",value:Oe+" 0 R"}),W.matrix&&Ge.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),dt({data:W.stream,additionalKeyValues:Ge,objectId:W.objectNumber}),me("endobj")},sn=function(W){var Ae;for(Ae in Pr)Pr.hasOwnProperty(Ae)&&(Pr[Ae]instanceof Bp?Gt(Pr[Ae]):Pr[Ae]instanceof fv&&Sr(Pr[Ae],W))},on=function(W){for(var Ae in W.objectNumber=Zr(),me("<<"),W)switch(Ae){case"opacity":me("/ca "+R(W[Ae]));break;case"stroke-opacity":me("/CA "+R(W[Ae]))}me(">>"),me("endobj")},An=function(){var W;for(W in hn)hn.hasOwnProperty(W)&&on(hn[W])},hs=function(){for(var W in me("/XObject <<"),Je)Je.hasOwnProperty(W)&&Je[W].objectNumber>=0&&me("/"+W+" "+Je[W].objectNumber+" 0 R");et.publish("putXobjectDict"),me(">>")},Co=function(){ca.oid=Zr(),me("<<"),me("/Filter /Standard"),me("/V "+ca.v),me("/R "+ca.r),me("/U <"+ca.toHexString(ca.U)+">"),me("/O <"+ca.toHexString(ca.O)+">"),me("/P "+ca.P),me(">>"),me("endobj")},ms=function(){for(var W in me("/Font <<"),Nr)Nr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&me("/"+W+" "+Nr[W].objectNumber+" 0 R");me(">>")},Zs=function(){if(Object.keys(Pr).length>0){for(var W in me("/Shading <<"),Pr)Pr.hasOwnProperty(W)&&Pr[W]instanceof Bp&&Pr[W].objectNumber>=0&&me("/"+W+" "+Pr[W].objectNumber+" 0 R");et.publish("putShadingPatternDict"),me(">>")}},Ts=function(W){if(Object.keys(Pr).length>0){for(var Ae in me("/Pattern <<"),Pr)Pr.hasOwnProperty(Ae)&&Pr[Ae]instanceof p.TilingPattern&&Pr[Ae].objectNumber>=0&&Pr[Ae].objectNumber<W&&me("/"+Ae+" "+Pr[Ae].objectNumber+" 0 R");et.publish("putTilingPatternDict"),me(">>")}},gi=function(){if(Object.keys(hn).length>0){var W;for(W in me("/ExtGState <<"),hn)hn.hasOwnProperty(W)&&hn[W].objectNumber>=0&&me("/"+W+" "+hn[W].objectNumber+" 0 R");et.publish("putGStateDict"),me(">>")}},xa=function(W){he(W.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ms(),Zs(),Ts(W.objectOid),gi(),hs(),me(">>"),me("endobj")},ei=function(){var W=[];Ft(),An(),Jt(),sn(W),et.publish("putResources"),W.forEach(xa),xa({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),et.publish("postPutResources")},Xd=function(){et.publish("putAdditionalObjects");for(var W=0;W<fe.length;W++){var Ae=fe[W];he(Ae.objId,!0),me(Ae.content),me("endobj")}et.publish("postPutAdditionalObjects")},Hh=function(W){$r[W.fontName]=$r[W.fontName]||{},$r[W.fontName][W.fontStyle]=W.id},Wc=function(W,Ae,Oe,Le,Ge){var vt={id:"F"+(Object.keys(Nr).length+1).toString(10),postScriptName:W,fontName:Ae,fontStyle:Oe,encoding:Le,isStandardFont:Ge||!1,metadata:{}};return et.publish("addFont",{font:vt,instance:this}),Nr[vt.id]=vt,Hh(vt),vt.id},df=function(W){for(var Ae=0,Oe=We.length;Ae<Oe;Ae++){var Le=Wc.call(this,W[Ae][0],W[Ae][1],W[Ae][2],We[Ae][3],!0);f===!1&&(h[Le]=!0);var Ge=W[Ae][0].split("-");Hh({id:Le,fontName:Ge[0],fontStyle:Ge[1]||""})}et.publish("addFonts",{fonts:Nr,dictionary:$r})},xi=function(W){return W.foo=function(){try{return W.apply(this,arguments)}catch(Le){var Ae=Le.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Oe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Qr.console)throw new Error(Oe);Qr.console.error(Oe,Le),Qr.alert&&alert(Oe)}},W.foo.bar=W,W.foo},Yd=function(W,Ae){var Oe,Le,Ge,vt,Lt,Zt,F,re,oe;if(Ge=(Ae=Ae||{}).sourceEncoding||"Unicode",Lt=Ae.outputEncoding,(Ae.autoencode||Lt)&&Nr[Qt].metadata&&Nr[Qt].metadata[Ge]&&Nr[Qt].metadata[Ge].encoding&&(vt=Nr[Qt].metadata[Ge].encoding,!Lt&&Nr[Qt].encoding&&(Lt=Nr[Qt].encoding),!Lt&&vt.codePages&&(Lt=vt.codePages[0]),typeof Lt=="string"&&(Lt=vt[Lt]),Lt)){for(F=!1,Zt=[],Oe=0,Le=W.length;Oe<Le;Oe++)(re=Lt[W.charCodeAt(Oe)])?Zt.push(String.fromCharCode(re)):Zt.push(W[Oe]),Zt[Oe].charCodeAt(0)>>8&&(F=!0);W=Zt.join("")}for(Oe=W.length;F===void 0&&Oe!==0;)W.charCodeAt(Oe-1)>>8&&(F=!0),Oe--;if(!F)return W;for(Zt=Ae.noBOM?[]:[254,255],Oe=0,Le=W.length;Oe<Le;Oe++){if((oe=(re=W.charCodeAt(Oe))>>8)>>8)throw new Error("Character at position "+Oe+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(oe),Zt.push(re-(oe<<8))}return String.fromCharCode.apply(void 0,Zt)},Fn=p.__private__.pdfEscape=p.pdfEscape=function(W,Ae){return Yd(W,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vi=p.__private__.beginPage=function(W){Ie[++rn]=[],pr[rn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},Sl(rn),Se(Ie[H])},Xc=function(W,Ae){var Oe,Le,Ge;switch(r=Ae||r,typeof W=="string"&&(Oe=y(W.toLowerCase()),Array.isArray(Oe)&&(Le=Oe[0],Ge=Oe[1])),Array.isArray(W)&&(Le=W[0]*wt,Ge=W[1]*wt),isNaN(Le)&&(Le=a[0],Ge=a[1]),(Le>14400||Ge>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ge=Math.min(14400,Ge)),a=[Le,Ge],r.substr(0,1)){case"l":Ge>Le&&(a=[Ge,Le]);break;case"p":Le>Ge&&(a=[Ge,Le])}vi(a),mf(eu),me(bi),pf!==0&&me(pf+" J"),Yu!==0&&me(Yu+" j"),et.publish("addPage",{pageNumber:rn})},Yc=function(W){W>0&&W<=rn&&(Ie.splice(W,1),pr.splice(W,1),rn--,H>rn&&(H=rn),this.setPage(H))},Sl=function(W){W>0&&W<=rn&&(H=W)},Vn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ie.length-1},Jc=function(W,Ae,Oe){var Le,Ge=void 0;return Oe=Oe||{},W=W!==void 0?W:Nr[Qt].fontName,Ae=Ae!==void 0?Ae:Nr[Qt].fontStyle,Le=W.toLowerCase(),$r[Le]!==void 0&&$r[Le][Ae]!==void 0?Ge=$r[Le][Ae]:$r[W]!==void 0&&$r[W][Ae]!==void 0?Ge=$r[W][Ae]:Oe.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+W+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ge||Oe.noFallback||(Ge=$r.times[Ae])==null&&(Ge=$r.times.normal),Ge},_o=p.__private__.putInfo=function(){var W=Zr(),Ae=function(Le){return Le};for(var Oe in d!==null&&(Ae=ca.encryptor(W,0)),me("<<"),me("/Producer ("+Fn(Ae("jsPDF "+vr.version))+")"),Pt)Pt.hasOwnProperty(Oe)&&Pt[Oe]&&me("/"+Oe.substr(0,1).toUpperCase()+Oe.substr(1)+" ("+Fn(Ae(Pt[Oe]))+")");me("/CreationDate ("+Fn(Ae(J))+")"),me(">>"),me("endobj")},oc=p.__private__.putCatalog=function(W){var Ae=(W=W||{}).rootDictionaryObjId||Ce;switch(Zr(),me("<<"),me("/Type /Catalog"),me("/Pages "+Ae+" 0 R"),De||(De="fullwidth"),De){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Oe=""+De;Oe.substr(Oe.length-1)==="%"&&(De=parseInt(De)/100),typeof De=="number"&&me("/OpenAction [3 0 R /XYZ null null "+R(De)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}Ze&&me("/PageMode /"+Ze),et.publish("putCatalog"),me(">>"),me("endobj")},Vh=p.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(ae+1)),me("/Root "+ae+" 0 R"),me("/Info "+(ae-1)+" 0 R"),d!==null&&me("/Encrypt "+ca.oid+" 0 R"),me("/ID [ <"+V+"> <"+V+"> ]"),me(">>")},Af=p.__private__.putHeader=function(){me("%PDF-"+g),me("%ºß¬à")},ff=p.__private__.putXRef=function(){var W="0000000000";me("xref"),me("0 "+(ae+1)),me("0000000000 65535 f ");for(var Ae=1;Ae<=ae;Ae++)typeof le[Ae]=="function"?me((W+le[Ae]()).slice(-10)+" 00000 n "):le[Ae]!==void 0?me((W+le[Ae]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},lc=p.__private__.buildDocument=function(){Fe(),Se(ie),et.publish("buildDocument"),Af(),rt(),Xd(),ei(),d!==null&&Co(),_o(),oc();var W=ce;return ff(),Vh(),me("startxref"),me(""+W),me("%%EOF"),Se(Ie[H]),ie.join(`
`)},Jd=p.__private__.getBlob=function(W){return new Blob([Me(W)],{type:"application/pdf"})},cc=p.output=p.__private__.output=xi(function(W,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",W){case void 0:return lc();case"save":p.save(Ae.filename);break;case"arraybuffer":return Me(lc());case"blob":return Jd(lc());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL(Jd(lc()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Oe="",Le=lc();try{Oe=qF(Le)}catch{Oe=qF(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ge=Ae.pdfObjectUrl,vt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Zt=Qr.open();return Zt!==null&&Zt.document.write(Lt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var F='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',re=Qr.open();if(re!==null){re.document.write(F);var oe=this;re.document.documentElement.querySelector("#pdfViewer").onload=function(){re.document.title=Ae.filename,re.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(oe.output("bloburl"))}}return re}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',ze=Qr.open();if(ze!==null&&(ze.document.write(ve),ze.document.title=Ae.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",Ae);default:return null}}),kl=function(W){return Array.isArray(gt)===!0&&gt.indexOf(W)>-1};switch(n){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=kl("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wt=n}var ca=null;te(),z();var uc=function(W){return d!==null?ca.encryptor(W,0):function(Ae){return Ae}},jl=p.__private__.getPageInfo=p.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pr[W].objId,pageNumber:W,pageContext:pr[W]}},Ir=p.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in pr)if(pr[Ae].objId===W)break;return jl(Ae)},Bl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:pr[H].objId,pageNumber:H,pageContext:pr[H]}};p.addPage=function(){return Xc.apply(this,arguments),this},p.setPage=function(){return Sl.apply(this,arguments),Se.call(this,Ie[H]),this},p.insertPage=function(W){return this.addPage(),this.movePage(H,W),this},p.movePage=function(W,Ae){var Oe,Le;if(W>Ae){Oe=Ie[W],Le=pr[W];for(var Ge=W;Ge>Ae;Ge--)Ie[Ge]=Ie[Ge-1],pr[Ge]=pr[Ge-1];Ie[Ae]=Oe,pr[Ae]=Le,this.setPage(Ae)}else if(W<Ae){Oe=Ie[W],Le=pr[W];for(var vt=W;vt<Ae;vt++)Ie[vt]=Ie[vt+1],pr[vt]=pr[vt+1];Ie[Ae]=Oe,pr[Ae]=Le,this.setPage(Ae)}return this},p.deletePage=function(){return Yc.apply(this,arguments),this},p.__private__.text=p.text=function(W,Ae,Oe,Le,Ge){var vt,Lt,Zt,F,re,oe,ve,ze,ot,Ut=(Le=Le||{}).scope||this;if(typeof W=="number"&&typeof Ae=="number"&&(typeof Oe=="string"||Array.isArray(Oe))){var Fr=Oe;Oe=Ae,Ae=W,W=Fr}if(arguments[3]instanceof bt?(N("The transform parameter of text() with a Matrix value"),ot=Ge):(Zt=arguments[4],F=arguments[5],pa(ve=arguments[3])==="object"&&ve!==null||(typeof Zt=="string"&&(F=Zt,Zt=null),typeof ve=="string"&&(F=ve,ve=null),typeof ve=="number"&&(Zt=ve,ve=null),Le={flags:ve,angle:Zt,align:F})),isNaN(Ae)||isNaN(Oe)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return Ut;var yn="",Xr=!1,zn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:bn,ta=Ut.internal.scaleFactor;function Ol(mn){return mn=mn.split("	").join(Array(Le.TabLen||9).join(" ")),Fn(mn,ve)}function es(mn){for(var pn,va=mn.concat(),ts=[],Pl=va.length;Pl--;)typeof(pn=va.shift())=="string"?ts.push(pn):Array.isArray(mn)&&(pn.length===1||pn[1]===void 0&&pn[2]===void 0)?ts.push(pn[0]):ts.push([pn[0],pn[1],pn[2]]);return ts}function jo(mn,pn){var va;if(typeof mn=="string")va=pn(mn)[0];else if(Array.isArray(mn)){for(var ts,Pl,AA=mn.concat(),fA=[],nd=AA.length;nd--;)typeof(ts=AA.shift())=="string"?fA.push(pn(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(Pl=pn(ts[0],ts[1],ts[2]),fA.push([Pl[0],Pl[1],Pl[2]]));va=fA}return va}var iu=!1,nA=!0;if(typeof W=="string")iu=!0;else if(Array.isArray(W)){var Kh=W.concat();Lt=[];for(var gf,Is=Kh.length;Is--;)(typeof(gf=Kh.shift())!="string"||Array.isArray(gf)&&typeof gf[0]!="string")&&(nA=!1);iu=nA}if(iu===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var aA=be/Ut.internal.scaleFactor,xf=aA*(zn-1);switch(Le.baseline){case"bottom":Oe-=xf;break;case"top":Oe+=aA-xf;break;case"hanging":Oe+=aA-2*xf;break;case"middle":Oe+=aA/2-xf}if((oe=Le.maxWidth||0)>0&&(typeof W=="string"?W=Ut.splitTextToSize(W,oe):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(mn,pn){return mn.concat(Ut.splitTextToSize(pn,oe))},[]))),vt={text:W,x:Ae,y:Oe,options:Le,mutex:{pdfEscape:Fn,activeFontKey:Qt,fonts:Nr,activeFontSize:be}},et.publish("preProcessText",vt),W=vt.text,Zt=(Le=vt.options).angle,!(ot instanceof bt)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Le.rotationDirection===0&&(Zt=-Zt),_===w.ADVANCED&&(Zt=-Zt);var vf=Math.cos(Zt),qh=Math.sin(Zt);ot=new bt(vf,qh,-qh,vf,0,0)}else Zt&&Zt instanceof bt&&(ot=Zt);_!==w.ADVANCED||ot||(ot=xr),(re=Le.charSpace||Xu)!==void 0&&(yn+=E(O(re))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(yn+=E(100*ze)+` Tz
`),Le.lang;var Bo=-1,ub=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Wm=Ut.internal.getCurrentPageInfo().pageContext;switch(ub){case 0:case!1:case"fill":Bo=0;break;case 1:case!0:case"stroke":Bo=1;break;case 2:case"fillThenStroke":Bo=2;break;case 3:case"invisible":Bo=3;break;case 4:case"fillAndAddForClipping":Bo=4;break;case 5:case"strokeAndAddPathForClipping":Bo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bo=6;break;case 7:case"addToPathForClipping":Bo=7}var Wg=Wm.usedRenderingMode!==void 0?Wm.usedRenderingMode:-1;Bo!==-1?yn+=Bo+` Tr
`:Wg!==-1&&(yn+=`0 Tr
`),Bo!==-1&&(Wm.usedRenderingMode=Bo),F=Le.align||"left";var Dl,ti=be*zn,sA=Ut.internal.pageSize.getWidth(),Xm=Nr[Qt];re=Le.charSpace||Xu,oe=Le.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var td=[],iA=function(mn){return Ut.getStringUnitWidth(mn,{font:Xm,charSpace:re,fontSize:be,doKerning:!1})*be/ta};if(Object.prototype.toString.call(W)==="[object Array]"){var ao;Lt=es(W),F!=="left"&&(Dl=Lt.map(iA));var yi,oA=0;if(F==="right"){Ae-=Dl[0],W=[],Is=Lt.length;for(var To=0;To<Is;To++)To===0?(yi=Di(Ae),ao=gs(Oe)):(yi=O(oA-Dl[To]),ao=-ti),W.push([Lt[To],yi,ao]),oA=Dl[To]}else if(F==="center"){Ae-=Dl[0]/2,W=[],Is=Lt.length;for(var hc=0;hc<Is;hc++)hc===0?(yi=Di(Ae),ao=gs(Oe)):(yi=O((oA-Dl[hc])/2),ao=-ti),W.push([Lt[hc],yi,ao]),oA=Dl[hc]}else if(F==="left"){W=[],Is=Lt.length;for(var ou=0;ou<Is;ou++)W.push(Lt[ou])}else if(F==="justify"&&Xm.encoding==="Identity-H"){W=[],Is=Lt.length,oe=oe!==0?oe:sA;for(var mc=0,Ga=0;Ga<Is;Ga++)if(ao=Ga===0?gs(Oe):-ti,yi=Ga===0?Di(Ae):mc,Ga<Is-1){var pc=O((oe-Dl[Ga])/(Lt[Ga].split(" ").length-1)),xs=Lt[Ga].split(" ");W.push([xs[0]+" ",yi,ao]),mc=0;for(var Io=1;Io<xs.length;Io++){var bf=(iA(xs[Io-1]+" "+xs[Io])-iA(xs[Io]))*ta+pc;Io==xs.length-1?W.push([xs[Io],bf,0]):W.push([xs[Io]+" ",bf,0]),mc-=bf}}else W.push([Lt[Ga],yi,ao]);W.push(["",mc,0])}else{if(F!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Is=Lt.length,oe=oe!==0?oe:sA,Ga=0;Ga<Is;Ga++)ao=Ga===0?gs(Oe):-ti,yi=Ga===0?Di(Ae):0,Ga<Is-1?td.push(E(O((oe-Dl[Ga])/(Lt[Ga].split(" ").length-1)))):td.push(0),W.push([Lt[Ga],yi,ao])}}var lu=typeof Le.R2L=="boolean"?Le.R2L:qe;lu===!0&&(W=jo(W,function(mn,pn,va){return[mn.split("").reverse().join(""),pn,va]})),vt={text:W,x:Ae,y:Oe,options:Le,mutex:{pdfEscape:Fn,activeFontKey:Qt,fonts:Nr,activeFontSize:be}},et.publish("postProcessText",vt),W=vt.text,Xr=vt.mutex.isHex||!1;var Wh=Nr[Qt].encoding;Wh!=="WinAnsiEncoding"&&Wh!=="StandardEncoding"||(W=jo(W,function(mn,pn,va){return[Ol(mn),pn,va]})),Lt=es(W),W=[];for(var lA,cA,uA,yf=0,Xh=1,dA=Array.isArray(Lt[0])?Xh:yf,rd="",wf=function(mn,pn,va){var ts="";return va instanceof bt?(va=typeof Le.angle=="number"?nr(va,new bt(1,0,0,1,mn,pn)):nr(new bt(1,0,0,1,mn,pn),va),_===w.ADVANCED&&(va=nr(new bt(1,0,0,-1,0,0),va)),ts=va.join(" ")+` Tm
`):ts=E(mn)+" "+E(pn)+` Td
`,ts},Ka=0;Ka<Lt.length;Ka++){switch(rd="",dA){case Xh:uA=(Xr?"<":"(")+Lt[Ka][0]+(Xr?">":")"),lA=parseFloat(Lt[Ka][1]),cA=parseFloat(Lt[Ka][2]);break;case yf:uA=(Xr?"<":"(")+Lt[Ka]+(Xr?">":")"),lA=Di(Ae),cA=gs(Oe)}td!==void 0&&td[Ka]!==void 0&&(rd=td[Ka]+` Tw
`),Ka===0?W.push(rd+wf(lA,cA,ot)+uA):dA===yf?W.push(rd+uA):dA===Xh&&W.push(rd+wf(lA,cA,ot)+uA)}W=dA===yf?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var cl=`BT
/`;return cl+=Qt+" "+be+` Tf
`,cl+=E(be*zn)+` TL
`,cl+=Ac+`
`,cl+=yn,cl+=W,me(cl+="ET"),h[Qt]=!0,Ut};var zh=p.__private__.clip=p.clip=function(W){return me(W==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return zh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return me("n"),this};var Fi=p.__private__.isValidStyle=function(W){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(Ae=!0),Ae};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(W){return Fi(W)&&(u=W),this};var No=p.__private__.getStyle=p.getStyle=function(W){var Ae=u;switch(W){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=W}return Ae},no=p.close=function(){return me("h"),this};p.stroke=function(){return me("S"),this},p.fill=function(W){return Tl("f",W),this},p.fillEvenOdd=function(W){return Tl("f*",W),this},p.fillStroke=function(W){return Tl("B",W),this},p.fillStrokeEvenOdd=function(W){return Tl("B*",W),this};var Tl=function(W,Ae){pa(Ae)==="object"?dc(Ae,W):me(W)},So=function(W){W===null||_===w.ADVANCED&&W===void 0||(W=No(W),me(W))};function Zc(W,Ae,Oe,Le,Ge){var vt=new fv(Ae||this.boundingBox,Oe||this.xStep,Le||this.yStep,this.gState,Ge||this.matrix);vt.stream=this.stream;var Lt=W+"$$"+this.cloneIndex+++"$$";return Wr(Lt,vt),vt}var dc=function(W,Ae){var Oe=fs[W.key],Le=Pr[Oe];if(Le instanceof Bp)me("q"),me(hf(Ae)),Le.gState&&p.setGState(Le.gState),me(W.matrix.toString()+" cm"),me("/"+Oe+" sh"),me("Q");else if(Le instanceof fv){var Ge=new bt(1,0,0,-1,0,Pi());W.matrix&&(Ge=Ge.multiply(W.matrix||xr),Oe=Zc.call(Le,W.key,W.boundingBox,W.xStep,W.yStep,Ge).id),me("q"),me("/Pattern cs"),me("/"+Oe+" scn"),Le.gState&&p.setGState(Le.gState),me(Ae),me("Q")}},hf=function(W){switch(W){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ko=p.moveTo=function(W,Ae){return me(E(O(W))+" "+E(M(Ae))+" m"),this},Oi=p.lineTo=function(W,Ae){return me(E(O(W))+" "+E(M(Ae))+" l"),this},Il=p.curveTo=function(W,Ae,Oe,Le,Ge,vt){return me([E(O(W)),E(M(Ae)),E(O(Oe)),E(M(Le)),E(O(Ge)),E(M(vt)),"c"].join(" ")),this};p.__private__.line=p.line=function(W,Ae,Oe,Le,Ge){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||!Fi(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[Oe-W,Le-Ae]],W,Ae,[1,1],Ge||"S"):this.lines([[Oe-W,Le-Ae]],W,Ae,[1,1]).stroke()},p.__private__.lines=p.lines=function(W,Ae,Oe,Le,Ge,vt){var Lt,Zt,F,re,oe,ve,ze,ot,Ut,Fr,yn,Xr;if(typeof W=="number"&&(Xr=Oe,Oe=Ae,Ae=W,W=Xr),Le=Le||[1,1],vt=vt||!1,isNaN(Ae)||isNaN(Oe)||!Array.isArray(W)||!Array.isArray(Le)||!Fi(Ge)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ko(Ae,Oe),Lt=Le[0],Zt=Le[1],re=W.length,Fr=Ae,yn=Oe,F=0;F<re;F++)(oe=W[F]).length===2?(Fr=oe[0]*Lt+Fr,yn=oe[1]*Zt+yn,Oi(Fr,yn)):(ve=oe[0]*Lt+Fr,ze=oe[1]*Zt+yn,ot=oe[2]*Lt+Fr,Ut=oe[3]*Zt+yn,Fr=oe[4]*Lt+Fr,yn=oe[5]*Zt+yn,Il(ve,ze,ot,Ut,Fr,yn));return vt&&no(),So(Ge),this},p.path=function(W){for(var Ae=0;Ae<W.length;Ae++){var Oe=W[Ae],Le=Oe.c;switch(Oe.op){case"m":ko(Le[0],Le[1]);break;case"l":Oi(Le[0],Le[1]);break;case"c":Il.apply(this,Le);break;case"h":no()}}return this},p.__private__.rect=p.rect=function(W,Ae,Oe,Le,Ge){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||!Fi(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Le=-Le),me([E(O(W)),E(M(Ae)),E(O(Oe)),E(O(Le)),"re"].join(" ")),So(Ge),this},p.__private__.triangle=p.triangle=function(W,Ae,Oe,Le,Ge,vt,Lt){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||isNaN(Ge)||isNaN(vt)||!Fi(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Oe-W,Le-Ae],[Ge-Oe,vt-Le],[W-Ge,Ae-vt]],W,Ae,[1,1],Lt,!0),this},p.__private__.roundedRect=p.roundedRect=function(W,Ae,Oe,Le,Ge,vt,Lt){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||isNaN(Ge)||isNaN(vt)||!Fi(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Oe),vt=Math.min(vt,.5*Le),this.lines([[Oe-2*Ge,0],[Ge*Zt,0,Ge,vt-vt*Zt,Ge,vt],[0,Le-2*vt],[0,vt*Zt,-Ge*Zt,vt,-Ge,vt],[2*Ge-Oe,0],[-Ge*Zt,0,-Ge,-vt*Zt,-Ge,-vt],[0,2*vt-Le],[0,-vt*Zt,Ge*Zt,-vt,Ge,-vt]],W+Ge,Ae,[1,1],Lt,!0),this},p.__private__.ellipse=p.ellipse=function(W,Ae,Oe,Le,Ge){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||isNaN(Le)||!Fi(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*Oe,Lt=4/3*(Math.SQRT2-1)*Le;return ko(W+Oe,Ae),Il(W+Oe,Ae-Lt,W+vt,Ae-Le,W,Ae-Le),Il(W-vt,Ae-Le,W-Oe,Ae-Lt,W-Oe,Ae),Il(W-Oe,Ae+Lt,W-vt,Ae+Le,W,Ae+Le),Il(W+vt,Ae+Le,W+Oe,Ae+Lt,W+Oe,Ae),So(Ge),this},p.__private__.circle=p.circle=function(W,Ae,Oe,Le){if(isNaN(W)||isNaN(Ae)||isNaN(Oe)||!Fi(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,Ae,Oe,Oe,Le)},p.setFont=function(W,Ae,Oe){return Oe&&(Ae=I(Ae,Oe)),Qt=Jc(W,Ae,{disableWarning:!1}),this};var ps=p.__private__.getFont=p.getFont=function(){return Nr[Jc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var W,Ae,Oe={};for(W in $r)if($r.hasOwnProperty(W))for(Ae in Oe[W]=[],$r[W])$r[W].hasOwnProperty(Ae)&&Oe[W].push(Ae);return Oe},p.addFont=function(W,Ae,Oe,Le,Ge){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(Oe=I(Oe,Le)),Ge=Ge||"Identity-H",Wc.call(this,W,Ae,Oe,Ge)};var bn,eu=e.lineWidth||.200025,Fl=p.__private__.getLineWidth=p.getLineWidth=function(){return eu},mf=p.__private__.setLineWidth=p.setLineWidth=function(W){return eu=W,me(E(O(W))+" w"),this};p.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(W,Ae){if(W=W||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(Oe){return E(O(Oe))}).join(" "),Ae=E(O(Ae)),me("["+W+"] "+Ae+" d"),this};var qu=p.__private__.getLineHeight=p.getLineHeight=function(){return be*bn};p.__private__.getLineHeight=p.getLineHeight=function(){return be*bn};var Wu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(bn=W),this},ll=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return bn};Wu(e.lineHeight);var Di=p.__private__.getHorizontalCoordinate=function(W){return O(W)},gs=p.__private__.getVerticalCoordinate=function(W){return _===w.ADVANCED?W:pr[H].mediaBox.topRightY-pr[H].mediaBox.bottomLeftY-O(W)},$h=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(W){return E(Di(W))},tu=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(W){return E(gs(W))},bi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ne(bi)},p.__private__.setStrokeColor=p.setDrawColor=function(W,Ae,Oe,Le){return bi=Be({ch1:W,ch2:Ae,ch3:Oe,ch4:Le,pdfColorType:"draw",precision:2}),me(bi),this};var ru=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ne(ru)},p.__private__.setFillColor=p.setFillColor=function(W,Ae,Oe,Le){return ru=Be({ch1:W,ch2:Ae,ch3:Oe,ch4:Le,pdfColorType:"fill",precision:2}),me(ru),this};var Ac=e.textColor||"0 g",Zd=p.__private__.getTextColor=p.getTextColor=function(){return Ne(Ac)};p.__private__.setTextColor=p.setTextColor=function(W,Ae,Oe,Le){return Ac=Be({ch1:W,ch2:Ae,ch3:Oe,ch4:Le,pdfColorType:"text",precision:3}),this};var Xu=e.charSpace,eA=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Xu||0)};p.__private__.setCharSpace=p.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xu=W,this};var pf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(W){var Ae=p.CapJoinStyles[W];if(Ae===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pf=Ae,me(Ae+" J"),this};var Yu=0;p.__private__.setLineJoin=p.setLineJoin=function(W){var Ae=p.CapJoinStyles[W];if(Ae===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yu=Ae,me(Ae+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(E(O(W))+" M"),this},p.GState=qN,p.setGState=function(W){(W=typeof W=="string"?hn[la[W]]:nu(null,W)).equals(ja)||(me("/"+W.id+" gs"),ja=W)};var nu=function(W,Ae){if(!W||!la[W]){var Oe=!1;for(var Le in hn)if(hn.hasOwnProperty(Le)&&hn[Le].equals(Ae)){Oe=!0;break}if(Oe)Ae=hn[Le];else{var Ge="GS"+(Object.keys(hn).length+1).toString(10);hn[Ge]=Ae,Ae.id=Ge}return W&&(la[W]=Ae.id),et.publish("addGState",Ae),Ae}};p.addGState=function(W,Ae){return nu(W,Ae),this},p.saveGraphicsState=function(){return me("q"),In.push({key:Qt,size:be,color:Ac}),this},p.restoreGraphicsState=function(){me("Q");var W=In.pop();return Qt=W.key,be=W.size,Ac=W.color,ja=null,this},p.setCurrentTransformationMatrix=function(W){return me(W.toString()+" cm"),this},p.comment=function(W){return me("#"+W),this};var Ju=function(W,Ae){var Oe=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Oe},set:function(vt){isNaN(vt)||(Oe=parseFloat(vt))}});var Le=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(vt){isNaN(vt)||(Le=parseFloat(vt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(vt){Ge=vt.toString()}}),this},tA=function(W,Ae,Oe,Le){Ju.call(this,W,Ae),this.type="rect";var Ge=Oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Lt){isNaN(Lt)||(Ge=parseFloat(Lt))}});var vt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(Lt){isNaN(Lt)||(vt=parseFloat(Lt))}}),this},Zu=function(){this.page=rn,this.currentPage=H,this.pages=Ie.slice(0),this.pagesContext=pr.slice(0),this.x=jr,this.y=tr,this.matrix=an,this.width=su(H),this.height=Pi(H),this.outputDestination=_e,this.id="",this.objectNumber=-1};Zu.prototype.restore=function(){rn=this.page,H=this.currentPage,pr=this.pagesContext,Ie=this.pages,jr=this.x,tr=this.y,an=this.matrix,ed(H,this.width),rA(H,this.height),_e=this.outputDestination};var au=function(W,Ae,Oe,Le,Ge){Et.push(new Zu),rn=H=0,Ie=[],jr=W,tr=Ae,an=Ge,vi([Oe,Le])},Gh=function(W){if(xt[W])Et.pop().restore();else{var Ae=new Zu,Oe="Xo"+(Object.keys(Je).length+1).toString(10);Ae.id=Oe,xt[W]=Oe,Je[Oe]=Ae,et.publish("addFormObject",Ae),Et.pop().restore()}};for(var fc in p.beginFormObject=function(W,Ae,Oe,Le,Ge){return au(W,Ae,Oe,Le,Ge),this},p.endFormObject=function(W){return Gh(W),this},p.doFormObject=function(W,Ae){var Oe=Je[xt[W]];return me("q"),me(Ae.toString()+" cm"),me("/"+Oe.id+" Do"),me("Q"),this},p.getFormObject=function(W){var Ae=Je[xt[W]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},p.save=function(W,Ae){return W=W||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(Np(Jd(lc()),W),typeof Np.unload=="function"&&Qr.setTimeout&&setTimeout(Np.unload,911),this):new Promise(function(Oe,Le){try{var Ge=Np(Jd(lc()),W);typeof Np.unload=="function"&&Qr.setTimeout&&setTimeout(Np.unload,911),Oe(Ge)}catch(vt){Le(vt.message)}})},vr.API)vr.API.hasOwnProperty(fc)&&(fc==="events"&&vr.API.events.length?function(W,Ae){var Oe,Le,Ge;for(Ge=Ae.length-1;Ge!==-1;Ge--)Oe=Ae[Ge][0],Le=Ae[Ge][1],W.subscribe.apply(W,[Oe].concat(typeof Le=="function"?[Le]:Le))}(et,vr.API.events):p[fc]=vr.API[fc]);var su=p.getPageWidth=function(W){return(pr[W=W||H].mediaBox.topRightX-pr[W].mediaBox.bottomLeftX)/wt},ed=p.setPageWidth=function(W,Ae){pr[W].mediaBox.topRightX=Ae*wt+pr[W].mediaBox.bottomLeftX},Pi=p.getPageHeight=function(W){return(pr[W=W||H].mediaBox.topRightY-pr[W].mediaBox.bottomLeftY)/wt},rA=p.setPageHeight=function(W,Ae){pr[W].mediaBox.topRightY=Ae*wt+pr[W].mediaBox.bottomLeftY};return p.internal={pdfEscape:Fn,getStyle:No,getFont:ps,getFontSize:Re,getCharSpace:eA,getTextColor:Zd,getLineHeight:qu,getLineHeightFactor:ll,getLineWidth:Fl,write:Te,getHorizontalCoordinate:Di,getVerticalCoordinate:gs,getCoordinateString:$h,getVerticalCoordinateString:tu,collections:{},newObject:Zr,newAdditionalObject:je,newObjectDeferred:qr,newObjectDeferredBegin:he,getFilters:Ye,putStream:dt,events:et,scaleFactor:wt,pageSize:{getWidth:function(){return su(H)},setWidth:function(W){ed(H,W)},getHeight:function(){return Pi(H)},setHeight:function(W){rA(H,W)}},encryptionOptions:d,encryption:ca,getEncryptor:uc,output:cc,getNumberOfPages:Vn,pages:Ie,out:me,f2:R,f3:D,getPageInfo:jl,getPageInfoByObjId:Ir,getCurrentPageInfo:Bl,getPDFVersion:x,Point:Ju,Rectangle:tA,Matrix:bt,hasHotfix:kl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return su(H)},set:function(W){ed(H,W)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Pi(H)},set:function(W){rA(H,W)},enumerable:!0,configurable:!0}),df.call(p,We),Qt="F1",Xc(a,r),et.publish("initialized"),p}rv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},rv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},rv.prototype.processOwnerPassword=function(e,t){return XF(WF(t).substr(0,5),e)},rv.prototype.encryptor=function(e,t){var r=WF(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return XF(r,n)}},qN.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||pa(e)!==pa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var Cs=vr.API,XL=1,Hg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(e){return e.toFixed(2)},k0=function(e){return e.toFixed(5)};Cs.__acroform__={};var ic=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},RG=function(e){return e*XL},BA=function(e){var t=new zse,r=mr.internal.getHeight(e)||0,n=mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(en(n)),Number(en(r))],t},u8e=Cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},d8e=Cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},A8e=Cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},zs=Cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A8e(e,t-1)},$s=Cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return u8e(e,t-1)},Gs=Cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return d8e(e,t-1)},f8e=Cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},h8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=YF(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+en(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=BA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},YF=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=mr.internal.getHeight(e)||0;i=i<0?-i:i;var o=mr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(D,O,L){if(D+1<a.length){var M=O+" "+a[D+1][0];return XC(M,e,L).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=XC("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,x=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+XC(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var j=!1;if(a[_].length!==1&&b!==a[_].length-1){if((f+2)*(w+2)+2>i)continue e;y+=a[_][b],j=!0,x=_,_--}else{y=(y+=a[_][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var k=parseInt(_),I=c(k,y,s),E=_>=a.length-1;if(I&&!E){y+=" ",b=0;continue}if(I||E){if(E)x=k;else if(e.multiline&&(f+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>i)continue e;x=k}}for(var N="",B=g;B<=x;B++){var R=a[B];if(e.multiline){if(B===x){N+=R[b]+" ",b=(b+1)%R.length;continue}if(B===g){N+=R[R.length-1]+" ";continue}}N+=R[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=XC(N,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=en(u)+" "+en(p)+` Td
`,t+="("+Hg(N)+`) Tj
`,t+=-en(u)+` 0 Td
`,p=-(s+2),d=0,g=j?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},XC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},m8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},p8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},g8e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),pa(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},x8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Gd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(m8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");XL=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new $se,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&p8e(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=f8e(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=mr.createDefaultAppearanceStream(o),pa(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=h8e(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&g8e(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Vse=Cs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),pa(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Hg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$T=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Hg(n(e))+")"},zA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};zA.prototype.toString=function(){return this.objId+" 0 R"},zA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},zA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Vse(a,this.objId,this.scope)}):a instanceof zA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var zse=function(){zA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ic(zse,zA);var $se=function(){zA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Hg(r(e))+")"}},set:function(r){e=r}})};ic($se,zA);var Gd=function e(){zA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zs(t,3)},set:function(y){y?this.F=$s(t,3):this.F=Gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof WN)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Hg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/XL:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof WN||this instanceof Yp))return $T(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Gi?h:$T(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Gi?y:y.substr(0,1)==="("?jx(y.substr(1,y.length-2)):jx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi?jx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Gi?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Gi?p:$T(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Gi?y:y.substr(0,1)==="("?jx(y.substr(1,y.length-2)):jx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi?jx(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Gi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,1)},set:function(y){y?this.Ff=$s(this.Ff,1):this.Ff=Gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,2)},set:function(y){y?this.Ff=$s(this.Ff,2):this.Ff=Gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,3)},set:function(y){y?this.Ff=$s(this.Ff,3):this.Ff=Gs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};ic(Gd,zA);var jv=function(){Gd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vse(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,18)},set:function(r){r?this.Ff=$s(this.Ff,18):this.Ff=Gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=$s(this.Ff,19):this.Ff=Gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,20)},set:function(r){r?(this.Ff=$s(this.Ff,20),t.sort()):this.Ff=Gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,22)},set:function(r){r?this.Ff=$s(this.Ff,22):this.Ff=Gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(r){r?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,27)},set:function(r){r?this.Ff=$s(this.Ff,27):this.Ff=Gs(this.Ff,27)}}),this.hasAppearanceStream=!1};ic(jv,Gd);var Bv=function(){jv.call(this),this.fontName="helvetica",this.combo=!1};ic(Bv,jv);var Tv=function(){Bv.call(this),this.combo=!0};ic(Tv,Bv);var l5=function(){Tv.call(this),this.edit=!0};ic(l5,Tv);var Gi=function(){Gd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,15)},set:function(r){r?this.Ff=$s(this.Ff,15):this.Ff=Gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,16)},set:function(r){r?this.Ff=$s(this.Ff,16):this.Ff=Gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,17)},set:function(r){r?this.Ff=$s(this.Ff,17):this.Ff=Gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(r){r?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Hg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){pa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ic(Gi,Gd);var c5=function(){Gi.call(this),this.pushButton=!0};ic(c5,Gi);var Iv=function(){Gi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ic(Iv,Gi);var WN=function(){var e,t;Gd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Hg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){pa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ic(WN,Gd),Iv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Iv.prototype.createOption=function(e){var t=new WN;return t.Parent=this,t.optionName=e,this.Kids.push(t),v8e.call(this.scope,t),t};var u5=function(){Gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mr.CheckBox.createAppearanceStream()};ic(u5,Gi);var Yp=function(){Gd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,13)},set:function(t){t?this.Ff=$s(this.Ff,13):this.Ff=Gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,21)},set:function(t){t?this.Ff=$s(this.Ff,21):this.Ff=Gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(t){t?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,24)},set:function(t){t?this.Ff=$s(this.Ff,24):this.Ff=Gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,25)},set:function(t){t?this.Ff=$s(this.Ff,25):this.Ff=Gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(t){t?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ic(Yp,Gd);var d5=function(){Yp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,14)},set:function(e){e?this.Ff=$s(this.Ff,14):this.Ff=Gs(this.Ff,14)}}),this.password=!0};ic(d5,Yp);var mr={CheckBox:{createAppearanceStream:function(){return{N:{On:mr.CheckBox.YesNormal},D:{On:mr.CheckBox.YesPushDown,Off:mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=BA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=YF(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=BA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=mr.internal.getHeight(e),i=mr.internal.getWidth(e),o=YF(e,e.caption);return a.push("1 g"),a.push("0 0 "+en(i)+" "+en(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+en(i-1)+" "+en(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+en(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=BA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Circle.YesNormal,t.D[e]=mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=BA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=mr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+k0(mr.internal.getWidth(e)/2)+" "+k0(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=BA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+k0(mr.internal.getWidth(e)/2)+" "+k0(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+k0(mr.internal.getWidth(e)/2)+" "+k0(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=BA(e);t.scope=e.scope;var r=[],n=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+k0(mr.internal.getWidth(e)/2)+" "+k0(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Cross.YesNormal,t.D[e]=mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=BA(e);t.scope=e.scope;var r=[],n=mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+en(mr.internal.getWidth(e)-2)+" "+en(mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=BA(e);t.scope=e.scope;var r=mr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(mr.internal.getWidth(e)-2)+" "+en(mr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=BA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(mr.internal.getWidth(e))+" "+en(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mr.internal.getWidth(e),r=mr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},mr.internal.getWidth=function(e){var t=0;return pa(e)==="object"&&(t=RG(e.Rect[2])),t},mr.internal.getHeight=function(e){var t=0;return pa(e)==="object"&&(t=RG(e.Rect[3])),t};var v8e=Cs.addField=function(e){if(x8e(this,e),!(e instanceof Gd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=jv,Cs.AcroFormListBox=Bv,Cs.AcroFormComboBox=Tv,Cs.AcroFormEditBox=l5,Cs.AcroFormButton=Gi,Cs.AcroFormPushButton=c5,Cs.AcroFormRadioButton=Iv,Cs.AcroFormCheckBox=u5,Cs.AcroFormTextField=Yp,Cs.AcroFormPasswordField=d5,Cs.AcroFormAppearance=mr,Cs.AcroForm={ChoiceField:jv,ListBox:Bv,ComboBox:Tv,EditBox:l5,Button:Gi,PushButton:c5,RadioButton:Iv,CheckBox:u5,TextField:Yp,PasswordField:d5,Appearance:mr},vr.AcroForm={ChoiceField:jv,ListBox:Bv,ComboBox:Tv,EditBox:l5,Button:Gi,PushButton:c5,RadioButton:Iv,CheckBox:u5,TextField:Yp,PasswordField:d5,Appearance:mr};vr.AcroForm;function Gse(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,O){var L,M,J,V,K,z=t;if((O=O||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(I(D))for(K in r)for(J=r[K],L=0;L<J.length;L+=1){for(V=!0,M=0;M<J[L].length;M+=1)if(J[L][M]!==void 0&&J[L][M]!==D[M]){V=!1;break}if(V===!0){z=K;break}}else for(K in r)for(J=r[K],L=0;L<J.length;L+=1){for(V=!0,M=0;M<J[L].length;M+=1)if(J[L][M]!==void 0&&J[L][M]!==D.charCodeAt(M)){V=!1;break}if(V===!0){z=K;break}}return z===t&&O!==t&&(z=O),z},a=function D(O){for(var L=this.internal.write,M=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:O.width}),V.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var K="",z=0,G=O.transparency.length;z<G;z++)K+=O.transparency[z]+" "+O.transparency[z]+" ";V.push({key:"Mask",value:"["+K+"]"})}O.sMask!==void 0&&V.push({key:"SMask",value:O.objectId+1+" 0 R"});var Y=O.filter!==void 0?["/"+O.filter]:void 0;if(M({data:O.data,additionalKeyValues:V,alreadyAppliedFilters:Y,objectId:O.objectId}),L("endobj"),"sMask"in O&&O.sMask!==void 0){var te="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,P={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:te,data:O.sMask};"filter"in O&&(P.filter=O.filter),D.call(this,P)}if(O.colorSpace===b.INDEXED){var H=this.internal.newObject();M({data:N(new Uint8Array(O.palette)),objectId:H}),L("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var O in D)a.call(this,D[O])},i=function(){var D,O=this.internal.collections.addImage_images,L=this.internal.write;for(var M in O)L("/I"+(D=O[M]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return pa(D)==="object"&&D.nodeType===1},h=function(D,O){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var L=""+D.getAttribute("src");if(L.indexOf("data:image/")===0)return lw(unescape(L).split("base64,").pop());var M=e.loadFile(L,!0);if(M!==void 0)return M}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var J;switch(O){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return lw(D.toDataURL(J,1).split("base64,").pop())}},p=function(D){var O=this.internal.collections.addImage_images;if(O){for(var L in O)if(D===O[L].alias)return O[L]}},g=function(D,O,L){return D||O||(D=-96,O=-96),D<0&&(D=-1*L.width*72/D/this.internal.scaleFactor),O<0&&(O=-1*L.height*72/O/this.internal.scaleFactor),D===0&&(D=O*L.width/L.height),O===0&&(O=D*L.height/L.width),[D,O]},x=function(D,O,L,M,J,V){var K=g.call(this,L,M,J),z=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,Y=c.call(this);if(L=K[0],M=K[1],Y[J.index]=J,V){V*=Math.PI/180;var te=Math.cos(V),P=Math.sin(V),H=function(Z){return Z.toFixed(4)},X=[H(te),H(P),H(-1*P),H(te),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,z(D),G(O+M),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([z(L),"0","0",z(M),"0","0","cm"].join(" "))):this.internal.write([z(L),"0","0",z(M),z(D),G(O+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(D){var O,L,M=0;if(typeof D=="string")for(L=D.length,O=0;O<L;O++)M=(M<<5)-M+D.charCodeAt(O),M|=0;else if(I(D))for(L=D.byteLength/2,O=0;O<L;O++)M=(M<<5)-M+D[O],M|=0;return M},_=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var O=!0;return D.length===0&&(O=!1),D.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(O=!1),O},j=e.__addimage__.extractImageFromDataUrl=function(D){var O=(D=D||"").split("base64,"),L=null;if(O.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(M)&&(L={mimeType:M[1],charset:M[2],data:O[1]})}return L},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return k()&&D instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(D){return k()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(D){for(var O=D.length,L=new Uint8Array(O),M=0;M<O;M++)L[M]=D.charCodeAt(M);return L},N=e.__addimage__.arrayBufferToBinaryString=function(D){for(var O="",L=I(D)?D:new Uint8Array(D),M=0;M<L.length;M+=8192)O+=String.fromCharCode.apply(null,L.subarray(M,M+8192));return O};e.addImage=function(){var D,O,L,M,J,V,K,z,G;if(typeof arguments[1]=="number"?(O=t,L=arguments[1],M=arguments[2],J=arguments[3],V=arguments[4],K=arguments[5],z=arguments[6],G=arguments[7]):(O=arguments[1],L=arguments[2],M=arguments[3],J=arguments[4],V=arguments[5],K=arguments[6],z=arguments[7],G=arguments[8]),pa(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var Y=D;D=Y.imageData,O=Y.format||O||t,L=Y.x||L||0,M=Y.y||M||0,J=Y.w||Y.width||J,V=Y.h||Y.height||V,K=Y.alias||K,z=Y.compression||z,G=Y.rotation||Y.angle||G}var te=this.internal.getFilters();if(z===void 0&&te.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(L)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=B.call(this,D,O,K,z);return x.call(this,L,M,J,V,P,G),this};var B=function(D,O,L,M){var J,V,K;if(typeof D=="string"&&n(D)===t){D=unescape(D);var z=R(D,!1);(z!==""||(z=e.loadFile(D,!0))!==void 0)&&(D=z)}if(f(D)&&(D=h(D,O)),O=n(D,O),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((K=L)==null||K.length===0)&&(L=function(G){return typeof G=="string"||I(G)?w(G):I(G.data)?w(G.data):null}(D)),(J=p.call(this,L))||(k()&&(D instanceof Uint8Array||O==="RGBA"||(V=D,D=E(D))),J=this["process"+O.toUpperCase()](D,u.call(this),L,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in e.image_compression?G:y.NONE}(M),V)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},R=e.__addimage__.convertBase64ToBinaryString=function(D,O){var L;O=typeof O!="boolean"||O;var M,J="";if(typeof D=="string"){M=(L=j(D))!==null?L.data:D;try{J=lw(M)}catch(V){if(O)throw _(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(D){var O,L,M="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((M=R(D,!1))===""&&(M=e.loadFile(D)||""),D=M),L=n(D),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!k()||D instanceof Uint8Array||(D=E(D)),!(O=this["process"+L.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=L,O}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(x.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var b=0,y=r,w="",_=0;for(b=0;b<x.length;b+=1)y[x.charCodeAt(b)]!==void 0?(_++,typeof(y=y[x.charCodeAt(b)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),b===x.length-1&&(y=r,w+=x.charAt(b-(_-1)),b-=_-1,_=0)):(y=r,w+=x.charAt(b-_),b-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,b,y){return i(x)?s(x)===!1?-1:!u(x)||!i(b)&&!i(y)||!i(y)&&o(b)||o(x)&&!i(b)||o(x)&&c(b)||o(x)&&o(b)?0:d(x)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(x)||!i(y)?1:2:-1},p=function(x){var b=0,y=0,w=0,_="",j="",k="",I=(x=x||"").split("\\s+"),E=[];for(b=0;b<I.length;b+=1){for(E.push(""),y=0;y<I[b].length;y+=1)_=I[b][y],j=I[b][y-1],k=I[b][y+1],i(_)?(w=h(_,j,k),E[b]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):E[b]+=_;E[b]=f(E[b])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var w=0;for(y=[],w=0;w<b.length;w+=1)Array.isArray(b[w])?y.push([p(b[w][0]),b[w][1],b[w][2]]):y.push([p(b[w])]);x=y}else x=p(b);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,x=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,j){return _.concat(b.splitTextToSize(j,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)p<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(p=x);return p!==0&&(g=c.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,x,b,y=[],w=[],_=[],j={},k={},I=[],E=[],N=(h=h||{}).autoSize||!1,B=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),O=typeof h.padding=="number"?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&pa(f[0])==="object")for(y=f.map(function(Y){return Y.name}),w=f.map(function(Y){return Y.prompt||Y.name||""}),_=f.map(function(Y){return Y.align||"left"}),p=0;p<f.length;p+=1)k[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(N||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(j[b=y[p]]=d.map(function(Y){return Y[b]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=j[b],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[b]=Math.max.apply(null,I)+O+O,I=[]}if(B){var J={};for(p=0;p<y.length;p+=1)J[y[p]]={},J[y[p]].text=w[p],J[y[p]].align=_[p];var V=o.call(this,J,k);E=y.map(function(Y){return new s(c,u,k[Y],V,J[Y].text,void 0,J[Y].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var K=f.reduce(function(Y,te){return Y[te.name]=te.align,Y},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var z=o.call(this,d[p],k);for(x=0;x<y.length;x+=1){var G=d[p][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:x,data:G},this),i.call(this,new s(c,u,k[y[x]],z,G,p+2,K[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(p){var g=c[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var Kse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},qse=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],JF=Gse(qse),Wse=[100,200,300,400,500,600,700,800,900],b8e=Gse(Wse);function ZF(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Kse[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof JF[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function LG(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var y8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},MG={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function UG(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function w8e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},y8e,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=ZF(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+UG(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=JF[c],f=d<=JF.normal?-1:1,h=LG(u,qse,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=Kse[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=b8e[c],f=LG(u,Wse,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+UG(s)+"'.");return i}function QG(e){return e.trimLeft()}function E8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function C8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var YC,HG,VG,GT=["times"];(function(e){var t,r,n,a,s,i,o,c,u,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new i,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new i,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=P;Object.defineProperty(this,"pdf",{get:function(){return H}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Se){X=!!Se}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(Se){Z=!!Se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Se){isNaN(Se)||(le=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var me;typeof Se=="number"?me=[Se,Se,Se,Se]:((me=new Array(4))[0]=Se[0],me[1]=Se.length>=2?Se[1]:me[0],me[2]=Se.length>=3?Se[2]:me[0],me[3]=Se.length>=4?Se[3]:me[1]),u.margin=me}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Se){ie=Se}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Se){ce=Se}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(Se){fe=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof d&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(Se){Ie=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var me;me=h(Se),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var me=h(Se);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ne=null;function _e(Se,me){if(ne===null){var Te=function(Me){var We=[];return Object.keys(Me).forEach(function(be){Me[be].forEach(function(De){var Re=null;switch(De){case"bold":Re={family:be,weight:"bold"};break;case"italic":Re={family:be,style:"italic"};break;case"bolditalic":Re={family:be,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:be}}Re!==null&&(Re.ref={name:be,style:De},We.push(Re))})}),We}(Se.getFontList());ne=function(Me){for(var We={},be=0;be<Me.length;++be){var De=ZF(Me[be]),Re=De.family,qe=De.stretch,Ze=De.style,ct=De.weight;We[Re]=We[Re]||{},We[Re][qe]=We[Re][qe]||{},We[Re][qe][Ze]=We[Re][qe][Ze]||{},We[Re][qe][Ze][ct]=De}return We}(Te.concat(me))}return ne}var Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(Se){ne=null,Fe=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var me;if(this.ctx.font=Se,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Te=me[1],Me=(me[2],me[3]),We=me[4],be=(me[5],me[6]),De=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(De==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:De==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var Re=function(Pt){var Qt,wt,jr=[],tr=Pt.trim();if(tr==="")return GT;if(tr in MG)return[MG[tr]];for(;tr!=="";){switch(wt=null,Qt=(tr=QG(tr)).charAt(0)){case'"':case"'":wt=E8e(tr.substring(1),Qt);break;default:wt=C8e(tr)}if(wt===null||(jr.push(wt[0]),(tr=QG(wt[1]))!==""&&tr.charAt(0)!==","))return GT;tr=tr.replace(/^,/,"")}return jr}(be);if(this.fontFaces){var qe=w8e(_e(this.pdf,this.fontFaces),Re.map(function(Pt){return{family:Pt,stretch:"normal",weight:Me,style:Te}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(Me==="bold"||parseInt(Me,10)>=700||Te==="bold")&&(Ze="bold"),Te==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ct="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<Re.length;It++){if(this.pdf.internal.getFont(Re[It],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Re[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=Re[It],Ze="bold";else if(this.pdf.internal.getFont(Re[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It],Ze="normal";break}}if(ct===""){for(var Mt=0;Mt<Re.length;Mt++)if(pt[Re[Mt]]){ct=pt[Re[Mt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,H){if(isNaN(P)||isNaN(H))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new i(P,H));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(P,H)},f.prototype.closePath=function(){var P=new i(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&pa(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){P=new i(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(P.x,P.y)},f.prototype.lineTo=function(P,H){if(isNaN(P)||isNaN(H))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new i(P,H));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,H,X,Z){if(isNaN(X)||isNaN(Z)||isNaN(P)||isNaN(H))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new i(X,Z)),le=this.ctx.transform.applyToPoint(new i(P,H));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new i(ae.x,ae.y)},f.prototype.bezierCurveTo=function(P,H,X,Z,ae,le){if(isNaN(ae)||isNaN(le)||isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new i(ae,le)),ce=this.ctx.transform.applyToPoint(new i(P,H)),fe=this.ctx.transform.applyToPoint(new i(X,Z));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:fe.x,y2:fe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.arc=function(P,H,X,Z,ae,le){if(isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z)||isNaN(ae))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new i(P,H));P=ie.x,H=ie.y;var ce=this.ctx.transform.applyToPoint(new i(0,X)),fe=this.ctx.transform.applyToPoint(new i(0,0));X=Math.sqrt(Math.pow(ce.x-fe.x,2)+Math.pow(ce.y-fe.y,2))}Math.abs(ae-Z)>=2*Math.PI&&(Z=0,ae=2*Math.PI),this.path.push({type:"arc",x:P,y:H,radius:X,startAngle:Z,endAngle:ae,counterclockwise:le})},f.prototype.arcTo=function(P,H,X,Z,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,H,X,Z){if(isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,H),this.lineTo(P+X,H),this.lineTo(P+X,H+Z),this.lineTo(P,H+Z),this.lineTo(P,H),this.lineTo(P+X,H),this.lineTo(P,H)},f.prototype.fillRect=function(P,H,X,Z){if(isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,H,X,Z),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(P,H,X,Z){if(isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(P,H,X,Z),this.stroke())},f.prototype.clearRect=function(P,H,X,Z){if(isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,H,X,Z))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(H),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(P){var H,X,Z,ae;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))H=0,X=0,Z=0,ae=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(le!==null)H=parseInt(le[1]),X=parseInt(le[2]),Z=parseInt(le[3]),ae=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)H=parseInt(le[1]),X=parseInt(le[2]),Z=parseInt(le[3]),ae=parseFloat(le[4]);else{if(ae=1,typeof P=="string"&&P.charAt(0)!=="#"){var ie=new Use(P);P=ie.ok?ie.toHex():"#000000"}P.length===4?(H=P.substring(1,2),H+=H,X=P.substring(2,3),X+=X,Z=P.substring(3,4),Z+=Z):(H=P.substring(1,3),X=P.substring(3,5),Z=P.substring(5,7)),H=parseInt(H,16),X=parseInt(X,16),Z=parseInt(Z,16)}}return{r:H,g:X,b:Z,a:ae,style:P}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,H,X,Z){if(isNaN(H)||isNaN(X)||typeof P!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!p.call(this)){var ae=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;O.call(this,{text:P,x:H,y:X,scale:le,angle:ae,align:this.textAlign,maxWidth:Z})}},f.prototype.strokeText=function(P,H,X,Z){if(isNaN(H)||isNaN(X)||typeof P!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){Z=isNaN(Z)?void 0:Z;var ae=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;O.call(this,{text:P,x:H,y:X,scale:le,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Z})}},f.prototype.measureText=function(P){if(typeof P!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,X=this.pdf.internal.scaleFactor,Z=H.internal.getFontSize(),ae=H.getStringUnitWidth(P)*Z/H.internal.scaleFactor,le=function(ie){var ce=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new le({width:ae*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(P,H){if(isNaN(P)||isNaN(H))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(P,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(P){if(isNaN(P))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.translate=function(P,H){if(isNaN(P)||isNaN(H))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,P,H);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(P,H,X,Z,ae,le){if(isNaN(P)||isNaN(H)||isNaN(X)||isNaN(Z)||isNaN(ae)||isNaN(le))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(P,H,X,Z,ae,le);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(P,H,X,Z,ae,le){P=isNaN(P)?1:P,H=isNaN(H)?0:H,X=isNaN(X)?0:X,Z=isNaN(Z)?1:Z,ae=isNaN(ae)?0:ae,le=isNaN(le)?0:le,this.ctx.transform=new c(P,H,X,Z,ae,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,H,X,Z,ae,le,ie,ce,fe){var Ie=this.pdf.getImageProperties(P),ne=1,_e=1,Fe=1,Se=1;Z!==void 0&&ce!==void 0&&(Fe=ce/Z,Se=fe/ae,ne=Ie.width/Z*ce/Z,_e=Ie.height/ae*fe/ae),le===void 0&&(le=H,ie=X,H=0,X=0),Z!==void 0&&ce===void 0&&(ce=Z,fe=ae),Z===void 0&&ce===void 0&&(ce=Ie.width,fe=Ie.height);for(var me,Te=this.ctx.transform.decompose(),Me=z(Te.rotate.shx),We=new c,be=(We=(We=(We=We.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new o(le-H*Fe,ie-X*Se,Z*ne,ae*_e)),De=b.call(this,be),Re=[],qe=0;qe<De.length;qe+=1)Re.indexOf(De[qe])===-1&&Re.push(De[qe]);if(_(Re),this.autoPaging)for(var Ze=Re[0],ct=Re[Re.length-1],pt=Ze;pt<ct+1;pt++){this.pdf.setPage(pt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=pt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=pt===1?0:Pt+(pt-2)*Qt;if(this.ctx.clip_path.length!==0){var jr=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(me,this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=jr}var tr=JSON.parse(JSON.stringify(be));tr=w([tr],this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset)[0];var an=(pt>Ze||pt<ct)&&x.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Qt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,Me),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",be.x,be.y,be.w,be.h,null,null,Me)};var b=function(P,H,X){var Z=[];H=H||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Z.push(Math.floor((P.y+ae)/X)+1);break;case"arc":Z.push(Math.floor((P.y+ae-P.radius)/X)+1),Z.push(Math.floor((P.y+ae+P.radius)/X)+1);break;case"qct":var le=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Z.push(Math.floor((le.y+ae)/X)+1),Z.push(Math.floor((le.y+le.h+ae)/X)+1);break;case"bct":var ie=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Z.push(Math.floor((ie.y+ae)/X)+1),Z.push(Math.floor((ie.y+ie.h+ae)/X)+1);break;case"rect":Z.push(Math.floor((P.y+ae)/X)+1),Z.push(Math.floor((P.y+P.h+ae)/X)+1)}for(var ce=0;ce<Z.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ce];)y.call(this);return Z},y=function(){var P=this.fillStyle,H=this.strokeStyle,X=this.font,Z=this.lineCap,ae=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=H,this.font=X,this.lineCap=Z,this.lineWidth=ae,this.lineJoin=le},w=function(P,H,X){for(var Z=0;Z<P.length;Z++)switch(P[Z].type){case"bct":P[Z].x2+=H,P[Z].y2+=X;case"qct":P[Z].x1+=H,P[Z].y1+=X;case"mt":case"lt":case"arc":default:P[Z].x+=H,P[Z].y+=X}return P},_=function(P){return P.sort(function(H,X){return H-X})},j=function(P,H){for(var X,Z,ae=this.fillStyle,le=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,fe=Math.abs(ce*this.ctx.transform.scaleX),Ie=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),Fe=[],Se=0;Se<_e.length;Se++)if(_e[Se].x!==void 0)for(var me=b.call(this,_e[Se]),Te=0;Te<me.length;Te+=1)Fe.indexOf(me[Te])===-1&&Fe.push(me[Te]);for(var Me=0;Me<Fe.length;Me++)for(;this.pdf.internal.getNumberOfPages()<Fe[Me];)y.call(this);if(_(Fe),this.autoPaging)for(var We=Fe[0],be=Fe[Fe.length-1],De=We;De<be+1;De++){this.pdf.setPage(De),this.fillStyle=ae,this.strokeStyle=le,this.lineCap=ie,this.lineWidth=fe,this.lineJoin=Ie;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=De===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=De===1?0:Ze+(De-2)*ct;if(this.ctx.clip_path.length!==0){var It=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(X,this.posX+this.margin[3],-pt+qe+this.ctx.prevPageLastElemOffset),k.call(this,P,!0),this.path=It}if(Z=JSON.parse(JSON.stringify(ne)),this.path=w(Z,this.posX+this.margin[3],-pt+qe+this.ctx.prevPageLastElemOffset),H===!1||De===0){var Mt=(De>We||De<be)&&x.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ct,null).clip().discardPath()),k.call(this,P,H),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=fe,k.call(this,P,H),this.lineWidth=ce;this.path=ne},k=function(P,H){if((P!=="stroke"||H||!g.call(this))&&(P==="stroke"||H||!p.call(this))){for(var X,Z,ae=[],le=this.path,ie=0;ie<le.length;ie++){var ce=le[ie];switch(ce.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ce,deltas:[],abs:[]});break;case"lt":var fe=ae.length;if(le[ie-1]&&!isNaN(le[ie-1].x)&&(X=[ce.x-le[ie-1].x,ce.y-le[ie-1].y],fe>0)){for(;fe>=0;fe--)if(ae[fe-1].close!==!0&&ae[fe-1].begin!==!0){ae[fe-1].deltas.push(X),ae[fe-1].abs.push(ce);break}}break;case"bct":X=[ce.x1-le[ie-1].x,ce.y1-le[ie-1].y,ce.x2-le[ie-1].x,ce.y2-le[ie-1].y,ce.x-le[ie-1].x,ce.y-le[ie-1].y],ae[ae.length-1].deltas.push(X);break;case"qct":var Ie=le[ie-1].x+2/3*(ce.x1-le[ie-1].x),ne=le[ie-1].y+2/3*(ce.y1-le[ie-1].y),_e=ce.x+2/3*(ce.x1-ce.x),Fe=ce.y+2/3*(ce.y1-ce.y),Se=ce.x,me=ce.y;X=[Ie-le[ie-1].x,ne-le[ie-1].y,_e-le[ie-1].x,Fe-le[ie-1].y,Se-le[ie-1].x,me-le[ie-1].y],ae[ae.length-1].deltas.push(X);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ce)}}Z=H?null:P==="stroke"?"stroke":"fill";for(var Te=!1,Me=0;Me<ae.length;Me++)if(ae[Me].arc)for(var We=ae[Me].abs,be=0;be<We.length;be++){var De=We[be];De.type==="arc"?N.call(this,De.x,De.y,De.radius,De.startAngle,De.endAngle,De.counterclockwise,void 0,H,!Te):L.call(this,De.x,De.y),Te=!0}else if(ae[Me].close===!0)this.pdf.internal.out("h"),Te=!1;else if(ae[Me].begin!==!0){var Re=ae[Me].start.x,qe=ae[Me].start.y;M.call(this,ae[Me].deltas,Re,qe),Te=!0}Z&&B.call(this,Z),H&&R.call(this)}},I=function(P){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-X;case"top":return P+H-X;case"hanging":return P+H-2*X;case"middle":return P+H/2-X;case"ideographic":return P;case"alphabetic":default:return P}},E=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(H,X){this.colorStops.push([H,X])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(P,H,X,Z,ae,le,ie,ce,fe){for(var Ie=V.call(this,X,Z,ae,le),ne=0;ne<Ie.length;ne++){var _e=Ie[ne];ne===0&&(fe?D.call(this,_e.x1+P,_e.y1+H):L.call(this,_e.x1+P,_e.y1+H)),J.call(this,P,H,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}ce?R.call(this):B.call(this,ie)},B=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,H){this.pdf.internal.out(r(P)+" "+n(H)+" m")},O=function(P){var H;switch(P.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var X=this.pdf.getTextDimensions(P.text),Z=I.call(this,P.y),ae=E.call(this,Z)-X.h,le=this.ctx.transform.applyToPoint(new i(P.x,Z)),ie=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var fe,Ie,ne,_e=this.ctx.transform.applyToRectangle(new o(P.x,Z,X.w,X.h)),Fe=ce.applyToRectangle(new o(P.x,ae,X.w,X.h)),Se=b.call(this,Fe),me=[],Te=0;Te<Se.length;Te+=1)me.indexOf(Se[Te])===-1&&me.push(Se[Te]);if(_(me),this.autoPaging)for(var Me=me[0],We=me[me.length-1],be=Me;be<We+1;be++){this.pdf.setPage(be);var De=be===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],pt=ct-this.margin[3],It=be===1?0:Re+(be-2)*Ze;if(this.ctx.clip_path.length!==0){var Mt=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-1*It+De),k.call(this,"fill",!0),this.path=Mt}var Pt=w([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-It+De+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale);var Qt=this.autoPaging!=="text";if(Qt||Pt.y+Pt.h<=qe){if(Qt||Pt.y>=De&&Pt.x<=ct){var wt=Qt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ct-Pt.x)[0],jr=w([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-It+De+this.ctx.prevPageLastElemOffset)[0],tr=Qt&&(be>Me||be<We)&&x.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Ze,null).clip().discardPath()),this.pdf.text(wt,jr.x,jr.y,{angle:P.angle,align:H,renderingMode:P.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else Pt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Pt.y);P.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=ne)}else P.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*P.scale),ne=this.lineWidth,this.lineWidth=ne*P.scale),this.pdf.text(P.text,le.x+this.posX,le.y+this.posY,{angle:P.angle,align:H,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=ne)},L=function(P,H,X,Z){X=X||0,Z=Z||0,this.pdf.internal.out(r(P+X)+" "+n(H+Z)+" l")},M=function(P,H,X){return this.pdf.lines(P,H,X,null,null)},J=function(P,H,X,Z,ae,le,ie,ce){this.pdf.internal.out([t(a(X+P)),t(s(Z+H)),t(a(ae+P)),t(s(le+H)),t(a(ie+P)),t(s(ce+H)),"c"].join(" "))},V=function(P,H,X,Z){for(var ae=2*Math.PI,le=Math.PI/2;H>X;)H-=ae;var ie=Math.abs(X-H);ie<ae&&Z&&(ie=ae-ie);for(var ce=[],fe=Z?-1:1,Ie=H;ie>1e-5;){var ne=Ie+fe*Math.min(ie,le);ce.push(K.call(this,P,Ie,ne)),ie-=Math.abs(ne-Ie),Ie=ne}return ce},K=function(P,H,X){var Z=(X-H)/2,ae=P*Math.cos(Z),le=P*Math.sin(Z),ie=ae,ce=-le,fe=ie*ie+ce*ce,Ie=fe+ie*ae+ce*le,ne=4/3*(Math.sqrt(2*fe*Ie)-Ie)/(ie*le-ce*ae),_e=ie-ne*ce,Fe=ce+ne*ie,Se=_e,me=-Fe,Te=Z+H,Me=Math.cos(Te),We=Math.sin(Te);return{x1:P*Math.cos(H),y1:P*Math.sin(H),x2:_e*Me-Fe*We,y2:_e*We+Fe*Me,x3:Se*Me-me*We,y3:Se*We+me*Me,x4:P*Math.cos(X),y4:P*Math.sin(X)}},z=function(P){return 180*P/Math.PI},G=function(P,H,X,Z,ae,le){var ie=P+.5*(X-P),ce=H+.5*(Z-H),fe=ae+.5*(X-ae),Ie=le+.5*(Z-le),ne=Math.min(P,ae,ie,fe),_e=Math.max(P,ae,ie,fe),Fe=Math.min(H,le,ce,Ie),Se=Math.max(H,le,ce,Ie);return new o(ne,Fe,_e-ne,Se-Fe)},Y=function(P,H,X,Z,ae,le,ie,ce){var fe,Ie,ne,_e,Fe,Se,me,Te,Me,We,be,De,Re,qe,Ze=X-P,ct=Z-H,pt=ae-X,It=le-Z,Mt=ie-ae,Pt=ce-le;for(Ie=0;Ie<41;Ie++)Me=(me=(ne=P+(fe=Ie/40)*Ze)+fe*((Fe=X+fe*pt)-ne))+fe*(Fe+fe*(ae+fe*Mt-Fe)-me),We=(Te=(_e=H+fe*ct)+fe*((Se=Z+fe*It)-_e))+fe*(Se+fe*(le+fe*Pt-Se)-Te),Ie==0?(be=Me,De=We,Re=Me,qe=We):(be=Math.min(be,Me),De=Math.min(De,We),Re=Math.max(Re,Me),qe=Math.max(qe,We));return new o(Math.round(be),Math.round(De),Math.round(Re-be),Math.round(qe-De))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,H,X=(P=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:H}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(vr.API),function(e){var t=function(s){var i,o,c,u,d,f,h,p,g,x;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,x+33)):o.push(122);return function(b,y){for(var w=y;w>0;w--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,d,f=String,h="length",p=255,g="charCodeAt",x="slice",b="replace";for(s[x](-2),s=s[x](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=KF(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var x=g.length,b=[],y=String.fromCharCode;for(h=0;h<x;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):m1(()=>Promise.resolve().then(()=>Qft),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):m1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=pa(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(i,o,c){if(pa(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(p=x,x=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(p=x,x=g,g=p)}return{width:x,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(ZF):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(vr.API),vr.API.addJS=function(e){return VG=e,this.internal.events.subscribe("postPutResources",function(){YC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(YC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),HG=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+VG+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){YC!==void 0&&HG!==void 0&&this.internal.out("/Names <</JavaScript "+YC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),x={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var Bx,JC,zG,$G,GG,_8e=function(){var e,t,r;function n(s){var i,o,c,u,d,f,h,p,g,x,b,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var j,k;for(k=[],j=0;j<4;++j)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var x,b,y,w,_,j,k,I,E,N,B,R,D,O,L,M,J,V,K,z,G,Y=Math.ceil((u.width-f)/p),te=Math.ceil((u.height-h)/g),P=u.width==Y&&u.height==te;for(O=i*Y,R=P?o:new Uint8Array(O*te),j=s.length,D=0,b=0;D<te&&c<j;){switch(s[c++]){case 0:for(w=J=0;J<O;w=J+=1)R[b++]=s[c++];break;case 1:for(w=V=0;V<O;w=V+=1)x=s[c++],_=w<i?0:R[b-i],R[b++]=(x+_)%256;break;case 2:for(w=K=0;K<O;w=K+=1)x=s[c++],y=(w-w%i)/i,L=D&&R[(D-1)*O+y*i+w%i],R[b++]=(L+x)%256;break;case 3:for(w=z=0;z<O;w=z+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[b-i],L=D&&R[(D-1)*O+y*i+w%i],R[b++]=(x+Math.floor((_+L)/2))%256;break;case 4:for(w=G=0;G<O;w=G+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[b-i],D===0?L=M=0:(L=R[(D-1)*O+y*i+w%i],M=y&&R[(D-1)*O+(y-1)*i+w%i]),k=_+L-M,I=Math.abs(k-_),N=Math.abs(k-L),B=Math.abs(k-M),E=I<=N&&I<=B?_:N<=B?L:M,R[b++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var H=((h+D*g)*u.width+f)*i,X=D*O;for(w=0;w<Y;w+=1){for(var Z=0;Z<i;Z+=1)o[H++]=R[X++];H+=(p-1)*i}}D++}}return s=n8e(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,d,f,h,p,g,x,b,y;if(c=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,o=!0),g=(u=s.data||s).length,f=x||i,d=h=0,c===1)for(;d<g;)p=x?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=x?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Qr)==="[object Window]"){try{t=Qr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,p.push(i.image=e(c));return p}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=c[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function N8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),p=x>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,j=e[t++],k=j>>6&1,I=1<<(7&j)+1,E=o,N=c,B=!1;j>>7&&(B=!0,E=t,N=I,t+=3*I);var R=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:b,y,width:w,height:_,has_local_palette:B,palette_offset:E,palette_size:N,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!k,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,L){var M=this.frameInfo(O),J=M.width*M.height,V=new Uint8Array(J);KG(e,M.data_offset,V,J);var K=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var G=M.width,Y=r-G,te=G,P=4*(M.y*r+M.x),H=4*((M.y+M.height)*r+M.x),X=P,Z=4*Y;M.interlaced===!0&&(Z+=4*r*7);for(var ae=8,le=0,ie=V.length;le<ie;++le){var ce=V[le];if(te===0&&(te=G,(X+=Z)>=H&&(Z=4*Y+4*r*(ae-1),X=P+(G+Y)*(ae<<1),ae>>=1)),ce===z)X+=4;else{var fe=e[K+3*ce],Ie=e[K+3*ce+1],ne=e[K+3*ce+2];L[X++]=ne,L[X++]=Ie,L[X++]=fe,L[X++]=255}--te}},this.decodeAndBlitFrameRGBA=function(O,L){var M=this.frameInfo(O),J=M.width*M.height,V=new Uint8Array(J);KG(e,M.data_offset,V,J);var K=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var G=M.width,Y=r-G,te=G,P=4*(M.y*r+M.x),H=4*((M.y+M.height)*r+M.x),X=P,Z=4*Y;M.interlaced===!0&&(Z+=4*r*7);for(var ae=8,le=0,ie=V.length;le<ie;++le){var ce=V[le];if(te===0&&(te=G,(X+=Z)>=H&&(Z=4*Y+4*r*(ae-1),X=P+(G+Y)*(ae<<1),ae>>=1)),ce===z)X+=4;else{var fe=e[K+3*ce],Ie=e[K+3*ce+1],ne=e[K+3*ce+2];L[X++]=fe,L[X++]=Ie,L[X++]=ne,L[X++]=255}--te}}}function KG(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var b=f&u;if(f>>=c,d-=c,b!==s){if(b===i)break;for(var y=b<o?b:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var j=_;if(h+w+(y!==b?1:0)>n)return void _a.log("Warning, gif stream longer than expected.");r[h++]=j;var k=h+=w;for(y!==b&&(r[h++]=j),_=y;w--;)_=g[_],r[--k]=255&_,_>>=8;x!==null&&o<4096&&(g[o++]=x<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),x=b}else o=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&_a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function KT(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),x=[],b=0,y=7,w=new Array(64),_=new Array(64),j=new Array(64),k=new Array(256),I=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(P,H){for(var X=0,Z=0,ae=new Array,le=1;le<=16;le++){for(var ie=1;ie<=P[le];ie++)ae[H[Z]]=[],ae[H[Z]][0]=X,ae[H[Z]][1]=le,Z++,X++;X*=2}return ae}function K(P){for(var H=P[0],X=P[1]-1;X>=0;)H&1<<X&&(b|=1<<y),X--,--y<0&&(b==255?(z(255),z(0)):z(b),y=7,b=0)}function z(P){x.push(P)}function G(P){z(P>>8&255),z(255&P)}function Y(P,H,X,Z,ae){for(var le,ie=ae[0],ce=ae[240],fe=function(We,be){var De,Re,qe,Ze,ct,pt,It,Mt,Pt,Qt,wt=0;for(Pt=0;Pt<8;++Pt){De=We[wt],Re=We[wt+1],qe=We[wt+2],Ze=We[wt+3],ct=We[wt+4],pt=We[wt+5],It=We[wt+6];var jr=De+(Mt=We[wt+7]),tr=De-Mt,an=Re+It,Nr=Re-It,$r=qe+pt,In=qe-pt,Pr=Ze+ct,fs=Ze-ct,hn=jr+Pr,la=jr-Pr,ja=an+$r,rn=an-$r;We[wt]=hn+ja,We[wt+4]=hn-ja;var pr=.707106781*(rn+la);We[wt+2]=la+pr,We[wt+6]=la-pr;var et=.382683433*((hn=fs+In)-(rn=Nr+tr)),gt=.5411961*hn+et,Je=1.306562965*rn+et,xt=.707106781*(ja=In+Nr),Et=tr+xt,bt=tr-xt;We[wt+5]=bt+gt,We[wt+3]=bt-gt,We[wt+1]=Et+Je,We[wt+7]=Et-Je,wt+=8}for(wt=0,Pt=0;Pt<8;++Pt){De=We[wt],Re=We[wt+8],qe=We[wt+16],Ze=We[wt+24],ct=We[wt+32],pt=We[wt+40],It=We[wt+48];var nr=De+(Mt=We[wt+56]),xr=De-Mt,Wr=Re+It,Zr=Re-It,qr=qe+pt,he=qe-pt,je=Ze+ct,Ce=Ze-ct,we=nr+je,Ne=nr-je,Be=Wr+qr,Ye=Wr-qr;We[wt]=we+Be,We[wt+32]=we-Be;var dt=.707106781*(Ye+Ne);We[wt+16]=Ne+dt,We[wt+48]=Ne-dt;var $e=.382683433*((we=Ce+he)-(Ye=Zr+xr)),rt=.5411961*we+$e,it=1.306562965*Ye+$e,Ft=.707106781*(Be=he+Zr),Vt=xr+Ft,Jt=xr-Ft;We[wt+40]=Jt+rt,We[wt+24]=Jt-rt,We[wt+8]=Vt+it,We[wt+56]=Vt-it,wt++}for(Pt=0;Pt<64;++Pt)Qt=We[Pt]*be[Pt],p[Pt]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(P,H),Ie=0;Ie<64;++Ie)g[E[Ie]]=fe[Ie];var ne=g[0]-X;X=g[0],ne==0?K(Z[0]):(K(Z[h[le=32767+ne]]),K(f[le]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return K(ie),X;for(var Fe,Se=1;Se<=_e;){for(var me=Se;g[Se]==0&&Se<=_e;)++Se;var Te=Se-me;if(Te>=16){Fe=Te>>4;for(var Me=1;Me<=Fe;++Me)K(ce);Te&=15}le=32767+g[Se],K(ae[(Te<<4)+h[le]]),K(f[le]),Se++}return _e!=63&&K(ie),X}function te(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(H){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ae=i((X[Z]*H+50)/100);ae=Math.min(Math.max(ae,1),255),o[E[Z]]=ae}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ce=i((le[ie]*H+50)/100);ce=Math.min(Math.max(ce,1),255),c[E[ie]]=ce}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,ne=0;ne<8;ne++)for(var _e=0;_e<8;_e++)u[Ie]=1/(o[E[Ie]]*fe[ne]*fe[_e]*8),d[Ie]=1/(c[E[Ie]]*fe[ne]*fe[_e]*8),Ie++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,H){H&&te(H),x=new Array,b=0,y=7,G(65496),G(65504),G(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),G(1),G(1),z(0),z(0),function(){G(65499),G(132),z(0);for(var Re=0;Re<64;Re++)z(o[Re]);z(1);for(var qe=0;qe<64;qe++)z(c[qe])}(),function(Re,qe){G(65472),G(17),z(8),G(qe),G(Re),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(P.width,P.height),function(){G(65476),G(418),z(0);for(var Re=0;Re<16;Re++)z(N[Re+1]);for(var qe=0;qe<=11;qe++)z(B[qe]);z(16);for(var Ze=0;Ze<16;Ze++)z(R[Ze+1]);for(var ct=0;ct<=161;ct++)z(D[ct]);z(1);for(var pt=0;pt<16;pt++)z(O[pt+1]);for(var It=0;It<=11;It++)z(L[It]);z(17);for(var Mt=0;Mt<16;Mt++)z(M[Mt+1]);for(var Pt=0;Pt<=161;Pt++)z(J[Pt])}(),G(65498),G(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var X=0,Z=0,ae=0;b=0,y=7,this.encode.displayName="_encode_";for(var le,ie,ce,fe,Ie,ne,_e,Fe,Se,me=P.data,Te=P.width,Me=P.height,We=4*Te,be=0;be<Me;){for(le=0;le<We;){for(Ie=We*be+le,_e=-1,Fe=0,Se=0;Se<64;Se++)ne=Ie+(Fe=Se>>3)*We+(_e=4*(7&Se)),be+Fe>=Me&&(ne-=We*(be+1+Fe-Me)),le+_e>=We&&(ne-=le+_e-We+4),ie=me[ne++],ce=me[ne++],fe=me[ne++],w[Se]=(I[ie]+I[ce+256>>0]+I[fe+512>>0]>>16)-128,_[Se]=(I[ie+768>>0]+I[ce+1024>>0]+I[fe+1280>>0]>>16)-128,j[Se]=(I[ie+1280>>0]+I[ce+1536>>0]+I[fe+1792>>0]>>16)-128;X=Y(w,u,X,t,n),Z=Y(_,d,Z,r,a),ae=Y(j,d,ae,r,a),le+=32}be+=8}if(y>=0){var De=[];De[1]=y+1,De[0]=(1<<y+1)-1,K(De)}return G(65497),new Uint8Array(x)},e=e||50,function(){for(var P=String.fromCharCode,H=0;H<256;H++)k[H]=P(H)}(),t=V(N,B),r=V(O,L),n=V(R,D),a=V(M,J),function(){for(var P=1,H=2,X=1;X<=15;X++){for(var Z=P;Z<H;Z++)h[32767+Z]=X,f[32767+Z]=[],f[32767+Z][1]=X,f[32767+Z][0]=Z;for(var ae=-(H-1);ae<=-P;ae++)h[32767+ae]=X,f[32767+ae]=[],f[32767+ae][1]=X,f[32767+ae][0]=H-1+ae;P<<=1,H<<=1}}(),function(){for(var P=0;P<256;P++)I[P]=19595*P,I[P+256>>0]=38470*P,I[P+512>>0]=7471*P+32768,I[P+768>>0]=-11059*P,I[P+1024>>0]=-21709*P,I[P+1280>>0]=32768*P+8421375,I[P+1536>>0]=-27439*P,I[P+1792>>0]=-5329*P}(),te(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function qG(e){function t(N){if(!N)throw Error("assert :P")}function r(N,B,R){for(var D=0;4>D;D++)if(N[B+D]!=R.charCodeAt(D))return!0;return!1}function n(N,B,R,D,O){for(var L=0;L<O;L++)N[B+L]=R[D+L]}function a(N,B,R,D){for(var O=0;O<D;O++)N[B+O]=R}function s(N){return new Int32Array(N)}function i(N,B){for(var R=[],D=0;D<N;D++)R.push(new B);return R}function o(N,B){var R=[];return function D(O,L,M){for(var J=M[L],V=0;V<J&&(O.push(M.length>L+1?[]:new B),!(M.length<L+1));V++)D(O[V],L+1,M)}(R,0,N),R}var c=function(){var N=this;function B(T,Q){for(var ee=1<<Q-1>>>0;T&ee;)ee>>>=1;return ee?(T&ee-1)+ee:T}function R(T,Q,ee,se,de){t(!(se%ee));do T[Q+(se-=ee)]=de;while(0<se)}function D(T,Q,ee,se,de){if(t(2328>=de),512>=de)var pe=s(512);else if((pe=s(de))==null)return 0;return function(ge,xe,Ee,ke,Ue,st){var tt,Ke,Bt=xe,mt=1<<Ee,Qe=s(16),Ve=s(16);for(t(Ue!=0),t(ke!=null),t(ge!=null),t(0<Ee),Ke=0;Ke<Ue;++Ke){if(15<ke[Ke])return 0;++Qe[ke[Ke]]}if(Qe[0]==Ue)return 0;for(Ve[1]=0,tt=1;15>tt;++tt){if(Qe[tt]>1<<tt)return 0;Ve[tt+1]=Ve[tt]+Qe[tt]}for(Ke=0;Ke<Ue;++Ke)tt=ke[Ke],0<ke[Ke]&&(st[Ve[tt]++]=Ke);if(Ve[15]==1)return(ke=new O).g=0,ke.value=st[0],R(ge,Bt,1,mt,ke),mt;var Nt,Tt=-1,kt=mt-1,rr=0,Yt=1,br=1,er=1<<Ee;for(Ke=0,tt=1,Ue=2;tt<=Ee;++tt,Ue<<=1){if(Yt+=br<<=1,0>(br-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt])(ke=new O).g=tt,ke.value=st[Ke++],R(ge,Bt+rr,Ue,er,ke),rr=B(rr,tt)}for(tt=Ee+1,Ue=2;15>=tt;++tt,Ue<<=1){if(Yt+=br<<=1,0>(br-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt]){if(ke=new O,(rr&kt)!=Tt){for(Bt+=er,Nt=1<<(Tt=tt)-Ee;15>Tt&&!(0>=(Nt-=Qe[Tt]));)++Tt,Nt<<=1;mt+=er=1<<(Nt=Tt-Ee),ge[xe+(Tt=rr&kt)].g=Nt+Ee,ge[xe+Tt].value=Bt-xe-Tt}ke.g=tt-Ee,ke.value=st[Ke++],R(ge,Bt+(rr>>Ee),Ue,er,ke),rr=B(rr,tt)}}return Yt!=2*Ve[15]-1?0:mt}(T,Q,ee,se,de,pe)}function O(){this.value=this.g=0}function L(){this.value=this.g=0}function M(){this.G=i(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Is,L)}function J(T,Q,ee,se){t(T!=null),t(Q!=null),t(2147483648>se),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=Q,T.pa=ee,T.Jd=Q,T.Yc=ee+se,T.Zc=4<=se?ee+se-4+1:ee,le(T)}function V(T,Q){for(var ee=0;0<Q--;)ee|=ce(T,128)<<Q;return ee}function K(T,Q){var ee=V(T,Q);return ie(T)?-ee:ee}function z(T,Q,ee,se){var de,pe=0;for(t(T!=null),t(Q!=null),t(4294967288>se),T.Sb=se,T.Ra=0,T.u=0,T.h=0,4<se&&(se=4),de=0;de<se;++de)pe+=Q[ee+de]<<8*de;T.Ra=pe,T.bb=se,T.oa=Q,T.pa=ee}function G(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<vf-8>>>0,++T.bb,T.u-=8;X(T)&&(T.h=1,T.u=0)}function Y(T,Q){if(t(0<=Q),!T.h&&Q<=xf){var ee=H(T)&aA[Q];return T.u+=Q,G(T),ee}return T.h=1,T.u=0}function te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(T){return T.Ra>>>(T.u&vf-1)>>>0}function X(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>vf}function Z(T,Q){T.u=Q,T.h=X(T)}function ae(T){T.u>=qh&&(t(T.u>=qh),G(T))}function le(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function ie(T){return V(T,1)}function ce(T,Q){var ee=T.Ca;0>T.b&&le(T);var se=T.b,de=ee*Q>>>8,pe=(T.I>>>se>de)+0;for(pe?(ee-=de,T.I-=de+1<<se>>>0):ee=de+1,se=ee,de=0;256<=se;)de+=8,se>>=8;return se=7^de+Bo[se],T.b-=se,T.Ca=(ee<<se)-1,pe}function fe(T,Q,ee){T[Q+0]=ee>>24&255,T[Q+1]=ee>>16&255,T[Q+2]=ee>>8&255,T[Q+3]=ee>>0&255}function Ie(T,Q){return T[Q+0]<<0|T[Q+1]<<8}function ne(T,Q){return Ie(T,Q)|T[Q+2]<<16}function _e(T,Q){return Ie(T,Q)|Ie(T,Q+2)<<16}function Fe(T,Q){var ee=1<<Q;return t(T!=null),t(0<Q),T.X=s(ee),T.X==null?0:(T.Mb=32-Q,T.Xa=Q,1)}function Se(T,Q){t(T!=null),t(Q!=null),t(T.Xa==Q.Xa),n(Q.X,0,T.X,0,1<<Q.Xa)}function me(){this.X=[],this.Xa=this.Mb=0}function Te(T,Q,ee,se){t(ee!=null),t(se!=null);var de=ee[0],pe=se[0];return de==0&&(de=(T*pe+Q/2)/Q),pe==0&&(pe=(Q*de+T/2)/T),0>=de||0>=pe?0:(ee[0]=de,se[0]=pe,1)}function Me(T,Q){return T+(1<<Q)-1>>>Q}function We(T,Q){return((4278255360&T)+(4278255360&Q)>>>0&4278255360)+((16711935&T)+(16711935&Q)>>>0&16711935)>>>0}function be(T,Q){N[Q]=function(ee,se,de,pe,ge,xe,Ee){var ke;for(ke=0;ke<ge;++ke){var Ue=N[T](xe[Ee+ke-1],de,pe+ke);xe[Ee+ke]=We(ee[se+ke],Ue)}}}function De(){this.ud=this.hd=this.jd=0}function Re(T,Q){return((4278124286&(T^Q))>>>1)+(T&Q)>>>0}function qe(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ze(T,Q){return qe(T+(T-Q+.5>>1))}function ct(T,Q,ee){return Math.abs(Q-ee)-Math.abs(T-ee)}function pt(T,Q,ee,se,de,pe,ge){for(se=pe[ge-1],ee=0;ee<de;++ee)pe[ge+ee]=se=We(T[Q+ee],se)}function It(T,Q,ee,se,de){var pe;for(pe=0;pe<ee;++pe){var ge=T[Q+pe],xe=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((xe<<16)+xe));se[de+pe]=(4278255360&ge)+Ee>>>0}}function Mt(T,Q){Q.jd=T>>0&255,Q.hd=T>>8&255,Q.ud=T>>16&255}function Pt(T,Q,ee,se,de,pe){var ge;for(ge=0;ge<se;++ge){var xe=Q[ee+ge],Ee=xe>>>8,ke=xe,Ue=255&(Ue=(Ue=xe>>>16)+((T.jd<<24>>24)*(Ee<<24>>24)>>>5));ke=255&(ke=(ke=ke+((T.hd<<24>>24)*(Ee<<24>>24)>>>5))+((T.ud<<24>>24)*(Ue<<24>>24)>>>5)),de[pe+ge]=(4278255360&xe)+(Ue<<16)+ke}}function Qt(T,Q,ee,se,de){N[Q]=function(pe,ge,xe,Ee,ke,Ue,st,tt,Ke){for(Ee=st;Ee<tt;++Ee)for(st=0;st<Ke;++st)ke[Ue++]=de(xe[se(pe[ge++])])},N[T]=function(pe,ge,xe,Ee,ke,Ue,st){var tt=8>>pe.b,Ke=pe.Ea,Bt=pe.K[0],mt=pe.w;if(8>tt)for(pe=(1<<pe.b)-1,mt=(1<<tt)-1;ge<xe;++ge){var Qe,Ve=0;for(Qe=0;Qe<Ke;++Qe)Qe&pe||(Ve=se(Ee[ke++])),Ue[st++]=de(Bt[Ve&mt]),Ve>>=tt}else N["VP8LMapColor"+ee](Ee,ke,Bt,mt,Ue,st,ge,xe,Ke)}}function wt(T,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=T[Q++];se[de++]=pe>>16&255,se[de++]=pe>>8&255,se[de++]=pe>>0&255}}function jr(T,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=T[Q++];se[de++]=pe>>16&255,se[de++]=pe>>8&255,se[de++]=pe>>0&255,se[de++]=pe>>24&255}}function tr(T,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=(ge=T[Q++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;se[de++]=pe,se[de++]=ge}}function an(T,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=(ge=T[Q++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;se[de++]=pe,se[de++]=ge}}function Nr(T,Q,ee,se,de){for(ee=Q+ee;Q<ee;){var pe=T[Q++];se[de++]=pe>>0&255,se[de++]=pe>>8&255,se[de++]=pe>>16&255}}function $r(T,Q,ee,se,de,pe){if(pe==0)for(ee=Q+ee;Q<ee;)fe(se,((pe=T[Q++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),de+=32;else n(se,de,T,Q,ee)}function In(T,Q){N[Q][0]=N[T+"0"],N[Q][1]=N[T+"1"],N[Q][2]=N[T+"2"],N[Q][3]=N[T+"3"],N[Q][4]=N[T+"4"],N[Q][5]=N[T+"5"],N[Q][6]=N[T+"6"],N[Q][7]=N[T+"7"],N[Q][8]=N[T+"8"],N[Q][9]=N[T+"9"],N[Q][10]=N[T+"10"],N[Q][11]=N[T+"11"],N[Q][12]=N[T+"12"],N[Q][13]=N[T+"13"],N[Q][14]=N[T+"0"],N[Q][15]=N[T+"0"]}function Pr(T){return T==Jm||T==hA||T==sd||T==Jh}function fs(){this.eb=[],this.size=this.A=this.fb=0}function hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function la(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fs,this.f.kb=new hn,this.sd=null}function ja(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function et(T,Q){var ee=T.T,se=Q.ba.f.RGBA,de=se.eb,pe=se.fb+T.ka*se.A,ge=ni[Q.ba.S],xe=T.y,Ee=T.O,ke=T.f,Ue=T.N,st=T.ea,tt=T.W,Ke=Q.cc,Bt=Q.dc,mt=Q.Mc,Qe=Q.Nc,Ve=T.ka,Nt=T.ka+T.T,Tt=T.U,kt=Tt+1>>1;for(Ve==0?ge(xe,Ee,null,null,ke,Ue,st,tt,ke,Ue,st,tt,de,pe,null,null,Tt):(ge(Q.ec,Q.fc,xe,Ee,Ke,Bt,mt,Qe,ke,Ue,st,tt,de,pe-se.A,de,pe,Tt),++ee);Ve+2<Nt;Ve+=2)Ke=ke,Bt=Ue,mt=st,Qe=tt,Ue+=T.Rc,tt+=T.Rc,pe+=2*se.A,ge(xe,(Ee+=2*T.fa)-T.fa,xe,Ee,Ke,Bt,mt,Qe,ke,Ue,st,tt,de,pe-se.A,de,pe,Tt);return Ee+=T.fa,T.j+Nt<T.o?(n(Q.ec,Q.fc,xe,Ee,Tt),n(Q.cc,Q.dc,ke,Ue,kt),n(Q.Mc,Q.Nc,st,tt,kt),ee--):1&Nt||ge(xe,Ee,null,null,ke,Ue,st,tt,ke,Ue,st,tt,de,pe+se.A,null,null,Tt),ee}function gt(T,Q,ee){var se=T.F,de=[T.J];if(se!=null){var pe=T.U,ge=Q.ba.S,xe=ge==Cf||ge==sd;Q=Q.ba.f.RGBA;var Ee=[0],ke=T.ka;Ee[0]=T.T,T.Kb&&(ke==0?--Ee[0]:(--ke,de[0]-=T.width),T.j+T.ka+T.T==T.o&&(Ee[0]=T.o-T.j-ke));var Ue=Q.eb;ke=Q.fb+ke*Q.A,T=pn(se,de[0],T.width,pe,Ee,Ue,ke+(xe?0:3),Q.A),t(ee==Ee),T&&Pr(ge)&&cl(Ue,ke,xe,pe,Ee,Q.A)}return 0}function Je(T){var Q=T.ma,ee=Q.ba.S,se=11>ee,de=ee==Yh||ee==Ym||ee==Cf||ee==ad||ee==12||Pr(ee);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!nA(Q.Oa,T,de?11:12))return 0;if(de&&Pr(ee)&&Lt(),T.da)alert("todo:use_scaling");else{if(se){if(Q.Ib=pr,T.Kb){if(ee=T.U+1>>1,Q.memory=s(T.U+2*ee),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+T.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ee,Q.Ib=et,Lt()}}else alert("todo:EmitYUV");de&&(Q.Jb=gt,se&&Ge())}if(se&&!CE){for(T=0;256>T;++T)dj[T]=89858*(T-128)+Os>>fu,tp[T]=-22014*(T-128)+Os,Ab[T]=-45773*(T-128),Ds[T]=113618*(T-128)+Os>>fu;for(T=gA;T<rx;++T)Q=76283*(T-16)+Os>>fu,rp[T-gA]=zn(Q,255),fb[T-gA]=zn(Q+8>>4,15);CE=1}return 1}function xt(T){var Q=T.ma,ee=T.U,se=T.T;return t(!(1&T.ka)),0>=ee||0>=se?0:(ee=Q.Ib(T,Q),Q.Jb!=null&&Q.Jb(T,Q,ee),Q.Dc+=ee,1)}function Et(T){T.ma.memory=null}function bt(T,Q,ee,se){return Y(T,8)!=47?0:(Q[0]=Y(T,14)+1,ee[0]=Y(T,14)+1,se[0]=Y(T,1),Y(T,3)!=0?0:!T.h)}function nr(T,Q){if(4>T)return T+1;var ee=T-2>>1;return(2+(1&T)<<ee)+Y(Q,ee)+1}function xr(T,Q){return 120<Q?Q-120:1<=(ee=((ee=od[Q-1])>>4)*T+(8-(15&ee)))?ee:1;var ee}function Wr(T,Q,ee){var se=H(ee),de=T[Q+=255&se].g-8;return 0<de&&(Z(ee,ee.u+8),se=H(ee),Q+=T[Q].value,Q+=se&(1<<de)-1),Z(ee,ee.u+T[Q].g),T[Q].value}function Zr(T,Q,ee){return ee.g+=T.g,ee.value+=T.value<<Q>>>0,t(8>=ee.g),T.g}function qr(T,Q,ee){var se=T.xc;return t((Q=se==0?0:T.vc[T.md*(ee>>se)+(Q>>se)])<T.Wb),T.Ya[Q]}function he(T,Q,ee,se){var de=T.ab,pe=T.c*Q,ge=T.C;Q=ge+Q;var xe=ee,Ee=se;for(se=T.Ta,ee=T.Ua;0<de--;){var ke=T.gc[de],Ue=ge,st=Q,tt=xe,Ke=Ee,Bt=(Ee=se,xe=ee,ke.Ea);switch(t(Ue<st),t(st<=ke.nc),ke.hc){case 2:Wg(tt,Ke,(st-Ue)*Bt,Ee,xe);break;case 0:var mt=Ue,Qe=st,Ve=Ee,Nt=xe,Tt=(er=ke).Ea;mt==0&&(ub(tt,Ke,null,null,1,Ve,Nt),pt(tt,Ke+1,0,0,Tt-1,Ve,Nt+1),Ke+=Tt,Nt+=Tt,++mt);for(var kt=1<<er.b,rr=kt-1,Yt=Me(Tt,er.b),br=er.K,er=er.w+(mt>>er.b)*Yt;mt<Qe;){var Dn=br,$n=er,fn=1;for(Wm(tt,Ke,Ve,Nt-Tt,1,Ve,Nt);fn<Tt;){var ln=(fn&~rr)+kt;ln>Tt&&(ln=Tt),(0,td[Dn[$n++]>>8&15])(tt,Ke+ +fn,Ve,Nt+fn-Tt,ln-fn,Ve,Nt+fn),fn=ln}Ke+=Tt,Nt+=Tt,++mt&rr||(er+=Yt)}st!=ke.nc&&n(Ee,xe-Bt,Ee,xe+(st-Ue-1)*Bt,Bt);break;case 1:for(Bt=tt,Qe=Ke,Tt=(tt=ke.Ea)-(Nt=tt&~(Ve=(Ke=1<<ke.b)-1)),mt=Me(tt,ke.b),kt=ke.K,ke=ke.w+(Ue>>ke.b)*mt;Ue<st;){for(rr=kt,Yt=ke,br=new De,er=Qe+Nt,Dn=Qe+tt;Qe<er;)Mt(rr[Yt++],br),iA(br,Bt,Qe,Ke,Ee,xe),Qe+=Ke,xe+=Ke;Qe<Dn&&(Mt(rr[Yt++],br),iA(br,Bt,Qe,Tt,Ee,xe),Qe+=Tt,xe+=Tt),++Ue&Ve||(ke+=mt)}break;case 3:if(tt==Ee&&Ke==xe&&0<ke.b){for(Qe=Ee,tt=Bt=xe+(st-Ue)*Bt-(Nt=(st-Ue)*Me(ke.Ea,ke.b)),Ke=Ee,Ve=xe,mt=[],Nt=(Tt=Nt)-1;0<=Nt;--Nt)mt[Nt]=Ke[Ve+Nt];for(Nt=Tt-1;0<=Nt;--Nt)Qe[tt+Nt]=mt[Nt];Dl(ke,Ue,st,Ee,Bt,Ee,xe)}else Dl(ke,Ue,st,tt,Ke,Ee,xe)}xe=se,Ee=ee}Ee!=ee&&n(se,ee,xe,Ee,pe)}function je(T,Q){var ee=T.V,se=T.Ba+T.c*T.C,de=Q-T.C;if(t(Q<=T.l.o),t(16>=de),0<de){var pe=T.l,ge=T.Ta,xe=T.Ua,Ee=pe.width;if(he(T,de,ee,se),de=xe=[xe],t((ee=T.C)<(se=Q)),t(pe.v<pe.va),se>pe.o&&(se=pe.o),ee<pe.j){var ke=pe.j-ee;ee=pe.j,de[0]+=ke*Ee}if(ee>=se?ee=0:(de[0]+=4*pe.v,pe.ka=ee-pe.j,pe.U=pe.va-pe.v,pe.T=se-ee,ee=1),ee){if(xe=xe[0],11>(ee=T.ca).S){var Ue=ee.f.RGBA,st=(se=ee.S,de=pe.U,pe=pe.T,ke=Ue.eb,Ue.A),tt=pe;for(Ue=Ue.fb+T.Ma*Ue.A;0<tt--;){var Ke=ge,Bt=xe,mt=de,Qe=ke,Ve=Ue;switch(se){case Ri:ao(Ke,Bt,mt,Qe,Ve);break;case Yh:yi(Ke,Bt,mt,Qe,Ve);break;case Jm:yi(Ke,Bt,mt,Qe,Ve),cl(Qe,Ve,0,mt,1,0);break;case cu:hc(Ke,Bt,mt,Qe,Ve);break;case Ym:$r(Ke,Bt,mt,Qe,Ve,1);break;case hA:$r(Ke,Bt,mt,Qe,Ve,1),cl(Qe,Ve,0,mt,1,0);break;case Cf:$r(Ke,Bt,mt,Qe,Ve,0);break;case sd:$r(Ke,Bt,mt,Qe,Ve,0),cl(Qe,Ve,1,mt,1,0);break;case ad:oA(Ke,Bt,mt,Qe,Ve);break;case Jh:oA(Ke,Bt,mt,Qe,Ve),mn(Qe,Ve,mt,1,0);break;case Yg:To(Ke,Bt,mt,Qe,Ve);break;default:t(0)}xe+=Ee,Ue+=st}T.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=ee.height)}}T.C=Q,t(T.C<=T.i)}function Ce(T){var Q;if(0<T.ua)return 0;for(Q=0;Q<T.Wb;++Q){var ee=T.Ya[Q].G,se=T.Ya[Q].H;if(0<ee[1][se[1]+0].g||0<ee[2][se[2]+0].g||0<ee[3][se[3]+0].g)return 0}return 1}function we(T,Q,ee,se,de,pe){if(T.Z!=0){var ge=T.qd,xe=T.rd;for(t(du[T.Z]!=null);Q<ee;++Q)du[T.Z](ge,xe,se,de,se,de,pe),ge=se,xe=de,de+=pe;T.qd=ge,T.rd=xe}}function Ne(T,Q){var ee=T.l.ma,se=ee.Z==0||ee.Z==1?T.l.j:T.C;if(se=T.C<se?se:T.C,t(Q<=T.l.o),Q>se){var de=T.l.width,pe=ee.ca,ge=ee.tb+de*se,xe=T.V,Ee=T.Ba+T.c*se,ke=T.gc;t(T.ab==1),t(ke[0].hc==3),sA(ke[0],se,Q,xe,Ee,pe,ge),we(ee,se,Q,pe,ge,de)}T.C=T.Ma=Q}function Be(T,Q,ee,se,de,pe,ge){var xe=T.$/se,Ee=T.$%se,ke=T.m,Ue=T.s,st=ee+T.$,tt=st;de=ee+se*de;var Ke=ee+se*pe,Bt=280+Ue.ua,mt=T.Pb?xe:16777216,Qe=0<Ue.ua?Ue.Wa:null,Ve=Ue.wc,Nt=st<Ke?qr(Ue,Ee,xe):null;t(T.C<pe),t(Ke<=de);var Tt=!1;e:for(;;){for(;Tt||st<Ke;){var kt=0;if(xe>=mt){var rr=st-ee;t((mt=T).Pb),mt.wd=mt.m,mt.xd=rr,0<mt.s.ua&&Se(mt.s.Wa,mt.s.vb),mt=xe+yE}if(Ee&Ve||(Nt=qr(Ue,Ee,xe)),t(Nt!=null),Nt.Qb&&(Q[st]=Nt.qb,Tt=!0),!Tt)if(ae(ke),Nt.jc){kt=ke,rr=Q;var Yt=st,br=Nt.pd[H(kt)&Is-1];t(Nt.jc),256>br.g?(Z(kt,kt.u+br.g),rr[Yt]=br.value,kt=0):(Z(kt,kt.u+br.g-256),t(256<=br.value),kt=br.value),kt==0&&(Tt=!0)}else kt=Wr(Nt.G[0],Nt.H[0],ke);if(ke.h)break;if(Tt||256>kt){if(!Tt)if(Nt.nd)Q[st]=(Nt.qb|kt<<8)>>>0;else{if(ae(ke),Tt=Wr(Nt.G[1],Nt.H[1],ke),ae(ke),rr=Wr(Nt.G[2],Nt.H[2],ke),Yt=Wr(Nt.G[3],Nt.H[3],ke),ke.h)break;Q[st]=(Yt<<24|Tt<<16|kt<<8|rr)>>>0}if(Tt=!1,++st,++Ee>=se&&(Ee=0,++xe,ge!=null&&xe<=pe&&!(xe%16)&&ge(T,xe),Qe!=null))for(;tt<st;)kt=Q[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else if(280>kt){if(kt=nr(kt-256,ke),rr=Wr(Nt.G[4],Nt.H[4],ke),ae(ke),rr=xr(se,rr=nr(rr,ke)),ke.h)break;if(st-ee<rr||de-st<kt)break e;for(Yt=0;Yt<kt;++Yt)Q[st+Yt]=Q[st+Yt-rr];for(st+=kt,Ee+=kt;Ee>=se;)Ee-=se,++xe,ge!=null&&xe<=pe&&!(xe%16)&&ge(T,xe);if(t(st<=de),Ee&Ve&&(Nt=qr(Ue,Ee,xe)),Qe!=null)for(;tt<st;)kt=Q[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else{if(!(kt<Bt))break e;for(Tt=kt-280,t(Qe!=null);tt<st;)kt=Q[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt;kt=st,t(!(Tt>>>(rr=Qe).Xa)),Q[kt]=rr.X[Tt],Tt=!0}Tt||t(ke.h==X(ke))}if(T.Pb&&ke.h&&st<de)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Se(T.s.vb,T.s.Wa);else{if(ke.h)break e;ge!=null&&ge(T,xe>pe?pe:xe),T.a=0,T.$=st-ee}return 1}return T.a=3,0}function Ye(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var Q=T.Wa;Q!=null&&(Q.X=null),T.vb=null,t(T!=null)}function dt(){var T=new Gh;return T==null?null:(T.a=0,T.xb=Zh,In("Predictor","VP8LPredictors"),In("Predictor","VP8LPredictors_C"),In("PredictorAdd","VP8LPredictorsAdd"),In("PredictorAdd","VP8LPredictorsAdd_C"),Wg=It,iA=Pt,ao=wt,yi=jr,oA=tr,To=an,hc=Nr,N.VP8LMapColor32b=ti,N.VP8LMapColor8b=Xm,T)}function $e(T,Q,ee,se,de){var pe=1,ge=[T],xe=[Q],Ee=se.m,ke=se.s,Ue=null,st=0;e:for(;;){if(ee)for(;pe&&Y(Ee,1);){var tt=ge,Ke=xe,Bt=se,mt=1,Qe=Bt.m,Ve=Bt.gc[Bt.ab],Nt=Y(Qe,2);if(Bt.Oc&1<<Nt)pe=0;else{switch(Bt.Oc|=1<<Nt,Ve.hc=Nt,Ve.Ea=tt[0],Ve.nc=Ke[0],Ve.K=[null],++Bt.ab,t(4>=Bt.ab),Nt){case 0:case 1:Ve.b=Y(Qe,3)+2,mt=$e(Me(Ve.Ea,Ve.b),Me(Ve.nc,Ve.b),0,Bt,Ve.K),Ve.K=Ve.K[0];break;case 3:var Tt,kt=Y(Qe,8)+1,rr=16<kt?0:4<kt?1:2<kt?2:3;if(tt[0]=Me(Ve.Ea,rr),Ve.b=rr,Tt=mt=$e(kt,1,0,Bt,Ve.K)){var Yt,br=kt,er=Ve,Dn=1<<(8>>er.b),$n=s(Dn);if($n==null)Tt=0;else{var fn=er.K[0],ln=er.w;for($n[0]=er.K[0][0],Yt=1;Yt<1*br;++Yt)$n[Yt]=We(fn[ln+Yt],$n[Yt-1]);for(;Yt<4*Dn;++Yt)$n[Yt]=0;er.K[0]=null,er.K[0]=$n,Tt=1}}mt=Tt;break;case 2:break;default:t(0)}pe=mt}}if(ge=ge[0],xe=xe[0],pe&&Y(Ee,1)&&!(pe=1<=(st=Y(Ee,4))&&11>=st)){se.a=3;break e}var ra;if(ra=pe)t:{var Gn,Yr,ua,kr=se,Ur=ge,On=xe,Pn=st,ai=ee,Ps=kr.m,rs=kr.s,ns=[null],vs=1,Ml=0,Kn=Nf[Pn];r:for(;;){if(ai&&Y(Ps,1)){var bs=Y(Ps,3)+2,gc=Me(Ur,bs),xA=Me(On,bs),jf=gc*xA;if(!$e(gc,xA,0,kr,ns))break r;for(ns=ns[0],rs.xc=bs,Gn=0;Gn<jf;++Gn){var vA=ns[Gn]>>8&65535;ns[Gn]=vA,vA>=vs&&(vs=vA+1)}}if(Ps.h)break r;for(Yr=0;5>Yr;++Yr){var Ba=ul[Yr];!Yr&&0<Pn&&(Ba+=1<<Pn),Ml<Ba&&(Ml=Ba)}var np=i(vs*Kn,O),nx=vs,io=i(nx,M);if(io==null)var Ra=null;else t(65536>=nx),Ra=io;var Bf=s(Ml);if(Ra==null||Bf==null||np==null){kr.a=1;break r}var bA=np;for(Gn=ua=0;Gn<vs;++Gn){var Fo=Ra[Gn],yA=Fo.G,Oo=Fo.H,ap=0,t0=1,ax=0;for(Yr=0;5>Yr;++Yr){Ba=ul[Yr],yA[Yr]=bA,Oo[Yr]=ua,!Yr&&0<Pn&&(Ba+=1<<Pn);a:{var sp,sx=Ba,ip=kr,r0=Bf,SE=bA,kE=ua,op=0,dd=ip.m,fj=Y(dd,1);if(a(r0,0,0,sx),fj){var jE=Y(dd,1)+1,BE=Y(dd,1),hb=Y(dd,BE==0?1:8);r0[hb]=1,jE==2&&(r0[hb=Y(dd,8)]=1);var n0=1}else{var mb=s(19),pb=Y(dd,4)+4;if(19<pb){ip.a=3;var lp=0;break a}for(sp=0;sp<pb;++sp)mb[id[sp]]=Y(dd,3);var ix=void 0,a0=void 0,TE=ip,IE=mb,Ad=sx,cp=r0,ox=0,xc=TE.m,s0=8,gb=i(128,O);n:for(;D(gb,0,7,IE,19);){if(Y(xc,1)){var FE=2+2*Y(xc,3);if((ix=2+Y(xc,FE))>Ad)break n}else ix=Ad;for(a0=0;a0<Ad&&ix--;){ae(xc);var xb=gb[0+(127&H(xc))];Z(xc,xc.u+xb.g);var Tf=xb.value;if(16>Tf)cp[a0++]=Tf,Tf!=0&&(s0=Tf);else{var OE=Tf==16,vb=Tf-16,bb=Ll[vb],yb=Y(xc,Jg[vb])+bb;if(a0+yb>Ad)break n;for(var DE=OE?s0:0;0<yb--;)cp[a0++]=DE}}ox=1;break n}ox||(TE.a=3),n0=ox}(n0=n0&&!dd.h)&&(op=D(SE,kE,8,r0,sx)),n0&&op!=0?lp=op:(ip.a=3,lp=0)}if(lp==0)break r;if(t0&&_f[Yr]==1&&(t0=bA[ua].g==0),ap+=bA[ua].g,ua+=lp,3>=Yr){var If,lx=Bf[0];for(If=1;If<Ba;++If)Bf[If]>lx&&(lx=Bf[If]);ax+=lx}}if(Fo.nd=t0,Fo.Qb=0,t0&&(Fo.qb=(yA[3][Oo[3]+0].value<<24|yA[1][Oo[1]+0].value<<16|yA[2][Oo[2]+0].value)>>>0,ap==0&&256>yA[0][Oo[0]+0].value&&(Fo.Qb=1,Fo.qb+=yA[0][Oo[0]+0].value<<8)),Fo.jc=!Fo.Qb&&6>ax,Fo.jc){var up,fd=Fo;for(up=0;up<Is;++up){var hu=up,hd=fd.pd[hu],dp=fd.G[0][fd.H[0]+hu];256<=dp.value?(hd.g=dp.g+256,hd.value=dp.value):(hd.g=0,hd.value=0,hu>>=Zr(dp,8,hd),hu>>=Zr(fd.G[1][fd.H[1]+hu],16,hd),hu>>=Zr(fd.G[2][fd.H[2]+hu],0,hd),Zr(fd.G[3][fd.H[3]+hu],24,hd))}}}rs.vc=ns,rs.Wb=vs,rs.Ya=Ra,rs.yc=np,ra=1;break t}ra=0}if(!(pe=ra)){se.a=3;break e}if(0<st){if(ke.ua=1<<st,!Fe(ke.Wa,st)){se.a=1,pe=0;break e}}else ke.ua=0;var Ap=se,wb=ge,PE=xe,Eb=Ap.s,Cb=Eb.xc;if(Ap.c=wb,Ap.i=PE,Eb.md=Me(wb,Cb),Eb.wc=Cb==0?-1:(1<<Cb)-1,ee){se.xb=EE;break e}if((Ue=s(ge*xe))==null){se.a=1,pe=0;break e}pe=(pe=Be(se,Ue,0,ge,xe,xe,null))&&!Ee.h;break e}return pe?(de!=null?de[0]=Ue:(t(Ue==null),t(ee)),se.$=0,ee||Ye(ke)):Ye(ke),pe}function rt(T,Q){var ee=T.c*T.i,se=ee+Q+16*Q;return t(T.c<=Q),T.V=s(se),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+ee+Q,1)}function it(T,Q){var ee=T.C,se=Q-ee,de=T.V,pe=T.Ba+T.c*ee;for(t(Q<=T.l.o);0<se;){var ge=16<se?16:se,xe=T.l.ma,Ee=T.l.width,ke=Ee*ge,Ue=xe.ca,st=xe.tb+Ee*ee,tt=T.Ta,Ke=T.Ua;he(T,ge,de,pe),va(tt,Ke,Ue,st,ke),we(xe,ee,ee+ge,Ue,st,Ee),se-=ge,de+=ge*T.c,ee+=ge}t(ee==Q),T.C=T.Ma=Q}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var T=[];return function Q(ee,se,de){for(var pe=de[se],ge=0;ge<pe&&(ee.push(de.length>se+1?[]:0),!(de.length<se+1));ge++)Q(ee[ge],se+1,de)}(T,0,[3,11]),T}()}function Gt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function Sr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Co(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new hs),this.aa=0,this.l=new Ts}function ms(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Zs(){this.cb=this.a=0,this.sc="",this.m=new te,this.Od=new Ft,this.Kc=new Vt,this.ed=new Sr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new Co,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,te),this.ia=0,this.pb=i(4,An),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ms),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hs),this.L=this.aa=0,this.gd=o([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gi(){var T=new Zs;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Fs||(Fs=Hh)),T}function xa(T,Q,ee){return T.a==0&&(T.a=Q,T.sc=ee,T.cb=0),0}function ei(T,Q,ee){return 3<=ee&&T[Q+0]==157&&T[Q+1]==1&&T[Q+2]==42}function Xd(T,Q){if(T==null)return 0;if(T.a=0,T.sc="OK",Q==null)return xa(T,2,"null VP8Io passed to VP8GetHeaders()");var ee=Q.data,se=Q.w,de=Q.ha;if(4>de)return xa(T,7,"Truncated header.");var pe=ee[se+0]|ee[se+1]<<8|ee[se+2]<<16,ge=T.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return xa(T,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(T,4,"Frame not displayable.");se+=3,de-=3;var xe=T.Kc;if(ge.Rb){if(7>de)return xa(T,7,"cannot parse picture header");if(!ei(ee,se,de))return xa(T,3,"Bad code word");xe.c=16383&(ee[se+4]<<8|ee[se+3]),xe.Td=ee[se+4]>>6,xe.i=16383&(ee[se+6]<<8|ee[se+5]),xe.Ud=ee[se+6]>>6,se+=7,de-=7,T.za=xe.c+15>>4,T.Ub=xe.i+15>>4,Q.width=xe.c,Q.height=xe.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((pe=T.Pa).jb,0,255,pe.jb.length),t((pe=T.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,a(pe.Zb,0,0,pe.Zb.length),a(pe.Lb,0,0,pe.Lb)}if(ge.ub>de)return xa(T,7,"bad partition length");J(pe=T.m,ee,se,ge.ub),se+=ge.ub,de-=ge.ub,ge.Rb&&(xe.Ld=ie(pe),xe.Kd=ie(pe)),xe=T.Qa;var Ee,ke=T.Pa;if(t(pe!=null),t(xe!=null),xe.Cb=ie(pe),xe.Cb){if(xe.Bb=ie(pe),ie(pe)){for(xe.Fb=ie(pe),Ee=0;4>Ee;++Ee)xe.Zb[Ee]=ie(pe)?K(pe,7):0;for(Ee=0;4>Ee;++Ee)xe.Lb[Ee]=ie(pe)?K(pe,6):0}if(xe.Bb)for(Ee=0;3>Ee;++Ee)ke.jb[Ee]=ie(pe)?V(pe,8):255}else xe.Bb=0;if(pe.Ka)return xa(T,3,"cannot parse segment header");if((xe=T.ed).zd=ie(pe),xe.Tb=V(pe,6),xe.wb=V(pe,3),xe.Pc=ie(pe),xe.Pc&&ie(pe)){for(ke=0;4>ke;++ke)ie(pe)&&(xe.vd[ke]=K(pe,6));for(ke=0;4>ke;++ke)ie(pe)&&(xe.od[ke]=K(pe,6))}if(T.L=xe.Tb==0?0:xe.zd?1:2,pe.Ka)return xa(T,3,"cannot parse filter header");var Ue=de;if(de=Ee=se,se=Ee+Ue,xe=Ue,T.Xb=(1<<V(T.m,2))-1,Ue<3*(ke=T.Xb))ee=7;else{for(Ee+=3*ke,xe-=3*ke,Ue=0;Ue<ke;++Ue){var st=ee[de+0]|ee[de+1]<<8|ee[de+2]<<16;st>xe&&(st=xe),J(T.Jc[+Ue],ee,Ee,st),Ee+=st,xe-=st,de+=3}J(T.Jc[+ke],ee,Ee,xe),ee=Ee<se?0:5}if(ee!=0)return xa(T,ee,"cannot parse partitions");for(ee=V(Ee=T.m,7),de=ie(Ee)?K(Ee,4):0,se=ie(Ee)?K(Ee,4):0,xe=ie(Ee)?K(Ee,4):0,ke=ie(Ee)?K(Ee,4):0,Ee=ie(Ee)?K(Ee,4):0,Ue=T.Qa,st=0;4>st;++st){if(Ue.Cb){var tt=Ue.Zb[st];Ue.Fb||(tt+=ee)}else{if(0<st){T.pb[st]=T.pb[0];continue}tt=ee}var Ke=T.pb[st];Ke.Sc[0]=Zm[zn(tt+de,127)],Ke.Sc[1]=ep[zn(tt+0,127)],Ke.Eb[0]=2*Zm[zn(tt+se,127)],Ke.Eb[1]=101581*ep[zn(tt+xe,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=Zm[zn(tt+ke,117)],Ke.Qc[1]=ep[zn(tt+Ee,127)],Ke.lc=tt+Ee}if(!ge.Rb)return xa(T,4,"Not a key frame.");for(ie(pe),ge=T.Pa,ee=0;4>ee;++ee){for(de=0;8>de;++de)for(se=0;3>se;++se)for(xe=0;11>xe;++xe)ke=ce(pe,Sf[ee][de][se][xe])?V(pe,8):uu[ee][de][se][xe],ge.Wc[ee][de].Yb[se][xe]=ke;for(de=0;17>de;++de)ge.Xc[ee][de]=ge.Wc[ee][wE[de]]}return T.kc=ie(pe),T.kc&&(T.Bd=V(pe,8)),T.cb=1}function Hh(T,Q,ee,se,de,pe,ge){var xe=Q[de].Yb[ee];for(ee=0;16>de;++de){if(!ce(T,xe[ee+0]))return de;for(;!ce(T,xe[ee+1]);)if(xe=Q[++de].Yb[0],ee=0,de==16)return 16;var Ee=Q[de+1].Yb;if(ce(T,xe[ee+2])){var ke=T,Ue=0;if(ce(ke,(tt=xe)[(st=ee)+3]))if(ce(ke,tt[st+6])){for(xe=0,st=2*(Ue=ce(ke,tt[st+8]))+(tt=ce(ke,tt[st+9+Ue])),Ue=0,tt=qa[st];tt[xe];++xe)Ue+=Ue+ce(ke,tt[xe]);Ue+=3+(8<<st)}else ce(ke,tt[st+7])?(Ue=7+2*ce(ke,165),Ue+=ce(ke,145)):Ue=5+ce(ke,159);else Ue=ce(ke,tt[st+4])?3+ce(ke,tt[st+5]):2;xe=Ee[2]}else Ue=1,xe=Ee[1];Ee=ge+Mn[de],0>(ke=T).b&&le(ke);var st,tt=ke.b,Ke=(st=ke.Ca>>1)-(ke.I>>tt)>>31;--ke.b,ke.Ca+=Ke,ke.Ca|=1,ke.I-=(st+1&Ke)<<tt,pe[Ee]=((Ue^Ke)-Ke)*se[(0<de)+0]}return 16}function Wc(T){var Q=T.rb[T.sb-1];Q.la=0,Q.Na=0,a(T.zc,0,0,T.zc.length),T.ja=0}function df(T,Q){if(T==null)return 0;if(Q==null)return xa(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Xd(T,Q))return 0;if(t(T.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(T.L=0);var ee=ud[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=Q.v-ee>>4,T.zb=Q.j-ee>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=Q.o+15+ee>>4,T.Hb=Q.va+15+ee>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var se=T.ed;for(ee=0;4>ee;++ee){var de;if(T.Qa.Cb){var pe=T.Qa.Lb[ee];T.Qa.Fb||(pe+=se.Tb)}else pe=se.Tb;for(de=0;1>=de;++de){var ge=T.gd[ee][de],xe=pe;if(se.Pc&&(xe+=se.vd[0],de&&(xe+=se.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ee=xe;0<se.wb&&(Ee=4<se.wb?Ee>>2:Ee>>1)>9-se.wb&&(Ee=9-se.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*xe+Ee,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=de}}}ee=0}else xa(T,6,"Frame setup failed"),ee=T.a;if(ee=ee==0){if(ee){T.$c=0,0<T.Aa||(T.Ic=_E);e:{ee=T.Ic,se=4*(Ee=T.za);var ke=32*Ee,Ue=Ee+1,st=0<T.L?Ee*(0<T.Aa?2:1):0,tt=(T.Aa==2?2:1)*Ee;if((ge=se+832+(de=3*(16*ee+ud[T.L])/2*ke)+(pe=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ge)ee=0;else{if(ge>T.Vb){if(T.Vb=0,T.Ec=s(ge),T.Fc=0,T.Ec==null){ee=xa(T,1,"no memory during frame initialization.");break e}T.Vb=ge}ge=T.Ec,xe=T.Fc,T.Ac=ge,T.Bc=xe,xe+=se,T.Gd=i(ke,ms),T.Hd=0,T.rb=i(Ue+1,on),T.sb=1,T.wa=st?i(st,sn):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Ee),t(!0),T.oc=ge,T.pc=xe,xe+=832,T.ya=i(tt,hs),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Ee),T.R=16*Ee,T.B=8*Ee,Ee=(ke=ud[T.L])*T.R,ke=ke/2*T.B,T.sa=ge,T.ta=xe+Ee,T.qa=T.sa,T.ra=T.ta+16*ee*T.R+ke,T.Ha=T.qa,T.Ia=T.ra+8*ee*T.B+ke,T.$c=0,xe+=de,T.mb=pe?ge:null,T.nb=pe?xe:null,t(xe+pe<=T.Fc+T.Vb),Wc(T),a(T.Ac,T.Bc,0,se),ee=1}}if(ee){if(Q.ka=0,Q.y=T.sa,Q.O=T.ta,Q.f=T.qa,Q.N=T.ra,Q.ea=T.Ha,Q.Vd=T.Ia,Q.fa=T.R,Q.Rc=T.B,Q.F=null,Q.J=0,!nd){for(ee=-255;255>=ee;++ee)ts[255+ee]=0>ee?-ee:ee;for(ee=-1020;1020>=ee;++ee)Pl[1020+ee]=-128>ee?-128:127<ee?127:ee;for(ee=-112;112>=ee;++ee)AA[112+ee]=-16>ee?-16:15<ee?15:ee;for(ee=-255;510>=ee;++ee)fA[255+ee]=0>ee?0:255<ee?255:ee;nd=1}ou=_o,mc=Yc,pc=Sl,xs=Vn,Io=Jc,Ga=Xc,bf=ru,lu=Ac,Wh=eA,lA=pf,cA=Zd,uA=Xu,yf=Yu,Xh=nu,dA=ll,rd=Di,wf=gs,Ka=$h,so[0]=Fi,so[1]=Vh,so[2]=Bl,so[3]=zh,so[4]=No,so[5]=Tl,so[6]=no,so[7]=So,so[8]=dc,so[9]=Zc,ld[0]=kl,ld[1]=ff,ld[2]=lc,ld[3]=Jd,ld[4]=ca,ld[5]=uc,ld[6]=jl,dl[0]=Il,dl[1]=Af,dl[2]=hf,dl[3]=ko,dl[4]=bn,dl[5]=ps,dl[6]=eu,ee=1}else ee=0}ee&&(ee=function(Ke,Bt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var mt,Qe=Ke.Jc[Ke.M&Ke.Xb],Ve=Ke.m,Nt=Ke;for(mt=0;mt<Nt.za;++mt){var Tt=Ve,kt=Nt,rr=kt.Ac,Yt=kt.Bc+4*mt,br=kt.zc,er=kt.ya[kt.aa+mt];if(kt.Qa.Bb?er.$b=ce(Tt,kt.Pa.jb[0])?2+ce(Tt,kt.Pa.jb[2]):ce(Tt,kt.Pa.jb[1]):er.$b=0,kt.kc&&(er.Ad=ce(Tt,kt.Bd)),er.Za=!ce(Tt,145)+0,er.Za){var Dn=er.Ob,$n=0;for(kt=0;4>kt;++kt){var fn,ln=br[0+kt];for(fn=0;4>fn;++fn){ln=db[rr[Yt+fn]][ln];for(var ra=mA[ce(Tt,ln[0])];0<ra;)ra=mA[2*ra+ce(Tt,ln[ra])];ln=-ra,rr[Yt+fn]=ln}n(Dn,$n,rr,Yt,4),$n+=4,br[0+kt]=ln}}else ln=ce(Tt,156)?ce(Tt,128)?1:3:ce(Tt,163)?2:0,er.Ob[0]=ln,a(rr,Yt,ln,4),a(br,0,ln,4);er.Dd=ce(Tt,142)?ce(Tt,114)?ce(Tt,183)?1:3:2:0}if(Nt.m.Ka)return xa(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(Nt=Qe,Tt=(Ve=Ke).rb[Ve.sb-1],rr=Ve.rb[Ve.sb+Ve.ja],mt=Ve.ya[Ve.aa+Ve.ja],Yt=Ve.kc?mt.Ad:0)Tt.la=rr.la=0,mt.Za||(Tt.Na=rr.Na=0),mt.Hc=0,mt.Gc=0,mt.ia=0;else{var Gn,Yr;if(Tt=rr,rr=Nt,Yt=Ve.Pa.Xc,br=Ve.ya[Ve.aa+Ve.ja],er=Ve.pb[br.$b],kt=br.ad,Dn=0,$n=Ve.rb[Ve.sb-1],ln=fn=0,a(kt,Dn,0,384),br.Za)var ua=0,kr=Yt[3];else{ra=s(16);var Ur=Tt.Na+$n.Na;if(Ur=Fs(rr,Yt[1],Ur,er.Eb,0,ra,0),Tt.Na=$n.Na=(0<Ur)+0,1<Ur)ou(ra,0,kt,Dn);else{var On=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)kt[Dn+ra]=On}ua=1,kr=Yt[0]}var Pn=15&Tt.la,ai=15&$n.la;for(ra=0;4>ra;++ra){var Ps=1&ai;for(On=Yr=0;4>On;++On)Pn=Pn>>1|(Ps=(Ur=Fs(rr,kr,Ur=Ps+(1&Pn),er.Sc,ua,kt,Dn))>ua)<<7,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Dn+0]!=0),Dn+=16;Pn>>=4,ai=ai>>1|Ps<<7,fn=(fn<<8|Yr)>>>0}for(kr=Pn,ua=ai>>4,Gn=0;4>Gn;Gn+=2){for(Yr=0,Pn=Tt.la>>4+Gn,ai=$n.la>>4+Gn,ra=0;2>ra;++ra){for(Ps=1&ai,On=0;2>On;++On)Ur=Ps+(1&Pn),Pn=Pn>>1|(Ps=0<(Ur=Fs(rr,Yt[2],Ur,er.Qc,0,kt,Dn)))<<3,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Dn+0]!=0),Dn+=16;Pn>>=2,ai=ai>>1|Ps<<5}ln|=Yr<<4*Gn,kr|=Pn<<4<<Gn,ua|=(240&ai)<<Gn}Tt.la=kr,$n.la=ua,br.Hc=fn,br.Gc=ln,br.ia=43690&ln?0:er.ia,Yt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[mt.$b][mt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Yt),Nt.Ka)return xa(Ke,7,"Premature end-of-file encountered.")}if(Wc(Ke),Ve=Bt,Nt=1,mt=(Qe=Ke).D,Tt=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(mt.M=Qe.M,mt.uc=Tt,jo(Qe,mt),Nt=1,mt=(Yr=Qe.D).Nb,Tt=(ln=ud[Qe.L])*Qe.R,rr=ln/2*Qe.B,ra=16*mt*Qe.R,On=8*mt*Qe.B,Yt=Qe.sa,br=Qe.ta-Tt+ra,er=Qe.qa,kt=Qe.ra-rr+On,Dn=Qe.Ha,$n=Qe.Ia-rr+On,ai=(Pn=Yr.M)==0,fn=Pn>=Qe.Va-1,Qe.Aa==2&&jo(Qe,Yr),Yr.uc)for(Ps=(Ur=Qe).D.M,t(Ur.D.uc),Yr=Ur.yb;Yr<Ur.Hb;++Yr){ua=Yr,kr=Ps;var rs=(ns=(Ba=Ur).D).Nb;Gn=Ba.R;var ns=ns.wa[ns.Y+ua],vs=Ba.sa,Ml=Ba.ta+16*rs*Gn+16*ua,Kn=ns.dd,bs=ns.tc;if(bs!=0)if(t(3<=bs),Ba.L==1)0<ua&&rd(vs,Ml,Gn,bs+4),ns.La&&Ka(vs,Ml,Gn,bs),0<kr&&dA(vs,Ml,Gn,bs+4),ns.La&&wf(vs,Ml,Gn,bs);else{var gc=Ba.B,xA=Ba.qa,jf=Ba.ra+8*rs*gc+8*ua,vA=Ba.Ha,Ba=Ba.Ia+8*rs*gc+8*ua;rs=ns.ld,0<ua&&(lu(vs,Ml,Gn,bs+4,Kn,rs),lA(xA,jf,vA,Ba,gc,bs+4,Kn,rs)),ns.La&&(uA(vs,Ml,Gn,bs,Kn,rs),Xh(xA,jf,vA,Ba,gc,bs,Kn,rs)),0<kr&&(bf(vs,Ml,Gn,bs+4,Kn,rs),Wh(xA,jf,vA,Ba,gc,bs+4,Kn,rs)),ns.La&&(cA(vs,Ml,Gn,bs,Kn,rs),yf(xA,jf,vA,Ba,gc,bs,Kn,rs))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Yr=16*Pn,Pn=16*(Pn+1),ai?(Ve.y=Qe.sa,Ve.O=Qe.ta+ra,Ve.f=Qe.qa,Ve.N=Qe.ra+On,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+On):(Yr-=ln,Ve.y=Yt,Ve.O=br,Ve.f=er,Ve.N=kt,Ve.ea=Dn,Ve.W=$n),fn||(Pn-=ln),Pn>Ve.o&&(Pn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Yr<Pn&&(Ve.J=rA(Qe,Ve,Yr,Pn-Yr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){Nt=xa(Qe,3,"Could not decode alpha data.");break e}Yr<Ve.j&&(ln=Ve.j-Yr,Yr=Ve.j,t(!(1&ln)),Ve.O+=Qe.R*ln,Ve.N+=Qe.B*(ln>>1),Ve.W+=Qe.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),Yr<Pn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Yr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Pn-Yr,Nt=Ve.put(Ve))}mt+1!=Qe.Ic||fn||(n(Qe.sa,Qe.ta-Tt,Yt,br+16*Qe.R,Tt),n(Qe.qa,Qe.ra-rr,er,kt+8*Qe.B,rr),n(Qe.Ha,Qe.Ia-rr,Dn,$n+8*Qe.B,rr))}if(!Nt)return xa(Ke,6,"Output aborted.")}return 1}(T,Q)),Q.bc!=null&&Q.bc(Q),ee&=1}return ee?(T.cb=0,ee):0}function xi(T,Q,ee,se,de){de=T[Q+ee+32*se]+(de>>3),T[Q+ee+32*se]=-256&de?0>de?0:255:de}function Yd(T,Q,ee,se,de,pe){xi(T,Q,0,ee,se+de),xi(T,Q,1,ee,se+pe),xi(T,Q,2,ee,se-pe),xi(T,Q,3,ee,se-de)}function Fn(T){return(20091*T>>16)+T}function vi(T,Q,ee,se){var de,pe=0,ge=s(16);for(de=0;4>de;++de){var xe=T[Q+0]+T[Q+8],Ee=T[Q+0]-T[Q+8],ke=(35468*T[Q+4]>>16)-Fn(T[Q+12]),Ue=Fn(T[Q+4])+(35468*T[Q+12]>>16);ge[pe+0]=xe+Ue,ge[pe+1]=Ee+ke,ge[pe+2]=Ee-ke,ge[pe+3]=xe-Ue,pe+=4,Q++}for(de=pe=0;4>de;++de)xe=(T=ge[pe+0]+4)+ge[pe+8],Ee=T-ge[pe+8],ke=(35468*ge[pe+4]>>16)-Fn(ge[pe+12]),xi(ee,se,0,0,xe+(Ue=Fn(ge[pe+4])+(35468*ge[pe+12]>>16))),xi(ee,se,1,0,Ee+ke),xi(ee,se,2,0,Ee-ke),xi(ee,se,3,0,xe-Ue),pe++,se+=32}function Xc(T,Q,ee,se){var de=T[Q+0]+4,pe=35468*T[Q+4]>>16,ge=Fn(T[Q+4]),xe=35468*T[Q+1]>>16;Yd(ee,se,0,de+ge,T=Fn(T[Q+1]),xe),Yd(ee,se,1,de+pe,T,xe),Yd(ee,se,2,de-pe,T,xe),Yd(ee,se,3,de-ge,T,xe)}function Yc(T,Q,ee,se,de){vi(T,Q,ee,se),de&&vi(T,Q+16,ee,se+4)}function Sl(T,Q,ee,se){mc(T,Q+0,ee,se,1),mc(T,Q+32,ee,se+128,1)}function Vn(T,Q,ee,se){var de;for(T=T[Q+0]+4,de=0;4>de;++de)for(Q=0;4>Q;++Q)xi(ee,se,Q,de,T)}function Jc(T,Q,ee,se){T[Q+0]&&xs(T,Q+0,ee,se),T[Q+16]&&xs(T,Q+16,ee,se+4),T[Q+32]&&xs(T,Q+32,ee,se+128),T[Q+48]&&xs(T,Q+48,ee,se+128+4)}function _o(T,Q,ee,se){var de,pe=s(16);for(de=0;4>de;++de){var ge=T[Q+0+de]+T[Q+12+de],xe=T[Q+4+de]+T[Q+8+de],Ee=T[Q+4+de]-T[Q+8+de],ke=T[Q+0+de]-T[Q+12+de];pe[0+de]=ge+xe,pe[8+de]=ge-xe,pe[4+de]=ke+Ee,pe[12+de]=ke-Ee}for(de=0;4>de;++de)ge=(T=pe[0+4*de]+3)+pe[3+4*de],xe=pe[1+4*de]+pe[2+4*de],Ee=pe[1+4*de]-pe[2+4*de],ke=T-pe[3+4*de],ee[se+0]=ge+xe>>3,ee[se+16]=ke+Ee>>3,ee[se+32]=ge-xe>>3,ee[se+48]=ke-Ee>>3,se+=64}function oc(T,Q,ee){var se,de=Q-32,pe=ri,ge=255-T[de-1];for(se=0;se<ee;++se){var xe,Ee=pe,ke=ge+T[Q-1];for(xe=0;xe<ee;++xe)T[Q+xe]=Ee[ke+T[de+xe]];Q+=32}}function Vh(T,Q){oc(T,Q,4)}function Af(T,Q){oc(T,Q,8)}function ff(T,Q){oc(T,Q,16)}function lc(T,Q){var ee;for(ee=0;16>ee;++ee)n(T,Q+32*ee,T,Q-32,16)}function Jd(T,Q){var ee;for(ee=16;0<ee;--ee)a(T,Q,T[Q-1],16),Q+=32}function cc(T,Q,ee){var se;for(se=0;16>se;++se)a(Q,ee+32*se,T,16)}function kl(T,Q){var ee,se=16;for(ee=0;16>ee;++ee)se+=T[Q-1+32*ee]+T[Q+ee-32];cc(se>>5,T,Q)}function ca(T,Q){var ee,se=8;for(ee=0;16>ee;++ee)se+=T[Q-1+32*ee];cc(se>>4,T,Q)}function uc(T,Q){var ee,se=8;for(ee=0;16>ee;++ee)se+=T[Q+ee-32];cc(se>>4,T,Q)}function jl(T,Q){cc(128,T,Q)}function Ir(T,Q,ee){return T+2*Q+ee+2>>2}function Bl(T,Q){var ee,se=Q-32;for(se=new Uint8Array([Ir(T[se-1],T[se+0],T[se+1]),Ir(T[se+0],T[se+1],T[se+2]),Ir(T[se+1],T[se+2],T[se+3]),Ir(T[se+2],T[se+3],T[se+4])]),ee=0;4>ee;++ee)n(T,Q+32*ee,se,0,se.length)}function zh(T,Q){var ee=T[Q-1],se=T[Q-1+32],de=T[Q-1+64],pe=T[Q-1+96];fe(T,Q+0,16843009*Ir(T[Q-1-32],ee,se)),fe(T,Q+32,16843009*Ir(ee,se,de)),fe(T,Q+64,16843009*Ir(se,de,pe)),fe(T,Q+96,16843009*Ir(de,pe,pe))}function Fi(T,Q){var ee,se=4;for(ee=0;4>ee;++ee)se+=T[Q+ee-32]+T[Q-1+32*ee];for(se>>=3,ee=0;4>ee;++ee)a(T,Q+32*ee,se,4)}function No(T,Q){var ee=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],pe=T[Q-1-32],ge=T[Q+0-32],xe=T[Q+1-32],Ee=T[Q+2-32],ke=T[Q+3-32];T[Q+0+96]=Ir(se,de,T[Q-1+96]),T[Q+1+96]=T[Q+0+64]=Ir(ee,se,de),T[Q+2+96]=T[Q+1+64]=T[Q+0+32]=Ir(pe,ee,se),T[Q+3+96]=T[Q+2+64]=T[Q+1+32]=T[Q+0+0]=Ir(ge,pe,ee),T[Q+3+64]=T[Q+2+32]=T[Q+1+0]=Ir(xe,ge,pe),T[Q+3+32]=T[Q+2+0]=Ir(Ee,xe,ge),T[Q+3+0]=Ir(ke,Ee,xe)}function no(T,Q){var ee=T[Q+1-32],se=T[Q+2-32],de=T[Q+3-32],pe=T[Q+4-32],ge=T[Q+5-32],xe=T[Q+6-32],Ee=T[Q+7-32];T[Q+0+0]=Ir(T[Q+0-32],ee,se),T[Q+1+0]=T[Q+0+32]=Ir(ee,se,de),T[Q+2+0]=T[Q+1+32]=T[Q+0+64]=Ir(se,de,pe),T[Q+3+0]=T[Q+2+32]=T[Q+1+64]=T[Q+0+96]=Ir(de,pe,ge),T[Q+3+32]=T[Q+2+64]=T[Q+1+96]=Ir(pe,ge,xe),T[Q+3+64]=T[Q+2+96]=Ir(ge,xe,Ee),T[Q+3+96]=Ir(xe,Ee,Ee)}function Tl(T,Q){var ee=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],pe=T[Q-1-32],ge=T[Q+0-32],xe=T[Q+1-32],Ee=T[Q+2-32],ke=T[Q+3-32];T[Q+0+0]=T[Q+1+64]=pe+ge+1>>1,T[Q+1+0]=T[Q+2+64]=ge+xe+1>>1,T[Q+2+0]=T[Q+3+64]=xe+Ee+1>>1,T[Q+3+0]=Ee+ke+1>>1,T[Q+0+96]=Ir(de,se,ee),T[Q+0+64]=Ir(se,ee,pe),T[Q+0+32]=T[Q+1+96]=Ir(ee,pe,ge),T[Q+1+32]=T[Q+2+96]=Ir(pe,ge,xe),T[Q+2+32]=T[Q+3+96]=Ir(ge,xe,Ee),T[Q+3+32]=Ir(xe,Ee,ke)}function So(T,Q){var ee=T[Q+0-32],se=T[Q+1-32],de=T[Q+2-32],pe=T[Q+3-32],ge=T[Q+4-32],xe=T[Q+5-32],Ee=T[Q+6-32],ke=T[Q+7-32];T[Q+0+0]=ee+se+1>>1,T[Q+1+0]=T[Q+0+64]=se+de+1>>1,T[Q+2+0]=T[Q+1+64]=de+pe+1>>1,T[Q+3+0]=T[Q+2+64]=pe+ge+1>>1,T[Q+0+32]=Ir(ee,se,de),T[Q+1+32]=T[Q+0+96]=Ir(se,de,pe),T[Q+2+32]=T[Q+1+96]=Ir(de,pe,ge),T[Q+3+32]=T[Q+2+96]=Ir(pe,ge,xe),T[Q+3+64]=Ir(ge,xe,Ee),T[Q+3+96]=Ir(xe,Ee,ke)}function Zc(T,Q){var ee=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],pe=T[Q-1+96];T[Q+0+0]=ee+se+1>>1,T[Q+2+0]=T[Q+0+32]=se+de+1>>1,T[Q+2+32]=T[Q+0+64]=de+pe+1>>1,T[Q+1+0]=Ir(ee,se,de),T[Q+3+0]=T[Q+1+32]=Ir(se,de,pe),T[Q+3+32]=T[Q+1+64]=Ir(de,pe,pe),T[Q+3+64]=T[Q+2+64]=T[Q+0+96]=T[Q+1+96]=T[Q+2+96]=T[Q+3+96]=pe}function dc(T,Q){var ee=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],pe=T[Q-1+96],ge=T[Q-1-32],xe=T[Q+0-32],Ee=T[Q+1-32],ke=T[Q+2-32];T[Q+0+0]=T[Q+2+32]=ee+ge+1>>1,T[Q+0+32]=T[Q+2+64]=se+ee+1>>1,T[Q+0+64]=T[Q+2+96]=de+se+1>>1,T[Q+0+96]=pe+de+1>>1,T[Q+3+0]=Ir(xe,Ee,ke),T[Q+2+0]=Ir(ge,xe,Ee),T[Q+1+0]=T[Q+3+32]=Ir(ee,ge,xe),T[Q+1+32]=T[Q+3+64]=Ir(se,ee,ge),T[Q+1+64]=T[Q+3+96]=Ir(de,se,ee),T[Q+1+96]=Ir(pe,de,se)}function hf(T,Q){var ee;for(ee=0;8>ee;++ee)n(T,Q+32*ee,T,Q-32,8)}function ko(T,Q){var ee;for(ee=0;8>ee;++ee)a(T,Q,T[Q-1],8),Q+=32}function Oi(T,Q,ee){var se;for(se=0;8>se;++se)a(Q,ee+32*se,T,8)}function Il(T,Q){var ee,se=8;for(ee=0;8>ee;++ee)se+=T[Q+ee-32]+T[Q-1+32*ee];Oi(se>>4,T,Q)}function ps(T,Q){var ee,se=4;for(ee=0;8>ee;++ee)se+=T[Q+ee-32];Oi(se>>3,T,Q)}function bn(T,Q){var ee,se=4;for(ee=0;8>ee;++ee)se+=T[Q-1+32*ee];Oi(se>>3,T,Q)}function eu(T,Q){Oi(128,T,Q)}function Fl(T,Q,ee){var se=T[Q-ee],de=T[Q+0],pe=3*(de-se)+Xg[1020+T[Q-2*ee]-T[Q+ee]],ge=Ef[112+(pe+4>>3)];T[Q-ee]=ri[255+se+Ef[112+(pe+3>>3)]],T[Q+0]=ri[255+de-ge]}function mf(T,Q,ee,se){var de=T[Q+0],pe=T[Q+ee];return Rl[255+T[Q-2*ee]-T[Q-ee]]>se||Rl[255+pe-de]>se}function qu(T,Q,ee,se){return 4*Rl[255+T[Q-ee]-T[Q+0]]+Rl[255+T[Q-2*ee]-T[Q+ee]]<=se}function Wu(T,Q,ee,se,de){var pe=T[Q-3*ee],ge=T[Q-2*ee],xe=T[Q-ee],Ee=T[Q+0],ke=T[Q+ee],Ue=T[Q+2*ee],st=T[Q+3*ee];return 4*Rl[255+xe-Ee]+Rl[255+ge-ke]>se?0:Rl[255+T[Q-4*ee]-pe]<=de&&Rl[255+pe-ge]<=de&&Rl[255+ge-xe]<=de&&Rl[255+st-Ue]<=de&&Rl[255+Ue-ke]<=de&&Rl[255+ke-Ee]<=de}function ll(T,Q,ee,se){var de=2*se+1;for(se=0;16>se;++se)qu(T,Q+se,ee,de)&&Fl(T,Q+se,ee)}function Di(T,Q,ee,se){var de=2*se+1;for(se=0;16>se;++se)qu(T,Q+se*ee,1,de)&&Fl(T,Q+se*ee,1)}function gs(T,Q,ee,se){var de;for(de=3;0<de;--de)ll(T,Q+=4*ee,ee,se)}function $h(T,Q,ee,se){var de;for(de=3;0<de;--de)Di(T,Q+=4,ee,se)}function tu(T,Q,ee,se,de,pe,ge,xe){for(pe=2*pe+1;0<de--;){if(Wu(T,Q,ee,pe,ge))if(mf(T,Q,ee,xe))Fl(T,Q,ee);else{var Ee=T,ke=Q,Ue=ee,st=Ee[ke-2*Ue],tt=Ee[ke-Ue],Ke=Ee[ke+0],Bt=Ee[ke+Ue],mt=Ee[ke+2*Ue],Qe=27*(Nt=Xg[1020+3*(Ke-tt)+Xg[1020+st-Bt]])+63>>7,Ve=18*Nt+63>>7,Nt=9*Nt+63>>7;Ee[ke-3*Ue]=ri[255+Ee[ke-3*Ue]+Nt],Ee[ke-2*Ue]=ri[255+st+Ve],Ee[ke-Ue]=ri[255+tt+Qe],Ee[ke+0]=ri[255+Ke-Qe],Ee[ke+Ue]=ri[255+Bt-Ve],Ee[ke+2*Ue]=ri[255+mt-Nt]}Q+=se}}function bi(T,Q,ee,se,de,pe,ge,xe){for(pe=2*pe+1;0<de--;){if(Wu(T,Q,ee,pe,ge))if(mf(T,Q,ee,xe))Fl(T,Q,ee);else{var Ee=T,ke=Q,Ue=ee,st=Ee[ke-Ue],tt=Ee[ke+0],Ke=Ee[ke+Ue],Bt=Ef[112+((mt=3*(tt-st))+4>>3)],mt=Ef[112+(mt+3>>3)],Qe=Bt+1>>1;Ee[ke-2*Ue]=ri[255+Ee[ke-2*Ue]+Qe],Ee[ke-Ue]=ri[255+st+mt],Ee[ke+0]=ri[255+tt-Bt],Ee[ke+Ue]=ri[255+Ke-Qe]}Q+=se}}function ru(T,Q,ee,se,de,pe){tu(T,Q,ee,1,16,se,de,pe)}function Ac(T,Q,ee,se,de,pe){tu(T,Q,1,ee,16,se,de,pe)}function Zd(T,Q,ee,se,de,pe){var ge;for(ge=3;0<ge;--ge)bi(T,Q+=4*ee,ee,1,16,se,de,pe)}function Xu(T,Q,ee,se,de,pe){var ge;for(ge=3;0<ge;--ge)bi(T,Q+=4,1,ee,16,se,de,pe)}function eA(T,Q,ee,se,de,pe,ge,xe){tu(T,Q,de,1,8,pe,ge,xe),tu(ee,se,de,1,8,pe,ge,xe)}function pf(T,Q,ee,se,de,pe,ge,xe){tu(T,Q,1,de,8,pe,ge,xe),tu(ee,se,1,de,8,pe,ge,xe)}function Yu(T,Q,ee,se,de,pe,ge,xe){bi(T,Q+4*de,de,1,8,pe,ge,xe),bi(ee,se+4*de,de,1,8,pe,ge,xe)}function nu(T,Q,ee,se,de,pe,ge,xe){bi(T,Q+4,1,de,8,pe,ge,xe),bi(ee,se+4,1,de,8,pe,ge,xe)}function Ju(){this.ba=new la,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function au(){this.ua=0,this.Wa=new me,this.vb=new me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new O}function Gh(){this.xb=this.a=0,this.l=new Ts,this.ca=new la,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new au,this.ab=0,this.gc=i(4,Zu),this.Oc=0}function fc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function su(T,Q,ee,se,de,pe,ge){for(T=T==null?0:T[Q+0],Q=0;Q<ge;++Q)de[pe+Q]=T+ee[se+Q]&255,T=de[pe+Q]}function ed(T,Q,ee,se,de,pe,ge){var xe;if(T==null)su(null,null,ee,se,de,pe,ge);else for(xe=0;xe<ge;++xe)de[pe+xe]=T[Q+xe]+ee[se+xe]&255}function Pi(T,Q,ee,se,de,pe,ge){if(T==null)su(null,null,ee,se,de,pe,ge);else{var xe,Ee=T[Q+0],ke=Ee,Ue=Ee;for(xe=0;xe<ge;++xe)ke=Ue+(Ee=T[Q+xe])-ke,Ue=ee[se+xe]+(-256&ke?0>ke?0:255:ke)&255,ke=Ee,de[pe+xe]=Ue}}function rA(T,Q,ee,se){var de=Q.width,pe=Q.o;if(t(T!=null&&Q!=null),0>ee||0>=se||ee+se>pe)return null;if(!T.Cc){if(T.ga==null){var ge;if(T.ga=new fc,(ge=T.ga==null)||(ge=Q.width*Q.o,t(T.Gb.length==0),T.Gb=s(ge),T.Uc=0,T.Gb==null?ge=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ge=1),ge=!ge),!ge){ge=T.ga;var xe=T.Fa,Ee=T.P,ke=T.qc,Ue=T.mb,st=T.nb,tt=Ee+1,Ke=ke-1,Bt=ge.l;if(t(xe!=null&&Ue!=null&&Q!=null),du[0]=null,du[1]=su,du[2]=ed,du[3]=Pi,ge.ca=Ue,ge.tb=st,ge.c=Q.width,ge.i=Q.height,t(0<ge.c&&0<ge.i),1>=ke)Q=0;else if(ge.$a=xe[Ee+0]>>0&3,ge.Z=xe[Ee+0]>>2&3,ge.Lc=xe[Ee+0]>>4&3,Ee=xe[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)Q=0;else if(Bt.put=xt,Bt.ac=Je,Bt.bc=Et,Bt.ma=ge,Bt.width=Q.width,Bt.height=Q.height,Bt.Da=Q.Da,Bt.v=Q.v,Bt.va=Q.va,Bt.j=Q.j,Bt.o=Q.o,ge.$a)e:{t(ge.$a==1),Q=dt();t:for(;;){if(Q==null){Q=0;break e}if(t(ge!=null),ge.mc=Q,Q.c=ge.c,Q.i=ge.i,Q.l=ge.l,Q.l.ma=ge,Q.l.width=ge.c,Q.l.height=ge.i,Q.a=0,z(Q.m,xe,tt,Ke),!$e(ge.c,ge.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ce(Q.s)?(ge.ic=1,xe=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(xe),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(ge.ic=0,Q=rt(Q,ge.c)),!Q))break t;Q=1;break e}ge.mc=null,Q=0}else Q=Ke>=ge.c*ge.i;ge=!Q}if(ge)return null;T.ga.Lc!=1?T.Ga=0:se=pe-ee}t(T.ga!=null),t(ee+se<=pe);e:{if(Q=(xe=T.ga).c,pe=xe.l.o,xe.$a==0){if(tt=T.rc,Ke=T.Vc,Bt=T.Fa,Ee=T.P+1+ee*Q,ke=T.mb,Ue=T.nb+ee*Q,t(Ee<=T.P+T.qc),xe.Z!=0)for(t(du[xe.Z]!=null),ge=0;ge<se;++ge)du[xe.Z](tt,Ke,Bt,Ee,ke,Ue,Q),tt=ke,Ke=Ue,Ue+=Q,Ee+=Q;else for(ge=0;ge<se;++ge)n(ke,Ue,Bt,Ee,Q),tt=ke,Ke=Ue,Ue+=Q,Ee+=Q;T.rc=tt,T.Vc=Ke}else{if(t(xe.mc!=null),Q=ee+se,t((ge=xe.mc)!=null),t(Q<=ge.i),ge.C>=Q)Q=1;else if(xe.ic||Ge(),xe.ic){xe=ge.V,tt=ge.Ba,Ke=ge.c;var mt=ge.i,Qe=(Bt=1,Ee=ge.$/Ke,ke=ge.$%Ke,Ue=ge.m,st=ge.s,ge.$),Ve=Ke*mt,Nt=Ke*Q,Tt=st.wc,kt=Qe<Nt?qr(st,ke,Ee):null;t(Qe<=Ve),t(Q<=mt),t(Ce(st));t:for(;;){for(;!Ue.h&&Qe<Nt;){if(ke&Tt||(kt=qr(st,ke,Ee)),t(kt!=null),ae(Ue),256>(mt=Wr(kt.G[0],kt.H[0],Ue)))xe[tt+Qe]=mt,++Qe,++ke>=Ke&&(ke=0,++Ee<=Q&&!(Ee%16)&&Ne(ge,Ee));else{if(!(280>mt)){Bt=0;break t}mt=nr(mt-256,Ue);var rr,Yt=Wr(kt.G[4],kt.H[4],Ue);if(ae(Ue),!(Qe>=(Yt=xr(Ke,Yt=nr(Yt,Ue)))&&Ve-Qe>=mt)){Bt=0;break t}for(rr=0;rr<mt;++rr)xe[tt+Qe+rr]=xe[tt+Qe+rr-Yt];for(Qe+=mt,ke+=mt;ke>=Ke;)ke-=Ke,++Ee<=Q&&!(Ee%16)&&Ne(ge,Ee);Qe<Nt&&ke&Tt&&(kt=qr(st,ke,Ee))}t(Ue.h==X(Ue))}Ne(ge,Ee>Q?Q:Ee);break t}!Bt||Ue.h&&Qe<Ve?(Bt=0,ge.a=Ue.h?5:3):ge.$=Qe,Q=Bt}else Q=Be(ge,ge.V,ge.Ba,ge.c,ge.i,Q,it);if(!Q){se=0;break e}}ee+se>=pe&&(T.Cc=1),se=1}if(!se)return null;if(T.Cc&&((se=T.ga)!=null&&(se.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+ee*de}function W(T,Q,ee,se,de,pe){for(;0<de--;){var ge,xe=T,Ee=Q+(ee?1:0),ke=T,Ue=Q+(ee?0:3);for(ge=0;ge<se;++ge){var st=ke[Ue+4*ge];st!=255&&(st*=32897,xe[Ee+4*ge+0]=xe[Ee+4*ge+0]*st>>23,xe[Ee+4*ge+1]=xe[Ee+4*ge+1]*st>>23,xe[Ee+4*ge+2]=xe[Ee+4*ge+2]*st>>23)}Q+=pe}}function Ae(T,Q,ee,se,de){for(;0<se--;){var pe;for(pe=0;pe<ee;++pe){var ge=T[Q+2*pe+0],xe=15&(ke=T[Q+2*pe+1]),Ee=4369*xe,ke=(240&ke|ke>>4)*Ee>>16;T[Q+2*pe+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,T[Q+2*pe+1]=240&ke|xe}Q+=de}}function Oe(T,Q,ee,se,de,pe,ge,xe){var Ee,ke,Ue=255;for(ke=0;ke<de;++ke){for(Ee=0;Ee<se;++Ee){var st=T[Q+Ee];pe[ge+4*Ee]=st,Ue&=st}Q+=ee,ge+=xe}return Ue!=255}function Le(T,Q,ee,se,de){var pe;for(pe=0;pe<de;++pe)ee[se+pe]=T[Q+pe]>>8}function Ge(){cl=W,mn=Ae,pn=Oe,va=Le}function vt(T,Q,ee){N[T]=function(se,de,pe,ge,xe,Ee,ke,Ue,st,tt,Ke,Bt,mt,Qe,Ve,Nt,Tt){var kt,rr=Tt-1>>1,Yt=xe[Ee+0]|ke[Ue+0]<<16,br=st[tt+0]|Ke[Bt+0]<<16;t(se!=null);var er=3*Yt+br+131074>>2;for(Q(se[de+0],255&er,er>>16,mt,Qe),pe!=null&&(er=3*br+Yt+131074>>2,Q(pe[ge+0],255&er,er>>16,Ve,Nt)),kt=1;kt<=rr;++kt){var Dn=xe[Ee+kt]|ke[Ue+kt]<<16,$n=st[tt+kt]|Ke[Bt+kt]<<16,fn=Yt+Dn+br+$n+524296,ln=fn+2*(Dn+br)>>3;er=ln+Yt>>1,Yt=(fn=fn+2*(Yt+$n)>>3)+Dn>>1,Q(se[de+2*kt-1],255&er,er>>16,mt,Qe+(2*kt-1)*ee),Q(se[de+2*kt-0],255&Yt,Yt>>16,mt,Qe+(2*kt-0)*ee),pe!=null&&(er=fn+br>>1,Yt=ln+$n>>1,Q(pe[ge+2*kt-1],255&er,er>>16,Ve,Nt+(2*kt-1)*ee),Q(pe[ge+2*kt+0],255&Yt,Yt>>16,Ve,Nt+(2*kt+0)*ee)),Yt=Dn,br=$n}1&Tt||(er=3*Yt+br+131074>>2,Q(se[de+Tt-1],255&er,er>>16,mt,Qe+(Tt-1)*ee),pe!=null&&(er=3*br+Yt+131074>>2,Q(pe[ge+Tt-1],255&er,er>>16,Ve,Nt+(Tt-1)*ee)))}}function Lt(){ni[Ri]=cd,ni[Yh]=Au,ni[cu]=pA,ni[Ym]=Zg,ni[Cf]=ex,ni[ad]=e0,ni[Yg]=tx,ni[Jm]=Au,ni[hA]=Zg,ni[sd]=ex,ni[Jh]=e0}function Zt(T){return T&-16384?0>T?0:255:T>>uj}function F(T,Q){return Zt((19077*T>>8)+(26149*Q>>8)-14234)}function re(T,Q,ee){return Zt((19077*T>>8)-(6419*Q>>8)-(13320*ee>>8)+8708)}function oe(T,Q){return Zt((19077*T>>8)+(33050*Q>>8)-17685)}function ve(T,Q,ee,se,de){se[de+0]=F(T,ee),se[de+1]=re(T,Q,ee),se[de+2]=oe(T,Q)}function ze(T,Q,ee,se,de){se[de+0]=oe(T,Q),se[de+1]=re(T,Q,ee),se[de+2]=F(T,ee)}function ot(T,Q,ee,se,de){var pe=re(T,Q,ee);Q=pe<<3&224|oe(T,Q)>>3,se[de+0]=248&F(T,ee)|pe>>5,se[de+1]=Q}function Ut(T,Q,ee,se,de){var pe=240&oe(T,Q)|15;se[de+0]=240&F(T,ee)|re(T,Q,ee)>>4,se[de+1]=pe}function Fr(T,Q,ee,se,de){se[de+0]=255,ve(T,Q,ee,se,de+1)}function yn(T,Q,ee,se,de){ze(T,Q,ee,se,de),se[de+3]=255}function Xr(T,Q,ee,se,de){ve(T,Q,ee,se,de),se[de+3]=255}function zn(T,Q){return 0>T?0:T>Q?Q:T}function ta(T,Q,ee){N[T]=function(se,de,pe,ge,xe,Ee,ke,Ue,st){for(var tt=Ue+(-2&st)*ee;Ue!=tt;)Q(se[de+0],pe[ge+0],xe[Ee+0],ke,Ue),Q(se[de+1],pe[ge+0],xe[Ee+0],ke,Ue+ee),de+=2,++ge,++Ee,Ue+=2*ee;1&st&&Q(se[de+0],pe[ge+0],xe[Ee+0],ke,Ue)}}function Ol(T,Q,ee){return ee==0?T==0?Q==0?6:5:Q==0?4:0:ee}function es(T,Q,ee,se,de){switch(T>>>30){case 3:mc(Q,ee,se,de,0);break;case 2:Ga(Q,ee,se,de);break;case 1:xs(Q,ee,se,de)}}function jo(T,Q){var ee,se,de=Q.M,pe=Q.Nb,ge=T.oc,xe=T.pc+40,Ee=T.oc,ke=T.pc+584,Ue=T.oc,st=T.pc+600;for(ee=0;16>ee;++ee)ge[xe+32*ee-1]=129;for(ee=0;8>ee;++ee)Ee[ke+32*ee-1]=129,Ue[st+32*ee-1]=129;for(0<de?ge[xe-1-32]=Ee[ke-1-32]=Ue[st-1-32]=129:(a(ge,xe-32-1,127,21),a(Ee,ke-32-1,127,9),a(Ue,st-32-1,127,9)),se=0;se<T.za;++se){var tt=Q.ya[Q.aa+se];if(0<se){for(ee=-1;16>ee;++ee)n(ge,xe+32*ee-4,ge,xe+32*ee+12,4);for(ee=-1;8>ee;++ee)n(Ee,ke+32*ee-4,Ee,ke+32*ee+4,4),n(Ue,st+32*ee-4,Ue,st+32*ee+4,4)}var Ke=T.Gd,Bt=T.Hd+se,mt=tt.ad,Qe=tt.Hc;if(0<de&&(n(ge,xe-32,Ke[Bt].y,0,16),n(Ee,ke-32,Ke[Bt].f,0,8),n(Ue,st-32,Ke[Bt].ea,0,8)),tt.Za){var Ve=ge,Nt=xe-32+16;for(0<de&&(se>=T.za-1?a(Ve,Nt,Ke[Bt].y[15],4):n(Ve,Nt,Ke[Bt+1].y,0,4)),ee=0;4>ee;ee++)Ve[Nt+128+ee]=Ve[Nt+256+ee]=Ve[Nt+384+ee]=Ve[Nt+0+ee];for(ee=0;16>ee;++ee,Qe<<=2)Ve=ge,Nt=xe+kf[ee],so[tt.Ob[ee]](Ve,Nt),es(Qe,mt,16*+ee,Ve,Nt)}else if(Ve=Ol(se,de,tt.Ob[0]),ld[Ve](ge,xe),Qe!=0)for(ee=0;16>ee;++ee,Qe<<=2)es(Qe,mt,16*+ee,ge,xe+kf[ee]);for(ee=tt.Gc,Ve=Ol(se,de,tt.Dd),dl[Ve](Ee,ke),dl[Ve](Ue,st),Qe=mt,Ve=Ee,Nt=ke,255&(tt=ee>>0)&&(170&tt?pc(Qe,256,Ve,Nt):Io(Qe,256,Ve,Nt)),tt=Ue,Qe=st,255&(ee>>=8)&&(170&ee?pc(mt,320,tt,Qe):Io(mt,320,tt,Qe)),de<T.Ub-1&&(n(Ke[Bt].y,0,ge,xe+480,16),n(Ke[Bt].f,0,Ee,ke+224,8),n(Ke[Bt].ea,0,Ue,st+224,8)),ee=8*pe*T.B,Ke=T.sa,Bt=T.ta+16*se+16*pe*T.R,mt=T.qa,tt=T.ra+8*se+ee,Qe=T.Ha,Ve=T.Ia+8*se+ee,ee=0;16>ee;++ee)n(Ke,Bt+ee*T.R,ge,xe+32*ee,16);for(ee=0;8>ee;++ee)n(mt,tt+ee*T.B,Ee,ke+32*ee,8),n(Qe,Ve+ee*T.B,Ue,st+32*ee,8)}}function iu(T,Q,ee,se,de,pe,ge,xe,Ee){var ke=[0],Ue=[0],st=0,tt=Ee!=null?Ee.kd:0,Ke=Ee??new tA;if(T==null||12>ee)return 7;Ke.data=T,Ke.w=Q,Ke.ha=ee,Q=[Q],ee=[ee],Ke.gb=[Ke.gb];e:{var Bt=Q,mt=ee,Qe=Ke.gb;if(t(T!=null),t(mt!=null),t(Qe!=null),Qe[0]=0,12<=mt[0]&&!r(T,Bt[0],"RIFF")){if(r(T,Bt[0]+8,"WEBP")){Qe=3;break e}var Ve=_e(T,Bt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(tt&&Ve>mt[0]-8){Qe=7;break e}Qe[0]=Ve,Bt[0]+=12,mt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<Ke.gb[0],ee=ee[0];;){e:{var Nt=T;mt=Q,Qe=ee;var Tt=ke,kt=Ue,rr=Bt=[0];if((er=st=[st])[0]=0,8>Qe[0])Qe=7;else{if(!r(Nt,mt[0],"VP8X")){if(_e(Nt,mt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Yt=_e(Nt,mt[0]+8),br=1+ne(Nt,mt[0]+12);if(2147483648<=br*(Nt=1+ne(Nt,mt[0]+15))){Qe=3;break e}rr!=null&&(rr[0]=Yt),Tt!=null&&(Tt[0]=br),kt!=null&&(kt[0]=Nt),mt[0]+=18,Qe[0]-=18,er[0]=1}Qe=0}}if(st=st[0],Bt=Bt[0],Qe!=0)return Qe;if(mt=!!(2&Bt),!Ve&&st)return 3;if(pe!=null&&(pe[0]=!!(16&Bt)),ge!=null&&(ge[0]=mt),xe!=null&&(xe[0]=0),ge=ke[0],Bt=Ue[0],st&&mt&&Ee==null){Qe=0;break}if(4>ee){Qe=7;break}if(Ve&&st||!Ve&&!st&&!r(T,Q[0],"ALPH")){ee=[ee],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Yt=T,Qe=Q,Ve=ee;var er=Ke.gb;Tt=Ke.na,kt=Ke.P,rr=Ke.Sa,br=22,t(Yt!=null),t(Ve!=null),Nt=Qe[0];var Dn=Ve[0];for(t(Tt!=null),t(rr!=null),Tt[0]=null,kt[0]=null,rr[0]=0;;){if(Qe[0]=Nt,Ve[0]=Dn,8>Dn){Qe=7;break e}var $n=_e(Yt,Nt+4);if(4294967286<$n){Qe=3;break e}var fn=8+$n+1&-2;if(br+=fn,0<er&&br>er){Qe=3;break e}if(!r(Yt,Nt,"VP8 ")||!r(Yt,Nt,"VP8L")){Qe=0;break e}if(Dn[0]<fn){Qe=7;break e}r(Yt,Nt,"ALPH")||(Tt[0]=Yt,kt[0]=Nt+8,rr[0]=$n),Nt+=fn,Dn-=fn}}if(ee=ee[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Qe!=0)break}ee=[ee],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(er=T,Qe=Q,Ve=ee,Tt=Ke.gb[0],kt=Ke.Ja,rr=Ke.xa,Yt=Qe[0],Nt=!r(er,Yt,"VP8 "),br=!r(er,Yt,"VP8L"),t(er!=null),t(Ve!=null),t(kt!=null),t(rr!=null),8>Ve[0])Qe=7;else{if(Nt||br){if(er=_e(er,Yt+4),12<=Tt&&er>Tt-12){Qe=3;break e}if(tt&&er>Ve[0]-8){Qe=7;break e}kt[0]=er,Qe[0]+=8,Ve[0]-=8,rr[0]=br}else rr[0]=5<=Ve[0]&&er[Yt+0]==47&&!(er[Yt+4]>>5),kt[0]=Ve[0];Qe=0}if(ee=ee[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],Q=Q[0],Qe!=0)break;if(4294967286<Ke.Ja)return 3;if(xe==null||mt||(xe[0]=Ke.xa?2:1),ge=[ge],Bt=[Bt],Ke.xa){if(5>ee){Qe=7;break}xe=ge,tt=Bt,mt=pe,T==null||5>ee?T=0:5<=ee&&T[Q+0]==47&&!(T[Q+4]>>5)?(Ve=[0],er=[0],Tt=[0],z(kt=new P,T,Q,ee),bt(kt,Ve,er,Tt)?(xe!=null&&(xe[0]=Ve[0]),tt!=null&&(tt[0]=er[0]),mt!=null&&(mt[0]=Tt[0]),T=1):T=0):T=0}else{if(10>ee){Qe=7;break}xe=Bt,T==null||10>ee||!ei(T,Q+3,ee-3)?T=0:(tt=T[Q+0]|T[Q+1]<<8|T[Q+2]<<16,mt=16383&(T[Q+7]<<8|T[Q+6]),T=16383&(T[Q+9]<<8|T[Q+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=Ke.Ja||!mt||!T?T=0:(ge&&(ge[0]=mt),xe&&(xe[0]=T),T=1))}if(!T||(ge=ge[0],Bt=Bt[0],st&&(ke[0]!=ge||Ue[0]!=Bt)))return 3;Ee!=null&&(Ee[0]=Ke,Ee.offset=Q-Ee.w,t(4294967286>Q-Ee.w),t(Ee.offset==Ee.ha-ee));break}return Qe==0||Qe==7&&st&&Ee==null?(pe!=null&&(pe[0]|=Ke.na!=null&&0<Ke.na.length),se!=null&&(se[0]=ge),de!=null&&(de[0]=Bt),0):Qe}function nA(T,Q,ee){var se=Q.width,de=Q.height,pe=0,ge=0,xe=se,Ee=de;if(Q.Da=T!=null&&0<T.Da,Q.Da&&(xe=T.cd,Ee=T.bd,pe=T.v,ge=T.j,11>ee||(pe&=-2,ge&=-2),0>pe||0>ge||0>=xe||0>=Ee||pe+xe>se||ge+Ee>de))return 0;if(Q.v=pe,Q.j=ge,Q.va=pe+xe,Q.o=ge+Ee,Q.U=xe,Q.T=Ee,Q.da=T!=null&&0<T.da,Q.da){if(!Te(xe,Ee,ee=[T.ib],pe=[T.hb]))return 0;Q.ib=ee[0],Q.hb=pe[0]}return Q.ob=T!=null&&T.ob,Q.Kb=T==null||!T.Sd,Q.da&&(Q.ob=Q.ib<3*se/4&&Q.hb<3*de/4,Q.Kb=0),1}function Kh(T){if(T==null)return 2;if(11>T.S){var Q=T.f.RGBA;Q.fb+=(T.height-1)*Q.A,Q.A=-Q.A}else Q=T.f.kb,T=T.height,Q.O+=(T-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(T-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(T-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(T-1)*Q.lb,Q.lb=-Q.lb);return 0}function gf(T,Q,ee,se){if(se==null||0>=T||0>=Q)return 2;if(ee!=null){if(ee.Da){var de=ee.cd,pe=ee.bd,ge=-2&ee.v,xe=-2&ee.j;if(0>ge||0>xe||0>=de||0>=pe||ge+de>T||xe+pe>Q)return 2;T=de,Q=pe}if(ee.da){if(!Te(T,Q,de=[ee.ib],pe=[ee.hb]))return 2;T=de[0],Q=pe[0]}}se.width=T,se.height=Q;e:{var Ee=se.width,ke=se.height;if(T=se.S,0>=Ee||0>=ke||!(T>=Ri&&13>T))T=2;else{if(0>=se.Rd&&se.sd==null){ge=pe=de=Q=0;var Ue=(xe=Ee*NE[T])*ke;if(11>T||(pe=(ke+1)/2*(Q=(Ee+1)/2),T==12&&(ge=(de=Ee)*ke)),(ke=s(Ue+2*pe+ge))==null){T=1;break e}se.sd=ke,11>T?((Ee=se.f.RGBA).eb=ke,Ee.fb=0,Ee.A=xe,Ee.size=Ue):((Ee=se.f.kb).y=ke,Ee.O=0,Ee.fa=xe,Ee.Fd=Ue,Ee.f=ke,Ee.N=0+Ue,Ee.Ab=Q,Ee.Cd=pe,Ee.ea=ke,Ee.W=0+Ue+pe,Ee.Db=Q,Ee.Ed=pe,T==12&&(Ee.F=ke,Ee.J=0+Ue+2*pe),Ee.Tc=ge,Ee.lb=de)}if(Q=1,de=se.S,pe=se.width,ge=se.height,de>=Ri&&13>de)if(11>de)T=se.f.RGBA,Q&=(xe=Math.abs(T.A))*(ge-1)+pe<=T.size,Q&=xe>=pe*NE[de],Q&=T.eb!=null;else{T=se.f.kb,xe=(pe+1)/2,Ue=(ge+1)/2,Ee=Math.abs(T.fa),ke=Math.abs(T.Ab);var st=Math.abs(T.Db),tt=Math.abs(T.lb),Ke=tt*(ge-1)+pe;Q&=Ee*(ge-1)+pe<=T.Fd,Q&=ke*(Ue-1)+xe<=T.Cd,Q=(Q&=st*(Ue-1)+xe<=T.Ed)&Ee>=pe&ke>=xe&st>=xe,Q&=T.y!=null,Q&=T.f!=null,Q&=T.ea!=null,de==12&&(Q&=tt>=pe,Q&=Ke<=T.Tc,Q&=T.F!=null)}else Q=0;T=Q?0:2}}return T!=0||ee!=null&&ee.fd&&(T=Kh(se)),T}var Is=64,aA=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xf=24,vf=32,qh=8,Bo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(T){return T},N.Predictor2=function(T,Q,ee){return Q[ee+0]},N.Predictor3=function(T,Q,ee){return Q[ee+1]},N.Predictor4=function(T,Q,ee){return Q[ee-1]},N.Predictor5=function(T,Q,ee){return Re(Re(T,Q[ee+1]),Q[ee+0])},N.Predictor6=function(T,Q,ee){return Re(T,Q[ee-1])},N.Predictor7=function(T,Q,ee){return Re(T,Q[ee+0])},N.Predictor8=function(T,Q,ee){return Re(Q[ee-1],Q[ee+0])},N.Predictor9=function(T,Q,ee){return Re(Q[ee+0],Q[ee+1])},N.Predictor10=function(T,Q,ee){return Re(Re(T,Q[ee-1]),Re(Q[ee+0],Q[ee+1]))},N.Predictor11=function(T,Q,ee){var se=Q[ee+0];return 0>=ct(se>>24&255,T>>24&255,(Q=Q[ee-1])>>24&255)+ct(se>>16&255,T>>16&255,Q>>16&255)+ct(se>>8&255,T>>8&255,Q>>8&255)+ct(255&se,255&T,255&Q)?se:T},N.Predictor12=function(T,Q,ee){var se=Q[ee+0];return(qe((T>>24&255)+(se>>24&255)-((Q=Q[ee-1])>>24&255))<<24|qe((T>>16&255)+(se>>16&255)-(Q>>16&255))<<16|qe((T>>8&255)+(se>>8&255)-(Q>>8&255))<<8|qe((255&T)+(255&se)-(255&Q)))>>>0},N.Predictor13=function(T,Q,ee){var se=Q[ee-1];return(Ze((T=Re(T,Q[ee+0]))>>24&255,se>>24&255)<<24|Ze(T>>16&255,se>>16&255)<<16|Ze(T>>8&255,se>>8&255)<<8|Ze(T>>0&255,se>>0&255))>>>0};var ub=N.PredictorAdd0;N.PredictorAdd1=pt,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var Wm=N.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var Wg,Dl=N.ColorIndexInverseTransform,ti=N.MapARGB,sA=N.VP8LColorIndexInverseTransformAlpha,Xm=N.MapAlpha,td=N.VP8LPredictorsAdd=[];td.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var iA,ao,yi,oA,To,hc,ou,mc,Ga,pc,xs,Io,bf,lu,Wh,lA,cA,uA,yf,Xh,dA,rd,wf,Ka,cl,mn,pn,va,ts=s(511),Pl=s(2041),AA=s(225),fA=s(767),nd=0,Xg=Pl,Ef=AA,ri=fA,Rl=ts,Ri=0,Yh=1,cu=2,Ym=3,Cf=4,ad=5,Yg=6,Jm=7,hA=8,sd=9,Jh=10,Jg=[2,3,7],Ll=[3,3,11],ul=[280,256,256,256,40],_f=[0,1,1,1,0],id=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],od=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],yE=8,Zm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ep=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fs=null,qa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],uu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],db=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Sf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ld=[],so=[],dl=[],EE=1,Zh=2,du=[],ni=[];vt("UpsampleRgbLinePair",ve,3),vt("UpsampleBgrLinePair",ze,3),vt("UpsampleRgbaLinePair",Xr,4),vt("UpsampleBgraLinePair",yn,4),vt("UpsampleArgbLinePair",Fr,4),vt("UpsampleRgba4444LinePair",Ut,2),vt("UpsampleRgb565LinePair",ot,2);var cd=N.UpsampleRgbLinePair,pA=N.UpsampleBgrLinePair,Au=N.UpsampleRgbaLinePair,Zg=N.UpsampleBgraLinePair,ex=N.UpsampleArgbLinePair,e0=N.UpsampleRgba4444LinePair,tx=N.UpsampleRgb565LinePair,fu=16,Os=1<<fu-1,gA=-227,rx=482,uj=6,CE=0,dj=s(256),Ds=s(256),Ab=s(256),tp=s(256),rp=s(rx-gA),fb=s(rx-gA);ta("YuvToRgbRow",ve,3),ta("YuvToBgrRow",ze,3),ta("YuvToRgbaRow",Xr,4),ta("YuvToBgraRow",yn,4),ta("YuvToArgbRow",Fr,4),ta("YuvToRgba4444Row",Ut,2),ta("YuvToRgb565Row",ot,2);var kf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ud=[0,2,8],Aj=[8,7,6,4,4,2,2,2,1,1,1,1],_E=1;this.WebPDecodeRGBA=function(T,Q,ee,se,de){var pe=Yh,ge=new Ju,xe=new la;ge.ba=xe,xe.S=pe,xe.width=[xe.width],xe.height=[xe.height];var Ee=xe.width,ke=xe.height,Ue=new ja;if(Ue==null||T==null)var st=2;else t(Ue!=null),st=iu(T,Q,ee,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(st!=0?Ee=0:(Ee!=null&&(Ee[0]=Ue.width[0]),ke!=null&&(ke[0]=Ue.height[0]),Ee=1),Ee){xe.width=xe.width[0],xe.height=xe.height[0],se!=null&&(se[0]=xe.width),de!=null&&(de[0]=xe.height);e:{if(se=new Ts,(de=new tA).data=T,de.w=Q,de.ha=ee,de.kd=1,Q=[0],t(de!=null),((T=iu(de.data,de.w,de.ha,null,null,null,Q,null,de))==0||T==7)&&Q[0]&&(T=4),(Q=T)==0){if(t(ge!=null),se.data=de.data,se.w=de.w+de.offset,se.ha=de.ha-de.offset,se.put=xt,se.ac=Je,se.bc=Et,se.ma=ge,de.xa){if((T=dt())==null){ge=1;break e}if(function(tt,Ke){var Bt=[0],mt=[0],Qe=[0];t:for(;;){if(tt==null)return 0;if(Ke==null)return tt.a=2,0;if(tt.l=Ke,tt.a=0,z(tt.m,Ke.data,Ke.w,Ke.ha),!bt(tt.m,Bt,mt,Qe)){tt.a=3;break t}if(tt.xb=Zh,Ke.width=Bt[0],Ke.height=mt[0],!$e(Bt[0],mt[0],1,tt,null))break t;return 1}return t(tt.a!=0),0}(T,se)){if(se=(Q=gf(se.width,se.height,ge.Oa,ge.ba))==0){t:{se=T;r:for(;;){if(se==null){se=0;break t}if(t(se.s.yc!=null),t(se.s.Ya!=null),t(0<se.s.Wb),t((ee=se.l)!=null),t((de=ee.ma)!=null),se.xb!=0){if(se.ca=de.ba,se.tb=de.tb,t(se.ca!=null),!nA(de.Oa,ee,Ym)){se.a=2;break r}if(!rt(se,ee.width)||ee.da)break r;if((ee.da||Pr(se.ca.S))&&Ge(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Ge()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!Fe(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!Be(se,se.V,se.Ba,se.c,se.i,ee.o,je))break r;de.Dc=se.Ma,se=1;break t}t(se.a!=0),se=0}se=!se}se&&(Q=T.a)}else Q=T.a}else{if((T=new gi)==null){ge=1;break e}if(T.Fa=de.na,T.P=de.P,T.qc=de.Sa,Xd(T,se)){if((Q=gf(se.width,se.height,ge.Oa,ge.ba))==0){if(T.Aa=0,ee=ge.Oa,t((de=T)!=null),ee!=null){if(0<(Ee=0>(Ee=ee.Md)?0:100<Ee?255:255*Ee/100)){for(ke=Ue=0;4>ke;++ke)12>(st=de.pb[ke]).lc&&(st.ia=Ee*Aj[0>st.lc?0:st.lc]>>3),Ue|=st.ia;Ue&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=ee.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}df(T,se)||(Q=T.a)}}else Q=T.a}Q==0&&ge.Oa!=null&&ge.Oa.fd&&(Q=Kh(ge.ba))}ge=Q}pe=ge!=0?null:11>pe?xe.f.RGBA.eb:xe.f.kb.y}else pe=null;return pe};var NE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,B){for(var R="",D=0;D<4;D++)R+=String.fromCharCode(N[B++]);return R}function d(N,B){return(N[B+0]<<0|N[B+1]<<8|N[B+2]<<16)>>>0}function f(N,B){return(N[B+0]<<0|N[B+1]<<8|N[B+2]<<16|N[B+3]<<24)>>>0}new c;var h=[0],p=[0],g=[],x=new c,b=e,y=function(N,B){var R={},D=0,O=!1,L=0,M=0;if(R.frames=[],!function(H,X,Z,ae){for(var le=0;le<ae;le++)if(H[X+le]!=Z.charCodeAt(le))return!0;return!1}(N,B,"RIFF",4)){var J,V;for(f(N,B+=4),B+=8;B<N.length;){var K=u(N,B),z=f(N,B+=4);B+=4;var G=z+(1&z);switch(K){case"VP8 ":case"VP8L":R.frames[D]===void 0&&(R.frames[D]={}),(P=R.frames[D]).src_off=O?M:B-8,P.src_size=L+z+8,D++,O&&(O=!1,L=0,M=0);break;case"VP8X":(P=R.header={}).feature_flags=N[B];var Y=B+4;P.canvas_width=1+d(N,Y),Y+=3,P.canvas_height=1+d(N,Y),Y+=3;break;case"ALPH":O=!0,L=G+8,M=B-8;break;case"ANIM":(P=R.header).bgcolor=f(N,B),Y=B+4,P.loop_count=(J=N)[(V=Y)+0]<<0|J[V+1]<<8,Y+=2;break;case"ANMF":var te,P;(P=R.frames[D]={}).offset_x=2*d(N,B),B+=3,P.offset_y=2*d(N,B),B+=3,P.width=1+d(N,B),B+=3,P.height=1+d(N,B),B+=3,P.duration=d(N,B),B+=3,te=N[B++],P.dispose=1&te,P.blend=te>>1&1}K!="ANMF"&&(B+=G)}return R}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var j=0;j<_.length&&_[j].blend!=0;j++);}var k=_[0],I=x.WebPDecodeRGBA(b,k.src_off,k.src_size,p,h);k.rgba=I,k.imgwidth=p[0],k.imgheight=h[0];for(var E=0;E<p[0]*h[0]*4;E++)g[E]=I[E];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof KF=="function"},r=function(h,p,g,x){var b=4,y=i;switch(x){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=c}h=n(h,p,g,y);var w=KF(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,p,g,x){for(var b,y,w,_=h.length/p,j=new Uint8Array(h.length+_),k=d(),I=0;I<_;I+=1){if(w=I*p,b=h.subarray(w,w+p),x)j.set(x(b,g,y),w+I);else{for(var E,N=k.length,B=[];E<N;E+=1)B[E]=k[E](b,g,y);var R=f(B.concat());j.set(B[R],w+I)}y=b}return j},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,x=[],b=h.length;x[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,p,g){var x,b=[],y=h.length;b[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,b[w+1]=h[w]-x+256&255;return b},o=function(h,p,g){var x,b,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-p]||0,b=g&&g[_]||0,y[_+1]=h[_]+256-(x+b>>>1)&255;return y},c=function(h,p,g){var x,b,y,w,_=[],j=h.length;_[0]=4;for(var k=0;k<j;k+=1)x=h[k-p]||0,b=g&&g[k]||0,y=g&&g[k-p]||0,w=u(x,b,y),_[k+1]=h[k]-w+256&255;return _},u=function(h,p,g){if(h===p&&p===g)return h;var x=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return x<=b&&x<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,c]},f=function(h){var p=h.map(function(g){return g.reduce(function(x,b){return x+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,x){var b,y,w,_,j,k,I,E,N,B,R,D,O,L,M,J=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new _8e(h)).imgData,y=w.bits,b=w.colorSpace,j=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){N=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,R=new Uint8Array(N*w.colors),B=new Uint8Array(N);var K,z=w.pixelBitlength-w.bits;for(L=0,M=0;L<N;L++){for(O=E[L],K=0;K<z;)R[M++]=O>>>K&255,K+=w.bits;B[L]=O>>>K&255}}if(w.bits===16){N=(E=new Uint32Array(w.decodePixels().buffer)).length,R=new Uint8Array(N*(32/w.pixelBitlength)*w.colors),B=new Uint8Array(N*(32/w.pixelBitlength)),D=w.colors>1,L=0,M=0;for(var G=0;L<N;)O=E[L++],R[M++]=O>>>0&255,D&&(R[M++]=O>>>16&255,O=E[L++],R[M++]=O>>>0&255),B[G++]=O>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(R,w.width*w.colors,w.colors,x),I=r(B,w.width,1,x)):(h=R,I=B,J=void 0)}if(w.colorType===3&&(b=this.color_spaces.INDEXED,k=w.palette,w.transparency.indexed)){var Y=w.transparency.indexed,te=0;for(L=0,N=Y.length;L<N;++L)te+=Y[L];if((te/=255)===N-1&&Y.indexOf(0)!==-1)_=[Y.indexOf(0)];else if(te!==N){for(E=w.decodePixels(),B=new Uint8Array(E.length),L=0,N=E.length;L<N;L++)B[L]=Y[E[L]];I=r(B,w.width,1)}}var P=function(H){var X;switch(H){case e.image_compression.FAST:X=11;break;case e.image_compression.MEDIUM:X=13;break;case e.image_compression.SLOW:X=14;break;default:X=12}return X}(x);return J===this.decode.FLATE_DECODE&&(V="/Predictor "+P+" "),V+="/Colors "+j+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:h,index:p,filter:J,decodeParameters:V,transparency:_,palette:k,sMask:I,predictor:P,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:b}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new N8e(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new KT(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),xd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_a.log("bit decode error:"+r)}},xd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},xd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},xd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},xd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},xd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},xd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},xd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},xd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new xd(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new KT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),qG.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new qG(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new KT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[c++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bx=vr.API,JC=Bx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,x=o[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&pa(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||x)/c+h)),g=n;return b},zG=Bx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Bx.processArabic&&(e=Bx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:JC.apply(this,arguments).reduce(function(s,i){return s+i},0)},$G=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},GG=function(e,t,r){r||(r={});var n,a,s,i,o,c,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,x=e.split(" "),b=JC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(j){(j=j.split(/\s*\n/)).length>1?w=w.concat(j.map(function(k,I){return(I&&k.length?`
`:"")+k})):w.push(j[0])}),x=w,c=zG.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+p+(g=(a=JC.apply(this,[n,r])).reduce(function(j,k){return j+k},0))>t||_){if(g>t){for(o=$G.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,k){return j+k},0)}else d=[n];f.push(d),h=g+c,p=b}else d.push(n),h+=p+g,p=b}return u=c?function(j,k){return(k?y:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},Bx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(GG.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,x,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(pa(h)!=="object")throw new Error("Don't know what to do with value type "+pa(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,x,b={},y=1,w=b,_=[],j="",k="",I=f.length-1,E=1;E<I;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((p=_.pop())[0][p[1]]=w,g=void 0,w=p[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(j+=r[x],g=parseInt(j,16)*y,y=1,j=""):j+=x:r.hasOwnProperty(x)?(k+=r[x],w[g]=parseInt(k,16)*y,y=1,g=void 0,k=""):k+=x;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(lw(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Qr.canvg?Promise.resolve(Qr.canvg):m1(()=>import("./index.es-BnWFfO8B.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,x){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(pa(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var x=u();d({data:p,addLength1:!0,objectId:x}),c("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+nv(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+nv(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+nv(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var b=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+nv(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+nv(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,x=p,b="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(w=o,x=p,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?b+=w[y]:b+="";var j="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?j=h(b,x).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(j=r(b,g[x])),f.isHex=!0,{text:j,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var j=function(D){var O=D.charCodeAt(),L=O>>8,M=x[L];return M!==void 0?f[256*M+(255&O)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},k=function(D){for(var O,L=0;L<D.length;L++){if((O=j(D.charAt(L)))==="L")return!1;if(O==="R")return!0}return!1},I=function(D,O,L,M){var J,V,K,z,G=O[M];switch(G){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(G="AN");break;case"AL":w=!0,G="R";break;case"WS":G="N";break;case"CS":M<1||M+1>=O.length||(J=L[M-1])!=="EN"&&J!=="AN"||(V=O[M+1])!=="EN"&&V!=="AN"?G="N":w&&(V="AN"),G=V===J?V:"N";break;case"ES":G=(J=M>0?L[M-1]:"B")==="EN"&&M+1<O.length&&O[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&L[M-1]==="EN"){G="EN";break}if(w){G="N";break}for(K=M+1,z=O.length;K<z&&O[K]==="ET";)K++;G=K<z&&O[K]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(z=O.length,K=M+1;K<z&&O[K]==="NSM";)K++;if(K<z){var Y=D[M],te=Y>=1425&&Y<=2303||Y===64286;if(J=O[K],te&&(J==="R"||J==="AL")){G="R";break}}}G=M<1||(J=O[M-1])==="B"?"N":L[M-1];break;case"B":w=!1,a=!0,G=_;break;case"S":s=!0,G="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":G="N"}return G},E=function(D,O,L){var M=D.split("");return L&&N(M,L,{hiLevel:_}),M.reverse(),O&&O.reverse(),M.join("")},N=function(D,O,L){var M,J,V,K,z,G=-1,Y=D.length,te=0,P=[],H=_?p:h,X=[];for(w=!1,a=!1,s=!1,J=0;J<Y;J++)X[J]=j(D[J]);for(V=0;V<Y;V++){if(z=te,P[V]=I(D,X,P,V),M=240&(te=H[z][g[P[V]]]),te&=15,O[V]=K=H[te][5],M>0)if(M===16){for(J=G;J<V;J++)O[J]=1;G=-1}else G=-1;if(H[te][6])G===-1&&(G=V);else if(G>-1){for(J=G;J<V;J++)O[J]=K;G=-1}X[V]==="B"&&(O[V]=0),L.hiLevel|=K}s&&function(Z,ae,le){for(var ie=0;ie<le;ie++)if(Z[ie]==="S"){ae[ie]=_;for(var ce=ie-1;ce>=0&&Z[ce]==="WS";ce--)ae[ce]=_}}(X,O,Y)},B=function(D,O,L,M,J){if(!(J.hiLevel<D)){if(D===1&&_===1&&!a)return O.reverse(),void(L&&L.reverse());for(var V,K,z,G,Y=O.length,te=0;te<Y;){if(M[te]>=D){for(z=te+1;z<Y&&M[z]>=D;)z++;for(G=te,K=z-1;G<K;G++,K--)V=O[G],O[G]=O[K],O[K]=V,L&&(V=L[G],L[G]=L[K],L[K]=V);te=z}te++}}},R=function(D,O,L){var M=D.split(""),J={hiLevel:_};return L||(L=[]),N(M,L,J),function(V,K,z){if(z.hiLevel!==0&&d)for(var G,Y=0;Y<V.length;Y++)K[Y]===1&&(G=b.indexOf(V[Y]))>=0&&(V[Y]=b[G+1])}(M,L,J),B(2,M,O,L,J),B(1,M,O,L,J),M.join("")};return this.__bidiEngine__.doBidiReorder=function(D,O,L){if(function(J,V){if(V)for(var K=0;K<J.length;K++)V[K]=K;o===void 0&&(o=k(J)),u===void 0&&(u=k(J))}(D,O),i||!c||u)if(i&&c&&o^u)_=o?1:0,D=E(D,O,L);else if(!i&&c&&u)_=o?1:0,D=R(D,O,L),D=E(D,O);else if(!i||o||c||u){if(i&&!c&&o^u)D=E(D,O),o?(_=0,D=R(D,O,L)):(_=1,D=R(D,O,L),D=E(D,O));else if(i&&o&&!c&&u)_=1,D=R(D,O,L),D=E(D,O);else if(!i&&!c&&o^u){var M=d;o?(_=1,D=R(D,O,L),_=0,d=!1,D=R(D,O,L),d=M):(_=0,D=R(D,O,L),D=E(D,O),_=1,d=!1,D=R(D,O,L),d=M,D=E(D,O))}}else _=0,D=R(D,O,L);else _=o?1:0,D=R(D,O,L);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Sm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Q8e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new S8e(this.contents),this.head=new j8e(this),this.name=new O8e(this),this.cmap=new Xse(this),this.toUnicode={},this.hhea=new B8e(this),this.maxp=new D8e(this),this.hmtx=new P8e(this),this.post=new I8e(this),this.os2=new T8e(this),this.loca=new U8e(this),this.glyf=new R8e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Kd,Sm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),S8e=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,u,d,f,h,p,g,x;for(x in p=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),i=Math.floor(f/c),d=16*p-f,(a=new Sm).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=Yse.call(r);r.length%4;)r.push(0);for(s=new Sm(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),k8e={}.hasOwnProperty,af=function(e,t){for(var r in t)k8e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Kd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var j8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Sm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),WG=function(){function e(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),t.pos+=2,x=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),u=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),d=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,o=function(){var j,k;for(k=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)k.push(t.readUInt16());return k}(),c=y=0,_=s.length;y<_;c=++y)for(b=s[c],n=w=g=x[c];g<=b?w<=b:w>=b;n=g<=b?++w:--w)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,I,E,N,B,R,D,O,L,M,J,V,K,z,G,Y,te,P,H,X,Z,ae,le,ie,ce,fe,Ie,ne;switch(M=new Sm,i=Object.keys(t).sort(function(_e,Fe){return _e-Fe}),r){case"macroman":for(x=0,b=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),w={0:0},s={},J=0,G=i.length;J<G;J++)w[ce=t[a=i[J]]]==null&&(w[ce]=++x),s[a]={old:t[a],new:w[t[a]]},b[a]=w[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(b),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(O=[],f=[],_=0,w={},n={},y=u=null,V=0,Y=i.length;V<Y;V++)w[k=t[a=i[V]]]==null&&(w[k]=++_),n[a]={old:k,new:w[k]},o=w[k]-a,y!=null&&o===u||(y&&f.push(y),O.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),O.push(65535),R=2*(B=O.length),N=2*Math.pow(Math.log(B)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,E=2*B-N,c=[],I=[],p=[],g=K=0,te=O.length;K<te;g=++K){if(D=O[g],d=f[g],D===65535){c.push(0),I.push(0);break}if(D-(L=n[D].new)>=32768)for(c.push(0),I.push(2*(p.length+B-g)),a=z=D;D<=d?z<=d:z>=d;a=D<=d?++z:--z)p.push(n[a].new);else c.push(L-D),I.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*B+2*p.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(N),M.writeUInt16(h),M.writeUInt16(E),le=0,P=f.length;le<P;le++)a=f[le],M.writeUInt16(a);for(M.writeUInt16(0),ie=0,H=O.length;ie<H;ie++)a=O[ie],M.writeUInt16(a);for(fe=0,X=c.length;fe<X;fe++)o=c[fe],M.writeUInt16(o);for(Ie=0,Z=I.length;Ie<Z;Ie++)j=I[Ie],M.writeUInt16(j);for(ne=0,ae=p.length;ne<ae;ne++)x=p[ne],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:_+1}}},e}(),Xse=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new WG(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=WG.encode(r,n),(s=new Sm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),B8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),T8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),I8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),F8e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},O8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new F8e(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),D8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),P8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Yse=[].slice,R8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new Sm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new M8e(c,d,h,u,f):new L8e(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),L8e=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),M8e=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Sm(Yse.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),U8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return af(t,Kd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),Q8e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y;for(a in n=Xse.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(w){var _,j;for(_ in j={},w)j[w[_]]=_;return j}(p),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,j;for(j=[],w=0,_=f.length;w<_;w++)o=f[w],j.push(d[o]);return j}(),s=this.font.glyf.encode(i,x,p),u=this.font.loca.encode(s.offsets,x),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Jse(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var XG={},Fv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:XG=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return XG||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),eO=function(e,t){return eO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},eO(e,t)};function Zse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");eO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var eie=function(e){Zse(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function H8e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function V8e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function XN(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function tie(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=rie(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function rie(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function gk(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function nie(e,t){var r=gk(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function z8e(e,t,r,n,a){var s={},i=1.3333333333333333,o=qT(t,function(_){return a.getComputedStyle(_).backgroundColor});o!=null&&(s.fillColor=o);var c=qT(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=G8e(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=qT(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=$8e(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function $8e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function qT(e,t){var r=aie(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function aie(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:aie(e.parentElement,t):r}function G8e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=gk(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function sie(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=K8e(c,u,r,g,n,a);b&&(x==="thead"?d.push(b):x==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function K8e(e,t,r,n,a,s){for(var i=new eie(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=z8e(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:q8e(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function q8e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function W8e(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function rh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function iie(e,t){var r=new Fv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();W8e(a,n,t);var s=rh({},a,n,t),i;typeof window<"u"&&(i=window);var o=X8e(a,n,t),c=Y8e(a,n,t),u=J8e(r,s),d=eMe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function X8e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=rh({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[c]||{}});n[c]=rh({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function Y8e(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function J8e(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g=gk(t.margin,40/e.scaleFactor()),x=(r=Z8e(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),j=!!t.horizontalPageBreak,k=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:j,horizontalPageBreakRepeat:k,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Z8e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function eMe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=sie(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||tMe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function tMe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var tO=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),rMe=function(e){Zse(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(tO),nMe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new rMe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new tO(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new tO(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),oie=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof eie&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),lie=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=gk(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),aMe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function sMe(e,t){iMe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=rO(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=rO(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),lMe(t),cMe(t,e),oMe(t)}function iMe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=nie(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=XN(u.text,u.styles,e)+f;var h=XN(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function rO(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=rO(h,t,r))}return t}function oMe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function lMe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function cMe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=YG(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=YG(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function YG(e,t,r,n,a){return e.map(function(s){return uMe(s,t,r,n,a)})}function uMe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=XN(e,r,n))return e;for(;t<XN(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function cie(e,t){var r=new Fv(e),n=dMe(t,r.scaleFactor()),a=new nMe(t,n);return sMe(r,a),r.applyStyles(r.userStyles),a}function dMe(e,t){var r=e.content,n=fMe(r.columns);if(r.head.length===0){var a=JG(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=JG(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:WT("head",r.head,n,i,s,t),body:WT("body",r.body,n,i,s,t),foot:WT("foot",r.foot,n,i,s,t)}}function WT(e,t,r,n,a,s){var i={},o=t.map(function(c,u){for(var d=0,f={},h=0,p=0,g=0,x=r;g<x.length;g++){var b=x[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[b.index-h-d]:y=c[b.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=hMe(e,b,u,a,n,s,w),j=new lie(y,_,e);f[b.dataKey]=j,f[b.index]=j,p=j.colSpan-1,i[b.index]={left:j.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new oie(c,u,e,f)});return o}function JG(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=AMe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function AMe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function fMe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new aMe(a,t,r)})}function hMe(e,t,r,n,a,s,i){var o=V8e(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=rh({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?rh({},o.alternateRow,a.alternateRowStyles):{},p=H8e(s),g=rh({},p,u,h,f);return rh(g,i)}function mMe(e,t,r){var n;r===void 0&&(r={});var a=nie(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function pMe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=mMe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function uie(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,p){return h+p.height},0);o+=u}var d=new Fv(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(Aie(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=rh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?gMe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Sh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;YN(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Sh(d,t,h,s,t.columns)})),tie(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function gMe(e,t,r,n){var a=pMe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?cw(e,t,r,n,u.columns,!0):ZG(e,t,n,u.columns),xMe(e,t,r,n,u.columns),XT(e,t,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?cw(e,t,r,n,d,!0):ZG(e,t,n,d),u=eK(e,t,i+1,n,d),XT(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),cw(e,t,r,n,h.columns,!0),eK(e,t,i+1,n,h.columns,f),XT(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function ZG(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Sh(e,t,s,r,n)})}function xMe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;YN(e,t,s,o,r,n,a)})}function eK(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=die(e,t,d,n);c.canEntireRowFit(f,a)&&(Sh(e,t,c,n,a),o=r+u)}),o}function XT(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Sh(e,t,s,r,n)})}function vMe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function bMe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new lie(u.raw,u.styles,u.section);d=rh(d,u),d.text=[];var f=vMe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new oie(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,b=r.columns;x<b.length;x++){var c=b[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function yMe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function YN(e,t,r,n,a,s,i){var o=die(e,t,n,s);if(r.canEntireRowFit(o,i))Sh(e,t,r,s,i);else if(yMe(e,r,o,t)){var c=bMe(r,o,t,e);Sh(e,t,r,s,i),cw(e,t,a,s,i),YN(e,t,c,n,a,s,i)}else cw(e,t,a,s,i),YN(e,t,r,n,a,s,i)}function Sh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}wMe(e,c,n);var d=c.getTextPos();Jse(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function wMe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=rie(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),EMe(e,t,r,n.lineWidth))}function EMe(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function die(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function cw(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Sh(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;tie(e,t,r,n),Aie(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Sh(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function Aie(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function CMe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=iie(this,n),s=cie(this,a);return uie(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Jse(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Fv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Fv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Fv(this),s=sie(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var YT;function bo(e,t){var r=iie(e,t),n=cie(e,r);uie(e,n)}try{if(typeof window<"u"&&window){var tK=window,rK=tK.jsPDF||((YT=tK.jspdf)===null||YT===void 0?void 0:YT.jsPDF);rK&&CMe(rK)}}catch(e){console.error("Could not apply autoTable plugin",e)}const YL="evaluaciones_pruebas",JL="evaluaciones_rubricas_estaticas",ZL="evaluaciones_rubricas_interactivas",_Me="usuarios",xk=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},NMe=e=>{const t=zt(yt(ft,YL),gr("fechaCreacion","desc"));return fr(t,n=>{e(n.docs.map(a=>xk(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},SMe=async e=>{try{const{id:t,...r}=e,n=sr(ft,YL,t);await pi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},kMe=async e=>{try{await za(sr(ft,YL,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},jMe=e=>{const t=zt(yt(ft,JL),gr("fechaCreacion","desc"));return fr(t,n=>{e(n.docs.map(a=>xk(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},BMe=async e=>{try{const{id:t,...r}=e,n=sr(ft,JL,t);await pi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},TMe=async e=>{try{await za(sr(ft,JL,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},IMe=e=>{const t=zt(yt(ft,ZL));return fr(t,n=>{e(n.docs.map(a=>xk(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},FMe=async e=>{try{const{id:t,...r}=e,n=sr(ft,ZL,t);await pi(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},OMe=async e=>{try{return(await vn(yt(ft,ZL),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},DMe=e=>{const t=zt(yt(ft,_Me));return fr(t,n=>{e(n.docs.map(a=>xk(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},PMe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],nK={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},A5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},RMe=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),LMe=({item:e,index:t,showAnswers:r})=>{const n=S.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},MMe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(!1),h={nombre:"",asignatura:Wi[0],nivel:TQ[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=S.useState(h);S.useEffect(()=>{const E=NMe(t);return()=>E()},[]);const x=E=>{const{name:N,value:B}=E.target;g(R=>({...R,[N]:B}))},b=E=>{g(N=>{const B={...N.tiposActividad};return B[E]?delete B[E]:B[E]=nK[E][0],{...N,tiposActividad:B}})},y=(E,N)=>{g(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:N}}))},w=E=>{g(N=>{const B=N.selectedNee.includes(E)?N.selectedNee.filter(R=>R!==E):[...N.selectedNee,E];return{...N,selectedNee:B}})},_=async E=>{if(E.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const N=Object.entries(p.tiposActividad).map(([D,O])=>`- ${O} ítem(s) de tipo '${D}'`).join(`
`),B=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",R=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${N}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{h1("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=(await(await new cs(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(K);let G=0;z.actividades.forEach(te=>{te.items.forEach(P=>{G+=P.puntaje||0,P.tipo==="Comprensión de lectura"&&P.preguntas&&P.preguntas.forEach(H=>{G+=H.puntaje||0})})});const Y={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:z.objetivo,instruccionesGenerales:z.instruccionesGenerales,puntajeIdeal:G,actividades:z.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(Y),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},j=async()=>{if(r)try{await SMe(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},k=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await kMe(E),(r==null?void 0:r.id)===E&&n(null)}catch(N){console.error(N),alert("No se pudo eliminar la prueba.")}},I=async E=>{o(!0);const N=new vr("p","mm","a4"),B=20,R=N.internal.pageSize.getHeight(),D=N.internal.pageSize.getWidth(),O=D-B*2;let L=B;const M=K=>{K.setFillColor(230,230,230),K.rect(0,0,D,25,"F"),K.setFontSize(9),K.setTextColor(0,0,0),K.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),K.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-B,15,{align:"right"})};M(N),L=30,N.setTextColor(0,0,0),N.setFont("helvetica","bold"),N.setFontSize(16),N.text(E.nombre,D/2,L,{align:"center"}),L+=10,bo(N,{startY:L,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:K=>{M(N)}}),L=N.lastAutoTable.finalY+10;const J=K=>{L+K>R-B&&(N.addPage(),M(N),L=B+15,N.setTextColor(0,0,0))},V=(K,z)=>{N.setFont("helvetica",z.isBold?"bold":"normal"),N.setFontSize(z.fontSize);const G=Array.isArray(K)?K.join(`
`):K;return N.getTextDimensions(G,{maxWidth:z.width}).h};for(const K of E.actividades){let z=V(K.titulo,{fontSize:12,width:O,isBold:!0})+V(K.instrucciones,{fontSize:10,width:O})+12;J(z),N.setFont("helvetica","bold"),N.setFontSize(12),N.setTextColor(0,0,0),N.text(K.titulo,B,L),L+=8,N.setFont("helvetica","normal"),N.setFontSize(10);const G=N.splitTextToSize(K.instrucciones,O);N.text(G,B,L),L+=G.length*(10*.35*1.15)+4;for(const[Y,te]of K.items.entries()){let P=0;const H=`${Y+1}. ${te.pregunta} (${te.puntaje} pts)`;switch(P+=V(H,{fontSize:10,width:O,isBold:!0}),te.tipo){case"Selección múltiple":te.opciones.forEach(ae=>{P+=V(ae,{fontSize:10,width:O-5})+3}),P+=7;break;case"Verdadero o Falso":P+=10;break;case"Desarrollo":P+=30;break;case"Términos pareados":P+=te.pares.length*12+20;break;case"Comprensión de lectura":const Z=te;P+=V(Z.texto,{fontSize:10,width:O-10})+10,Z.preguntas.forEach(ae=>{const le=`${ae.pregunta} (${ae.puntaje} pts)`;P+=V(le,{fontSize:10,width:O-5,isBold:!0}),ae.tipo==="Selección múltiple"?(ae.opciones.forEach(ie=>{P+=V(ie,{fontSize:10,width:O-10})+3}),P+=7):ae.tipo==="Desarrollo"&&(P+=30),P+=5}),P+=15;break}J(P),N.setFont("helvetica","bold"),N.setFontSize(10),N.setTextColor(0,0,0);const X=N.splitTextToSize(H,O);if(N.text(X,B,L),L+=X.length*5+4,N.setFont("helvetica","normal"),te.tipo==="Selección múltiple")te.opciones.forEach((Z,ae)=>{N.text(`${String.fromCharCode(65+ae)}) ${Z}`,B+5,L),L+=7});else if(te.tipo==="Verdadero o Falso")N.text("V ______    F ______",B+5,L),L+=10;else if(te.tipo==="Desarrollo")N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(B,L,O,25,"FD"),L+=30;else if(te.tipo==="Términos pareados"){const Z=[...te.pares.map(le=>le.definicion)].sort(()=>Math.random()-.5),ae=te.pares.map((le,ie)=>[`${ie+1}. ${le.concepto}`,`(   ) ${Z[ie]}`]);bo(N,{startY:L,head:[["Columna A: Concepto","Columna B: Definición"]],body:ae,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:le=>M(N)}),L=N.lastAutoTable.finalY+10}else if(te.tipo==="Comprensión de lectura"){const Z=te;N.setFillColor(240,240,240),N.setDrawColor(200,200,200);const ae=N.splitTextToSize(Z.texto,O-10),le=ae.length*(10*.35*1.15)+8;N.rect(B,L,O,le,"FD"),L+=4,N.setFont("helvetica","normal"),N.setFontSize(10),N.setTextColor(0,0,0),N.text(ae,B+5,L),L+=le;for(const[ie,ce]of Z.preguntas.entries()){const fe=`${ie+1}. ${ce.pregunta} (${ce.puntaje} pts)`;N.setFont("helvetica","bold");const Ie=N.splitTextToSize(fe,O-5);N.text(Ie,B+5,L),L+=Ie.length*5+4,N.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((ne,_e)=>{N.text(`${String.fromCharCode(65+_e)}) ${ne}`,B+10,L),L+=7}):ce.tipo==="Desarrollo"&&(N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(B+5,L,O-5,25,"FD"),L+=30)}}L+=5}}N.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(RMe,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:j,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>I(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(yee,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),l.jsx("div",{className:"space-y-6",children:E.items.map((N,B)=>l.jsx(LMe,{item:N,index:B,showAnswers:d},N.id))})]},E.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:p.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Wi.map(E=>l.jsx("option",{children:E},E))}),l.jsx("select",{name:"nivel",value:p.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:TQ.map(E=>l.jsx("option",{children:E},E))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,N)=>l.jsx("button",{type:"button",onClick:()=>g(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${N===0?"rounded-l-lg":""} ${N===2?"rounded-r-lg":""}
                                            ${p.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.isNee,onChange:E=>g(N=>({...N,isNee:E.target.checked,selectedNee:E.target.checked?N.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:aN.map(E=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),l.jsx("textarea",{name:"contenido",value:p.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:PMe.map(E=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[E],onChange:()=>b(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),p.tiposActividad[E]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),nK[E].map(N=>l.jsx("button",{type:"button",onClick:()=>y(E,N),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[E]===N?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:N},N))]})]},E))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>k(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},UMe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=S.useState(null),[i,o]=S.useState("list"),[c,u]=S.useState(!1),[d,f]=S.useState(""),h=async(k,I)=>{if(!k.trim()||!I.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${k}" con el propósito de "${I}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{h1("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new cs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),J=JSON.parse(M),V={id:crypto.randomUUID(),titulo:k,descripcion:I,fechaCreacion:new Date().toISOString(),dimensiones:J.map(K=>({id:crypto.randomUUID(),nombre:K.dimension,niveles:{insuficiente:K.insuficiente,suficiente:K.suficiente,competente:K.competente,avanzado:K.avanzado}}))};s(V)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const k=crypto.randomUUID(),I={id:k,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(B=>B?{...B,dimensiones:[...B.dimensiones,I]}:null),f("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{h1("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new cs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),J=JSON.parse(M);s(V=>V?{...V,dimensiones:V.dimensiones.map(K=>K.id===k?{...K,niveles:J,isLoading:!1}:K)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),s(R=>R?{...R,dimensiones:R.dimensiones.filter(D=>D.id!==k)}:null)}},g=()=>{if(!a)return;e.some(I=>I.id===a.id)?t(a):n(a),o("list"),s(null)},x=k=>{s(k),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(k,I,E)=>{a&&s(N=>N?{...N,dimensiones:N.dimensiones.map(B=>B.id!==k?B:I==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[I]:E}})}:null)},w=(k,I)=>{s(E=>E?{...E,[k]:I}:null)},_=k=>{a&&s(I=>I?{...I,dimensiones:I.dimensiones.filter(E=>E.id!==k)}:null)},j=()=>{if(!a)return null;const k="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",I=`${k} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${k} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${k} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:E.nombre,onChange:N=>y(E.id,"nombre",N.target.value),rows:4,className:I})}),Object.keys(E.niveles).map(N=>l.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:E.niveles[N],onChange:B=>y(E.id,N,B.target.value),rows:4,className:I})},N)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>_(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${k} mt-1`})]}),l.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(k=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:k.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>x(k),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(k.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},k.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):j()},QMe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(null),[i,o]=S.useState(null),[c,u]=S.useState({rubricaEstaticaId:"",curso:""}),[d,f]=S.useState(null);S.useEffect(()=>{const w=IMe(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const _=t.find(k=>k.id===c.rubricaEstaticaId);if(!_||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const j={nombre:_.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:_.id,resultados:{}};try{await OMe(j),u({rubricaEstaticaId:"",curso:""})}catch(k){console.error(k),alert("No se pudo crear la evaluación con rúbrica.")}},p=w=>{s(w),o(JSON.parse(JSON.stringify(w)))},g=(w,_,j)=>{i&&o(k=>{if(!k)return null;const I=JSON.parse(JSON.stringify(k));return I.resultados[w]||(I.resultados[w]={puntajes:{},feedback:""}),I.resultados[w].puntajes[_]=j,I})},x=async()=>{if(i)try{await FMe(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},b=S.useCallback(w=>{const _=i,j=t.find(R=>R.id===(_==null?void 0:_.rubricaEstaticaId));if(!_||!j)return{score:0,maxScore:0,grade:"N/A"};const k=j.dimensiones.length*4,I=_.resultados[w];if(!I)return{score:0,maxScore:k,grade:"1.0"};const E=Object.values(I.puntajes).reduce((R,D)=>R+D,0),N=1+6*(E/k),B=k>0?N.toFixed(1):"1.0";return{score:E,maxScore:k,grade:B}},[i,t]),y=async w=>{if(!i)return;const _=t.find(E=>E.id===i.rubricaEstaticaId),j=i.resultados[w];if(!_||!j||Object.keys(j.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const I=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${_.dimensiones.map(E=>`${E.nombre}: ${j.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${_.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{h1("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",O=(await(await new cs(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(I)).response).text();o(L=>{if(!L)return null;const M=JSON.parse(JSON.stringify(L));return M.resultados[w].feedback=O.replace(/(\*\*|\*)/g,""),M})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const w=t.find(j=>j.id===a.rubricaEstaticaId),_=e.filter(j=>j.profile===Wt.ESTUDIANTE&&A5(j.curso||"")===a.curso).map(j=>j.nombreCompleto).sort();return w?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(j=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:j.nombre},j.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:_.map(j=>{var N;const{score:k,maxScore:I,grade:E}=b(j);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:j}),w.dimensiones.map(B=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(R=>{var D;return l.jsx("button",{onClick:()=>g(j,B.id,R),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[j])==null?void 0:D.puntajes[B.id])===R?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:R},R)})})},B.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[k,"/",I]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((N=i.resultados[j])==null?void 0:N.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>y(j),disabled:d===j,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===j?"...":"Generar IA"})]})})]},j)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>l.jsx("option",{value:w.id,children:w.titulo},w.id))]}),l.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),Ks.map(w=>l.jsx("option",{value:w,children:w},w))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(w=>l.jsxs("button",{onClick:()=>p(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:w.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},HMe=({allUsers:e})=>{const[t,r]=S.useState(""),n=S.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Wt.ESTUDIANTE&&s.curso).map(s=>A5(s.curso)))).sort(),[e]),a=S.useMemo(()=>{const s=e.filter(i=>i.profile===Wt.ESTUDIANTE);return t?s.filter(i=>A5(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:A5(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},VMe=()=>{const[e,t]=S.useState("pruebas"),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0);S.useEffect(()=>{o(!0);const f=DMe(n),h=jMe(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await BMe(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await TMe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>l.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(MMe,{}),e==="rubricas"&&l.jsx(UMe,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(QMe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(HMe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var JN={};JN.version="0.18.5";var fie=1252,zMe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],e8={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},t8=function(e){zMe.indexOf(e)!=-1&&(fie=e8[0]=e)};function $Me(){t8(1252)}var kd=function(e){t8(e)};function r8(){kd(1200),$Me()}function aK(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function GMe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function hie(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Py=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?GMe(e.slice(2)):t==254&&r==255?hie(e.slice(2)):t==65279?e.slice(1):e},ZC=function(t){return String.fromCharCode(t)},sK=function(t){return String.fromCharCode(t)},e2,W0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t2(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=W0.charAt(s)+W0.charAt(i)+W0.charAt(o)+W0.charAt(c);return t}function $c(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=W0.indexOf(e.charAt(u++)),i=W0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=W0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=W0.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var gn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Mh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function km(e){return gn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function iK(e){return gn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Dc=function(t){return gn?Mh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function vk(e){if(typeof ArrayBuffer>"u")return Dc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Gm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function KMe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function n8(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return n8(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var qi=gn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Mh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function qMe(e){for(var t=[],r=0,n=e.length+250,a=km(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=km(65535),n=65530)}return t.push(a.slice(0,r)),qi(t)}var Cl=/\u0000/g,Ry=/[\u0001-\u0006]/g;function Ov(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function jd(e,t){var r=""+e;return r.length>=t?r:Ns("0",t-r.length)+r}function a8(e,t){var r=""+e;return r.length>=t?r:Ns(" ",t-r.length)+r}function ZN(e,t){var r=""+e;return r.length>=t?r:r+Ns(" ",t-r.length)}function WMe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ns("0",t-r.length)+r}function XMe(e,t){var r=""+e;return r.length>=t?r:Ns("0",t-r.length)+r}var oK=Math.pow(2,32);function Tx(e,t){if(e>oK||e<-oK)return WMe(e,t);var r=Math.round(e);return XMe(r,t)}function eS(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var lK=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],JT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function YMe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Mr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},cK={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},JMe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function tS(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Up(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=aUe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var mie=new Date(1899,11,31,0,0,0),ZMe=mie.getTime(),eUe=new Date(1900,2,1,0,0,0);function pie(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=eUe&&(r+=1440*60*1e3),(r-(ZMe+(e.getTimezoneOffset()-mie.getTimezoneOffset())*6e4))/(1440*60*1e3)}function s8(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tUe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function rUe(e){var t=e<0?12:11,r=s8(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function nUe(e){var t=s8(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function r2(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=rUe(e):t===10?r=e.toFixed(10).substr(0,12):r=nUe(e),s8(tUe(r.toUpperCase()))}function yg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):r2(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return zu(14,pie(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function aUe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function sUe(e,t,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return JT[r.m-1][1];case 5:return JT[r.m-1][0];default:return JT[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return lK[r.q][0];default:return lK[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?jd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=jd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?jd(c,u):"";return d}function X0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var gie=/%/g;function iUe(e,t,r){var n=t.replace(gie,""),a=t.length-n.length;return ch(e,n,r*Math.pow(10,2*a))+Ns("%",a)}function oUe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ch(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function xie(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+xie(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var vie=/# (\?+)( ?)\/( ?)(\d+)/;function lUe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ns(" ",e[1].length+1+e[4].length):a8(i,e[1].length)+e[2]+"/"+e[3]+jd(o,e[4].length))}function cUe(e,t,r){return r+(t===0?"":""+t)+Ns(" ",e[1].length+2+e[4].length)}var bie=/^#*0*\.([0#]+)/,yie=/\).*[0#]/,wie=/\(###\) ###\\?-####/;function ml(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function uK(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function dK(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function uUe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function dUe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Cu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(yie)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cu("n",n,r):"("+Cu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return oUe(e,t,r);if(t.indexOf("%")!==-1)return iUe(e,t,r);if(t.indexOf("E")!==-1)return xie(t,r);if(t.charCodeAt(0)===36)return"$"+Cu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Tx(c,t.length);if(t.match(/^[#?]+$/))return a=Tx(r,0),a==="0"&&(a=""),a.length>t.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(vie))return lUe(s,c,u);if(t.match(/^#+0+$/))return u+Tx(c,t.length-t.indexOf("0"));if(s=t.match(bie))return a=uK(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ml(s[1])).replace(/\.$/,"."+ml(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ns("0",ml(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+uK(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+X0(Tx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cu(e,t,-r):X0(""+(Math.floor(r)+uUe(r,s[1].length)))+"."+jd(dK(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Cu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Ov(Cu(e,t.replace(/[\\-]/g,""),r)),i=0,Ov(Ov(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(wie))return a=Cu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=tS(c,Math.pow(10,i)-1,!1),a=""+u,d=ch("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=ZN(o[2],i),d.length<s[4].length&&(d=ml(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=tS(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?a8(o[1],i)+s[2]+"/"+s[3]+ZN(o[2],i):Ns(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Tx(r,0),t.length<=a.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ml(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=dK(r,s[1].length),r<0?"-"+Cu(e,t,-r):X0(dUe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?jd(0,3-g.length):"")+g})+"."+jd(i,s[1].length);switch(t){case"###,##0.00":return Cu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=X0(Tx(c,0));return p!=="0"?u+p:"";case"###,###.00":return Cu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Cu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function AUe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ch(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function fUe(e,t,r){var n=t.replace(gie,""),a=t.length-n.length;return ch(e,n,r*Math.pow(10,2*a))+Ns("%",a)}function Eie(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Eie(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function TA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(yie)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?TA("n",n,r):"("+TA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return AUe(e,t,r);if(t.indexOf("%")!==-1)return fUe(e,t,r);if(t.indexOf("E")!==-1)return Eie(t,r);if(t.charCodeAt(0)===36)return"$"+TA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+jd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(vie))return cUe(s,c,u);if(t.match(/^#+0+$/))return u+jd(c,t.length-t.indexOf("0"));if(s=t.match(bie))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ml(s[1])).replace(/\.$/,"."+ml(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Ns("0",ml(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+X0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+TA(e,t,-r):X0(""+r)+"."+Ns("0",s[1].length);if(s=t.match(/^#,#*,#0/))return TA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Ov(TA(e,t.replace(/[\\-]/g,""),r)),i=0,Ov(Ov(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(wie))return a=TA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=tS(c,Math.pow(10,i)-1,!1),a=""+u,d=ch("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=ZN(o[2],i),d.length<s[4].length&&(d=ml(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=tS(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?a8(o[1],i)+s[2]+"/"+s[3]+ZN(o[2],i):Ns(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ml(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+TA(e,t,-r):X0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?jd(0,3-g.length):"")+g})+"."+jd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=X0(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return TA(e,t.slice(0,t.lastIndexOf(".")),r)+ml(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ch(e,t,r){return(r|0)===r?TA(e,t,r):Cu(e,t,r)}function hUe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Cie=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ab(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":eS(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Cie))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function mUe(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!eS(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Up(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Up(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(u==null&&(u=Up(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Cie)){if(u==null&&(u=Up(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ab(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",b<1&&(b=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",j;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=sUe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(j=i+1;a[j]!=null&&((o=a[j].t)==="?"||o==="D"||(o===" "||o==="t")&&a[j+1]!=null&&(a[j+1].t==="?"||a[j+1].t==="t"&&a[j+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[j].v==="/"||a[j].v===" "&&a[j+1]!=null&&a[j+1].t=="?"));)a[i].v+=a[j].v,a[j]={v:"",t:";"},++j;_+=a[i].v,i=j-1;break;case"G":a[i].t="t",a[i].v=yg(t,r);break}var k="",I,E;if(_.length>0){_.charCodeAt(0)==40?(I=t<0&&_.charCodeAt(0)===45?-t:t,E=ch("n",_,I)):(I=t<0&&n>1?-t:t,E=ch("n",_,I),I<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),j=E.length-1;var N=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){N=i;break}var B=a.length;if(N===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(j>=a[i].v.length-1?(j-=a[i].v.length,a[i].v=E.substr(j+1,a[i].v.length)):j<0?a[i].v="":(a[i].v=E.substr(0,j+1),j=-1),a[i].t="t",B=i);j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v)}else if(N!==a.length&&E.indexOf("E")===-1){for(j=E.indexOf(".")-1,i=N;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")-1:a[i].v.length-1,k=a[i].v.substr(d+1);d>=0;--d)j>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(k=E.charAt(j--)+k);a[i].v=k,a[i].t="t",B=i}for(j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v),j=E.indexOf(".")+1,i=N;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==N)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")+1:0,k=a[i].v.substr(0,d);d<a[i].v.length;++d)j<E.length&&(k+=E.charAt(j++));a[i].v=k,a[i].t="t",B=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=ch(a[i].t,a[i].v,I),a[i].t="t");var R="";for(i=0;i!==a.length;++i)a[i]!=null&&(R+=a[i].v);return R}var AK=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function fK(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function pUe(e,t){var r=hUe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(AK),o=r[1].match(AK);return fK(t,i)?[n,r[0]]:fK(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function zu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mr)[e],n==null&&(n=r.table&&r.table[cK[e]]||Mr[cK[e]]),n==null&&(n=JMe[e]||"General");break}if(eS(n,0))return yg(t,r);t instanceof Date&&(t=pie(t,r.date1904));var a=pUe(n,t);if(eS(a[1]))return yg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return mUe(a[1],t,r,a[0])}function uh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Mr[r]==null){t<0&&(t=r);continue}if(Mr[r]==e){t=r;break}}t<0&&(t=391)}return Mr[t]=e,t}function bk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&uh(e[t],t)}function sb(){Mr=YMe()}var gUe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},_ie=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function xUe(e){var t=typeof e=="number"?Mr[e]:e;return t=t.replace(_ie,"(\\d+)"),new RegExp("^"+t+"$")}function vUe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(_ie)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:a=p;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var bUe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,N=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,N[B]=E;return typeof Int32Array<"u"?new Int32Array(N):N}var r=t();function n(E){var N=0,B=0,R=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)D[R]=E[R];for(R=0;R!=256;++R)for(B=E[R],N=256+R;N<4096;N+=256)B=D[N]=B>>>8^E[B&255];var O=[];for(R=1;R!=16;++R)O[R-1]=typeof Int32Array<"u"?D.subarray(R*256,R*256+256):D.slice(R*256,R*256+256);return O}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],x=a[10],b=a[11],y=a[12],w=a[13],_=a[14];function j(E,N){for(var B=N^-1,R=0,D=E.length;R<D;)B=B>>>8^r[(B^E.charCodeAt(R++))&255];return~B}function k(E,N){for(var B=N^-1,R=E.length-15,D=0;D<R;)B=_[E[D++]^B&255]^w[E[D++]^B>>8&255]^y[E[D++]^B>>16&255]^b[E[D++]^B>>>24]^x[E[D++]]^g[E[D++]]^p[E[D++]]^h[E[D++]]^f[E[D++]]^d[E[D++]]^u[E[D++]]^c[E[D++]]^o[E[D++]]^i[E[D++]]^s[E[D++]]^r[E[D++]];for(R+=15;D<R;)B=B>>>8^r[(B^E[D++])&255];return~B}function I(E,N){for(var B=N^-1,R=0,D=E.length,O=0,L=0;R<D;)O=E.charCodeAt(R++),O<128?B=B>>>8^r[(B^O)&255]:O<2048?(B=B>>>8^r[(B^(192|O>>6&31))&255],B=B>>>8^r[(B^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,L=E.charCodeAt(R++)&1023,B=B>>>8^r[(B^(240|O>>8&7))&255],B=B>>>8^r[(B^(128|O>>2&63))&255],B=B>>>8^r[(B^(128|L>>6&15|(O&3)<<4))&255],B=B>>>8^r[(B^(128|L&63))&255]):(B=B>>>8^r[(B^(224|O>>12&15))&255],B=B>>>8^r[(B^(128|O>>6&63))&255],B=B>>>8^r[(B^(128|O&63))&255]);return~B}return e.table=r,e.bstr=j,e.buf=k,e.str=I,e}(),_r=function(){var t={};t.version="1.2.1";function r(he,je){for(var Ce=he.split("/"),we=je.split("/"),Ne=0,Be=0,Ye=Math.min(Ce.length,we.length);Ne<Ye;++Ne){if(Be=Ce[Ne].length-we[Ne].length)return Be;if(Ce[Ne]!=we[Ne])return Ce[Ne]<we[Ne]?-1:1}return Ce.length-we.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var je=he.lastIndexOf("/");return je===-1?he:he.slice(0,je+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var je=he.lastIndexOf("/");return je===-1?he:he.slice(je+1)}function s(he,je){typeof je=="string"&&(je=new Date(je));var Ce=je.getHours();Ce=Ce<<6|je.getMinutes(),Ce=Ce<<5|je.getSeconds()>>>1,he.write_shift(2,Ce);var we=je.getFullYear()-1980;we=we<<4|je.getMonth()+1,we=we<<5|je.getDate(),he.write_shift(2,we)}function i(he){var je=he.read_shift(2)&65535,Ce=he.read_shift(2)&65535,we=new Date,Ne=Ce&31;Ce>>>=5;var Be=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(Be-1),we.setDate(Ne);var Ye=je&31;je>>>=5;var dt=je&63;return je>>>=6,we.setHours(je),we.setMinutes(dt),we.setSeconds(Ye<<1),we}function o(he){xo(he,0);for(var je={},Ce=0;he.l<=he.length-4;){var we=he.read_shift(2),Ne=he.read_shift(2),Be=he.l+Ne,Ye={};switch(we){case 21589:Ce=he.read_shift(1),Ce&1&&(Ye.mtime=he.read_shift(4)),Ne>5&&(Ce&2&&(Ye.atime=he.read_shift(4)),Ce&4&&(Ye.ctime=he.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}he.l=Be,je[we]=Ye}return je}var c;function u(){return c||(c={})}function d(he,je){if(he[0]==80&&he[1]==75)return hn(he,je);if((he[0]|32)==109&&(he[1]|32)==105)return Et(he,je);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ce=3,we=512,Ne=0,Be=0,Ye=0,dt=0,$e=0,rt=[],it=he.slice(0,512);xo(it,0);var Ft=f(it);switch(Ce=Ft[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Ft[1]==0)return hn(he,je);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(it=he.slice(0,we),xo(it,28));var Vt=he.slice(0,we);h(it,Ce);var Jt=it.read_shift(4,"i");if(Ce===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);it.l+=4,Ye=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),dt=it.read_shift(4,"i"),Ne=it.read_shift(4,"i"),$e=it.read_shift(4,"i"),Be=it.read_shift(4,"i");for(var Ht=-1,Gt=0;Gt<109&&(Ht=it.read_shift(4,"i"),!(Ht<0));++Gt)rt[Gt]=Ht;var Sr=p(he,we);b($e,Be,Sr,we,rt);var sn=w(Sr,Ye,rt,we);sn[Ye].name="!Directory",Ne>0&&dt!==L&&(sn[dt].name="!MiniFAT"),sn[rt[0]].name="!FAT",sn.fat_addrs=rt,sn.ssz=we;var on={},An=[],hs=[],Co=[];_(Ye,sn,Sr,An,Ne,on,hs,dt),g(hs,Co,An),An.shift();var ms={FileIndex:hs,FullPaths:Co};return je&&je.raw&&(ms.raw={header:Vt,sectors:Sr}),ms}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(M,"Header Signature: "),he.l+=16;var je=he.read_shift(2,"u");return[he.read_shift(2,"u"),je]}function h(he,je){var Ce=9;switch(he.l+=2,Ce=he.read_shift(2)){case 9:if(je!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(je!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function p(he,je){for(var Ce=Math.ceil(he.length/je)-1,we=[],Ne=1;Ne<Ce;++Ne)we[Ne-1]=he.slice(Ne*je,(Ne+1)*je);return we[Ce-1]=he.slice(Ce*je),we}function g(he,je,Ce){for(var we=0,Ne=0,Be=0,Ye=0,dt=0,$e=Ce.length,rt=[],it=[];we<$e;++we)rt[we]=it[we]=we,je[we]=Ce[we];for(;dt<it.length;++dt)we=it[dt],Ne=he[we].L,Be=he[we].R,Ye=he[we].C,rt[we]===we&&(Ne!==-1&&rt[Ne]!==Ne&&(rt[we]=rt[Ne]),Be!==-1&&rt[Be]!==Be&&(rt[we]=rt[Be])),Ye!==-1&&(rt[Ye]=we),Ne!==-1&&we!=rt[we]&&(rt[Ne]=rt[we],it.lastIndexOf(Ne)<dt&&it.push(Ne)),Be!==-1&&we!=rt[we]&&(rt[Be]=rt[we],it.lastIndexOf(Be)<dt&&it.push(Be));for(we=1;we<$e;++we)rt[we]===we&&(Be!==-1&&rt[Be]!==Be?rt[we]=rt[Be]:Ne!==-1&&rt[Ne]!==Ne&&(rt[we]=rt[Ne]));for(we=1;we<$e;++we)if(he[we].type!==0){if(dt=we,dt!=rt[dt])do dt=rt[dt],je[we]=je[dt]+"/"+je[we];while(dt!==0&&rt[dt]!==-1&&dt!=rt[dt]);rt[we]=-1}for(je[0]+="/",we=1;we<$e;++we)he[we].type!==2&&(je[we]+="/")}function x(he,je,Ce){for(var we=he.start,Ne=he.size,Be=[],Ye=we;Ce&&Ne>0&&Ye>=0;)Be.push(je.slice(Ye*O,Ye*O+O)),Ne-=O,Ye=Tp(Ce,Ye*4);return Be.length===0?Ct(0):qi(Be).slice(0,he.size)}function b(he,je,Ce,we,Ne){var Be=L;if(he===L){if(je!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Ye=Ce[he],dt=(we>>>2)-1;if(!Ye)return;for(var $e=0;$e<dt&&(Be=Tp(Ye,$e*4))!==L;++$e)Ne.push(Be);b(Tp(Ye,we-4),je-1,Ce,we,Ne)}}function y(he,je,Ce,we,Ne){var Be=[],Ye=[];Ne||(Ne=[]);var dt=we-1,$e=0,rt=0;for($e=je;$e>=0;){Ne[$e]=!0,Be[Be.length]=$e,Ye.push(he[$e]);var it=Ce[Math.floor($e*4/we)];if(rt=$e*4&dt,we<4+rt)throw new Error("FAT boundary crossed: "+$e+" 4 "+we);if(!he[it])break;$e=Tp(he[it],rt)}return{nodes:Be,data:_K([Ye])}}function w(he,je,Ce,we){var Ne=he.length,Be=[],Ye=[],dt=[],$e=[],rt=we-1,it=0,Ft=0,Vt=0,Jt=0;for(it=0;it<Ne;++it)if(dt=[],Vt=it+je,Vt>=Ne&&(Vt-=Ne),!Ye[Vt]){$e=[];var Ht=[];for(Ft=Vt;Ft>=0;){Ht[Ft]=!0,Ye[Ft]=!0,dt[dt.length]=Ft,$e.push(he[Ft]);var Gt=Ce[Math.floor(Ft*4/we)];if(Jt=Ft*4&rt,we<4+Jt)throw new Error("FAT boundary crossed: "+Ft+" 4 "+we);if(!he[Gt]||(Ft=Tp(he[Gt],Jt),Ht[Ft]))break}Be[Vt]={nodes:dt,data:_K([$e])}}return Be}function _(he,je,Ce,we,Ne,Be,Ye,dt){for(var $e=0,rt=we.length?2:0,it=je[he].data,Ft=0,Vt=0,Jt;Ft<it.length;Ft+=128){var Ht=it.slice(Ft,Ft+128);xo(Ht,64),Vt=Ht.read_shift(2),Jt=A8(Ht,0,Vt-rt),we.push(Jt);var Gt={name:Jt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},Sr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);Sr!==0&&(Gt.ct=j(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(Gt.mt=j(Ht,Ht.l-8)),Gt.start=Ht.read_shift(4,"i"),Gt.size=Ht.read_shift(4,"i"),Gt.size<0&&Gt.start<0&&(Gt.size=Gt.type=0,Gt.start=L,Gt.name=""),Gt.type===5?($e=Gt.start,Ne>0&&$e!==L&&(je[$e].name="!StreamData")):Gt.size>=4096?(Gt.storage="fat",je[Gt.start]===void 0&&(je[Gt.start]=y(Ce,Gt.start,je.fat_addrs,je.ssz)),je[Gt.start].name=Gt.name,Gt.content=je[Gt.start].data.slice(0,Gt.size)):(Gt.storage="minifat",Gt.size<0?Gt.size=0:$e!==L&&Gt.start!==L&&je[$e]&&(Gt.content=x(Gt,je[$e].data,(je[dt]||{}).data))),Gt.content&&xo(Gt.content,0),Be[Jt]=Gt,Ye.push(Gt)}}function j(he,je){return new Date((Tc(he,je+4)/1e7*Math.pow(2,32)+Tc(he,je)/1e7-11644473600)*1e3)}function k(he,je){return u(),d(c.readFileSync(he),je)}function I(he,je){var Ce=je&&je.type;switch(Ce||gn&&Buffer.isBuffer(he)&&(Ce="buffer"),Ce||"base64"){case"file":return k(he,je);case"base64":return d(Dc($c(he)),je);case"binary":return d(Dc(he),je)}return d(he,je)}function E(he,je){var Ce=je||{},we=Ce.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=we+"/",he.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(he.FileIndex[0].clsid=Ce.CLSID),N(he)}function N(he){var je="Sh33tJ5";if(!_r.find(he,"/"+je)){var Ce=Ct(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,he.FileIndex.push({name:je,type:2,content:Ce,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+je),B(he)}}function B(he,je){E(he);for(var Ce=!1,we=!1,Ne=he.FullPaths.length-1;Ne>=0;--Ne){var Be=he.FileIndex[Ne];switch(Be.type){case 0:we?Ce=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Be.R*Be.L*Be.C)&&(Ce=!0),Be.R>-1&&Be.L>-1&&Be.R==Be.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!je)){var Ye=new Date(1987,1,19),dt=0,$e=Object.create?Object.create(null):{},rt=[];for(Ne=0;Ne<he.FullPaths.length;++Ne)$e[he.FullPaths[Ne]]=!0,he.FileIndex[Ne].type!==0&&rt.push([he.FullPaths[Ne],he.FileIndex[Ne]]);for(Ne=0;Ne<rt.length;++Ne){var it=n(rt[Ne][0]);we=$e[it],we||(rt.push([it,{name:a(it).replace("/",""),type:1,clsid:V,ct:Ye,mt:Ye,content:null}]),$e[it]=!0)}for(rt.sort(function(Jt,Ht){return r(Jt[0],Ht[0])}),he.FullPaths=[],he.FileIndex=[],Ne=0;Ne<rt.length;++Ne)he.FullPaths[Ne]=rt[Ne][0],he.FileIndex[Ne]=rt[Ne][1];for(Ne=0;Ne<rt.length;++Ne){var Ft=he.FileIndex[Ne],Vt=he.FullPaths[Ne];if(Ft.name=a(Vt).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||V,Ne===0)Ft.C=rt.length>1?1:-1,Ft.size=0,Ft.type=5;else if(Vt.slice(-1)=="/"){for(dt=Ne+1;dt<rt.length&&n(he.FullPaths[dt])!=Vt;++dt);for(Ft.C=dt>=rt.length?-1:dt,dt=Ne+1;dt<rt.length&&n(he.FullPaths[dt])!=n(Vt);++dt);Ft.R=dt>=rt.length?-1:dt,Ft.type=1}else n(he.FullPaths[Ne+1]||"")==n(Vt)&&(Ft.R=Ne+1),Ft.type=2}}}function R(he,je){var Ce=je||{};if(Ce.fileType=="mad")return bt(he,Ce);switch(B(he),Ce.fileType){case"zip":return ja(he,Ce)}var we=function(Jt){for(var Ht=0,Gt=0,Sr=0;Sr<Jt.FileIndex.length;++Sr){var sn=Jt.FileIndex[Sr];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:Gt+=on+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,hs=Ht+7>>3,Co=Ht+127>>7,ms=hs+Gt+An+Co,Zs=ms+127>>7,Ts=Zs<=109?0:Math.ceil((Zs-109)/127);ms+Zs+Ts+127>>7>Zs;)Ts=++Zs<=109?0:Math.ceil((Zs-109)/127);var gi=[1,Ts,Zs,Co,An,Gt,Ht,0];return Jt.FileIndex[0].size=Ht<<6,gi[7]=(Jt.FileIndex[0].start=gi[0]+gi[1]+gi[2]+gi[3]+gi[4]+gi[5])+(gi[6]+7>>3),gi}(he),Ne=Ct(we[7]<<9),Be=0,Ye=0;{for(Be=0;Be<8;++Be)Ne.write_shift(1,J[Be]);for(Be=0;Be<8;++Be)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Be=0;Be<3;++Be)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,we[2]),Ne.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:L),Ne.write_shift(4,we[3]),Ne.write_shift(-4,we[1]?we[0]-1:L),Ne.write_shift(4,we[1]),Be=0;Be<109;++Be)Ne.write_shift(-4,Be<we[2]?we[1]+Be:-1)}if(we[1])for(Ye=0;Ye<we[1];++Ye){for(;Be<236+Ye*127;++Be)Ne.write_shift(-4,Be<we[2]?we[1]+Be:-1);Ne.write_shift(-4,Ye===we[1]-1?L:Ye+1)}var dt=function(Jt){for(Ye+=Jt;Be<Ye-1;++Be)Ne.write_shift(-4,Be+1);Jt&&(++Be,Ne.write_shift(-4,L))};for(Ye=Be=0,Ye+=we[1];Be<Ye;++Be)Ne.write_shift(-4,K.DIFSECT);for(Ye+=we[2];Be<Ye;++Be)Ne.write_shift(-4,K.FATSECT);dt(we[3]),dt(we[4]);for(var $e=0,rt=0,it=he.FileIndex[0];$e<he.FileIndex.length;++$e)it=he.FileIndex[$e],it.content&&(rt=it.content.length,!(rt<4096)&&(it.start=Ye,dt(rt+511>>9)));for(dt(we[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,K.ENDOFCHAIN);for(Ye=Be=0,$e=0;$e<he.FileIndex.length;++$e)it=he.FileIndex[$e],it.content&&(rt=it.content.length,!(!rt||rt>=4096)&&(it.start=Ye,dt(rt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,K.ENDOFCHAIN);for(Be=0;Be<we[4]<<2;++Be){var Ft=he.FullPaths[Be];if(!Ft||Ft.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}it=he.FileIndex[Be],Be===0&&(it.start=it.size?it.start-1:L);var Vt=Be===0&&Ce.root||it.name;if(rt=2*(Vt.length+1),Ne.write_shift(64,Vt,"utf16le"),Ne.write_shift(2,rt),Ne.write_shift(1,it.type),Ne.write_shift(1,it.color),Ne.write_shift(-4,it.L),Ne.write_shift(-4,it.R),Ne.write_shift(-4,it.C),it.clsid)Ne.write_shift(16,it.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,it.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,it.start),Ne.write_shift(4,it.size),Ne.write_shift(4,0)}for(Be=1;Be<he.FileIndex.length;++Be)if(it=he.FileIndex[Be],it.size>=4096)if(Ne.l=it.start+1<<9,gn&&Buffer.isBuffer(it.content))it.content.copy(Ne,Ne.l,0,it.size),Ne.l+=it.size+511&-512;else{for($e=0;$e<it.size;++$e)Ne.write_shift(1,it.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(Be=1;Be<he.FileIndex.length;++Be)if(it=he.FileIndex[Be],it.size>0&&it.size<4096)if(gn&&Buffer.isBuffer(it.content))it.content.copy(Ne,Ne.l,0,it.size),Ne.l+=it.size+63&-64;else{for($e=0;$e<it.size;++$e)Ne.write_shift(1,it.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(gn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function D(he,je){var Ce=he.FullPaths.map(function($e){return $e.toUpperCase()}),we=Ce.map(function($e){var rt=$e.split("/");return rt[rt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;je.charCodeAt(0)===47?(Ne=!0,je=Ce[0].slice(0,-1)+je):Ne=je.indexOf("/")!==-1;var Be=je.toUpperCase(),Ye=Ne===!0?Ce.indexOf(Be):we.indexOf(Be);if(Ye!==-1)return he.FileIndex[Ye];var dt=!Be.match(Ry);for(Be=Be.replace(Cl,""),dt&&(Be=Be.replace(Ry,"!")),Ye=0;Ye<Ce.length;++Ye)if((dt?Ce[Ye].replace(Ry,"!"):Ce[Ye]).replace(Cl,"")==Be||(dt?we[Ye].replace(Ry,"!"):we[Ye]).replace(Cl,"")==Be)return he.FileIndex[Ye];return null}var O=64,L=-2,M="d0cf11e0a1b11ae1",J=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",K={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(he,je,Ce){u();var we=R(he,Ce);c.writeFileSync(je,we)}function G(he){for(var je=new Array(he.length),Ce=0;Ce<he.length;++Ce)je[Ce]=String.fromCharCode(he[Ce]);return je.join("")}function Y(he,je){var Ce=R(he,je);switch(je&&je.type||"buffer"){case"file":return u(),c.writeFileSync(je.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:G(Ce);case"base64":return t2(typeof Ce=="string"?Ce:G(Ce));case"buffer":if(gn)return Buffer.isBuffer(Ce)?Ce:Mh(Ce);case"array":return typeof Ce=="string"?Dc(Ce):Ce}return Ce}var te;function P(he){try{var je=he.InflateRaw,Ce=new je;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)te=he;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function H(he,je){if(!te)return Pr(he,je);var Ce=te.InflateRaw,we=new Ce,Ne=we._processChunk(he.slice(he.l),we._finishFlushFlag);return he.l+=we.bytesRead,Ne}function X(he){return te?te.deflateRawSync(he):Qt(he)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(he){var je=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(je>>16|je>>8|je)&255}for(var ce=typeof Uint8Array<"u",fe=ce?new Uint8Array(256):[],Ie=0;Ie<256;++Ie)fe[Ie]=ie(Ie);function ne(he,je){var Ce=fe[he&255];return je<=8?Ce>>>8-je:(Ce=Ce<<8|fe[he>>8&255],je<=16?Ce>>>16-je:(Ce=Ce<<8|fe[he>>16&255],Ce>>>24-je))}function _e(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=6?0:he[we+1]<<8))>>>Ce&3}function Fe(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=5?0:he[we+1]<<8))>>>Ce&7}function Se(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=4?0:he[we+1]<<8))>>>Ce&15}function me(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=3?0:he[we+1]<<8))>>>Ce&31}function Te(he,je){var Ce=je&7,we=je>>>3;return(he[we]|(Ce<=1?0:he[we+1]<<8))>>>Ce&127}function Me(he,je,Ce){var we=je&7,Ne=je>>>3,Be=(1<<Ce)-1,Ye=he[Ne]>>>we;return Ce<8-we||(Ye|=he[Ne+1]<<8-we,Ce<16-we)||(Ye|=he[Ne+2]<<16-we,Ce<24-we)||(Ye|=he[Ne+3]<<24-we),Ye&Be}function We(he,je,Ce){var we=je&7,Ne=je>>>3;return we<=5?he[Ne]|=(Ce&7)<<we:(he[Ne]|=Ce<<we&255,he[Ne+1]=(Ce&7)>>8-we),je+3}function be(he,je,Ce){var we=je&7,Ne=je>>>3;return Ce=(Ce&1)<<we,he[Ne]|=Ce,je+1}function De(he,je,Ce){var we=je&7,Ne=je>>>3;return Ce<<=we,he[Ne]|=Ce&255,Ce>>>=8,he[Ne+1]=Ce,je+8}function Re(he,je,Ce){var we=je&7,Ne=je>>>3;return Ce<<=we,he[Ne]|=Ce&255,Ce>>>=8,he[Ne+1]=Ce&255,he[Ne+2]=Ce>>>8,je+16}function qe(he,je){var Ce=he.length,we=2*Ce>je?2*Ce:je+5,Ne=0;if(Ce>=je)return he;if(gn){var Be=iK(we);if(he.copy)he.copy(Be);else for(;Ne<he.length;++Ne)Be[Ne]=he[Ne];return Be}else if(ce){var Ye=new Uint8Array(we);if(Ye.set)Ye.set(he);else for(;Ne<Ce;++Ne)Ye[Ne]=he[Ne];return Ye}return he.length=we,he}function Ze(he){for(var je=new Array(he),Ce=0;Ce<he;++Ce)je[Ce]=0;return je}function ct(he,je,Ce){var we=1,Ne=0,Be=0,Ye=0,dt=0,$e=he.length,rt=ce?new Uint16Array(32):Ze(32);for(Be=0;Be<32;++Be)rt[Be]=0;for(Be=$e;Be<Ce;++Be)he[Be]=0;$e=he.length;var it=ce?new Uint16Array($e):Ze($e);for(Be=0;Be<$e;++Be)rt[Ne=he[Be]]++,we<Ne&&(we=Ne),it[Be]=0;for(rt[0]=0,Be=1;Be<=we;++Be)rt[Be+16]=dt=dt+rt[Be-1]<<1;for(Be=0;Be<$e;++Be)dt=he[Be],dt!=0&&(it[Be]=rt[dt+16]++);var Ft=0;for(Be=0;Be<$e;++Be)if(Ft=he[Be],Ft!=0)for(dt=ne(it[Be],we)>>we-Ft,Ye=(1<<we+4-Ft)-1;Ye>=0;--Ye)je[dt|Ye<<Ft]=Ft&15|Be<<4;return we}var pt=ce?new Uint16Array(512):Ze(512),It=ce?new Uint16Array(32):Ze(32);if(!ce){for(var Mt=0;Mt<512;++Mt)pt[Mt]=0;for(Mt=0;Mt<32;++Mt)It[Mt]=0}(function(){for(var he=[],je=0;je<32;je++)he.push(5);ct(he,It,32);var Ce=[];for(je=0;je<=143;je++)Ce.push(8);for(;je<=255;je++)Ce.push(9);for(;je<=279;je++)Ce.push(7);for(;je<=287;je++)Ce.push(8);ct(Ce,pt,288)})();var Pt=function(){for(var je=ce?new Uint8Array(32768):[],Ce=0,we=0;Ce<le.length-1;++Ce)for(;we<le[Ce+1];++we)je[we]=Ce;for(;we<32768;++we)je[we]=29;var Ne=ce?new Uint8Array(259):[];for(Ce=0,we=0;Ce<ae.length-1;++Ce)for(;we<ae[Ce+1];++we)Ne[we]=Ce;function Be(dt,$e){for(var rt=0;rt<dt.length;){var it=Math.min(65535,dt.length-rt),Ft=rt+it==dt.length;for($e.write_shift(1,+Ft),$e.write_shift(2,it),$e.write_shift(2,~it&65535);it-- >0;)$e[$e.l++]=dt[rt++]}return $e.l}function Ye(dt,$e){for(var rt=0,it=0,Ft=ce?new Uint16Array(32768):[];it<dt.length;){var Vt=Math.min(65535,dt.length-it);if(Vt<10){for(rt=We($e,rt,+(it+Vt==dt.length)),rt&7&&(rt+=8-(rt&7)),$e.l=rt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=dt[it++];rt=$e.l*8;continue}rt=We($e,rt,+(it+Vt==dt.length)+2);for(var Jt=0;Vt-- >0;){var Ht=dt[it];Jt=(Jt<<5^Ht)&32767;var Gt=-1,Sr=0;if((Gt=Ft[Jt])&&(Gt|=it&-32768,Gt>it&&(Gt-=32768),Gt<it))for(;dt[Gt+Sr]==dt[it+Sr]&&Sr<250;)++Sr;if(Sr>2){Ht=Ne[Sr],Ht<=22?rt=De($e,rt,fe[Ht+1]>>1)-1:(De($e,rt,3),rt+=5,De($e,rt,fe[Ht-23]>>5),rt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Re($e,rt,Sr-ae[Ht]),rt+=sn),Ht=je[it-Gt],rt=De($e,rt,fe[Ht]>>3),rt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Re($e,rt,it-Gt-le[Ht]),rt+=on);for(var An=0;An<Sr;++An)Ft[Jt]=it&32767,Jt=(Jt<<5^dt[it])&32767,++it;Vt-=Sr-1}else Ht<=143?Ht=Ht+48:rt=be($e,rt,1),rt=De($e,rt,fe[Ht]),Ft[Jt]=it&32767,++it}rt=De($e,rt,0)-1}return $e.l=(rt+7)/8|0,$e.l}return function($e,rt){return $e.length<8?Be($e,rt):Ye($e,rt)}}();function Qt(he){var je=Ct(50+Math.floor(he.length*1.1)),Ce=Pt(he,je);return je.slice(0,Ce)}var wt=ce?new Uint16Array(32768):Ze(32768),jr=ce?new Uint16Array(32768):Ze(32768),tr=ce?new Uint16Array(128):Ze(128),an=1,Nr=1;function $r(he,je){var Ce=me(he,je)+257;je+=5;var we=me(he,je)+1;je+=5;var Ne=Se(he,je)+4;je+=4;for(var Be=0,Ye=ce?new Uint8Array(19):Ze(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,rt=ce?new Uint8Array(8):Ze(8),it=ce?new Uint8Array(8):Ze(8),Ft=Ye.length,Vt=0;Vt<Ne;++Vt)Ye[Z[Vt]]=Be=Fe(he,je),$e<Be&&($e=Be),rt[Be]++,je+=3;var Jt=0;for(rt[0]=0,Vt=1;Vt<=$e;++Vt)it[Vt]=Jt=Jt+rt[Vt-1]<<1;for(Vt=0;Vt<Ft;++Vt)(Jt=Ye[Vt])!=0&&(dt[Vt]=it[Jt]++);var Ht=0;for(Vt=0;Vt<Ft;++Vt)if(Ht=Ye[Vt],Ht!=0){Jt=fe[dt[Vt]]>>8-Ht;for(var Gt=(1<<7-Ht)-1;Gt>=0;--Gt)tr[Jt|Gt<<Ht]=Ht&7|Vt<<3}var Sr=[];for($e=1;Sr.length<Ce+we;)switch(Jt=tr[Te(he,je)],je+=Jt&7,Jt>>>=3){case 16:for(Be=3+_e(he,je),je+=2,Jt=Sr[Sr.length-1];Be-- >0;)Sr.push(Jt);break;case 17:for(Be=3+Fe(he,je),je+=3;Be-- >0;)Sr.push(0);break;case 18:for(Be=11+Te(he,je),je+=7;Be-- >0;)Sr.push(0);break;default:Sr.push(Jt),$e<Jt&&($e=Jt);break}var sn=Sr.slice(0,Ce),on=Sr.slice(Ce);for(Vt=Ce;Vt<286;++Vt)sn[Vt]=0;for(Vt=we;Vt<30;++Vt)on[Vt]=0;return an=ct(sn,wt,286),Nr=ct(on,jr,30),je}function In(he,je){if(he[0]==3&&!(he[1]&3))return[km(je),2];for(var Ce=0,we=0,Ne=iK(je||1<<18),Be=0,Ye=Ne.length>>>0,dt=0,$e=0;(we&1)==0;){if(we=Fe(he,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,$e=5):(Ce=$r(he,Ce),dt=an,$e=Nr);else{Ce&7&&(Ce+=8-(Ce&7));var rt=he[Ce>>>3]|he[(Ce>>>3)+1]<<8;if(Ce+=32,rt>0)for(!je&&Ye<Be+rt&&(Ne=qe(Ne,Be+rt),Ye=Ne.length);rt-- >0;)Ne[Be++]=he[Ce>>>3],Ce+=8;continue}for(;;){!je&&Ye<Be+32767&&(Ne=qe(Ne,Be+32767),Ye=Ne.length);var it=Me(he,Ce,dt),Ft=we>>>1==1?pt[it]:wt[it];if(Ce+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)Ne[Be++]=Ft;else{if(Ft==256)break;Ft-=257;var Vt=Ft<8?0:Ft-4>>2;Vt>5&&(Vt=0);var Jt=Be+ae[Ft];Vt>0&&(Jt+=Me(he,Ce,Vt),Ce+=Vt),it=Me(he,Ce,$e),Ft=we>>>1==1?It[it]:jr[it],Ce+=Ft&15,Ft>>>=4;var Ht=Ft<4?0:Ft-2>>1,Gt=le[Ft];for(Ht>0&&(Gt+=Me(he,Ce,Ht),Ce+=Ht),!je&&Ye<Jt&&(Ne=qe(Ne,Jt+100),Ye=Ne.length);Be<Jt;)Ne[Be]=Ne[Be-Gt],++Be}}}return je?[Ne,Ce+7>>>3]:[Ne.slice(0,Be),Ce+7>>>3]}function Pr(he,je){var Ce=he.slice(he.l||0),we=In(Ce,je);return he.l+=we[1],we[0]}function fs(he,je){if(he)typeof console<"u"&&console.error(je);else throw new Error(je)}function hn(he,je){var Ce=he;xo(Ce,0);var we=[],Ne=[],Be={FileIndex:we,FullPaths:Ne};E(Be,{root:je.root});for(var Ye=Ce.length-4;(Ce[Ye]!=80||Ce[Ye+1]!=75||Ce[Ye+2]!=5||Ce[Ye+3]!=6)&&Ye>=0;)--Ye;Ce.l=Ye+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var $e=Ce.read_shift(4);for(Ce.l=$e,Ye=0;Ye<dt;++Ye){Ce.l+=20;var rt=Ce.read_shift(4),it=Ce.read_shift(4),Ft=Ce.read_shift(2),Vt=Ce.read_shift(2),Jt=Ce.read_shift(2);Ce.l+=8;var Ht=Ce.read_shift(4),Gt=o(Ce.slice(Ce.l+Ft,Ce.l+Ft+Vt));Ce.l+=Ft+Vt+Jt;var Sr=Ce.l;Ce.l=Ht+4,la(Ce,rt,it,Be,Gt),Ce.l=Sr}return Be}function la(he,je,Ce,we,Ne){he.l+=2;var Be=he.read_shift(2),Ye=he.read_shift(2),dt=i(he);if(Be&8257)throw new Error("Unsupported ZIP encryption");for(var $e=he.read_shift(4),rt=he.read_shift(4),it=he.read_shift(4),Ft=he.read_shift(2),Vt=he.read_shift(2),Jt="",Ht=0;Ht<Ft;++Ht)Jt+=String.fromCharCode(he[he.l++]);if(Vt){var Gt=o(he.slice(he.l,he.l+Vt));(Gt[21589]||{}).mt&&(dt=Gt[21589].mt),((Ne||{})[21589]||{}).mt&&(dt=Ne[21589].mt)}he.l+=Vt;var Sr=he.slice(he.l,he.l+rt);switch(Ye){case 8:Sr=H(he,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var sn=!1;Be&8&&($e=he.read_shift(4),$e==134695760&&($e=he.read_shift(4),sn=!0),rt=he.read_shift(4),it=he.read_shift(4)),rt!=je&&fs(sn,"Bad compressed size: "+je+" != "+rt),it!=Ce&&fs(sn,"Bad uncompressed size: "+Ce+" != "+it),xr(we,Jt,Sr,{unsafe:!0,mt:dt})}function ja(he,je){var Ce=je||{},we=[],Ne=[],Be=Ct(1),Ye=Ce.compression?8:0,dt=0,$e=0,rt=0,it=0,Ft=0,Vt=he.FullPaths[0],Jt=Vt,Ht=he.FileIndex[0],Gt=[],Sr=0;for($e=1;$e<he.FullPaths.length;++$e)if(Jt=he.FullPaths[$e].slice(Vt.length),Ht=he.FileIndex[$e],!(!Ht.size||!Ht.content||Jt=="Sh33tJ5")){var sn=it,on=Ct(Jt.length);for(rt=0;rt<Jt.length;++rt)on.write_shift(1,Jt.charCodeAt(rt)&127);on=on.slice(0,on.l),Gt[Ft]=bUe.buf(Ht.content,0);var An=Ht.content;Ye==8&&(An=X(An)),Be=Ct(30),Be.write_shift(4,67324752),Be.write_shift(2,20),Be.write_shift(2,dt),Be.write_shift(2,Ye),Ht.mt?s(Be,Ht.mt):Be.write_shift(4,0),Be.write_shift(-4,Gt[Ft]),Be.write_shift(4,An.length),Be.write_shift(4,Ht.content.length),Be.write_shift(2,on.length),Be.write_shift(2,0),it+=Be.length,we.push(Be),it+=on.length,we.push(on),it+=An.length,we.push(An),Be=Ct(46),Be.write_shift(4,33639248),Be.write_shift(2,0),Be.write_shift(2,20),Be.write_shift(2,dt),Be.write_shift(2,Ye),Be.write_shift(4,0),Be.write_shift(-4,Gt[Ft]),Be.write_shift(4,An.length),Be.write_shift(4,Ht.content.length),Be.write_shift(2,on.length),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(4,0),Be.write_shift(4,sn),Sr+=Be.l,Ne.push(Be),Sr+=on.length,Ne.push(on),++Ft}return Be=Ct(22),Be.write_shift(4,101010256),Be.write_shift(2,0),Be.write_shift(2,0),Be.write_shift(2,Ft),Be.write_shift(2,Ft),Be.write_shift(4,Sr),Be.write_shift(4,it),Be.write_shift(2,0),qi([qi(we),qi(Ne),Be])}var rn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function pr(he,je){if(he.ctype)return he.ctype;var Ce=he.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&rn[we[1]]||je&&(we=(Ce=je).match(/[\.\\]([^\.\\])+$/),we&&rn[we[1]])?rn[we[1]]:"application/octet-stream"}function et(he){for(var je=t2(he),Ce=[],we=0;we<je.length;we+=76)Ce.push(je.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function gt(he){var je=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(rt){var it=rt.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});je=je.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),je.charAt(0)==`
`&&(je="=0D"+je.slice(1)),je=je.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=je.split(`\r
`),Ne=0;Ne<we.length;++Ne){var Be=we[Ne];if(Be.length==0){Ce.push("");continue}for(var Ye=0;Ye<Be.length;){var dt=76,$e=Be.slice(Ye,Ye+dt);$e.charAt(dt-1)=="="?dt--:$e.charAt(dt-2)=="="?dt-=2:$e.charAt(dt-3)=="="&&(dt-=3),$e=Be.slice(Ye,Ye+dt),Ye+=dt,Ye<Be.length&&($e+="="),Ce.push($e)}}return Ce.join(`\r
`)}function Je(he){for(var je=[],Ce=0;Ce<he.length;++Ce){for(var we=he[Ce];Ce<=he.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+he[++Ce];je.push(we)}for(var Ne=0;Ne<je.length;++Ne)je[Ne]=je[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Be){return String.fromCharCode(parseInt(Be.slice(1),16))});return Dc(je.join(`\r
`))}function xt(he,je,Ce){for(var we="",Ne="",Be="",Ye,dt=0;dt<10;++dt){var $e=je[dt];if(!$e||$e.match(/^\s*$/))break;var rt=$e.match(/^(.*?):\s*([^\s].*)$/);if(rt)switch(rt[1].toLowerCase()){case"content-location":we=rt[2].trim();break;case"content-type":Be=rt[2].trim();break;case"content-transfer-encoding":Ne=rt[2].trim();break}}switch(++dt,Ne.toLowerCase()){case"base64":Ye=Dc($c(je.slice(dt).join("")));break;case"quoted-printable":Ye=Je(je.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var it=xr(he,we.slice(Ce.length),Ye,{unsafe:!0});Be&&(it.ctype=Be)}function Et(he,je){if(G(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=je&&je.root||"",we=(gn&&Buffer.isBuffer(he)?he.toString("binary"):G(he)).split(`\r
`),Ne=0,Be="";for(Ne=0;Ne<we.length;++Ne)if(Be=we[Ne],!!/^Content-Location:/i.test(Be)&&(Be=Be.slice(Be.indexOf("file")),Ce||(Ce=Be.slice(0,Be.lastIndexOf("/")+1)),Be.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),Be.slice(0,Ce.length)!=Ce););var Ye=(we[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var dt="--"+(Ye[1]||""),$e=[],rt=[],it={FileIndex:$e,FullPaths:rt};E(it);var Ft,Vt=0;for(Ne=0;Ne<we.length;++Ne){var Jt=we[Ne];Jt!==dt&&Jt!==dt+"--"||(Vt++&&xt(it,we.slice(Ft,Ne),Ce),Ft=Ne)}return it}function bt(he,je){var Ce=je||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Be=he.FullPaths[0],Ye=Be,dt=he.FileIndex[0],$e=1;$e<he.FullPaths.length;++$e)if(Ye=he.FullPaths[$e].slice(Be.length),dt=he.FileIndex[$e],!(!dt.size||!dt.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var rt=dt.content,it=gn&&Buffer.isBuffer(rt)?rt.toString("binary"):G(rt),Ft=0,Vt=Math.min(1024,it.length),Jt=0,Ht=0;Ht<=Vt;++Ht)(Jt=it.charCodeAt(Ht))>=32&&Jt<128&&++Ft;var Gt=Ft>=Vt*4/5;Ne.push(we),Ne.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Ye),Ne.push("Content-Transfer-Encoding: "+(Gt?"quoted-printable":"base64")),Ne.push("Content-Type: "+pr(dt,Ye)),Ne.push(""),Ne.push(Gt?gt(it):et(it))}return Ne.push(we+`--\r
`),Ne.join(`\r
`)}function nr(he){var je={};return E(je,he),je}function xr(he,je,Ce,we){var Ne=we&&we.unsafe;Ne||E(he);var Be=!Ne&&_r.find(he,je);if(!Be){var Ye=he.FullPaths[0];je.slice(0,Ye.length)==Ye?Ye=je:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+je).replace("//","/")),Be={name:a(je),type:2},he.FileIndex.push(Be),he.FullPaths.push(Ye),Ne||_r.utils.cfb_gc(he)}return Be.content=Ce,Be.size=Ce?Ce.length:0,we&&(we.CLSID&&(Be.clsid=we.CLSID),we.mt&&(Be.mt=we.mt),we.ct&&(Be.ct=we.ct)),Be}function Wr(he,je){E(he);var Ce=_r.find(he,je);if(Ce){for(var we=0;we<he.FileIndex.length;++we)if(he.FileIndex[we]==Ce)return he.FileIndex.splice(we,1),he.FullPaths.splice(we,1),!0}return!1}function Zr(he,je,Ce){E(he);var we=_r.find(he,je);if(we){for(var Ne=0;Ne<he.FileIndex.length;++Ne)if(he.FileIndex[Ne]==we)return he.FileIndex[Ne].name=a(Ce),he.FullPaths[Ne]=Ce,!0}return!1}function qr(he){B(he,!0)}return t.find=D,t.read=I,t.parse=d,t.write=Y,t.writeFile=z,t.utils={cfb_new:nr,cfb_add:xr,cfb_del:Wr,cfb_mov:Zr,cfb_gc:qr,ReadShift:uw,CheckField:Kie,prep_blob:xo,bconcat:qi,use_zlib:P,_deflateRaw:Qt,_inflateRaw:Pr,consts:K},t}();function yUe(e){return typeof e=="string"?vk(e):Array.isArray(e)?KMe(e):e}function sE(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=vk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?$A(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([yUe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Gm(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function wUe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Bs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function hK(e,t){for(var r=[],n=Bs(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function yk(e){for(var t=[],r=Bs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function wk(e){for(var t=[],r=Bs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function EUe(e){for(var t=[],r=Bs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var rS=new Date(1899,11,30,0,0,0);function ki(e,t){var r=e.getTime(),n=rS.getTime()+(e.getTimezoneOffset()-rS.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Nie=new Date,CUe=rS.getTime()+(Nie.getTimezoneOffset()-rS.getTimezoneOffset())*6e4,mK=Nie.getTimezoneOffset();function Ek(e){var t=new Date;return t.setTime(e*24*60*60*1e3+CUe),t.getTimezoneOffset()!==mK&&t.setTime(t.getTime()+(t.getTimezoneOffset()-mK)*6e4),t}function _Ue(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var pK=new Date("2017-02-19T19:06:09.000Z"),Sie=isNaN(pK.getFullYear())?new Date("2/19/17"):pK,NUe=Sie.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(NUe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Sie.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function wg(e,t){if(gn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return $A(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return $A(hie(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return $A(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return $A(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function Ns(e,t){for(var r="";r.length<t;)r+=e;return r}function Pd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var SUe=["january","february","march","april","may","june","july","august","september","october","november","december"];function p1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&SUe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var kUe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function kie(e){return e?e.content&&e.type?wg(e.content,!0):e.data?Py(e.data):e.asNodeBuffer&&gn?Py(e.asNodeBuffer().toString("binary")):e.asBinary?Py(e.asBinary()):e._data&&e._data.getContent?Py(wg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function jie(e){if(!e)return null;if(e.data)return aK(e.data);if(e.asNodeBuffer&&gn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?aK(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function jUe(e){return e&&e.name.slice(-4)===".bin"?jie(e):kie(e)}function Su(e,t){for(var r=e.FullPaths||Bs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function i8(e,t){var r=Su(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function li(e,t,r){if(!r)return jUe(i8(e,t));if(!t)return null;try{return li(e,t)}catch{return null}}function Pc(e,t,r){if(!r)return kie(i8(e,t));if(!t)return null;try{return Pc(e,t)}catch{return null}}function BUe(e,t,r){return jie(i8(e,t))}function gK(e){for(var t=e.FullPaths||Bs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return gn?n=Mh(r):n=qMe(r),_r.utils.cfb_add(e,t,n)}_r.utils.cfb_add(e,t,r)}else e.file(t,r)}function o8(){return _r.utils.cfb_new()}function Bie(e,t){switch(t.type){case"base64":return _r.read(e,{type:"base64"});case"binary":return _r.read(e,{type:"binary"});case"buffer":case"array":return _r.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Ly(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Js=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,TUe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,xK=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,IUe=/<[^>]*>/g,ol=Js.match(xK)?xK:IUe,FUe=/<\w*:/,OUe=/<(\/?)\w+:/;function Kr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(TUe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function sf(e){return e.replace(OUe,"<$1")}var Tie={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},l8=yk(Tie),Un=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return Tie[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),c8=/[&<>'"]/g,DUe=/[\u0000-\u0008\u000b-\u001f]/g;function ga(e){var t=e+"";return t.replace(c8,function(r){return l8[r]}).replace(DUe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vK(e){return ga(e).replace(/ /g,"_x0020_")}var Iie=/[\u0000-\u001f]/g;function u8(e){var t=e+"";return t.replace(c8,function(r){return l8[r]}).replace(/\n/g,"<br/>").replace(Iie,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function PUe(e){var t=e+"";return t.replace(c8,function(r){return l8[r]}).replace(Iie,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var bK=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function RUe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function ZT(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function yK(e){var t=km(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function wK(e){return Mh(e,"binary").toString("utf8")}var e_="foo bar bazâð£",Ea=gn&&(wK(e_)==ZT(e_)&&wK||yK(e_)==ZT(e_)&&yK)||ZT,$A=gn?function(e){return Mh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},n2=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Fie=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),LUe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),MUe=/<\/?(?:vt:)?variant>/g,UUe=/<(?:vt:)([^>]*)>([\s\S]*)</;function EK(e,t){var r=Kr(e),n=e.match(LUe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(MUe,"").match(UUe);i&&a.push({v:Ea(i[2]),t:i[1]})}),a}var Oie=/(^\s|\s$|\n)/;function vo(e,t){return"<"+e+(t.match(Oie)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function a2(e){return Bs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?a2(r):"")+(t!=null?(t.match(Oie)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function nO(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function QUe(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",ga(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",ga(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",nO(e));throw new Error("Unable to serialize "+e)}function d8(e){if(gn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(Gm(n8(e)));throw new Error("Bad input format: expected Buffer or string")}var s2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,_i={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Vg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Bc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function HUe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function VUe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var CK=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},_K=gn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Mh(t)})):CK(e)}:CK,NK=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(nh(e,a)));return n.join("").replace(Cl,"")},A8=gn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Cl,""):NK(e,t,r)}:NK,SK=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Die=gn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):SK(e,t,r)}:SK,kK=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(av(e,a)));return n.join("")},iE=gn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):kK(t,r,n)}:kK,Pie=function(e,t){var r=Tc(e,t);return r>0?iE(e,t+4,t+4+r-1):""},Rie=Pie,Lie=function(e,t){var r=Tc(e,t);return r>0?iE(e,t+4,t+4+r-1):""},Mie=Lie,Uie=function(e,t){var r=2*Tc(e,t);return r>0?iE(e,t+4,t+4+r-1):""},Qie=Uie,Hie=function(t,r){var n=Tc(t,r);return n>0?A8(t,r+4,r+4+n):""},Vie=Hie,zie=function(e,t){var r=Tc(e,t);return r>0?iE(e,t+4,t+4+r):""},$ie=zie,Gie=function(e,t){return HUe(e,t)},nS=Gie,f8=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};gn&&(Rie=function(t,r){if(!Buffer.isBuffer(t))return Pie(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Mie=function(t,r){if(!Buffer.isBuffer(t))return Lie(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Qie=function(t,r){if(!Buffer.isBuffer(t))return Uie(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Vie=function(t,r){if(!Buffer.isBuffer(t))return Hie(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},$ie=function(t,r){if(!Buffer.isBuffer(t))return zie(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},nS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Gie(t,r)},f8=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var av=function(e,t){return e[t]},nh=function(e,t){return e[t+1]*256+e[t]},zUe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Tc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Tp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},$Ue=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function uw(e,t){var r="",n,a,s=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,gn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(nh(this,u)),u+=2;e*=2;break;case"utf8":r=iE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=A8(this,this.l,this.l+e);break;case"wstr":return uw.call(this,e,"dbcs");case"lpstr-ansi":r=Rie(this,this.l),e=4+Tc(this,this.l);break;case"lpstr-cp":r=Mie(this,this.l),e=4+Tc(this,this.l);break;case"lpwstr":r=Qie(this,this.l),e=4+2*Tc(this,this.l);break;case"lpp4":e=4+Tc(this,this.l),r=Vie(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Tc(this,this.l),r=$ie(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=av(this,this.l+e++))!==0;)s.push(ZC(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=nh(this,this.l+e))!==0;)s.push(ZC(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=av(this,u),this.l=u+1,o=uw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ZC(nh(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=av(this,u),this.l=u+1,o=uw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ZC(av(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=av(this,this.l),this.l++,n;case 2:return n=(t==="i"?zUe:nh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Tp:$Ue)(this,this.l),this.l+=4,n):(a=Tc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=nS(this,this.l):a=nS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Die(this,this.l,e);break}}return this.l+=e,r}var GUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},KUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},qUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function WUe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)qUe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,GUe(this,t,this.l);break;case 8:if(n=8,r==="f"){VUe(this,t,this.l);break}case 16:break;case-4:n=4,KUe(this,t,this.l);break}return this.l+=n,this}function Kie(e,t){var r=Die(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function xo(e,t){e.l=t,e.read_shift=uw,e.chk=Kie,e.write_shift=WUe}function al(e,t){e.l+=t}function Ct(e){var t=km(e);return xo(t,0),t}function Uh(e,t,r){if(e){var n,a,s;xo(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=d2[o]||d2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,o))return}}}function tc(){var e=[],t=gn?256:2048,r=function(u){var d=Ct(u);return xo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),qi(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=d2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&f8(r)&&e.push(r)}}function dw(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function jK(e,t,r){var n=Ha(e);return n.s=dw(n.s,t.s,r),n.e=dw(n.e,t.s,r),n}function Aw(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=JUe(r)),!e.rRel&&e.rRel!=null&&(r=XUe(r)),r}function eI(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+is(e.s.c)+":"+(e.e.cRel?"":"$")+is(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+qs(e.s.r)+":"+(e.e.rRel?"":"$")+qs(e.e.r):Aw(e.s,t.biff)+":"+Aw(e.e,t.biff)}function h8(e){return parseInt(YUe(e),10)-1}function qs(e){return""+(e+1)}function XUe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function YUe(e){return e.replace(/\$(\d+)$/,"$1")}function m8(e){for(var t=ZUe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function is(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function JUe(e){return e.replace(/^([A-Z])/,"$$$1")}function ZUe(e){return e.replace(/^\$([A-Z])/,"$1")}function e7e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function os(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function nc(e){var t=e.indexOf(":");return t==-1?{s:os(e),e:os(e)}:{s:os(e.slice(0,t)),e:os(e.slice(t+1))}}function nn(e,t){return typeof t>"u"||typeof t=="number"?nn(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function BK(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=zu(e.z,r?ki(t):t)}catch{}try{return e.w=zu((e.XF||{}).numFmtId||(r?14:0),r?ki(t):t)}catch{return""+t}}function kh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Qh[e.v]||e.v:t==null?BK(e,e.v):BK(e,t))}function Km(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function qie(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,x=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Mr[14],n.cellDates?(p.t="d",p.w=zu(p.z,ki(p.v))):(p.t="n",p.v=ki(p.v),p.w=zu(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(p.z=s[g][x].z),s[g][x]=p;else{var b=Hr({c:x,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=nn(u)),s}function ib(e,t){return qie(null,e,t)}function t7e(e){return e.read_shift(4,"i")}function Rd(e,t){return t||(t=Ct(4)),t.write_shift(4,e),t}function rl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ji(e,t){var r=!1;return t==null&&(r=!0,t=Ct(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function r7e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function n7e(e,t){return t||(t=Ct(4)),t.write_shift(2,0),t.write_shift(2,0),t}function p8(e,t){var r=e.l,n=e.read_shift(1),a=rl(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(r7e(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function a7e(e,t){var r=!1;return t==null&&(r=!0,t=Ct(15+4*e.t.length)),t.write_shift(1,0),Ji(e.t,t),r?t.slice(0,t.l):t}var s7e=p8;function i7e(e,t){var r=!1;return t==null&&(r=!0,t=Ct(23+4*e.t.length)),t.write_shift(1,1),Ji(e.t,t),t.write_shift(4,1),n7e({},t),r?t.slice(0,t.l):t}function Ku(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function zg(e,t){return t==null&&(t=Ct(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function $g(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Gg(e,t){return t==null&&(t=Ct(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var o7e=rl,Wie=Ji;function g8(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function aS(e,t){var r=!1;return t==null&&(r=!0,t=Ct(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var l7e=rl,aO=g8,x8=aS;function v8(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?nS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Tp(t,0)>>2;return r?a/100:a}function Xie(e,t){t==null&&(t=Ct(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Yie(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function c7e(e,t){return t||(t=Ct(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Kg=Yie,ob=c7e;function el(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Eg(e,t){return(t||Ct(8)).write_shift(8,e,"f")}function u7e(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Jp[a];u&&(t.rgb=o2(u));break;case 2:t.rgb=o2([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function sS(e,t){if(t||(t=Ct(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function d7e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function A7e(e,t){t||(t=Ct(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Jie(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function f7e(e){return Jie(e,1)}function h7e(e){return Jie(e,2)}var b8=2,zl=3,t_=11,TK=12,iS=19,r_=64,m7e=65,p7e=71,g7e=4108,x7e=4126,$i=80,Zie=81,v7e=[$i,Zie],sO={1:{n:"CodePage",t:b8},2:{n:"Category",t:$i},3:{n:"PresentationFormat",t:$i},4:{n:"ByteCount",t:zl},5:{n:"LineCount",t:zl},6:{n:"ParagraphCount",t:zl},7:{n:"SlideCount",t:zl},8:{n:"NoteCount",t:zl},9:{n:"HiddenCount",t:zl},10:{n:"MultimediaClipCount",t:zl},11:{n:"ScaleCrop",t:t_},12:{n:"HeadingPairs",t:g7e},13:{n:"TitlesOfParts",t:x7e},14:{n:"Manager",t:$i},15:{n:"Company",t:$i},16:{n:"LinksUpToDate",t:t_},17:{n:"CharacterCount",t:zl},19:{n:"SharedDoc",t:t_},22:{n:"HyperlinksChanged",t:t_},23:{n:"AppVersion",t:zl,p:"version"},24:{n:"DigSig",t:m7e},26:{n:"ContentType",t:$i},27:{n:"ContentStatus",t:$i},28:{n:"Language",t:$i},29:{n:"Version",t:$i},255:{},2147483648:{n:"Locale",t:iS},2147483651:{n:"Behavior",t:iS},1919054434:{}},iO={1:{n:"CodePage",t:b8},2:{n:"Title",t:$i},3:{n:"Subject",t:$i},4:{n:"Author",t:$i},5:{n:"Keywords",t:$i},6:{n:"Comments",t:$i},7:{n:"Template",t:$i},8:{n:"LastAuthor",t:$i},9:{n:"RevNumber",t:$i},10:{n:"EditTime",t:r_},11:{n:"LastPrinted",t:r_},12:{n:"CreatedDate",t:r_},13:{n:"ModifiedDate",t:r_},14:{n:"PageCount",t:zl},15:{n:"WordCount",t:zl},16:{n:"CharCount",t:zl},17:{n:"Thumbnail",t:p7e},18:{n:"Application",t:$i},19:{n:"DocSecurity",t:zl},255:{},2147483648:{n:"Locale",t:iS},2147483651:{n:"Behavior",t:iS},1919054434:{}},IK={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},b7e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function y7e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var w7e=y7e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Jp=Ha(w7e),Qh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},eoe={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},oO={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},n_={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function y8(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function E7e(e){var t=y8();if(!e||!e.match)return t;var r={};if((e.match(ol)||[]).forEach(function(n){var a=Kr(n);switch(a[0].replace(FUe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[oO[a.ContentType]]!==void 0&&t[oO[a.ContentType]].push(a.PartName);break}}),t.xmlns!==_i.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function toe(e,t){var r=EUe(oO),n=[],a;n[n.length]=Js,n[n.length]=Kt("Types",null,{xmlns:_i.CT,"xmlns:xsd":_i.xsd,"xmlns:xsi":_i.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:n_[c][t.bookType]||n_[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n_[c][t.bookType]||n_[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function i2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function fw(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ol)||[]).forEach(function(a){var s=Kr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Ly(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function Dv(e){var t=[Js,Kt("Relationships",null,{xmlns:_i.RELS})];return Bs(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var C7e="application/vnd.oasis.opendocument.spreadsheet";function _7e(e,t){for(var r=d8(e),n,a;n=s2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Kr(n[0],!1),a.path=="/"&&a.type!==C7e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function N7e(e){var t=[Js];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function FK(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function S7e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function k7e(e){var t=[Js];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(FK(e[r][0],e[r][1])),t.push(S7e("",e[r][0]));return t.push(FK("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function roe(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+JN.version+"</meta:generator></office:meta></office:document-meta>"}var Qu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],j7e=function(){for(var e=new Array(Qu.length),t=0;t<Qu.length;++t){var r=Qu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function noe(e){var t={};e=Ea(e);for(var r=0;r<Qu.length;++r){var n=Qu[r],a=e.match(j7e[r]);a!=null&&a.length>0&&(t[n[1]]=Un(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function tI(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ga(t),n[n.length]=r?Kt(e,t,r):vo(e,t))}function aoe(e,t){var r=t||{},n=[Js,Kt("cp:coreProperties",null,{"xmlns:cp":_i.CORE_PROPS,"xmlns:dc":_i.dc,"xmlns:dcterms":_i.dcterms,"xmlns:dcmitype":_i.dcmitype,"xmlns:xsi":_i.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&tI("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:nO(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&tI("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:nO(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Qu.length;++s){var i=Qu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&tI(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Zp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],soe=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function ioe(e,t,r,n){var a=[];if(typeof e=="string")a=EK(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?EK(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function B7e(e,t,r){var n={};return t||(t={}),e=Ea(e),Zp.forEach(function(a){var s=(e.match(n2(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Un(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&ioe(n.HeadingPairs,n.TitlesOfParts,t,r),t}function ooe(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=Js,t[t.length]=Kt("Properties",null,{xmlns:_i.EXT_PROPS,"xmlns:vt":_i.vt}),Zp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ga(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ga(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var T7e=/<[^>]+>[^<]*/g;function I7e(e,t){var r={},n="",a=e.match(T7e);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Kr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Un(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Un(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Un(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function loe(e){var t=[Js,Kt("Properties",null,{xmlns:_i.CUST_PROPS,"xmlns:vt":_i.vt})];if(!e)return t.join("");var r=1;return Bs(e).forEach(function(a){++r,t[t.length]=Kt("property",QUe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ga(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var lO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},rI;function F7e(e,t,r){rI||(rI=yk(lO)),t=rI[t]||t,e[t]=r}function O7e(e,t){var r=[];return Bs(lO).map(function(n){for(var a=0;a<Qu.length;++a)if(Qu[a][1]==n)return Qu[a];for(a=0;a<Zp.length;++a)if(Zp[a][1]==n)return Zp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(vo(lO[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:Bc.o})}function D7e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Bs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Qu.length;++i)if(s==Qu[i][1])return;for(i=0;i<Zp.length;++i)if(s==Zp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Kt(vK(s),o,{"dt:dt":c}))}}),t&&Bs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Kt(vK(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Bc.o+'">'+a.join("")+"</"+n+">"}function w8(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function P7e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Ct(8);return i.write_shift(4,n),i.write_shift(4,a),i}function coe(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function uoe(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function doe(e,t,r){return t===31?uoe(e):coe(e,t,r)}function cO(e,t,r){return doe(e,t,r===!1?0:4)}function R7e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return doe(e,t,0)}function L7e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Cl,""),e.l-a&2&&(e.l+=2)}return r}function M7e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Cl,"");return r}function U7e(e){var t=e.l,r=oS(e,Zie);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=oS(e,zl);return[r,n]}function Q7e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(U7e(e));return r}function OK(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Cl,"").replace(Ry,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Aoe(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function H7e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function oS(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==TK&&n!==t&&v7e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===TK?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return coe(e,n,4).replace(Cl,"");case 31:return uoe(e);case 64:return w8(e);case 65:return Aoe(e);case 71:return H7e(e);case 80:return cO(e,n,!s.raw).replace(Cl,"");case 81:return R7e(e,n).replace(Cl,"");case 4108:return Q7e(e);case 4126:case 4127:return n==4127?L7e(e):M7e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function DK(e,t){var r=Ct(4),n=Ct(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ct(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=P7e(t);break;case 31:case 80:for(n=Ct(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return qi([r,n])}function PK(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=oS(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:kd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=oS(e,b8),kd(o),c!==-1){var x=e.l;e.l=s[c][1],u=OK(e,o),e.l=x}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}u=OK(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Aoe(e);break;case 30:e.l+=4,y=cO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=cO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Ms(e,4);break;case 64:e.l+=4,y=Qa(w8(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var foe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function V7e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function RK(e,t,r){var n=Ct(8),a=[],s=[],i=8,o=0,c=Ct(8),u=Ct(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Ct(8),u.write_shift(4,0),a.unshift(u);var d=[Ct(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Ct(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=qi(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(foe.indexOf(e[o][0])>-1||soe.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=DK(g.t,h)}else{var b=V7e(h);b==-1&&(b=31,h=String(h)),c=DK(b,h)}s.push(c),u=Ct(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),qi([n].concat(a).concat(s))}function LK(e,t,r){var n=e.content;if(!n)return{};xo(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==_r.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=PK(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=PK(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function MK(e,t,r,n,a,s){var i=Ct(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,_r.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=RK(e,r,n);if(o.push(c),a){var u=RK(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return qi(o)}function j0(e,t){return e.read_shift(t),null}function z7e(e,t){t||(t=Ct(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function $7e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Ms(e,t){return e.read_shift(t)===1}function pl(e,t){return t||(t=Ct(2)),t.write_shift(2,+!!e),t}function ci(e){return e.read_shift(2,"u")}function ju(e,t){return t||(t=Ct(2)),t.write_shift(2,e),t}function hoe(e,t){return $7e(e,t,ci)}function G7e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function moe(e,t,r){return r||(r=Ct(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function oE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function K7e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function q7e(e){var t=e.t||"",r=Ct(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ct(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return qi(a)}function Cg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function lE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Cg(e,n,r)}function qg(e,t,r){if(r.biff>5)return lE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function poe(e,t,r){return r||(r=Ct(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function W7e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function X7e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Cl,"");return n&&(e.l+=24),a}function Y7e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(Cl,"");return r+i}function J7e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return X7e(e);case"0303000000000000c000000000000046":return Y7e(e);default:throw new Error("Unsupported Moniker "+r)}}function a_(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Cl,""):"";return r}function UK(e,t){t||(t=Ct(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Z7e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,u="",d,f;a&16&&(s=a_(e,r-e.l)),a&128&&(i=a_(e,r-e.l)),(a&257)===257&&(o=a_(e,r-e.l)),(a&257)===1&&(c=J7e(e,r-e.l)),a&8&&(u=a_(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=w8(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function e9e(e){var t=Ct(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),UK(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&UK(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function goe(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function xoe(e,t){var r=goe(e);return r[3]=0,r}function of(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function _g(e,t,r,n){return n||(n=Ct(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function t9e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function r9e(e,t,r){return t===0?"":qg(e,t,r)}function n9e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function voe(e){var t=e.read_shift(2),r=v8(e);return[t,r]}function a9e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=oE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function Ck(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function boe(e,t){return t||(t=Ct(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function yoe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var s9e=yoe;function woe(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function i9e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function o9e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Qo(e){e.l+=2,e.l+=e.read_shift(2)}var l9e={0:Qo,4:Qo,5:Qo,6:Qo,7:o9e,8:Qo,9:Qo,10:Qo,11:Qo,12:Qo,13:i9e,14:Qo,15:Qo,16:Qo,17:Qo,18:Qo,19:Qo,20:Qo,21:woe};function c9e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(l9e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function s_(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function E8(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ct(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function u9e(e,t){return t===0||e.read_shift(2),1200}function d9e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=qg(e,0,r);return e.read_shift(t+n-e.l),a}function A9e(e,t){var r=!t||t.biff==8,n=Ct(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function f9e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function h9e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=oE(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function m9e(e,t){var r=!t||t.biff>=8?2:1,n=Ct(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function p9e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(K7e(e));return s.Count=n,s.Unique=a,s}function g9e(e,t){var r=Ct(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=q7e(e[a]);var s=qi([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function x9e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function v9e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function b9e(e){var t=t9e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function y9e(e){return e.read_shift(2),e.read_shift(4)}function QK(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function w9e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function E9e(){var e=Ct(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function C9e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function _9e(e){var t=Ct(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function N9e(){}function S9e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=oE(e,0,r),n}function k9e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Ct(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function j9e(e){var t=of(e);return t.isst=e.read_shift(4),t}function B9e(e,t,r,n){var a=Ct(10);return _g(e,t,n,a),a.write_shift(4,r),a}function T9e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=of(e);r.biff==2&&e.l++;var s=lE(e,n-e.l,r);return a.val=s,a}function I9e(e,t,r,n,a){var s=!a||a.biff==8,i=Ct(8+ +s+(1+s)*r.length);return _g(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function F9e(e,t,r){var n=e.read_shift(2),a=qg(e,0,r);return[n,a]}function O9e(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var D9e=qg;function HK(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function P9e(e,t){var r=t.biff==8||!t.biff?4:2,n=Ct(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function R9e(e){var t=e.read_shift(2),r=e.read_shift(2),n=voe(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function L9e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(voe(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function M9e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function U9e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=b7e[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function Q9e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=U9e(e,t,n.fStyle,r),n}function VK(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function H9e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function V9e(e){var t=Ct(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function zK(e,t,r){var n=of(e);(r.biff==2||t==9)&&++e.l;var a=G7e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function z9e(e,t,r,n,a,s){var i=Ct(8);return _g(e,t,n,i),moe(r,s,i),i}function $9e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=of(e),a=el(e);return n.val=a,n}function G9e(e,t,r,n){var a=Ct(14);return _g(e,t,n,a),Eg(r,a),a}var $K=r9e;function K9e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Cg(e,s),o=[];n>e.l;)o.push(lE(e));return[s,a,i,o]}function GK(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=a9e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var q9e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function KK(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Cg(e,i,r);a&32&&(u=q9e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:c$e(e,d,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function Eoe(e,t,r){if(r.biff<8)return W9e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(n9e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function W9e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=oE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function X9e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Cg(e,n,r),i=Cg(e,a,r);return[s,i]}function Y9e(e,t,r){var n=yoe(e);e.l++;var a=e.read_shift(1);return t-=8,[u$e(e,t,r),a,n]}function qK(e,t,r){var n=s9e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,o$e(e,t,r)]}function J9e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Z9e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=qg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function eQe(e,t,r){return Z9e(e,t,r)}function tQe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(Ck(e));return r}function rQe(e){var t=Ct(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)boe(e[r],t);return t}function nQe(e,t,r){if(r&&r.biff<8)return sQe(e,t,r);var n=woe(e),a=c9e(e,t-22,n[1]);return{cmo:n,ft:a}}var aQe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function sQe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((aQe[n]||al)(e,t,r)),{cmo:[a,n,s],ft:i}}function iQe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=W7e(e,6,r);var o=e.read_shift(2);e.read_shift(2),ci(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Cg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function oQe(e,t){var r=Ck(e);e.l+=16;var n=Z7e(e,t-24);return[r,n]}function lQe(e){var t=Ct(24),r=os(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return qi([t,e9e(e[1])])}function cQe(e,t){e.read_shift(2);var r=Ck(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Cl,""),[r,n]}function uQe(e){var t=e[1].Tooltip,r=Ct(10+2*(t.length+1));r.write_shift(2,2048);var n=os(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function dQe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=IK[r]||r,r=e.read_shift(2),t[1]=IK[r]||r,t}function AQe(e){return e||(e=Ct(4)),e.write_shift(2,1),e.write_shift(2,1),e}function fQe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(xoe(e));return r}function hQe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(xoe(e));return r}function mQe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Coe(e,t,r){if(!r.cellStyles)return al(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function pQe(e,t){var r=Ct(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function gQe(e,t){var r={};return t<32||(e.l+=16,r.header=el(e),r.footer=el(e),e.l+=2),r}function xQe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function vQe(e){for(var t=Ct(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var bQe=of,yQe=hoe,wQe=lE;function EQe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function CQe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=of(e);++e.l;var a=qg(e,t-7,r);return n.t="str",n.val=a,n}function _Qe(e){var t=of(e);++e.l;var r=el(e);return t.t="n",t.val=r,t}function NQe(e,t,r){var n=Ct(15);return AE(n,e,t),n.write_shift(8,r,"f"),n}function SQe(e){var t=of(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function kQe(e,t,r){var n=Ct(9);return AE(n,e,t),n.write_shift(2,r),n}function jQe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function BQe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function TQe(e,t,r){var n=e.l+t,a=of(e),s=e.read_shift(2),i=Cg(e,s,r);return e.l=n,a.t="str",a.val=i,a}var IQe=[2,3,48,49,131,139,140,245],uO=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=yk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=km(1);switch(c.type){case"base64":d=Dc($c(o));break;case"binary":d=Dc(o);break;case"buffer":case"array":d=o;break}xo(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,b=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],j={},k=Math.min(d.length,f==2?521:b-10-(p?264:0)),I=g?32:11;d.l<k&&d[d.l]!=13;)switch(j={},j.name=e2.utils.decode(w,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,j.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),f==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&_.push(j),f!=2&&(d.l+=g?13:14),j.type){case"B":(!p||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var E=0,N=0;for(u[0]=[],N=0;N!=_.length;++N)u[0][N]=_[N].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],N=0,N=0;N!=_.length;++N){var B=d.slice(d.l,d.l+_[N].len);d.l+=_[N].len,xo(B,0);var R=e2.utils.decode(w,B);switch(_[N].type){case"C":R.trim().length&&(u[E][N]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[E][N]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[E][N]=R;break;case"F":u[E][N]=parseFloat(R.trim());break;case"+":case"I":u[E][N]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[E][N]=!0;break;case"N":case"F":u[E][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][N]="##MEMO##"+(g?parseInt(R.trim(),10):B.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[E][N]=+R||0);break;case"@":u[E][N]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][N]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][N]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][N]=-B.read_shift(-8,"f");break;case"B":if(p&&_[N].len==8){u[E][N]=B.read_shift(8,"f");break}case"G":case"P":B.l+=_[N].len;break;case"0":if(_[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[N].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ib(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Km(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&kd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=tc(),f=uS(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],x=0,b=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(b=0;b<1024;++b)if(h.indexOf(h[x]+"_"+b)==-1){h[x]+="_"+b;break}}}}var _=Hn(o["!ref"]),j=[],k=[],I=[];for(x=0;x<=_.e.c-_.s.c;++x){var E="",N="",B=0,R=[];for(b=0;b<p.length;++b)p[b][x]!=null&&R.push(p[b][x]);if(R.length==0||h[x]==null){j[x]="?";continue}for(b=0;b<R.length;++b){switch(typeof R[b]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=R[b]instanceof Date?"D":"C";break;default:N="C"}B=Math.max(B,String(R[b]).length),E=E&&E!=N?"C":N}B>250&&(B=250),N=((g[x]||{}).DBF||{}).type,N=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),E=="B"&&N=="N"&&(E="N",I[x]=g[x].DBF.dec,B=g[x].DBF.len),k[x]=E=="C"||N=="N"?B:s[E]||0,w+=k[x],j[x]=E}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*y),D.write_shift(2,w),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+t[fie]||3)<<8),x=0,b=0;x<h.length;++x)if(h[x]!=null){var O=d.next(32),L=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,L,"sbcs"),O.write_shift(1,j[x]=="?"?"C":j[x],"sbcs"),O.write_shift(4,b),O.write_shift(1,k[x]||s[j[x]]||0),O.write_shift(1,I[x]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=k[x]||s[j[x]]||0}var M=d.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<p.length;++x){var J=d.next(w);for(J.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(j[b]){case"L":J.write_shift(1,p[x][b]==null?63:p[x][b]?84:70);break;case"B":J.write_shift(8,p[x][b]||0,"f");break;case"N":var V="0";for(typeof p[x][b]=="number"&&(V=p[x][b].toFixed(I[b]||0)),y=0;y<k[b]-V.length;++y)J.write_shift(1,32);J.write_shift(1,V,"sbcs");break;case"D":p[x][b]?(J.write_shift(4,("0000"+p[x][b].getFullYear()).slice(-4),"sbcs"),J.write_shift(2,("00"+(p[x][b].getMonth()+1)).slice(-2),"sbcs"),J.write_shift(2,("00"+p[x][b].getDate()).slice(-2),"sbcs")):J.write_shift(8,"00000000","sbcs");break;case"C":var K=String(p[x][b]!=null?p[x][b]:"").slice(0,k[b]);for(J.write_shift(1,K,"sbcs"),y=0;y<k[b]-K.length;++y)J.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),_oe=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Bs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?sK(g):g},n=function(h,p,g){var x=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:sK(x)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s($c(h),p);case"binary":return s(h,p);case"buffer":return s(gn&&Buffer.isBuffer(h)?h.toString("binary"):Gm(h),p);case"array":return s(wg(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),x=-1,b=-1,y=0,w=0,_=[],j=[],k=null,I={},E=[],N=[],B=[],R=0,D;for(+p.codepage>=0&&kd(+p.codepage);y!==g.length;++y){R=0;var O=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=O.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),M=L[0],J;if(O.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&j.push(O.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,K=!1,z=!1,G=!1,Y=-1,te=-1;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"A":break;case"X":b=parseInt(L[w].slice(1))-1,K=!0;break;case"Y":for(x=parseInt(L[w].slice(1))-1,K||(b=0),D=_.length;D<=x;++D)_[D]=[];break;case"K":J=L[w].slice(1),J.charAt(0)==='"'?J=J.slice(1,J.length-1):J==="TRUE"?J=!0:J==="FALSE"?J=!1:isNaN(Pd(J))?isNaN(p1(J).getDate())||(J=Qa(J)):(J=Pd(J),k!==null&&ab(k)&&(J=Ek(J))),V=!0;break;case"E":G=!0;var P=Pv(L[w].slice(1),{r:x,c:b});_[x][b]=[_[x][b],P];break;case"S":z=!0,_[x][b]=[_[x][b],"S5S"];break;case"G":break;case"R":Y=parseInt(L[w].slice(1))-1;break;case"C":te=parseInt(L[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(V&&(_[x][b]&&_[x][b].length==2?_[x][b][0]=J:_[x][b]=J,k=null),z){if(G)throw new Error("SYLK shared formula cannot have own formula");var H=Y>-1&&_[Y][te];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");_[x][b][1]=Voe(H[1],{r:x-Y,c:b-te})}break;case"F":var X=0;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"X":b=parseInt(L[w].slice(1))-1,++X;break;case"Y":for(x=parseInt(L[w].slice(1))-1,D=_.length;D<=x;++D)_[D]=[];break;case"M":R=parseInt(L[w].slice(1))/20;break;case"F":break;case"G":break;case"P":k=j[parseInt(L[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=L[w].slice(1).split(" "),D=parseInt(B[0],10);D<=parseInt(B[1],10);++D)R=parseInt(B[2],10),N[D-1]=R===0?{hidden:!0}:{wch:R},jm(N[D-1]);break;case"C":b=parseInt(L[w].slice(1))-1,N[b]||(N[b]={});break;case"R":x=parseInt(L[w].slice(1))-1,E[x]||(E[x]={}),R>0?(E[x].hpt=R,E[x].hpx=x1(R)):R===0&&(E[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}X<1&&(k=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(I["!rows"]=E),N.length>0&&(I["!cols"]=N),p&&p.sheetRows&&(_=_.slice(0,p.sheetRows)),[_,I]}function i(h,p){var g=a(h,p),x=g[0],b=g[1],y=ib(x,p);return Bs(b).forEach(function(w){y[w]=b[w]}),y}function o(h,p){return Km(i(h,p),p)}function c(h,p,g,x){var b="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+j8(h.f,{r:g,c:x}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,x){var b="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=l2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=c2(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,x){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*u2(g.hpx)+";"),b.length>2&&h.push(b+"R"+(x+1))})}function f(h,p){var g=["ID;PWXL;N;E"],x=[],b=Hn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var j=b.s.r;j<=b.e.r;++j)for(var k=b.s.c;k<=b.e.c;++k){var I=Hr({r:j,c:k});y=w?(h[j]||[])[k]:h[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,j,k))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),Noe=function(){function e(s,i){switch(i.type){case"base64":return t($c(s),i);case"binary":return t(s,i);case"buffer":return t(gn&&Buffer.isBuffer(s)?s.toString("binary"):Gm(s),i);case"array":return t(wg(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+p){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Pd(g))?isNaN(p1(g).getDate())?f[c][u]=g:f[c][u]=Qa(g):f[c][u]=Pd(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return ib(e(s,i),i)}function n(s,i){return Km(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Hn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Hr({r:p,c:g});if(f=h?(c[p]||[])[g]:c[x],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=zu(f.z||Mr[14],ki(Qa(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Soe=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,x=-1,b=0,y=[];b!==p.length;++b){var w=p[b].trim().split(":");if(w[0]==="cell"){var _=os(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var j=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],j])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return ib(r(f,h),h)}function a(f,h){return Km(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,x="",b=nc(f["!ref"]),y=Array.isArray(f),w=b.s.r;w<=b.e.r;++w)for(var _=b.s.c;_<=b.e.c;++_)if(x=Hr({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(p=["cell",x,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var j=ki(Qa(g.v));p[2]="vtc",p[3]="nd",p[4]=""+j,p[5]=g.w||zu(g.z||Mr[14],j);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),g1=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Pd(d))?isNaN(p1(d).getDate())?f[h][p]=d:f[h][p]=Qa(d):f[h][p]=Pd(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var b=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,b=Math.max(b,y);for(w=0;w<=x;++w){p[w]=[];var _=0;for(e(g[w].slice(0,b).trim(),p,w,_,h),_=1;_<=(g[w].length-b)/10+1;++_)e(g[w].slice(b+(_-1)*10,b+_*10).trim(),p,w,_,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(x,b){return x[0]-b[0]||n[x[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,w=0,_=0,j=0,k=p.charCodeAt(0),I=!1,E=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=h.dateNF!=null?xUe(h.dateNF):null;function R(){var D=d.slice(_,j),O={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)O.t="z";else if(h.raw)O.t="s",O.v=D;else if(D.trim().length===0)O.t="s",O.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(O.t="s",O.v=D.slice(2,-1).replace(/""/g,'"')):KVe(D)?(O.t="n",O.f=D.slice(1)):(O.t="s",O.v=D);else if(D=="TRUE")O.t="b",O.v=!0;else if(D=="FALSE")O.t="b",O.v=!1;else if(!isNaN(w=Pd(D)))O.t="n",h.cellText!==!1&&(O.w=D),O.v=w;else if(!isNaN(p1(D).getDate())||B&&D.match(B)){O.z=h.dateNF||Mr[14];var L=0;B&&D.match(B)&&(D=vUe(D,h.dateNF,D.match(B)||[]),L=1),h.cellDates?(O.t="d",O.v=Qa(D,L)):(O.t="n",O.v=ki(Qa(D,L))),h.cellText!==!1&&(O.w=zu(O.z,O.v instanceof Date?ki(O.v):O.v)),h.cellNF||delete O.z}else O.t="s",O.v=D;if(O.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=O):g[Hr({c:y,r:b})]=O),_=j+1,N=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<b&&(x.e.r=b),E==k)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;j<d.length;++j)switch(E=d.charCodeAt(j)){case 34:N===34&&(I=!I);break;case k:case 10:case 13:if(!I&&R())break e;break}return j-_>0&&R(),g["!ref"]=nn(x),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):ib(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:R8(d,f);switch(f.type){case"base64":h=$c(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof e2<"u"||(h=gn&&Buffer.isBuffer(d)?d.toString("binary"):Gm(d));break;case"array":h=wg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof e2<"u",h.slice(0,19)=="socialcalc:version:"?Soe.to_sheet(f.type=="string"?h:Ea(h),f):i(h,f)}function c(d,f){return Km(o(d,f),f)}function u(d){for(var f=[],h=Hn(d["!ref"]),p,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var b=[],y=h.s.c;y<=h.e.c;++y){var w=Hr({r:x,c:y});if(p=g?(d[x]||[])[y]:d[w],!p||p.v==null){b.push("          ");continue}for(var _=(p.w||(kh(p),p.w)||"").slice(0,10);_.length<10;)_+=" ";b.push(_+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function FQe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=_oe.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return g1.to_workbook(e,t)}}var eg=function(){function e(P,H,X){if(P){xo(P,P.l||0);for(var Z=X.Enum||Y;P.l<P.length;){var ae=P.read_shift(2),le=Z[ae]||Z[65535],ie=P.read_shift(2),ce=P.l+ie,fe=le.f&&le.f(P,ie,X);if(P.l=ce,H(fe,le,ae))return}}}function t(P,H){switch(H.type){case"base64":return r(Dc($c(P)),H);case"binary":return r(Dc(P),H);case"buffer":case"array":return r(P,H)}throw"Unsupported type "+H.type}function r(P,H){if(!P)return P;var X=H||{},Z=X.dense?[]:{},ae="Sheet1",le="",ie=0,ce={},fe=[],Ie=[],ne={s:{r:0,c:0},e:{r:0,c:0}},_e=X.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)X.Enum=Y,e(P,function(Te,Me,We){switch(We){case 0:X.vers=Te,Te>=4096&&(X.qpro=!0);break;case 6:ne=Te;break;case 204:Te&&(le=Te);break;case 222:le=Te;break;case 15:case 51:X.qpro||(Te[1].v=Te[1].v.slice(1));case 13:case 14:case 16:We==14&&(Te[2]&112)==112&&(Te[2]&15)>1&&(Te[2]&15)<15&&(Te[1].z=X.dateNF||Mr[14],X.cellDates&&(Te[1].t="d",Te[1].v=Ek(Te[1].v))),X.qpro&&Te[3]>ie&&(Z["!ref"]=nn(ne),ce[ae]=Z,fe.push(ae),Z=X.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ie=Te[3],ae=le||"Sheet"+(ie+1),le="");var be=X.dense?(Z[Te[0].r]||[])[Te[0].c]:Z[Hr(Te[0])];if(be){be.t=Te[1].t,be.v=Te[1].v,Te[1].z!=null&&(be.z=Te[1].z),Te[1].f!=null&&(be.f=Te[1].f);break}X.dense?(Z[Te[0].r]||(Z[Te[0].r]=[]),Z[Te[0].r][Te[0].c]=Te[1]):Z[Hr(Te[0])]=Te[1];break}},X);else if(P[2]==26||P[2]==14)X.Enum=te,P[2]==14&&(X.qpro=!0,P.l=0),e(P,function(Te,Me,We){switch(We){case 204:ae=Te;break;case 22:Te[1].v=Te[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Te[3]>ie&&(Z["!ref"]=nn(ne),ce[ae]=Z,fe.push(ae),Z=X.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ie=Te[3],ae="Sheet"+(ie+1)),_e>0&&Te[0].r>=_e)break;X.dense?(Z[Te[0].r]||(Z[Te[0].r]=[]),Z[Te[0].r][Te[0].c]=Te[1]):Z[Hr(Te[0])]=Te[1],ne.e.c<Te[0].c&&(ne.e.c=Te[0].c),ne.e.r<Te[0].r&&(ne.e.r=Te[0].r);break;case 27:Te[14e3]&&(Ie[Te[14e3][0]]=Te[14e3][1]);break;case 1537:Ie[Te[0]]=Te[1],Te[0]==ie&&(ae=Te[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(Z["!ref"]=nn(ne),ce[le||ae]=Z,fe.push(le||ae),!Ie.length)return{SheetNames:fe,Sheets:ce};for(var Fe={},Se=[],me=0;me<Ie.length;++me)ce[fe[me]]?(Se.push(Ie[me]||fe[me]),Fe[Ie[me]]=ce[Ie[me]]||ce[fe[me]]):(Se.push(Ie[me]),Fe[Ie[me]]={"!ref":"A1"});return{SheetNames:Se,Sheets:Fe}}function n(P,H){var X=H||{};if(+X.codepage>=0&&kd(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=tc(),ae=Hn(P["!ref"]),le=Array.isArray(P),ie=[];qt(Z,0,s(1030)),qt(Z,6,c(ae));for(var ce=Math.min(ae.e.r,8191),fe=ae.s.r;fe<=ce;++fe)for(var Ie=qs(fe),ne=ae.s.c;ne<=ae.e.c;++ne){fe===ae.s.r&&(ie[ne]=is(ne));var _e=ie[ne]+Ie,Fe=le?(P[fe]||[])[ne]:P[_e];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")(Fe.v|0)==Fe.v&&Fe.v>=-32768&&Fe.v<=32767?qt(Z,13,p(fe,ne,Fe.v)):qt(Z,14,x(fe,ne,Fe.v));else{var Se=kh(Fe);qt(Z,15,f(fe,ne,Se.slice(0,239)))}}return qt(Z,1),Z.end()}function a(P,H){var X=H||{};if(+X.codepage>=0&&kd(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=tc();qt(Z,0,i(P));for(var ae=0,le=0;ae<P.SheetNames.length;++ae)(P.Sheets[P.SheetNames[ae]]||{})["!ref"]&&qt(Z,27,G(P.SheetNames[ae],le++));var ie=0;for(ae=0;ae<P.SheetNames.length;++ae){var ce=P.Sheets[P.SheetNames[ae]];if(!(!ce||!ce["!ref"])){for(var fe=Hn(ce["!ref"]),Ie=Array.isArray(ce),ne=[],_e=Math.min(fe.e.r,8191),Fe=fe.s.r;Fe<=_e;++Fe)for(var Se=qs(Fe),me=fe.s.c;me<=fe.e.c;++me){Fe===fe.s.r&&(ne[me]=is(me));var Te=ne[me]+Se,Me=Ie?(ce[Fe]||[])[me]:ce[Te];if(!(!Me||Me.t=="z"))if(Me.t=="n")qt(Z,23,R(Fe,me,ie,Me.v));else{var We=kh(Me);qt(Z,22,E(Fe,me,ie,We.slice(0,239)))}}++ie}}return qt(Z,1),Z.end()}function s(P){var H=Ct(2);return H.write_shift(2,P),H}function i(P){var H=Ct(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var X=0,Z=0,ae=0,le=0;le<P.SheetNames.length;++le){var ie=P.SheetNames[le],ce=P.Sheets[ie];if(!(!ce||!ce["!ref"])){++ae;var fe=nc(ce["!ref"]);X<fe.e.r&&(X=fe.e.r),Z<fe.e.c&&(Z=fe.e.c)}}return X>8191&&(X=8191),H.write_shift(2,X),H.write_shift(1,ae),H.write_shift(1,Z),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function o(P,H,X){var Z={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&X.qpro?(Z.s.c=P.read_shift(1),P.l++,Z.s.r=P.read_shift(2),Z.e.c=P.read_shift(1),P.l++,Z.e.r=P.read_shift(2),Z):(Z.s.c=P.read_shift(2),Z.s.r=P.read_shift(2),H==12&&X.qpro&&(P.l+=2),Z.e.c=P.read_shift(2),Z.e.r=P.read_shift(2),H==12&&X.qpro&&(P.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function c(P){var H=Ct(8);return H.write_shift(2,P.s.c),H.write_shift(2,P.s.r),H.write_shift(2,P.e.c),H.write_shift(2,P.e.r),H}function u(P,H,X){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(Z[0].c=P.read_shift(1),Z[3]=P.read_shift(1),Z[0].r=P.read_shift(2),P.l+=2):(Z[2]=P.read_shift(1),Z[0].c=P.read_shift(2),Z[0].r=P.read_shift(2)),Z}function d(P,H,X){var Z=P.l+H,ae=u(P,H,X);if(ae[1].t="s",X.vers==20768){P.l++;var le=P.read_shift(1);return ae[1].v=P.read_shift(le,"utf8"),ae}return X.qpro&&P.l++,ae[1].v=P.read_shift(Z-P.l,"cstr"),ae}function f(P,H,X){var Z=Ct(7+X.length);Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,P),Z.write_shift(1,39);for(var ae=0;ae<Z.length;++ae){var le=X.charCodeAt(ae);Z.write_shift(1,le>=128?95:le)}return Z.write_shift(1,0),Z}function h(P,H,X){var Z=u(P,H,X);return Z[1].v=P.read_shift(2,"i"),Z}function p(P,H,X){var Z=Ct(7);return Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,P),Z.write_shift(2,X,"i"),Z}function g(P,H,X){var Z=u(P,H,X);return Z[1].v=P.read_shift(8,"f"),Z}function x(P,H,X){var Z=Ct(13);return Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,P),Z.write_shift(8,X,"f"),Z}function b(P,H,X){var Z=P.l+H,ae=u(P,H,X);if(ae[1].v=P.read_shift(8,"f"),X.qpro)P.l=Z;else{var le=P.read_shift(2);j(P.slice(P.l,P.l+le),ae),P.l+=le}return ae}function y(P,H,X){var Z=H&32768;return H&=-32769,H=(Z?P:0)+(H>=8192?H-16384:H),(Z?"":"$")+(X?is(H):qs(H))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(P,H){xo(P,0);for(var X=[],Z=0,ae="",le="",ie="",ce="";P.l<P.length;){var fe=P[P.l++];switch(fe){case 0:X.push(P.read_shift(8,"f"));break;case 1:le=y(H[0].c,P.read_shift(2),!0),ae=y(H[0].r,P.read_shift(2),!1),X.push(le+ae);break;case 2:{var Ie=y(H[0].c,P.read_shift(2),!0),ne=y(H[0].r,P.read_shift(2),!1);le=y(H[0].c,P.read_shift(2),!0),ae=y(H[0].r,P.read_shift(2),!1),X.push(Ie+ne+":"+le+ae)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(P.read_shift(2));break;case 6:{for(var _e="";fe=P[P.l++];)_e+=String.fromCharCode(fe);X.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:ce=X.pop(),ie=X.pop(),X.push(["AND","OR"][fe-20]+"("+ie+","+ce+")");break;default:if(fe<32&&_[fe])ce=X.pop(),ie=X.pop(),X.push(ie+_[fe]+ce);else if(w[fe]){if(Z=w[fe][1],Z==69&&(Z=P[P.l++]),Z>X.length){console.error("WK1 bad formula parse 0x"+fe.toString(16)+":|"+X.join("|")+"|");return}var Fe=X.slice(-Z);X.length-=Z,X.push(w[fe][0]+"("+Fe.join(",")+")")}else return fe<=7?console.error("WK1 invalid opcode "+fe.toString(16)):fe<=24?console.error("WK1 unsupported op "+fe.toString(16)):fe<=30?console.error("WK1 invalid opcode "+fe.toString(16)):fe<=115?console.error("WK1 unsupported function opcode "+fe.toString(16)):console.error("WK1 unrecognized opcode "+fe.toString(16))}}X.length==1?H[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function k(P){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=P.read_shift(2),H[3]=P[P.l++],H[0].c=P[P.l++],H}function I(P,H){var X=k(P);return X[1].t="s",X[1].v=P.read_shift(H-4,"cstr"),X}function E(P,H,X,Z){var ae=Ct(6+Z.length);ae.write_shift(2,P),ae.write_shift(1,X),ae.write_shift(1,H),ae.write_shift(1,39);for(var le=0;le<Z.length;++le){var ie=Z.charCodeAt(le);ae.write_shift(1,ie>=128?95:ie)}return ae.write_shift(1,0),ae}function N(P,H){var X=k(P);X[1].v=P.read_shift(2);var Z=X[1].v>>1;if(X[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return X[1].v=Z,X}function B(P,H){var X=k(P),Z=P.read_shift(4),ae=P.read_shift(4),le=P.read_shift(2);if(le==65535)return Z===0&&ae===3221225472?(X[1].t="e",X[1].v=15):Z===0&&ae===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var ie=le&32768;return le=(le&32767)-16446,X[1].v=(1-ie*2)*(ae*Math.pow(2,le+32)+Z*Math.pow(2,le)),X}function R(P,H,X,Z){var ae=Ct(14);if(ae.write_shift(2,P),ae.write_shift(1,X),ae.write_shift(1,H),Z==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var le=0,ie=0,ce=0,fe=0;return Z<0&&(le=1,Z=-Z),ie=Math.log2(Z)|0,Z/=Math.pow(2,ie-31),fe=Z>>>0,(fe&2147483648)==0&&(Z/=2,++ie,fe=Z>>>0),Z-=fe,fe|=2147483648,fe>>>=0,Z*=Math.pow(2,32),ce=Z>>>0,ae.write_shift(4,ce),ae.write_shift(4,fe),ie+=16383+(le?32768:0),ae.write_shift(2,ie),ae}function D(P,H){var X=B(P);return P.l+=H-14,X}function O(P,H){var X=k(P),Z=P.read_shift(4);return X[1].v=Z>>6,X}function L(P,H){var X=k(P),Z=P.read_shift(8,"f");return X[1].v=Z,X}function M(P,H){var X=L(P);return P.l+=H-10,X}function J(P,H){return P[P.l+H-1]==0?P.read_shift(H,"cstr"):""}function V(P,H){var X=P[P.l++];X>H-1&&(X=H-1);for(var Z="";Z.length<X;)Z+=String.fromCharCode(P[P.l++]);return Z}function K(P,H,X){if(!(!X.qpro||H<21)){var Z=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var ae=P.read_shift(H-21,"cstr");return[Z,ae]}}function z(P,H){for(var X={},Z=P.l+H;P.l<Z;){var ae=P.read_shift(2);if(ae==14e3){for(X[ae]=[0,""],X[ae][0]=P.read_shift(2);P[P.l];)X[ae][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return X}function G(P,H){var X=Ct(5+P.length);X.write_shift(2,14e3),X.write_shift(2,H);for(var Z=0;Z<P.length;++Z){var ae=P.charCodeAt(Z);X[X.l++]=ae>127?95:ae}return X[X.l++]=0,X}var Y={0:{n:"BOF",f:ci},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:J},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:J},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:K},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function OQe(e){var t={},r=e.match(ol),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Kr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=e8[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var DQe=function(){var e=n2("t"),t=n2("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Un(i[1])},c=s.match(t);return c&&(o.s=OQe(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),PQe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),RQe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,LQe=/<(?:\w+:)?r>/,MQe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function C8(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Un(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=u8(n.t))):e.match(LQe)&&(n.r=Ea(e),n.t=Un(Ea((e.replace(MQe,"").match(RQe)||[]).join("").replace(ol,""))),r&&(n.h=PQe(DQe(n.r)))),n):{t:""}}var UQe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,QQe=/<(?:\w+:)?(?:si|sstItem)>/g,HQe=/<\/(?:\w+:)?(?:si|sstItem)>/;function VQe(e,t){var r=[],n="";if(!e)return r;var a=e.match(UQe);if(a){n=a[2].replace(QQe,"").split(HQe);for(var s=0;s!=n.length;++s){var i=C8(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Kr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var zQe=/^\s|\s$|[\t\n\r]/;function koe(e,t){if(!t.bookSST)return"";var r=[Js];r[r.length]=Kt("sst",null,{xmlns:Vg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(zQe)&&(s+=' xml:space="preserve"'),s+=">"+ga(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function $Qe(e){return[e.read_shift(4),e.read_shift(4)]}function GQe(e,t){var r=[],n=!1;return Uh(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function KQe(e,t){return t||(t=Ct(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var qQe=a7e;function WQe(e){var t=tc();Rt(t,159,KQe(e));for(var r=0;r<e.length;++r)Rt(t,19,qQe(e[r]));return Rt(t,160),t.end()}function joe(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function dh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function XQe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=dh(e,4),t.U=dh(e,4),t.W=dh(e,4),t}function YQe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function JQe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(YQe(e));return t}function ZQe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function eHe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=dh(e,4),t.U=dh(e,4),t.W=dh(e,4),t}function tHe(e){var t=eHe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Boe(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Toe(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function rHe(e){var t=dh(e);switch(t.Minor){case 2:return[t.Minor,nHe(e)];case 3:return[t.Minor,aHe()];case 4:return[t.Minor,sHe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function nHe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Boe(e,r),a=Toe(e,e.length-e.l);return{t:"Std",h:n,v:a}}function aHe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function sHe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ol,function(s){var i=Kr(s);switch(sf(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function iHe(e,t){var r={},n=r.EncryptionVersionInfo=dh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Boe(e,a),t-=a,r.EncryptionVerifier=Toe(e,t),r}function oHe(e){var t={},r=t.EncryptionVersionInfo=dh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function _8(e){var t=0,r,n=joe(e),a=n.length+1,s,i,o,c,u;for(r=km(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var Ioe=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=joe(i),c=s(o),u=o.length,d=km(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(o[u],h),--u,--g;return d}}(),lHe=function(e,t,r,n,a){a||(a=t),n||(n=Ioe(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},cHe=function(e){var t=0,r=Ioe(e);return function(n){var a=lHe("",n,t,r);return t=a[1],a[0]}};function uHe(e,t,r,n){var a={key:ci(e),verificationBytes:ci(e)};return r.password&&(a.verifier=_8(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=cHe(r.password)),a}function dHe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=oHe(e):n.Data=iHe(e,t),n}function AHe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?dHe(e,t-2,n):uHe(e,r.biff>=8?t:t-2,r,n),n}var Foe=function(){function e(a,s){switch(s.type){case"base64":return t($c(a),s);case"binary":return t(a,s);case"buffer":return t(gn&&Buffer.isBuffer(a)?a.toString("binary"):Gm(a),s);case"array":return t(wg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++x,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][x]=y:o[Hr({r:f,c:x})]=y}break}p=h.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=nn(u),o}function r(a,s){return Km(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Hn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Hr({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(kh(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function fHe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function o2(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function hHe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function mHe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function lS(e,t){if(t===0)return e;var r=hHe(fHe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),o2(mHe(r))}var Ooe=6,pHe=15,gHe=1,Yo=Ooe;function l2(e){return Math.floor((e+Math.round(128/Yo)/256)*Yo)}function c2(e){return Math.floor((e-5)/Yo*100+.5)/100}function cS(e){return Math.round((e*Yo+5)/Yo*256)/256}function nI(e){return cS(c2(l2(e)))}function N8(e){var t=Math.abs(e-nI(e)),r=Yo;if(t>.005)for(Yo=gHe;Yo<pHe;++Yo)Math.abs(e-nI(e))<=t&&(t=Math.abs(e-nI(e)),r=Yo);Yo=r}function jm(e){e.width?(e.wpx=l2(e.width),e.wch=c2(e.wpx),e.MDW=Yo):e.wpx?(e.wch=c2(e.wpx),e.width=cS(e.wch),e.MDW=Yo):typeof e.wch=="number"&&(e.width=cS(e.wch),e.wpx=l2(e.width),e.MDW=Yo),e.customWidth&&delete e.customWidth}var xHe=96,Doe=xHe;function u2(e){return e*96/Doe}function x1(e){return e*Doe/96}var vHe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function bHe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=Kr(i);switch(sf(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ma(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ma(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function yHe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=Kr(i);switch(sf(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function wHe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=Kr(i);switch(sf(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ea(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ma(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ma(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ma(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ma(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ma(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ma(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ma(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=e8[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ma(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Jp[a.color.index];a.color.index==81&&(c=Jp[1]),c||(c=Jp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=lS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function EHe(e,t,r){t.NumberFmt=[];for(var n=Bs(Mr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Mr[n[a]];var s=e[0].match(ol);if(s)for(a=0;a<s.length;++a){var i=Kr(s[a]);switch(sf(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Un(Ea(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}uh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function CHe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:ga(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var i_=["numFmtId","fillId","fontId","borderId","xfId"],o_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function _He(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ol)||[]).forEach(function(s){var i=Kr(s),o=0;switch(sf(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<i_.length;++o)n[i_[o]]&&(n[i_[o]]=parseInt(n[i_[o]],10));for(o=0;o<o_.length;++o)n[o_[o]]&&(n[o_[o]]=Ma(n[o_[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ma(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function NHe(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var SHe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&EHe(f,d,u),(f=o.match(a))&&wHe(f,d,c,u),(f=o.match(n))&&yHe(f,d,c,u),(f=o.match(s))&&bHe(f,d,c,u),(f=o.match(r))&&_He(f,d,u),d}}();function Poe(e,t){var r=[Js,Kt("styleSheet",null,{xmlns:Vg[0],"xmlns:vt":_i.vt})],n;return e.SSF&&(n=CHe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=NHe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function kHe(e,t){var r=e.read_shift(2),n=rl(e);return[r,n]}function jHe(e,t,r){r||(r=Ct(6+4*t.length)),r.write_shift(2,e),Ji(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function BHe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=d7e(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=u7e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=rl(e),n}function THe(e,t){t||(t=Ct(153)),t.write_shift(2,e.sz*20),A7e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),sS(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ji(e.name,t),t.length>t.l?t.slice(0,t.l):t}var IHe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],aI,FHe=al;function WK(e,t){t||(t=Ct(84)),aI||(aI=yk(IHe));var r=aI[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(sS({auto:1},t),sS({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function OHe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Roe(e,t,r){r||(r=Ct(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function cy(e,t){return t||(t=Ct(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var DHe=al;function PHe(e,t){return t||(t=Ct(51)),t.write_shift(1,0),cy(null,t),cy(null,t),cy(null,t),cy(null,t),cy(null,t),t.length>t.l?t.slice(0,t.l):t}function RHe(e,t){return t||(t=Ct(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),aS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function LHe(e,t,r){var n=Ct(2052);return n.write_shift(4,e),aS(t,n),aS(r,n),n.length>n.l?n.slice(0,n.l):n}function MHe(e,t,r){var n={};n.NumberFmt=[];for(var a in Mr)n.NumberFmt[a]=Mr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Uh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],uh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=lS(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function UHe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Rd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,jHe(a,t[a]))}),Rt(e,616))}}function QHe(e){var t=1;Rt(e,611,Rd(t)),Rt(e,43,THe({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function HHe(e){var t=2;Rt(e,603,Rd(t)),Rt(e,45,WK({patternType:"none"})),Rt(e,45,WK({patternType:"gray125"})),Rt(e,604)}function VHe(e){var t=1;Rt(e,613,Rd(t)),Rt(e,46,PHe()),Rt(e,614)}function zHe(e){var t=1;Rt(e,626,Rd(t)),Rt(e,47,Roe({numFmtId:0},65535)),Rt(e,627)}function $He(e,t){Rt(e,617,Rd(t.length)),t.forEach(function(r){Rt(e,47,Roe(r,0))}),Rt(e,618)}function GHe(e){var t=1;Rt(e,619,Rd(t)),Rt(e,48,RHe({xfId:0,name:"Normal"})),Rt(e,620)}function KHe(e){var t=0;Rt(e,505,Rd(t)),Rt(e,506)}function qHe(e){var t=0;Rt(e,508,LHe(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function WHe(e,t){var r=tc();return Rt(r,278),UHe(r,e.SSF),QHe(r),HHe(r),VHe(r),zHe(r),$He(r,t.cellXfs),GHe(r),KHe(r),qHe(r),Rt(r,279),r.end()}var XHe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function YHe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ol)||[]).forEach(function(a){var s=Kr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[XHe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function JHe(){}function ZHe(){}var eVe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,tVe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,rVe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function nVe(e,t,r){t.themeElements={};var n;[["clrScheme",eVe,YHe],["fontScheme",tVe,JHe],["fmtScheme",rVe,ZHe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var aVe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Loe(e,t){(!e||e.length===0)&&(e=S8());var r,n={};if(!(r=e.match(aVe)))throw new Error("themeElements not found in theme");return nVe(r[0],n,t),n.raw=e,n}function S8(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Js];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function sVe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=Bie(s,{type:"array"})}catch{return}var o=Pc(i,"theme/theme/theme1.xml",!0);if(o)return Loe(o,r)}}function iVe(e){return e.read_shift(4)}function oVe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=lVe(e,4);break;case 2:t.xclrValue=goe(e);break;case 3:t.xclrValue=iVe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function lVe(e,t){return al(e,t)}function cVe(e,t){return al(e,t)}function uVe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=oVe(e);break;case 6:n[1]=cVe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function dVe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(uVe(e,r-e.l));return{ixfe:n,ext:s}}function AVe(e,t){t.forEach(function(r){r[0]})}function fVe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:rl(e)}}function hVe(e){var t=Ct(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ji(e.name,t),t.slice(0,t.l)}function mVe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function pVe(e){var t=Ct(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function gVe(e,t){var r=Ct(8+2*t.length);return r.write_shift(4,e),Ji(t,r),r.slice(0,r.l)}function xVe(e){return e.l+=4,e.read_shift(4)!=0}function vVe(e,t){var r=Ct(8);return r.write_shift(4,e),r.write_shift(4,1),r}function bVe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Uh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function yVe(){var e=tc();return Rt(e,332),Rt(e,334,Rd(1)),Rt(e,335,hVe({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,gVe(1,"XLDAPR")),Rt(e,52),Rt(e,35,Rd(514)),Rt(e,4096,Rd(0)),Rt(e,4097,ju(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,vVe(1)),Rt(e,51,pVe([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function wVe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(ol,function(o){var c=Kr(o);switch(sf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function Moe(){var e=[Js];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function EVe(e){var t=[];if(!e)return t;var r=1;return(e.match(ol)||[]).forEach(function(n){var a=Kr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function CVe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function _Ve(e,t,r){var n=[];return Uh(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function NVe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Uh(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function SVe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var hv=1024;function Uoe(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":Bc.v,"xmlns:o":Bc.o,"xmlns:x":Bc.x,"xmlns:mv":Bc.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];hv<e*1e3;)hv+=1e3;return t.forEach(function(s){var i=os(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",c,o),d={on:"t",obscured:"t"};++hv,a=a.concat(["<v:shape"+a2({id:"_x0000_s"+hv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",vo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),vo("x:AutoFill","False"),vo("x:Row",String(i.r)),vo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function XK(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=os(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Hn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=nn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function kVe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Kr(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=os(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&C8(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Qoe(e){var t=[Js,Kt("comments",null,{xmlns:Vg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=ga(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ga(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(vo("t",ga(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(vo("t",ga(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function jVe(e,t){var r=[],n=!1,a={},s=0;return e.replace(ol,function(o,c){var u=Kr(o);switch(sf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function BVe(e,t,r){var n=[Js,Kt("ThreadedComments",null,{xmlns:_i.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Kt("threadedComment",vo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function TVe(e,t){var r=[],n=!1;return e.replace(ol,function(s){var i=Kr(s);switch(sf(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function IVe(e){var t=[Js,Kt("personList",null,{xmlns:_i.TCMNT,"xmlns:x":Vg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function FVe(e){var t={};t.iauthor=e.read_shift(4);var r=Kg(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function OVe(e,t){return t==null&&(t=Ct(36)),t.write_shift(4,e[1].iauthor),ob(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var DVe=rl;function PVe(e){return Ji(e.slice(0,54))}function RVe(e,t){var r=[],n=[],a={},s=!1;return Uh(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function LVe(e){var t=tc(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,PVe(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:os(n[0]),e:os(n[0])};Rt(t,635,OVe([s,a])),a.t&&a.t.length>0&&Rt(t,637,i7e(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var MVe="application/vnd.ms-office.vbaProject";function UVe(e){var t=_r.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");_r.utils.cfb_add(t,a,e.FileIndex[n].content)}}),_r.write(t)}function QVe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&_r.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Hoe=["xlsb","xlsm","xlam","biff8","xla"];function HVe(){return{"!type":"dialog"}}function VVe(){return{"!type":"dialog"}}function zVe(){return{"!type":"macro"}}function $Ve(){return{"!type":"macro"}}var Pv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+is(d)+(c?"":"$")+qs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),k8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,j8=function(){return function(t,r){return t.replace(k8,function(n,a,s,i,o,c){var u=m8(i)-(s?0:r.c),d=h8(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Voe(e,t){return e.replace(k8,function(r,n,a,s,i,o){return n+(a=="$"?a+s:is(m8(s)+t.c))+(i=="$"?i+o:qs(h8(o)+t.r))})}function GVe(e,t,r){var n=nc(t),a=n.s,s=os(r),i={r:s.r-a.r,c:s.c-a.c};return Voe(e,i)}function KVe(e){return e.length!=1}function YK(e){return e.replace(/_xlfn\./g,"")}function si(e){e.l+=1}function Bm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function zoe(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return $oe(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=Bm(e),o=Bm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function $oe(e){var t=Bm(e),r=Bm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function qVe(e,t,r){if(r.biff<8)return $oe(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Bm(e),i=Bm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Goe(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return WVe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Bm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function WVe(e){var t=Bm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function XVe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function YVe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return JVe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function JVe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function ZVe(e,t,r){var n=(e[e.l++]&96)>>5,a=zoe(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function eze(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=zoe(e,s,r);return[n,a,i]}function tze(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function rze(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function nze(e,t,r){var n=(e[e.l++]&96)>>5,a=qVe(e,t-1,r);return[n,a]}function aze(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function JK(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function sze(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function ize(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function oze(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function lze(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function cze(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Koe(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function uze(e){return e.read_shift(2),Koe(e)}function dze(e){return e.read_shift(2),Koe(e)}function Aze(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Goe(e,0,r);return[n,a]}function fze(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=YVe(e,0,r);return[n,a]}function hze(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Goe(e,0,r);return[n,a,s]}function mze(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[x$e[a],Xoe[a],n]}function pze(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:gze(e);return[a,(s[0]===0?Xoe:g$e)[s[1]]]}function gze(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function xze(e,t,r){e.l+=r&&r.biff==2?3:4}function vze(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function bze(e){return e.l++,Qh[e.read_shift(1)]}function yze(e){return e.l++,e.read_shift(2)}function wze(e){return e.l++,e.read_shift(1)!==0}function Eze(e){return e.l++,el(e)}function Cze(e,t,r){return e.l++,oE(e,t-1,r)}function _ze(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Qh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=el(e);break;case 2:r[1]=qg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Nze(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Kg:Ck)(e));return a}function Sze(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=_ze(e,r.biff);return i}function kze(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function jze(e,t,r){if(r.biff==5)return Bze(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function Bze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Tze(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Ize(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Fze(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Oze(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var Dze=al,Pze=al,Rze=al;function cE(e,t,r){return e.l+=2,[XVe(e)]}function B8(e){return e.l+=6,[]}var Lze=cE,Mze=B8,Uze=B8,Qze=cE;function qoe(e){return e.l+=2,[ci(e),e.read_shift(2)&1]}var Hze=cE,Vze=qoe,zze=B8,$ze=cE,Gze=cE,Kze=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function qze(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=Kze[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function Wze(e){return e.l+=2,[e.read_shift(4)]}function Xze(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Yze(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Jze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Zze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function e$e(e){return e.l+=4,[0,0]}var ZK={1:{n:"PtgExp",f:vze},2:{n:"PtgTbl",f:Rze},3:{n:"PtgAdd",f:si},4:{n:"PtgSub",f:si},5:{n:"PtgMul",f:si},6:{n:"PtgDiv",f:si},7:{n:"PtgPower",f:si},8:{n:"PtgConcat",f:si},9:{n:"PtgLt",f:si},10:{n:"PtgLe",f:si},11:{n:"PtgEq",f:si},12:{n:"PtgGe",f:si},13:{n:"PtgGt",f:si},14:{n:"PtgNe",f:si},15:{n:"PtgIsect",f:si},16:{n:"PtgUnion",f:si},17:{n:"PtgRange",f:si},18:{n:"PtgUplus",f:si},19:{n:"PtgUminus",f:si},20:{n:"PtgPercent",f:si},21:{n:"PtgParen",f:si},22:{n:"PtgMissArg",f:si},23:{n:"PtgStr",f:Cze},26:{n:"PtgSheet",f:Xze},27:{n:"PtgEndSheet",f:Yze},28:{n:"PtgErr",f:bze},29:{n:"PtgBool",f:wze},30:{n:"PtgInt",f:yze},31:{n:"PtgNum",f:Eze},32:{n:"PtgArray",f:aze},33:{n:"PtgFunc",f:mze},34:{n:"PtgFuncVar",f:pze},35:{n:"PtgName",f:kze},36:{n:"PtgRef",f:Aze},37:{n:"PtgArea",f:ZVe},38:{n:"PtgMemArea",f:Tze},39:{n:"PtgMemErr",f:Dze},40:{n:"PtgMemNoMem",f:Pze},41:{n:"PtgMemFunc",f:Ize},42:{n:"PtgRefErr",f:Fze},43:{n:"PtgAreaErr",f:tze},44:{n:"PtgRefN",f:fze},45:{n:"PtgAreaN",f:nze},46:{n:"PtgMemAreaN",f:Jze},47:{n:"PtgMemNoMemN",f:Zze},57:{n:"PtgNameX",f:jze},58:{n:"PtgRef3d",f:hze},59:{n:"PtgArea3d",f:eze},60:{n:"PtgRefErr3d",f:Oze},61:{n:"PtgAreaErr3d",f:rze},255:{}},t$e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},r$e={1:{n:"PtgElfLel",f:qoe},2:{n:"PtgElfRw",f:$ze},3:{n:"PtgElfCol",f:Lze},6:{n:"PtgElfRwV",f:Gze},7:{n:"PtgElfColV",f:Qze},10:{n:"PtgElfRadical",f:Hze},11:{n:"PtgElfRadicalS",f:zze},13:{n:"PtgElfColS",f:Mze},15:{n:"PtgElfColSV",f:Uze},16:{n:"PtgElfRadicalLel",f:Vze},25:{n:"PtgList",f:qze},29:{n:"PtgSxName",f:Wze},255:{}},n$e={0:{n:"PtgAttrNoop",f:e$e},1:{n:"PtgAttrSemi",f:cze},2:{n:"PtgAttrIf",f:oze},4:{n:"PtgAttrChoose",f:sze},8:{n:"PtgAttrGoto",f:ize},16:{n:"PtgAttrSum",f:xze},32:{n:"PtgAttrBaxcel",f:JK},33:{n:"PtgAttrBaxcel",f:JK},64:{n:"PtgAttrSpace",f:uze},65:{n:"PtgAttrSpaceSemi",f:dze},128:{n:"PtgAttrIfError",f:lze},255:{}};function uE(e,t,r,n){if(n.biff<8)return al(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Sze(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Nze(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(al(e,t)),s}function dE(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=ZK[s]||ZK[t$e[s]],(s===24||s===25)&&(a=(s===24?r$e:n$e)[e[e.l+1]]),!a||!a.f?al(e,t):i.push([a.n,a.f(e,t,r)]);return i}function a$e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var s$e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function i$e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Woe(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function eq(e,t,r){var n=Woe(e,t,r);return n=="#REF"?n:i$e(n,r)}function Go(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,b="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),x>=0){switch(e[0][x][1][0]){case 0:b=Ns(" ",e[0][x][1][1]);break;case 1:b=Ns("\r",e[0][x][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+b,x=-1}o.push(u+s$e[_[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=dw(_[1][1],i,a),o.push(Aw(d,s));break;case"PtgRefN":d=r?dw(_[1][1],r,a):_[1][1],o.push(Aw(d,s));break;case"PtgRef3d":f=_[1][1],d=dw(_[1][2],i,a),g=eq(n,f,a),o.push(g+"!"+Aw(d,s));break;case"PtgFunc":case"PtgFuncVar":var j=_[1][0],k=_[1][1];j||(j=0),j&=127;var I=j==0?[]:o.slice(-j);o.length-=j,k==="User"&&(k=I.shift()),o.push(k+"("+I.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":p=jK(_[1][1],r?{s:r}:i,a),o.push(eI(p,a));break;case"PtgArea":p=jK(_[1][1],i,a),o.push(eI(p,a));break;case"PtgArea3d":f=_[1][1],p=_[1][2],g=eq(n,f,a),o.push(g+"!"+eI(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],N=E?E.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!a.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var B=_[1][1];h=_[1][2];var R;if(a.biff<=5)B<0&&(B=-B),n[B]&&(R=n[B][h]);else{var D="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][h]&&n[B][h].itab>0&&(D=n.SheetNames[n[B][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[B]&&n[B][h])D+=n[B][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var O=(Woe(n,B,a)||"").split(";;");O[h-1]?D=O[h-1]:D+="SH33TJSERRX"}o.push(D);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var L="(",M=")";if(x>=0){switch(b="",e[0][x][1][0]){case 2:L=Ns(" ",e[0][x][1][1])+L;break;case 3:L=Ns("\r",e[0][x][1][1])+L;break;case 4:M=Ns(" ",e[0][x][1][1])+M;break;case 5:M=Ns("\r",e[0][x][1][1])+M;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}o.push(L+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var J={c:r.c,r:r.r};if(n.sharedf[Hr(d)]){var V=n.sharedf[Hr(d)];o.push(Go(V,i,J,n,a))}else{var K=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Go(u[1],i,J,n,a)),K=!0;break}K||o.push(_[1])}break;case"PtgArray":o.push("{"+a$e(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&z.indexOf(e[0][y][0])==-1){_=e[0][x];var G=!0;switch(_[1][0]){case 4:G=!1;case 0:b=Ns(" ",_[1][1]);break;case 5:G=!1;case 1:b=Ns("\r",_[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((G?b:"")+o.pop()+(G?"":b)),x=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function o$e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],al(e,t-2)];var o=dE(e,i,r);return t!==i+a&&(s=uE(e,t-i-a,o,r)),e.l=n,[o,s]}function l$e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],al(e,t-2)];var o=dE(e,i,r);return t!==i+a&&(s=uE(e,t-i-a,o,r)),e.l=n,[o,s]}function c$e(e,t,r,n){var a=e.l+t,s=dE(e,n,r),i;return a!==e.l&&(i=uE(e,a-e.l,s,r)),[s,i]}function u$e(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=dE(e,s,r);return s==65535?[[],al(e,t-2)]:(t!==s+2&&(a=uE(e,n-s-2,i,r)),[i,a])}function d$e(e){var t;if(nh(e,e.l+6)!==65535)return[el(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function A$e(e){if(e==null){var t=Ct(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Eg(e);return Eg(0)}function sI(e,t,r){var n=e.l+t,a=of(e);r.biff==2&&++e.l;var s=d$e(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=l$e(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function f$e(e,t,r,n,a){var s=_g(t,r,a),i=A$e(e.v),o=Ct(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Ct(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=qi([s,i,o,u]);return f}function _k(e,t,r){var n=e.read_shift(4),a=dE(e,n,r),s=e.read_shift(4),i=s>0?uE(e,s,a,r):null;return[a,i]}var h$e=_k,Nk=_k,m$e=_k,p$e=_k,g$e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Xoe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},x$e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function tq(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function v$e(e){var t="of:="+e.replace(k8,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function iI(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function b$e(e){return e.replace(/\./,"!")}var hw={},Rv={},mw=typeof Map<"u";function T8(e,t,r){var n=0,a=e.length;if(r){if(mw?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=mw?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(mw?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function Sk(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Yo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=c2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=cS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function tg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function qm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){uh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Yoe(e,t,r,n,a,s){try{n.cellNF&&(e.z=Mr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Mr[t]==null&&uh(gUe[t]||"General",t),e.t==="e")e.w=e.w||Qh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=r2(e.v);else if(e.t==="d"){var i=ki(e.v);(i|0)===i?e.w=i.toString(10):e.w=r2(i)}else{if(e.v===void 0)return"";e.w=yg(e.v,Rv)}else e.t==="d"?e.w=zu(t,ki(e.v),Rv):e.w=zu(t,e.v,Rv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=lS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=lS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function y$e(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function w$e(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=nn(r))}var E$e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,C$e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,_$e=/<(?:\w:)?hyperlink [^>]*>/mg,N$e=/"(\w*:\w*)"/,S$e=/<(?:\w:)?col\b[^>]*[\/]?>/g,k$e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,j$e=/<(?:\w:)?pageMargins[^>]*\/>/g,Joe=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,B$e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,T$e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function I$e(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(C$e);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Joe);h?I8(h[0],o,a,r):(h=u.match(B$e))&&O$e(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(N$e);g&&w$e(o,g[1])}var x=u.match(T$e);x&&x[1]&&K$e(x[1],a);var b=[];if(t.cellStyles){var y=u.match(S$e);y&&H$e(b,y)}f&&X$e(f[1],o,t,c,s,i);var w=d.match(k$e);w&&(o["!autofilter"]=z$e(w[0]));var _=[],j=d.match(E$e);if(j)for(p=0;p!=j.length;++p)_[p]=Hn(j[p].slice(j[p].indexOf('"')+1));var k=d.match(_$e);k&&M$e(o,k,n);var I=d.match(j$e);if(I&&(o["!margins"]=U$e(Kr(I[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=nn(c)),t.sheetRows>0&&o["!ref"]){var E=Hn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=nn(E))}return b.length>0&&(o["!cols"]=b),_.length>0&&(o["!merges"]=_),o}function F$e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nn(e[r])+'"/>';return t+"</mergeCells>"}function I8(e,t,r,n){var a=Kr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Un(Ea(a.codeName)))}function O$e(e,t,r,n,a){I8(e.slice(0,e.indexOf(">")),r,n,a)}function D$e(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=$A(ga(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Kt("outlinePr",null,u)}!s&&!o||(a[a.length]=Kt("sheetPr",o,i))}var P$e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],R$e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function L$e(e){var t={sheet:1};return P$e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),R$e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=_8(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function M$e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Kr(Ea(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Un(s.location))):(s.Target="#"+Un(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Hn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Hr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function U$e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Q$e(e){return tg(e),Kt("pageMargins",null,e)}function H$e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Kr(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,N8(a.width)),jm(a);s<=i;)e[s++]=Ha(a)}}function V$e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,Sk(a,n)));return r[r.length]="</cols>",r.join("")}function z$e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function $$e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=nc(a);i.s.r==i.e.r&&(i.e.r=nc(t["!ref"]).e.r,a=nn(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var G$e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function K$e(e,t){t.Views||(t.Views=[{}]),(e.match(G$e)||[]).forEach(function(r,n){var a=Kr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function q$e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function W$e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Qh[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=Ha(e),e.t="n",a=""+(e.v=ki(Qa(e.v)))),typeof e.z>"u"&&(e.z=Mr[14]);break;default:a=e.v;break}var o=vo("v",ga(a)),c={r:t},u=qm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=vo("v",""+T8(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Kt("f",ga(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Kt("c",o,c)}var X$e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=n2("v"),i=n2("f");return function(c,u,d,f,h,p){for(var g=0,x="",b=[],y=[],w=0,_=0,j=0,k="",I,E,N=0,B=0,R,D,O=0,L=0,M=Array.isArray(p.CellXf),J,V=[],K=[],z=Array.isArray(u),G=[],Y={},te=!1,P=!!d.sheetStubs,H=c.split(t),X=0,Z=H.length;X!=Z;++X){x=H[X].trim();var ae=x.length;if(ae!==0){var le=0;e:for(g=0;g<ae;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=Kr(x.slice(le,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,B=-1,d.sheetRows&&d.sheetRows<N)continue;Y={},te=!1,E.ht&&(te=!0,Y.hpt=parseFloat(E.ht),Y.hpx=x1(Y.hpt)),E.hidden=="1"&&(te=!0,Y.hidden=!0),E.outlineLevel!=null&&(te=!0,Y.level=+E.outlineLevel),te&&(G[N-1]=Y)}break;case"<":le=g;break}if(le>=g)break;if(E=Kr(x.slice(le,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,B=-1,!(d.sheetRows&&d.sheetRows<N)){f.s.r>N-1&&(f.s.r=N-1),f.e.r<N-1&&(f.e.r=N-1),d&&d.cellStyles&&(Y={},te=!1,E.ht&&(te=!0,Y.hpt=parseFloat(E.ht),Y.hpx=x1(Y.hpt)),E.hidden=="1"&&(te=!0,Y.hidden=!0),E.outlineLevel!=null&&(te=!0,Y.level=+E.outlineLevel),te&&(G[N-1]=Y)),b=x.slice(g).split(e);for(var ie=0;ie!=b.length&&b[ie].trim().charAt(0)=="<";++ie);for(b=b.slice(ie),g=0;g!=b.length;++g)if(x=b[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,j=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,k=y[1],_=0;_!=k.length&&!((j=k.charCodeAt(_)-64)<1||j>26);++_)w=26*w+j;--w,B=w}else++B;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,E=Kr(x.slice(0,_),!0),E.r||(E.r=Hr({r:N-1,c:B})),k=x.slice(_),I={t:""},(y=k.match(s))!=null&&y[1]!==""&&(I.v=Un(y[1])),d.cellFormula){if((y=k.match(i))!=null&&y[1]!==""){if(I.f=Un(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=YK(I.f)),y[0].indexOf('t="array"')>-1)I.F=(k.match(a)||[])[1],I.F.indexOf(":")>-1&&V.push([Hn(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){D=Kr(y[0]);var ce=Un(Ea(y[1]));d.xlfn||(ce=YK(ce)),K[parseInt(D.si,10)]=[D,ce,E.r]}}else(y=k.match(/<f[^>]*\/>/))&&(D=Kr(y[0]),K[D.si]&&(I.f=GVe(K[D.si][1],K[D.si][2],E.r)));var fe=os(E.r);for(_=0;_<V.length;++_)fe.r>=V[_][0].s.r&&fe.r<=V[_][0].e.r&&fe.c>=V[_][0].s.c&&fe.c<=V[_][0].e.c&&(I.F=V[_][1])}if(E.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(P)I.t="z";else continue;else I.t=E.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),I.t){case"n":if(I.v==""||I.v==null){if(!P)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!P)continue;I.t="z"}else R=hw[parseInt(I.v,10)],I.v=R.t,I.r=R.r,d.cellHTML&&(I.h=R.h);break;case"str":I.t="s",I.v=I.v!=null?Ea(I.v):"",d.cellHTML&&(I.h=u8(I.v));break;case"inlineStr":y=k.match(n),I.t="s",y!=null&&(R=C8(y[1]))?(I.v=R.t,d.cellHTML&&(I.h=R.h)):I.v="";break;case"b":I.v=Ma(I.v);break;case"d":d.cellDates?I.v=Qa(I.v,1):(I.v=ki(Qa(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=eoe[I.v];break}if(O=L=0,J=null,M&&E.s!==void 0&&(J=p.CellXf[E.s],J!=null&&(J.numFmtId!=null&&(O=J.numFmtId),d.cellStyles&&J.fillId!=null&&(L=J.fillId))),Yoe(I,O,L,d,h,p),d.cellDates&&M&&I.t=="n"&&ab(Mr[O])&&(I.t="d",I.v=Ek(I.v)),E.cm&&d.xlmeta){var Ie=(d.xlmeta.Cell||[])[+E.cm-1];Ie&&Ie.type=="XLDAPR"&&(I.D=!0)}if(z){var ne=os(E.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=I}else u[E.r]=I}}}}G.length>0&&(u["!rows"]=G)}}();function Y$e(e,t,r,n){var a=[],s=[],i=Hn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),x={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=is(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=qs(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(o=W$e(w,c,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(x={r:u},p&&p[f]&&(b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=u2(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level)),a[a.length]=Kt("row",s.join(""),x))}if(p)for(;f<p.length;++f)p&&p[f]&&(x={r:f+1},b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=u2(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level),a[a.length]=Kt("row","",x));return a.join("")}function Zoe(e,t,r,n){var a=[Js,Kt("worksheet",null,{xmlns:Vg[0],"xmlns:r":_i.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nn(d)}n||(n={}),c["!comments"]=[];var f=[];D$e(c,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=q$e(c,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=V$e(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Y$e(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=L$e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=$$e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=F$e(c["!merges"]));var h=-1,p,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=ha(n,-1,ga(x[1].Target).replace(/#.*$/,""),Cn.HLINK),p["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(p.location=ga(x[1].Target.slice(h+1))),x[1].Tooltip&&(p.tooltip=ga(x[1].Tooltip)),a[a.length]=Kt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=Q$e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=vo("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function J$e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function Z$e(e,t,r){var n=Ct(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=u2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Hr(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function eGe(e,t,r,n){var a=Z$e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var tGe=Kg,rGe=ob;function nGe(){}function aGe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=o7e(e),r}function sGe(e,t,r){r==null&&(r=Ct(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return sS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Wie(e,r),r.slice(0,r.l)}function iGe(e){var t=Ku(e);return[t]}function oGe(e,t,r){return r==null&&(r=Ct(8)),zg(t,r)}function lGe(e){var t=$g(e);return[t]}function cGe(e,t,r){return r==null&&(r=Ct(4)),Gg(t,r)}function uGe(e){var t=Ku(e),r=e.read_shift(1);return[t,r,"b"]}function dGe(e,t,r){return r==null&&(r=Ct(9)),zg(t,r),r.write_shift(1,e.v?1:0),r}function AGe(e){var t=$g(e),r=e.read_shift(1);return[t,r,"b"]}function fGe(e,t,r){return r==null&&(r=Ct(5)),Gg(t,r),r.write_shift(1,e.v?1:0),r}function hGe(e){var t=Ku(e),r=e.read_shift(1);return[t,r,"e"]}function mGe(e,t,r){return r==null&&(r=Ct(9)),zg(t,r),r.write_shift(1,e.v),r}function pGe(e){var t=$g(e),r=e.read_shift(1);return[t,r,"e"]}function gGe(e,t,r){return r==null&&(r=Ct(8)),Gg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function xGe(e){var t=Ku(e),r=e.read_shift(4);return[t,r,"s"]}function vGe(e,t,r){return r==null&&(r=Ct(12)),zg(t,r),r.write_shift(4,t.v),r}function bGe(e){var t=$g(e),r=e.read_shift(4);return[t,r,"s"]}function yGe(e,t,r){return r==null&&(r=Ct(8)),Gg(t,r),r.write_shift(4,t.v),r}function wGe(e){var t=Ku(e),r=el(e);return[t,r,"n"]}function EGe(e,t,r){return r==null&&(r=Ct(16)),zg(t,r),Eg(e.v,r),r}function ele(e){var t=$g(e),r=el(e);return[t,r,"n"]}function CGe(e,t,r){return r==null&&(r=Ct(12)),Gg(t,r),Eg(e.v,r),r}function _Ge(e){var t=Ku(e),r=v8(e);return[t,r,"n"]}function NGe(e,t,r){return r==null&&(r=Ct(12)),zg(t,r),Xie(e.v,r),r}function SGe(e){var t=$g(e),r=v8(e);return[t,r,"n"]}function kGe(e,t,r){return r==null&&(r=Ct(8)),Gg(t,r),Xie(e.v,r),r}function jGe(e){var t=Ku(e),r=p8(e);return[t,r,"is"]}function BGe(e){var t=Ku(e),r=rl(e);return[t,r,"str"]}function TGe(e,t,r){return r==null&&(r=Ct(12+4*e.v.length)),zg(t,r),Ji(e.v,r),r.length>r.l?r.slice(0,r.l):r}function IGe(e){var t=$g(e),r=rl(e);return[t,r,"str"]}function FGe(e,t,r){return r==null&&(r=Ct(8+4*e.v.length)),Gg(t,r),Ji(e.v,r),r.length>r.l?r.slice(0,r.l):r}function OGe(e,t,r){var n=e.l+t,a=Ku(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=Nk(e,n-e.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else e.l=n;return i}function DGe(e,t,r){var n=e.l+t,a=Ku(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=Nk(e,n-e.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else e.l=n;return i}function PGe(e,t,r){var n=e.l+t,a=Ku(e);a.r=r["!row"];var s=el(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=Nk(e,n-e.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else e.l=n;return i}function RGe(e,t,r){var n=e.l+t,a=Ku(e);a.r=r["!row"];var s=rl(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=Nk(e,n-e.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else e.l=n;return i}var LGe=Kg,MGe=ob;function UGe(e,t){return t==null&&(t=Ct(4)),t.write_shift(4,e),t}function QGe(e,t){var r=e.l+t,n=Kg(e),a=g8(e),s=rl(e),i=rl(e),o=rl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function HGe(e,t){var r=Ct(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ob({s:os(e[0]),e:os(e[0])},r),x8("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Ji(a||"",r),Ji(e[1].Tooltip||"",r),Ji("",r),r.slice(0,r.l)}function VGe(){}function zGe(e,t,r){var n=e.l+t,a=Yie(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=h$e(e,n-e.l,r);i[1]=o}else e.l=n;return i}function $Ge(e,t,r){var n=e.l+t,a=Kg(e),s=[a];if(r.cellFormula){var i=p$e(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function GGe(e,t,r){r==null&&(r=Ct(18));var n=Sk(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var tle=["left","right","top","bottom","header","footer"];function KGe(e){var t={};return tle.forEach(function(r){t[r]=el(e)}),t}function qGe(e,t){return t==null&&(t=Ct(48)),tg(e),tle.forEach(function(r){Eg(e[r],t)}),t}function WGe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function XGe(e,t,r){r==null&&(r=Ct(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function YGe(e){var t=Ct(24);return t.write_shift(4,4),t.write_shift(4,1),ob(e,t),t}function JGe(e,t){return t==null&&(t=Ct(66)),t.write_shift(2,e.password?_8(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function ZGe(){}function eKe(){}function tKe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,x,b,y,w,_,j,k,I=[];o.biff=12,o["!row"]=0;var E=0,N=!1,B=[],R={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=R,D.arrayf=B,D.SheetNames=a.SheetNames||a.Sheets.map(function(z){return z.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var O=0;O<a.Names.length;++O)D[0][O+1]=a.Names[O];var L=[],M=[],J=!1;d2[16]={n:"BrtShortReal",f:ele};var V;if(Uh(e,function(G,Y,te){if(!h)switch(te){case 148:u=G;break;case 0:p=G,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),j=qs(b=p.r),o["!row"]=p.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=x1(G.hpt)),M[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:G[2]},G[2]){case"n":g.v=G[1];break;case"s":_=hw[G[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!G[1];break;case"e":g.v=G[1],o.cellText!==!1&&(g.w=Qh[g.v]);break;case"str":g.t="s",g.v=G[1];break;case"is":g.t="s",g.v=G[1].t;break}if((x=i.CellXf[G[0].iStyleRef])&&Yoe(g,x.numFmtId,null,o,s,i),y=G[0].c==-1?y+1:G[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[is(y)+j]=g,o.cellFormula){for(N=!1,E=0;E<B.length;++E){var P=B[E];p.r>=P[0].s.r&&p.r<=P[0].e.r&&y>=P[0].s.c&&y<=P[0].e.c&&(g.F=nn(P[0]),N=!0)}!N&&G.length>3&&(g.f=G[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&x&&g.t=="n"&&ab(Mr[x.numFmtId])){var H=Up(g.v);H&&(g.t="d",g.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=G[0].c==-1?y+1:G[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[is(y)+j]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:I.push(G);break;case 49:V=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var X=n["!id"][G.relId];for(X?(G.Target=X.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=X):G.relId==""&&(G.Target="#"+G.loc),b=G.rfx.s.r;b<=G.rfx.e.r;++b)for(y=G.rfx.s.c;y<=G.rfx.e.c;++y)o.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=G):(w=Hr({c:y,r:b}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=G);break;case 426:if(!o.cellFormula)break;B.push(G),k=o.dense?c[b][y]:c[is(y)+j],k.f=Go(G[1],d,{r:p.r,c:y},D,o),k.F=nn(G[0]);break;case 427:if(!o.cellFormula)break;R[Hr(G[0].s)]=G[1],k=o.dense?c[b][y]:c[is(y)+j],k.f=Go(G[1],d,{r:p.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)L[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},J||(J=!0,N8(G.w/256)),jm(L[G.e+1]);break;case 161:c["!autofilter"]={ref:nn(G)};break;case 476:c["!margins"]=G;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),G.name&&(a.Sheets[r].CodeName=G.name),(G.above||G.left)&&(c["!outline"]={above:G.above,left:G.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),G.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Y.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=nn(u||d)),o.sheetRows&&c["!ref"]){var K=Hn(c["!ref"]);o.sheetRows<=+K.e.r&&(K.e.r=o.sheetRows-1,K.e.r>d.e.r&&(K.e.r=d.e.r),K.e.r<K.s.r&&(K.s.r=K.e.r),K.e.c>d.e.c&&(K.e.c=d.e.c),K.e.c<K.s.c&&(K.s.c=K.e.c),c["!fullref"]=c["!ref"],c["!ref"]=nn(K))}return I.length>0&&(c["!merges"]=I),L.length>0&&(c["!cols"]=L),M.length>0&&(c["!rows"]=M),c}function rKe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||Mr[14],t.v=ki(Qa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=qm(a.cellXfs,t,a),t.l&&s["!links"].push([Hr(c),t.l]),t.c&&s["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=T8(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?Rt(e,18,yGe(t,c)):Rt(e,7,vGe(t,c))):(c.t="str",i?Rt(e,17,FGe(t,c)):Rt(e,6,TGe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,kGe(t,c)):Rt(e,2,NGe(t,c)):i?Rt(e,16,CGe(t,c)):Rt(e,5,EGe(t,c)),!0;case"b":return c.t="b",i?Rt(e,15,fGe(t,c)):Rt(e,4,dGe(t,c)),!0;case"e":return c.t="e",i?Rt(e,14,gGe(t,c)):Rt(e,3,mGe(t,c)),!0}return i?Rt(e,12,cGe(t,c)):Rt(e,1,oGe(t,c)),!0}function nKe(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=qs(d),eGe(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=is(h)),s=o[h]+i;var p=c?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=rKe(e,p,d,h,n,t,f)}}Rt(e,146)}function aKe(e,t){!t||!t["!merges"]||(Rt(e,177,UGe(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,MGe(r))}),Rt(e,178))}function sKe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,GGe(n,r))}),Rt(e,391))}function iKe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,YGe(Hn(t["!ref"]))),Rt(e,650))}function oKe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Rt(e,494,HGe(n,a))}}),delete t["!links"]}function lKe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Rt(e,551,x8("rId"+a)),t["!legacy"]=a}}function cKe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:nn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=nc(s);o.s.r==o.e.r&&(o.e.r=nc(t["!ref"]).e.r,s=nn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,ob(Hn(s))),Rt(e,162)}}function uKe(e,t,r){Rt(e,133),Rt(e,137,XGe(t,r)),Rt(e,138),Rt(e,134)}function dKe(e,t){t["!protect"]&&Rt(e,535,JGe(t["!protect"]))}function AKe(e,t,r,n){var a=tc(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Hn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,sGe(o,i["!outline"])),Rt(a,148,rGe(c)),uKe(a,i,r.Workbook),sKe(a,i),nKe(a,i,e,t),dKe(a,i),cKe(a,i,r,e),aKe(a,i),oKe(a,i,n),i["!margins"]&&Rt(a,476,qGe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&iKe(a,i),lKe(a,i,e,n),Rt(a,130),a.end()}function fKe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Un((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function hKe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=fKe(f);d.s.r=d.s.c=0,d.e.c=o,u=is(o),h[0].forEach(function(p,g){i[u+qs(g)]={t:"n",v:p,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=nn(d)),i}function mKe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Joe);return o&&I8(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function pKe(e,t){e.l+=10;var r=rl(e);return{name:r}}function gKe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Uh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var F8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],xKe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],vKe=[],bKe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function rq(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function nq(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function rle(e){nq(e.WBProps,F8),nq(e.CalcPr,bKe),rq(e.WBView,xKe),rq(e.Sheets,vKe),Rv.date1904=Ma(e.WBProps.date1904)}function yKe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var wKe="][*?/\\".split("");function nle(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return wKe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function EKe(e,t,r){e.forEach(function(n,a){nle(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function CKe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];EKe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)y$e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var _Ke=/<\w+:workbook/;function NKe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(ol,function(c,u){var d=Kr(c);switch(sf(d[0])){case"<?xml":break;case"<workbook":c.match(_Ke)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":F8.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Un(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Un(Ea(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Vg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return rle(r),r}function ale(e){var t=[Js];t[t.length]=Kt("workbook",null,{xmlns:Vg[0],"xmlns:r":_i.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(F8.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:ga(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Kt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Kt("definedName",ga(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function SKe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=aO(e),r.name=rl(e),r}function kKe(e,t){return t||(t=Ct(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),x8(e.strRelID,t),Ji(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function jKe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?rl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function BKe(e,t){t||(t=Ct(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Wie(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function TKe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function IKe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=l7e(e),i=m$e(e,0,r),o=g8(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function FKe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],d2[16]={n:"BrtFRTArchID$",f:TKe},Uh(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Go(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),rle(r),r.Names=s,r.supbooks=i,r}function OKe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,kKe(a))}Rt(e,144)}function DKe(e,t){t||(t=Ct(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ji("SheetJS",t),Ji(JN.version,t),Ji(JN.version,t),Ji("7262",t),t.length>t.l?t.slice(0,t.l):t}function PKe(e,t){t||(t=Ct(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function RKe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,PKe(a)),Rt(e,136))}}function LKe(e,t){var r=tc();return Rt(r,131),Rt(r,128,DKe()),Rt(r,153,BKe(e.Workbook&&e.Workbook.WBProps||null)),RKe(r,e),OKe(r,e),Rt(r,132),r.end()}function MKe(e,t,r){return t.slice(-4)===".bin"?FKe(e,r):NKe(e,r)}function UKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?tKe(e,n,r,a,s,i,o):I$e(e,n,r,a,s,i,o)}function QKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?gKe(e,n,r,a,s):mKe(e,n,r,a,s)}function HKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?zVe():$Ve()}function VKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?HVe():VVe()}function zKe(e,t,r,n){return t.slice(-4)===".bin"?MHe(e,r,n):SHe(e,r,n)}function $Ke(e,t,r){return Loe(e,r)}function GKe(e,t,r){return t.slice(-4)===".bin"?GQe(e,r):VQe(e,r)}function KKe(e,t,r){return t.slice(-4)===".bin"?RVe(e,r):kVe(e,r)}function qKe(e,t,r){return t.slice(-4)===".bin"?_Ve(e):EVe(e)}function WKe(e,t,r,n){return r.slice(-4)===".bin"?NVe(e,t,r,n):void 0}function XKe(e,t,r){return t.slice(-4)===".bin"?bVe(e,t,r):wVe(e,t,r)}function YKe(e,t,r){return(t.slice(-4)===".bin"?LKe:ale)(e)}function JKe(e,t,r,n,a){return(t.slice(-4)===".bin"?AKe:Zoe)(e,r,n,a)}function ZKe(e,t,r){return(t.slice(-4)===".bin"?WHe:Poe)(e,r)}function eqe(e,t,r){return(t.slice(-4)===".bin"?WQe:koe)(e,r)}function tqe(e,t,r){return(t.slice(-4)===".bin"?LVe:Qoe)(e)}function rqe(e){return(e.slice(-4)===".bin"?yVe:Moe)()}var sle=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,ile=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function vd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(sle),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(ile),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function nqe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(sle),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(ile),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var pw;function aqe(e,t){var r=pw[e]||Un(e);return r==="General"?yg(t):zu(r,t)}function sqe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Un(t)]=a}function iqe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Qh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=r2(e.v):e.w=yg(e.v):e.w=aqe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=pw[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&ab(n)){var a=Up(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function oqe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=vHe[n.Pattern]||n.Pattern)}e[t.ID]=t}function lqe(e,t,r,n,a,s,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=bK(Un(e)),n.v=e.indexOf("<")>-1?Un(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Un(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=eoe[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=bK(t||e));break}if(iqe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Un(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Pv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Pv("RC:RC",a):n.ArrayRange&&(n.F=Pv(n.ArrayRange,a),c.push([Hn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function cqe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function oI(e,t){var r=t||{};sb();var n=Py(d8(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Ha(r);return i.type="string",g1.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Me){a.indexOf("<"+Me)>=0&&(s=!0)}),s)return qqe(n,r);pw={"General Number":"General","General Date":Mr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mr[15],"Short Date":Mr[14],"Long Time":Mr[19],"Medium Time":Mr[18],"Short Time":Mr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mr[2],Standard:Mr[4],Percent:Mr[10],Scientific:Mr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},x={},b=vd('<Data ss:Type="String">'),y=0,w=0,_=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},I={},E="",N=0,B=[],R={},D={},O=0,L=[],M=[],J={},V=[],K,z=!1,G=[],Y=[],te={},P=0,H=0,X={Sheets:[],WBProps:{date1904:!1}},Z={};s2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=s2.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?lqe(n.slice(y,o.index),E,b,c[c.length-1][0]=="comment"?J:g,{c:w,r:_},k,V[w],x,G,r):(E="",b=vd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[is(w)+qs(_)]=g),g.HRef&&(g.l={Target:Un(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(P=w+(parseInt(g.MergeAcross,10)|0),H=_+(parseInt(g.MergeDown,10)|0),B.push({s:{c:w,r:_},e:{c:P,r:H}})),!r.sheetStubs)g.MergeAcross?w=P+1:++w;else if(g.MergeAcross||g.MergeDown){for(var le=w;le<=P;++le)for(var ie=_;ie<=H;++ie)(le>w||ie>_)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][le]={t:"z"}):h[is(le)+qs(ie)]={t:"z"});w=P+1}else++w;else g=nqe(o[0]),g.Index&&(w=+g.Index-1),w<j.s.c&&(j.s.c=w),w>j.e.c&&(j.e.c=w),o[0].slice(-2)==="/>"&&++w,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<j.s.r&&(j.s.r=_),_>j.e.r&&(j.e.r=_),o[0].slice(-2)==="/>"&&(x=vd(o[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=vd(o[0]),x.Index&&(_=+x.Index-1),te={},(x.AutoFitHeight=="0"||x.Height)&&(te.hpx=parseInt(x.Height,10),te.hpt=u2(te.hpx),Y[_]=te),x.Hidden=="1"&&(te.hidden=!0,Y[_]=te));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(h["!ref"]=nn(j),r.sheetRows&&r.sheetRows<=j.e.r&&(h["!fullref"]=h["!ref"],j.e.r=r.sheetRows-1,h["!ref"]=nn(j))),B.length&&(h["!merges"]=B),V.length>0&&(h["!cols"]=V),Y.length>0&&(h["!rows"]=Y),d[p]=h}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([o[3],!1]),u=vd(o[0]),p=Un(u.Name),h=r.dense?[]:{},B=[],G=[],Y=[],Z={name:p,Hidden:0},X.Sheets.push(Z);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),V=[],z=!1}break;case"style":o[1]==="/"?oqe(k,I,r):I=vd(o[0]);break;case"numberformat":I.nf=Un(vd(o[0]).Format||"General"),pw[I.nf]&&(I.nf=pw[I.nf]);for(var ce=0;ce!=392&&Mr[ce]!=I.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Mr[ce]==null){uh(I.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(K=vd(o[0]),K.Hidden&&(K.hidden=!0,delete K.Hidden),K.Width&&(K.wpx=parseInt(K.Width,10)),!z&&K.wpx>10){z=!0,Yo=Ooe;for(var fe=0;fe<V.length;++fe)V[fe]&&jm(V[fe])}z&&jm(K),V[K.Index-1||V.length]=K;for(var Ie=0;Ie<+K.Span;++Ie)V[V.length]=Ha(K);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var ne=Kr(o[0]),_e={Name:ne.Name,Ref:Pv(ne.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(_e.Sheet=X.Sheets.length-1),X.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=vd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?F7e(R,ae,n.slice(O,o.index)):O=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));cqe(J),M.push(J)}else c.push([o[3],!1]),u=vd(o[0]),J={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Fe=vd(o[0]);h["!autofilter"]={ref:Pv(Fe.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return lq(n,r);var Se=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(O,o.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else O=o.index+o[0].length;break;case"header":h["!margins"]||tg(h["!margins"]={},"xlml"),isNaN(+Kr(o[0]).Margin)||(h["!margins"].header=+Kr(o[0]).Margin);break;case"footer":h["!margins"]||tg(h["!margins"]={},"xlml"),isNaN(+Kr(o[0]).Margin)||(h["!margins"].footer=+Kr(o[0]).Margin);break;case"pagemargins":var me=Kr(o[0]);h["!margins"]||tg(h["!margins"]={},"xlml"),isNaN(+me.Top)||(h["!margins"].top=+me.Top),isNaN(+me.Left)||(h["!margins"].left=+me.Left),isNaN(+me.Right)||(h["!margins"].right=+me.Right),isNaN(+me.Bottom)||(h["!margins"].bottom=+me.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?sqe(D,ae,L,n.slice(O,o.index)):(L=o,O=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Te={};return!r.bookSheets&&!r.bookProps&&(Te.Sheets=d),Te.SheetNames=f,Te.Workbook=X,Te.SSF=Ha(Mr),Te.Props=R,Te.Custprops=D,Te}function dO(e,t){switch(D8(t=t||{}),t.type||"base64"){case"base64":return oI($c(e),t);case"binary":case"buffer":case"file":return oI(e,t);case"array":return oI(Gm(e),t)}}function uqe(e,t){var r=[];return e.Props&&r.push(O7e(e.Props,t)),e.Custprops&&r.push(D7e(e.Props,e.Custprops)),r.join("")}function dqe(){return""}function Aqe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":ga(Mr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),i))}),Kt("Styles",r.join(""))}function ole(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+j8(e.Ref,{r:0,c:0})})}function fqe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(ole(a)))}return Kt("Names",r.join(""))}function hqe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(ole(o)))}return s.join("")}function mqe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(vo("ProtectContents","True")),e["!protect"].objects&&a.push(vo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(vo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(vo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(vo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:Bc.x})}function pqe(e){return e.map(function(t){var r=RUe(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function gqe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ga(j8(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=os(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ga(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ga(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Qh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Mr[14]);break;case"s":f="String",h=PUe(e.v||"");break}var p=qm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=pqe(e.c)),Kt("Cell",x,o)}function xqe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=x1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function vqe(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){jm(b);var w=!!b.width,_=Sk(y,b),j={"ss:Index":y+1};w&&(j["ss:Width"]=l2(_.width)),b.hidden&&(j["ss:Hidden"]="1"),o.push(Kt("Column",null,j))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[xqe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Hr(p),x=c?(e[u]||[])[f]:e[g];d.push(gqe(x,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function bqe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?hqe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?vqe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(mqe(s,t,e,r)),n.join("")}function yqe(e,t){t||(t={}),e.SSF||(e.SSF=Ha(Mr)),e.SSF&&(sb(),bk(e.SSF),t.revssf=wk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],qm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(uqe(e,t)),r.push(dqe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",bqe(n,t,e),{"ss:Name":ga(e.SheetNames[n])}));return r[2]=Aqe(e,t),r[3]=fqe(e),Js+Kt("Workbook",r.join(""),{xmlns:Bc.ss,"xmlns:o":Bc.o,"xmlns:x":Bc.x,"xmlns:ss":Bc.ss,"xmlns:dt":Bc.dt,"xmlns:html":Bc.html})}function wqe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=f7e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=h7e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Eqe=[60,1084,2066,2165,2175];function Cqe(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=nh(r,r.l),u=AO[c],d=0;u!=null&&Eqe.indexOf(c)>-1;)s=nh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=AO[c=nh(r,r.l)];var f=qi(i);xo(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function SA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Mr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Qh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=r2(e.v):e.w=yg(e.v):e.w=zu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&ab(Mr[n]||String(n))){var a=Up(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function l_(e,t,r){return{v:e,ixfe:t,t:r}}function _qe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],u="",d={},f,h="",p,g,x,b,y={},w=[],_,j,k=[],I=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},B=function(Qt){return Qt<8?Jp[Qt]:Qt<64&&I[Qt-8]||Jp[Qt]},R=function(Qt,wt,jr){var tr=wt.XF.data;if(!(!tr||!tr.patternType||!jr||!jr.cellStyles)){wt.s={},wt.s.patternType=tr.patternType;var an;(an=o2(B(tr.icvFore)))&&(wt.s.fgColor={rgb:an}),(an=o2(B(tr.icvBack)))&&(wt.s.bgColor={rgb:an})}},D=function(Qt,wt,jr){if(!(te>1)&&!(jr.sheetRows&&Qt.r>=jr.sheetRows)){if(jr.cellStyles&&wt.XF&&wt.XF.data&&R(Qt,wt,jr),delete wt.ixfe,delete wt.XF,f=Qt,h=Hr(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),jr.cellFormula&&wt.f){for(var tr=0;tr<w.length;++tr)if(!(w[tr][0].s.c>Qt.c||w[tr][0].s.r>Qt.r)&&!(w[tr][0].e.c<Qt.c||w[tr][0].e.r<Qt.r)){wt.F=nn(w[tr][0]),(w[tr][0].s.c!=Qt.c||w[tr][0].s.r!=Qt.r)&&delete wt.f,wt.f&&(wt.f=""+Go(w[tr][1],i,Qt,G,O));break}}jr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=wt):a[h]=wt}},O={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var L,M=[],J=[],V=[],K=[],z=!1,G=[];G.SheetNames=O.snames,G.sharedf=O.sharedf,G.arrayf=O.arrayf,G.names=[],G.XTI=[];var Y=0,te=0,P=0,H=[],X=[],Z;O.codepage=1200,kd(1200);for(var ae=!1;e.l<e.length-1;){var le=e.l,ie=e.read_shift(2);if(ie===0&&Y===10)break;var ce=e.l===e.length?0:e.read_shift(2),fe=AO[ie];if(fe&&fe.f){if(t.bookSheets&&Y===133&&ie!==133)break;if(Y=ie,fe.r===2||fe.r==12){var Ie=e.read_shift(2);if(ce-=2,!O.enc&&Ie!==ie&&((Ie&255)<<8|Ie>>8)!==ie)throw new Error("rt mismatch: "+Ie+"!="+ie);fe.r==12&&(e.l+=10,ce-=10)}var ne={};if(ie===10?ne=fe.f(e,ce,O):ne=Cqe(ie,fe,e,ce,O),te==0&&[9,521,1033,2057].indexOf(Y)===-1)continue;switch(ie){case 34:r.opts.Date1904=E.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=ne;break;case 66:var _e=Number(ne);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}kd(O.codepage=_e),ae=!0;break;case 317:O.rrtabid=ne;break;case 25:O.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:O.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:k.push(ne);break;case 430:G.push([ne]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(ne);break;case 24:case 536:Z={Name:ne.Name,Ref:Go(ne.rgce,i,null,G,O)},ne.itab>0&&(Z.Sheet=ne.itab-1),G.names.push(Z),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(X[ne.itab-1]={ref:nn(ne.rgce[0][0][1][2])});break;case 22:O.ExternCount=ne;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(ne),G.XTI=G.XTI.concat(ne);break;case 2196:if(O.biff<8)break;Z!=null&&(Z.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&O.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,O.snames.push(ne.name);break;case 10:{if(--te)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=nn(i),t.sheetRows&&t.sheetRows<=i.e.r){var Fe=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=nn(i),i.e.r=Fe}i.e.r++,i.e.c++}M.length>0&&(a["!merges"]=M),J.length>0&&(a["!objects"]=J),V.length>0&&(a["!cols"]=V),K.length>0&&(a["!rows"]=K),E.Sheets.push(N)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),O.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(O.biff=5,ae=!0,kd(O.codepage=28591)),O.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(O.biff=2),te++)break;if(a=t.dense?[]:{},O.biff<8&&!ae&&(ae=!0,kd(O.codepage=t.codepage||1252)),O.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:e.l-ce,name:u};s[Se.pos]=Se,O.snames.push(u)}else u=(s[le]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),M=[],J=[],O.arrayf=w=[],V=[],K=[],z=!1,N={Hidden:(s[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[Hr({c:ne.c,r:ne.r})])&&++ne.c,_={ixfe:ne.ixfe,XF:k[ne.ixfe]||{},v:ne.val,t:"n"},P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 5:case 517:_={ixfe:ne.ixfe,XF:k[ne.ixfe],v:ne.val,t:ne.t},P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 638:_={ixfe:ne.ixfe,XF:k[ne.ixfe],v:ne.rknum,t:"n"},P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 189:for(var me=ne.c;me<=ne.C;++me){var Te=ne.rkrec[me-ne.c][0];_={ixfe:Te,XF:k[Te],v:ne.rkrec[me-ne.c][1],t:"n"},P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:me,r:ne.r},_,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(_=l_(ne.val,ne.cell.ixfe,ne.tt),_.XF=k[_.ixfe],t.cellFormula){var Me=ne.formula;if(Me&&Me[0]&&Me[0][0]&&Me[0][0][0]=="PtgExp"){var We=Me[0][0][1][0],be=Me[0][0][1][1],De=Hr({r:We,c:be});y[De]?_.f=""+Go(ne.formula,i,ne.cell,G,O):_.F=((t.dense?(a[We]||[])[be]:a[De])||{}).F}else _.f=""+Go(ne.formula,i,ne.cell,G,O)}P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D(ne.cell,_,t),o=ne}break;case 7:case 519:if(o)o.val=ne,_=l_(ne,o.cell.ixfe,"s"),_.XF=k[_.ixfe],t.cellFormula&&(_.f=""+Go(o.formula,i,o.cell,G,O)),P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D(o.cell,_,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ne);var Re=Hr(ne[0].s);if(p=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[Re],t.cellFormula&&p){if(!o||!Re||!p)break;p.f=""+Go(ne[1],i,ne[0],G,O),p.F=nn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Hr(o.cell)]=ne[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Hr(o.cell)],(p||{}).f=""+Go(ne[0],i,f,G,O)}}break;case 253:_=l_(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(_.h=c[ne.isst].h),_.XF=k[_.ixfe],P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ne.ixfe,XF:k[ne.ixfe],t:"z"},P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t));break;case 190:if(t.sheetStubs)for(var qe=ne.c;qe<=ne.C;++qe){var Ze=ne.ixfe[qe-ne.c];_={ixfe:Ze,XF:k[Ze],t:"z"},P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:qe,r:ne.r},_,t)}break;case 214:case 516:case 4:_=l_(ne.val,ne.ixfe,"s"),_.XF=k[_.ixfe],P>0&&(_.z=H[_.ixfe>>8&63]),SA(_,t,r.opts.Date1904),D({c:ne.c,r:ne.r},_,t);break;case 0:case 512:te===1&&(i=ne);break;case 252:c=ne;break;case 1054:if(O.biff==4){H[P++]=ne[1];for(var ct=0;ct<P+163&&Mr[ct]!=ne[1];++ct);ct>=163&&uh(ne[1],P+163)}else uh(ne[1],ne[0]);break;case 30:{H[P++]=ne;for(var pt=0;pt<P+163&&Mr[pt]!=ne;++pt);pt>=163&&uh(ne,P+163)}break;case 229:M=M.concat(ne);break;case 93:J[ne.cmo[0]]=O.lastobj=ne;break;case 438:O.lastobj.TxO=ne;break;case 127:O.lastobj.ImData=ne;break;case 440:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(x=ne[0].s.c;x<=ne[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Hr({c:x,r:b})],p&&(p.l=ne[1]);break;case 2048:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(x=ne[0].s.c;x<=ne[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Hr({c:x,r:b})],p&&p.l&&(p.l.Tooltip=ne[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[Hr(ne[0])];var It=J[ne[2]];p||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),p=a[ne[0].r][ne[0].c]={t:"z"}):p=a[Hr(ne[0])]={t:"z"},i.e.r=Math.max(i.e.r,ne[0].r),i.s.r=Math.min(i.s.r,ne[0].r),i.e.c=Math.max(i.e.c,ne[0].c),i.s.c=Math.min(i.s.c,ne[0].c)),p.c||(p.c=[]),g={a:ne[1],t:It.TxO.t},p.c.push(g)}break;case 2173:AVe(k[ne.ixfe],ne.ext);break;case 125:{if(!O.cellStyles)break;for(;ne.e>=ne.s;)V[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},z||(z=!0,N8(ne.w/256)),jm(V[ne.e+1])}break;case 520:{var Mt={};ne.level!=null&&(K[ne.r]=Mt,Mt.level=ne.level),ne.hidden&&(K[ne.r]=Mt,Mt.hidden=!0),ne.hpt&&(K[ne.r]=Mt,Mt.hpt=ne.hpt,Mt.hpx=x1(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||tg(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=ne;break;case 161:a["!margins"]||tg(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(E.Views[0].RTL=!0);break;case 146:I=ne;break;case 2198:L=ne;break;case 140:j=ne;break;case 442:u?N.CodeName=ne||N.name:E.WBProps.CodeName=ne||"ThisWorkbook";break}}else fe||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=ce}return r.SheetNames=Bs(s).sort(function(Pt,Qt){return Number(Pt)-Number(Qt)}).map(function(Pt){return s[Pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(Pt,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Pt}),r.Strings=c,r.SSF=Ha(Mr),O.enc&&(r.Encryption=O.enc),L&&(r.Themes=L),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),G.names.length>0&&(E.Names=G.names),r.Workbook=E,r}var gw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Nqe(e,t,r){var n=_r.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=LK(n,sO,gw.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=_r.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=LK(i,iO,gw.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(ioe(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Sqe(e,t){var r=[],n=[],a=[],s=0,i,o=hK(sO,"n"),c=hK(iO,"n");if(e.Props)for(i=Bs(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Bs(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)foe.indexOf(a[s][0])>-1||soe.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&_r.utils.cfb_add(t,"/SummaryInformation",MK(n,gw.SI,c,iO)),(r.length||u.length)&&_r.utils.cfb_add(t,"/DocumentSummaryInformation",MK(r,gw.DSI,o,sO,u.length?u:null,gw.UDI))}function lle(e,t){t||(t={}),D8(t),r8(),t.codepage&&t8(t.codepage);var r,n;if(e.FullPaths){if(_r.find(e,"/encryption"))throw new Error("File is password-protected");r=_r.find(e,"!CompObj"),n=_r.find(e,"/Workbook")||_r.find(e,"/Book")}else{switch(t.type){case"base64":e=Dc($c(e));break;case"binary":e=Dc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}xo(e,0),n={content:e}}var a,s;if(r&&wqe(r),t.bookProps&&!t.bookSheets)a={};else{var i=gn?"buffer":"array";if(n&&n.content)a=_qe(n.content,t);else if((s=_r.find(e,"PerfectOffice_MAIN"))&&s.content)a=eg.to_workbook(s.content,(t.type=i,t));else if((s=_r.find(e,"NativeContent_MAIN"))&&s.content)a=eg.to_workbook(s.content,(t.type=i,t));else throw(s=_r.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&_r.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=UVe(e))}var o={};return e.FullPaths&&Nqe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function kqe(e,t){var r=t||{},n=_r.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _r.utils.cfb_add(n,a,cle(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Sqe(e,n),r.biff==8&&e.vbaraw&&QVe(n,_r.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var d2={0:{f:J$e},1:{f:iGe},2:{f:_Ge},3:{f:hGe},4:{f:uGe},5:{f:wGe},6:{f:BGe},7:{f:xGe},8:{f:RGe},9:{f:PGe},10:{f:OGe},11:{f:DGe},12:{f:lGe},13:{f:SGe},14:{f:pGe},15:{f:AGe},16:{f:ele},17:{f:IGe},18:{f:bGe},19:{f:p8},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:IKe},40:{},42:{},43:{f:BHe},44:{f:kHe},45:{f:FHe},46:{f:DHe},47:{f:OHe},48:{},49:{f:t7e},50:{},51:{f:mVe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Coe},62:{f:jGe},63:{f:CVe},64:{f:ZGe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:al,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:WGe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:aGe},148:{f:tGe,p:16},151:{f:VGe},152:{},153:{f:jKe},154:{},155:{},156:{f:SKe},157:{},158:{},159:{T:1,f:$Qe},160:{T:-1},161:{T:1,f:Kg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:LGe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:fVe},336:{T:-1},337:{f:xVe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:aO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Eoe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:zGe},427:{f:$Ge},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:KGe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nGe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:QGe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:aO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:DVe},633:{T:1},634:{T:-1},635:{T:1,f:FVe},636:{T:-1},637:{f:s7e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:pKe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:eKe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},AO={6:{f:sI},10:{f:j0},12:{f:ci},13:{f:ci},14:{f:Ms},15:{f:Ms},16:{f:el},17:{f:Ms},18:{f:Ms},19:{f:ci},20:{f:$K},21:{f:$K},23:{f:Eoe},24:{f:KK},25:{f:Ms},26:{},27:{},28:{f:eQe},29:{},34:{f:Ms},35:{f:GK},38:{f:el},39:{f:el},40:{f:el},41:{f:el},42:{f:Ms},43:{f:Ms},47:{f:AHe},49:{f:S9e},51:{f:ci},60:{},61:{f:w9e},64:{f:Ms},65:{f:N9e},66:{f:ci},77:{},80:{},81:{},82:{},85:{f:ci},89:{},90:{},91:{},92:{f:d9e},93:{f:nQe},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:Coe},128:{f:H9e},129:{f:f9e},130:{f:ci},131:{f:Ms},132:{f:Ms},133:{f:h9e},134:{},140:{f:dQe},141:{f:ci},144:{},146:{f:hQe},151:{},152:{},153:{},154:{},155:{},156:{f:ci},157:{},158:{},160:{f:yQe},161:{f:gQe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:L9e},190:{f:M9e},193:{f:j0},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ci},220:{},221:{f:Ms},222:{},224:{f:Q9e},225:{f:u9e},226:{f:j0},227:{},229:{f:tQe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:p9e},253:{f:j9e},255:{f:x9e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:hoe},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:j0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:K9e},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:iQe},439:{f:Ms},440:{f:oQe},441:{},442:{f:lE},443:{},444:{f:ci},445:{},446:{},448:{f:j0},449:{f:y9e,r:2},450:{f:j0},512:{f:HK},513:{f:bQe},515:{f:$9e},516:{f:T9e},517:{f:zK},519:{f:wQe},520:{f:v9e},523:{},545:{f:qK},549:{f:QK},566:{},574:{f:C9e},638:{f:R9e},659:{},1048:{},1054:{f:F9e},1084:{},1212:{f:Y9e},2048:{f:cQe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:s_},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:j0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:mQe,r:12},2173:{f:dVe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:X9e,r:12},2197:{},2198:{f:sVe,r:12},2199:{},2200:{},2201:{},2202:{f:J9e,r:12},2203:{f:j0},2204:{},2205:{},2206:{},2207:{},2211:{f:b9e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ci},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:xQe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:fQe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:HK},1:{},2:{f:SQe},3:{f:_Qe},4:{f:CQe},5:{f:zK},7:{f:jQe},8:{},9:{f:s_},11:{},22:{f:ci},30:{f:D9e},31:{},32:{},33:{f:qK},36:{},37:{f:QK},50:{f:BQe},62:{},52:{},67:{},68:{f:ci},69:{},86:{},126:{},127:{f:EQe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:TQe},223:{},234:{},354:{},421:{},518:{f:sI},521:{f:s_},536:{f:KK},547:{f:GK},561:{},579:{},1030:{f:sI},1033:{f:s_},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&f8(r)&&e.push(r)}}function jqe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function AE(e,t,r){return e||(e=Ct(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Bqe(e,t,r,n){var a=Ct(9);return AE(a,e,t),moe(r,n||"b",a),a}function Tqe(e,t,r){var n=Ct(8+2*r.length);return AE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Iqe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?ki(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,kQe(r,n,a)):qt(e,3,NQe(r,n,a));return;case"b":case"e":qt(e,5,Bqe(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,Tqe(r,n,(t.v||"").slice(0,255)));return}qt(e,1,AE(null,r,n))}function Fqe(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=nn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=qs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=is(d)),i=c[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&Iqe(e,f,u,d)}}}function Oqe(e,t){for(var r=t||{},n=tc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,E8(e,16,r)),Fqe(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function Dqe(e,t,r){qt(e,49,k9e({sz:12,name:"Arial"},r))}function Pqe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,O9e(a,t[a],r))})}function Rqe(e,t){var r=Ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=Ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),boe(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function Lqe(e,t){for(var r=0;r<16;++r)qt(e,224,VK({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,VK(n,0,t))})}function Mqe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,lQe(n)),n[1].Tooltip&&qt(e,2048,uQe(n))}delete t["!links"]}function Uqe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,pQe(Sk(a,n),a))})}}function Qqe(e,t,r,n,a){var s=16+qm(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,_g(r,n,s));return}if(t.bf)qt(e,6,f$e(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?ki(Qa(t.v)):t.v;qt(e,515,G9e(r,n,i,s));break;case"b":case"e":qt(e,517,z9e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=T8(a.Strings,t.v,a.revStrings);qt(e,253,B9e(r,n,o,s))}else qt(e,516,I9e(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,_g(r,n,s))}}function Hqe(e,t,r){var n=tc(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}qt(n,2057,E8(r,16,t)),qt(n,13,ju(1)),qt(n,12,ju(100)),qt(n,15,pl(!0)),qt(n,17,pl(!1)),qt(n,16,Eg(.001)),qt(n,95,pl(!0)),qt(n,42,pl(!1)),qt(n,43,pl(!1)),qt(n,130,ju(1)),qt(n,128,V9e()),qt(n,131,pl(!1)),qt(n,132,pl(!1)),u&&Uqe(n,s["!cols"]),qt(n,512,P9e(p,t)),u&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){f=qs(x);for(var b=p.s.c;b<=p.e.c;++b){x===p.s.r&&(h[b]=is(b)),d=h[b]+f;var y=c?(s[x]||[])[b]:s[d];y&&(Qqe(n,y,x,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=o.CodeName||o.name||a;return u&&qt(n,574,_9e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,rQe(s["!merges"])),u&&Mqe(n,s),qt(n,442,poe(w)),u&&Rqe(n,s),qt(n,10),n.end()}function Vqe(e,t,r){var n=tc(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(qt(n,2057,E8(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,o?ju(1200):null),qt(n,193,z7e(2)),c&&qt(n,191),c&&qt(n,192),qt(n,226),qt(n,92,A9e("SheetJS",r)),qt(n,66,ju(o?1200:1252)),o&&qt(n,353,ju(0)),o&&qt(n,448),qt(n,317,vQe(e.SheetNames.length)),o&&e.vbaraw&&qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,poe(u))}qt(n,156,ju(17)),qt(n,25,pl(!1)),qt(n,18,pl(!1)),qt(n,19,ju(0)),o&&qt(n,431,pl(!1)),o&&qt(n,444,ju(0)),qt(n,61,E9e()),qt(n,64,pl(!1)),qt(n,141,ju(0)),qt(n,34,pl(yKe(e)=="true")),qt(n,14,pl(!0)),o&&qt(n,439,pl(!1)),qt(n,218,ju(0)),Dqe(n,e,r),Pqe(n,e.SSF,r),Lqe(n,r),o&&qt(n,352,pl(!1));var d=n.end(),f=tc();o&&qt(f,140,AQe()),o&&r.Strings&&jqe(f,252,g9e(r.Strings)),qt(f,10);var h=f.end(),p=tc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(o?12:11)+(o?2:1)*e.SheetNames[x].length;var b=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};qt(p,133,m9e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),b+=t[x].length}var w=p.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),qi(_)}function zqe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(Mr)),e&&e.SSF&&(sb(),bk(e.SSF),r.revssf=wk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,P8(r),r.cellXfs=[],qm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=Hqe(a,r,e);return n.unshift(Vqe(e,n,r)),qi(n)}function cle(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=nc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return zqe(e,t);case 4:case 3:case 2:return Oqe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function aq(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=kUe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),b=x.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=x.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var w=y[o].trim();if(w.match(/<t[dh]/i)){for(var _=w,j=0;_.charAt(0)=="<"&&(j=_.indexOf(">"))>-1;)_=_.slice(j+1);for(var k=0;k<g.length;++k){var I=g[k];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,k=-1)}var E=Kr(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var N=E.t||E["data-t"]||"";if(!_.length){d+=h;continue}if(_=Fie(_),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!_.length){d+=h;continue}var B={t:"s",v:_};r.raw||!_.trim().length||N=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(Pd(_))?isNaN(p1(_).getDate())||(B={t:"d",v:Qa(_)},r.cellDates||(B={t:"n",v:ki(B.v)}),B.z=r.dateNF||Mr[14]):B={t:"n",v:Pd(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Hr({r:u,c:d})]=B,d+=h}}}}return n["!ref"]=nn(p),g.length&&(n["!merges"]=g),n}function $qe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Hr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||u8(f.w||(kh(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var Gqe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Kqe="</body></html>";function qqe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Km(aq(r[0],t),t);var n=M8();return r.forEach(function(a,s){U8(n,aq(a,t),"Sheet"+(s+1))}),n}function Wqe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ule(e,t){var r=t||{},n=r.header!=null?r.header:Gqe,a=r.footer!=null?r.footer:Kqe,s=[n],i=nc(e["!ref"]);r.dense=Array.isArray(e),s.push(Wqe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push($qe(e,i,o,r));return s.push("</table>"+a),s.join("")}function dle(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?os(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=nc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,x=0,b=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&x<c;++g){var j=o[g];if(sq(j)){if(n.display)continue;p[x]={hidden:!0}}var k=j.children;for(b=y=0;b<k.length;++b){var I=k[b];if(!(n.display&&sq(I))){var E=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Fie(I.innerHTML),N=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var B=f[h];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,h=-1)}_=+I.getAttribute("colspan")||1,((w=+I.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var R={t:"s",v:E},D=I.getAttribute("data-t")||I.getAttribute("t")||"";E!=null&&(E.length==0?R.t=D||"z":n.raw||E.trim().length==0||D=="s"||(E==="TRUE"?R={t:"b",v:!0}:E==="FALSE"?R={t:"b",v:!1}:isNaN(Pd(E))?isNaN(p1(E).getDate())||(R={t:"d",v:Qa(E)},n.cellDates||(R={t:"n",v:ki(R.v)}),R.z=n.dateNF||Mr[14]):R={t:"n",v:Pd(E)})),R.z===void 0&&N!=null&&(R.z=N);var O="",L=I.getElementsByTagName("A");if(L&&L.length)for(var M=0;M<L.length&&!(L[M].hasAttribute("href")&&(O=L[M].getAttribute("href"),O.charAt(0)!="#"));++M);O&&O.charAt(0)!="#"&&(R.l={Target:O}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=R):e[Hr({c:y+s,r:x+a})]=R,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=nn(u),x>=c&&(e["!fullref"]=nn((u.e.r=o.length-g+x-1+a,u))),e}function Ale(e,t){var r=t||{},n=r.dense?[]:{};return dle(n,e,t)}function Xqe(e,t){return Km(Ale(e,t),t)}function sq(e){var t="",r=Yqe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Yqe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Jqe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Un(t.replace(/<[^>]*>/g,""));return[r]}var iq={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function fle(e,t){var r=t||{},n=d8(e),a=[],s,i,o={name:""},c="",u=0,d,f,h={},p=[],g=r.dense?[]:{},x,b,y={value:""},w="",_=0,j=[],k=-1,I=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,B={},R=[],D={},O=0,L=0,M=[],J=1,V=1,K=[],z={Names:[]},G={},Y=["",""],te=[],P={},H="",X=0,Z=!1,ae=!1,le=0;for(s2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=s2.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=nn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=nn(E)),R.length&&(g["!merges"]=R),M.length&&(g["!rows"]=M),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ae=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Kr(x[0],!1),k=I=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},R=[],M=[],ae=!0);break;case"table-row-group":x[1]==="/"?--N:++N;break;case"table-row":case"行":if(x[1]==="/"){k+=J,J=1;break}if(f=Kr(x[0],!1),f.行号?k=f.行号-1:k==-1&&(k=0),J=+f["number-rows-repeated"]||1,J<10)for(le=0;le<J;++le)N>0&&(M[k+le]={level:N});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[k]||(g[k]=[]),g[k][I]={t:"z"}):g[Hr({r:k,c:I})]={t:"z"}),w="",j=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++I,y=Kr(x[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=tq(Un(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Un(y["string-value"]||""),r.dense?(g[k]||(g[k]=[]),g[k][I]=b):g[Hr({r:k,c:I})]=b),I+=V-1;else if(x[1]!=="/"){++I,w="",_=0,j=[],V=1;var ie=J?k+J-1:k;if(I>E.e.c&&(E.e.c=I),I<E.s.c&&(E.s.c=I),k<E.s.r&&(E.s.r=k),ie>E.e.r&&(E.e.r=ie),y=Kr(x[0],!1),te=[],P={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Un(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(O=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:k,c:I},e:{r:k+O-1,c:I+L-1}},b.F=nn(D),K.push([D,b.F])),y.formula)b.f=tq(y.formula);else for(le=0;le<K.length;++le)k>=K[le][0].s.r&&k<=K[le][0].e.r&&I>=K[le][0].s.c&&I<=K[le][0].e.c&&(b.F=K[le][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(O=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:k,c:I},e:{r:k+O-1,c:I+L-1}},R.push(D)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ma(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Qa(y["date-value"]),r.cellDates||(b.t="n",b.v=ki(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=_Ue(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=Ek(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(w=Un(y["string-value"]),j=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(Z=!1,b.t==="s"&&(b.v=w||"",j.length&&(b.R=j),Z=_==0),G.Target&&(b.l=G),te.length>0&&(b.c=te,te=[]),w&&r.cellText!==!1&&(b.w=w),Z&&(b.t="z",delete b.v),(!Z||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var ce=0;ce<J;++ce){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[k+ce]||(g[k+ce]=[]),g[k+ce][I]=ce==0?b:Ha(b);--V>0;)g[k+ce][I+V]=Ha(b);else for(g[Hr({r:k+ce,c:I})]=b;--V>0;)g[Hr({r:k+ce,c:I+V})]=Ha(b);E.e.c<=I&&(E.e.c=I)}V=parseInt(y["number-columns-repeated"]||"1",10),I+=V-1,V=0,b={},w="",j=[]}G={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;P.t=w,j.length&&(P.R=j),P.a=H,te.push(P)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);H="",X=0,w="",_=0,j=[];break;case"creator":x[1]==="/"?H=n.slice(X,x.index):X=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[o.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=Kr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Kr(x[0],!1),c+=iq[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Kr(x[0],!1),c+=iq[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=Kr(x[0],!1),Y=iI(i["cell-range-address"]);var fe={Name:i.name,Ref:Y[0]+"!"+Y[1]};ae&&(fe.Sheet=p.length),z.Names.push(fe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var Ie=Jqe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+Ie[0]}else Kr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{Y=iI(Kr(x[0])["target-range-address"]),h[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(G=Kr(x[0],!1),!G.href)break;G.Target=Un(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(Y=iI(G.Target.slice(1)),G.Target="#"+Y[0]+"!"+Y[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ne={Sheets:h,SheetNames:p,Workbook:z};return r.bookSheets&&delete ne.Sheets,ne}function oq(e,t){t=t||{},Su(e,"META-INF/manifest.xml")&&_7e(li(e,"META-INF/manifest.xml"),t);var r=Pc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=fle(Ea(r),t);return Su(e,"meta.xml")&&(n.Props=noe(li(e,"meta.xml"))),n}function lq(e,t){return fle(e,t)}var Zqe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+a2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Js+t}}(),cq=function(){var e=function(s){return ga(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+ga(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=nc(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,w["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){c.push(r);continue}var j=Hr({r:u,c:d}),k=g?(s[u]||[])[d]:s[j];if(k&&k.f&&(w["table:formula"]=ga(v$e(k.f)),k.F&&k.F.slice(0,j.length)==j)){var I=nc(k.F);w["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,w["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!k){c.push(t);continue}switch(k.t){case"b":_=k.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=k.v?"true":"false";break;case"n":_=k.w||String(k.v||0),w["office:value-type"]="float",w["office:value"]=k.v||0;break;case"s":case"str":_=k.v==null?"":k.v,w["office:value-type"]="string";break;case"d":_=k.w||Qa(k.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Qa(k.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(_);if(k.l&&k.l.Target){var N=k.l.Target;N=N.charAt(0)=="#"?"#"+b$e(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),E=Kt("text:a",E,{"xlink:href":N.replace(/&/g,"&amp;")})}c.push("          "+Kt("table:table-cell",Kt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;jm(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Js],u=a2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=a2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(roe().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function hle(e,t){if(t.bookType=="fods")return cq(e,t);var r=o8(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,cq(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,Zqe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,Js+roe()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,k7e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,N7e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ng(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function fO(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(Gm(e))}function eWe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Dc($A(e))}function tWe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Tm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function uq(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function rWe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function nWe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function A2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function fa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function js(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=A2(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=A2(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Ao(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(fa(n*8+a.type)),a.type==2&&t.push(fa(a.data.length)),t.push(a.data))})}),Tm(t)}function O8(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function _u(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=A2(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:js(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Wn(o.data),u=js(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=js(s[3][0].data)>>>0>0),r.push(i)}return r}function Ix(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:fa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:fa(i.data.length)}],n[2].push({data:Ao(i.meta),type:2})});var s=Ao(n);t.push(fa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),Tm(t)}function aWe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=A2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Tm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Tm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Nu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(aWe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Tm(t)}function Fx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=fa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return Tm(t)}function sWe(e,t,r,n){var a=Ng(e),s=a.getUint32(4,!0),i=(n>1?12:8)+uq(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=uq(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function iWe(e,t,r){var n=Ng(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=rWe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function lI(e,t){var r=new Uint8Array(32),n=Ng(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,nWe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function cI(e,t){var r=new Uint8Array(32),n=Ng(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function oWe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return sWe(e,t,r,e[0]);case 5:return iWe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function $o(e){var t=Wn(e);return A2(t[1][0].data)}function dq(e,t){var r=Wn(t.data),n=js(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Wn(i.data),c=js(o[1][0].data)>>>0;switch(n){case 1:s[c]=fO(o[3][0].data);break;case 8:{var u=e[$o(o[9][0].data)][0],d=Wn(u.data),f=e[$o(d[1][0].data)][0],h=js(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Wn(f.data);s[c]=p[3].map(function(g){return fO(g.data)}).join("")}break}}),s}function lWe(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b=Wn(e),y=js(b[1][0].data)>>>0,w=js(b[2][0].data)>>>0,_=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&js(b[8][0].data)>0||!1,j,k;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)j=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,k=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)j=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,k=(x=(g=b[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=_?4:1,E=Ng(j),N=[],B=0;B<j.length/2;++B){var R=E.getUint16(B*2,!0);R<65535&&N.push([B,R])}if(N.length!=w)throw"Expected ".concat(w," cells, found ").concat(N.length);var D=[];for(B=0;B<N.length-1;++B)D[N[B][0]]=k.subarray(N[B][1]*I,N[B+1][1]*I);return N.length>=1&&(D[N[N.length-1][0]]=k.subarray(N[N.length-1][1]*I)),{R:y,cells:D}}function cWe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?js(n[7][0].data)>>>0>0?1:0:-1,s=O8(n[5],function(i){return lWe(i,a)});return{nrows:js(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function uWe(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(js(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(js(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=nn(s);var i=Wn(a[4][0].data),o=dq(e,e[$o(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?dq(e,e[$o(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),p=e[$o(h[2][0].data)][0],g=js(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=cWe(e,p);x.data.forEach(function(b,y){b.forEach(function(w,_){var j=Hr({r:d+y,c:_}),k=oWe(w,o,c);k&&(r[j]=k)})}),d+=x.nrows})}function dWe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[$o(r[2][0].data)],s=js(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return uWe(e,a[0],n),n}function AWe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?fO(n[1][0].data):"",sheets:[]},s=O8(n[2],$o);return s.forEach(function(i){e[i].forEach(function(o){var c=js(o.meta[1][0].data);c==6e3&&a.sheets.push(dWe(e,o))})}),a}function fWe(e,t){var r=M8(),n=Wn(t.data),a=O8(n[1],$o);if(a.forEach(function(s){e[s].forEach(function(i){var o=js(i.meta[1][0].data);if(o==2){var c=AWe(e,i);c.sheets.forEach(function(u,d){U8(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function uI(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Nu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=_u(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&js(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=js(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return fWe(s,o)}function hWe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&js(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Ng(e[7][0].data),d=0,f=[],h=Ng(e[4][0].data),p=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,p,!0);var b,y;switch(typeof t[x]){case"string":b=lI({t:"s",v:t[x]},r),y=cI({t:"s",v:t[x]},r);break;case"number":b=lI({t:"n",v:t[x]},r),y=cI({t:"n",v:t[x]},r);break;case"boolean":b=lI({t:"b",v:t[x]},r),y=cI({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(b),d+=b.length,g.push(y),p+=y.length,++c}for(e[2][0].data=fa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Tm(f),e[3][0].data=Tm(g),c}function mWe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=nc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var s=uS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(H){return H.forEach(function(X){typeof X=="string"&&i.push(X)})});var o={},c=[],u=_r.read(t.numbers,{type:"base64"});u.FileIndex.map(function(H,X){return[H,u.FullPaths[X]]}).forEach(function(H){var X=H[0],Z=H[1];if(X.type==2&&X.name.match(/\.iwa/)){var ae=X.content,le=Nu(ae),ie=_u(le);ie.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:Z,type:js(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(H,X){return H-X});var d=c.filter(function(H){return H>1}).map(function(H){return[H,fa(H)]});u.FileIndex.map(function(H,X){return[H,u.FullPaths[X]]}).forEach(function(H){var X=H[0];if(H[1],!!X.name.match(/\.iwa/)){var Z=_u(Nu(X.content));Z.forEach(function(ae){ae.messages.forEach(function(le){d.forEach(function(ie){ae.messages.some(function(ce){return js(ce.meta[1][0].data)!=11006&&tWe(ce.data,ie[1])})&&o[ie[0]].deps.push(ae.id)})})})}});for(var f=_r.find(u,o[1].location),h=_u(Nu(f.content)),p,g=0;g<h.length;++g){var x=h[g];x.id==1&&(p=x)}var b=$o(Wn(p.messages[0].data)[1][0].data);for(f=_r.find(u,o[b].location),h=_u(Nu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=$o(Wn(p.messages[0].data)[2][0].data),f=_r.find(u,o[b].location),h=_u(Nu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=$o(Wn(p.messages[0].data)[2][0].data),f=_r.find(u,o[b].location),h=_u(Nu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);var y=Wn(p.messages[0].data);{y[6][0].data=fa(n.e.r+1),y[7][0].data=fa(n.e.c+1);var w=$o(y[46][0].data),_=_r.find(u,o[w].location),j=_u(Nu(_.content));{for(var k=0;k<j.length&&j[k].id!=w;++k);if(j[k].id!=w)throw"Bad ColumnRowUIDMapArchive";var I=Wn(j[k].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var E=0;E<=n.e.c;++E){var N=[];N[1]=N[2]=[{type:0,data:fa(E+420690)}],I[1].push({type:2,data:Ao(N)}),I[2].push({type:0,data:fa(E)}),I[3].push({type:0,data:fa(E)})}I[4]=[],I[5]=[],I[6]=[];for(var B=0;B<=n.e.r;++B)N=[],N[1]=N[2]=[{type:0,data:fa(B+726270)}],I[4].push({type:2,data:Ao(N)}),I[5].push({type:0,data:fa(B)}),I[6].push({type:0,data:fa(B)});j[k].messages[0].data=Ao(I)}_.content=Fx(Ix(j)),_.size=_.content.length,delete y[46];var R=Wn(y[4][0].data);{R[7][0].data=fa(n.e.r+1);var D=Wn(R[1][0].data),O=$o(D[2][0].data);_=_r.find(u,o[O].location),j=_u(Nu(_.content));{if(j[0].id!=O)throw"Bad HeaderStorageBucket";var L=Wn(j[0].messages[0].data);for(B=0;B<s.length;++B){var M=Wn(L[2][0].data);M[1][0].data=fa(B),M[4][0].data=fa(s[B].length),L[2][B]={type:L[2][0].type,data:Ao(M)}}j[0].messages[0].data=Ao(L)}_.content=Fx(Ix(j)),_.size=_.content.length;var J=$o(R[2][0].data);_=_r.find(u,o[J].location),j=_u(Nu(_.content));{if(j[0].id!=J)throw"Bad HeaderStorageBucket";for(L=Wn(j[0].messages[0].data),E=0;E<=n.e.c;++E)M=Wn(L[2][0].data),M[1][0].data=fa(E),M[4][0].data=fa(n.e.r+1),L[2][E]={type:L[2][0].type,data:Ao(M)};j[0].messages[0].data=Ao(L)}_.content=Fx(Ix(j)),_.size=_.content.length;var V=$o(R[4][0].data);(function(){for(var H=_r.find(u,o[V].location),X=_u(Nu(H.content)),Z,ae=0;ae<X.length;++ae){var le=X[ae];le.id==V&&(Z=le)}var ie=Wn(Z.messages[0].data);{ie[3]=[];var ce=[];i.forEach(function(ne,_e){ce[1]=[{type:0,data:fa(_e)}],ce[2]=[{type:0,data:fa(1)}],ce[3]=[{type:2,data:eWe(ne)}],ie[3].push({type:2,data:Ao(ce)})})}Z.messages[0].data=Ao(ie);var fe=Ix(X),Ie=Fx(fe);H.content=Ie,H.size=H.content.length})();var K=Wn(R[3][0].data);{var z=K[1][0];delete K[2];var G=Wn(z.data);{var Y=$o(G[2][0].data);(function(){for(var H=_r.find(u,o[Y].location),X=_u(Nu(H.content)),Z,ae=0;ae<X.length;++ae){var le=X[ae];le.id==Y&&(Z=le)}var ie=Wn(Z.messages[0].data);{delete ie[6],delete K[7];var ce=new Uint8Array(ie[5][0].data);ie[5]=[];for(var fe=0,Ie=0;Ie<=n.e.r;++Ie){var ne=Wn(ce);fe+=hWe(ne,s[Ie],i),ne[1][0].data=fa(Ie),ie[5].push({data:Ao(ne),type:2})}ie[1]=[{type:0,data:fa(n.e.c+1)}],ie[2]=[{type:0,data:fa(n.e.r+1)}],ie[3]=[{type:0,data:fa(fe)}],ie[4]=[{type:0,data:fa(n.e.r+1)}]}Z.messages[0].data=Ao(ie);var _e=Ix(X),Fe=Fx(_e);H.content=Fe,H.size=H.content.length})()}z.data=Ao(G)}R[3][0].data=Ao(K)}y[4][0].data=Ao(R)}p.messages[0].data=Ao(y);var te=Ix(h),P=Fx(te);return f.content=P,f.size=f.content.length,u}function mle(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function D8(e){mle([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function P8(e){mle([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function pWe(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function gWe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,pWe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function xWe(e,t,r,n,a,s,i,o,c,u,d,f){try{s[n]=fw(Pc(e,r,!0),t);var h=li(e,t),p;switch(o){case"sheet":p=UKe(h,t,a,c,s[n],u,d,f);break;case"chart":if(p=QKe(h,t,a,c,s[n],u,d,f),!p||!p["!drawel"])break;var g=Ly(p["!drawel"].Target,t),x=i2(g),b=SVe(Pc(e,g,!0),fw(Pc(e,x,!0),g)),y=Ly(b,g),w=i2(y);p=hKe(Pc(e,y,!0),y,c,fw(Pc(e,w,!0),y),u,p);break;case"macro":p=HKe(h,t,a,c,s[n],u,d,f);break;case"dialog":p=VKe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var _=[];s&&s[n]&&Bs(s[n]).forEach(function(j){var k="";if(s[n][j].Type==Cn.CMNT){k=Ly(s[n][j].Target,t);var I=KKe(li(e,k,!0),k,c);if(!I||!I.length)return;XK(p,I,!1)}s[n][j].Type==Cn.TCMNT&&(k=Ly(s[n][j].Target,t),_=_.concat(jVe(li(e,k,!0),c)))}),_&&_.length&&XK(p,_,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function yu(e){return e.charAt(0)=="/"?e.slice(1):e}function vWe(e,t){if(sb(),t=t||{},D8(t),Su(e,"META-INF/manifest.xml")||Su(e,"objectdata.xml"))return oq(e,t);if(Su(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof uI<"u"){if(e.FileIndex)return uI(e);var r=_r.utils.cfb_new();return gK(e).forEach(function(M){un(r,M,BUe(e,M))}),uI(r)}throw new Error("Unsupported NUMBERS file")}if(!Su(e,"[Content_Types].xml"))throw Su(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Su(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=gK(e),a=E7e(Pc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",li(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!li(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(hw=[],a.sst)try{hw=GKe(li(e,yu(a.sst)),a.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&a.themes.length&&(c=$Ke(Pc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=zKe(li(e,yu(a.style)),a.style,c,t))}a.links.map(function(M){try{var J=fw(Pc(e,i2(yu(M))),M);return WKe(li(e,yu(M)),J,M,t)}catch{}});var d=MKe(li(e,yu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=li(e,yu(a.coreprops[0]),!0),h&&(f=noe(h)),a.extprops.length!==0&&(h=li(e,yu(a.extprops[0]),!0),h&&B7e(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Pc(e,yu(a.custprops[0]),!0),h&&(p=I7e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(J){return J.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=qKe(li(e,yu(a.calcchain)),a.calcchain));var b=0,y={},w,_;{var j=d.Sheets;f.Worksheets=j.length,f.SheetNames=[];for(var k=0;k!=j.length;++k)f.SheetNames[k]=j[k].name}var I=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),N=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Su(e,N)||(N="xl/_rels/workbook."+I+".rels");var B=fw(Pc(e,N,!0),N.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=XKe(li(e,yu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=TVe(li(e,yu(a.people[0])),t)),B&&(B=gWe(B,d.Sheets));var R=li(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var D="sheet";if(B&&B[b]?(w="xl/"+B[b][1].replace(/[\/]?xl\//,""),Su(e,w)||(w=B[b][1]),Su(e,w)||(w=N.replace(/_rels\/.*$/,"")+B[b][1]),D=B[b][2]):(w="xl/worksheets/sheet"+(b+1-R)+"."+I,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==b&&(O=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}xWe(e,w,_,f.SheetNames[b],b,y,i,D,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:x,Sheets:i,SheetNames:f.SheetNames,Strings:hw,Styles:u,Themes:c,SSF:Ha(Mr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(M,J){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=e.FileIndex[J]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=li(e,yu(a.vba[0]),!0):a.defaults&&a.defaults.bin===MVe&&(g.vbaraw=li(e,"xl/vbaProject.bin",!0))),g}function bWe(e,t){var r=t||{},n="Workbook",a=_r.find(e,n);try{if(n="/!DataSpaces/Version",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(XQe(a.content),n="/!DataSpaces/DataSpaceMap",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=JQe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=ZQe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);tHe(a.content)}catch{}if(n="/EncryptionInfo",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=rHe(a.content);if(n="/EncryptedPackage",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function yWe(e,t){return t.bookType=="ods"?hle(e,t):t.bookType=="numbers"?mWe(e,t):t.bookType=="xlsb"?wWe(e,t):EWe(e,t)}function wWe(e,t){hv=1024,e&&!e.SSF&&(e.SSF=Ha(Mr)),e&&e.SSF&&(sb(),bk(e.SSF),t.revssf=wk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Hoe.indexOf(t.bookType)>-1,a=y8();P8(t=t||{});var s=o8(),i="",o=0;if(t.cellXfs=[],qm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,aoe(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,ooe(e.Props)),a.extprops.push(i),ha(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Bs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,loe(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,Cn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,JKe(o-1,i,t,e,d)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(f){var p=f["!comments"],g=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+r,un(s,x,tqe(p,x)),a.comments.push(x),ha(d,-1,"../comments"+o+"."+r,Cn.CMNT),g=!0),f["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+o+".vml",Uoe(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&un(s,i2(i),Dv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,eqe(t.Strings,i,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,YKe(e,i)),a.workbooks.push(i),ha(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,S8(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,ZKe(e,i,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,rqe(i)),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),un(s,"[Content_Types].xml",toe(a,t)),un(s,"_rels/.rels",Dv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",Dv(t.wbrels)),delete t.revssf,delete t.ssf,s}function EWe(e,t){hv=1024,e&&!e.SSF&&(e.SSF=Ha(Mr)),e&&e.SSF&&(sb(),bk(e.SSF),t.revssf=wk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Hoe.indexOf(t.bookType)>-1,a=y8();P8(t=t||{});var s=o8(),i="",o=0;if(t.cellXfs=[],qm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,aoe(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,ooe(e.Props)),a.extprops.push(i),ha(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Bs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,loe(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,Zoe(o-1,t,e,f)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,un(s,b,BVe(g,d,t)),a.threadedcomments.push(b),ha(f,-1,"../threadedComments/threadedComment"+o+"."+r,Cn.TCMNT)),b="xl/comments"+o+"."+r,un(s,b,Qoe(g)),a.comments.push(b),ha(f,-1,"../comments"+o+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&un(s,"xl/drawings/vmlDrawing"+o+".vml",Uoe(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&un(s,i2(i),Dv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,koe(t.Strings,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,ale(e)),a.workbooks.push(i),ha(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,S8(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,Poe(e,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,Moe()),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,IVe(d)),a.people.push(i),ha(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),un(s,"[Content_Types].xml",toe(a,t)),un(s,"_rels/.rels",Dv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",Dv(t.wbrels)),delete t.revssf,delete t.ssf,s}function R8(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=$c(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function CWe(e,t){return _r.find(e,"EncryptedPackage")?bWe(e,t):lle(e,t)}function _We(e,t){var r,n=e,a=t||{};return a.type||(a.type=gn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Bie(n,a),vWe(r,a)}function ple(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return dO(e.slice(r),t);default:break e}return g1.to_workbook(e,t)}function NWe(e,t){var r="",n=R8(e,t);switch(t.type){case"base64":r=$c(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=wg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",ple(r,t)}function SWe(e,t){var r=e;return t.type=="base64"&&(r=$c(r)),r=e2.utils.decode(1200,r.slice(2),"str"),t.type="binary",ple(r,t)}function kWe(e){return e.match(/[^\x00-\x7F]/)?$A(e):e}function dI(e,t,r,n){return n?(r.type="string",g1.to_workbook(e,r)):g1.to_workbook(t,r)}function f2(e,t){r8();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return f2(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Rv={},r.dateNF&&(Rv.dateNF=r.dateNF),r.type||(r.type=gn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=gn?"buffer":"binary",n=wUe(e),typeof Uint8Array<"u"&&!gn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=kWe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ha(r),r.type="array",f2(n8(n),r)}switch((a=R8(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return CWe(_r.read(n,r),r);break;case 9:if(a[1]<=8)return lle(n,r);break;case 60:return dO(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return FQe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Noe.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?_We(n,r):dI(e,n,r,s);case 239:return a[3]===60?dO(n,r):dI(e,n,r,s);case 255:if(a[1]===254)return SWe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return eg.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return eg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return uO.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Foe.to_workbook(n,r);break;case 10:case 13:case 32:return NWe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return IQe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?uO.to_workbook(n,r):dI(e,n,r,s)}function gle(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return sE(t.file,_r.write(e,{type:gn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return _r.write(e,t)}function jWe(e,t){var r=Ha(t||{}),n=yWe(e,r);return BWe(n,r)}function BWe(e,t){var r={},n=gn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?_r.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(vk(a))}return t.password&&typeof encrypt_agile<"u"?gle(encrypt_agile(a,t.password),t):t.type==="file"?sE(t.file,a):t.type=="string"?Ea(a):a}function TWe(e,t){var r=t||{},n=kqe(e,r);return gle(n,r)}function IA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return t2($A(n));case"binary":return $A(n);case"string":return e;case"file":return sE(t.file,n,"utf8");case"buffer":return gn?Mh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):IA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function IWe(e,t){switch(t.type){case"base64":return t2(e);case"binary":return e;case"string":return e;case"file":return sE(t.file,e,"binary");case"buffer":return gn?Mh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function c_(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?t2(r):t.type=="string"?Ea(r):r;case"file":return sE(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function xle(e,t){r8(),CKe(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=xle(e,r);return r.type="array",vk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return IA(yqe(e,r),r);case"slk":case"sylk":return IA(_oe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return IA(ule(e.Sheets[e.SheetNames[a]],r),r);case"txt":return IWe(vle(e.Sheets[e.SheetNames[a]],r),r);case"csv":return IA(L8(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return IA(Noe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return c_(uO.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return IA(g1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return IA(Foe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return IA(Soe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return IA(hle(e,r),r);case"wk1":return c_(eg.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return c_(eg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),c_(cle(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),TWe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return jWe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function FWe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function kk(e,t,r){var n={};return n.type="file",n.file=t,FWe(n),xle(e,n)}function OWe(e,t,r,n,a,s,i,o){var c=qs(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&x===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?x:kh(g,x,o);x!=null&&(f=!1)}}return{row:h,isempty:f}}function uS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Hn(d);break;case"number":c=Hn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=qs(c.s.r),h=[],p=[],g=0,x=0,b=Array.isArray(e),y=c.s.r,w=0,_={};b&&!e[y]&&(e[y]=[]);var j=u.skipHidden&&e["!cols"]||[],k=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(j[w]||{}).hidden)switch(h[w]=is(w),r=b?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=kh(r,null,u),x=_[i]||0,!x)_[i]=1;else{do o=i+"_"+x++;while(_[o]);_[i]=x,_[o]=1}s[w]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(k[y]||{}).hidden){var I=OWe(e,c,y,h,n,s,b,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=I.row)}return p.length=g,p}var Aq=/"/g;function DWe(e,t,r,n,a,s,i,o){for(var c=!0,u=[],d="",f=qs(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:kh(p,null,o));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||o.forceQuotes){d='"'+d.replace(Aq,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(Aq,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function L8(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=is(g));for(var x=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=DWe(e,a,b,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function vle(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=L8(e,t);return r}function PWe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",i=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=is(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=qs(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function ble(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(x,b){Bs(x).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var w=x[y],_="z",j="",k=Hr({c:o+p,r:i+b+a});u=h2(s,k),w&&typeof w=="object"&&!(w instanceof Date)?s[k]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=ki(w)),j=n.dateNF||Mr[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,j&&(u.z=j)):s[k]=u={t:_,v:w},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=qs(i);if(a)for(p=0;p<h.length;++p)s[is(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=nn(d),s}function RWe(e,t){return ble(null,e,t)}function h2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=os(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?h2(e,Hr(t)):h2(e,Hr({r:t,c:r||0}))}function LWe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function M8(){return{SheetNames:[],Sheets:{}}}function U8(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(nle(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function MWe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=LWe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function UWe(e,t){return e.z=t,e}function yle(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function QWe(e,t,r){return yle(e,"#"+t,r)}function HWe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function VWe(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:nn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=h2(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var yl={encode_col:is,encode_row:qs,encode_cell:Hr,encode_range:nn,decode_col:m8,decode_row:h8,split_cell:e7e,decode_cell:os,decode_range:nc,format_cell:kh,sheet_add_aoa:qie,sheet_add_json:ble,sheet_add_dom:dle,aoa_to_sheet:ib,json_to_sheet:RWe,table_to_sheet:Ale,table_to_book:Xqe,sheet_to_csv:L8,sheet_to_txt:vle,sheet_to_json:uS,sheet_to_html:ule,sheet_to_formulae:PWe,sheet_to_row_object_array:uS,sheet_get_cell:h2,book_new:M8,book_append_sheet:U8,book_set_sheet_visibility:MWe,cell_set_number_format:UWe,cell_set_hyperlink:yle,cell_set_internal_link:QWe,cell_add_comment:HWe,sheet_set_array_formula:VWe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const zWe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=yt(Tr,c),d=await Qn(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=yt(Tr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=zt(c,Dr("timestamp",">=",u.toISOString()),gr("timestamp","desc")),f=await Qn(d),h={};f.docs.forEach(p=>{const g=p.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},fq=500,Ox=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),AI=({title:e,data:t,colorClass:r})=>{const n=S.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},$We=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[a,s]=S.useState(null),[i,o]=S.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});S.useEffect(()=>{n(!0);const f=PLe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await zWe();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:c,userStats:u,moduleStats:d}=S.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},b={},y={};e.forEach(j=>{const k=new Date(j.timestamp).getTime();k>=h&&x.today++,k>=p&&x.week++,k>=g&&x.month++;const I=j.userEmail||"Desconocido";b[I]||(b[I]={email:I,today:0,month:0,total:0}),b[I].total++,k>=h&&b[I].today++,k>=g&&b[I].month++,y[j.module]=(y[j.module]||0)+1});const w=Object.values(b).sort((j,k)=>k.total-j.total),_=Object.entries(y).map(([j,k])=>({label:j,value:k})).sort((j,k)=>k.value-j.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(Ox,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${fq}`,alert:c.today>fq}),l.jsx(Ox,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(Ox,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(AI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(Ox,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(Ox,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(Ox,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(AI,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(AI,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GWe="type.googleapis.com/google.protobuf.Int64Value",KWe="type.googleapis.com/google.protobuf.UInt64Value";function wle(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function dS(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>dS(t));if(typeof e=="function"||typeof e=="object")return wle(e,t=>dS(t));throw new Error("Data cannot be encoded in JSON: "+e)}function v1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case GWe:case KWe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>v1(t)):typeof e=="function"||typeof e=="object"?wle(e,t=>v1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jl extends Vd{constructor(t,r,n){super(`${Q8}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Jl.prototype)}}function qWe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function AS(e,t){let r=qWe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!hq[i])return new Jl("internal","internal");r=hq[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=v1(a))}}catch{}return r==="ok"?null:new Jl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WWe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ic(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="us-central1",XWe=/^data: (.*?)(?:\n|$)/;function YWe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Jl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class JWe{constructor(t,r,n,a,s=hO,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new WWe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=hO}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function ZWe(e,t,r){const n=Ih(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(GS(e.emulatorOrigin),KS("Functions",!0))}function eXe(e,t,r){const n=a=>rXe(e,t,a,{});return n.stream=(a,s)=>aXe(e,t,a,s),n}async function tXe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function Ele(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function rXe(e,t,r,n){const a=e._url(t);return nXe(e,a,r,n)}async function nXe(e,t,r,n){r=dS(r);const a={data:r},s=await Ele(e,n),i=n.timeout||7e4,o=YWe(i),c=await Promise.race([tXe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new Jl("cancelled","Firebase Functions instance was deleted.");const u=AS(c.status,c.json);if(u)throw u;if(!c.json)throw new Jl("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Jl("internal","Response is missing data field.");return{data:v1(d)}}function aXe(e,t,r,n){const a=e._url(t);return sXe(e,a,r,n||{})}async function sXe(e,t,r,n){var h;r=dS(r);const a={data:r},s=await Ele(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const x=new Jl("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=AS(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,c;const u=new Promise((p,g)=>{o=p,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new Jl("cancelled","Request was cancelled.");c(p)});const d=i.body.getReader(),f=iXe(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:x}=await p.read();return{value:g,done:x}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function iXe(e,t,r,n){const a=(i,o)=>{const c=i.match(XWe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(v1(d.result));return}if("message"in d){o.enqueue(v1(d.message));return}if("error"in d){const f=AS(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof Jl){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new Jl("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new Jl("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof Jl?u:AS(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const mq="@firebase/functions",pq="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oXe="auth-internal",lXe="app-check-internal",cXe="messaging-internal";function uXe(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(oXe),i=r.getProvider(cXe),o=r.getProvider(lXe);return new JWe(a,s,i,o,n)};mm(new hh(Q8,t,"PUBLIC").setMultipleInstances(!0)),Lu(mq,pq,e),Lu(mq,pq,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(e=qS(),t=hO){const n=S2(Yn(e),Q8).getImmediate({identifier:t}),a=wD("functions");return a&&dXe(n,...a),n}function dXe(e,t,r){ZWe(Yn(e),t,r)}function Dx(e,t,r){return eXe(Yn(e),t)}uXe();const gq=yt(Tr,"usuarios");async function Cle(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",gq);const e=await Qn(gq);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const xq=Object.values(Wt),fI=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",AXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!1),[a,s]=S.useState("Usuarios"),[i,o]=S.useState({nombreCompleto:"",email:"",rut:"",profile:Wt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=S.useState(null),[d,f]=S.useState(""),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState(null),[w,_]=S.useState(null),[j,k]=S.useState(null),I=S.useCallback(async()=>{n(!0);try{const z=await Cle();t(z)}catch(z){console.error("Error al cargar usuarios",z),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);S.useEffect(()=>{I()},[I]);const E=S.useCallback(z=>{const{name:G,value:Y}=z.target;o(te=>({...te,[G]:Y,curso:G==="profile"&&Y!==Wt.ESTUDIANTE?"":te.curso,cursos:G==="profile"&&Y!==Wt.PROFESORADO?[]:te.cursos,asignaturas:G==="profile"&&Y!==Wt.PROFESORADO?[]:te.asignaturas}))},[]),N=S.useCallback((z,G)=>{o(Y=>{const te=Y[z]||[],P=te.includes(G)?te.filter(H=>H!==G):[...te,G];return{...Y,[z]:P}})},[]),B=S.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Wt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),R=S.useCallback(async z=>{z.preventDefault(),y(null);const{nombreCompleto:G,email:Y,profile:te,curso:P,password:H}=i;if(!G.trim()||!Y.trim()){y("Nombre Completo y Email son obligatorios.");return}if(te===Wt.ESTUDIANTE&&!P){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(H!=null&&H.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const X=uy();try{if(c){const Z=Dx(X,"updateUser"),ae={...i,password:(H==null?void 0:H.trim())||void 0,curso:te===Wt.ESTUDIANTE?fI(P||""):void 0};await Z(ae)}else{const Z=Dx(X,"createUser"),ae={...i,curso:te===Wt.ESTUDIANTE?fI(P||""):void 0};await Z(ae)}await I(),B()}catch(Z){console.error("Error al guardar usuario:",Z),y(Z.message||"Error al guardar el usuario.")}},[i,c,I,B]),D=S.useCallback(z=>{u(z.email),o({nombreCompleto:z.nombreCompleto,email:z.email,rut:z.rut||"",profile:z.profile,password:"",curso:z.curso||"",cursos:z.cursos||[],asignaturas:z.asignaturas||[]}),setTimeout(()=>{const G=document.querySelector("form");G&&G.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),O=S.useCallback(async z=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${z}? Esta acción es irreversible.`))try{const G=uy();await Dx(G,"deleteUser")({email:z}),await I()}catch(G){console.error("Error al eliminar usuario:",G),y(G.message||"No se pudo borrar el usuario.")}},[I]),L=async z=>{var H;const G=(H=z.target.files)==null?void 0:H[0];if(!G)return;_({message:"Procesando archivo...",isError:!1});const Y=uy(),te=Dx(Y,"createUser"),P=new FileReader;P.onload=async X=>{var Z;try{const ae=new Uint8Array((Z=X.target)==null?void 0:Z.result),le=f2(ae,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ce=yl.sheet_to_json(ie);if(ce.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const fe=ce.map(Se=>{const me=Se.Nombre||Se.nombre,Te=Se.Correo||Se.correo||Se.Email||Se.email,Me=Se.Curso||Se.curso,We=Se.RUT||Se.rut;return!me||!Te||!Me?Promise.resolve({email:Te||"Sin email",error:"Datos incompletos"}):te({nombreCompleto:String(me).trim(),email:String(Te).trim(),profile:Wt.ESTUDIANTE,curso:fI(String(Me).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(be=>({email:Te,error:be.message}))}),Ie=await Promise.all(fe),ne=Ie.filter(Se=>!Se.error).length,_e=Ie.filter(Se=>Se.error);let Fe=`Carga completada. ${ne} estudiantes agregados.`;_e.length>0&&(Fe+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),_({message:Fe,isError:_e.length>0}),await I()}catch(ae){_({message:`Error: ${ae.message}`,isError:!0})}},P.readAsArrayBuffer(G),z.target.value=""},M=async z=>{var H;const G=(H=z.target.files)==null?void 0:H[0];if(!G)return;k({message:"Procesando archivo...",isError:!1});const Y=uy(),te=Dx(Y,"createUser"),P=new FileReader;P.onload=async X=>{var Z;try{const ae=new Uint8Array((Z=X.target)==null?void 0:Z.result),le=f2(ae,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ce=yl.sheet_to_json(ie);if(ce.length===0){k({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const fe=ce.map(Se=>{const me=Se.Nombre||Se.nombre,Te=Se.Correo||Se.correo||Se.Email||Se.email,Me=Se.Perfil||Se.perfil||Se.Profile||Se.profile,We=Se.RUT||Se.rut;return!me||!Te||!Me?Promise.resolve({email:Te||"Sin email",error:"Datos incompletos"}):te({nombreCompleto:String(me).trim(),email:String(Te).trim(),profile:Me,rut:We?String(We).trim():"",password:"recoleta"}).catch(be=>({email:Te,error:be.message}))}),Ie=await Promise.all(fe),ne=Ie.filter(Se=>!Se.error).length,_e=Ie.filter(Se=>Se.error);let Fe=`Carga completada. ${ne} usuarios agregados.`;_e.length>0&&(Fe+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),k({message:Fe,isError:_e.length>0}),await I()}catch(ae){k({message:`Error: ${ae.message}`,isError:!0})}},P.readAsArrayBuffer(G),z.target.value=""},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=S.useMemo(()=>Array.from(new Set(e.filter(z=>z.profile===Wt.ESTUDIANTE&&z.curso).map(z=>z.curso))).sort(),[e]),K=S.useMemo(()=>e.filter(z=>(d===""||z.nombreCompleto.toLowerCase().includes(d.toLowerCase())||z.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||z.profile===h)&&(g===""||z.curso===g)),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&l.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),j&&l.jsx("p",{className:`text-sm mt-2 ${j.isError?"text-red-600":"text-green-600"}`,children:j.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:J,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:J,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:J})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:J})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:E,className:J,required:!0,children:xq.map(z=>l.jsx("option",{value:z,children:z},z))})]}),i.profile===Wt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:J,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),i.profile===Wt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ks.map(z=>{var G;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((G=i.cursos)==null?void 0:G.includes(z))||!1,onChange:()=>N("cursos",z),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),i.profile===Wt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Wi.map(z=>{var G;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((G=i.asignaturas)==null?void 0:G.includes(z))||!1,onChange:()=>N("asignaturas",z),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const z=uy(),Y=await Dx(z,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",Y),y("✅ Custom claim agregado exitosamente")}catch(z){console.error("❌ Error al agregar custom claim:",z),y(`Error: ${z.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var z,G,Y,te,P;try{const{auth:H}=await m1(async()=>{const{auth:ae}=await Promise.resolve().then(()=>vee);return{auth:ae}},void 0);console.log("🔍 Usuario actual:",(z=H.currentUser)==null?void 0:z.email);const X=await((G=H.currentUser)==null?void 0:G.getIdToken(!0));console.log("🔑 Token refreshed:",!!X);const Z=await((Y=H.currentUser)==null?void 0:Y.getIdTokenResult());console.log("📋 Claims completos:",Z==null?void 0:Z.claims),console.log("👤 Profile claim:",(te=Z==null?void 0:Z.claims)==null?void 0:te.profile),((P=Z==null?void 0:Z.claims)==null?void 0:P.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(Z==null?void 0:Z.claims)}`)}catch(H){console.error("❌ Error verificando token:",H),y(`Error verificando token: ${H.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:z=>f(z.target.value),className:J})}),l.jsx("div",{children:l.jsxs("select",{value:h,onChange:z=>p(z.target.value),className:J,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),xq.map(z=>l.jsx("option",{value:z,children:z},z))]})}),l.jsx("div",{children:l.jsxs("select",{value:g,onChange:z=>x(z.target.value),className:J,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),V.map(z=>l.jsx("option",{value:z,children:z},z))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(z=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:z.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:z.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.profile===Wt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":z.profile===Wt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:z.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[z.profile===Wt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:z.curso||"Sin curso"}),z.profile===Wt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[z.cursos&&z.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.cursos.slice(0,3).map(G=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:G},G)),z.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.cursos.length-3]})]})]}),z.asignaturas&&z.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.asignaturas.slice(0,2).map(G=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:G},G)),z.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.asignaturas.length-2]})]})]}),(!z.cursos||z.cursos.length===0)&&(!z.asignaturas||z.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),z.profile!==Wt.ESTUDIANTE&&z.profile!==Wt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>D(z),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>O(z.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.email))})]}),K.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx($We,{})]})},b1="seguimiento_dual_records",fXe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},hXe=e=>{const t=zt(yt(ft,b1),gr("nombreEstudiante","asc"));return fr(t,n=>{const a=n.docs.map(s=>fXe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},fS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=ir.fromDate(new Date(t[n]+"T00:00:00")))}),t},mXe=async e=>{try{const t=fS(e);return(await vn(yt(ft,b1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},vq=async(e,t)=>{try{const r=sr(ft,b1,e),n=fS(t);await pi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},pXe=async e=>{try{const t=sr(ft,b1,e);await za(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},gXe=async e=>{const t=Dg(ft),r=yt(ft,b1);let n=0,a=0;for(const s of e){const i=zt(r,Dr("rutEstudiante","==",s.rutEstudiante)),o=await Qn(i);if(o.empty){const c=sr(r);t.set(c,fS(s)),a++}else{const c=o.docs[0].id,u=sr(ft,b1,c);t.set(u,fS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},xXe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},vXe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},bXe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},yXe=({record:e,onSave:t,onClose:r})=>{const[n,a]=S.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},wXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),a=S.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:$p[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:VB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=S.useState(a),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState(!1),[_,j]=S.useState(null);S.useEffect(()=>{n(!0);const z=hXe(G=>{t(G),n(!1)});return()=>z()},[]);const k=S.useCallback(z=>{const{name:G,value:Y}=z.target;i(te=>({...te,[G]:Y}))},[]),I=S.useCallback(z=>{const{name:G,value:Y}=z.target;h(te=>({...te,[G]:Y}))},[]),E=S.useCallback(()=>{i(a),c(null),g(null)},[a]),N=async z=>{z.preventDefault(),g(null);const Y=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(te=>{var P;return!((P=s[te])!=null&&P.trim())});if(Y){g(`El campo '${Y}' es obligatorio.`);return}try{o?await vq(o,s):await mXe(s),E()}catch(te){console.error(te),g("No se pudo guardar el registro.")}},B=S.useCallback(z=>{window.scrollTo({top:0,behavior:"smooth"}),c(z.id),i(z)},[]),R=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await pXe(z)}catch(G){console.error(G),g("No se pudo eliminar el registro.")}},D=z=>{j(z),w(!0)},O=()=>{j(null),w(!1)},L=async z=>{try{await vq(z.id,z),O()}catch(G){console.error(G),alert("No se pudieron guardar los cambios de supervisión.")}},M=()=>{const z=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],G=yl.aoa_to_sheet([z]),Y=yl.book_new();yl.book_append_sheet(Y,G,"Plantilla"),kk(Y,"Plantilla_Seguimiento_Dual.xlsx")},J=z=>{var te;const G=(te=z.target.files)==null?void 0:te[0];if(!G)return;b({message:"Procesando archivo...",isError:!1});const Y=new FileReader;Y.onload=async P=>{var H;try{const X=new Uint8Array((H=P.target)==null?void 0:H.result),Z=f2(X,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ae=Z.SheetNames[0],le=Z.Sheets[ae],ie=yl.sheet_to_json(le,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},fe=Object.keys(ie[0]).map(Fe=>Fe.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(Fe=>!fe.includes(Fe));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const _e=ie.map((Fe,Se)=>{try{const me={};for(const Te in Fe){const Me=ce[Te.trim().toLowerCase()];if(Me){let We=Fe[Te];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Me)?(We=vXe(We),We&&(me[Me]=We)):Me.includes("realizada")?me[Me]=bXe(We):We!=null&&We!==""&&(me[Me]=String(We).trim())}}return!me.nombreEstudiante||!me.rutEstudiante?(console.warn(`Fila ${Se+2}: Faltan campos requeridos`),null):me}catch(me){return console.error(`Error procesando fila ${Se+2}:`,me),null}}).filter(Fe=>Fe!==null);if(console.log("Registros procesados:",_e),_e.length>0){const{updated:Fe,created:Se}=await gXe(_e);b({message:`Carga exitosa. ${Se} registros creados, ${Fe} actualizados.`,isError:!1})}else b({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(X){console.error("Error completo:",X),b({message:`Error al procesar el archivo: ${X.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},Y.readAsArrayBuffer(G)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=S.useMemo(()=>e.filter(z=>(u===""||z.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||z.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||z.rutEstudiante.includes(u))&&(f.curso===""||z.curso===f.curso)&&(f.empresa===""||z.nombreEmpresa===f.empresa)&&(f.estado===""||z.estado===f.estado)&&(f.comuna===""||z.comuna===f.comuna)&&(f.profesor===""||z.profesorTutorEmpresa===f.profesor)).sort((z,G)=>z.nombreEstudiante.localeCompare(G.nombreEstudiante)),[e,u,f]);return S.useMemo(()=>{const z=new Set,G=new Set;return e.forEach(Y=>{Y.nombreEmpresa&&z.add(Y.nombreEmpresa),Y.comuna&&G.add(Y.comuna)}),{empresas:Array.from(z).sort(),comunas:Array.from(G).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:k,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:k,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:k,className:V,required:!0,children:$p.map(z=>l.jsx("option",{value:z,children:z},z))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:k,className:V,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),V6.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:k,className:V,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:k,className:V})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:k,className:V})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:k,className:V})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:k,className:V,children:VB.map(z=>l.jsx("option",{value:z,children:z},z))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:M,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:J,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:z=>d(z.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:V,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),$p.map(z=>l.jsx("option",{children:z},z))]}),l.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:V,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),VB.map(z=>l.jsx("option",{children:z},z))]}),l.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:V,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),V6.map(z=>l.jsx("option",{children:z},z))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(z=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:z.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${xXe[z.estado]}`,children:z.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>D(z),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>B(z),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>R(z.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},z.id))})]})})]}),y&&_&&l.jsx(yXe,{record:_,onClose:O,onSave:L})]})},_le="actividades_remotas",Nle="respuestas_actividades",Sle="pruebas_estandarizadas",EXe="usuarios",kle=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},H8=e=>{const t=kle(e);return t?t.toISOString():void 0},hS=e=>{const t=kle(e);return t?t.toISOString().split("T")[0]:void 0},jle=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},Ble=e=>ir.fromDate(new Date(e||new Date().toISOString())),CXe=e=>!!e&&/^data:/.test(e),m2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(m2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=m2(n))}),t},_Xe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},NXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:H8(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:hS(t.plazoEntrega)||hS(new Date)}},SXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:H8(t.fechaCompletado)||new Date().toISOString()}},kXe=e=>{const t=e.data()||{};return{id:e.id,...t}},jXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:H8(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:hS(t.plazoEntrega)||hS(new Date)}},BXe=e=>{const t=zt(yt(ft,_le),gr("fechaCreacion","desc"));return fr(t,r=>e(r.docs.map(NXe)),r=>{console.error("subscribeToActividades error:",r),e([])})},TXe=(e,t)=>{const r=yt(ft,Nle),n=zt(r,gr("fechaCompletado","desc"));return fr(n,a=>e(a.docs.map(SXe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},IXe=e=>{const t=zt(yt(ft,EXe),gr("nombreCompleto","asc"));return fr(t,r=>e(r.docs.map(kXe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},FXe=e=>{const t=zt(yt(ft,Sle),gr("fechaCreacion","desc"));return fr(t,r=>e(r.docs.map(jXe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},OXe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=m2({...a,fechaCreacion:Ble(r),plazoEntrega:jle(n)});return(await vn(yt(ft,_le),s)).id},DXe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=m2({...a,fechaCreacion:Ble(r),plazoEntrega:jle(n)});return(await vn(yt(ft,Sle),s)).id},PXe=async(e,t)=>{const r=m2(t);await Kc(sr(ft,Nle,e),r)},RXe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},LXe=async(e,t,r)=>{const{bytes:n,contentType:a}=_Xe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${i}`,u=L2(S2e,c);await _P(u,n,{contentType:a});const d=await C4(u);return{nombre:t,url:d}},MXe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(CXe(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return LXe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return OXe(a)},dy=e=>e?new Date(e).toLocaleDateString("es-CL"):"",UXe=e=>e?new Date(e).toLocaleString("es-CL"):"",QXe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),Tle=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},oi=(e,t)=>{if(t&&Tle(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>oi(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Hl=(e,t,...r)=>{if(Tle(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=oi(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ia=({content:e,context:t="unknown"})=>{try{const r=oi(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}},hI={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},mI=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],HXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,p]=S.useState(!1),[g,x]=S.useState(!1),[b,y]=S.useState(!1),[w,_]=S.useState(!1),[j,k]=S.useState(!1),[I,E]=S.useState(!0),[N,B]=S.useState(null),[R,D]=S.useState(""),[O,L]=S.useState(null),[M,J]=S.useState(null),[V,K]=S.useState([]),[z,G]=S.useState("carpetas"),[Y,te]=S.useState(null),[P,H]=S.useState(null),[X,Z]=S.useState([]),[ae,le]=S.useState(""),ie={asignatura:Wi[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ce,fe]=S.useState(ie),Ie={asignatura:Wi[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ne,_e]=S.useState(Ie);S.useEffect(()=>{E(!0);const et=BXe(t),gt=FXe(n),Je=TXe(s),xt=IXe(Et=>{o(Et),E(!1)});return()=>{et(),gt(),Je(),xt()}},[]);const Fe=et=>{fe(gt=>({...gt,[et.target.name]:et.target.value}))},Se=et=>{_e(gt=>({...gt,[et.target.name]:et.target.value}))},me=et=>{fe(gt=>({...gt,recursos:{...gt.recursos,[et.target.name]:et.target.value}}))},Te=et=>{et.target.files&&K(Array.from(et.target.files))},Me=et=>{fe(gt=>{const Je=gt.tipos.includes(et)?gt.tipos.filter(Et=>Et!==et):[...gt.tipos,et],xt={...gt.cantidadPreguntas};return Je.includes(et)?xt[et]||(xt[et]=hI[et][0]):delete xt[et],{...gt,tipos:Je,cantidadPreguntas:xt}})},We=(et,gt)=>{fe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[et]:gt}}))},be=(et,gt=!1)=>{(gt?_e:fe)(xt=>{const Et=xt.estudiantesDestino||[],bt=Et.includes(et)?Et.filter(nr=>nr!==et):[...Et,et];return{...xt,estudiantesDestino:bt}})},De=()=>{const{tipos:et,contenido:gt,asignatura:Je,nivel:xt,cantidadPreguntas:Et}=ce;let bt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${gt}"
Asignatura: ${Je}
Nivel: ${xt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return et.forEach(nr=>{const xr=Et[nr]||hI[nr][0];switch(nr){case"Quiz":bt+=`- "Quiz": Array de ${xr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":bt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${xr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":bt+=`- "Términos Pareados": Array de ${xr} { concepto, definicion }
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${xr} { pregunta, rubrica }
`;break}}),bt},Re=()=>{const{contenido:et,objetivosAprendizaje:gt,asignatura:Je,nivel:xt}=ne;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${Je}
- Nivel: ${xt}
- Contenido: ${et}
- Objetivos: ${gt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${mI.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function qe(et,gt){if(et==="Desarrollo"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Et?{pregunta:Hl(Et[1],`desarrollo-pregunta-${xt}`),rubrica:Hl(Et[2],`desarrollo-rubrica-${xt}`)}:{pregunta:Hl(Je,`desarrollo-pregunta-simple-${xt}`),rubrica:""}}if(Je&&typeof Je=="object"){const Et=Hl(Je,`desarrollo-obj-pregunta-${xt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const nr=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;bt=oi(nr,`desarrollo-rubrica-${xt}`)}return{pregunta:Et,rubrica:bt}}return{pregunta:oi(Je,`desarrollo-fallback-${xt}`),rubrica:""}});if(et==="Términos Pareados"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.+?)[\s:-–]+(.+)$/);return Et?{id:xt,concepto:Hl(Et[1],`pareados-concepto-${xt}`),definicion:Hl(Et[2],`pareados-definicion-${xt}`)}:{id:xt,concepto:Hl(Je,`pareados-concepto-simple-${xt}`),definicion:""}}return Je&&typeof Je=="object"?{id:xt,concepto:Hl(Je,`pareados-obj-concepto-${xt}`,"concepto","termino"),definicion:Hl(Je,`pareados-obj-definicion-${xt}`,"definicion","significado")}:{id:xt,concepto:oi(Je,`pareados-fallback-${xt}`),definicion:""}});if(et==="Comprensión de Lectura"){if(gt&&typeof gt=="object"&&!Array.isArray(gt)&&Array.isArray(gt.preguntas))return{texto:Hl(gt,"comprension-texto","texto"),preguntas:gt.preguntas.map((Je,xt)=>({pregunta:Hl(Je,`comprension-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>oi(Et,`comprension-opcion-${xt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`comprension-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(gt)){const Je=gt.map((Et,bt)=>Hl(Et,`comprension-bloque-${bt}`,"texto")).join(`

---

`),xt=gt.flatMap(Et=>Array.isArray(Et.preguntas)?Et.preguntas:[]);return{texto:Je,preguntas:xt.map((Et,bt)=>({pregunta:Hl(Et,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Et.opciones)?Et.opciones.map(nr=>oi(nr,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:oi(Et.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof Et.puntaje=="number"?Et.puntaje:1}))}}}return et==="Quiz"&&Array.isArray(gt)?gt.map((Je,xt)=>({pregunta:Hl(Je,`quiz-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>oi(Et,`quiz-opcion-${xt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`quiz-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):gt}const Ze=async et=>{var gt;if(et.preventDefault(),!ce.contenido.trim()||ce.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Je=await Promise.all(V.map(async we=>({nombre:we.name,url:await QXe(we)}))),xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new cs(xt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),nr=De();let Zr=await(await(await bt.generateContent(nr)).response).text();Zr=Zr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const qr=Zr.match(/\{[\s\S]*\}/);if(!qr)throw new Error("La IA no devolvió JSON válido.");const he=JSON.parse(qr[0]),je={};for(const we of ce.tipos){const Ne=(gt=he.actividades)==null?void 0:gt[we];je[we]=qe(we,Ne)}const Ce={id:"",fechaCreacion:new Date().toISOString(),...ce,recursos:{...ce.recursos,archivos:Je},introduccion:oi(he.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:je};L(Ce)}catch(Je){B(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},ct=async et=>{if(et.preventDefault(),!ne.contenido.trim()||!ne.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",xt=new cs(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Et=Re();let xr=await(await(await xt.generateContent(Et)).response).text();xr=xr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Wr=xr.match(/\{[\s\S]*\}/);if(!Wr)throw new Error("No se encontró JSON válido en la respuesta.");const Zr=Wr[0].replace(/,(\s*[}\]])/g,"$1"),qr=JSON.parse(Zr);if(!qr.preguntas||!Array.isArray(qr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const he=(qr.textos||[]).map((we,Ne)=>({id:we.id||Ne+1,titulo:oi(we.titulo,`texto-titulo-${Ne}`)||`Texto ${Ne+1}`,contenido:oi(we.contenido,`texto-contenido-${Ne}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),je=qr.preguntas.slice(0,30).map((we,Ne)=>({numero:we.numero||Ne+1,pregunta:oi(we.pregunta,`pregunta-${Ne}`)||`Pregunta ${Ne+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((Be,Ye)=>oi(Be,`pregunta-opcion-${Ne}-${Ye}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:mI.includes(we.habilidad)?we.habilidad:mI[0],justificacion:oi(we.justificacion,`justificacion-${Ne}`)||"Justificación no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...ne,titulo:oi(qr.titulo,"prueba-titulo")||`Prueba ${ne.asignatura}`,instrucciones:oi(qr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:he,preguntas:je};J(Ce)}catch(gt){B(`Error al generar la prueba: ${(gt==null?void 0:gt.message)||gt}`)}finally{y(!1)}},pt=async()=>{if(O)try{_(!0),await MXe(O),fe(ie),K([]),p(!1),L(null)}catch(et){console.error("Error al guardar la actividad con archivos:",et),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},It=async()=>{if(M)try{_(!0);const et={...M,cursosDestino:M.cursosDestino||[],estudiantesDestino:M.estudiantesDestino||[],textos:M.textos||[],preguntas:M.preguntas.map(gt=>({...gt,textoId:gt.textoId||null}))};await DXe(et),_e(Ie),x(!1),J(null)}catch(et){console.error("Error al guardar la prueba:",et),B("No se pudo guardar la prueba.")}finally{_(!1)}},Mt=S.useMemo(()=>{var Je,xt,Et;const et=c||d;if(!et||!i.length)return[];const gt=new Map;return!((Je=et.cursosDestino)!=null&&Je.length)&&!((xt=et.estudiantesDestino)!=null&&xt.length)?[]:((Et=et.estudiantesDestino)!=null&&Et.length&&i.filter(bt=>bt.profile===Wt.ESTUDIANTE&&et.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>gt.set(bt.id,bt)),Array.from(gt.values()).sort((bt,nr)=>bt.nombreCompleto.localeCompare(nr.nombreCompleto)))},[c,d,i]),Pt=S.useMemo(()=>{const et=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(gt=>gt.actividadId===et)},[a,c,d]),Qt=S.useMemo(()=>i.filter(et=>et.profile===Wt.ESTUDIANTE).sort((et,gt)=>et.nombreCompleto.localeCompare(gt.nombreCompleto)),[i]),wt=S.useMemo(()=>R.trim()?Qt.filter(et=>et.nombreCompleto.toLowerCase().includes(R.toLowerCase())):Qt,[Qt,R]),jr=S.useMemo(()=>{const et=new Set;return e.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Wt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&et.add(xt.id)})}),r.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Wt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&et.add(xt.id)})}),a.forEach(gt=>et.add(gt.estudianteId)),i.filter(gt=>gt.profile===Wt.ESTUDIANTE&&et.has(gt.id)).sort((gt,Je)=>gt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,i]),tr=S.useMemo(()=>i.find(et=>et.id===Y)||null,[i,Y]),an=S.useMemo(()=>{if(!tr)return{asignadas:[],respuestas:[]};const et=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],gt=a.filter(Je=>Je.estudianteId===tr.id);return{asignadas:et,respuestas:gt}},[tr,e,r,a]),Nr=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(et=>l.jsxs("button",{onClick:()=>{G(et),u(null),f(null),te(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${z===et?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[et==="carpetas"&&l.jsx(RQ,{size:18}),et==="actividades"&&l.jsx(Dd,{size:18}),et==="pruebas"&&l.jsx(Nye,{size:18}),et==="carpetas"?"Carpetas de Estudiantes":et==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},et)),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(N4,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:et=>D(et.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),z==="actividades"&&!O&&!c&&l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(IC,{size:18})," Nueva"]}),z==="pruebas"&&!M&&!d&&l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(IC,{size:18})," Nueva"]})]})]}),$r=()=>{const et=R?wt:jr;return et.length?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:et.map(gt=>{const Je=a.filter(bt=>bt.estudianteId===gt.id),xt=Je.length,Et=e.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length;return l.jsxs("button",{onClick:()=>te(gt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[l.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:l.jsx(RQ,{})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-semibold text-slate-800 truncate",children:gt.nombreCompleto}),l.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Rw,{size:14})," ",gt.curso||"—"]})]})]}),l.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:Et}),l.jsx("p",{className:"text-xs",children:"Asignadas"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:xt}),l.jsx("p",{className:"text-xs",children:"Entregas"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(G0,{size:16,className:"opacity-70"}),l.jsx("span",{className:"text-xs mt-1",children:Je.length?dy(Je.sort((bt,nr)=>(bt.fechaCompletado||"").localeCompare(nr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},gt.id)})}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},In=()=>{if(!tr)return null;const{asignadas:et,respuestas:gt}=an;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsxs("button",{onClick:()=>te(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[l.jsx(TC,{size:18})," Volver"]}),l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",tr.nombreCompleto]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:et.map(({tipo:Je,item:xt})=>{var xr;const Et=gt.find(Wr=>Wr.actividadId===xt.id),bt=Je==="Actividad"?`${xt.asignatura} — ${(xr=xt.tipos)==null?void 0:xr.join(", ")}`:xt.titulo,nr=xt.plazoEntrega?dy(xt.plazoEntrega):"—";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.jsx(Ia,{content:bt,context:"hist-titulo"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:nr}),l.jsx("td",{className:"px-4 py-3 text-sm",children:Et?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[l.jsx(Xi,{size:14})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[l.jsx(G0,{size:14})," Pendiente"]})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"—"}),l.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Et?Et.nota:"—"})]},xt.id)})})]})})]})},Pr=()=>{var et,gt,Je;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Ia,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):l.jsx(Ia,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",dy((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),l.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(TC,{size:18})," Volver al listado"]})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((et=c==null?void 0:c.tipos)==null?void 0:et.includes("Desarrollo"))&&l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Mt.map(xt=>{var bt;const Et=Pt.find(nr=>nr.estudianteId===xt.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:xt.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Et?l.jsx("span",{className:parseFloat(Et.nota)>=4?"text-green-600":"text-red-600",children:Et.nota}):"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?UXe(Et.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?l.jsx("button",{onClick:()=>{var xr,Wr,Zr;H(Et);const nr=Array.from({length:((Wr=(xr=c.generatedContent)==null?void 0:xr.Desarrollo)==null?void 0:Wr.length)||0},(qr,he)=>({index:he,puntaje:0,observacion:""}));Z(nr),le(((Zr=Et==null?void 0:Et.revisionDocente)==null?void 0:Zr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):l.jsx("span",{className:"text-slate-400",children:"-"})})]},xt.id)})})]})})]}),P&&((gt=c==null?void 0:c.tipos)==null?void 0:gt.includes("Desarrollo"))&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(P==null?void 0:P.estudianteNombre)||""]}),l.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((xt,Et)=>{var bt,nr;return l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`revision-pregunta-${Et}`})]}),xt.rubrica&&l.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[l.jsx("strong",{children:"Rúbrica:"})," ",l.jsx(Ia,{content:xt.rubrica,context:`revision-rubrica-${Et}`})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),l.jsx("input",{type:"number",min:0,step:.5,value:((bt=X[Et])==null?void 0:bt.puntaje)??0,onChange:xr=>{const Wr=Number(xr.target.value)||0;Z(Zr=>{const qr=[...Zr];return qr[Et]={...qr[Et]||{index:Et,puntaje:0},puntaje:Wr},qr})},className:"w-24 border-slate-300 rounded-md"}),l.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((nr=X[Et])==null?void 0:nr.observacion)||"",onChange:xr=>{const Wr=xr.target.value;Z(Zr=>{const qr=[...Zr];return qr[Et]={...qr[Et]||{index:Et,puntaje:0},observacion:Wr},qr})},className:"flex-1 border-slate-300 rounded-md"})]})]},Et)})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{rows:3,value:ae,onChange:xt=>le(xt.target.value),className:"w-full border-slate-300 rounded-md"})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>{H(null),Z([]),le("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:async()=>{if(P)try{k(!0);const xt=Number(P.puntaje)||0,Et=Number(P.puntajeMaximo)||0,bt=(X||[]).reduce((Wr,Zr)=>Wr+(Number(Zr.puntaje)||0),0),nr=xt+bt,xr=RXe(nr,Et);await PXe(P.id,{puntaje:nr,puntajeMaximo:Et,nota:xr,revisionDocente:{completada:!0,observacionesGenerales:ae||"",detalle:X||[],puntajeDocente:bt}}),H(null),Z([]),le("")}catch(xt){console.error("Error guardando revisión:",xt),B("No se pudo guardar la revisión del docente.")}finally{k(!1)}},disabled:j,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:j?"Guardando...":"Guardar Revisión"})]})]})})]})},fs=()=>{var et,gt;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsxs("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(TC,{size:18})," Volver"]})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),l.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ce.asignatura,onChange:Fe,className:"w-full border-slate-300 rounded-md shadow-sm",children:Wi.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),l.jsx("textarea",{name:"instrucciones",value:(et=ce.recursos)==null?void 0:et.instrucciones,onChange:me,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),l.jsx("textarea",{name:"enlaces",value:(gt=ce.recursos)==null?void 0:gt.enlaces,onChange:me,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),l.jsx("input",{type:"file",multiple:!0,onChange:Te,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:Je=>D(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?wt:Qt).map(Je=>{var xt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(xt=ce.estudiantesDestino)==null?void 0:xt.includes(Je.nombreCompleto),onChange:()=>be(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:ce.contenido,onChange:Fe,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ce.plazoEntrega,onChange:Fe,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:Qbe.map(Je=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ce.tipos.includes(Je),onChange:()=>Me(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),ce.tipos.includes(Je)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),hI[Je].map(xt=>l.jsx("button",{type:"button",onClick:()=>We(Je,xt),className:`px-3 py-1 rounded-full font-semibold text-xs ${ce.cantidadPreguntas[Je]===xt?"bg-amber-500 text-white":"bg-slate-200"}`,children:xt},xt))]})]},Je))})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:N}),l.jsx("div",{className:"pt-2 text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[b?l.jsx(G0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]})},hn=()=>{var et;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:O==null?void 0:O.introduccion,context:"preview-introduccion"})})]}),(O==null?void 0:O.recursos)&&(O.recursos.instrucciones||O.recursos.enlaces||((et=O.recursos.archivos)==null?void 0:et.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[O.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:O.recursos.instrucciones,context:"preview-instrucciones"})}),O.recursos.enlaces&&l.jsx("div",{children:O.recursos.enlaces.split(`
`).map((gt,Je)=>gt.trim()&&l.jsx("a",{href:gt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:gt},Je))}),O.recursos.archivos&&O.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:O.recursos.archivos.map(gt=>l.jsx("li",{className:"text-slate-700",children:gt.nombre},gt.nombre))})]})]}),O==null?void 0:O.tipos.map(gt=>{const Je=O.generatedContent[gt];return Je?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:gt}),l.jsxs("div",{className:"space-y-4 text-sm",children:[gt==="Quiz"&&Array.isArray(Je)&&Je.map((xt,Et)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-quiz-pregunta-${Et}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:bt,context:`preview-quiz-opcion-${Et}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-quiz-respuesta-${Et}`})]})]},Et)),gt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:l.jsx(Ia,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((xt,Et)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-lectura-pregunta-${Et}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:bt,context:`preview-lectura-opcion-${Et}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-lectura-respuesta-${Et}`})]})]},Et))]}),gt==="Términos Pareados"&&Array.isArray(Je)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:Je.map((xt,Et)=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:l.jsx(Ia,{content:xt.concepto,context:`preview-pareado-concepto-${Et}`})}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:l.jsx(Ia,{content:xt.definicion,context:`preview-pareado-definicion-${Et}`})})]},xt.id))})]})}),gt==="Desarrollo"&&Array.isArray(Je)&&Je.map((xt,Et)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Et+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-desarrollo-pregunta-${Et}`})]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",l.jsx(Ia,{content:xt.rubrica,context:`preview-desarrollo-rubrica-${Et}`})]})]},Et))]})]},gt):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:pt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},la=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify_between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),l.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(TC,{size:18})," Volver"]})]}),l.jsxs("form",{onSubmit:ct,className:"space-y-6 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ne.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:Wi.map(et=>l.jsx("option",{value:et,children:et},et))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),l.jsx("textarea",{name:"objetivosAprendizaje",value:ne.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),l.jsx("textarea",{name:"contenido",value:ne.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ne.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:et=>D(et.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?wt:Qt).map(et=>{var gt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(gt=ne.estudiantesDestino)==null?void 0:gt.includes(et.nombreCompleto),onChange:()=>be(et.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:et.nombreCompleto,children:et.nombreCompleto})]},et.id)})})]})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:N}),l.jsx("div",{className:"text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[b?l.jsx(G0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]}),ja=()=>{var et,gt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:l.jsx(Ia,{content:M==null?void 0:M.titulo,context:"preview-prueba-titulo"})}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:M==null?void 0:M.instrucciones,context:"preview-prueba-instrucciones"})})]}),(et=M==null?void 0:M.textos)!=null&&et.length?l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),l.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:M.textos.map((Je,xt)=>l.jsxs("li",{children:[l.jsxs("p",{className:"font-semibold",children:[l.jsx(Ia,{content:Je.titulo,context:`preview-texto-titulo-${xt}`}),l.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),l.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:l.jsx(Ia,{content:Je.contenido,context:`preview-texto-contenido-${xt}`})})]},Je.id))})]}):null,(gt=M==null?void 0:M.preguntas)!=null&&gt.length?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),M.preguntas.slice(0,10).map((Je,xt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",l.jsx(Ia,{content:Je.pregunta,context:`preview-pregunta-texto-${xt}`})]}),l.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((Et,bt)=>l.jsx("li",{children:l.jsx(Ia,{content:Et,context:`preview-pregunta-opcion-${xt}-${bt}`})},bt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>J(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:It,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},rn=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(IC,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(et=>{var xt;const gt=[];(xt=et.estudiantesDestino)!=null&&xt.length&&gt.push(`Estudiantes: ${et.estudiantesDestino.length}`);const Je=gt.length?gt.join(" | "):"Estudiantes seleccionados";return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(Ia,{content:et.asignatura,context:`lista-asignatura-${et.id}`})," — ",et.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",dy(et.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>u(et),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},et.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),pr=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(IC,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(et=>l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:l.jsx(Ia,{content:et.titulo,context:`lista-prueba-titulo-${et.id}`})}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",dy(et.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>f(et),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},et.id)):l.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[Nr(),Y?In():M?ja():O?hn():c||d?Pr():z==="pruebas"?g?la():pr():z==="actividades"?h?fs():rn():$r()]})},VXe="actividades_remotas",V8="respuestas_actividades",Ile=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},bq=e=>{const t=Ile(e);return t?t.toISOString():void 0},zXe=e=>{const t=Ile(e);return t?t.toISOString().split("T")[0]:void 0},z8=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:bq(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:zXe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:bq(t.fechaCompletado)||t.fechaCompletado}},y1=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},$Xe=e=>new Promise(t=>setTimeout(t,e)),GXe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await $Xe(s)}else throw a}throw new Error("Max retries exceeded")},KXe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=zt(yt(ft,VXe),gr("fechaCreacion","desc"));return fr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(c=>z8(c)).filter(c=>{var u,d,f,h,p;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(p=c.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const o=y1(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=y1(s,"suscripción a actividades");r==null||r(i)}})},qXe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=zt(yt(ft,V8),Dr("estudianteId","==",e),gr("fechaCompletado","desc"));return fr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const c=z8(o);return console.log(`📄 Respuesta ${o.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const o=y1(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=y1(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),WXe(e,t,r);r==null||r(i)}})},WXe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=zt(yt(ft,V8),Dr("estudianteId","==",e));return fr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>z8(o)).sort((o,c)=>new Date(c.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const o=y1(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=y1(s,"suscripción alternativa a respuestas");r==null||r(i)}})},XXe=async e=>GXe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await vn(yt(ft,V8),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),YXe=.6,JXe=(e,t,r=YXe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},mO=({className:e="w-5 h-5"})=>l.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ZXe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new cs(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(`🤖 Intento ${o} de generar feedback con IA`);const c=tYe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(`⚠️ Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${o}:`,c.message),(i=c.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},eYe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await XXe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await ZXe(t,r);if(s){const{updateDoc:i,doc:o}=await m1(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>qve);return{updateDoc:u,doc:d}},void 0),{db:c}=await m1(async()=>{const{db:u}=await Promise.resolve().then(()=>vee);return{db:u}},void 0);return await i(o(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},yo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Vs=(e,t)=>{if(t&&yo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Vs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Bd=(e,t,...r)=>{if(yo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ui=({content:e,context:t="unknown"})=>{try{const r=Vs(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}};function yq(e){if(console.log("🔍 Normalizando lectura:",e),yo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{yo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>Vs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:Bd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Vs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Bd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Bd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(yo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function wq(e){return console.log("🔍 Normalizando pareados:",e),yo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(yo(t,`pareado-${r}`),{izquierda:Bd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Bd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(yo(t,`pareado-array-${r}`),{izquierda:Bd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Bd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function Eq(e){return console.log("🔍 Normalizando desarrollo:",e),yo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(yo(t,`desarrollo-pregunta-${r}`),{enunciado:Bd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(yo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Bd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const tYe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${Vs(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${Vs(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${Vs(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${Vs(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${Vs(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${Vs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${Vs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},rYe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=S.useState({}),[s,i]=S.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],x=n[p];if(console.log(`🔍 Procesando tipo: ${p}`,g),yo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensión de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,w)=>(yo(y,`quiz-question-${w}`),{pregunta:Bd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,j)=>Vs(_,`quiz-opcion-${w}-${j}`)):[],respuestaCorrecta:Vs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:yq(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],j=_===y.respuestaCorrecta,k=y.puntaje??1;j&&(u+=k),d+=k,f.items.push({pregunta:y.pregunta,respuestaUsuario:Vs(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:j,puntajeObtenido:j?k:0,tipo:p})}),p==="Términos Pareados"){const b=wq(g),y=x||{};b.forEach((w,_)=>{const j=y[_],k=j===w.derecha,I=w.puntaje??1;k&&(u+=I),d+=I,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Vs(j,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:k,puntajeObtenido:k?I:0,tipo:p})})}if(p==="Desarrollo"){const b=Eq(g),y=x||{};b.forEach((w,_)=>{const j=Vs(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:j||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:JXe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:l.jsx(ui,{content:e.asignatura,context:"actividad-asignatura"})}),l.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(ui,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),yo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(yo(h,`render-quiz-question-${p}`),{pregunta:Bd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Vs(g,`render-quiz-opcion-${p}-${x}`)):[],respuestaCorrecta:Vs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),l.jsx("div",{className:"space-y-6",children:f.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ui,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ui,{content:g,context:`quiz-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Comprensión de Lectura":{const f=yq(d);return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),l.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:l.jsx(ui,{content:f.texto,context:"lectura-texto"})}),l.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ui,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ui,{content:g,context:`lectura-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Términos Pareados":{const f=wq(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[p[g],p[x]]=[p[x],p[g]]}return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>l.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[l.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",l.jsx(ui,{content:g.izquierda,context:`pareado-izq-${x}`})]}),l.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:b=>o(u,{...h,[x]:b.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona la pareja —"}),p.map((b,y)=>l.jsx("option",{value:b,children:Vs(b,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=Eq(d),h=n[u]||{};return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),l.jsx("div",{className:"space-y-6",children:f.map((p,g)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",l.jsx(ui,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),l.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>o(u,{...h,[g]:x.target.value})})]},g))}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),l.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:l.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?l.jsx(mO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},nYe=({currentUser:e})=>{var B,R,D;const[t,r]=S.useState(!0),[n,a]=S.useState("list"),[s,i]=S.useState(!1),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState(null),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState("connecting");S.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let O=!1,L=!1,M=!1,J=!1;const V=()=>{(O||M)&&(L||J)&&(M&&J?(w("error"),b("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",O,"Respuestas:",L))},K=KXe(e,G=>{console.log("📋 Actividades recibidas:",G.length),G.forEach((Y,te)=>{console.log(`  ${te+1}. ${Y.asignatura} (ID: ${Y.id})`),yo(Y,`actividad-${te}`)}),c(G),O=!0,V()},G=>{console.error("❌ Error en suscripción de actividades:",G),M=!0,V()}),z=qXe(e.id,G=>{console.log("📝 Respuestas del estudiante recibidas:",G.length),G.forEach((Y,te)=>{var P;console.log(`  ${te+1}. Actividad ${Y.actividadId} - Nota: ${Y.nota} - Fecha: ${Y.fechaCompletado}`),(P=Y.revisionDocente)!=null&&P.completada&&console.log("    ✅ Con revisión docente completada"),yo(Y,`respuesta-${te}`)}),d(G),L=!0,V()},G=>{var Y;console.error("❌ Error en suscripción de respuestas:",G),(Y=G.message)!=null&&Y.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),b("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),J=!0,V()});return()=>{console.log("🧹 Limpiando subscripciones"),K==null||K(),z==null||z()}},[e]),S.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const _=O=>{console.log("🔍 Iniciando actividad:",O.asignatura),h(O),a("activity"),b(null)},j=O=>{console.log("🔍 Viendo resultado:",O.actividadId);const L=o.find(M=>M.id===O.actividadId);L?(h(L),g(O),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},k=S.useCallback(async(O,L)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:O.puntaje,nota:O.nota}),a("result"),i(!0),b(null);const M={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...O,retroalimentacionDetallada:L};console.log("💾 Guardando respuesta...");try{const J=await eYe(M,f,L);console.log("✅ Respuesta completada con ID:",J.id),g(J),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(J){console.error("❌ Error crítico al completar actividad:",J),b("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...M,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),I=S.useMemo(()=>{if(u.length===0)return new Set;const O=new Set(u.map(L=>L.actividadId));return console.log("🎯 IDs completados calculados:",O.size),O},[u]),E=S.useMemo(()=>{if(o.length===0)return[];const O=o.filter(L=>!I.has(L.id));return console.log("⏳ Actividades pendientes:",O.length),O},[o,I]),N=S.useMemo(()=>{if(u.length===0)return[];const O=u.map(L=>{const M=o.find(J=>J.id===L.actividadId);return{...L,asignatura:(M==null?void 0:M.asignatura)||"Actividad no disponible",tipos:(M==null?void 0:M.tipos)||[]}}).sort((L,M)=>new Date(M.fechaCompletado).getTime()-new Date(L.fechaCompletado).getTime());return console.log("📖 Historial preparado:",O.length),O},[u,o]);return t?l.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[l.jsx(mO,{className:"w-8 h-8 text-slate-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),l.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&o.length===0&&u.length===0?l.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[l.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),l.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?l.jsx(rYe,{actividad:f,onComplete:k,currentUser:e}):n==="result"&&p?(console.log("🔍 Renderizando resultado:",p),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),l.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",l.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),l.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",l.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),x&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[l.jsx(mO,{className:"w-8 h-8 text-blue-500"}),l.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),l.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),l.jsx("p",{className:"text-slate-700 mt-1",children:l.jsx(ui,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((B=p.retroalimentacionAI.desafios)==null?void 0:B.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((O,L)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ui,{content:O.pregunta,context:`feedback-desafio-pregunta-${L}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ui,{content:O.explicacionDelError,context:`feedback-desafio-explicacion-${L}`})})]},L))})]}),((D=(R=p.retroalimentacionAI)==null?void 0:R.comentariosDesarrollo)==null?void 0:D.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((O,L)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ui,{content:O.pregunta,context:`feedback-desarrollo-pregunta-${L}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ui,{content:O.retroalimentacionBreve,context:`feedback-desarrollo-retro-${L}`})})]},L))})]})]}),p.retroalimentacionDetallada&&l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),p.retroalimentacionDetallada.items.map((O,L)=>{const M=O.esCorrecta===null,J=M?"border-slate-400 bg-slate-50":O.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=M?"🕓":O.esCorrecta?"✅":"❌";return l.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${J}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[L+1,". ",l.jsx(ui,{content:O.pregunta,context:`feedback-item-pregunta-${L}`})]}),l.jsx("span",{className:"font-bold text-lg",children:V})]}),l.jsxs("div",{className:"mt-2 text-sm pl-4",children:[l.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",l.jsx("span",{className:"font-medium",children:l.jsx(ui,{content:O.respuestaUsuario,context:`feedback-item-respuesta-${L}`})})]}),!M&&!O.esCorrecta&&l.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",l.jsx("span",{className:"font-medium text-green-700",children:l.jsx(ui,{content:O.respuestaCorrecta,context:`feedback-item-correcta-${L}`})})]}),M&&l.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},L)})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&l.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:E.length>0?E.map(O=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ui,{content:O.asignatura,context:`actividad-asignatura-${O.id}`})," - ",O.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",l.jsx(ui,{content:typeof O.plazoEntrega=="string"?O.plazoEntrega:"",context:`actividad-plazo-${O.id}`})]})]}),l.jsx("button",{onClick:()=>_(O),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},O.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),l.jsx("div",{className:"space-y-4",children:N.length>0?N.map(O=>l.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ui,{content:O.asignatura,context:`completada-asignatura-${O.id}`})," - ",O.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(O.fechaCompletado).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",l.jsx("span",{className:`font-bold text-lg ${parseFloat(O.nota)>=4?"text-green-600":"text-red-600"}`,children:O.nota})]}),l.jsx("button",{onClick:()=>j(O),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},O.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},jk="estudiantes_inclusion",aYe="usuarios",Fle=e=>{const t=e.data();return{id:e.id,...t}},sYe=e=>{const t=zt(yt(ft,jk));return fr(t,n=>{const a=n.docs.map(s=>Fle(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},iYe=e=>{const t=zt(yt(ft,aYe));return fr(t,n=>{const a=n.docs.map(s=>Fle(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},oYe=async e=>{try{return(await vn(yt(ft,jk),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},lYe=async(e,t)=>{try{const{id:r,...n}=t,a=sr(ft,jk,e);await pi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},cYe=async e=>{try{const t=sr(ft,jk,e);await za(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},uYe=({estudiantes:e})=>{const t=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=S.useMemo(()=>{const o=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(o).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=S.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:c}},[e]),s=S.useMemo(()=>e.reduce((o,c)=>o+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),l.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),l.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),l.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),l.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),l.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),l.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),l.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]})]})]})},Cq=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=S.useState(""),[a,s]=S.useState(""),[i,o]=S.useState(!1),c=S.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=S.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),l.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),l.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>l.jsx("option",{value:f,children:f},f))]})]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),l.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),l.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&l.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?l.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):l.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>l.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),l.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),l.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},dYe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=S.useState(aN[0]),s=()=>r(e,n);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:aN.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},AYe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=S.useState("intervenciones"),[o,c]=S.useState(e);S.useEffect(()=>c(e),[e]);const[u,d]=S.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=S.useState(f),[g,x]=S.useState({trimestre:"T1",meta:""}),[b,y]=S.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=S.useState(null),[j,k]=S.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[E,N]=S.useState(I),B=()=>{r(o),t()},R=async()=>{var Se;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ne,_e=!1;u?ne=(o.intervenciones||[]).map(me=>me.id===u.id?{...me,...h}:me):(_e=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const Fe=ne.sort((me,Te)=>new Date(Te.fecha).getTime()-new Date(me.fecha).getTime());if(c(me=>({...me,intervenciones:Fe})),_e)try{await b2e({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(Se=a?a(h.responsable):void 0)==null?void 0:Se.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(me){console.error("Error al crear notificación:",me),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}p(f),d(null)},D=ne=>{d(ne),p({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},O=ne=>{window.confirm("¿Eliminar esta intervención?")&&c(_e=>({..._e,intervenciones:(_e.intervenciones||[]).filter(Fe=>Fe.id!==ne)}))},L=ne=>{const{name:_e,value:Fe}=ne.target;c(Se=>({...Se,[_e]:Fe,fechaActualizacionApoyos:new Date().toISOString()}))},M=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};c(_e=>({..._e,metasProgreso:[..._e.metasProgreso||[],ne]})),x({trimestre:"T1",meta:""})},J=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).map(Fe=>Fe.id===ne?{...Fe,cumplida:!Fe.cumplida}:Fe)}))},V=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).filter(Fe=>Fe.id!==ne)}))},K=S.useMemo(()=>{const ne=o.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const _e=ne.filter(me=>me.cumplida).length,Fe=Math.round(_e/ne.length*100),Se=Fe<40?"bg-red-500":Fe<75?"bg-yellow-500":"bg-green-500";return{percent:Fe,color:Se}},[o.metasProgreso]),z=S.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const ne=new Date(o.fechaActualizacionApoyos),_e=new Date;return _e.setMonth(_e.getMonth()-3),ne<_e},[o.fechaActualizacionApoyos]),G=()=>{if(!b.titulo.trim()||!b.fecha)return;const ne={...b,id:crypto.randomUUID(),resuelta:!1};c(_e=>({..._e,alertas:[..._e.alertas||[],ne].sort((Fe,Se)=>new Date(Fe.fecha).getTime()-new Date(Se.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},Y=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).map(Fe=>Fe.id===ne?{...Fe,resuelta:!Fe.resuelta}:Fe)}))},te=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).filter(Fe=>Fe.id!==ne)}))},P=ne=>{ne.target.files&&ne.target.files[0]&&_(ne.target.files[0])},H=()=>{if(!w)return;k(!0);const ne=new FileReader;ne.readAsDataURL(w),ne.onloadend=()=>{const _e={id:crypto.randomUUID(),nombre:w.name,url:ne.result,fechaSubida:new Date().toISOString()};c(Fe=>({...Fe,archivos:[_e,...Fe.archivos||[]]})),_(null),k(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),k(!1)}},X=ne=>{window.confirm("¿Eliminar este archivo?")&&c(_e=>({..._e,archivos:(_e.archivos||[]).filter(Fe=>Fe.id!==ne)}))},Z=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(_e=>({..._e,reuniones:[ne,..._e.reuniones||[]].sort((Fe,Se)=>new Date(Se.fecha).getTime()-new Date(Fe.fecha).getTime())})),N(I)},ae=ne=>{window.confirm("¿Eliminar este registro de reunión?")&&c(_e=>({..._e,reuniones:(_e.reuniones||[]).filter(Fe=>Fe.id!==ne)}))},le=()=>{var be,De,Re;const ne=new vr("p","mm","a4"),_e=20,Fe=ne.internal.pageSize.getWidth(),Se=ne.internal.pageSize.getHeight();let me=_e;const Te=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Módulo Inclusión",_e,15)};Te(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(o.nombre,_e,me+10),me+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${o.curso}`,_e,me),ne.text(`Dificultad: ${o.dificultad}`,_e,me+6),me+=15;const Me=qe=>{me+qe>Se-_e&&(ne.addPage(),Te(ne),me=_e)},We=qe=>{Me(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(qe,_e,me),me+=10};if((be=o.intervenciones)!=null&&be.length&&(We("Historial de Intervenciones"),bo(ne,{startY:me,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>Te(ne)}),me=ne.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){Me(30),We("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=ne.splitTextToSize(qe,Fe-_e*2);ne.text(Ze,_e,me),me+=Ze.length*5+10}(De=o.metasProgreso)!=null&&De.length&&(Me(30),We("Metas de Progreso"),bo(ne,{startY:me,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Te(ne)}),me=ne.lastAutoTable.finalY+10),(Re=o.reuniones)!=null&&Re.length&&(We("Reuniones con Apoderados"),bo(ne,{startY:me,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>Te(ne)})),ne.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),l.jsxs("select",{value:h.responsable,onChange:ne=>p(_e=>({..._e,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),l.jsx("textarea",{value:h.accion,onChange:ne=>p(_e=>({..._e,accion:ne.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:ne=>p(_e=>({..._e,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[u&&l.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),l.jsx("button",{onClick:R,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),l.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>D(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),l.jsx("button",{onClick:()=>O(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ne.id)),(!o.intervenciones||o.intervenciones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"📋"}),l.jsx("p",{children:"No hay intervenciones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),z&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",K.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${K.color} h-4 rounded-full transition-all duration-500`,style:{width:`${K.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:ne=>x(_e=>({..._e,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:ne=>x(_e=>({..._e,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:M,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>J(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),l.jsx("button",{onClick:()=>V(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ne.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),l.jsx("p",{children:"No hay metas definidas"}),l.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),fe=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:b.titulo,onChange:ne=>y(_e=>({..._e,titulo:ne.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:ne=>y(_e=>({..._e,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:G,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>Y(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),l.jsx("button",{onClick:()=>te(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ne.id)),(!o.alertas||o.alertas.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),l.jsx("p",{children:"No hay alertas programadas"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:P,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),l.jsx("button",{onClick:H,disabled:!w||j,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:j?"Subiendo...":"Subir"}),w&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(ne=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:["📎 ",ne.nombre]}),l.jsx("button",{onClick:()=>X(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ne.id)),(!o.archivos||o.archivos.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"📁"}),l.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Ie=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:E.motivo,onChange:ne=>N(_e=>({..._e,motivo:ne.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:E.acuerdos,onChange:ne=>N(_e=>({..._e,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:E.asistentes,onChange:ne=>N(_e=>({..._e,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[l.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),l.jsx("button",{onClick:()=>ae(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ne.id)),(!o.reuniones||o.reuniones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"👥"}),l.jsx("p",{children:"No hay reuniones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>l.jsx("button",{onClick:()=>i(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&ce(),s==="reuniones"&&Ie(),s==="alertas"&&fe()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),l.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},_q=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(!0),[o,c]=S.useState(null),[u,d]=S.useState(null),[f,h]=S.useState(""),[p,g]=S.useState(""),[x,b]=S.useState(""),[y,w]=S.useState("dashboard");S.useEffect(()=>{i(!0);const R=sYe(O=>{r(O),i(!1)}),D=iYe(O=>a(O));return()=>{R(),D()}},[]);const _=async(R,D)=>{if(t.some(L=>L.nombre===R.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const O={nombre:R.nombreCompleto,curso:R.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await oYe(O),alert(`✅ ${R.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},j=async R=>{try{await lYe(R.id,R)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},k=async R=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await cYe(R),(o==null?void 0:o.id)===R&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},I=R=>{const D=N;if(D.length===0){alert("No hay datos para exportar.");return}const O=D.map(L=>{var M;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N° Intervenciones":((M=L.intervenciones)==null?void 0:M.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(J=>!J.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(J=>J.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"Última Actualización":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(R==="xlsx"){const L=yl.json_to_sheet(O),M=yl.book_new();yl.book_append_sheet(M,L,"Estudiantes_Inclusion"),kk(M,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const L=new vr;L.text("Listado de Estudiantes - Programa de Inclusión",14,15),bo(L,{startY:20,head:[Object.keys(O[0])],body:O.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=S.useMemo(()=>n.filter(R=>{var D;return R.profile===Wt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(R.curso||""))||e.profile===Wt.SUBDIRECCION)}).filter(R=>!t.some(D=>D.nombre===R.nombreCompleto)),[n,t,e]),N=S.useMemo(()=>t.filter(R=>R.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||R.curso===p)&&(x===""||R.dificultad===x)).sort((R,D)=>R.nombre.localeCompare(D.nombre)),[t,f,p,x]),B=S.useMemo(()=>n.filter(R=>R.profile===Wt.PROFESORADO).map(R=>R.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),l.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),l.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):l.jsxs(l.Fragment,{children:[y==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx(uYe,{estudiantes:t}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),l.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),l.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(R=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[R.curso," - ",R.dificultad]})]}),l.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},R.id)),t.length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),l.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),l.jsx(Cq,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),y==="lista"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",N.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),l.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),l.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:R=>h(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),l.jsxs("select",{value:p,onChange:R=>g(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),l.jsxs("select",{value:x,onChange:R=>b(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),aN.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-blue-600",children:N.length}),l.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:t.length}),l.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((R,D)=>R+(D.alertas||[]).filter(O=>!O.resuelta).length,0)}),l.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(R=>R.curso)).size}),l.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[N.map(R=>{var D;return l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),(R.alertas||[]).filter(O=>!O.resuelta).length>0&&l.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(R.alertas||[]).filter(O=>!O.resuelta).length," alertas"]})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[R.curso," - ",R.dificultad]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[((D=R.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),l.jsxs("span",{children:[(R.metasProgreso||[]).filter(O=>O.cumplida).length," metas cumplidas"]}),R.fechaActualizacionApoyos&&l.jsxs("span",{children:["Últ. actualización: ",new Date(R.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>k(R.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},R.id)}),N.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),l.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||x)&&l.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),l.jsx(Cq,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),u&&l.jsx(dYe,{student:u,onClose:()=>d(null),onConfirm:(R,D)=>{_(R,D),d(null)}}),o&&l.jsx(AYe,{student:o,onClose:()=>c(null),onSave:j,profesores:B})]})},Ole="asistencia_dual",fYe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},hYe=(e,t)=>{const r=zt(yt(ft,Ole),Dr("emailEstudiante","==",e),gr("fechaHora","desc"));return fr(r,a=>{const s=a.docs.map(i=>fYe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},mYe=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await vn(yt(ft,Ole),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},pYe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),gYe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),xYe=({currentUser:e})=>{const[t,r]=S.useState(e.curso||""),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(!0),[u,d]=S.useState(null);S.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=hYe(e.email,p=>{a(p),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await mYe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),$p.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?l.jsx(pYe,{}):l.jsx(gYe,{}),h.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},vYe=async()=>{try{console.log("🔍 Debugging users collection...");const e=yt(Tr,"users"),t=zt(e,Fd(10)),r=await Qn(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},bYe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=ir.fromDate(r),s=ir.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=yt(Tr,f);try{const p=zt(h,Dr("fechaHora",">=",a),Dr("fechaHora","<=",s)),g=await Qn(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const b of g)try{const y=zt(h,Dr(b,">=",a),Dr(b,"<=",s)),w=await Qn(y);o[f]={exists:!0,hasDateField:b,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const b=zt(h,gr("__name__"),Fd(5)),y=await Qn(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},yYe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=ir.fromDate(a),o=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((p,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const b=x.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const p=yt(Tr,h),g=zt(p,Dr("fechaHora",">=",i),Dr("fechaHora","<=",o),gr("fechaHora","desc")),x=fr(g,b=>{console.log(`📋 ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),b.docs.forEach((w,_)=>{var j;if(_<5){const k=w.data();let I;(j=k.fechaHora)!=null&&j.toDate?I=k.fechaHora.toDate():typeof k.fechaHora=="string"?I=new Date(k.fechaHora):I=new Date,console.log(`   ${_+1}. ${k.emailEstudiante} - ${I.toLocaleString()} - ${k.tipo}`),console.log(`      📅 Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),b.forEach(w=>{var E;const _=w.data();let j;(E=_.fechaHora)!=null&&E.toDate?j=_.fechaHora.toDate():typeof _.fechaHora=="string"?j=new Date(_.fechaHora):_.fechaHora instanceof Date?j=_.fechaHora:_.fechaHora?j=new Date(_.fechaHora):j=new Date;const k={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:j,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},I=`${h}_${w.id}`;u.set(I,k)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},b=>{console.warn(`⚠️ Error con filtro en ${h}:`,b),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=zt(p,Fd(200)),w=fr(y,j=>{if(console.log(`📋 ${h} (sin filtro): ${j.size} documentos`),j.size>0){const I=j.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(I)),console.log("📄 Primer documento:",I)}const k=j.docs.filter(I=>{var B;const E=I.data();if(!E.fechaHora)return!1;let N;return(B=E.fechaHora)!=null&&B.toDate?N=E.fechaHora.toDate():typeof E.fechaHora=="string"?N=new Date(E.fechaHora):E.fechaHora instanceof Date?N=E.fechaHora:N=new Date(E.fechaHora),N>=a&&N<=s});console.log(`📅 ${h}: ${k.length} registros después de filtro manual`),k.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),k.forEach(E=>{var O;const N=E.data();let B;(O=N.fechaHora)!=null&&O.toDate?B=N.fechaHora.toDate():typeof N.fechaHora=="string"?B=new Date(N.fechaHora):N.fechaHora instanceof Date?B=N.fechaHora:B=new Date(N.fechaHora);const R={id:E.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:B,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},D=`${h}_${E.id}`;u.set(D,R)}),d())}),_=c.findIndex(j=>j===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(p){console.warn(`❌ Error configurando ${h}:`,p)}}),()=>{c.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},wYe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=o.filter(d=>d.profile===Wt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=yt(Tr,o),u=zt(c),d=fr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,x,b,y;try{const w=p.data(),_=w.email||w.userEmail||w.mail||w.correo||"",j=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",k=w.curso||w.course||w.class||w.grade||"";let I=w.profile||w.role||w.tipo||w.userType||Wt.ESTUDIANTE;if(typeof I=="string"){const B=I.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?I=Wt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?I=Wt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?I=Wt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(I=Wt.COORDINADOR_TP)}const E={id:p.id,email:_,nombreCompleto:j,curso:k,profile:I,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(b=w.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(w.ultimaActividad)||new Date,...w},N=`${o}_${p.id}`;a.set(N,E)}catch(w){console.warn(`Error procesando documento ${p.id} en ${o}:`,w)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},EYe=(e,t)=>{try{console.log("Setting up users subscription...");const r=yt(Tr,"users"),n=zt(r);return fr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const b=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Wt.ESTUDIANTE;if(typeof _=="string"){const k=_.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?_=Wt.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?_=Wt.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?_=Wt.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(_=Wt.COORDINADOR_TP)}const j={id:d.id,email:b,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(p=x.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(x.ultimaActividad)||new Date,...x};i.push(j)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===Wt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},u_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},CYe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),_Ye=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),NYe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(new Date),[d,f]=S.useState("todos"),[h,p]=S.useState("");S.useEffect(()=>{s(!0),o(null);const I=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",I,"Mes:",E);let N=!1,B=!1;const R=()=>{N&&B&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const O=yt(Tr,"asistencia_dual"),L=zt(O,Fd(5)),M=await Qn(L);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${M.size}`),M.size>0)M.docs.forEach((J,V)=>{const K=J.data();console.log(`   ${V+1}. ${J.id.slice(0,8)} - ${K.emailEstudiante} - ${K.tipo}`),console.log("      Fecha original:",K.fechaHora),console.log("      Todos los campos:",Object.keys(K))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const J=["asistenciaEmpresa","asistencia_empresa"];for(const V of J)try{const K=yt(Tr,V),z=zt(K,Fd(3)),G=await Qn(z);if(console.log(`📋 ${V}: ${G.size} documentos`),G.size>0){const Y=G.docs[0].data();console.log("   Estructura:",Object.keys(Y)),console.log("   Email:",Y.emailEstudiante||Y.email),console.log("   Fecha:",Y.fechaHora||Y.fecha)}}catch(K){console.log(`❌ ${V}: ${K instanceof Error?K.message:"Error"}`)}}}catch(O){console.error("❌ Error en prueba directa:",O),O.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):O.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),bYe(I,E).then(O=>{console.log("🔍 Debug info for collections:",O),Object.entries(O).forEach(([L,M])=>{if(M.exists&&M.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${L.toUpperCase()}:`),console.log(`   📊 Total documentos: ${M.totalDocs}`),console.log(`   📅 Documentos del período: ${M.count}`),console.log(`   🔑 Campo de fecha: ${M.hasDateField}`),M.sampleDoc){console.log("   📄 Documento ejemplo:",M.sampleDoc);const J=M.sampleDoc,V=J.emailEstudiante||J.email||J.userEmail||J.correo||"NO ENCONTRADO",K=J.tipo||J.type||J.action||J.tipoRegistro||"NO ENCONTRADO",z=J.fechaHora||J.fecha||J.timestamp||J.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${V}`),console.log(`   📝 Tipo registro: ${K}`),console.log(`   📅 Fecha: ${z}`),console.log("   🗂️ Todos los campos:",Object.keys(J))}M.filteredDocs&&M.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",M.filteredDocs.length),M.filteredDocs.forEach((J,V)=>{V<3&&console.log(`      ${V+1}. ID: ${J.id}`,J.data)}))}else M.exists?console.log(`⚪ Colección ${L}: vacía`):console.log(`❌ Colección ${L}: no existe`)})}).catch(O=>{console.error("Debug error:",O)}),vYe().then(O=>{console.log("🔍 Debug info for users:",O),(!O.exists||O.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async M=>{var J;try{const V=yt(Tr,M),K=zt(V,Fd(5)),z=await Qn(K);z.size>0?(console.log(`✅ Encontrada colección alternativa: ${M} con ${z.size} documentos`),console.log("Documento muestra:",(J=z.docs[0])==null?void 0:J.data())):console.log(`❌ Colección ${M}: vacía`)}catch{console.log(`❌ Colección ${M}: no existe`)}}))}).catch(O=>{console.error("Users debug error:",O)});try{console.log("Configurando suscripción a asistencia...");const O=yYe(I,E,M=>{if(console.log("✅ Received registros:",M.length),M.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",M[0]);const J=[...new Set(M.map(te=>te.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",J);const V=[...new Set(M.map(te=>te.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",V);const K=M.reduce((te,P)=>{const H=new Date(P.fechaHora).getDate();return te[H]||(te[H]=[]),te[H].push(P),te},{});console.log("📅 Registros por día del mes:",Object.keys(K).map(te=>({dia:parseInt(te),cantidad:K[parseInt(te)].length})));const z=r.map(te=>te.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",z);const G=J.filter(te=>z.includes(te)),Y=J.filter(te=>!z.includes(te));console.log("✅ Emails que coinciden:",G),console.log("❌ Emails que NO coinciden:",Y)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(M),N=!0,R()},M=>{console.error("❌ Error fetching asistencia:",M),o("Error al cargar datos de asistencia: "+M.message),N=!0,R()});console.log("Configurando suscripción a usuarios...");const L=wYe(M=>{if(console.log("✅ Received users (multi-collection):",M.length),M.length>0){console.log("Sample user:",M[0]);const J=M.filter(V=>V.profile===Wt.ESTUDIANTE&&V.curso);console.log("Dual students found:",J.length),J.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(M),B=!0,R()},M=>{console.error("❌ Error fetching users (multi-collection):",M),console.log("🔄 Intentando con función original de usuarios...");const J=EYe(V=>{console.log("✅ Received users (fallback):",V.length),n(V),B=!0,R()},V=>{console.error("❌ Error en fallback también:",V),o("Error al cargar estudiantes: "+M.message),B=!0,R()})});return()=>{console.log("Limpiando suscripciones..."),O&&O(),L&&L()}}catch(O){console.error("❌ Error setting up subscriptions:",O),o("Error al inicializar conexiones: "+(O instanceof Error?O.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:b}=S.useMemo(()=>{const I=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(I,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:I}},[c]),y=S.useMemo(()=>{let I=r.filter(E=>E.profile===Wt.ESTUDIANTE&&E.curso&&$p.includes(u_(E.curso)));if(d!=="todos"&&(I=I.filter(E=>u_(E.curso||"")===d)),h&&(I=I.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(R=>R.emailEstudiante).filter(Boolean))],N=I.map(R=>R.email),B=E.filter(R=>!N.includes(R));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const D=B.map(O=>{const L=e.find(M=>M.emailEstudiante===O);return{id:O,email:O,nombreCompleto:(L==null?void 0:L.nombreEstudiante)||O.split("@")[0],curso:(L==null?void 0:L.curso)||"3ºC",profile:Wt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(O=>{const L=d==="todos"||u_(O.curso)===d,M=!h||O.nombreCompleto.toLowerCase().includes(h.toLowerCase());return L&&M&&$p.includes(u_(O.curso))});I=[...I,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${I.length}`),I.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),I.sort((E,N)=>E.nombreCompleto.localeCompare(N.nombreCompleto))},[r,d,h,e]),w=S.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const I=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),I):(e.forEach((E,N)=>{const B=E.emailEstudiante;if(!B)return;let R;if(E.fechaHora instanceof Date)R=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)R=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")R=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const D=R.getDate(),O=R.getMonth(),L=R.getFullYear();N<3&&console.log(`📅 Registro ${N+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:R.toLocaleString(),año:L,mes:O,día:D}),I.has(B)||I.set(B,new Map);const M=I.get(B);M.has(D)||M.set(D,{});const J=M.get(D);E.tipo==="Entrada"?(!J.entrada||R<new Date(J.entrada.fechaHora))&&(J.entrada=E):E.tipo==="Salida"&&(!J.salida||R>new Date(J.salida.fechaHora))&&(J.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:I.size,estudiantes:Array.from(I.keys()),registrosPorEstudiante:Array.from(I.entries()).map(([E,N])=>({email:E,dias:Array.from(N.keys()),totalRegistros:Array.from(N.values()).reduce((B,R)=>B+(R.entrada?1:0)+(R.salida?1:0),0)}))}),I)},[e]),_=I=>{u(E=>{const N=new Date(E);return N.setMonth(N.getMonth()+I),N})},j=I=>{I!=null&&I.latitud&&(I!=null&&I.longitud)&&window.open(`https://www.google.com/maps?q=${I.latitud},${I.longitud}`,"_blank")},k=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${b}`}),l.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:d,onChange:I=>f(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),$p.map(I=>l.jsx("option",{value:I,children:I},I))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:I=>p(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(I,E)=>{const B=new Date(b,c.getMonth(),E+1).getDay(),R=B===0||B===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:k[B]}),l.jsx("div",{children:E+1})]},E)})]})}),l.jsx("tbody",{children:y.length>0?y.map(I=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:I.nombreCompleto}),Array.from({length:g},(E,N)=>{var L;const B=N+1,R=(L=w.get(I.email))==null?void 0:L.get(B),D=new Date(b,c.getMonth(),N+1),O=D.getDay()===0||D.getDay()===6;return I.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:I.email,day:B,hasDataForStudent:w.has(I.email),studentDayRecords:R,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(I.email)?Array.from(w.get(I.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${O?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(R==null?void 0:R.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return j((M=R.entrada)==null?void 0:M.ubicacion)},children:[l.jsx(CYe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(R==null?void 0:R.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return j((M=R.salida)==null?void 0:M.ubicacion)},children:[l.jsx(_Ye,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},I.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},Bk="evaluaciones_formativas",Tk="calificaciones_formativas",$8="trabajos_grupales_formativos",SYe="usuarios",G8=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},kYe=(e,t,r)=>{const n=zt(yt(ft,Bk),Dr("curso","==",e),Dr("asignatura","==",t),gr("fecha","asc"));return fr(n,a=>{r(a.docs.map(s=>G8(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},jYe=async(e,t)=>{const r=Dg(ft),n=sr(yt(ft,Bk));r.set(n,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const a=sr(ft,Tk,n.id);return r.set(a,t),await r.commit(),n.id},BYe=async(e,t)=>{const r=sr(ft,Bk,e);await pi(r,t,{merge:!0})},TYe=async e=>{const t=Dg(ft);t.delete(sr(ft,Bk,e)),t.delete(sr(ft,Tk,e)),await t.commit()},IYe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=sr(ft,Tk,n);return fr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},FYe=async(e,t)=>{const r=sr(ft,Tk,e);await pi(r,t,{merge:!0})},OYe=(e,t,r)=>{const n=zt(yt(ft,$8),Dr("curso","==",e),Dr("asignatura","==",t),gr("fechaPresentacion","desc"));return fr(n,a=>{r(a.docs.map(s=>G8(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},DYe=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await vn(yt(ft,$8),t)},PYe=async(e,t)=>{const r=sr(ft,$8,e);await pi(r,t,{merge:!0})},RYe=e=>{const t=zt(yt(ft,SYe));return fr(t,r=>{e(r.docs.map(n=>G8(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Dle=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},mv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Ple=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},LYe=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Ple(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),MYe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Ple(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:mv[s]||mv.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},UYe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState(!0),b=S.useMemo(()=>r.filter(N=>N.profile===Wt.ESTUDIANTE&&Dle(N.curso||"")===e).map(N=>N.nombreCompleto).sort((N,B)=>N.localeCompare(B)),[r,e]);S.useEffect(()=>{x(!0);const N=kYe(e,t,B=>{s(B);const R=B.map(O=>O.id),D=IYe(R,O=>{o(L=>({...L,...O}))});return x(!1),()=>D()});return()=>N()},[e,t]);const y=N=>{const{name:B,value:R}=N.target;d?f(D=>D?{...D,[B]:R}:null):u(D=>({...D,[B]:R}))},w=async N=>{if(N.preventDefault(),p(null),!c.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},R=b.reduce((D,O)=>(D[O]="trabajado",D),{});try{await jYe(B,R),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluación.")}},_=(N,B)=>{var L;const R=((L=i[N])==null?void 0:L[B])||"trabajado";let D;R==="trabajado"?D="no trabajado":R==="no trabajado"?D="ausente":D="trabajado";const O={...i,[N]:{...i[N]||{},[B]:D}};o(O),FYe(N,{[B]:D}).catch(M=>{console.error("Error updating grade:",M)})},j=N=>f(N),k=async()=>{if(d)try{await BYe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(N){console.error(N),p("No se pudo guardar la edición.")}},I=async N=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await TYe(N)}catch(B){console.error(B),p("No se pudo eliminar la evaluación.")}},E=S.useCallback(N=>{if(a.length===0)return"-";let B=0,R=0;return a.forEach(D=>{var L;const O=(L=i[D.id])==null?void 0:L[N];O==="trabajado"?(B+=7,R++):O==="no trabajado"&&(B+=2,R++)}),R===0?"-":(B/R).toFixed(1)},[i,a]);return g?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(N=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===N.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:k,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:N.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:N.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>j(N),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>I(N.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},N.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(N=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:N}),a.map(B=>{var O;const R=(O=i[B.id])==null?void 0:O[N];let D;return R==="trabajado"?D=mv[t]||mv.Default:R==="no trabajado"?D="❌":R==="ausente"?D="A":D=mv[t]||mv.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>_(B.id,N),className:`text-3xl transition-opacity duration-200 ${R==="trabajado"?"opacity-100":R==="no trabajado"?"opacity-40":R==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},B.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(N)})]},N))})]})})]})},QYe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=S.useState({}),[h,p]=S.useState(2),g=S.useMemo(()=>r.filter(j=>j.profile===Wt.ESTUDIANTE&&Dle(j.curso||"")===e).sort((j,k)=>j.nombreCompleto.localeCompare(k.nombreCompleto)),[r,e]);S.useEffect(()=>{const j=OYe(e,t,s);return()=>j()},[e,t]),S.useEffect(()=>{if(i){const j={};i.grupos.forEach(k=>{k.integrantes.forEach(I=>{j[I.nombre]={groupNumber:String(k.numero),role:I.rol||""}})}),f(j)}else f({})},[i]);const x=async j=>{if(j.preventDefault(),!c.nombre.trim())return;const k={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await DYe(k),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const j=new Map;for(const I of g){const E=d[I.nombreCompleto];if(E&&E.groupNumber){const N=parseInt(E.groupNumber,10);isNaN(N)||(j.has(N)||j.set(N,[]),j.get(N).push({nombre:I.nombreCompleto,rol:E.role||""}))}}const k=Array.from(j.entries()).map(([I,E])=>({numero:I,integrantes:E})).sort((I,E)=>I.numero-E.numero);try{await PYe(i.id,{grupos:k}),alert("Grupos guardados con éxito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const j=[...g].sort(()=>Math.random()-.5),k={};j.forEach((I,E)=>{var N;k[I.nombreCompleto]={groupNumber:String(E%h+1),role:((N=d[I.nombreCompleto])==null?void 0:N.role)||""}}),f(k)},w=(j,k,I)=>{f(E=>({...E,[j]:{...E[j]||{groupNumber:"",role:""},[k]:I}}))},_=S.useMemo(()=>{const j=new Map;return Object.entries(d).forEach(([k,I])=>{I.groupNumber&&(j.has(I.groupNumber)||j.set(I.groupNumber,[]),j.get(I.groupNumber).push({nombre:k,rol:I.role}))}),Array.from(j.entries()).sort((k,I)=>parseInt(k[0])-parseInt(I[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:h,onChange:j=>p(parseInt(j.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:g.map(j=>{var k;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:j.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((k=d[j.nombreCompleto])==null?void 0:k.groupNumber)||"",onChange:I=>w(j.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},j.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([j,k])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",j]}),l.jsx("ul",{className:"space-y-2",children:k.map(I=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:I.nombre}),l.jsxs("select",{value:I.rol||"",onChange:E=>w(I.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),wee.map(E=>l.jsx("option",{value:E,children:E},E))]})]},I.nombre))})]},j))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:j=>u({...c,nombre:j.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:j=>u({...c,fecha:j.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(j=>l.jsxs("button",{onClick:()=>o(j),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",j.fechaPresentacion]})]},j.id))]})]})},HYe=({currentUser:e})=>{const[t,r]=S.useState("calificaciones"),[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState([]),[u,d]=S.useState(!0);S.useEffect(()=>{d(!0);const x=RYe(b=>{c(b),d(!1)});return()=>x()},[]);const f=S.useMemo(()=>e.cursos||[],[e.cursos]),h=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:x,label:b})=>l.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(LYe,{cursos:f,onSelect:a});if(!s)return l.jsx(MYe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(UYe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(QYe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:g()})]})};function VYe(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function zYe(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function $Ye(e,t){var i;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=VYe(e.detallesObservacion);let o=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?o+=h:c+=h}),r.stats.min_interaccion=o,r.stats.min_explicacion=c}const n=new Map;let a=0;(i=e.detallesObservacion)==null||i.forEach(o=>{zYe(o.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=o.accionesDocente.length}),n.forEach((o,c)=>{const u=a>0?o/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:o}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((o,c)=>o+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,o],[,c])=>c-o);return r.summary.fortalezas=s.slice(0,3).map(([o])=>{switch(o){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${o.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([o])=>{switch(o){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${o.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(o=>o.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":o.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':o.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const GYe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,p=f.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),k=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+k},0)/f.length;const b=f.filter(y=>{var w,_,j;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((j=y.retroalimentacion)==null?void 0:j.foco)}).length;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:l.jsx(Dd,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:l.jsx(jp,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(ec,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:l.jsx(Xi,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:b})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(Mu,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),l.jsx("div",{className:"space-y-2",children:Object.entries(p).map(([y,w])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(Dw,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),l.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(_=>_.id===y.target.value);i(w||null)},children:[l.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>l.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&l.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await $Ye(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:o,children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Dw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),l.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),l.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),l.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[l.jsx(Xi,{className:"w-4 h-4"})," Fortalezas"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[l.jsx(Zv,{className:"w-4 h-4"})," Áreas de Mejora"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&l.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[l.jsx(Od,{className:"w-4 h-4"})," Alertas"]}),l.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>l.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[l.jsx(lN,{className:"w-4 h-4"})," Recomendaciones"]}),l.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>l.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(Hd,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),l.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(lN,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),l.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return l.jsxs("tr",{className:"border-t dark:border-slate-700",children:[l.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),l.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[l.jsx(Xi,{className:"w-3 h-3"})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[l.jsx(Zv,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Rle=NP(),fE="acompanamientos",Im="ciclos_opr",Fm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Lle=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},KYe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Lle(r);return`videos_opr/${n}/${a}/${s}`},qYe=async(e,t,r)=>{try{if(!K6.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=KYe(d,f,h)}else{const d=Date.now(),f=Lle(e.name);s=`videos_opr/general/${d}_${f}`}const o=L2(Rle,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:K6.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=dbe(o,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",p=>{const g=p.bytesTransferred/p.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},p=>{let g="Error desconocido durante la subida.";switch(p==null?void 0:p.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:p!=null&&p.message&&(g=p.message);break}f(new Error(g))},async()=>{try{const p=await C4(u.snapshot.ref);d(p)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},K8=async e=>{try{const t=L2(Rle,e),{items:r,prefixes:n}=await Abe(t);await Promise.all(r.map(a=>fbe(a))),await Promise.all(n.map(a=>K8(a.fullPath)))}catch{}},WYe=async()=>{try{const e=zt(yt(ft,fE),gr("fecha","desc"));return(await Qn(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Fm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},XYe=async e=>{try{const t={...e,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},r=await vn(yt(ft,fE),t);return{...e,id:r.id,fecha:Fm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},YYe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await Kc(sr(ft,fE,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},JYe=async e=>{try{const t=zt(yt(ft,Im),Dr("acompanamientoId","==",e)),r=await Qn(t),n=Dg(ft);r.forEach(a=>n.delete(sr(ft,Im,a.id))),await n.commit(),await K8(`videos_opr/${e}`),await za(sr(ft,fE,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},Nq=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const n=await vn(yt(ft,Im),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Fm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},ZYe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=ir.now(),await Kc(sr(ft,Im,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},eJe=async e=>{try{const t=zt(yt(ft,Im),Dr("acompanamientoId","==",e),gr("fecha","desc"));return(await Qn(t)).docs.map(a=>{var o;const s=a.data(),i={id:a.id,...s,fecha:Fm(s==null?void 0:s.fecha)};return(o=s==null?void 0:s.seguimiento)!=null&&o.fecha&&(i.seguimiento={...s.seguimiento,fecha:Fm(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},tJe=async()=>{try{const e=zt(yt(ft,Im),Dr("acompanamientoId","==",""),gr("fecha","desc"));return(await Qn(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:Fm(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:Fm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},Sq=async e=>{try{const t=await Og(sr(ft,Im,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await K8(`videos_opr/${n}/${e}`),await za(sr(ft,Im,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},rJe=async e=>{try{const t=zt(yt(ft,fE),Dr("docente","==",e),gr("fecha","desc"));return(await Qn(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Fm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},nJe=async e=>{try{const t=zt(yt(ft,"rubricas_personalizadas"),Dr("docente","==",e)),r=await Qn(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},aJe=async()=>await Cle(),sJe=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:i="video/mp4,video/quicktime,video/avi,video/mov",error:o,progress:c=0,allowLink:u=!1})=>{const[d,f]=S.useState(!1),[h,p]=S.useState(!1),[g,x]=S.useState(""),b=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),f(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const N=E.dataTransfer.files[0];j(N)}},_=E=>{if(E.target.files&&E.target.files[0]&&!s){const N=E.target.files[0];j(N)}},j=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},k=()=>o?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),p(!1),x("")}};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&l.jsx("button",{type:"button",onClick:()=>p(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx(Xi,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),l.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:l.jsx(Eo,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":o?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(b))==null?void 0:E.click())},children:[l.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):o?l.jsxs("div",{className:"text-center",children:[l.jsx(Od,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(U2,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),l.jsx("input",{id:b,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:i,style:{display:"none"}})]}),s&&l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:`${k()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),o&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[l.jsx(Od,{className:"w-4 h-4 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})]})]})]})},iJe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=S.useState(!1),[o,c]=S.useState({}),[u,d]=S.useState({}),[f,h]=S.useState({}),[p,g]=S.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=S.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:p.curso||"",profesor:p.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,p]),[b,y]=S.useState(t||x);S.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=L=>{const{name:M,value:J}=L.target,V=M.split(".");V.length>1?y(K=>{const z=JSON.parse(JSON.stringify(K));let G=z;for(let Y=0;Y<V.length-1;Y++)G=G[V[Y]];return G[V[V.length-1]]=J,z}):y(K=>({...K,[M]:J}))},_=(L,M,J)=>{y(V=>({...V,detallesObservacion:V.detallesObservacion.map(K=>K.id===L?{...K,[M]:J}:K)}))},j=()=>{const L=b.detallesObservacion[b.detallesObservacion.length-1],M=L&&parseInt(L.minuto.split("-")[1],10)||0,J=`${M+1}-${M+5}`;y(V=>({...V,detallesObservacion:[...V.detallesObservacion,{id:`row_${Date.now()}`,minuto:J,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},k=L=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(J=>J.id!==L)}))},I=async(L,M)=>{h(J=>({...J,[L]:null})),c(J=>({...J,[L]:!0})),d(J=>({...J,[L]:0}));try{const J=Date.now(),V=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),K=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",z=b.id?b.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",G=`videos_opr/${K}/${z}/${J}_${V}`,Y=await qYe(M,G,te=>{d(P=>({...P,[L]:te}))});E(L,Y),d(te=>({...te,[L]:100}))}catch(J){const V=(J==null?void 0:J.message)||"Error desconocido al subir el archivo";h(K=>({...K,[L]:V})),alert(`Error al subir el video: ${V}`)}finally{c(J=>({...J,[L]:!1})),setTimeout(()=>{d(J=>({...J,[L]:0}))},2e3)}},E=(L,M)=>{const J=L.split(".");J.length>1?y(V=>{const K=JSON.parse(JSON.stringify(V));let z=K;for(let G=0;G<J.length-1;G++)z=z[J[G]];return z[J[J.length-1]]=M,K}):y(V=>({...V,[L]:M}))},N=L=>{const M=L.split(".");M.length>1?y(J=>{const V=JSON.parse(JSON.stringify(J));let K=V;for(let z=0;z<M.length-1;z++)K=K[M[z]];return K[M[M.length-1]]="",V}):y(J=>({...J,[L]:""})),h(J=>({...J,[L]:null})),d(J=>({...J,[L]:0}))},B=async(L,M,J)=>{if(!J||!J.trim())return J;const V=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${M}):

"""${J}"""`;try{return(await L.generateContent(V)).response.text()}catch(K){return console.error(`Error improving text for ${M}:`,K),J}},R=async()=>{var L,M;i(!0);try{const J="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new cs(J).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=b.retroalimentacion,G=b.planificacion,Y=await Promise.all([B(K,"Éxito",z.exito),B(K,"Modelo",z.modelo),B(K,"Foco",z.foco),B(K,"Elementos a identificar",z.elementosIdentificar),B(K,"Brecha - Preguntas",((L=z.brecha)==null?void 0:L.preguntas)||""),B(K,"Brecha - Indicadores",((M=z.brecha)==null?void 0:M.indicadores)||""),B(K,"Planificación - Preparación",G.preparacion),B(K,"Planificación - Objetivo",G.objetivo),B(K,"Planificación - Actividad",G.actividad),B(K,"Planificación - Tiempo",G.tiempo)]);y(te=>({...te,retroalimentacion:{...te.retroalimentacion,exito:Y[0],modelo:Y[1],foco:Y[2],elementosIdentificar:Y[3],brecha:{...te.retroalimentacion.brecha,preguntas:Y[4],indicadores:Y[5]}},planificacion:{...te.planificacion,preparacion:Y[6],objetivo:Y[7],actividad:Y[8],tiempo:Y[9]}})),alert("Textos mejorados exitosamente con IA")}catch(J){console.error(J),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},D=()=>{const L=new vr,M=L.internal.pageSize.getWidth(),J=15,V=M-J*2;let K=20;const z=P=>{K>260&&(L.addPage(),K=20),L.setFontSize(14),L.setFont("helvetica","bold"),L.text(P,J,K),K+=10},G=(P,H="")=>{if(!P)return;K>270&&(L.addPage(),K=20),L.setFontSize(10),L.setFont("helvetica","bold"),L.text(H,J,K),L.setFont("helvetica","normal");const X=L.splitTextToSize(P,V-(H?15:0));L.text(X,J+(H?15:0),K),K+=X.length*5+4};L.setFontSize(18),L.setFont("helvetica","bold"),L.text("Informe de Ciclo OPR",M/2,K,{align:"center"}),K+=15,z("1. Datos Generales");const Y=[["Docente:",p.docente],["Curso:",p.curso],["Asignatura:",p.asignatura],["Fecha:",new Date(b.fecha).toLocaleDateString("es-CL")],["Hora:",`${b.horaInicio} - ${b.horaTermino}`],["Ciclo:",b.nombreCiclo]];bo(L,{body:Y,startY:K,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),K=L.lastAutoTable.finalY+10,z("2. Registro Detallado de Observación");const te=b.detallesObservacion.map(P=>[P.minuto,P.accionesDocente,P.accionesEstudiantes,P.actividades]);bo(L,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:te,startY:K,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:P=>{var H;K=((H=P.cursor)==null?void 0:H.y)||20}}),K=L.lastAutoTable.finalY+10,z("3. Retroalimentación Docente"),G(b.retroalimentacion.exito,"Éxito:"),G(b.retroalimentacion.modelo,"Modelo:"),G(b.retroalimentacion.foco,"Foco:"),G(b.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),K+=5,L.setFontSize(11),L.setFont("helvetica","bold"),L.text("Análisis de Brecha",J,K),K+=7,G(`${b.retroalimentacion.brecha.minutoInicial} a ${b.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),G(b.retroalimentacion.brecha.preguntas,"Preguntas:"),G(b.retroalimentacion.brecha.indicadores,"Indicadores:"),z("4. Planificación de Práctica"),G(b.planificacion.preparacion,"Preparación:"),G(b.planificacion.objetivo,"Objetivo:"),G(b.planificacion.actividad,"Actividad:"),G(b.planificacion.tiempo,"Tiempo:"),z("5. Seguimiento"),G(new Date(b.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),G(b.seguimiento.firma,"Firma (Registrado por):"),L.save(`Informe_OPR_${p.docente}_${b.fecha}.pdf`)},O=async L=>{if(L.preventDefault(),!p.docente||!p.curso||!p.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!b.nombreCiclo||!b.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...b,docenteInfo:p.docente,cursoInfo:p.curso,asignaturaInfo:p.asignatura,seguimiento:{...b.seguimiento,profesor:p.docente,curso:p.curso}};try{await r(M)}catch(J){console.error("Error al guardar ciclo OPR:",J),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{value:p.docente,onChange:L=>g(M=>({...M,docente:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:p.asignatura,onChange:L=>g(M=>({...M,asignatura:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Wi.map(L=>l.jsx("option",{value:L,children:L},L))]})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:R,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[l.jsx(OP,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),l.jsxs("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(wm,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),l.jsxs("form",{onSubmit:O,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(jp,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:b.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"date",name:"fecha",value:b.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"number",name:"registroN",value:b.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),l.jsx("input",{type:"time",name:"horaInicio",value:b.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:b.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(sJe,{label:"Video de observación de clase",onFileChange:L=>I("videoObservacionUrl",L),onLinkChange:L=>E("videoObservacionUrl",L),uploadedUrl:b.videoObservacionUrl,onRemove:()=>N("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Ag,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b dark:border-slate-600",children:[l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:b.detallesObservacion.map(L=>l.jsxs("tr",{className:"border-b dark:border-slate-700",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:L.minuto,onChange:M=>_(L.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.accionesDocente,onChange:M=>_(L.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.accionesEstudiantes,onChange:M=>_(L.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.actividades,onChange:M=>_(L.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),l.jsx("td",{className:"p-2",children:b.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>k(L.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:l.jsx(Eo,{className:"w-4 h-4"})})})]},L.id))})]})}),l.jsxs("button",{type:"button",onClick:j,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[l.jsx(G6,{className:"w-4 h-4"})," Agregar Fila"]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(kee,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),l.jsx("textarea",{name:"retroalimentacion.exito",value:b.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:b.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:b.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:b.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(bye,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),l.jsx("textarea",{name:"planificacion.preparacion",value:b.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),l.jsx("textarea",{name:"planificacion.objetivo",value:b.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),l.jsx("textarea",{name:"planificacion.actividad",value:b.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:b.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(ec,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),l.jsx("input",{type:"date",name:"seguimiento.fecha",value:b.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:b.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},oJe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(!0),[c,u]=S.useState(null),[d,f]=S.useState("list"),[h,p]=S.useState(null),[g,x]=S.useState(null),[b,y]=S.useState("general"),[w,_]=S.useState(!1),[j,k]=S.useState({}),[I,E]=S.useState([]),N=rw,B=S.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[R,D]=S.useState(B),O=S.useCallback(async()=>{s(!0),u(null);try{const ae=await WYe();t(ae)}catch(ae){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",ae)}finally{s(!1)}},[]),L=S.useCallback(async()=>{o(!0);try{const le=(await aJe()).filter(ie=>ie.profile==="PROFESORADO").map(ie=>ie.nombreCompleto).sort();n(le)}catch(ae){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",ae)}finally{o(!1)}},[]),M=S.useCallback(async()=>{try{const ae={};for(const le of e)if(le.id)try{const ie=await eJe(le.id);ie.length>0&&(ae[le.id]=ie)}catch(ie){console.error(`Error loading OPR cycles for ${le.id}:`,ie)}try{const le=await tJe();E(le)}catch(le){console.error("Error loading standalone OPR cycles:",le),E([])}k(ae)}catch(ae){console.error("Error fetching OPR cycles:",ae)}},[e]);S.useEffect(()=>{O(),L()},[O,L]),S.useEffect(()=>{e.length>0&&M()},[e,M]);const J=(ae,le)=>{if(x(ae),le)D(le),p(le.id);else{const ie={id:"temp-"+Date.now(),fecha:ae.fecha,docente:ae.docenteInfo||"",curso:ae.cursoInfo||"",asignatura:ae.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};D(ie),p(null)}f("form"),y("opr"),u(null)},V=async()=>{if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const ae="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new cs(ae).getGenerativeModel({model:"gemini-2.5-flash"}),ce=Object.entries(R.rubricaResultados||{}).map(([_e,Fe])=>`- ${_e}: Nivel ${Fe}`).join(`
`),fe=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${R.docente}
- Asignatura: ${R.asignatura}
- Curso: ${R.curso}
- Resultados de la pauta de observación (rúbrica):
${ce||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${R.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,ne=(await ie.generateContent(fe)).response.text();D(_e=>({..._e,retroalimentacionConsolidada:ne})),alert("Retroalimentación generada exitosamente con IA.")}catch(ae){console.error("❌ Error al generar retroalimentación:",ae);const le=ae.message||"No se pudo generar la retroalimentación automática.";u(le),alert(`Error: ${le}`)}finally{_(!1)}},K=async ae=>{if(ae.preventDefault(),!("docente"in R)||!R.docente||!R.curso||!R.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await YYe(h,R),alert("¡Acompañamiento actualizado correctamente!");else{const le=await XYe(R);p(le.id),D(le),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await O()}catch(le){const ie=(le==null?void 0:le.message)??"Error al guardar el registro de acompañamiento.";u(ie),console.error("❌ Error al guardar:",le),alert(`Error: ${ie}`)}},z=()=>{D(B),p(null),x(null),f("form"),y("general"),u(null)},G=ae=>{D(ae),p(ae.id),x(null),f("form"),y("general"),u(null)},Y=async ae=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await JYe(ae),await O(),alert("Registro eliminado exitosamente.")}catch(le){const ie="No se pudo eliminar el registro.";u(ie),console.error("❌ Error al eliminar:",le),alert(`Error: ${ie}`)}},te=(ae,le)=>{D(ie=>({...ie,rubricaResultados:{...ie.rubricaResultados||{},[ae]:le}}))},P=()=>{var ae;if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const le=new vr,ie=le.internal.pageSize.getWidth(),ce=le.internal.pageSize.getHeight(),fe=20,Ie=ie-fe*2,ne=(Te,Me)=>Me+Te>ce-fe,_e=()=>{const Te=le.getNumberOfPages();for(let Me=1;Me<=Te;Me++)le.setPage(Me),le.setFontSize(9),le.setTextColor(128),le.text(`pág. ${Me} de ${Te}`,ie-fe,ce-10,{align:"right"})};let Fe=fe;le.setFontSize(16),le.setFont("helvetica","bold"),le.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",ie/2,Fe,{align:"center"}),Fe+=15;const Se=40;if(bo(le,{startY:Fe,head:[],body:[["Docente:",R.docente],["Curso:",R.curso],["Asignatura:",R.asignatura],["Fecha:",new Date(R.fecha).toLocaleDateString("es-CL")],["Bloques:",R.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:fe,right:fe}}),Fe=le.lastAutoTable.finalY+10,Object.keys(R.rubricaResultados||{}).length>0){le.setFontSize(14),le.setFont("helvetica","bold"),le.text("Evaluación por Indicadores",fe,Fe),Fe+=10;const Te=Object.entries(R.rubricaResultados).map(([Me,We])=>{let be;switch(We){case 1:be="Débil";break;case 2:be="Incipiente";break;case 3:be="Satisfactorio";break;case 4:be="Avanzado";break;default:be="No evaluado"}return[Me,be,We]});bo(le,{startY:Fe,head:[["Indicador","Nivel de Logro","Puntuación"]],body:Te,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:fe,right:fe}})}le.addPage(),Fe=fe,le.setFontSize(14),le.setFont("helvetica","bold"),le.text("Observaciones Generales y Sugerencias de Mejora",fe,Fe),Fe+=15,R.observacionesGenerales&&(le.setFontSize(12),le.setFont("helvetica","bold"),le.text("Fortalezas:",fe,Fe),Fe+=10,le.setFont("helvetica","normal"),le.setFontSize(11),le.splitTextToSize(R.observacionesGenerales,Ie).forEach(Me=>{ne(7,Fe)&&(le.addPage(),Fe=fe),le.text(Me,fe,Fe,{align:"justify"}),Fe+=7}),Fe+=10),R.retroalimentacionConsolidada&&(ne(50,Fe)&&(le.addPage(),Fe=fe),le.setFontSize(12),le.setFont("helvetica","bold"),le.text("Sugerencias de mejora:",fe,Fe),Fe+=10,le.setFont("helvetica","normal"),le.setFontSize(11),le.splitTextToSize(R.retroalimentacionConsolidada,Ie).forEach(Me=>{ne(7,Fe)&&(le.addPage(),Fe=fe),le.text(Me,fe,Fe,{align:"justify"}),Fe+=7})),_e();const me=`Informe_Acompanamiento_${(ae=R.docente)==null?void 0:ae.replace(/\s+/g,"_")}_${R.curso}_${new Date().toISOString().split("T")[0]}.pdf`;le.save(me)}catch(le){console.error("❌ Error al generar PDF:",le),alert("Error al generar el PDF. Intenta nuevamente.")}},H=ae=>{D(le=>({...le,[ae.target.name]:ae.target.value}))},X=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{z(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[l.jsx(G6,{className:"w-5 h-5"})," Acompañamiento General"]}),l.jsxs("button",{onClick:()=>{D(B),p(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[l.jsx(G6,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Od,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Sd,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(ae=>ae.id).length>0?l.jsx("div",{className:"grid gap-3",children:e.filter(ae=>ae.id).map(ae=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ec,{className:"w-4 h-4 text-amber-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.curso," •"," ",l.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ae.asignatura]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL")]}),ae.bloques&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ae.bloques]}),ae.retroalimentacionConsolidada&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(Xi,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),j[ae.id]&&j[ae.id].length>0&&l.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[l.jsx(jp,{className:"w-3 h-3"}),j[ae.id].length," Ciclo",j[ae.id].length>1?"s":""," OPR"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{G(ae),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{G(ae),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),l.jsx("button",{onClick:()=>Y(ae.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Eo,{className:"w-4 h-4"})})]})]}),j[ae.id]&&j[ae.id].length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[l.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[l.jsx(jp,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),l.jsx("div",{className:"space-y-2",children:j[ae.id].map(le=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:le.nombreCiclo||`Registro N° ${le.registroN}`}),l.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(le.fecha).toLocaleDateString("es-CL"),le.horaInicio&&le.horaTermino&&l.jsxs("span",{children:[" • ",le.horaInicio," - ",le.horaTermino]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>{const ie=e.find(ce=>ce.id===ae.id);J(le,ie)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await Sq(le.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(ie){console.error("Error deleting OPR cycle:",ie),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:l.jsx(Eo,{className:"w-3 h-3"})})]})]},le.id))})]})]},ae.id))}):!a&&l.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsx(Dd,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),I.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(jp,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),l.jsx("div",{className:"space-y-3",children:I.map(ae=>l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(jp,{className:"w-4 h-4 text-blue-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreCiclo||`Registro N° ${ae.registroN}`})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Docente:"})," ",ae.docenteInfo||"No especificado"," •"," ",l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.cursoInfo||"No especificado"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&l.jsxs("span",{children:[" • ",ae.horaInicio," - ",ae.horaTermino]})]}),ae.videoObservacionUrl&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(Xi,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{J(ae)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await Sq(ae.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(le){console.error("Error deleting standalone OPR cycle:",le),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Eo,{className:"w-4 h-4"})})]})]})},ae.id))})]})]}),Z=()=>{const ae=h?e.find(ie=>ie.id===h):null,le={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in R&&R.docente||"",curso:"curso"in R&&R.curso||"",asignatura:"asignatura"in R&&R.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:b==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Dd,{className:"w-4 h-4"}),"Acompañamiento General"]})}),l.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(jp,{className:"w-4 h-4"}),"Ciclos OPR"]})}),l.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Sd,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Od,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),b==="dashboard"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(GYe,{acompanamientos:e,ciclosOPR:j,standaloneCiclos:I})}),b==="general"&&l.jsxs("form",{onSubmit:K,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[l.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(s5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[l.jsx(OP,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),l.jsxs("button",{type:"button",onClick:P,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(wm,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in R&&R.retroalimentacionConsolidada&&l.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[l.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(Xi,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:l.jsx("textarea",{readOnly:!0,rows:8,value:R.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),l.jsxs("select",{name:"docente",value:"docente"in R?R.docente:"",onChange:H,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),l.jsxs("select",{name:"curso",value:"curso"in R?R.curso:"",onChange:H,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),l.jsxs("select",{name:"asignatura",value:"asignatura"in R?R.asignatura:"",onChange:H,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),Wi.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:"bloques"in R?R.bloques:"",onChange:H,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in R?R.observacionesGenerales:"",onChange:H,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Sd,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:N.map(ie=>l.jsx(nt.Fragment,{children:ie.criteria.map((ce,fe)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[fe===0&&l.jsx("td",{rowSpan:ie.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:ie.domain}),l.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ce.name}),ce.levels.map((Ie,ne)=>{const _e=ne+1,Fe="rubricaResultados"in R&&R.rubricaResultados[ce.name]===_e,Se=Fe?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return l.jsx("td",{onClick:()=>te(ce.name,_e),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Se} ${Fe?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${_e} para ${ce.name}`,children:l.jsxs("div",{className:"text-xs leading-relaxed",children:[Fe&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(Xi,{className:"w-3 h-3 text-amber-600"}),l.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Ie]})},_e)})]},ce.name))},ie.domain))})]})}),Object.keys(R.rubricaResultados||{}).length>0&&l.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[l.jsx(Sd,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(R.rubricaResultados).length," criterios evaluados)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(R.rubricaResultados).map(([ie,ce])=>l.jsxs("div",{className:"flex justify-between items-center py-1",children:[l.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[ie,":"]}),l.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ce===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ce===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ce===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ce]})]},ie))})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),b==="opr"&&l.jsx(iJe,{acompanamiento:ae||le,cicloToEdit:g,profesores:r,onSave:async ie=>{try{const ce=(ae==null?void 0:ae.id)||typeof ie.acompanamientoId=="string"&&ie.acompanamientoId||void 0;if(g&&g.id)await ZYe(g.id,ie),alert("Ciclo OPR actualizado exitosamente");else{if(!ce||String(ce).startsWith("temp-")){const fe={...ie,acompanamientoId:""};await Nq(fe)}else{const fe={...ie,acompanamientoId:String(ce)};await Nq(fe)}alert("Ciclo OPR guardado exitosamente")}x(null),await O(),await M(),f("list")}catch(ce){console.error("❌ Error al guardar ciclo OPR:",ce);const fe=ce.message||"Error desconocido al guardar el ciclo OPR";u(fe),alert(`Error al guardar el ciclo OPR: ${fe}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||i?l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?X():Z()})})},q8="mensajes_internos",lJe="usuarios",Mle="mensajes_read_status",Ule=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},cJe=(e,t)=>{const r=zt(yt(ft,q8),Dr("participants","array-contains",e),gr("fecha","desc"));return fr(r,a=>{const s=a.docs.map(i=>Ule(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},uJe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await vn(yt(ft,q8),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},dJe=async e=>{try{const t=sr(ft,q8,e);await za(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},AJe=(e,t)=>{const r=sr(ft,Mle,e);return fr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},fJe=async(e,t)=>{try{const r=sr(ft,Mle,e);await pi(r,{messages:ZZ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},hJe=e=>{const t=zt(yt(ft,lJe),gr("nombreCompleto","asc"));return fr(t,n=>{const a=n.docs.map(s=>Ule(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},mJe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=S.useState("inbox"),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState({announcements:[],messages:[]}),[h,p]=S.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,b]=S.useState(g);S.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const E=cJe(e.email,R=>{s(R),p(!1)}),N=hJe(o),B=AJe(e.id,R=>{f(R),t()});return()=>{E(),N(),B()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&fJe(e.id,E.id).catch(N=>{console.error("Failed to mark message as read:",N)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const N={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await uJe(N),b(g),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await dJe(E),u(null)}catch(N){console.error("Error deleting message:",N),alert("No se pudo eliminar el mensaje.")}},j=E=>{b({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},k=S.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),I=S.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?k:I).map(E=>{const N=r==="inbox"&&!d.messages.includes(E.id);return l.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${N?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),N&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${N?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:x.para,onChange:E=>b({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>l.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>b({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>b({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>j(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},Ik="proyectos_interdisciplinarios",W8="entregas_interdisciplinarias",pJe="usuarios",X8=e=>{const t=e.data();return{id:e.id,...t}},gJe=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),xJe=e=>{const t=zt(yt(ft,Ik),gr("nombreProyecto","asc"));return fr(t,n=>{try{const a=n.docs.map(s=>gJe(X8(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},vJe=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await vn(yt(ft,Ik),t)).id},kq=async(e,t)=>{const{id:r,...n}=t,a=sr(ft,Ik,e);await pi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},bJe=async e=>{const t=sr(ft,Ik,e),r=zt(yt(ft,W8),Dr("planificacionId","==",e)),n=await Qn(r),a=Dg(ft);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},yJe=(e,t)=>{const r=zt(yt(ft,W8),Dr("planificacionId","==",e));return fr(r,a=>{const s=a.docs.map(i=>X8(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},jq=async(e,t)=>{const r=sr(ft,W8,e);await pi(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},Qle=e=>{const t=zt(yt(ft,pJe));return fr(t,n=>{const a=n.docs.map(s=>X8(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},pO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},xw=({href:e})=>{if(!e)return l.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return l.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx(gwe,{className:"w-4 h-4"}),l.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},xp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>l.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),wJe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=S.useState(null),a=S.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=S.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:d})=>{const[f,h]=S.useState(c.activity),p=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(Bee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),l.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),l.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),l.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Od,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):l.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:l.jsx(G0,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return l.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[l.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),l.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),l.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(xw,{href:d.recursoUrl})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},EJe=({planificaciones:e,onBack:t})=>{const r=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var p;(p=h.habilidades)==null||p.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(pO).forEach(([x,b])=>{b.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=S.useMemo(()=>{const c=e.length,u=e.reduce((h,p)=>{var g;return h+(((g=p.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,p)=>{var g;return h+(((g=p.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((p,g)=>g[1]-p[1]).slice(0,20),h=Math.max(...f.map(([,p])=>p));return h?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([p,g])=>{const x=Math.max(.8,g/h*2),b=Math.max(.6,g/h);return l.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:b},title:`${p}: ${g} veces`,children:p},p)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:l.jsx(Dw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),l.jsx("div",{className:"space-y-4",children:Object.keys(pO).map(h=>{const p=c[h]||0,g=d>0?p/d*100:0,x=f[h]||"bg-slate-400";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[p," habilidades"]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},o=({icon:c,title:u,value:d,description:f,color:h})=>l.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:d}),l.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),l.jsx("p",{className:"text-white/90 text-sm",children:f})]});return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:l.jsx(lN,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(Pw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(o,{icon:l.jsx(fg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),l.jsx(o,{icon:l.jsx(nye,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),l.jsx(o,{icon:l.jsx(Dd,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),l.jsx(o,{icon:l.jsx(Hd,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(i,{data:r.categoriaCount}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(_ee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),l.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},CJe=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=S.useState([]),[s,i]=S.useState([]),[o,c]=S.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=S.useState(null);S.useEffect(()=>{const b=Qle(a),y=yJe(e.id,i);return()=>{b(),y()}},[e.id]);const f=S.useMemo(()=>n.filter(b=>b.profile===Wt.ESTUDIANTE&&e.cursos.includes(b.curso||"")).sort((b,y)=>(b.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async b=>{d(b.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
Comentario del estudiante: "${b.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new cs(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await jq(b.id,E)}catch(_){console.error(_),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},p=b=>b.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",p(e.docentesResponsables)]})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(Pw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),l.jsx("select",{value:o.id,onChange:b=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===b.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(b=>l.jsxs("option",{value:b.id,children:["Tarea ",b.numero,": ",b.instrucciones]},b.id))})]}),l.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(b=>{const y=s.find(w=>w.tareaId===o.id&&w.estudianteId===b.id);return l.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(b.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:b.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.curso})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[l.jsx(TP,{className:"w-4 h-4"})," Entregado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[l.jsx(Od,{className:"w-4 h-4"})," Pendiente"]})})]}),y?l.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),l.jsx(xw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),l.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(wm,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>jq(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),l.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(Gp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx(Od,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},b.id)})})]}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Od,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),l.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[l.jsx(Pw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},_Je=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[o,c]=S.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(p=>{var g;return((g=i.find(x=>x.id===p))==null?void 0:g.nombreCompleto)||p}).join(", "),f=async h=>{var p,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new cs(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,j=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),k=JSON.parse(j);s({actividades:(p=k.actividades)==null?void 0:p.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=k.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=k.tareas)==null?void 0:x.map((I,E)=>({...I,id:crypto.randomUUID(),numero:E+1}))})}}catch(b){console.error(b),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:o==="obj"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(Gp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:o==="ind"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(Gp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("est"),disabled:o!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:o==="est"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",l.jsx("span",{children:"Generando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Gp,{className:"w-4 h-4"})," ",l.jsx("span",{children:"Estructura IA"})]})})]})},NJe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=S.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=S.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=S.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=S.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});S.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(_=>({..._,[w.target.name]:w.target.value})),p=(w,_,j)=>s(k=>({...k,contenidosPorAsignatura:k.contenidosPorAsignatura.map(I=>I.asignatura===w?{...I,[_]:j}:I)})),g=(w,_)=>s(j=>({...j,contenidosPorAsignatura:j.contenidosPorAsignatura.map(k=>k.asignatura===w?{...k,habilidades:k.habilidades.includes(_)?k.habilidades.filter(I=>I!==_):[...k.habilidades,_]}:k)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},b=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var _;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((_=a.tareas)==null?void 0:_.length)||0)+1,...d};s(j=>({...j,tareas:[...j.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:l.jsx(fg,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx(xp,{icon:l.jsx(Dd,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:l.jsx(_Je,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(_=>({..._,objetivos:w})),onIndicadores:w=>s(_=>({..._,indicadoresLogro:w})),onEstructura:w=>s(_=>{var j,k,I;return{..._,actividades:(j=w.actividades)!=null&&j.length?w.actividades:_.actividades,fechasClave:(k=w.fechasClave)!=null&&k.length?w.fechasClave:_.fechasClave,tareas:(I=w.tareas)!=null&&I.length?w.tareas:_.tareas}})}),children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),l.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),l.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),l.jsx(xp,{icon:l.jsx(ec,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,docentesResponsables:_.docentesResponsables.includes(w.id)?_.docentesResponsables.filter(j=>j!==w.id):[..._.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:l.jsx(Rw,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),l.jsx(xp,{icon:l.jsx(sN,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ks.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,cursos:_.cursos.includes(w)?_.cursos.filter(j=>j!==w):[..._.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(xp,{icon:l.jsx(Hd,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Wi.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>{const j=_.asignaturas,k=j.includes(w)?j.filter(E=>E!==w):[...j,w];let I=_.contenidosPorAsignatura;return k.includes(w)&&!j.includes(w)&&(I=[...I,{asignatura:w,contenidos:"",habilidades:[]}]),!k.includes(w)&&j.includes(w)&&(I=I.filter(E=>E.asignatura!==w)),{..._,asignaturas:k,contenidosPorAsignatura:I}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&l.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[l.jsx(Hd,{className:"w-4 h-4"})," ",w.asignatura]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),l.jsx("textarea",{value:w.contenidos,onChange:_=>p(w.asignatura,"contenidos",_.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),l.jsx("div",{className:"space-y-2",children:Object.entries(pO).map(([_,j])=>l.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[l.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[_,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(k=>l.jsx("button",{type:"button",onClick:()=>g(w.asignatura,k),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(k)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:k},k))})]},_))}),w.habilidades.length>0&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[l.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(_=>l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:_},_))})]})]})]})]},w.asignatura))]})]})}),l.jsx(xp,{icon:l.jsx(Zv,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:l.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(xp,{icon:l.jsx(Sd,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:l.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsxs(xp,{icon:l.jsx(Mu,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(G0,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),l.jsx("input",{value:i.nombre,onChange:w=>o({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),l.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>o({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),l.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>o({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:i.recursoUrl||"",onChange:w=>o({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Uu,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),l.jsx(xw,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(TP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),l.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("button",{type:"button",onClick:b,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Uu,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),l.jsx(xw,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Dw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),l.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),l.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Uu,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),l.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),l.jsxs("div",{className:"text-right space-y-1",children:[l.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?l.jsx(xw,{href:w.recursoUrl}):l.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},Bq=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState("list"),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState("all"),b=S.useMemo(()=>g==="all"?e:e.filter(N=>N.id===g),[e,g]);S.useEffect(()=>{s(!0);const N=Qle(R=>{const D=R.filter(O=>O.profile===Wt.PROFESORADO);n(D)}),B=xJe(R=>{const D=R.map(O=>({...O,docentesResponsables:Array.isArray(O.docentesResponsables)?O.docentesResponsables:[O.docentesResponsables].filter(Boolean),contenidosPorAsignatura:O.contenidosPorAsignatura||[],actividades:O.actividades||[],fechasClave:O.fechasClave||[]}));t(D),s(!1)});return()=>{N(),B()}},[]);const y=S.useCallback(async(N,B)=>{const R=e.find(O=>O.id===N);if(!R)return;const D={...R,actividades:(R.actividades||[]).map(O=>O.id===B.id?B:O)};await kq(N,D)},[e]),w=async N=>{try{const B=N.id&&String(N.id).length>0,R={...N};if(B){const{id:D,...O}=R;await kq(N.id,O)}else delete R.id,await vJe(R);o("list"),u(null)}catch(B){console.error("Error al guardar la planificación:",B),alert("No se pudo guardar la planificación.")}},_=N=>{u(N),o("form")},j=async N=>{if(!N){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await bJe(N)}catch(B){console.error(B),alert("No se pudo eliminar la planificación.")}},k=()=>{u(null),o("form")},I=async N=>{f(N.id);const B=new vr("p","mm","a4"),R=15,O=B.internal.pageSize.getWidth()-R*2;let L=R+20;B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(0);const M=B.splitTextToSize(N.nombreProyecto,O);B.text(M,R,L),L+=M.length*8+10,bo(B,{startY:L,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(K=>K.map(z=>{var G;return((G=r.find(Y=>Y.id===z))==null?void 0:G.nombreCompleto)||z}).join(", "))(N.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},N.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},N.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),L=B.lastAutoTable.finalY+15;const V=(K,z)=>{if(!z||Array.isArray(z)&&!z.length||typeof z=="string"&&!z.trim())return;const G=Array.isArray(z)?z.join(", "):String(z),Y=B.splitTextToSize(G,O);B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(40),B.text(K,R,L),L+=8,B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(80),B.text(Y,R,L),L+=Y.length*5+10};if(V("Descripción del Proyecto",N.descripcionProyecto),V("Objetivos de Aprendizaje",N.objetivos),V("Indicadores de Logro",N.indicadoresLogro),N.contenidosPorAsignatura&&N.contenidosPorAsignatura.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Contenidos por Asignatura",R,L),L+=10,N.contenidosPorAsignatura.forEach(K=>{var z;if(B.setFont("helvetica","bold"),B.setFontSize(11),B.text(`${K.asignatura}:`,R,L),L+=6,B.setFont("helvetica","normal"),B.setFontSize(11),K.contenidos){const G=B.splitTextToSize(`Contenidos: ${K.contenidos}`,O-10);B.text(G,R+5,L),L+=G.length*5+3}if((z=K.habilidades)!=null&&z.length){const G=`Habilidades: ${K.habilidades.join(", ")}`,Y=B.splitTextToSize(G,O-10);B.text(Y,R+5,L),L+=Y.length*5+8}}),L+=10),N.actividades&&N.actividades.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Actividades",R,L),L+=10,bo(B,{startY:L,head:[["Actividad","Inicio","Fin","Recurso"]],body:N.actividades.map(K=>[K.nombre,K.fechaInicio,K.fechaFin,K.recursoUrl||"—"]),theme:"striped"}),L=B.lastAutoTable.finalY+10),N.fechasClave&&N.fechasClave.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Fechas Clave",R,L),L+=10,bo(B,{startY:L,head:[["Hito","Fecha","Recurso"]],body:N.fechasClave.map(K=>[K.nombre,K.fecha,K.recursoUrl||"—"]),theme:"striped"}),L=B.lastAutoTable.finalY+10),N.tareas&&N.tareas.length>0){const K=N.tareas.map(z=>[String(z.numero||""),z.instrucciones,z.fechaEntrega,z.recursoUrl||"—"]);B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Tareas para Estudiantes",R,L),L+=10,bo(B,{startY:L,head:[["#","Instrucciones","Entrega","Recurso"]],body:K,theme:"striped",headStyles:{fillColor:[52,73,94]}})}B.save(`Proyecto_${N.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=N=>N.map(B=>{var R;return((R=r.find(D=>D.id===B))==null?void 0:R.nombreCompleto)||B}).join(", ");return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?l.jsx(CJe,{plan:h,onBack:()=>p(null),availableTeachers:r}):i==="dashboard"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>o("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),l.jsx(EJe,{planificaciones:e,onBack:()=>o("list")})]}):i==="form"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{o("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsx(NJe,{initialPlan:c,onSave:w,onCancel:()=>{o("list"),u(null)},availableTeachers:r})]}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:l.jsx(fg,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>o("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[l.jsx(lN,{className:"w-5 h-5"})," Ver Dashboard"]}),l.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[l.jsx(Uu,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:l.jsx(fg,{className:"w-12 h-12 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),l.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Uu,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(N=>l.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[l.jsx("div",{className:"flex justify-between items-start mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:N.nombreProyecto}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(sN,{className:"w-4 h-4"}),l.jsxs("span",{children:["Cursos: ",N.cursos.join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(ec,{className:"w-4 h-4"}),l.jsxs("span",{children:["Profesores: ",E(N.docentesResponsables)]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Hd,{className:"w-4 h-4"}),l.jsxs("span",{children:["Asignaturas: ",N.asignaturas.length]})]})]})]})}),!!N.descripcionProyecto&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:N.descripcionProyecto}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>p(N),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[l.jsx(TP,{className:"w-4 h-4"})," Entregas"]}),l.jsxs("button",{type:"button",onClick:()=>I(N),disabled:d===N.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===N.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(wm,{className:"w-4 h-4"}),"PDF"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>_(N),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:l.jsx(Bee,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>j(N.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:l.jsx(Eo,{className:"w-4 h-4"})})]})]})]},N.id))})]}),e.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hwe,{className:"w-5 h-5 text-slate-600"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),l.jsxs("select",{value:g,onChange:N=>x(N.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[l.jsx("option",{value:"all",children:"Todos"}),e.map(N=>l.jsx("option",{value:N.id,children:N.nombreProyecto},N.id))]})]})]}),l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(wJe,{planificaciones:b,onActivityUpdate:y})})]})]})},w1="panol_maquinas",hE="panol_registros",SJe=e=>{const t=zt(yt(ft,w1),gr("nombre","asc"));return fr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},kJe=e=>{const t=zt(yt(ft,hE),gr("fecha","desc"));return fr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},jJe=async e=>(await vn(yt(ft,w1),{...e,createdAt:Si(),updatedAt:Si()})).id,BJe=async(e,t)=>{await Kc(sr(ft,w1,e),{...t,updatedAt:Si()})},TJe=async e=>{const t=zt(yt(ft,hE),Dr("maquinaId","==",e));if(!(await Qn(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await za(sr(ft,w1,e))},IJe=async e=>(await vn(yt(ft,hE),{...e,createdAt:Si(),updatedAt:Si()})).id,FJe=async(e,t)=>{await Kc(sr(ft,hE,e),{...t,updatedAt:Si()})},OJe=async e=>{await za(sr(ft,hE,e))},DJe=async()=>{if(!(await Qn(yt(ft,w1))).empty)return;const t=Dg(ft);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=sr(yt(ft,w1));t.set(a,{...n,createdAt:Si(),updatedAt:Si()})}),await t.commit()},PJe=()=>{var J;const[e,t]=S.useState([]),[r,n]=S.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=S.useState(a),[o,c]=S.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=S.useState(u),[h,p]=S.useState(null),[g,x]=S.useState({maquinaId:"",curso:"",profesor:"",fecha:""});S.useEffect(()=>{DJe().catch(console.error);const V=SJe(t),K=kJe(n);return()=>{V&&V(),K&&K()}},[]);const b=async V=>{if(V.preventDefault(),!!d.nombre.trim())try{h?await BJe(h.id,{...d}):await jJe({...d}),f(u),p(null)}catch(K){alert(K.message||"Error al guardar máquina")}},y=S.useCallback(async V=>{try{await TJe(V)}catch(K){alert(K.message||"Error al eliminar máquina")}},[]),w=async V=>{V.preventDefault();const K=o||s;if(!K.curso||!K.profesorResponsable.trim()||!K.maquinaId||Number(K.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(o){const{id:z,...G}=o;await FJe(z,G)}else await IJe({...s});i(a),c(null)}catch(z){alert(z.message||"Error al guardar registro")}},_=S.useCallback(async V=>{try{await OJe(V)}catch(K){alert(K.message||"Error al eliminar registro")}},[]),j=S.useMemo(()=>r.filter(V=>(g.maquinaId===""||V.maquinaId===g.maquinaId)&&(g.curso===""||V.curso===g.curso)&&(g.profesor===""||V.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||V.fecha===g.fecha)).sort((V,K)=>new Date(K.fecha).getTime()-new Date(V.fecha).getTime()),[r,g]),k=S.useMemo(()=>new Map(e.map(V=>[V.id,V])),[e]),I=S.useMemo(()=>j.reduce((V,K)=>V+(Number(K.totalHoras)||0),0),[j]),E=S.useMemo(()=>{const V=new Map;j.forEach(z=>{var Y;const G=((Y=k.get(z.maquinaId))==null?void 0:Y.nombre)||"N/A";V.set(G,(V.get(G)||0)+(Number(z.totalHoras)||0))});const K=Array.from(V.entries()).map(([z,G])=>({maquina:z,horas:Number(G.toFixed(2))}));return K.sort((z,G)=>G.horas-z.horas),K},[j,k]),N=()=>{const V=j.map(G=>{var Y,te;return{Fecha:G.fecha,Curso:G.curso,Profesor:G.profesorResponsable,Máquina:((Y=k.get(G.maquinaId))==null?void 0:Y.nombre)||"N/A",Especialidad:((te=k.get(G.maquinaId))==null?void 0:te.especialidad)||"N/A","Total Horas":G.totalHoras,Observaciones:G.observaciones}}),K=yl.json_to_sheet(V),z=yl.book_new();yl.book_append_sheet(z,K,"RegistrosPañol"),kk(z,"Registros_Pañol.xlsx")},B=()=>{const V=new vr;bo(V,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:j.map(K=>{var z,G;return[K.fecha,K.curso,K.profesorResponsable,((z=k.get(K.maquinaId))==null?void 0:z.nombre)||"N/A",((G=k.get(K.maquinaId))==null?void 0:G.especialidad)||"N/A",K.totalHoras,K.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:K=>{V.setFontSize(12),V.setFont("helvetica","bold"),V.text("LICEO INDUSTRIAL DE RECOLETA",K.settings.margin.left,14),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Informe de Registros de Pañol",K.settings.margin.left,20)}}),V.save("Registros_Pañol.pdf")},R="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",D=(V,K)=>l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K}`,children:V}),O=({icon:V,label:K,value:z,accent:G="from-indigo-500 to-sky-500"})=>l.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${G} opacity-10`}),l.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:V}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:K}),l.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:z})]})]})]}),L=({title:V,icon:K,children:z,right:G,accent:Y="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>l.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${Y}`}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[K," ",l.jsx("span",{children:V})]}),G]}),z]})]}),M=()=>{const V=o||s,K=o?c:i;return l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Mu,{size:16})," Fecha"]}),l.jsx("input",{name:"fecha",type:"date",value:V.fecha,onChange:z=>K({...V,fecha:z.target.value}),className:R,required:!0})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(ec,{size:16})," Curso"]}),l.jsxs("select",{name:"curso",value:V.curso,onChange:z=>K({...V,curso:z.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),Ks.map(z=>l.jsx("option",{children:z},z))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Hd,{size:16})," Profesor"]}),l.jsxs("select",{name:"profesorResponsable",value:V.profesorResponsable,onChange:z=>K({...V,profesorResponsable:z.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),V6.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(s5,{size:16})," Máquina"]}),l.jsxs("select",{name:"maquinaId",value:V.maquinaId,onChange:z=>K({...V,maquinaId:z.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),e.map(z=>l.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(iN,{size:16})," Total de Horas"]}),l.jsx("input",{name:"totalHoras",type:"number",value:V.totalHoras,onChange:z=>K({...V,totalHoras:Number(z.target.value)}),className:R,required:!0,min:.5,step:.5})]}),l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:V.observaciones,onChange:z=>K({...V,observaciones:z.target.value}),placeholder:"Observaciones...",className:R+" min-h-[40px]",rows:2})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[l.jsx(cN,{size:16})," Cancelar"]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[o?l.jsx(vh,{size:16}):l.jsx(Uu,{size:16}),o?"Actualizar":"Registrar"]})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[l.jsx(qye,{size:18})," Excel"]}),l.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[l.jsx(Dd,{size:18})," PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(O,{icon:l.jsx(s5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),l.jsx(O,{icon:l.jsx(Dd,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:j.length,accent:"from-sky-500 to-cyan-500"}),l.jsx(O,{icon:l.jsx(iN,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),l.jsx(O,{icon:l.jsx(Mu,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(J=r[0])!=null&&J.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[l.jsx("div",{className:"xl:col-span-3",children:l.jsx(L,{title:o?`Editando registro #${o.id.slice(0,4)}`:"Nuevo registro de uso",icon:l.jsx(Uye,{size:18}),children:l.jsx(M,{})})}),l.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:l.jsx(L,{title:"Uso por máquina (horas)",icon:l.jsx(Sd,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:l.jsx("div",{className:"flex gap-2 items-center",children:D(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:l.jsx("div",{className:"h-[320px] w-full",children:l.jsx(th,{width:"100%",height:"100%",children:l.jsxs(Jw,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[l.jsx(Yw,{strokeDasharray:"3 3"}),l.jsx(vg,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),l.jsx(bg,{}),l.jsx(eh,{}),l.jsx(V1,{}),l.jsx(f1,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),l.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:l.jsxs(L,{title:"Administrar máquinas",icon:l.jsx(s5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[l.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:V=>f({...d,nombre:V.target.value}),placeholder:"Nombre máquina",className:R+" md:col-span-2"}),l.jsxs("select",{value:d.especialidad,onChange:V=>f({...d,especialidad:V.target.value}),className:R+" md:col-span-2",children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?l.jsx(vh,{size:16}):l.jsx(Uu,{size:16}),h?"Guardar":"Agregar"]})]}),l.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(V=>l.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:V.nombre}),l.jsx("div",{className:"text-xs",children:V.especialidad==="Industrial"?D("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):D("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p(V),f(V)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:l.jsx($6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>y(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:l.jsx(Eo,{size:16,className:"text-red-600"})})]})]},V.id))})]})}),l.jsx("div",{className:"xl:col-span-2 order-3",children:l.jsxs(L,{title:"Historial de uso",icon:l.jsx(Dd,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(IP,{size:16,className:"text-slate-600"})}),children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:g.fecha,onChange:V=>x({...g,fecha:V.target.value}),className:R,placeholder:"Fecha"}),l.jsxs("select",{value:g.curso,onChange:V=>x({...g,curso:V.target.value}),className:R,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{value:g.maquinaId,onChange:V=>x({...g,maquinaId:V.target.value}),className:R,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(V=>l.jsx("option",{value:V.id,children:V.nombre},V.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(N4,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),l.jsx("input",{value:g.profesor,onChange:V=>x({...g,profesor:V.target.value}),placeholder:"Buscar profesor...",className:R+" pl-9"})]})]}),l.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[j.map(V=>{var K;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((K=k.get(V.maquinaId))==null?void 0:K.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[V.profesorResponsable," ",l.jsxs("span",{className:"text-slate-400",children:["(",V.curso,")"]})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(V),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:l.jsx($6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>_(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:l.jsx(Eo,{size:16,className:"text-red-600"})})]})]},V.id)}),j.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Nl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Nl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const RJe={},Tq=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(RJe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},LJe=e=>e?Tq(e):Tq,{useDebugValue:MJe}=nt,{useSyncExternalStoreWithSelector:UJe}=x_e,QJe=e=>e;function Hle(e,t=QJe,r){const n=UJe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return MJe(n),n}const Iq=(e,t)=>{const r=LJe(e),n=(a,s=t)=>Hle(r,a,s);return Object.assign(n,r),n},HJe=(e,t)=>e?Iq(e,t):Iq;function sl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var VJe={value:()=>{}};function Fk(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new f5(r)}function f5(e){this._=e}function zJe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}f5.prototype=Fk.prototype={constructor:f5,on:function(e,t){var r=this._,n=zJe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=$Je(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=Fq(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Fq(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new f5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function $Je(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Fq(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=VJe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var gO="http://www.w3.org/1999/xhtml";const Oq={svg:"http://www.w3.org/2000/svg",xhtml:gO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ok(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Oq.hasOwnProperty(t)?{space:Oq[t],local:e}:e}function GJe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===gO&&t.documentElement.namespaceURI===gO?t.createElement(e):t.createElementNS(r,e)}}function KJe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vle(e){var t=Ok(e);return(t.local?KJe:GJe)(t)}function qJe(){}function Y8(e){return e==null?qJe:function(){return this.querySelector(e)}}function WJe(e){typeof e!="function"&&(e=Y8(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),o[d]=u);return new Gc(n,this._parents)}function XJe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function YJe(){return[]}function zle(e){return e==null?YJe:function(){return this.querySelectorAll(e)}}function JJe(e){return function(){return XJe(e.apply(this,arguments))}}function ZJe(e){typeof e=="function"?e=JJe(e):e=zle(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new Gc(n,a)}function $le(e){return function(){return this.matches(e)}}function Gle(e){return function(t){return t.matches(e)}}var eZe=Array.prototype.find;function tZe(e){return function(){return eZe.call(this.children,e)}}function rZe(){return this.firstElementChild}function nZe(e){return this.select(e==null?rZe:tZe(typeof e=="function"?e:Gle(e)))}var aZe=Array.prototype.filter;function sZe(){return Array.from(this.children)}function iZe(e){return function(){return aZe.call(this.children,e)}}function oZe(e){return this.selectAll(e==null?sZe:iZe(typeof e=="function"?e:Gle(e)))}function lZe(e){typeof e!="function"&&(e=$le(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new Gc(n,this._parents)}function Kle(e){return new Array(e.length)}function cZe(){return new Gc(this._enter||this._groups.map(Kle),this._parents)}function mS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mS.prototype={constructor:mS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uZe(e){return function(){return e}}function dZe(e,t,r,n,a,s){for(var i=0,o,c=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new mS(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function AZe(e,t,r,n,a,s,i){var o,c,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(c=t[o])&&(h[o]=p=i.call(c,c.__data__,o,t)+"",u.has(p)?a[o]=c:u.set(p,c));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(c=u.get(p))?(n[o]=c,c.__data__=s[o],u.delete(p)):r[o]=new mS(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&u.get(h[o])===c&&(a[o]=c)}function fZe(e){return e.__data__}function hZe(e,t){if(!arguments.length)return Array.from(this,fZe);var r=t?AZe:dZe,n=this._parents,a=this._groups;typeof e!="function"&&(e=uZe(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=mZe(e.call(d,d&&d.__data__,u,n)),g=p.length,x=o[u]=new Array(g),b=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,b,y,p,t);for(var w=0,_=0,j,k;w<g;++w)if(j=x[w]){for(w>=_&&(_=w+1);!(k=b[_])&&++_<g;);j._next=k||null}}return i=new Gc(i,n),i._enter=o,i._exit=c,i}function mZe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pZe(){return new Gc(this._exit||this._groups.map(Kle),this._parents)}function gZe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function xZe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=o[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<a;++c)o[c]=r[c];return new Gc(o,this._parents)}function vZe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function bZe(e){e||(e=yZe);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Gc(a,this._parents).order()}function yZe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wZe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function EZe(){return Array.from(this)}function CZe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function _Ze(){let e=0;for(const t of this)++e;return e}function NZe(){return!this.node()}function SZe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function kZe(e){return function(){this.removeAttribute(e)}}function jZe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function BZe(e,t){return function(){this.setAttribute(e,t)}}function TZe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function IZe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function FZe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function OZe(e,t){var r=Ok(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?jZe:kZe:typeof t=="function"?r.local?FZe:IZe:r.local?TZe:BZe)(r,t))}function qle(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function DZe(e){return function(){this.style.removeProperty(e)}}function PZe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function RZe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function LZe(e,t,r){return arguments.length>1?this.each((t==null?DZe:typeof t=="function"?RZe:PZe)(e,t,r??"")):E1(this.node(),e)}function E1(e,t){return e.style.getPropertyValue(t)||qle(e).getComputedStyle(e,null).getPropertyValue(t)}function MZe(e){return function(){delete this[e]}}function UZe(e,t){return function(){this[e]=t}}function QZe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function HZe(e,t){return arguments.length>1?this.each((t==null?MZe:typeof t=="function"?QZe:UZe)(e,t)):this.node()[e]}function Wle(e){return e.trim().split(/^|\s+/)}function J8(e){return e.classList||new Xle(e)}function Xle(e){this._node=e,this._names=Wle(e.getAttribute("class")||"")}Xle.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yle(e,t){for(var r=J8(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Jle(e,t){for(var r=J8(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function VZe(e){return function(){Yle(this,e)}}function zZe(e){return function(){Jle(this,e)}}function $Ze(e,t){return function(){(t.apply(this,arguments)?Yle:Jle)(this,e)}}function GZe(e,t){var r=Wle(e+"");if(arguments.length<2){for(var n=J8(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?$Ze:t?VZe:zZe)(r,t))}function KZe(){this.textContent=""}function qZe(e){return function(){this.textContent=e}}function WZe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XZe(e){return arguments.length?this.each(e==null?KZe:(typeof e=="function"?WZe:qZe)(e)):this.node().textContent}function YZe(){this.innerHTML=""}function JZe(e){return function(){this.innerHTML=e}}function ZZe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function eet(e){return arguments.length?this.each(e==null?YZe:(typeof e=="function"?ZZe:JZe)(e)):this.node().innerHTML}function tet(){this.nextSibling&&this.parentNode.appendChild(this)}function ret(){return this.each(tet)}function net(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aet(){return this.each(net)}function set(e){var t=typeof e=="function"?e:Vle(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iet(){return null}function oet(e,t){var r=typeof e=="function"?e:Vle(e),n=t==null?iet:typeof t=="function"?t:Y8(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function cet(){var e=this.parentNode;e&&e.removeChild(this)}function uet(){return this.each(cet)}function det(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Aet(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fet(e){return this.select(e?Aet:det)}function het(e){return arguments.length?this.property("__data__",e):this.node().__data__}function met(e){return function(t){e.call(this,t,this.__data__)}}function pet(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function get(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function xet(e,t,r){return function(){var n=this.__on,a,s=met(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function vet(e,t,r){var n=pet(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,d;c<u;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?xet:get,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Zle(e,t,r){var n=qle(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function bet(e,t){return function(){return Zle(this,e,t)}}function yet(e,t){return function(){return Zle(this,e,t.apply(this,arguments))}}function wet(e,t){return this.each((typeof t=="function"?yet:bet)(e,t))}function*Eet(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var ece=[null];function Gc(e,t){this._groups=e,this._parents=t}function mE(){return new Gc([[document.documentElement]],ece)}function Cet(){return this}Gc.prototype=mE.prototype={constructor:Gc,select:WJe,selectAll:ZJe,selectChild:nZe,selectChildren:oZe,filter:lZe,data:hZe,enter:cZe,exit:pZe,join:gZe,merge:xZe,selection:Cet,order:vZe,sort:bZe,call:wZe,nodes:EZe,node:CZe,size:_Ze,empty:NZe,each:SZe,attr:OZe,style:LZe,property:HZe,classed:GZe,text:XZe,html:eet,raise:ret,lower:aet,append:set,insert:oet,remove:uet,clone:fet,datum:het,on:vet,dispatch:wet,[Symbol.iterator]:Eet};function Iu(e){return typeof e=="string"?new Gc([[document.querySelector(e)]],[document.documentElement]):new Gc([[e]],ece)}function _et(e){let t;for(;t=e.sourceEvent;)e=t;return e}function OA(e,t){if(e=_et(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Net={passive:!1},p2={capture:!0,passive:!1};function pI(e){e.stopImmediatePropagation()}function Lv(e){e.preventDefault(),e.stopImmediatePropagation()}function tce(e){var t=e.document.documentElement,r=Iu(e).on("dragstart.drag",Lv,p2);"onselectstart"in t?r.on("selectstart.drag",Lv,p2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function rce(e,t){var r=e.document.documentElement,n=Iu(e).on("dragstart.drag",null);t&&(n.on("click.drag",Lv,p2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const d_=e=>()=>e;function xO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}xO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ket(e){return!e.ctrlKey&&!e.button}function jet(){return this.parentNode}function Bet(e,t){return t??{x:e.x,y:e.y}}function Tet(){return navigator.maxTouchPoints||"ontouchstart"in this}function Iet(){var e=ket,t=jet,r=Bet,n=Tet,a={},s=Fk("start","drag","end"),i=0,o,c,u,d,f=0;function h(j){j.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,Net).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(j,k){if(!(d||!e.call(this,j,k))){var I=_(this,t.call(this,j,k),j,k,"mouse");I&&(Iu(j.view).on("mousemove.drag",g,p2).on("mouseup.drag",x,p2),tce(j.view),pI(j),u=!1,o=j.clientX,c=j.clientY,I("start",j))}}function g(j){if(Lv(j),!u){var k=j.clientX-o,I=j.clientY-c;u=k*k+I*I>f}a.mouse("drag",j)}function x(j){Iu(j.view).on("mousemove.drag mouseup.drag",null),rce(j.view,u),Lv(j),a.mouse("end",j)}function b(j,k){if(e.call(this,j,k)){var I=j.changedTouches,E=t.call(this,j,k),N=I.length,B,R;for(B=0;B<N;++B)(R=_(this,E,j,k,I[B].identifier,I[B]))&&(pI(j),R("start",j,I[B]))}}function y(j){var k=j.changedTouches,I=k.length,E,N;for(E=0;E<I;++E)(N=a[k[E].identifier])&&(Lv(j),N("drag",j,k[E]))}function w(j){var k=j.changedTouches,I=k.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<I;++E)(N=a[k[E].identifier])&&(pI(j),N("end",j,k[E]))}function _(j,k,I,E,N,B){var R=s.copy(),D=OA(B||I,k),O,L,M;if((M=r.call(j,new xO("beforestart",{sourceEvent:I,target:h,identifier:N,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:R}),E))!=null)return O=M.x-D[0]||0,L=M.y-D[1]||0,function J(V,K,z){var G=D,Y;switch(V){case"start":a[N]=J,Y=i++;break;case"end":delete a[N],--i;case"drag":D=OA(z||K,k),Y=i;break}R.call(V,j,new xO(V,{sourceEvent:K,subject:M,target:h,identifier:N,active:Y,x:D[0]+O,y:D[1]+L,dx:D[0]-G[0],dy:D[1]-G[1],dispatch:R}),E)}}return h.filter=function(j){return arguments.length?(e=typeof j=="function"?j:d_(!!j),h):e},h.container=function(j){return arguments.length?(t=typeof j=="function"?j:d_(j),h):t},h.subject=function(j){return arguments.length?(r=typeof j=="function"?j:d_(j),h):r},h.touchable=function(j){return arguments.length?(n=typeof j=="function"?j:d_(!!j),h):n},h.on=function(){var j=s.on.apply(s,arguments);return j===s?h:j},h.clickDistance=function(j){return arguments.length?(f=(j=+j)*j,h):Math.sqrt(f)},h}var C1=0,My=0,Ay=0,nce=1e3,pS,Uy,gS=0,Sg=0,Dk=0,g2=typeof performance=="object"&&performance.now?performance:Date,ace=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Z8(){return Sg||(ace(Fet),Sg=g2.now()+Dk)}function Fet(){Sg=0}function xS(){this._call=this._time=this._next=null}xS.prototype=sce.prototype={constructor:xS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Z8():+r)+(t==null?0:+t),!this._next&&Uy!==this&&(Uy?Uy._next=this:pS=this,Uy=this),this._call=e,this._time=r,vO()},stop:function(){this._call&&(this._call=null,this._time=1/0,vO())}};function sce(e,t,r){var n=new xS;return n.restart(e,t,r),n}function Oet(){Z8(),++C1;for(var e=pS,t;e;)(t=Sg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--C1}function Dq(){Sg=(gS=g2.now())+Dk,C1=My=0;try{Oet()}finally{C1=0,Pet(),Sg=0}}function Det(){var e=g2.now(),t=e-gS;t>nce&&(Dk-=t,gS=e)}function Pet(){for(var e,t=pS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:pS=r);Uy=e,vO(n)}function vO(e){if(!C1){My&&(My=clearTimeout(My));var t=e-Sg;t>24?(e<1/0&&(My=setTimeout(Dq,e-g2.now()-Dk)),Ay&&(Ay=clearInterval(Ay))):(Ay||(gS=g2.now(),Ay=setInterval(Det,nce)),C1=1,ace(Dq))}}function Pq(e,t,r){var n=new xS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Ret=Fk("start","end","cancel","interrupt"),Let=[],ice=0,Rq=1,bO=2,h5=3,Lq=4,yO=5,m5=6;function Pk(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;Met(e,r,{name:t,index:n,group:a,on:Ret,tween:Let,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ice})}function eM(e,t){var r=qd(e,t);if(r.state>ice)throw new Error("too late; already scheduled");return r}function lf(e,t){var r=qd(e,t);if(r.state>h5)throw new Error("too late; already running");return r}function qd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Met(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=sce(s,0,r.time);function s(u){r.state=Rq,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==Rq)return c();for(d in n)if(p=n[d],p.name===r.name){if(p.state===h5)return Pq(i);p.state===Lq?(p.state=m5,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=m5,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(Pq(function(){r.state===h5&&(r.state=Lq,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=bO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===bO){for(r.state=h5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=yO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===yO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=m5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function p5(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>bO&&n.state<yO,n.state=m5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function Uet(e){return this.each(function(){p5(this,e)})}function Qet(e,t){var r,n;return function(){var a=lf(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Het(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=lf(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=o;break}c===u&&a.push(o)}s.tween=a}}function Vet(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=qd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?Qet:Het)(r,e,t))}function tM(e,t,r){var n=e._id;return e.each(function(){var a=lf(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return qd(a,n).value[t]}}function oce(e,t){var r;return(typeof t=="number"?wd:t instanceof gg?BN:(r=gg(t))?(t=r,BN):Ere)(e,t)}function zet(e){return function(){this.removeAttribute(e)}}function $et(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Get(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function Ket(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function qet(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function Wet(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function Xet(e,t){var r=Ok(e),n=r==="transform"?Q4e:oce;return this.attrTween(e,typeof t=="function"?(r.local?Wet:qet)(r,n,tM(this,"attr."+e,t)):t==null?(r.local?$et:zet)(r):(r.local?Ket:Get)(r,n,t))}function Yet(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Jet(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Zet(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Jet(e,s)),r}return a._value=t,a}function ett(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Yet(e,s)),r}return a._value=t,a}function ttt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Ok(e);return this.tween(r,(n.local?Zet:ett)(n,t))}function rtt(e,t){return function(){eM(this,e).delay=+t.apply(this,arguments)}}function ntt(e,t){return t=+t,function(){eM(this,e).delay=t}}function att(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rtt:ntt)(t,e)):qd(this.node(),t).delay}function stt(e,t){return function(){lf(this,e).duration=+t.apply(this,arguments)}}function itt(e,t){return t=+t,function(){lf(this,e).duration=t}}function ott(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?stt:itt)(t,e)):qd(this.node(),t).duration}function ltt(e,t){if(typeof t!="function")throw new Error;return function(){lf(this,e).ease=t}}function ctt(e){var t=this._id;return arguments.length?this.each(ltt(t,e)):qd(this.node(),t).ease}function utt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;lf(this,e).ease=r}}function dtt(e){if(typeof e!="function")throw new Error;return this.each(utt(this._id,e))}function Att(e){typeof e!="function"&&(e=$le(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new jh(n,this._parents,this._name,this._id)}function ftt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],u=r[o],d=c.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new jh(i,this._parents,this._name,this._id)}function htt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function mtt(e,t,r){var n,a,s=htt(t)?eM:lf;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function ptt(e,t){var r=this._id;return arguments.length<2?qd(this.node(),r).on.on(e):this.each(mtt(r,e,t))}function gtt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function xtt(){return this.on("end.remove",gtt(this._id))}function vtt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Y8(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Pk(u[h],t,r,h,u,qd(d,r)));return new jh(s,this._parents,t,r)}function btt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=zle(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,g=qd(d,r),x=0,b=h.length;x<b;++x)(p=h[x])&&Pk(p,t,r,x,h,g);s.push(h),i.push(d)}return new jh(s,i,t,r)}var ytt=mE.prototype.constructor;function wtt(){return new ytt(this._groups,this._parents)}function Ett(e,t){var r,n,a;return function(){var s=E1(this,e),i=(this.style.removeProperty(e),E1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function lce(e){return function(){this.style.removeProperty(e)}}function Ctt(e,t,r){var n,a=r+"",s;return function(){var i=E1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function _tt(e,t,r){var n,a,s;return function(){var i=E1(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),E1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function Ntt(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=lf(this,e),u=c.on,d=c.value[s]==null?o||(o=lce(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function Stt(e,t,r){var n=(e+="")=="transform"?U4e:oce;return t==null?this.styleTween(e,Ett(e,n)).on("end.style."+e,lce(e)):typeof t=="function"?this.styleTween(e,_tt(e,n,tM(this,"style."+e,t))).each(Ntt(this._id,e)):this.styleTween(e,Ctt(e,n,t),r).on("end.style."+e,null)}function ktt(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function jtt(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&ktt(e,i,r)),n}return s._value=t,s}function Btt(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,jtt(e,t,r??""))}function Ttt(e){return function(){this.textContent=e}}function Itt(e){return function(){var t=e(this);this.textContent=t??""}}function Ftt(e){return this.tween("text",typeof e=="function"?Itt(tM(this,"text",e)):Ttt(e==null?"":e+""))}function Ott(e){return function(t){this.textContent=e.call(this,t)}}function Dtt(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Ott(a)),t}return n._value=e,n}function Ptt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Dtt(e))}function Rtt(){for(var e=this._name,t=this._id,r=cce(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)if(c=i[u]){var d=qd(c,t);Pk(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new jh(n,this._parents,e,r)}function Ltt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=lf(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),a===0&&s()})}var Mtt=0;function jh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function cce(){return++Mtt}var Qf=mE.prototype;jh.prototype={constructor:jh,select:vtt,selectAll:btt,selectChild:Qf.selectChild,selectChildren:Qf.selectChildren,filter:Att,merge:ftt,selection:wtt,transition:Rtt,call:Qf.call,nodes:Qf.nodes,node:Qf.node,size:Qf.size,empty:Qf.empty,each:Qf.each,on:ptt,attr:Xet,attrTween:ttt,style:Stt,styleTween:Btt,text:Ftt,textTween:Ptt,remove:xtt,tween:Vet,delay:att,duration:ott,ease:ctt,easeVarying:dtt,end:Ltt,[Symbol.iterator]:Qf[Symbol.iterator]};function Utt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qtt={time:null,delay:0,duration:250,ease:Utt};function Htt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Vtt(e){var t,r;e instanceof jh?(t=e._id,e=e._name):(t=cce(),(r=Qtt).time=Z8(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&Pk(c,e,t,u,i,r||Htt(c,t));return new jh(n,this._parents,e,t)}mE.prototype.interrupt=Uet;mE.prototype.transition=Vtt;const A_=e=>()=>e;function ztt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function ah(e,t,r){this.k=e,this.x=t,this.y=r}ah.prototype={constructor:ah,scale:function(e){return e===1?this:new ah(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ah(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cm=new ah(1,0,0);ah.prototype;function gI(e){e.stopImmediatePropagation()}function fy(e){e.preventDefault(),e.stopImmediatePropagation()}function $tt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gtt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Mq(){return this.__zoom||cm}function Ktt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qtt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wtt(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Xtt(){var e=$tt,t=Gtt,r=Wtt,n=Ktt,a=qtt,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=$4e,u=Fk("start","zoom","end"),d,f,h,p=500,g=150,x=0,b=10;function y(M){M.property("__zoom",Mq).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(M,J,V,K){var z=M.selection?M.selection():M;z.property("__zoom",Mq),M!==z?k(M,J,V,K):z.interrupt().each(function(){I(this,arguments).event(K).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},y.scaleBy=function(M,J,V,K){y.scaleTo(M,function(){var z=this.__zoom.k,G=typeof J=="function"?J.apply(this,arguments):J;return z*G},V,K)},y.scaleTo=function(M,J,V,K){y.transform(M,function(){var z=t.apply(this,arguments),G=this.__zoom,Y=V==null?j(z):typeof V=="function"?V.apply(this,arguments):V,te=G.invert(Y),P=typeof J=="function"?J.apply(this,arguments):J;return r(_(w(G,P),Y,te),z,i)},V,K)},y.translateBy=function(M,J,V,K){y.transform(M,function(){return r(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),i)},null,K)},y.translateTo=function(M,J,V,K,z){y.transform(M,function(){var G=t.apply(this,arguments),Y=this.__zoom,te=K==null?j(G):typeof K=="function"?K.apply(this,arguments):K;return r(cm.translate(te[0],te[1]).scale(Y.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof V=="function"?-V.apply(this,arguments):-V),G,i)},K,z)};function w(M,J){return J=Math.max(s[0],Math.min(s[1],J)),J===M.k?M:new ah(J,M.x,M.y)}function _(M,J,V){var K=J[0]-V[0]*M.k,z=J[1]-V[1]*M.k;return K===M.x&&z===M.y?M:new ah(M.k,K,z)}function j(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function k(M,J,V,K){M.on("start.zoom",function(){I(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(K).end()}).tween("zoom",function(){var z=this,G=arguments,Y=I(z,G).event(K),te=t.apply(z,G),P=V==null?j(te):typeof V=="function"?V.apply(z,G):V,H=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),X=z.__zoom,Z=typeof J=="function"?J.apply(z,G):J,ae=c(X.invert(P).concat(H/X.k),Z.invert(P).concat(H/Z.k));return function(le){if(le===1)le=Z;else{var ie=ae(le),ce=H/ie[2];le=new ah(ce,P[0]-ie[0]*ce,P[1]-ie[1]*ce)}Y.zoom(null,le)}})}function I(M,J,V){return!V&&M.__zooming||new E(M,J)}function E(M,J){this.that=M,this.args=J,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,J),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,J){return this.mouse&&M!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var J=Iu(this.that).datum();u.call(M,this.that,new ztt(M,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),J)}};function N(M,...J){if(!e.apply(this,arguments))return;var V=I(this,J).event(M),K=this.__zoom,z=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,n.apply(this,arguments)))),G=OA(M);if(V.wheel)(V.mouse[0][0]!==G[0]||V.mouse[0][1]!==G[1])&&(V.mouse[1]=K.invert(V.mouse[0]=G)),clearTimeout(V.wheel);else{if(K.k===z)return;V.mouse=[G,K.invert(G)],p5(this),V.start()}fy(M),V.wheel=setTimeout(Y,g),V.zoom("mouse",r(_(w(K,z),V.mouse[0],V.mouse[1]),V.extent,i));function Y(){V.wheel=null,V.end()}}function B(M,...J){if(h||!e.apply(this,arguments))return;var V=M.currentTarget,K=I(this,J,!0).event(M),z=Iu(M.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",H,!0),G=OA(M,V),Y=M.clientX,te=M.clientY;tce(M.view),gI(M),K.mouse=[G,this.__zoom.invert(G)],p5(this),K.start();function P(X){if(fy(X),!K.moved){var Z=X.clientX-Y,ae=X.clientY-te;K.moved=Z*Z+ae*ae>x}K.event(X).zoom("mouse",r(_(K.that.__zoom,K.mouse[0]=OA(X,V),K.mouse[1]),K.extent,i))}function H(X){z.on("mousemove.zoom mouseup.zoom",null),rce(X.view,K.moved),fy(X),K.event(X).end()}}function R(M,...J){if(e.apply(this,arguments)){var V=this.__zoom,K=OA(M.changedTouches?M.changedTouches[0]:M,this),z=V.invert(K),G=V.k*(M.shiftKey?.5:2),Y=r(_(w(V,G),K,z),t.apply(this,J),i);fy(M),o>0?Iu(this).transition().duration(o).call(k,Y,K,M):Iu(this).call(y.transform,Y,K,M)}}function D(M,...J){if(e.apply(this,arguments)){var V=M.touches,K=V.length,z=I(this,J,M.changedTouches.length===K).event(M),G,Y,te,P;for(gI(M),Y=0;Y<K;++Y)te=V[Y],P=OA(te,this),P=[P,this.__zoom.invert(P),te.identifier],z.touch0?!z.touch1&&z.touch0[2]!==P[2]&&(z.touch1=P,z.taps=0):(z.touch0=P,G=!0,z.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(z.taps<2&&(f=P[0],d=setTimeout(function(){d=null},p)),p5(this),z.start())}}function O(M,...J){if(this.__zooming){var V=I(this,J).event(M),K=M.changedTouches,z=K.length,G,Y,te,P;for(fy(M),G=0;G<z;++G)Y=K[G],te=OA(Y,this),V.touch0&&V.touch0[2]===Y.identifier?V.touch0[0]=te:V.touch1&&V.touch1[2]===Y.identifier&&(V.touch1[0]=te);if(Y=V.that.__zoom,V.touch1){var H=V.touch0[0],X=V.touch0[1],Z=V.touch1[0],ae=V.touch1[1],le=(le=Z[0]-H[0])*le+(le=Z[1]-H[1])*le,ie=(ie=ae[0]-X[0])*ie+(ie=ae[1]-X[1])*ie;Y=w(Y,Math.sqrt(le/ie)),te=[(H[0]+Z[0])/2,(H[1]+Z[1])/2],P=[(X[0]+ae[0])/2,(X[1]+ae[1])/2]}else if(V.touch0)te=V.touch0[0],P=V.touch0[1];else return;V.zoom("touch",r(_(Y,te,P),V.extent,i))}}function L(M,...J){if(this.__zooming){var V=I(this,J).event(M),K=M.changedTouches,z=K.length,G,Y;for(gI(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),G=0;G<z;++G)Y=K[G],V.touch0&&V.touch0[2]===Y.identifier?delete V.touch0:V.touch1&&V.touch1[2]===Y.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(Y=OA(Y,this),Math.hypot(f[0]-Y[0],f[1]-Y[1])<b)){var te=Iu(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return y.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:A_(+M),y):n},y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:A_(!!M),y):e},y.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:A_(!!M),y):a},y.extent=function(M){return arguments.length?(t=typeof M=="function"?M:A_([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),y):t},y.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],y):[s[0],s[1]]},y.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(M){return arguments.length?(r=M,y):r},y.duration=function(M){return arguments.length?(o=+M,y):o},y.interpolate=function(M){return arguments.length?(c=M,y):c},y.on=function(){var M=u.on.apply(u,arguments);return M===u?y:M},y.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,y):Math.sqrt(x)},y.tapDistance=function(M){return arguments.length?(b=+M,y):b},y}const Rk=S.createContext(null),Ytt=Rk.Provider,Bh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},uce=Bh.error001();function ds(e,t){const r=S.useContext(Rk);if(r===null)throw new Error(uce);return Hle(r,e,t)}const to=()=>{const e=S.useContext(Rk);if(e===null)throw new Error(uce);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Jtt=e=>e.userSelectionActive?"none":"all";function dce({position:e,children:t,className:r,style:n,...a}){const s=ds(Jtt),i=`${e}`.split("-");return nt.createElement("div",{className:Nl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Ztt({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:nt.createElement(dce,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},nt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const ert=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...d})=>{const f=S.useRef(null),[h,p]=S.useState({x:0,y:0,width:0,height:0}),g=Nl(["react-flow__edge-textwrapper",u]);return S.useEffect(()=>{if(f.current){const x=f.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:nt.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&nt.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),nt.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var trt=S.memo(ert);const rM=e=>({width:e.offsetWidth,height:e.offsetHeight}),_1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),nM=(e={x:0,y:0},t)=>({x:_1(e.x,t[0][0],t[1][0]),y:_1(e.y,t[0][1],t[1][1])}),Uq=(e,t,r)=>e<t?_1(Math.abs(e-t),1,50)/50:e>r?-_1(Math.abs(e-r),1,50)/50:0,Ace=(e,t)=>{const r=Uq(e.x,35,t.width-35)*20,n=Uq(e.y,35,t.height-35)*20;return[r,n]},fce=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},rrt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),aM=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),nrt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),Qq=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),wO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},art=e=>Du(e.width)&&Du(e.height)&&Du(e.x)&&Du(e.y),Du=e=>!isNaN(e)&&isFinite(e),Ss=Symbol.for("internals"),hce=["Enter"," ","Escape"],srt=(e,t)=>{},irt=e=>"nativeEvent"in e;function EO(e){var a,s;const t=irt(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const mce=e=>"clientX"in e,um=(e,t)=>{var s,i;const r=mce(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},vS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},pE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>nt.createElement(nt.Fragment,null,nt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&nt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&Du(r)&&Du(n)?nt.createElement(trt,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u}):null);pE.displayName="BaseEdge";function hy(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function pce({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function gce({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var kg;(function(e){e.Strict="strict",e.Loose="loose"})(kg||(kg={}));var Qp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Qp||(Qp={}));var x2;(function(e){e.Partial="partial",e.Full="full"})(x2||(x2={}));var V0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(V0||(V0={}));var bS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(bS||(bS={}));var Cr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Cr||(Cr={}));function Hq({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Cr.Left||e===Cr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function xce({sourceX:e,sourceY:t,sourcePosition:r=Cr.Bottom,targetX:n,targetY:a,targetPosition:s=Cr.Top}){const[i,o]=Hq({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=Hq({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=gce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${o} ${c},${u} ${n},${a}`,d,f,h,p]}const sM=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Cr.Bottom,targetPosition:s=Cr.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[b,y,w]=xce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return nt.createElement(pE,{path:b,labelX:y,labelY:w,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})});sM.displayName="SimpleBezierEdge";const Vq={[Cr.Left]:{x:-1,y:0},[Cr.Right]:{x:1,y:0},[Cr.Top]:{x:0,y:-1},[Cr.Bottom]:{x:0,y:1}},ort=({source:e,sourcePosition:t=Cr.Bottom,target:r})=>t===Cr.Left||t===Cr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},zq=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lrt({source:e,sourcePosition:t=Cr.Bottom,target:r,targetPosition:n=Cr.Top,center:a,offset:s}){const i=Vq[t],o=Vq[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=ort({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,x;const b={x:0,y:0},y={x:0,y:0},[w,_,j,k]=pce({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??w,x=a.y??_;const E=[{x:g,y:c.y},{x:g,y:u.y}],N=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?p=f==="x"?E:N:p=f==="x"?N:E}else{const E=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(f==="x"?p=i.x===h?N:E:p=i.y===h?E:N,t===n){const L=Math.abs(e[f]-r[f]);if(L<=s){const M=Math.min(s-1,s-L);i[f]===h?b[f]=(c[f]>e[f]?-1:1)*M:y[f]=(u[f]>r[f]?-1:1)*M}}if(t!==n){const L=f==="x"?"y":"x",M=i[f]===o[L],J=c[L]>u[L],V=c[L]<u[L];(i[f]===1&&(!M&&J||M&&V)||i[f]!==1&&(!M&&V||M&&J))&&(p=f==="x"?E:N)}const B={x:c.x+b.x,y:c.y+b.y},R={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(B.x-p[0].x),Math.abs(R.x-p[0].x)),O=Math.max(Math.abs(B.y-p[0].y),Math.abs(R.y-p[0].y));D>=O?(g=(B.x+R.x)/2,x=p[0].y):(g=p[0].x,x=(B.y+R.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,x,j,k]}function crt(e,t,r,n){const a=Math.min(zq(e,t)/2,zq(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function CO({sourceX:e,sourceY:t,sourcePosition:r=Cr.Bottom,targetX:n,targetY:a,targetPosition:s=Cr.Top,borderRadius:i=5,centerX:o,centerY:c,offset:u=20}){const[d,f,h,p,g]=lrt({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:u});return[d.reduce((b,y,w)=>{let _="";return w>0&&w<d.length-1?_=crt(d[w-1],y,d[w+1],i):_=`${w===0?"M":"L"}${y.x} ${y.y}`,b+=_,b},""),f,h,p,g]}const Lk=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Cr.Bottom,targetPosition:h=Cr.Top,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,_]=CO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return nt.createElement(pE,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});Lk.displayName="SmoothStepEdge";const iM=S.memo(e=>{var t;return nt.createElement(Lk,{...e,pathOptions:S.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});iM.displayName="StepEdge";function urt({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=pce({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const oM=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,x,b]=urt({sourceX:e,sourceY:t,targetX:r,targetY:n});return nt.createElement(pE,{path:g,labelX:x,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});oM.displayName="StraightEdge";function f_(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function $q({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Cr.Left:return[t-f_(t-n,s),r];case Cr.Right:return[t+f_(n-t,s),r];case Cr.Top:return[t,r-f_(r-a,s)];case Cr.Bottom:return[t,r+f_(a-r,s)]}}function vce({sourceX:e,sourceY:t,sourcePosition:r=Cr.Bottom,targetX:n,targetY:a,targetPosition:s=Cr.Top,curvature:i=.25}){const[o,c]=$q({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=$q({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=gce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${n},${a}`,f,h,p,g]}const yS=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Cr.Bottom,targetPosition:s=Cr.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,_]=vce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return nt.createElement(pE,{path:y,labelX:w,labelY:_,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});yS.displayName="BezierEdge";const lM=S.createContext(null),drt=lM.Provider;lM.Consumer;const Art=()=>S.useContext(lM),frt=e=>"id"in e&&"source"in e&&"target"in e,hrt=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,_O=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,mrt=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),prt=(e,t)=>{if(!e.source||!e.target)return t;let r;return frt(e)?r={...e}:r={...e,id:hrt(e)},mrt(r,t)?t:t.concat(r)},NO=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},bce=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Mv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},cM=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Mv(a,t).positionAbsolute;return rrt(n,aM({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nrt(r)},yce=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:x}=Mv(d,o),b={x:x.x,y:x.y,width:f||0,height:h||0},y=wO(c,b),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,j=(f||0)*(h||0);(w||_||y>=j||d.dragging)&&u.push(d)}),u},wce=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Ece=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),u=_1(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},Sp=(e,t=0)=>e.transition().duration(t);function Gq(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function grt(e,t,r,n,a,s){const{x:i,y:o}=um(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=uM(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===b);return{handle:{id:b,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const b=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:b}]:x===f&&d.push({handle:g,validHandleResult:b}),f=x)}}),!d.length)return{handle:null,validHandleResult:Cce()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>p?g.type==="target":h?x.isValid:!0)||d[0]}const xrt={source:null,target:null,sourceHandle:null,targetHandle:null},Cce=()=>({handleDomNode:null,isValid:!1,connection:xrt,endHandle:null});function _ce(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Cce(),handleDomNode:c};if(c){const d=uM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=x,p&&g&&(t===kg.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function vrt({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ss]){const{handleBounds:i}=s[Ss];let o=[],c=[];i&&(o=Gq(s,i,"source",`${t}-${r}-${n}`),c=Gq(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function uM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function brt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Nce({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:u}){const d=fce(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:x,panBy:b,getNodes:y,cancelConnection:w}=s();let _=0,j;const{x:k,y:I}=um(e),E=d==null?void 0:d.elementFromPoint(k,I),N=uM(c,E),B=h==null?void 0:h.getBoundingClientRect();if(!B||!N)return;let R,D=um(e,B),O=!1,L=null,M=!1,J=null;const V=vrt({nodes:y(),nodeId:r,handleId:t,handleType:N}),K=()=>{if(!p)return;const[Y,te]=Ace(D,B);b({x:Y,y:te}),_=requestAnimationFrame(K)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:t,type:N},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:N});function z(Y){const{transform:te}=s();D=um(Y,B);const{handle:P,validHandleResult:H}=grt(Y,d,NO(D,te,!1,[1,1]),g,V,X=>_ce(X,f,r,t,a?"target":"source",o,d));if(j=P,O||(K(),O=!0),J=H.handleDomNode,L=H.connection,M=H.isValid,i({connectionPosition:j&&M?bce({x:j.x,y:j.y},te):D,connectionStatus:brt(!!j,M),connectionEndHandle:H.endHandle}),!j&&!M&&!J)return xI(R);L.source!==L.target&&J&&(xI(R),R=J,J.classList.add("connecting","react-flow__handle-connecting"),J.classList.toggle("valid",M),J.classList.toggle("react-flow__handle-valid",M))}function G(Y){var te,P;(j||J)&&L&&M&&(n==null||n(L)),(P=(te=s()).onConnectEnd)==null||P.call(te,Y),c&&(u==null||u(Y)),xI(R),w(),cancelAnimationFrame(_),O=!1,M=!1,L=null,J=null,d.removeEventListener("mousemove",z),d.removeEventListener("mouseup",G),d.removeEventListener("touchmove",z),d.removeEventListener("touchend",G)}d.addEventListener("mousemove",z),d.addEventListener("mouseup",G),d.addEventListener("touchmove",z),d.addEventListener("touchend",G)}const Kq=()=>!0,yrt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),wrt=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Sce=S.forwardRef(({type:e="source",position:t=Cr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var B,R;const g=i||null,x=e==="target",b=to(),y=Art(),{connectOnClick:w,noPanClassName:_}=ds(yrt,sl),{connecting:j,clickConnecting:k}=ds(wrt(y,g,e),sl);y||(R=(B=b.getState()).onError)==null||R.call(B,"010",Bh.error010());const I=D=>{const{defaultEdgeOptions:O,onConnect:L,hasDefaultEdges:M}=b.getState(),J={...O,...D};if(M){const{edges:V,setEdges:K}=b.getState();K(prt(J,V))}L==null||L(J),o==null||o(J)},E=D=>{if(!y)return;const O=mce(D);a&&(O&&D.button===0||!O)&&Nce({event:D,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||Kq}),O?d==null||d(D):f==null||f(D)},N=D=>{const{onClickConnectStart:O,onClickConnectEnd:L,connectionClickStartHandle:M,connectionMode:J,isValidConnection:V}=b.getState();if(!y||!M&&!a)return;if(!M){O==null||O(D,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const K=fce(D.target),z=r||V||Kq,{connection:G,isValid:Y}=_ce({nodeId:y,id:g,type:e},J,M.nodeId,M.handleId||null,M.type,z,K);Y&&I(G),L==null||L(D),b.setState({connectionClickStartHandle:null})};return nt.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Nl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:k,connectionindicator:n&&(a&&!j||s&&j)}]),onMouseDown:E,onTouchStart:E,onClick:w?N:void 0,ref:p,...h},c)});Sce.displayName="Handle";var N1=S.memo(Sce);const kce=({data:e,isConnectable:t,targetPosition:r=Cr.Top,sourcePosition:n=Cr.Bottom})=>nt.createElement(nt.Fragment,null,nt.createElement(N1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,nt.createElement(N1,{type:"source",position:n,isConnectable:t}));kce.displayName="DefaultNode";var SO=S.memo(kce);const jce=({data:e,isConnectable:t,sourcePosition:r=Cr.Bottom})=>nt.createElement(nt.Fragment,null,e==null?void 0:e.label,nt.createElement(N1,{type:"source",position:r,isConnectable:t}));jce.displayName="InputNode";var Bce=S.memo(jce);const Tce=({data:e,isConnectable:t,targetPosition:r=Cr.Top})=>nt.createElement(nt.Fragment,null,nt.createElement(N1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Tce.displayName="OutputNode";var Ice=S.memo(Tce);const dM=()=>null;dM.displayName="GroupNode";const Ert=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),h_=e=>e.id;function Crt(e,t){return sl(e.selectedNodes.map(h_),t.selectedNodes.map(h_))&&sl(e.selectedEdges.map(h_),t.selectedEdges.map(h_))}const Fce=S.memo(({onSelectionChange:e})=>{const t=to(),{selectedNodes:r,selectedEdges:n}=ds(Ert,Crt);return S.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Fce.displayName="SelectionListener";const _rt=e=>!!e.onSelectionChange;function Nrt({onSelectionChange:e}){const t=ds(_rt);return e||t?nt.createElement(Fce,{onSelectionChange:e}):null}const Srt=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Px(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function En(e,t,r){S.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const krt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:x,maxZoom:b,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:j,connectionMode:k,snapGrid:I,snapToGrid:E,translateExtent:N,connectOnClick:B,defaultEdgeOptions:R,fitView:D,fitViewOptions:O,onNodesDelete:L,onEdgesDelete:M,onNodeDrag:J,onNodeDragStart:V,onNodeDragStop:K,onSelectionDrag:z,onSelectionDragStart:G,onSelectionDragStop:Y,noPanClassName:te,nodeOrigin:P,rfId:H,autoPanOnConnect:X,autoPanOnNodeDrag:Z,onError:ae,connectionRadius:le,isValidConnection:ie,nodeDragThreshold:ce})=>{const{setNodes:fe,setEdges:Ie,setDefaultNodesAndEdges:ne,setMinZoom:_e,setMaxZoom:Fe,setTranslateExtent:Se,setNodeExtent:me,reset:Te}=ds(Srt,sl),Me=to();return S.useEffect(()=>{const We=n==null?void 0:n.map(be=>({...be,...R}));return ne(r,We),()=>{Te()}},[]),En("defaultEdgeOptions",R,Me.setState),En("connectionMode",k,Me.setState),En("onConnect",a,Me.setState),En("onConnectStart",s,Me.setState),En("onConnectEnd",i,Me.setState),En("onClickConnectStart",o,Me.setState),En("onClickConnectEnd",c,Me.setState),En("nodesDraggable",u,Me.setState),En("nodesConnectable",d,Me.setState),En("nodesFocusable",f,Me.setState),En("edgesFocusable",h,Me.setState),En("edgesUpdatable",p,Me.setState),En("elementsSelectable",j,Me.setState),En("elevateNodesOnSelect",g,Me.setState),En("snapToGrid",E,Me.setState),En("snapGrid",I,Me.setState),En("onNodesChange",w,Me.setState),En("onEdgesChange",_,Me.setState),En("connectOnClick",B,Me.setState),En("fitViewOnInit",D,Me.setState),En("fitViewOnInitOptions",O,Me.setState),En("onNodesDelete",L,Me.setState),En("onEdgesDelete",M,Me.setState),En("onNodeDrag",J,Me.setState),En("onNodeDragStart",V,Me.setState),En("onNodeDragStop",K,Me.setState),En("onSelectionDrag",z,Me.setState),En("onSelectionDragStart",G,Me.setState),En("onSelectionDragStop",Y,Me.setState),En("noPanClassName",te,Me.setState),En("nodeOrigin",P,Me.setState),En("rfId",H,Me.setState),En("autoPanOnConnect",X,Me.setState),En("autoPanOnNodeDrag",Z,Me.setState),En("onError",ae,Me.setState),En("connectionRadius",le,Me.setState),En("isValidConnection",ie,Me.setState),En("nodeDragThreshold",ce,Me.setState),Px(e,fe),Px(t,Ie),Px(x,_e),Px(b,Fe),Px(N,Se),Px(y,me),null},qq={display:"none"},jrt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Oce="react-flow__node-desc",Dce="react-flow__edge-desc",Brt="react-flow__aria-live",Trt=e=>e.ariaLiveMessage;function Irt({rfId:e}){const t=ds(Trt);return nt.createElement("div",{id:`${Brt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:jrt},t)}function Frt({rfId:e,disableKeyboardA11y:t}){return nt.createElement(nt.Fragment,null,nt.createElement("div",{id:`${Oce}-${e}`,style:qq},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),nt.createElement("div",{id:`${Dce}-${e}`,style:qq},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&nt.createElement(Irt,{rfId:e}))}var v2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=S.useState(!1),a=S.useRef(!1),s=S.useRef(new Set([])),[i,o]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return S.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&EO(p))return!1;const x=Xq(p.code,o);s.current.add(p[x]),Wq(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&EO(p))return!1;const x=Xq(p.code,o);Wq(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function Wq(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function Xq(e,t){return t.includes(e)?"code":"key"}function Pce(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Mv(s,n);return Pce(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ss])==null?void 0:o.z)??0)>(r.z??0)?((c=s[Ss])==null?void 0:c.z)??0:r.z??0},n)}function Rce(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=Pce(n,e,{...n.position,z:((s=n[Ss])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Ss].z=c,r!=null&&r[n.id]&&(n[Ss].isParent=!0)}})}function vI(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const c=(Du(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ss,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Ss])==null?void 0:p.handleBounds,z:c}}),a.set(o.id,d)}),Rce(a,r,s),a}function Lce(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&c&&(h||!t.initial)){const g=r().filter(b=>{var w;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===b.id):y}),x=g.every(b=>b.width&&b.height);if(g.length>0&&x){const b=cM(g,f),{x:y,y:w,zoom:_}=Ece(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),j=cm.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?o.transform(Sp(c,t.duration),j):o.transform(c,j),!0}}return!1}function Ort(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ss]:n[Ss],selected:r.selected})}),new Map(t)}function Drt(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function m_({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:Ort(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:Drt(t,s)}),o==null||o(t))}const Rx=()=>{},Prt={zoomIn:Rx,zoomOut:Rx,zoomTo:Rx,getZoom:()=>1,setViewport:Rx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Rx,fitBounds:Rx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Rrt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Lrt=()=>{const e=to(),{d3Zoom:t,d3Selection:r}=ds(Rrt,sl);return S.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Sp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Sp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Sp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,u=cm.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(Sp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>Lce(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=c/2-s*d,p=cm.translate(f,h).scale(d);t.transform(Sp(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Ece(a,i,o,c,u,(s==null?void 0:s.padding)??.1),p=cm.translate(d,f).scale(h);t.transform(Sp(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),NO(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return NO(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),u=bce(a,s);return{x:u.x+o,y:u.y+c}},viewportInitialized:!0}:Prt,[t,r])};function Mk(){const e=Lrt(),t=to(),r=S.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=S.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=S.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(b=>({...b}))},[]),s=S.useCallback(x=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===x)},[]),i=S.useCallback(x=>{const{getNodes:b,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),j=b(),k=typeof x=="function"?x(j):x;if(w)y(k);else if(_){const I=k.length===0?j.map(E=>({type:"remove",id:E.id})):k.map(E=>({item:E,type:"reset"}));_(I)}},[]),o=S.useCallback(x=>{const{edges:b=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),j=typeof x=="function"?x(b):x;if(w)y(j);else if(_){const k=j.length===0?b.map(I=>({type:"remove",id:I.id})):j.map(I=>({item:I,type:"reset"}));_(k)}},[]),c=S.useCallback(x=>{const b=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:j}=t.getState();if(_){const I=[...y(),...b];w(I)}else if(j){const k=b.map(I=>({item:I,type:"add"}));j(k)}},[]),u=S.useCallback(x=>{const b=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:j}=t.getState();if(_)w([...y,...b]);else if(j){const k=b.map(I=>({item:I,type:"add"}));j(k)}},[]),d=S.useCallback(()=>{const{getNodes:x,edges:b=[],transform:y}=t.getState(),[w,_,j]=y;return{nodes:x().map(k=>({...k})),edges:b.map(k=>({...k})),viewport:{x:w,y:_,zoom:j}}},[]),f=S.useCallback(({nodes:x,edges:b})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:j,hasDefaultEdges:k,onNodesDelete:I,onEdgesDelete:E,onNodesChange:N,onEdgesChange:B}=t.getState(),R=(x||[]).map(J=>J.id),D=(b||[]).map(J=>J.id),O=w().reduce((J,V)=>{const K=V.parentNode||V.parentId,z=!R.includes(V.id)&&K&&J.find(Y=>Y.id===K);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(R.includes(V.id)||z)&&J.push(V),J},[]),L=_.filter(J=>typeof J.deletable=="boolean"?J.deletable:!0),M=L.filter(J=>D.includes(J.id));if(O||M){const J=wce(O,L),V=[...M,...J],K=V.reduce((z,G)=>(z.includes(G.id)||z.push(G.id),z),[]);if((k||j)&&(k&&t.setState({edges:_.filter(z=>!K.includes(z.id))}),j&&(O.forEach(z=>{y.delete(z.id)}),t.setState({nodeInternals:new Map(y)}))),K.length>0&&(E==null||E(V),B&&B(K.map(z=>({id:z,type:"remove"})))),O.length>0&&(I==null||I(O),N)){const z=O.map(G=>({id:G.id,type:"remove"}));N(z)}}},[]),h=S.useCallback(x=>{const b=art(x),y=b?null:t.getState().nodeInternals.get(x.id);return!b&&!y?[null,null,b]:[b?x:Qq(y),y,b]},[]),p=S.useCallback((x,b=!0,y)=>{const[w,_,j]=h(x);return w?(y||t.getState().getNodes()).filter(k=>{if(!j&&(k.id===_.id||!k.positionAbsolute))return!1;const I=Qq(k),E=wO(I,w);return b&&E>0||E>=w.width*w.height}):[]},[]),g=S.useCallback((x,b,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=wO(w,b);return y&&_>0||_>=w.width*w.height},[]);return S.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,c,u,d,f,p,g])}const Mrt={actInsideInputWithModifier:!1};var Urt=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=to(),{deleteElements:n}=Mk(),a=v2(e,Mrt),s=v2(t);S.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),S.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Qrt(e){const t=to();S.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=rM(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Bh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const AM={position:"absolute",width:"100%",height:"100%",top:0,left:0},Hrt=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,p_=e=>({x:e.x,y:e.y,zoom:e.k}),Lx=(e,t)=>e.target.closest(`.${t}`),Yq=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Jq=e=>{const t=e.ctrlKey&&vS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Vrt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),zrt=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Qp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:j})=>{const k=S.useRef(),I=to(),E=S.useRef(!1),N=S.useRef(!1),B=S.useRef(null),R=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:O,d3ZoomHandler:L,userSelectionActive:M}=ds(Vrt,sl),J=v2(b),V=S.useRef(0),K=S.useRef(!1),z=S.useRef();return Qrt(B),S.useEffect(()=>{if(B.current){const G=B.current.getBoundingClientRect(),Y=Xtt().scaleExtent([g,x]).translateExtent(p),te=Iu(B.current).call(Y),P=cm.translate(h.x,h.y).scale(_1(h.zoom,g,x)),H=[[0,0],[G.width,G.height]],X=Y.constrain()(P,H,p);Y.transform(te,X),Y.wheelDelta(Jq),I.setState({d3Zoom:Y,d3Selection:te,d3ZoomHandler:te.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:B.current.closest(".react-flow")})}},[]),S.useEffect(()=>{O&&D&&(i&&!J&&!M?O.on("wheel.zoom",G=>{if(Lx(G,_))return!1;G.preventDefault(),G.stopImmediatePropagation();const Y=O.property("__zoom").k||1;if(G.ctrlKey&&s){const ie=OA(G),ce=Jq(G),fe=Y*Math.pow(2,ce);D.scaleTo(O,fe,ie,G);return}const te=G.deltaMode===1?20:1;let P=c===Qp.Vertical?0:G.deltaX*te,H=c===Qp.Horizontal?0:G.deltaY*te;!vS()&&G.shiftKey&&c!==Qp.Vertical&&(P=G.deltaY*te,H=0),D.translateBy(O,-(P/Y)*o,-(H/Y)*o,{internal:!0});const X=p_(O.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:ae,onViewportChangeEnd:le}=I.getState();clearTimeout(z.current),K.current||(K.current=!0,t==null||t(G,X),Z==null||Z(X)),K.current&&(e==null||e(G,X),ae==null||ae(X),z.current=setTimeout(()=>{r==null||r(G,X),le==null||le(X),K.current=!1},150))},{passive:!1}):typeof L<"u"&&O.on("wheel.zoom",function(G,Y){if(!y&&G.type==="wheel"&&!G.ctrlKey||Lx(G,_))return null;G.preventDefault(),L.call(this,G,Y)},{passive:!1}))},[M,i,c,O,D,L,J,s,y,_,t,e,r]),S.useEffect(()=>{D&&D.on("start",G=>{var P,H;if(!G.sourceEvent||G.sourceEvent.internal)return null;V.current=(P=G.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:Y}=I.getState(),te=p_(G.transform);E.current=!0,R.current=te,((H=G.sourceEvent)==null?void 0:H.type)==="mousedown"&&I.setState({paneDragging:!0}),Y==null||Y(te),t==null||t(G.sourceEvent,te)})},[D,t]),S.useEffect(()=>{D&&(M&&!E.current?D.on("zoom",null):M||D.on("zoom",G=>{var te;const{onViewportChange:Y}=I.getState();if(I.setState({transform:[G.transform.x,G.transform.y,G.transform.k]}),N.current=!!(n&&Yq(f,V.current??0)),(e||Y)&&!((te=G.sourceEvent)!=null&&te.internal)){const P=p_(G.transform);Y==null||Y(P),e==null||e(G.sourceEvent,P)}}))},[M,D,e,f,n]),S.useEffect(()=>{D&&D.on("end",G=>{if(!G.sourceEvent||G.sourceEvent.internal)return null;const{onViewportChangeEnd:Y}=I.getState();if(E.current=!1,I.setState({paneDragging:!1}),n&&Yq(f,V.current??0)&&!N.current&&n(G.sourceEvent),N.current=!1,(r||Y)&&Hrt(R.current,G.transform)){const te=p_(G.transform);R.current=te,clearTimeout(k.current),k.current=setTimeout(()=>{Y==null||Y(te),r==null||r(G.sourceEvent,te)},i?150:0)}})},[D,i,f,r,n]),S.useEffect(()=>{D&&D.filter(G=>{const Y=J||a,te=s&&G.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&G.button===1&&G.type==="mousedown"&&(Lx(G,"react-flow__node")||Lx(G,"react-flow__edge")))return!0;if(!f&&!Y&&!i&&!u&&!s||M||!u&&G.type==="dblclick"||Lx(G,_)&&G.type==="wheel"||Lx(G,j)&&(G.type!=="wheel"||i&&G.type==="wheel"&&!J)||!s&&G.ctrlKey&&G.type==="wheel"||!Y&&!i&&!te&&G.type==="wheel"||!f&&(G.type==="mousedown"||G.type==="touchstart")||Array.isArray(f)&&!f.includes(G.button)&&G.type==="mousedown")return!1;const P=Array.isArray(f)&&f.includes(G.button)||!G.button||G.button<=1;return(!G.ctrlKey||G.type==="wheel")&&P})},[M,D,a,s,i,u,f,d,J]),nt.createElement("div",{className:"react-flow__renderer",ref:B,style:AM},w)},$rt=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Grt(){const{userSelectionActive:e,userSelectionRect:t}=ds($rt,sl);return e&&t?nt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Zq(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Mce(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&Zq(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&Zq(n,i);break}case"remove":return n}return n.push(i),n},r)}function Uce(e,t){return Mce(e,t)}function Krt(e,t){return Mce(e,t)}const P0=(e,t)=>({id:e,type:"select",selected:t});function pv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(P0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(P0(n.id,!1))),r},[])}const bI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},qrt=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Qce=S.memo(({isSelecting:e,selectionMode:t=x2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=S.useRef(null),p=to(),g=S.useRef(0),x=S.useRef(0),b=S.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=ds(qrt,sl),j=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},k=L=>{s==null||s(L),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}i==null||i(L)},E=o?L=>o(L):void 0,N=L=>{const{resetSelectedElements:M,domNode:J}=p.getState();if(b.current=J==null?void 0:J.getBoundingClientRect(),!w||!e||L.button!==0||L.target!==h.current||!b.current)return;const{x:V,y:K}=um(L,b.current);M(),p.setState({userSelectionRect:{width:0,height:0,startX:V,startY:K,x:V,y:K}}),n==null||n(L)},B=L=>{const{userSelectionRect:M,nodeInternals:J,edges:V,transform:K,onNodesChange:z,onEdgesChange:G,nodeOrigin:Y,getNodes:te}=p.getState();if(!e||!b.current||!M)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=um(L,b.current),H=M.startX??0,X=M.startY??0,Z={...M,x:P.x<H?P.x:H,y:P.y<X?P.y:X,width:Math.abs(P.x-H),height:Math.abs(P.y-X)},ae=te(),le=yce(J,Z,K,t===x2.Partial,!0,Y),ie=wce(le,V).map(fe=>fe.id),ce=le.map(fe=>fe.id);if(g.current!==ce.length){g.current=ce.length;const fe=pv(ae,ce);fe.length&&(z==null||z(fe))}if(x.current!==ie.length){x.current=ie.length;const fe=pv(V,ie);fe.length&&(G==null||G(fe))}p.setState({userSelectionRect:Z})},R=L=>{if(L.button!==0)return;const{userSelectionRect:M}=p.getState();!y&&M&&L.target===h.current&&(k==null||k(L)),p.setState({nodesSelectionActive:g.current>0}),j(),a==null||a(L)},D=L=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),j()},O=w&&(e||y);return nt.createElement("div",{className:Nl(["react-flow__pane",{dragging:_,selection:e}]),onClick:O?void 0:bI(k,h),onContextMenu:bI(I,h),onWheel:bI(E,h),onMouseEnter:O?void 0:c,onMouseDown:O?N:void 0,onMouseMove:O?B:u,onMouseUp:O?R:void 0,onMouseLeave:O?D:d,ref:h,style:AM},f,nt.createElement(Grt,null))});Qce.displayName="Pane";function Hce(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:Hce(n,t):!1}function eW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Wrt(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!Hce(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Xrt(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Vce(e,t,r,n,a=[0,0],s){const i=Xrt(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:p}=Mv(f,a).positionAbsolute;o=f&&Du(h)&&Du(p)&&Du(f.width)&&Du(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",Bh.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:p}=Mv(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Mv(f,a).positionAbsolute}const d=o&&o!=="parent"?nM(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function yI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const tW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...rM(c)}})};function my(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function kO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),u=o.get(e);if(!u){c==null||c("012",Bh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Yrt(){const e=to();return S.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function wI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function zce({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=to(),[c,u]=S.useState(!1),d=S.useRef([]),f=S.useRef({x:null,y:null}),h=S.useRef(0),p=S.useRef(null),g=S.useRef({x:0,y:0}),x=S.useRef(null),b=S.useRef(!1),y=S.useRef(!1),w=S.useRef(!1),_=Yrt();return S.useEffect(()=>{if(e!=null&&e.current){const j=Iu(e.current),k=({x:N,y:B})=>{const{nodeInternals:R,onNodeDrag:D,onSelectionDrag:O,updateNodePositions:L,nodeExtent:M,snapGrid:J,snapToGrid:V,nodeOrigin:K,onError:z}=o.getState();f.current={x:N,y:B};let G=!1,Y={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const P=cM(d.current,K);Y=aM(P)}if(d.current=d.current.map(P=>{const H={x:N-P.distance.x,y:B-P.distance.y};V&&(H.x=J[0]*Math.round(H.x/J[0]),H.y=J[1]*Math.round(H.y/J[1]));const X=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!P.extent&&(X[0][0]=P.positionAbsolute.x-Y.x+M[0][0],X[1][0]=P.positionAbsolute.x+(P.width??0)-Y.x2+M[1][0],X[0][1]=P.positionAbsolute.y-Y.y+M[0][1],X[1][1]=P.positionAbsolute.y+(P.height??0)-Y.y2+M[1][1]);const Z=Vce(P,H,R,X,K,z);return G=G||P.position.x!==Z.position.x||P.position.y!==Z.position.y,P.position=Z.position,P.positionAbsolute=Z.positionAbsolute,P}),!G)return;L(d.current,!0,!0),u(!0);const te=a?D:wI(O);if(te&&x.current){const[P,H]=yI({nodeId:a,dragItems:d.current,nodeInternals:R});te(x.current,P,H)}},I=()=>{if(!p.current)return;const[N,B]=Ace(g.current,p.current);if(N!==0||B!==0){const{transform:R,panBy:D}=o.getState();f.current.x=(f.current.x??0)-N/R[2],f.current.y=(f.current.y??0)-B/R[2],D({x:N,y:B})&&k(f.current)}h.current=requestAnimationFrame(I)},E=N=>{var K;const{nodeInternals:B,multiSelectionActive:R,nodesDraggable:D,unselectNodesAndEdges:O,onNodeDragStart:L,onSelectionDragStart:M}=o.getState();y.current=!0;const J=a?L:wI(M);(!i||!s)&&!R&&a&&((K=B.get(a))!=null&&K.selected||O()),a&&s&&i&&kO({id:a,store:o,nodeRef:e});const V=_(N);if(f.current=V,d.current=Wrt(B,D,V,a),J&&d.current){const[z,G]=yI({nodeId:a,dragItems:d.current,nodeInternals:B});J(N.sourceEvent,z,G)}};if(t)j.on(".drag",null);else{const N=Iet().on("start",B=>{const{domNode:R,nodeDragThreshold:D}=o.getState();D===0&&E(B),w.current=!1;const O=_(B);f.current=O,p.current=(R==null?void 0:R.getBoundingClientRect())||null,g.current=um(B.sourceEvent,p.current)}).on("drag",B=>{var L,M;const R=_(B),{autoPanOnNodeDrag:D,nodeDragThreshold:O}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&y.current&&D&&(b.current=!0,I()),!y.current){const J=R.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),V=R.ySnapped-(((M=f==null?void 0:f.current)==null?void 0:M.y)??0);Math.sqrt(J*J+V*V)>O&&E(B)}(f.current.x!==R.xSnapped||f.current.y!==R.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=um(B.sourceEvent,p.current),k(R))}}).on("end",B=>{if(!(!y.current||w.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:R,nodeInternals:D,onNodeDragStop:O,onSelectionDragStop:L}=o.getState(),M=a?O:wI(L);if(R(d.current,!1,!1),M){const[J,V]=yI({nodeId:a,dragItems:d.current,nodeInternals:D});M(B.sourceEvent,J,V)}}}).filter(B=>{const R=B.target;return!B.button&&(!r||!eW(R,`.${r}`,e))&&(!n||eW(R,n,e))});return j.call(N),()=>{j.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,_]),c}function $ce(){const e=to();return S.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=o?c[0]:5,p=o?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,b=r.y*p*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+b};o&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:j,position:k}=Vce(w,_,n,a,void 0,u);w.position=k,w.positionAbsolute=j}return w});s(y,!0,!1)},[])}const Uv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var py=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:x,style:b,className:y,isDraggable:w,isSelectable:_,isConnectable:j,isFocusable:k,selectNodesOnDrag:I,sourcePosition:E,targetPosition:N,hidden:B,resizeObserver:R,dragHandle:D,zIndex:O,isParent:L,noDragClassName:M,noPanClassName:J,initialized:V,disableKeyboardA11y:K,ariaLabel:z,rfId:G,hasHandleBounds:Y})=>{const te=to(),P=S.useRef(null),H=S.useRef(null),X=S.useRef(E),Z=S.useRef(N),ae=S.useRef(n),le=_||w||d||f||h||p,ie=$ce(),ce=my(r,te.getState,f),fe=my(r,te.getState,h),Ie=my(r,te.getState,p),ne=my(r,te.getState,g),_e=my(r,te.getState,x),Fe=Te=>{const{nodeDragThreshold:Me}=te.getState();if(_&&(!I||!w||Me>0)&&kO({id:r,store:te,nodeRef:P}),d){const We=te.getState().nodeInternals.get(r);We&&d(Te,{...We})}},Se=Te=>{if(!EO(Te)&&!K)if(hce.includes(Te.key)&&_){const Me=Te.key==="Escape";kO({id:r,store:te,unselect:Me,nodeRef:P})}else w&&u&&Object.prototype.hasOwnProperty.call(Uv,Te.key)&&(te.setState({ariaLiveMessage:`Moved selected node ${Te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ie({x:Uv[Te.key].x,y:Uv[Te.key].y,isShiftPressed:Te.shiftKey}))};S.useEffect(()=>()=>{H.current&&(R==null||R.unobserve(H.current),H.current=null)},[]),S.useEffect(()=>{if(P.current&&!B){const Te=P.current;(!V||!Y||H.current!==Te)&&(H.current&&(R==null||R.unobserve(H.current)),R==null||R.observe(Te),H.current=Te)}},[B,V,Y]),S.useEffect(()=>{const Te=ae.current!==n,Me=X.current!==E,We=Z.current!==N;P.current&&(Te||Me||We)&&(Te&&(ae.current=n),Me&&(X.current=E),We&&(Z.current=N),te.getState().updateNodeDimensions([{id:r,nodeElement:P.current,forceUpdate:!0}]))},[r,n,E,N]);const me=zce({nodeRef:P,disabled:B||!w,noDragClassName:M,handleSelector:D,nodeId:r,isSelectable:_,selectNodesOnDrag:I});return B?null:nt.createElement("div",{className:Nl(["react-flow__node",`react-flow__node-${n}`,{[J]:w},y,{selected:u,selectable:_,parent:L,dragging:me}]),ref:P,style:{zIndex:O,transform:`translate(${o}px,${c}px)`,pointerEvents:le?"all":"none",visibility:V?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:fe,onMouseLeave:Ie,onContextMenu:ne,onClick:Fe,onDoubleClick:_e,onKeyDown:k?Se:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":K?void 0:`${Oce}-${G}`,"aria-label":z},nt.createElement(drt,{value:r},nt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:j,sourcePosition:E,targetPosition:N,dragging:me,dragHandle:D,zIndex:O})))};return t.displayName="NodeWrapper",S.memo(t)};const Jrt=e=>{const t=e.getNodes().filter(r=>r.selected);return{...cM(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Zrt({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=to(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:u}=ds(Jrt,sl),d=$ce(),f=S.useRef(null);if(S.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),zce({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(b=>b.selected);e(g,x)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Uv,g.key)&&d({x:Uv[g.key].x,y:Uv[g.key].y,isShiftPressed:g.shiftKey})};return nt.createElement("div",{className:Nl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},nt.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var ent=S.memo(Zrt);const tnt=e=>e.nodesSelectionActive,Gce=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:j,zoomOnPinch:k,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:B,panOnDrag:R,defaultViewport:D,translateExtent:O,minZoom:L,maxZoom:M,preventScrolling:J,onSelectionContextMenu:V,noWheelClassName:K,noPanClassName:z,disableKeyboardA11y:G})=>{const Y=ds(tnt),te=v2(f),P=v2(y),H=P||R,X=P||I,Z=te||h&&H!==!0;return Urt({deleteKeyCode:o,multiSelectionKeyCode:b}),nt.createElement(zrt,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:j,zoomOnPinch:k,panOnScroll:X,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:B,panOnDrag:!te&&H,defaultViewport:D,translateExtent:O,minZoom:L,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:J,noWheelClassName:K,noPanClassName:z},nt.createElement(Qce,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:H,isSelecting:!!Z,selectionMode:p},e,Y&&nt.createElement(ent,{onSelectionContextMenu:V,noPanClassName:z,disableKeyboardA11y:G})))};Gce.displayName="FlowRenderer";var rnt=S.memo(Gce);function nnt(e){return ds(S.useCallback(r=>e?yce(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function ant(e){const t={input:py(e.input||Bce),default:py(e.default||SO),output:py(e.output||Ice),group:py(e.group||dM)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=py(e[s]||SO),a),r);return{...t,...n}}const snt=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},int=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Kce=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=ds(int,sl),o=nnt(e.onlyRenderVisibleElements),c=S.useRef(),u=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),nt.createElement("div",{className:"react-flow__nodes",style:AM},o.map(d=>{var k,I,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Bh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?nM(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,j=snt({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return nt.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Cr.Bottom,targetPosition:d.targetPosition||Cr.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:x,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[Ss])==null?void 0:k.z)??0,isParent:!!((I=d[Ss])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ss])!=null&&E.handleBounds)})}))};Kce.displayName="NodeRenderer";var ont=S.memo(Kce);const lnt=(e,t,r)=>r===Cr.Left?e-t:r===Cr.Right?e+t:e,cnt=(e,t,r)=>r===Cr.Top?e-t:r===Cr.Bottom?e+t:e,rW="react-flow__edgeupdater",nW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>nt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:Nl([rW,`${rW}-${o}`]),cx:lnt(t,n,e),cy:cnt(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),unt=()=>!0;var Mx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,style:b,source:y,target:w,sourceX:_,sourceY:j,targetX:k,targetY:I,sourcePosition:E,targetPosition:N,elementsSelectable:B,hidden:R,sourceHandleId:D,targetHandleId:O,onContextMenu:L,onMouseEnter:M,onMouseMove:J,onMouseLeave:V,reconnectRadius:K,onReconnect:z,onReconnectStart:G,onReconnectEnd:Y,markerEnd:te,markerStart:P,rfId:H,ariaLabel:X,isFocusable:Z,isReconnectable:ae,pathOptions:le,interactionWidth:ie,disableKeyboardA11y:ce})=>{const fe=S.useRef(null),[Ie,ne]=S.useState(!1),[_e,Fe]=S.useState(!1),Se=to(),me=S.useMemo(()=>`url('#${_O(P,H)}')`,[P,H]),Te=S.useMemo(()=>`url('#${_O(te,H)}')`,[te,H]);if(R)return null;const Me=wt=>{var In;const{edges:jr,addSelectedEdges:tr,unselectNodesAndEdges:an,multiSelectionActive:Nr}=Se.getState(),$r=jr.find(Pr=>Pr.id===r);$r&&(B&&(Se.setState({nodesSelectionActive:!1}),$r.selected&&Nr?(an({nodes:[],edges:[$r]}),(In=fe.current)==null||In.blur()):tr([r])),i&&i(wt,$r))},We=hy(r,Se.getState,o),be=hy(r,Se.getState,L),De=hy(r,Se.getState,M),Re=hy(r,Se.getState,J),qe=hy(r,Se.getState,V),Ze=(wt,jr)=>{if(wt.button!==0)return;const{edges:tr,isValidConnection:an}=Se.getState(),Nr=jr?w:y,$r=(jr?O:D)||null,In=jr?"target":"source",Pr=an||unt,fs=jr,hn=tr.find(rn=>rn.id===r);Fe(!0),G==null||G(wt,hn,In);const la=rn=>{Fe(!1),Y==null||Y(rn,hn,In)};Nce({event:wt,handleId:$r,nodeId:Nr,onConnect:rn=>z==null?void 0:z(hn,rn),isTarget:fs,getState:Se.getState,setState:Se.setState,isValidConnection:Pr,edgeUpdaterType:In,onReconnectEnd:la})},ct=wt=>Ze(wt,!0),pt=wt=>Ze(wt,!1),It=()=>ne(!0),Mt=()=>ne(!1),Pt=!B&&!i,Qt=wt=>{var jr;if(!ce&&hce.includes(wt.key)&&B){const{unselectNodesAndEdges:tr,addSelectedEdges:an,edges:Nr}=Se.getState();wt.key==="Escape"?((jr=fe.current)==null||jr.blur(),tr({edges:[Nr.find(In=>In.id===r)]})):an([r])}};return nt.createElement("g",{className:Nl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Pt,updating:Ie}]),onClick:Me,onDoubleClick:We,onContextMenu:be,onMouseEnter:De,onMouseMove:Re,onMouseLeave:qe,onKeyDown:Z?Qt:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":X===null?void 0:X||`Edge from ${y} to ${w}`,"aria-describedby":Z?`${Dce}-${H}`:void 0,ref:fe},!_e&&nt.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:b,sourceX:_,sourceY:j,targetX:k,targetY:I,sourcePosition:E,targetPosition:N,sourceHandleId:D,targetHandleId:O,markerStart:me,markerEnd:Te,pathOptions:le,interactionWidth:ie}),ae&&nt.createElement(nt.Fragment,null,(ae==="source"||ae===!0)&&nt.createElement(nW,{position:E,centerX:_,centerY:j,radius:K,onMouseDown:ct,onMouseEnter:It,onMouseOut:Mt,type:"source"}),(ae==="target"||ae===!0)&&nt.createElement(nW,{position:N,centerX:k,centerY:I,radius:K,onMouseDown:pt,onMouseEnter:It,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function dnt(e){const t={default:Mx(e.default||yS),straight:Mx(e.bezier||oM),step:Mx(e.step||iM),smoothstep:Mx(e.step||Lk),simplebezier:Mx(e.simplebezier||sM)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Mx(e[s]||yS),a),r);return{...t,...n}}function aW(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case Cr.Top:return{x:n+s/2,y:a};case Cr.Right:return{x:n+s,y:a+i/2};case Cr.Bottom:return{x:n+s/2,y:a+i};case Cr.Left:return{x:n,y:a+i/2}}}function sW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Ant=(e,t,r,n,a,s)=>{const i=aW(r,e,t),o=aW(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function fnt({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=aM({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function iW(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Ss])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const hnt=[{level:0,isMaxLevel:!0,edges:[]}];function mnt(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const c=Du(o.zIndex);let u=c?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[Ss])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ss])==null?void 0:f.z)||0,1e3);u=(c?o.zIndex:0)+(g?x:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?hnt:s}function pnt(e,t,r){const n=ds(S.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&fnt({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return mnt(n,t,r)}const gnt=({color:e="none",strokeWidth:t=1})=>nt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xnt=({color:e="none",strokeWidth:t=1})=>nt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),oW={[bS.Arrow]:gnt,[bS.ArrowClosed]:xnt};function vnt(e){const t=to();return S.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(oW,e)?oW[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Bh.error009(e)),null)},[e])}const bnt=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=vnt(t);return c?nt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},nt.createElement(c,{color:r,strokeWidth:i})):null},ynt=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=_O(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},qce=({defaultColor:e,rfId:t})=>{const r=ds(S.useCallback(ynt({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return nt.createElement("defs",null,r.map(n=>nt.createElement(bnt,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};qce.displayName="MarkerDefinitions";var wnt=S.memo(qce);const Ent=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Wce=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:j,width:k,height:I,connectionMode:E,nodeInternals:N,onError:B}=ds(Ent,sl),R=pnt(t,N,r);return k?nt.createElement(nt.Fragment,null,R.map(({level:D,edges:O,isMaxLevel:L})=>nt.createElement("svg",{key:D,style:{zIndex:D},width:k,height:I,className:"react-flow__edges react-flow__container"},L&&nt.createElement(wnt,{defaultColor:e,rfId:n}),nt.createElement("g",null,O.map(M=>{const[J,V,K]=iW(N.get(M.source)),[z,G,Y]=iW(N.get(M.target));if(!K||!Y)return null;let te=M.type||"default";a[te]||(B==null||B("011",Bh.error011(te)),te="default");const P=a[te]||a.default,H=E===kg.Strict?G.target:(G.target??[]).concat(G.source??[]),X=sW(V.source,M.sourceHandle),Z=sW(H,M.targetHandle),ae=(X==null?void 0:X.position)||Cr.Bottom,le=(Z==null?void 0:Z.position)||Cr.Top,ie=!!(M.focusable||w&&typeof M.focusable>"u"),ce=M.reconnectable||M.updatable,fe=typeof h<"u"&&(ce||_&&typeof ce>"u");if(!X||!Z)return B==null||B("008",Bh.error008(X,M)),null;const{sourceX:Ie,sourceY:ne,targetX:_e,targetY:Fe}=Ant(J,X,ae,z,Z,le);return nt.createElement(P,{key:M.id,id:M.id,className:Nl([M.className,s]),type:te,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:Ie,sourceY:ne,targetX:_e,targetY:Fe,sourcePosition:ae,targetPosition:le,elementsSelectable:j,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:M.ariaLabel,isFocusable:ie,isReconnectable:fe,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:y})})))),b):null};Wce.displayName="EdgeRenderer";var Cnt=S.memo(Wce);const _nt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Nnt({children:e}){const t=ds(_nt);return nt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Snt(e){const t=Mk(),r=S.useRef(!1);S.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const knt={[Cr.Left]:Cr.Right,[Cr.Right]:Cr.Left,[Cr.Top]:Cr.Bottom,[Cr.Bottom]:Cr.Top},Xce=({nodeId:e,handleType:t,style:r,type:n=V0.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,E,N;const{fromNode:i,handleId:o,toX:c,toY:u,connectionMode:d}=ds(S.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),sl),f=(I=i==null?void 0:i[Ss])==null?void 0:I.handleBounds;let h=f==null?void 0:f[t];if(d===kg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(B=>B.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,b=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+x,w=p==null?void 0:p.position,_=w?knt[w]:null;if(!w||!_)return null;if(a)return nt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let j="";const k={sourceX:b,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===V0.Bezier?[j]=vce(k):n===V0.Step?[j]=CO({...k,borderRadius:0}):n===V0.SmoothStep?[j]=CO(k):n===V0.SimpleBezier?[j]=xce(k):j=`M${b},${y} ${c},${u}`,nt.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:r})};Xce.displayName="ConnectionLine";const jnt=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Bnt({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:u}=ds(jnt,sl);return!(a&&s&&o&&i)?null:nt.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},nt.createElement("g",{className:Nl(["react-flow__connection",u])},nt.createElement(Xce,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function lW(e,t){return S.useRef(null),to(),S.useMemo(()=>t(e),[e])}const Yce=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:j,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:B,zoomActivationKeyCode:R,deleteKeyCode:D,onlyRenderVisibleElements:O,elementsSelectable:L,selectNodesOnDrag:M,defaultViewport:J,translateExtent:V,minZoom:K,maxZoom:z,preventScrolling:G,defaultMarkerColor:Y,zoomOnScroll:te,zoomOnPinch:P,panOnScroll:H,panOnScrollSpeed:X,panOnScrollMode:Z,zoomOnDoubleClick:ae,panOnDrag:le,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:fe,onPaneMouseLeave:Ie,onPaneScroll:ne,onPaneContextMenu:_e,onEdgeContextMenu:Fe,onEdgeMouseEnter:Se,onEdgeMouseMove:me,onEdgeMouseLeave:Te,onReconnect:Me,onReconnectStart:We,onReconnectEnd:be,reconnectRadius:De,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:ct,disableKeyboardA11y:pt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})=>{const Qt=lW(e,ant),wt=lW(t,dnt);return Snt(s),nt.createElement(rnt,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:fe,onPaneMouseLeave:Ie,onPaneContextMenu:_e,onPaneScroll:ne,deleteKeyCode:D,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,onSelectionStart:x,onSelectionEnd:b,multiSelectionKeyCode:N,panActivationKeyCode:B,zoomActivationKeyCode:R,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:te,zoomOnPinch:P,zoomOnDoubleClick:ae,panOnScroll:H,panOnScrollSpeed:X,panOnScrollMode:Z,panOnDrag:le,defaultViewport:J,translateExtent:V,minZoom:K,maxZoom:z,onSelectionContextMenu:g,preventScrolling:G,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:pt},nt.createElement(Nnt,null,nt.createElement(Cnt,{edgeTypes:wt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:Fe,onEdgeMouseEnter:Se,onEdgeMouseMove:me,onEdgeMouseLeave:Te,onReconnect:Me,onReconnectStart:We,onReconnectEnd:be,reconnectRadius:De,defaultMarkerColor:Y,noPanClassName:Ze,elevateEdgesOnSelect:!!ct,disableKeyboardA11y:pt,rfId:Pt},nt.createElement(Bnt,{style:w,type:y,component:_,containerStyle:j})),nt.createElement("div",{className:"react-flow__edgelabel-renderer"}),nt.createElement(ont,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:M,onlyRenderVisibleElements:O,noPanClassName:Ze,noDragClassName:Re,disableKeyboardA11y:pt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})))};Yce.displayName="GraphView";var Tnt=S.memo(Yce);const jO=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],B0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:jO,nodeExtent:jO,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:kg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:srt,isValidConnection:void 0},Int=()=>HJe((e,t)=>({...B0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:vI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?vI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((x,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:void 0}});else if(y){const w=rM(b.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||b.forceUpdate))&&(a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:{source:tW(".source",b.nodeElement,h,u),target:tW(".target",b.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Rce(a,u);const g=i||s&&!i&&Lce(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Uce(r,o()),d=vI(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>P0(c,!0)):(i=pv(s(),r),o=pv(a,[])),m_({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>P0(c,!0)):(i=pv(a,r),o=pv(s(),[])),m_({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,P0(d.id,!1))),u=o.map(d=>P0(d.id,!1));m_({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>P0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>P0(o.id,!1));m_({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=nM(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=cm.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:B0.connectionNodeId,connectionHandleId:B0.connectionHandleId,connectionHandleType:B0.connectionHandleType,connectionStatus:B0.connectionStatus,connectionStartHandle:B0.connectionStartHandle,connectionEndHandle:B0.connectionEndHandle}),reset:()=>e({...B0})}),Object.is),fM=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=Int()),nt.createElement(Ytt,{value:t.current},e)};fM.displayName="ReactFlowProvider";const Jce=({children:e})=>S.useContext(Rk)?nt.createElement(nt.Fragment,null,e):nt.createElement(fM,null,e);Jce.displayName="ReactFlowWrapper";const Fnt={input:Bce,default:SO,output:Ice,group:dM},Ont={default:yS,straight:oM,step:iM,smoothstep:Lk,simplebezier:sM},Dnt=[0,0],Pnt=[15,15],Rnt={x:0,y:0,zoom:1},Lnt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Zce=S.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=Fnt,edgeTypes:i=Ont,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:k,onNodeDoubleClick:I,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:B,onNodesDelete:R,onEdgesDelete:D,onSelectionChange:O,onSelectionDragStart:L,onSelectionDrag:M,onSelectionDragStop:J,onSelectionContextMenu:V,onSelectionStart:K,onSelectionEnd:z,connectionMode:G=kg.Strict,connectionLineType:Y=V0.Bezier,connectionLineStyle:te,connectionLineComponent:P,connectionLineContainerStyle:H,deleteKeyCode:X="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:ae=!1,selectionMode:le=x2.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ce=vS()?"Meta":"Control",zoomActivationKeyCode:fe=vS()?"Meta":"Control",snapToGrid:Ie=!1,snapGrid:ne=Pnt,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:Fe=!0,nodesDraggable:Se,nodesConnectable:me,nodesFocusable:Te,nodeOrigin:Me=Dnt,edgesFocusable:We,edgesUpdatable:be,elementsSelectable:De,defaultViewport:Re=Rnt,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:ct=jO,preventScrolling:pt=!0,nodeExtent:It,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:Qt=!0,panOnScroll:wt=!1,panOnScrollSpeed:jr=.5,panOnScrollMode:tr=Qp.Free,zoomOnDoubleClick:an=!0,panOnDrag:Nr=!0,onPaneClick:$r,onPaneMouseEnter:In,onPaneMouseMove:Pr,onPaneMouseLeave:fs,onPaneScroll:hn,onPaneContextMenu:la,children:ja,onEdgeContextMenu:rn,onEdgeDoubleClick:pr,onEdgeMouseEnter:et,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onEdgeUpdate:xt,onEdgeUpdateStart:Et,onEdgeUpdateEnd:bt,onReconnect:nr,onReconnectStart:xr,onReconnectEnd:Wr,reconnectRadius:Zr=10,edgeUpdaterRadius:qr=10,onNodesChange:he,onEdgesChange:je,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Ne="nopan",fitView:Be=!1,fitViewOptions:Ye,connectOnClick:dt=!0,attributionPosition:$e,proOptions:rt,defaultEdgeOptions:it,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Gt=!0,connectionRadius:Sr=20,isValidConnection:sn,onError:on,style:An,id:hs,nodeDragThreshold:Co,...ms},Zs)=>{const Ts=hs||"1";return nt.createElement("div",{...ms,style:{...An,...Lnt},ref:Zs,className:Nl(["react-flow",a]),"data-testid":"rf__wrapper",id:hs},nt.createElement(Jce,null,nt.createElement(Tnt,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:k,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:Y,connectionLineStyle:te,connectionLineComponent:P,connectionLineContainerStyle:H,selectionKeyCode:Z,selectionOnDrag:ae,selectionMode:le,deleteKeyCode:X,multiSelectionKeyCode:ce,panActivationKeyCode:ie,zoomActivationKeyCode:fe,onlyRenderVisibleElements:_e,selectNodesOnDrag:Fe,defaultViewport:Re,translateExtent:ct,minZoom:qe,maxZoom:Ze,preventScrolling:pt,zoomOnScroll:Pt,zoomOnPinch:Qt,zoomOnDoubleClick:an,panOnScroll:wt,panOnScrollSpeed:jr,panOnScrollMode:tr,panOnDrag:Nr,onPaneClick:$r,onPaneMouseEnter:In,onPaneMouseMove:Pr,onPaneMouseLeave:fs,onPaneScroll:hn,onPaneContextMenu:la,onSelectionContextMenu:V,onSelectionStart:K,onSelectionEnd:z,onEdgeContextMenu:rn,onEdgeDoubleClick:pr,onEdgeMouseEnter:et,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onReconnect:nr??xt,onReconnectStart:xr??Et,onReconnectEnd:Wr??bt,reconnectRadius:Zr??qr,defaultMarkerColor:Mt,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Ne,elevateEdgesOnSelect:Vt,rfId:Ts,disableKeyboardA11y:Jt,nodeOrigin:Me,nodeExtent:It}),nt.createElement(krt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:Se,nodesConnectable:me,nodesFocusable:Te,edgesFocusable:We,edgesUpdatable:be,elementsSelectable:De,elevateNodesOnSelect:Ft,minZoom:qe,maxZoom:Ze,nodeExtent:It,onNodesChange:he,onEdgesChange:je,snapToGrid:Ie,snapGrid:ne,connectionMode:G,translateExtent:ct,connectOnClick:dt,defaultEdgeOptions:it,fitView:Be,fitViewOptions:Ye,onNodesDelete:R,onEdgesDelete:D,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:B,onSelectionDrag:M,onSelectionDragStart:L,onSelectionDragStop:J,noPanClassName:Ne,nodeOrigin:Me,rfId:Ts,autoPanOnConnect:Ht,autoPanOnNodeDrag:Gt,onError:on,connectionRadius:Sr,isValidConnection:sn,nodeDragThreshold:Co}),nt.createElement(Nrt,{onSelectionChange:O}),ja,nt.createElement(Ztt,{proOptions:rt,position:$e}),nt.createElement(Frt,{rfId:Ts,disableKeyboardA11y:Jt})))});Zce.displayName="ReactFlow";function eue(e){return t=>{const[r,n]=S.useState(t),a=S.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const Mnt=eue(Uce),Unt=eue(Krt);function Qnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},nt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Hnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},nt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Vnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},nt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function znt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},nt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function $nt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},nt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Qy=({children:e,className:t,...r})=>nt.createElement("button",{type:"button",className:Nl(["react-flow__controls-button",t]),...r},e);Qy.displayName="ControlButton";const Gnt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),tue=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=to(),[p,g]=S.useState(!1),{isInteractive:x,minZoomReached:b,maxZoomReached:y}=ds(Gnt,sl),{zoomIn:w,zoomOut:_,fitView:j}=Mk();if(S.useEffect(()=>{g(!0)},[]),!p)return null;const k=()=>{w(),s==null||s()},I=()=>{_(),i==null||i()},E=()=>{j(a),o==null||o()},N=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return nt.createElement(dce,{className:Nl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&nt.createElement(nt.Fragment,null,nt.createElement(Qy,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},nt.createElement(Qnt,null)),nt.createElement(Qy,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},nt.createElement(Hnt,null))),r&&nt.createElement(Qy,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},nt.createElement(Vnt,null)),n&&nt.createElement(Qy,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},x?nt.createElement($nt,null):nt.createElement(znt,null)),d)};tue.displayName="Controls";var Knt=S.memo(tue),Ld;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ld||(Ld={}));function qnt({color:e,dimensions:t,lineWidth:r}){return nt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Wnt({color:e,radius:t}){return nt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Xnt={[Ld.Dots]:"#91919a",[Ld.Lines]:"#eee",[Ld.Cross]:"#e2e2e2"},Ynt={[Ld.Dots]:1,[Ld.Lines]:1,[Ld.Cross]:6},Jnt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function rue({id:e,variant:t=Ld.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const u=S.useRef(null),{transform:d,patternId:f}=ds(Jnt,sl),h=i||Xnt[t],p=n||Ynt[t],g=t===Ld.Dots,x=t===Ld.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],w=p*d[2],_=x?[w,w]:y,j=g?[w/s,w/s]:[_[0]/s,_[1]/s];return nt.createElement("svg",{className:Nl(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},nt.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},g?nt.createElement(Wnt,{color:h,radius:w/s}):nt.createElement(qnt,{dimensions:_,color:h,lineWidth:a})),nt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}rue.displayName="Background";var Znt=S.memo(rue);function eat(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const tat=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function dm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Ux=null;function nue(e={}){return Ux||(e.includeStyleProperties?(Ux=e.includeStyleProperties,Ux):(Ux=dm(window.getComputedStyle(document.documentElement)),Ux))}function wS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function rat(e){const t=wS(e,"border-left-width"),r=wS(e,"border-right-width");return e.clientWidth+t+r}function nat(e){const t=wS(e,"border-top-width"),r=wS(e,"border-bottom-width");return e.clientHeight+t+r}function aue(e,t={}){const r=t.width||rat(e),n=t.height||nat(e);return{width:r,height:n}}function aat(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const _c=16384;function sat(e){(e.width>_c||e.height>_c)&&(e.width>_c&&e.height>_c?e.width>e.height?(e.height*=_c/e.width,e.width=_c):(e.width*=_c/e.height,e.height=_c):e.width>_c?(e.height*=_c/e.width,e.width=_c):(e.width*=_c/e.height,e.height=_c))}function ES(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function iat(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function oat(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),iat(a)}const rc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||rc(r,t)};function lat(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function cat(e,t){return nue(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function uat(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?lat(r):cat(r,n);return document.createTextNode(`${a}{${s}}`)}function cW(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=tat();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(uat(i,r,a,n)),t.appendChild(o)}function dat(e,t,r){cW(e,t,":before",r),cW(e,t,":after",r)}const uW="application/font-woff",dW="image/jpeg",Aat={woff:uW,woff2:uW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:dW,jpeg:dW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function fat(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function hM(e){const t=fat(e).toLowerCase();return Aat[t]||""}function hat(e){return e.split(/,/)[1]}function BO(e){return e.search(/^(data:)/)!==-1}function mat(e,t){return`data:${t};base64,${e}`}async function sue(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const EI={};function pat(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function mM(e,t,r){const n=pat(e,t,r.includeQueryParams);if(EI[n]!=null)return EI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await sue(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),hat(o)));a=mat(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return EI[n]=a,a}async function gat(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):ES(t)}async function xat(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return ES(o)}const r=e.poster,n=hM(r),a=await mM(r,n,t);return ES(a)}async function vat(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await Uk(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function bat(e,t){return rc(e,HTMLCanvasElement)?gat(e):rc(e,HTMLVideoElement)?xat(e,t):rc(e,HTMLIFrameElement)?vat(e,t):e.cloneNode(iue(e))}const yat=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",iue=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function wat(e,t,r){var n,a;if(iue(t))return t;let s=[];return yat(e)&&e.assignedNodes?s=dm(e.assignedNodes()):rc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=dm(e.contentDocument.body.childNodes):s=dm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||rc(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Uk(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function Eat(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):nue(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),rc(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function Cat(e,t){rc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),rc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function _at(e,t){if(rc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Nat(e,t,r){return rc(t,Element)&&(Eat(e,t,r),dat(e,t,r),Cat(e,t),_at(e,t)),t}async function Sat(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await Uk(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function Uk(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>bat(n,t)).then(n=>wat(e,n,t)).then(n=>Nat(e,n,t)).then(n=>Sat(n,t))}const oue=/url\((['"]?)([^'"]+?)\1\)/g,kat=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,jat=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Bat(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Tat(e){const t=[];return e.replace(oue,(r,n,a)=>(t.push(a),r)),t.filter(r=>!BO(r))}async function Iat(e,t,r,n,a){try{const s=r?eat(t,r):t,i=hM(t);let o;return a||(o=await mM(s,i,n)),e.replace(Bat(t),`$1${o}$3`)}catch{}return e}function Fat(e,{preferredFontFormat:t}){return t?e.replace(jat,r=>{for(;;){const[n,,a]=kat.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function lue(e){return e.search(oue)!==-1}async function cue(e,t,r){if(!lue(e))return e;const n=Fat(e,r);return Tat(n).reduce((s,i)=>s.then(o=>Iat(o,i,t,r)),Promise.resolve(n))}async function Qx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await cue(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Oat(e,t){await Qx("background",e,t)||await Qx("background-image",e,t),await Qx("mask",e,t)||await Qx("-webkit-mask",e,t)||await Qx("mask-image",e,t)||await Qx("-webkit-mask-image",e,t)}async function Dat(e,t){const r=rc(e,HTMLImageElement);if(!(r&&!BO(e.src))&&!(rc(e,SVGImageElement)&&!BO(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await mM(n,hM(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Pat(e,t){const n=dm(e.childNodes).map(a=>uue(a,t));await Promise.all(n).then(()=>e)}async function uue(e,t){rc(e,Element)&&(await Oat(e,t),await Dat(e,t),await Pat(e,t))}function Rat(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const AW={};async function fW(e){let t=AW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},AW[e]=t,t}async function hW(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),sue(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function mW(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Lat(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{dm(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=fW(c).then(d=>hW(d,t)).then(d=>mW(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(fW(a.href).then(o=>hW(o,t)).then(o=>mW(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{dm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Mat(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>lue(t.style.getPropertyValue("src")))}async function Uat(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=dm(e.ownerDocument.styleSheets),n=await Lat(r,t);return Mat(n)}function due(e){return e.trim().replace(/["']/g,"")}function Qat(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(due(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Hat(e,t){const r=await Uat(e,t),n=Qat(e);return(await Promise.all(r.filter(s=>n.has(due(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return cue(s.cssText,i,t)}))).join(`
`)}async function Vat(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Hat(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function zat(e,t={}){const{width:r,height:n}=aue(e,t),a=await Uk(e,t,!0);return await Vat(a,t),await uue(a,t),Rat(a,t),await oat(a,r,n)}async function $at(e,t={}){const{width:r,height:n}=aue(e,t),a=await zat(e,t),s=await ES(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||aat(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||sat(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function Qk(e,t={}){return(await $at(e,t)).toDataURL()}const Aue="recursos_crucigramas",Hk="recursos_lineas_de_tiempo",Vk="recursos_mapas_mentales",fue="recursos_sopas_de_letras",zk=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Gat=e=>{const t=zt(yt(ft,Aue),gr("fechaCreacion","desc"));return fr(t,r=>{const n=r.docs.map(a=>zk(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Kat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await vn(yt(ft,Aue),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},qat=e=>{const t=zt(yt(ft,Hk),gr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>zk(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Wat=async(e,t)=>{try{const{id:r,...n}=e,a=sr(ft,Hk,r);await pi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Xat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await vn(yt(ft,Hk),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Yat=async e=>{try{const t=sr(ft,Hk,e);await za(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Jat=e=>{const t=zt(yt(ft,Vk),gr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>zk(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Zat=async(e,t)=>{try{const{id:r,...n}=e,a=sr(ft,Vk,r);await pi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},est=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await vn(yt(ft,Vk),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},tst=async e=>{try{const t=sr(ft,Vk,e);await za(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},rst=e=>{const t=zt(yt(ft,fue),gr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>zk(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},nst=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await vn(yt(ft,fue),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},ast=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),sst=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),ist=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),ost=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(N1,{type:"target",position:Cr.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(N1,{type:"source",position:Cr.Right,className:"w-2 h-2 !bg-slate-400"})]})},TO=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+TO(n,t),0),IO=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,u)=>{r.push({id:o.id,position:{x:c*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=TO(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=TO(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const p=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},hue=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>l.jsx(hue,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},lst={custom:ost},cst=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=S.useState(e.treeData),[s,i]=S.useState("tree"),[o,c]=S.useState(!1),[u,d,f]=Mnt([]),[h,p,g]=Unt([]),{fitView:x}=Mk();S.useEffect(()=>{const{nodes:k,edges:I}=IO(n,s);d(k),p(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,p,x]);const b=(k,I)=>{const E=JSON.parse(JSON.stringify(n)),N=B=>B.id===k?(B.label=I,!0):(B.children||[]).some(N);N(E),a(E)},y=k=>{const I=JSON.parse(JSON.stringify(n)),E=N=>N.id===k?(N.children||(N.children=[]),N.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(N.children||[]).some(E);E(I),a(I)},w=k=>{const I=JSON.parse(JSON.stringify(n)),E=N=>{const B=(N.children||[]).findIndex(R=>R.id===k);return B!==-1?(N.children.splice(B,1),!0):(N.children||[]).some(E)};E(I),a(I)},_=()=>{c(!0);const{nodes:k,edges:I}=IO(n,s);r({...e,treeData:n,nodes:k,edges:I}),setTimeout(()=>c(!1),1e3)},j=async k=>{const I=document.querySelector(".react-flow");I&&Qk(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const N=document.createElement("a");N.download=`${e.tema}.png`,N.href=E,N.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(Zce,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:lst,children:[l.jsx(Knt,{}),l.jsx(Znt,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(sst,{})," Vista en árbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(ist,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(hue,{node:n,onUpdate:b,onAddChild:y,onDelete:w})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>j(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},ust=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState("");S.useEffect(()=>{f(!0);const E=Jat(N=>{s(N),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const J=(await(await new cs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(J),K=H=>({id:crypto.randomUUID(),label:H.label||"Sin etiqueta",icon:H.icon||"🧠",type:H.type||"default",children:(H.children||[]).map(K)}),z=K(V),{nodes:G,edges:Y}=IO(z),te={tema:h,nivel:g,treeData:z,nodes:G,edges:Y},P=await est(te,t);o({...te,id:P,createdAt:new Date().toISOString()}),n("editor")}catch(R){console.error("AI Generation Error:",R),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},_=async E=>{try{await Zat(E,t)}catch(N){console.error("Error saving mind map:",N),alert("No se pudo guardar el mapa mental.")}},j=E=>{o(E),n("editor")},k=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await tst(E)}catch(N){console.error("Error deleting mind map:",N),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return i?l.jsx(fM,{children:l.jsx(cst,{mapData:i,onBack:()=>n("list"),onSave:_})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>p(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:b,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(ast,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>j(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>k(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:"🧠"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),I()]})},dst=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ast=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),fst=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState("Media"),[i,o]=S.useState(10),[c,u]=S.useState(!1),[d,f]=S.useState(Array(10).fill("")),[h,p]=S.useState(""),[g,x]=S.useState(null),[b,y]=S.useState({ai:!1,puzzle:!1,data:!0}),w=S.useRef(null);S.useEffect(()=>{y(D=>({...D,data:!0}));const R=rst(D=>{n(D),y(O=>({...O,data:!1}))});return()=>R()},[]),S.useEffect(()=>{f(R=>{const D=Array(i).fill("");for(let O=0;O<Math.min(R.length,i);O++)D[O]=R[O];return D})},[i]);const _=(R,D)=>{const O=[...d];O[R]=D,f(O)},j=async()=>{if(h.trim()){y(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",O=new cs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),L=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,K=(await(await O.generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(K);if(!z.palabras||!Array.isArray(z.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const Y=[...z.palabras.map(te=>te.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;Y.length<i;)Y.push("");f(Y)}catch(R){console.error("Error generating words with AI:",R),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(R=>({...R,ai:!1}))}}},k=(R,D,O,L,M,J)=>{for(let V=0;V<R.length;V++){const K=O+V*M.y,z=L+V*M.x;if(K<0||K>=J||z<0||z>=J||D[K][z]&&D[K][z]!==R[V])return!1}return!0},I=(R,D,O,L,M)=>{for(let J=0;J<R.length;J++)D[O+J*M.y][L+J*M.x]=R[J]},E=async()=>{y(K=>({...K,puzzle:!0})),x(null),await new Promise(K=>setTimeout(K,100));const R=d.map(K=>K.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(R.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(K=>({...K,puzzle:!1}));return}const D=Math.max(...R.map(K=>K.length));let O=Math.max(D,R.length)+2;a==="Media"&&(O+=3),a==="Difícil"&&(O+=5),O=Math.min(Math.max(O,10),25);const L=Array(O).fill(null).map(()=>Array(O).fill(null)),M=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&M.push({x:1,y:-1}),a==="Difícil"&&M.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const K of R.sort((z,G)=>G.length-z.length)){let z=!1;for(let G=0;G<100;G++){const Y=M[Math.floor(Math.random()*M.length)],te=Math.floor(Math.random()*O),P=Math.floor(Math.random()*O);if(k(K,L,te,P,Y,O)){I(K,L,te,P,Y),z=!0;break}}z||console.warn(`No se pudo colocar la palabra: ${K}`)}const J=L.map(K=>K.map(z=>z||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:J.map(K=>K.join("")),words:R.sort()};try{const K=await nst(V,t);x({...V,id:K,createdAt:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar la sopa de letras.")}finally{y(K=>({...K,puzzle:!1}))}},N=()=>{w.current&&Qk(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(R=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=R,D.click()}).catch(R=>{console.error("oops, something went wrong!",R),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var O;if(!g)return null;const R=((O=g.grid[0])==null?void 0:O.length)||1,D=g.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:w,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:D.map((L,M)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},M))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>l.jsx("li",{children:L},L))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:R=>s(R.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>l.jsx("button",{onClick:()=>{o(R),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:R=>o(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:j,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?l.jsx(dst,{}):l.jsxs(l.Fragment,{children:[l.jsx(Ast,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((R,D)=>l.jsx("input",{type:"text",value:R,onChange:O=>_(D,O.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:E,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},hst=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),mst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),pst=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=S.useState(e),[s,i]=S.useState(null),o=S.useRef(null),c=(p,g,x)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:x}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,p].sort((x,b)=>parseInt(x.date)-parseInt(b.date));a(x=>({...x,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(x=>x.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const k=(await(await new cs(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),I=JSON.parse(k);a(E=>({...E,events:E.events.map(N=>N.id===p.id?{...N,date:I.date,description:I.description,icon:I.icon}:N).sort((N,B)=>parseInt(N.date)-parseInt(B.date))}))}catch(b){console.error("Error al generar descripción del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&Qk(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const x=g%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:x&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!x&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:p.date,onChange:g=>c(p.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:p.description,onChange:g=>c(p.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(mst,{})})]}),l.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},gst=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState("");S.useEffect(()=>{f(!0);const k=qat(I=>{s(I),f(!1)});return()=>k()},[]);const w=async k=>{if(k.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",N=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const M=(await(await new cs(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(M);if(!J.events||!Array.isArray(J.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:b,events:J.events.map(z=>({id:crypto.randomUUID(),date:z.date||"Sin fecha",description:z.description||"Sin descripción",icon:z.icon||"🗓️"}))},K=await Xat(V,t);o({...V,id:K,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},_=async k=>{try{await Wat(k,t),n("list"),o(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la línea de tiempo.")}},j=async k=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Yat(k)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(pst,{timeline:i,onSave:_,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:k=>p(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:k=>x(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:k=>y(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(hst,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(k=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>j(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},xst=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),pW=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),vst=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(10),[i,o]=S.useState(!1),[c,u]=S.useState(Array(10).fill("")),[d,f]=S.useState(Array(10).fill("")),[h,p]=S.useState(""),[g,x]=S.useState(null),[b,y]=S.useState(!1),[w,_]=S.useState({ai:!1,puzzle:!1,data:!0}),[j,k]=S.useState(null),I=S.useRef(null);S.useEffect(()=>{_(J=>({...J,data:!0}));const M=Gat(J=>{const V=J.map(K=>{const{grid_flat:z,grid_width:G,...Y}=K,te=[];if(z&&G>0)for(let P=0;P<z.length;P+=G)te.push(z.slice(P,P+G));return{...Y,grid:te}});n(V),_(K=>({...K,data:!1}))});return()=>M()},[]),S.useEffect(()=>{const M=a;u(J=>Array.from({length:M},(V,K)=>J[K]||"")),f(J=>Array.from({length:M},(V,K)=>J[K]||""))},[a]);const E=(M,J)=>{const V=[...c];V[M]=J,u(V)},N=(M,J)=>{const V=[...d];V[M]=J,f(V)},B=async()=>{if(h.trim()){_(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new cs(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let te=(await(await V.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const P=te.indexOf("{"),H=te.lastIndexOf("}");P!==-1&&H!==-1&&(te=te.substring(P,H+1)),te=te.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),te.includes("__SPLIT__")&&(te=te.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(le,ie,ce,fe)=>{const Ie=ce.split("__SPLIT__").map(ne=>ne.trim().replace(/,$/,""));return ie+Ie.join(",")+fe})),te=te.replace(/,\s*]/g,"]");let X;try{X=JSON.parse(te)}catch{console.error("Respuesta IA no es JSON válido:",te),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),_(ie=>({...ie,ai:!1}));return}if(!X.items||!Array.isArray(X.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const Z=X.items.map(le=>(le.word||"").toUpperCase().replace(/\s/g,"")),ae=X.items.map(le=>le.clue||"");u(Array.from({length:a},(le,ie)=>Z[ie]||"")),f(Array.from({length:a},(le,ie)=>ae[ie]||""))}catch(M){console.error("Error generating words/clues with AI:",M),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(M=>({...M,ai:!1}))}}},R=async M=>{const J=c[M];if(!J||!J.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}k(M);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new cs(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${J}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,H=(await(await z.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(H);X.clue&&N(M,X.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{k(null)}},D=S.useCallback(()=>{try{const M=c.map((Te,Me)=>({word:Te.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Me]})).filter(Te=>Te.word.length>0);if(M.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;M.sort((Te,Me)=>Me.word.length-Te.word.length);const J=M[0].word.length,V=Math.max(J,M.length)*2;let K=Array.from({length:V},()=>Array(V).fill(null));const z=[],G=M.shift(),Y=Math.floor(V/2),te=Math.floor((V-G.word.length)/2);for(let Te=0;Te<G.word.length;Te++)K[Y][te+Te]=G.word[Te];z.push({word:G.word,clue:G.clue,direction:"across",row:Y,col:te});for(const Te of M){let Me={score:-1,row:-1,col:-1,direction:"across"};for(const We of z)for(let be=0;be<We.word.length;be++)for(let De=0;De<Te.word.length;De++)if(We.word[be]===Te.word[De]){let Re=0,qe,Ze,ct;We.direction==="across"?(ct="down",qe=We.row-De,Ze=We.col+be):(ct="across",qe=We.row+be,Ze=We.col-De);let pt=!0;for(let It=0;It<Te.word.length;It++){const Mt=qe+(ct==="down"?It:0),Pt=Ze+(ct==="across"?It:0);if(Mt<0||Mt>=V||Pt<0||Pt>=V){pt=!1;break}const Qt=K[Mt][Pt],wt=Mt===We.row+(We.direction==="down"?be:0)&&Pt===We.col+(We.direction==="across"?be:0);if(Qt&&!wt){pt=!1;break}if(Qt&&wt&&Qt!==Te.word[De]){pt=!1;break}if(!wt){if(ct==="across"&&(Mt>0&&K[Mt-1][Pt]||Mt<V-1&&K[Mt+1][Pt])){pt=!1;break}if(ct==="down"&&(Pt>0&&K[Mt][Pt-1]||Pt<V-1&&K[Mt][Pt+1])){pt=!1;break}}Qt&&Re++}pt&&Re>Me.score&&(Me={score:Re,row:qe,col:Ze,direction:ct})}if(Me.score>-1){for(let We=0;We<Te.word.length;We++){const be=Me.row+(Me.direction==="down"?We:0),De=Me.col+(Me.direction==="across"?We:0);K[be][De]=Te.word[We]}z.push({word:Te.word,clue:Te.clue,direction:Me.direction,row:Me.row,col:Me.col})}}let P=V,H=-1,X=V,Z=-1;z.forEach(Te=>{P=Math.min(P,Te.row),H=Math.max(H,Te.row+(Te.direction==="down"?Te.word.length-1:0)),X=Math.min(X,Te.col),Z=Math.max(Z,Te.col+(Te.direction==="across"?Te.word.length-1:0))}),H===-1&&(P=z[0].row,H=z[0].row,X=z[0].col,Z=z[0].col+z[0].word.length-1);const ae=1,le=Math.max(0,P-ae),ie=Math.min(V,H+1+ae),ce=Math.max(0,X-ae),fe=Math.min(V,Z+1+ae),Ie=K.slice(le,ie).map(Te=>Te.slice(ce,fe)),ne=z.map(Te=>({...Te,row:Te.row-le,col:Te.col-ce})).sort((Te,Me)=>Te.row-Me.row||Te.col-Me.col);let _e=1;const Fe=[],Se=new Map;ne.forEach(Te=>{const Me=`${Te.row},${Te.col}`;Se.has(Me)||Se.set(Me,_e++),Fe.push({...Te,number:Se.get(Me)})});const me=Ie.map(Te=>Te.map(Me=>({char:Me,number:null})));return Fe.forEach(Te=>{const Me=`${Te.row},${Te.col}`;me[Te.row]&&me[Te.row][Te.col]!==void 0&&(me[Te.row][Te.col].number=Se.get(Me))}),{grid:me,clues:{across:Fe.filter(Te=>Te.direction==="across").sort((Te,Me)=>Te.number-Me.number),down:Fe.filter(Te=>Te.direction==="down").sort((Te,Me)=>Te.number-Me.number)}}}catch(M){return console.error("Error generating crossword grid:",M),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),O=async()=>{var J;_(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const M=D();if(M){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:M.grid,clues:M.clues},{grid:K,...z}=V,G={...z,grid_flat:K.flat().map(Y=>Y.char||""),grid_width:((J=K[0])==null?void 0:J.length)||0};try{const Y=await Kat(G,t);x({...V,id:Y,fechaCreacion:new Date().toISOString()})}catch(Y){console.error("Error saving puzzle:",Y),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(V=>({...V,puzzle:!1}))},L=()=>{I.current&&(y(!1),setTimeout(()=>{Qk(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(M=>{const J=document.createElement("a");J.download="crucigrama.png",J.href=M,J.click()}).catch(M=>console.error("Error generating image",M))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((M,J)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:M.char?"white":"black"},children:[M.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:M.number}),b&&M.char&&l.jsx("span",{children:M.char})]},J))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.across.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.down.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>l.jsx("button",{onClick:()=>{s(M),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:M=>s(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>p(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:B,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?l.jsx(xst,{}):l.jsxs(l.Fragment,{children:[l.jsx(pW,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((M,J)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[J],onChange:V=>E(J,V.target.value),placeholder:`Palabra ${J+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[J],onChange:V=>N(J,V.target.value),placeholder:`Pista ${J+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>R(J),disabled:j===J,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:j===J?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(pW,{})})]})]},J))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:O,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},bst=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(!0);return S.useEffect(()=>{const a=iJ(K6,async s=>{if(s&&s.email)try{const i=await bee(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},yst=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],wst=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),Est=()=>{const[e,t]=S.useState("menu"),{currentUser:r}=bst(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?l.jsx(ust,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(fst,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(gst,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(vst,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:yst.map(a=>l.jsx(wst,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},Cst="evaluaciones_formativas",_st="calificaciones_formativas",mue="trabajos_grupales_formativos",pue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Nst=(e,t)=>{const r=zt(yt(ft,Cst),Dr("curso","==",e));return fr(r,n=>{t(n.docs.map(a=>pue(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},Sst=e=>{const t=zt(yt(ft,_st));return fr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},kst=(e,t)=>{const r=zt(yt(ft,mue),Dr("curso","==",e));return fr(r,n=>{t(n.docs.map(a=>pue(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},jst=async e=>{try{const{id:t,...r}=e,n=sr(ft,mue,t);await pi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Bst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState({}),[s,i]=S.useState([]),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(!1),[p,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const j=Nst(e.curso,r),k=Sst(a),I=kst(e.curso,E=>{i(E),c(!1)});return()=>{j(),k(),I()}},[e.curso]);const b=S.useMemo(()=>{if(!e.curso)return[];const k=t.filter(I=>I.curso===e.curso).reduce((I,E)=>((I[E.asignatura]=I[E.asignatura]||[]).push(E),I),{});return Object.entries(k).map(([I,E])=>{let N=0,B=0;const R=E.map(O=>{var J;const L=(J=n[O.id])==null?void 0:J[e.nombreCompleto];let M="No Trabajado";return L==="trabajado"?(N+=7,B++,M="Trabajado"):L==="no trabajado"&&(N+=2,B++,M="No Trabajado"),{id:O.id,nombreActividad:O.nombreActividad,fecha:O.fecha,estado:M}}).filter(O=>{var L;return(L=n[O.id])==null?void 0:L[e.nombreCompleto]}),D=B>0?(N/B).toFixed(1):"N/A";return{asignatura:I,promedio:D,actividades:R.sort((O,L)=>new Date(L.fecha).getTime()-new Date(O.fecha).getTime())}}).filter(I=>I.actividades.length>0).sort((I,E)=>I.asignatura.localeCompare(E.asignatura))},[t,n,e]);S.useEffect(()=>{if(b.reduce((B,R)=>B+R.actividades.length,0)===0){d(null);return}const k=b.reduce((B,R)=>{const D=parseFloat(R.promedio);return isNaN(D)?B:B+D},0),I=b.length>0?k/b.length:0,E=jC.find(B=>I>=B.promedioMin&&I<=B.promedioMax)||null,N=jC.filter(B=>I>=B.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:E,insigniasGanadas:N}),x.current!==null){const B=jC.find(R=>x.current>=R.promedioMin&&x.current<=R.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&g(E)}x.current=I},[b]);const y=S.useMemo(()=>e.curso?s.filter(j=>j.curso===e.curso).map(j=>{const k=j.grupos.find(I=>I.integrantes.some(E=>E.nombre===e.nombreCompleto));return k?{...j,miGrupo:k}:null}).filter(j=>j!==null).sort((j,k)=>new Date(k.fechaPresentacion).getTime()-new Date(j.fechaPresentacion).getTime()):[],[s,e]),w=async(j,k)=>{const I=s.find(N=>N.id===j);if(!I)return;const E={...I,grupos:I.grupos.map(N=>N.integrantes.some(R=>R.nombre===e.nombreCompleto)?{...N,integrantes:N.integrantes.map(R=>R.nombre===e.nombreCompleto?{...R,rol:k||void 0}:R)}:N)};try{await jst(E)}catch(N){console.error("Error updating role:",N),alert("No se pudo actualizar el rol.")}},_=j=>{const k=parseFloat(j);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:j=>j.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),l.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:jC.map(j=>{const k=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===j.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:j.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:j.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",j.promedioMin," y ",j.promedioMax]})]})]},j.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(j=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:j.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(j.promedio)}`,children:j.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),j.actividades.map(k=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},k.id))]})]},j.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:y.map(j=>{const k=j.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),I=wee.filter(E=>!k.includes(E));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[j.asignatura," - Presentación: ",new Date(j.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",j.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:j.miGrupo.integrantes.map(E=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?l.jsxs("select",{value:E.rol||"",onChange:N=>w(j.id,N.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!I.includes(E.rol)&&l.jsx("option",{value:E.rol,children:E.rol}),I.map(N=>l.jsx("option",{value:N,children:N},N))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},j.id)})})]})]})},Tst="proyectos_interdisciplinarios",gue="entregas_interdisciplinarias",xue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Ist=(e,t)=>{const r=zt(yt(ft,Tst),Dr("cursos","array-contains",e));return fr(r,n=>{const a=n.docs.map(s=>xue(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Fst=(e,t)=>{const r=zt(yt(ft,gue),Dr("estudianteId","==",e));return fr(r,n=>{const a=n.docs.map(s=>xue(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Ost=async e=>{try{const{id:t,...r}=e,n=sr(ft,gue,t),a={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await pi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Dst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(null),[o,c]=S.useState(!0);S.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Ist(e.curso,r),h=Fst(e.id,p=>{a(p),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await Ost(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=S.useMemo(()=>{const k=n.find(I=>I.planificacionId===f.id&&I.tareaId===h.id);return k||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=S.useState(!1),[b,y]=S.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),w=k=>{var E;const I=(E=k.target.files)==null?void 0:E[0];I&&(alert(`Simulación: Archivo "${I.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},j=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:p.completada,onChange:j,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&l.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:b.observaciones,onChange:k=>y({...b,observaciones:k.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:b.enlace,onChange:k=>y({...b,enlace:k.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:w,className:"text-sm"}),p.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,x=h.length>0?g/h.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(x),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>l.jsx(d,{plan:f,tarea:b},b.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Pst=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Rst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(rw),f=S.useCallback(async()=>{a(!0);try{const b=(await rJe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=S.useCallback(async()=>{try{const x=await nJe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);S.useEffect(()=>{f(),h()},[f,h]);const p=S.useMemo(()=>{if(!o)return[];const x={};return u.forEach(b=>{x[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const w=o.rubricaResultados[y.name];w&&(x[b.domain].total+=w,x[b.domain].count++)})}),Object.entries(x).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=x=>{const b=new vr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompañamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),bo(b,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const j=[],k=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(I=>{j.push([{content:I.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),I.criteria.forEach(E=>{const N=x.rubricaResultados[E.name],B=N?k[N-1]:"No evaluado";j.push([E.name,B])})}),bo(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:j,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const w=(j,k)=>{if(!k)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(j,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const I=b.splitTextToSize(k.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(I,14,y),y+=I.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=b.getNumberOfPages();for(let j=1;j<=_;j++)b.setPage(j),b.setFontSize(8),b.setTextColor(128),b.text(`Página ${j} de ${_}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(yee,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(Pst,{data:p})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>l.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Lst=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=yt(Tr,"planificaciones"),r=zt(t,gr("fechaCreacion","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},Mst=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=yt(Tr,"planificaciones"),n=zt(r,Dr("userId","==",e),gr("fechaCreacion","desc"));return fr(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function Ust(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Qst=Ust("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Hst={value:function(){}};function vue(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new g5(r)}function g5(e){this._=e}function Vst(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}g5.prototype=vue.prototype={constructor:g5,on:function(e,t){var r=this._,n=Vst(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=zst(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=gW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=gW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new g5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function zst(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function gW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Hst,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const $st=Object.freeze(Object.defineProperty({__proto__:null,dispatch:vue},Symbol.toStringTag,{value:"Module"})),Gst=Dfe($st);var CI,xW;function Kst(){if(xW)return CI;xW=1;const e=Gst.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:b},n=64,a=2048;CI=function(){var j=[256,256],k=s,I=i,E=c,N=o,B=o,R=u,D=d,O=x,L=[],M=1/0,J=e("word","end"),V=null,K=Math.random,z={},G=w;z.canvas=function(P){return arguments.length?(G=_(P),z):G},z.start=function(){var P=Y(G()),H=y((j[0]>>5)*j[1]),X=null,Z=L.length,ae=-1,le=[],ie=L.map(function(fe,Ie){return fe.text=k.call(this,fe,Ie),fe.font=I.call(this,fe,Ie),fe.style=N.call(this,fe,Ie),fe.weight=B.call(this,fe,Ie),fe.rotate=R.call(this,fe,Ie),fe.size=~~E.call(this,fe,Ie),fe.padding=D.call(this,fe,Ie),fe}).sort(function(fe,Ie){return Ie.size-fe.size});return V&&clearInterval(V),V=setInterval(ce,0),ce(),z;function ce(){for(var fe=Date.now();Date.now()-fe<M&&++ae<Z&&V;){var Ie=ie[ae];Ie.x=j[0]*(K()+.5)>>1,Ie.y=j[1]*(K()+.5)>>1,f(P,Ie,ie,ae),Ie.hasText&&te(H,Ie,X)&&(le.push(Ie),J.call("word",z,Ie),X?p(X,Ie):X=[{x:Ie.x+Ie.x0,y:Ie.y+Ie.y0},{x:Ie.x+Ie.x1,y:Ie.y+Ie.y1}],Ie.x-=j[0]>>1,Ie.y-=j[1]>>1)}ae>=Z&&(z.stop(),J.call("end",z,le,X))}},z.stop=function(){V&&(clearInterval(V),V=null);for(const P of L)delete P.sprite;return z};function Y(P){const H=P.getContext("2d",{willReadFrequently:!0});P.width=P.height=1;const X=Math.sqrt(H.getImageData(0,0,1,1).data.length>>2);return P.width=(n<<5)/X,P.height=a/X,H.fillStyle=H.strokeStyle="red",{context:H,ratio:X}}function te(P,H,X){j[0],j[1];for(var Z=H.x,ae=H.y,le=Math.sqrt(j[0]*j[0]+j[1]*j[1]),ie=O(j),ce=K()<.5?1:-1,fe=-ce,Ie,ne,_e;(Ie=ie(fe+=ce))&&(ne=~~Ie[0],_e=~~Ie[1],!(Math.min(Math.abs(ne),Math.abs(_e))>=le));)if(H.x=Z+ne,H.y=ae+_e,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>j[0]||H.y+H.y1>j[1])&&(!X||g(H,X))&&!h(H,P,j[0])){for(var Fe=H.sprite,Se=H.width>>5,me=j[0]>>5,Te=H.x-(Se<<4),Me=Te&127,We=32-Me,be=H.y1-H.y0,De=(H.y+H.y0)*me+(Te>>5),Re,qe=0;qe<be;qe++){Re=0;for(var Ze=0;Ze<=Se;Ze++)P[De+Ze]|=Re<<We|(Ze<Se?(Re=Fe[qe*Se+Ze])>>>Me:0);De+=me}return!0}return!1}return z.timeInterval=function(P){return arguments.length?(M=P??1/0,z):M},z.words=function(P){return arguments.length?(L=P,z):L},z.size=function(P){return arguments.length?(j=[+P[0],+P[1]],z):j},z.font=function(P){return arguments.length?(I=_(P),z):I},z.fontStyle=function(P){return arguments.length?(N=_(P),z):N},z.fontWeight=function(P){return arguments.length?(B=_(P),z):B},z.rotate=function(P){return arguments.length?(R=_(P),z):R},z.text=function(P){return arguments.length?(k=_(P),z):k},z.spiral=function(P){return arguments.length?(O=r[P]||P,z):O},z.fontSize=function(P){return arguments.length?(E=_(P),z):E},z.padding=function(P){return arguments.length?(D=_(P),z):D},z.random=function(P){return arguments.length?(K=P,z):K},z.on=function(){var P=J.on.apply(J,arguments);return P===J?z:P},z};function s(j){return j.text}function i(){return"serif"}function o(){return"normal"}function c(j){return Math.sqrt(j.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(j,k,I,E){if(!k.sprite){var N=j.context,B=j.ratio;N.clearRect(0,0,(n<<5)/B,a/B);var R=0,D=0,O=0,L=I.length;for(--E;++E<L;){k=I[E],N.save(),N.font=k.style+" "+k.weight+" "+~~((k.size+1)/B)+"px "+k.font;const Ie=N.measureText(k.text),ne=-Math.floor(Ie.width/2);let _e=(Ie.width+1)*B,Fe=k.size<<1;if(k.rotate){var M=Math.sin(k.rotate*t),J=Math.cos(k.rotate*t),V=_e*J,K=_e*M,z=Fe*J,G=Fe*M;_e=Math.max(Math.abs(V+G),Math.abs(V-G))+31>>5<<5,Fe=~~Math.max(Math.abs(K+z),Math.abs(K-z))}else _e=_e+31>>5<<5;if(Fe>O&&(O=Fe),R+_e>=n<<5&&(R=0,D+=O,O=0),D+Fe>=a)break;N.translate((R+(_e>>1))/B,(D+(Fe>>1))/B),k.rotate&&N.rotate(k.rotate*t),N.fillText(k.text,ne,0),k.padding&&(N.lineWidth=2*k.padding,N.strokeText(k.text,ne,0)),N.restore(),k.width=_e,k.height=Fe,k.xoff=R,k.yoff=D,k.x1=_e>>1,k.y1=Fe>>1,k.x0=-k.x1,k.y0=-k.y1,k.hasText=!0,R+=_e}for(var Y=N.getImageData(0,0,(n<<5)/B,a/B).data,te=[];--E>=0;)if(k=I[E],!!k.hasText){for(var P=k.width,H=P>>5,X=k.y1-k.y0,Z=0;Z<X*H;Z++)te[Z]=0;if(R=k.xoff,R==null)return;D=k.yoff;for(var ae=0,le=-1,ie=0;ie<X;ie++){for(var Z=0;Z<P;Z++){var ce=H*ie+(Z>>5),fe=Y[(D+ie)*(n<<5)+(R+Z)<<2]?1<<31-Z%32:0;te[ce]|=fe,ae|=fe}ae?le=ie:(k.y0++,X--,ie--,D++)}k.y1=k.y0+le,k.sprite=te.slice(0,(k.y1-k.y0)*H)}}}function h(j,k,I){I>>=5;for(var E=j.sprite,N=j.width>>5,B=j.x-(N<<4),R=B&127,D=32-R,O=j.y1-j.y0,L=(j.y+j.y0)*I+(B>>5),M,J=0;J<O;J++){M=0;for(var V=0;V<=N;V++)if((M<<D|(V<N?(M=E[J*N+V])>>>R:0))&k[L+V])return!0;L+=I}return!1}function p(j,k){var I=j[0],E=j[1];k.x+k.x0<I.x&&(I.x=k.x+k.x0),k.y+k.y0<I.y&&(I.y=k.y+k.y0),k.x+k.x1>E.x&&(E.x=k.x+k.x1),k.y+k.y1>E.y&&(E.y=k.y+k.y1)}function g(j,k){return j.x+j.x1>k[0].x&&j.x+j.x0<k[1].x&&j.y+j.y1>k[0].y&&j.y+j.y0<k[1].y}function x(j){var k=j[0]/j[1];return function(I){return[k*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function b(j){var k=4,I=k*j[0]/j[1],E=0,N=0;return function(B){var R=B<0?-1:1;switch(Math.sqrt(1+4*R*B)-R&3){case 0:E+=I;break;case 1:N+=k;break;case 2:E-=I;break;default:N-=k;break}return[E,N]}}function y(j){for(var k=[],I=-1;++I<j;)k[I]=0;return k}function w(){return document.createElement("canvas")}function _(j){return typeof j=="function"?j:function(){return j}}return CI}var qst=Kst();const Wst=_l(qst),Xst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Yst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Jst=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Zst=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null),o=S.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return S.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(o)c=Lst(u);else{const d=e.email||e.id||"";c=Mst(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},eit=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(Yst,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),vW=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],tit=["1º Medio","2º Medio","3º Medio","4º Medio"],rit=({words:e})=>{const t=S.useRef(null);return S.useEffect(()=>{if(!e.length||!t.current)return;const r=Iu(t.current);r.selectAll("*").remove();const n=Wst().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>H4(Qst)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},nit=({planificaciones:e})=>{const[t,r]=S.useState("todos"),[n,a]=S.useState("todos"),s=S.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=S.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=S.useMemo(()=>{const d=vW.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=vW.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=S.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,x;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=p.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),tit.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx(rit,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},ait=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=Zst(e),[s,i]=S.useState("seguimiento"),[o,c]=S.useState("1º"),[u,d]=S.useState(null),[f,h]=S.useState(null),p=S.useMemo(()=>{const b={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(Jst,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>l.jsx("button",{onClick:()=>c(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:Wi.map(b=>{const y=p.filter(_=>_.asignatura===b);if(y.length===0)return null;const w=u===b;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(w?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:l.jsx(Xst,{})})]}),w&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:y.map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},b)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&l.jsx(nit,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&l.jsx(eit,{plan:f,onClose:()=>h(null)})]})},$k="analisisTaxonomicos",sit=async()=>{try{const e=zt(yt(Tr,$k),gr("uploadDate","desc"));return(await Qn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},iit=async e=>{if(!e)return[];try{const t=zt(yt(Tr,$k),Dr("userId","==",e),gr("uploadDate","desc"));return(await Qn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},oit=async e=>{try{return{id:(await vn(yt(Tr,$k),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},lit=async e=>{try{const t=sr(Tr,$k,e);await za(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},bW=["1º Medio","2º Medio","3º Medio","4º Medio"],Hf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Hx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},cit=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uit=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState(!1),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState(""),[_,j]=S.useState(""),[k,I]=S.useState(""),[E,N]=S.useState(""),[B,R]=S.useState("resumen"),D=S.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const G=e.profile==="SUBDIRECCION"?await sit():await iit(e.id);r(G),i(null)}catch(G){console.error("Error al cargar análisis:",G),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);S.useEffect(()=>{D()},[D]);const O=async G=>{var te;const Y=(te=G.target.files)==null?void 0:te[0];if(Y){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Y.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(Y),d(Y.name),i(null);const H=new FileReader;H.onloadend=()=>{var Z;const X=(Z=H.result)==null?void 0:Z.split(",")[1];if(!X){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),b(null);return}b({mimeType:Y.type,data:X})},H.onerror=()=>i("Error al leer el archivo."),H.readAsDataURL(Y)}},L=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const G=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,Y={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:Hf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:Hf.reduce((te,P)=>({...te,[P]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{h1("Análisis Taxonómico",e);const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new cs(te).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:Y}}),X={inlineData:{mimeType:x.mimeType,data:x.data}},ae=(await H.generateContent([G,X])).response.text();let le;try{le=JSON.parse(ae)}catch(fe){throw console.error("Error al parsear JSON:",fe),console.error("Respuesta recibida (no es JSON válido):",ae),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:le.analysisResults,summary:le.summary,nivel:y,asignatura:_},ce=await oit(ie);await D(),c(ce),d(""),g(null),b(null),w(""),j("")}catch(te){console.error(te);const P=te instanceof Error?te.message:"Hubo un error al analizar el documento.";i(P)}finally{h(!1)}},M=async G=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await lit(G),await D(),(o==null?void 0:o.id)===G&&c(null)}catch{i("No se pudo eliminar el análisis.")}},J=S.useMemo(()=>t.filter(G=>{const Y=k?G.nivel===k:!0,te=E?G.asignatura===E:!0;return Y&&te}),[t,k,E]),V=S.useMemo(()=>{const G={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};J.forEach(te=>{Hf.forEach(P=>{var X;const H=((X=te.summary)==null?void 0:X[P])||0;G[P]+=H})});const Y=Object.values(G).reduce((te,P)=>te+P,0);return{acc:G,total:Y}},[J]),K=S.useMemo(()=>{const G=new Map;J.forEach(te=>{const P=te.asignatura||"Sin asignatura";G.has(P)||G.set(P,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const H=G.get(P);Hf.forEach(X=>{var Z;H[X]+=((Z=te.summary)==null?void 0:Z[X])||0})});const Y=Array.from(G.entries()).map(([te,P])=>({asignatura:te,counts:P,total:Object.values(P).reduce((H,X)=>H+X,0)}));return Y.sort((te,P)=>P.total-te.total),Y},[J]),z=S.useMemo(()=>o?Object.values(o.summary).reduce((G,Y)=>G+(Y||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:O,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:y,onChange:G=>w(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),bW.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:_,onChange:G=>j(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),Wi.map(G=>l.jsx("option",{value:G,children:G},G))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:G=>d(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:L,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?l.jsx(cit,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(G=>l.jsxs("button",{onClick:()=>c(G),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===G.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:G.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(G.uploadDate).toLocaleString("es-CL")}),(G.nivel||G.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[G.nivel||"Nivel s/i"," • ",G.asignatura||"Asignatura s/i"]})]},G.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:k,onChange:G=>I(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),bW.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:E,onChange:G=>N(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),Wi.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsx("button",{type:"button",onClick:()=>{I(""),N("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>R("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>R("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),B==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[J.length," análisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:Hf.map(G=>{const Y=V.acc[G],te=V.total>0?Y/V.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:G}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[Y," (",te.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Hx[G]} h-4 rounded-full`,style:{width:`${te}%`}})})]},G)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Hf.map(G=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:G}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Hx[G]}`,children:V.acc[G]})]},G))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.length," asignaturas comparadas"]})]}),K.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:K.map(G=>{const Y=G.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:G.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[G.total," ítems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Hf.map(te=>{const P=G.counts[te]||0,H=P/Y*100;return l.jsx("div",{className:`${Hx[te]} h-5`,style:{width:`${H}%`},title:`${te}: ${P} (${H.toFixed(0)}%)`},te)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Hf.map(te=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${Hx[te]}`}),l.jsx("span",{children:te})]},te))})]},G.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",z," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:Hf.map(G=>{const Y=o.summary[G]||0,te=z>0?Y/z*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:G}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[Y," (",te.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Hx[G]} h-4 rounded-full`,style:{width:`${te}%`}})})]},G)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((G,Y)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:G.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Hx[G.habilidadBloom]}`,children:G.habilidadBloom})})]},Y))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},CS="empresas_practicas",dit="usuarios",pM="rutas_supervision",gM=e=>{const t=e.data();return{id:e.id,...t}};async function Ait(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const fit=e=>{const t=zt(yt(ft,CS),gr("nombre","asc"));return fr(t,r=>{const n=r.docs.map(a=>gM(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},hit=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await Ait(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=sr(ft,CS,n);return await pi(s,a,{merge:!0}),n}else return(await vn(yt(ft,CS),{...r,createdAt:Si()})).id},mit=async e=>{const t=sr(ft,CS,e);await za(t)},pit=e=>{const t=zt(yt(ft,dit),Dr("profile","==","PROFESORADO"),gr("nombreCompleto","asc"));return fr(t,r=>{const n=r.docs.map(a=>gM(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},git=async e=>(await vn(yt(ft,pM),{...e,createdAt:Si()})).id,xit=e=>{const t=zt(yt(ft,pM),gr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>gM(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},vit=async e=>{const t=sr(ft,pM,e);await za(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rg=function(){return rg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},rg.apply(this,arguments)};function bit(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function o(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function yit(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(this,arguments)}function ng(e){return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function bue(e){var t=function(r,n){if(ng(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(ng(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return ng(t)==="symbol"?t:String(t)}function gv(e,t,r){return(t=bue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yW(Object(r),!0).forEach(function(n){gv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bue(n.key),n)}}function FO(e,t){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},FO(e,t)}function _S(e){return _S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_S(e)}function wit(e,t){if(t&&(ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Eit(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=_S(e);if(t){var a=_S(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return wit(this,r)}}function OO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yue(e,t){if(e){if(typeof e=="string")return OO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?OO(e,t):void 0}}function xM(e){return function(t){if(Array.isArray(t))return OO(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||yue(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Cit=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),wu="-ms-",EW="-moz-",Zn="-webkit-",vM="decl",wue="@keyframes",_it=Math.abs,Gk=String.fromCharCode,Nit=Object.assign;function Eue(e){return e.trim()}function sa(e,t,r){return e.replace(t,r)}function DO(e,t){return e.indexOf(t)}function ho(e,t){return 0|e.charCodeAt(t)}function b2(e,t,r){return e.slice(t,r)}function PA(e){return e.length}function bM(e){return e.length}function g_(e,t){return t.push(e),e}var Kk=1,S1=1,Cue=0,ac=0,di=0,lb="";function qk(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:Kk,column:S1,length:i,return:""}}function gy(e,t){return Nit(qk("",null,null,"",null,null,0),e,{length:-e.length},t)}function Uc(){return di=ac<Cue?ho(lb,ac++):0,S1++,di===10&&(S1=1,Kk++),di}function ef(){return ho(lb,ac)}function x5(){return ac}function gE(e,t){return b2(lb,e,t)}function y2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _ue(e){return Kk=S1=1,Cue=PA(lb=e),ac=0,[]}function Nue(e){return lb="",e}function v5(e){return Eue(gE(ac-1,PO(e===91?e+2:e===40?e+1:e)))}function Sit(e){for(;(di=ef())&&di<33;)Uc();return y2(e)>2||y2(di)>3?"":" "}function kit(e,t){for(;--t&&Uc()&&!(di<48||di>102||di>57&&di<65||di>70&&di<97););return gE(e,x5()+(t<6&&ef()==32&&Uc()==32))}function PO(e){for(;Uc();)switch(di){case e:return ac;case 34:case 39:e!==34&&e!==39&&PO(di);break;case 40:e===41&&PO(e);break;case 92:Uc()}return ac}function jit(e,t){for(;Uc()&&e+di!==57&&(e+di!==84||ef()!==47););return"/*"+gE(t,ac-1)+"*"+Gk(e===47?e:Uc())}function Bit(e){for(;!y2(ef());)Uc();return gE(e,ac)}function CW(e){return Nue(b5("",null,null,null,[""],e=_ue(e),0,[0],e))}function b5(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,p=0,g=0,x=1,b=1,y=1,w=0,_="",j=a,k=s,I=n,E=_;b;)switch(g=w,w=Uc()){case 40:if(g!=108&&ho(E,f-1)==58){DO(E+=sa(v5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=v5(w);break;case 9:case 10:case 13:case 32:E+=Sit(g);break;case 92:E+=kit(x5()-1,7);continue;case 47:switch(ef()){case 42:case 47:g_(Tit(jit(Uc(),x5()),t,r),c);break;default:E+="/"}break;case 123*x:o[u++]=PA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+d:p>0&&PA(E)-f&&g_(p>32?NW(E+";",n,r,f-1):NW(sa(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(g_(I=_W(E,t,r,u,d,a,o,_,j=[],k=[],f),s),w===123)if(d===0)b5(E,t,I,I,j,s,f,o,k);else switch(h===99&&ho(E,3)===110?100:h){case 100:case 109:case 115:b5(e,I,I,n&&g_(_W(e,I,I,0,0,a,o,_,a,j=[],f),k),a,k,f,o,n?j:k);break;default:b5(E,I,I,I,[""],k,0,o,k)}}u=d=p=0,x=y=1,_=E="",f=i;break;case 58:f=1+PA(E),p=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(di=ac>0?ho(lb,--ac):0,S1--,di===10&&(S1=1,Kk--),di==125))continue}switch(E+=Gk(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(PA(E)-1)*y,y=1;break;case 64:ef()===45&&(E+=v5(Uc())),h=ef(),d=f=PA(_=E+=Bit(x5())),w++;break;case 45:g===45&&PA(E)==2&&(x=0)}}return s}function _W(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],p=bM(h),g=0,x=0,b=0;g<n;++g)for(var y=0,w=b2(e,f+1,f=_it(x=i[g])),_=e;y<p;++y)(_=Eue(x>0?h[y]+" "+w:sa(w,/&\f/g,h[y])))&&(c[b++]=_);return qk(e,t,r,a===0?"rule":o,c,u,d)}function Tit(e,t,r){return qk(e,t,r,"comm",Gk(di),b2(e,2,-2),0)}function NW(e,t,r,n){return qk(e,t,r,vM,b2(e,0,n),b2(e,n+1,-1),n)}function ag(e,t){for(var r="",n=bM(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function SW(e,t,r,n){switch(e.type){case"@import":case vM:return e.return=e.return||e.value;case"comm":return"";case wue:return e.return=e.value+"{"+ag(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return PA(r=ag(e.children,n))?e.return=e.value+"{"+r+"}":""}function kW(e){var t=bM(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function Iit(e){return function(t){t.root||(t=t.return)&&e(t)}}function Sue(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Fit=function(e,t,r){for(var n=0,a=0;n=a,a=ef(),n===38&&a===12&&(t[r]=1),!y2(a);)Uc();return gE(e,ac)},Oit=function(e,t){return Nue(function(r,n){var a=-1,s=44;do switch(y2(s)){case 0:s===38&&ef()===12&&(n[a]=1),r[a]+=Fit(ac-1,n,a);break;case 2:r[a]+=v5(s);break;case 4:if(s===44){r[++a]=ef()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Gk(s)}while(s=Uc());return r}(_ue(e),t))},jW=new WeakMap,Dit=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||jW.get(r))&&!n){jW.set(e,!0);for(var a=[],s=Oit(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},Pit=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function kue(e,t){switch(function(r,n){return 45^ho(r,0)?(((n<<2^ho(r,0))<<2^ho(r,1))<<2^ho(r,2))<<2^ho(r,3):0}(e,t)){case 5103:return Zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+e+EW+e+wu+e+e;case 6828:case 4268:return Zn+e+wu+e+e;case 6165:return Zn+e+wu+"flex-"+e+e;case 5187:return Zn+e+sa(e,/(\w+).+(:[^]+)/,Zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Zn+e+wu+"flex-item-"+sa(e,/flex-|-self/,"")+e;case 4675:return Zn+e+wu+"flex-line-pack"+sa(e,/align-content|flex-|-self/,"")+e;case 5548:return Zn+e+wu+sa(e,"shrink","negative")+e;case 5292:return Zn+e+wu+sa(e,"basis","preferred-size")+e;case 6060:return Zn+"box-"+sa(e,"-grow","")+Zn+e+wu+sa(e,"grow","positive")+e;case 4554:return Zn+sa(e,/([^-])(transform)/g,"$1"+Zn+"$2")+e;case 6187:return sa(sa(sa(e,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),e,"")+e;case 5495:case 3959:return sa(e,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return sa(sa(e,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+e+e;case 4095:case 3583:case 4068:case 2532:return sa(e,/(.+)-inline(.+)/,Zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(PA(e)-1-t>6)switch(ho(e,t+1)){case 109:if(ho(e,t+4)!==45)break;case 102:return sa(e,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+EW+(ho(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~DO(e,"stretch")?kue(sa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ho(e,t+1)!==115)break;case 6444:switch(ho(e,PA(e)-3-(~DO(e,"!important")&&10))){case 107:return sa(e,":",":"+Zn)+e;case 101:return sa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(ho(e,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(ho(e,t+11)){case 114:return Zn+e+wu+sa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zn+e+wu+sa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zn+e+wu+sa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zn+e+wu+e+e}return e}var BW,x_,y5=typeof document<"u",Rit=y5?void 0:(BW=function(){return Sue(function(){var e={};return function(t){return e[t]}})},x_=new WeakMap,function(e){if(x_.has(e))return x_.get(e);var t=BW(e);return x_.set(e,t),t}),Lit=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case vM:e.return=kue(e.value,e.length);break;case wue:return ag([gy(e,{value:sa(e.value,"@","@"+Zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ag([gy(e,{props:[sa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return ag([gy(e,{props:[sa(a,/:(plac\w+)/,":"+Zn+"input-$1")]}),gy(e,{props:[sa(a,/:(plac\w+)/,":-moz-$1")]}),gy(e,{props:[sa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],jue=function(e){var t=e.key;if(y5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Lit,a,s,i={},o=[];y5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)i[w[_]]=!0;o.push(y)}));var c=[Dit,Pit];if(y5){var u,d=[SW,Iit(function(y){u.insert(y)})],f=kW(c.concat(n,d));s=function(y,w,_,j){u=_,ag(CW(y?y+"{"+w.styles+"}":w.styles),f),j&&(b.inserted[w.name]=!0)}}else{var h=[SW],p=kW(c.concat(n,h)),g=Rit(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=ag(CW(y?y+"{"+w.styles+"}":w.styles),p)),g[_]};s=function(y,w,_,j){var k=w.name,I=x(y,w);return b.compat===void 0?(j&&(b.inserted[k]=!0),I):j?void(b.inserted[k]=I):I}}var b={key:t,sheet:new Cit({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function oa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var ro=typeof Symbol=="function"&&Symbol.for,RO=ro?Symbol.for("react.element"):60103,LO=ro?Symbol.for("react.portal"):60106,w5=ro?Symbol.for("react.fragment"):60107,E5=ro?Symbol.for("react.strict_mode"):60108,C5=ro?Symbol.for("react.profiler"):60114,_5=ro?Symbol.for("react.provider"):60109,N5=ro?Symbol.for("react.context"):60110,MO=ro?Symbol.for("react.async_mode"):60111,NS=ro?Symbol.for("react.concurrent_mode"):60111,S5=ro?Symbol.for("react.forward_ref"):60112,k5=ro?Symbol.for("react.suspense"):60113,Mit=ro?Symbol.for("react.suspense_list"):60120,j5=ro?Symbol.for("react.memo"):60115,B5=ro?Symbol.for("react.lazy"):60116,Uit=ro?Symbol.for("react.block"):60121,Qit=ro?Symbol.for("react.fundamental"):60117,Hit=ro?Symbol.for("react.responder"):60118,Vit=ro?Symbol.for("react.scope"):60119;function Nc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RO:switch(e=e.type){case MO:case NS:case w5:case C5:case E5:case k5:return e;default:switch(e=e&&e.$$typeof){case N5:case S5:case B5:case j5:case _5:return e;default:return t}}case LO:return t}}}function TW(e){return Nc(e)===NS}var zit={AsyncMode:MO,ConcurrentMode:NS,ContextConsumer:N5,ContextProvider:_5,Element:RO,ForwardRef:S5,Fragment:w5,Lazy:B5,Memo:j5,Portal:LO,Profiler:C5,StrictMode:E5,Suspense:k5,isAsyncMode:function(e){return TW(e)||Nc(e)===MO},isConcurrentMode:TW,isContextConsumer:function(e){return Nc(e)===N5},isContextProvider:function(e){return Nc(e)===_5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RO},isForwardRef:function(e){return Nc(e)===S5},isFragment:function(e){return Nc(e)===w5},isLazy:function(e){return Nc(e)===B5},isMemo:function(e){return Nc(e)===j5},isPortal:function(e){return Nc(e)===LO},isProfiler:function(e){return Nc(e)===C5},isStrictMode:function(e){return Nc(e)===E5},isSuspense:function(e){return Nc(e)===k5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===w5||e===NS||e===C5||e===E5||e===k5||e===Mit||typeof e=="object"&&e!==null&&(e.$$typeof===B5||e.$$typeof===j5||e.$$typeof===_5||e.$$typeof===N5||e.$$typeof===S5||e.$$typeof===Qit||e.$$typeof===Hit||e.$$typeof===Vit||e.$$typeof===Uit)},typeOf:Nc};oa(function(e,t){});var IW=oa(function(e){e.exports=zit}),FW={};FW[IW.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},FW[IW.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var UO=typeof document<"u";function Bue(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var yM=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||UO===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},wM=function(e,t,r){yM(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);UO||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!UO&&a.length!==0)return a}},$it={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Git=/[A-Z]|^ms/g,Kit=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Tue=function(e){return e.charCodeAt(1)===45},OW=function(e){return e!=null&&typeof e!="boolean"},_I=Sue(function(e){return Tue(e)?e:e.replace(Git,"-$&").toLowerCase()}),DW=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Kit,function(r,n,a){return RA={name:n,styles:a,next:RA},n})}return $it[e]===1||Tue(e)||typeof t!="number"||t===0?t:t+"px"};function vw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return RA={name:r.name,styles:r.styles,next:RA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)RA={name:n.name,styles:n.styles,next:RA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=vw(c,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":OW(g)&&(f+=_I(p)+":"+DW(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=vw(c,u,g);switch(p){case"animation":case"animationName":f+=_I(p)+":"+x+";";break;default:f+=p+"{"+x+"}"}}else for(var b=0;b<g.length;b++)OW(g[b])&&(f+=_I(p)+":"+DW(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=RA,i=r(e);return RA=s,vw(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var RA,PW=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Wk=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";RA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=vw(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=vw(r,t,e[i]),n&&(a+=s[i]);PW.lastIndex=0;for(var o,c="";(o=PW.exec(a))!==null;)c+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:RA}},qit=typeof document<"u",Wit=function(e){return e()},Iue=!!S.useInsertionEffect&&S.useInsertionEffect,Fue=qit&&Iue||Wit,RW=Iue||S.useLayoutEffect,Qv=typeof document<"u",EM={}.hasOwnProperty,SS=S.createContext(typeof HTMLElement<"u"?jue({key:"css"}):null);SS.Provider;var Xk=function(e){return S.forwardRef(function(t,r){var n=S.useContext(SS);return e(t,n,r)})};Qv||(Xk=function(e){return function(t){var r=S.useContext(SS);return r===null?(r=jue({key:"css"}),S.createElement(SS.Provider,{value:r},e(t,r))):e(t,r)}});var CM=S.createContext({}),QO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Xit=function(e,t){var r={};for(var n in t)EM.call(t,n)&&(r[n]=t[n]);return r[QO]=e,r},Yit=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;yM(t,r,n);var a=Fue(function(){return wM(t,r,n)});if(!Qv&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return S.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Jit=Xk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[QO],s=[n],i="";typeof e.className=="string"?i=Bue(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=Wk(s,void 0,S.useContext(CM));i+=t.key+"-"+o.name;var c={};for(var u in e)!EM.call(e,u)||u==="css"||u===QO||(c[u]=e[u]);return c.ref=r,c.className=i,S.createElement(S.Fragment,null,S.createElement(Yit,{cache:t,serialized:o,isStringTag:typeof a=="string"}),S.createElement(a,c))});oa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Br=function(e,t){var r=arguments;if(t==null||!EM.call(t,"css"))return S.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Jit,a[1]=Xit(e,t);for(var s=2;s<n;s++)a[s]=r[s];return S.createElement.apply(null,a)};Xk(function(e,t){var r=e.styles,n=Wk([r],void 0,S.useContext(CM));if(!Qv){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:S.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=S.useRef();return RW(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),RW(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&wM(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function _M(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Wk(t)}var Zit=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function eot(e,t,r){var n=[],a=Bue(e,n,r);return n.length<2?r:a+t(n)}var tot=function(e){var t,r=e.cache,n=e.serializedArr,a=Fue(function(){for(var s="",i=0;i<n.length;i++){var o=wM(r,n[i],!1);Qv||o===void 0||(s+=o)}if(!Qv)return s});return Qv||a.length===0?null:S.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};Xk(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=Wk(o,t.registered);return r.push(u),yM(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return eot(t.registered,n,Zit(o))},theme:S.useContext(CM)},s=e.children(a);return S.createElement(S.Fragment,null,S.createElement(tot,{cache:t,serializedArr:r}),s)});function Hi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||yue(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ah(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Oue(e){return Ah(e).getComputedStyle(e)}const v_=Math.round;function Due(e){return Rue(e)?(e.nodeName||"").toLowerCase():""}let b_;function Pue(e){return e instanceof Ah(e).HTMLElement}function T5(e){return e instanceof Ah(e).Element}function Rue(e){return e instanceof Ah(e).Node}function LW(e){return typeof ShadowRoot>"u"?!1:e instanceof Ah(e).ShadowRoot||e instanceof ShadowRoot}function Lue(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Oue(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function rot(){return/^((?!chrome|android).)*safari/i.test(function(){if(b_)return b_;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(b_=e.brands.map(t=>t.brand+"/"+t.version).join(" "),b_):navigator.userAgent}())}function Mue(e){return T5(e)?e:e.contextElement}const Uue={x:1,y:1};function MW(e){const t=Mue(e);if(!Pue(t))return Uue;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=Oue(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,p=c.offsetHeight,g=v_(d)!==h||v_(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?v_(r.width):r.width)/n,o=(s?v_(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function UW(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Mue(e);let c=Uue;t&&(c=MW(e));const u=o?Ah(o):window,d=rot()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,p=i.width/c.x,g=i.height/c.y;if(o){const x=Ah(o),b=n;let y=x.frameElement;for(;y&&n&&b!==x;){const w=MW(y),_=y.getBoundingClientRect(),j=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(j.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(j.paddingTop))*w.y,f*=w.x,h*=w.y,p*=w.x,g*=w.y,f+=_.x,h+=_.y,y=Ah(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function not(e){if(Due(e)==="html")return e;const t=e.assignedSlot||e.parentNode||LW(e)&&e.host||function(r){return((Rue(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return LW(t)?t.host:t}function Que(e){const t=not(e);return function(r){return["html","body","#document"].includes(Due(r))}(t)?t.ownerDocument.body:Pue(t)&&Lue(t)?t:Que(t)}function I5(e,t){var r;t===void 0&&(t=[]);const n=Que(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Ah(n);return a?t.concat(s,s.visualViewport||[],Lue(n)?n:[]):t.concat(n,I5(n))}var HO=typeof document<"u"?S.useLayoutEffect:S.useEffect,aot=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],kS=function(){};function sot(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function iot(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(sot(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var QW=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):ng(e)==="object"&&e!==null?[e]:[];var t},HW=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Er({},UA(e,aot))},Es=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function Yk(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Hue(e){return Yk(e)?window.pageYOffset:e.scrollTop}function jS(e,t){Yk(e)?window.scrollTo(0,t):e.scrollTop=t}function oot(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function y_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:kS,a=Hue(e),s=t-a,i=10,o=0;function c(){var u=oot(o+=i,a,s,r);jS(e,u),o<r?window.requestAnimationFrame(c):n(e)}c()}function VW(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?jS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&jS(e,Math.max(t.offsetTop-a,0))}function zW(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Vue=!1,lot={get passive(){return Vue=!0}},w_=typeof window<"u"?window:{};w_.addEventListener&&w_.removeEventListener&&(w_.addEventListener("p",kS,lot),w_.removeEventListener("p",kS,!1));var cot=Vue;function uot(e){return e!=null}function E_(e,t,r){return e?t:r}var dot=["children","innerProps"],Aot=["children","innerProps"];function fot(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(J){var V=getComputedStyle(J),K=V.position==="absolute",z=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var G=J;G=G.parentElement;)if(V=getComputedStyle(G),(!K||V.position!=="static")&&z.test(V.overflow+V.overflowY+V.overflowX))return G;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,x=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||Yk(d=c)?window.innerHeight:d.clientHeight,w=Hue(c),_=parseInt(getComputedStyle(r).marginBottom,10),j=parseInt(getComputedStyle(r).marginTop,10),k=b-j,I=y-x,E=k+w,N=f-w-x,B=p-y+w+_,R=w+x-j,D=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(N>=g&&!i)return s&&y_(c,B,D),{placement:"bottom",maxHeight:t};if(!i&&N>=n||i&&I>=n)return s&&y_(c,B,D),{placement:"bottom",maxHeight:i?I-_:N-_};if(a==="auto"||i){var O=t,L=i?k:E;return L>=n&&(O=Math.min(L-_-o,t)),{placement:"top",maxHeight:O}}if(a==="bottom")return s&&jS(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(k>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&y_(c,R,D),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&k>=n){var M=t;return(!i&&E>=n||i&&k>=n)&&(M=i?k-j:E-j),s&&y_(c,R,D),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var $W,zue=function(e){return e==="auto"?"bottom":e},$ue=S.createContext(null),hot=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(S.useContext($ue)||{}).setPortalPlacement,u=S.useRef(null),d=Hi(S.useState(n),2),f=d[0],h=d[1],p=Hi(S.useState(null),2),g=p[0],x=p[1],b=o.spacing.controlHeight;return HO(function(){var y=u.current;if(y){var w=s==="fixed",_=fot({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:b});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,i,r,c,b]),t({ref:u,placerProps:Er(Er({},e),{},{placement:g||zue(a),maxHeight:f})})},mot=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Br("div",Lr({},Es(e,"menu",{menu:!0}),{ref:r},n),t)},Gue=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Er({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},pot=Gue,got=Gue,xot=["size"],vot=["innerProps","isRtl","size"],NI,SI,bot={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Kue=function(e){var t=e.size,r=UA(e,xot);return Br("svg",Lr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:bot},r))},kI=function(e){return Br(Kue,Lr({size:20},e),Br("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},GW=function(e){return Br(Kue,Lr({size:20},e),Br("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},que=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Er({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},yot=que,wot=que,Eot=function(){var e=_M.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}($W||(NI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],SI||(SI=NI.slice(0)),$W=Object.freeze(Object.defineProperties(NI,{raw:{value:Object.freeze(SI)}})))),jI=function(e){var t=e.delay,r=e.offset;return Br("span",{css:_M({animation:"".concat(Eot," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Cot=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Br("div",Lr({ref:a},Es(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},_ot=["data"],Not=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Br("div",Lr({},Es(e,"group",{group:!0}),o),Br(s,Lr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Br("div",null,t))},Sot=["innerRef","isDisabled","isHidden","inputClassName"],Wue={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},kot={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Er({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Wue)},jot=function(e){return Er({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Wue)},KW=function(e){var t=e.children,r=e.innerProps;return Br("div",r,t)},Bot=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Br(c,{data:n,innerProps:Er(Er({},Es(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},Br(u,{data:n,innerProps:Er({},Es(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),Br(d,{data:n,innerProps:Er(Er({},Es(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},Tot={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Br("div",Lr({},Es(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Br(kI,null))},Control:Cot,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Br("div",Lr({},Es(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Br(GW,null))},DownChevron:GW,CrossIcon:kI,Group:Not,GroupHeading:function(e){var t=HW(e);t.data;var r=UA(t,_ot);return Br("div",Lr({},Es(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Br("div",Lr({},Es(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Br("span",Lr({},t,Es(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=HW(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=UA(n,Sot);return Br("div",Lr({},Es(e,"input",{"input-container":!0}),{"data-value":r||""}),Br("input",Lr({className:t({input:!0},o),ref:a,style:jot(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=UA(e,vot);return Br("div",Lr({},Es(Er(Er({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Br(jI,{delay:0,offset:r}),Br(jI,{delay:160,offset:!0}),Br(jI,{delay:320,offset:!r}))},Menu:mot,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Br("div",Lr({},Es(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=S.useRef(null),c=S.useRef(null),u=Hi(S.useState(zue(s)),2),d=u[0],f=u[1],h=S.useMemo(function(){return{setPortalPlacement:f}},[]),p=Hi(S.useState(null),2),g=p[0],x=p[1],b=S.useCallback(function(){if(n){var j=function(E){var N=E.getBoundingClientRect();return{bottom:N.bottom,height:N.height,left:N.left,right:N.right,top:N.top,width:N.width}}(n),k=i==="fixed"?0:window.pageYOffset,I=j[d]+k;I===(g==null?void 0:g.offset)&&j.left===(g==null?void 0:g.rect.left)&&j.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:j})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);HO(function(){b()},[b]);var y=S.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(j,k,I,E){E===void 0&&(E={});const{ancestorScroll:N=!0,ancestorResize:B=!0,elementResize:R=!0,animationFrame:D=!1}=E,O=N&&!D,L=O||B?[...T5(j)?I5(j):j.contextElement?I5(j.contextElement):[],...I5(k)]:[];L.forEach(K=>{O&&K.addEventListener("scroll",I,{passive:!0}),B&&K.addEventListener("resize",I)});let M,J=null;if(R){let K=!0;J=new ResizeObserver(()=>{K||I(),K=!1}),T5(j)&&!D&&J.observe(j),T5(j)||!j.contextElement||D||J.observe(j.contextElement),J.observe(k)}let V=D?UW(j):null;return D&&function K(){const z=UW(j);!V||z.x===V.x&&z.y===V.y&&z.width===V.width&&z.height===V.height||I(),V=z,M=requestAnimationFrame(K)}(),I(),()=>{var K;L.forEach(z=>{O&&z.removeEventListener("scroll",I),B&&z.removeEventListener("resize",I)}),(K=J)==null||K.disconnect(),J=null,D&&cancelAnimationFrame(M)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);HO(function(){y()},[y]);var w=S.useCallback(function(j){o.current=j,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var _=Br("div",Lr({ref:w},Es(Er(Er({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Br($ue.Provider,{value:h},t?zP.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=UA(e,Aot);return Br("div",Lr({},Es(Er(Er({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=UA(e,dot);return Br("div",Lr({},Es(Er(Er({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:Bot,MultiValueContainer:KW,MultiValueLabel:KW,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Br("div",Lr({role:"button"},r),t||Br(kI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Br("div",Lr({},Es(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Br("div",Lr({},Es(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Br("div",Lr({},Es(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Br("div",Lr({},Es(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Br("div",Lr({},Es(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},qW=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Iot(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||qW(n)&&qW(a)))return!1;var n,a;return!0}for(var Fot={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},WW=function(e){return Br("span",Lr({css:Fot},e))},Oot={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},Dot=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,x=o.isSearchable,b=o.menuIsOpen,y=o.options,w=o.screenReaderStatus,_=o.tabSelectsValue,j=o.isLoading,k=o["aria-label"],I=o["aria-live"],E=S.useMemo(function(){return Er(Er({},Oot),d||{})},[d]),N=S.useMemo(function(){var M,J="";if(t&&E.onChange){var V=t.option,K=t.options,z=t.removedValue,G=t.removedValues,Y=t.value,te=z||V||(M=Y,Array.isArray(M)?null:M),P=te?f(te):"",H=K||G||void 0,X=H?H.map(f):[],Z=Er({isDisabled:te&&g(te,i),label:P,labels:X},t);J=E.onChange(Z)}return J},[t,E,g,i,f]),B=S.useMemo(function(){var M="",J=r||n,V=!!(r&&i&&i.includes(r));if(J&&E.onFocus){var K={focused:J,label:f(J),isDisabled:g(J,i),isSelected:V,options:a,context:J===r?"menu":"value",selectValue:i,isAppleDevice:u};M=E.onFocus(K)}return M},[r,n,f,g,E,a,i,u]),R=S.useMemo(function(){var M="";if(b&&y.length&&!j&&E.onFilter){var J=w({count:a.length});M=E.onFilter({inputValue:h,resultsMessage:J})}return M},[a,h,b,E,y,w,j]),D=(t==null?void 0:t.action)==="initial-input-focus",O=S.useMemo(function(){var M="";if(E.guidance){var J=n?"value":b?"menu":"input";M=E.guidance({"aria-label":k,context:J,isDisabled:r&&g(r,i),isMulti:p,isSearchable:x,tabSelectsValue:_,isInitialFocus:D})}return M},[k,r,n,p,g,x,b,E,i,_,D]),L=Br(S.Fragment,null,Br("span",{id:"aria-selection"},N),Br("span",{id:"aria-focused"},B),Br("span",{id:"aria-results"},R),Br("span",{id:"aria-guidance"},O));return Br(S.Fragment,null,Br(WW,{id:c},D&&L),Br(WW,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&L))},BI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Pot=new RegExp("["+BI.map(function(e){return e.letters}).join("")+"]","g"),Xue={},TI=0;TI<BI.length;TI++)for(var II=BI[TI],FI=0;FI<II.letters.length;FI++)Xue[II.letters[FI]]=II.base;var Yue=function(e){return e.replace(Pot,function(t){return Xue[t]})},Rot=function(e,t){t===void 0&&(t=Iot);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Yue),XW=function(e){return e.replace(/^\s+|\s+$/g,"")},Lot=function(e){return"".concat(e.label," ").concat(e.value)},Mot=["innerRef"];function Uot(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var u=Hi(c,1)[0];return!s.includes(u)});return o.reduce(function(c,u){var d=Hi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(UA(e,Mot),"onExited","in","enter","exit","appear");return Br("input",Lr({ref:t},r,{css:_M({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var YW=["boxSizing","height","overflow","paddingRight","position"],JW={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ZW(e){e.preventDefault()}function eX(e){e.stopPropagation()}function tX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function rX(){return"ontouchstart"in window||navigator.maxTouchPoints}var nX=!(typeof window>"u"||!window.document||!window.document.createElement),xy=0,Vx={capture:!1,passive:!1},Qot=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Hot={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Vot(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=S.useRef(!1),p=S.useRef(!1),g=S.useRef(0),x=S.useRef(null),b=S.useCallback(function(I,E){if(x.current!==null){var N=x.current,B=N.scrollTop,R=N.scrollHeight,D=N.clientHeight,O=x.current,L=E>0,M=R-D-B,J=!1;M>E&&h.current&&(u&&u(I),h.current=!1),L&&p.current&&(f&&f(I),p.current=!1),L&&E>M?(c&&!h.current&&c(I),O.scrollTop=R,J=!0,h.current=!0):!L&&-E>B&&(d&&!p.current&&d(I),O.scrollTop=0,J=!0,p.current=!0),J&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(I)}},[c,u,d,f]),y=S.useCallback(function(I){b(I,I.deltaY)},[b]),w=S.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),_=S.useCallback(function(I){var E=g.current-I.changedTouches[0].clientY;b(I,E)},[b]),j=S.useCallback(function(I){if(I){var E=!!cot&&{passive:!1};I.addEventListener("wheel",y,E),I.addEventListener("touchstart",w,E),I.addEventListener("touchmove",_,E)}},[_,w,y]),k=S.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",w,!1),I.removeEventListener("touchmove",_,!1))},[_,w,y]);return S.useEffect(function(){if(o){var I=x.current;return j(I),function(){k(I)}}},[o,j,k]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=S.useRef({}),f=S.useRef(null),h=S.useCallback(function(g){if(nX){var x=document.body,b=x&&x.style;if(u&&YW.forEach(function(j){var k=b&&b[j];d.current[j]=k}),u&&xy<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(JW).forEach(function(j){var k=JW[j];b&&(b[j]=k)}),b&&(b.paddingRight="".concat(_,"px"))}x&&rX()&&(x.addEventListener("touchmove",ZW,Vx),g&&(g.addEventListener("touchstart",tX,Vx),g.addEventListener("touchmove",eX,Vx))),xy+=1}},[u]),p=S.useCallback(function(g){if(nX){var x=document.body,b=x&&x.style;xy=Math.max(xy-1,0),u&&xy<1&&YW.forEach(function(y){var w=d.current[y];b&&(b[y]=w)}),x&&rX()&&(x.removeEventListener("touchmove",ZW,Vx),g&&(g.removeEventListener("touchstart",tX,Vx),g.removeEventListener("touchmove",eX,Vx)))}},[u]);return S.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return Br(S.Fragment,null,r&&Br("div",{onClick:Qot,css:Hot}),t(function(i){a(i),s(i)}))}var zot={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},$ot=function(e){var t=e.name,r=e.onFocus;return Br("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:zot,value:"",onChange:function(){}})};function VO(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Jue(){return VO(/^Mac/i)}function Got(){return VO(/^iPhone/i)||VO(/^iPad/i)||Jue()&&navigator.maxTouchPoints>1}var Kot,qot={clearIndicator:wot,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return Er({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:yot,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Er({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Er({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return Er(Er({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},kot),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return Er({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:got,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return Er((gv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),gv(r,"position","absolute"),gv(r,"width","100%"),gv(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Er({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Er({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Er({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return Er({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:pot,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return Er({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Er({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Er({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Er({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},OI={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Wot={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:zW(),captureMenuScroll:!zW(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Er({ignoreCase:!0,ignoreAccents:!0,stringify:Lot,trim:!0,matchFrom:"any"},Kot),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?XW(t):t,u=i?XW(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Rot(c),u=Yue(u)),o==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function aX(e,t,r,n){return{type:"option",data:t,isDisabled:ede(e,t,r),isSelected:tde(e,t,r),label:Zue(e,t),value:BS(e,t),index:n}}function C_(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return aX(e,i,t,o)}).filter(function(i){return oX(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=aX(e,r,t,n);return oX(e,s)?s:void 0}).filter(uot)}function sX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,xM(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function iX(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,xM(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function oX(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!nde(e)||!s)&&rde(e,{label:i,value:o,data:a},n)}var DI=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Zue=function(e,t){return e.getOptionLabel(t)},BS=function(e,t){return e.getOptionValue(t)};function ede(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function tde(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=BS(e,t);return r.some(function(a){return BS(e,a)===n})}function rde(e,t,r){return!e.filterOption||e.filterOption(t,r)}var nde=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Xot=1,ade=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&FO(i,o)})(s,S.Component);var t,r,n,a=Eit(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Jue()||Got(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,x=p.name;h.name=x,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,x=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,x=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),w=o.isOptionDisabled(f,b);if(y){var _=o.getOptionValue(f);o.setValue(b.filter(function(j){return o.getOptionValue(j)!==_}),"deselect-option",f)}else{if(w)return void o.ariaOnChange(f,{action:"select-option",option:f,name:x});g?o.setValue([].concat(xM(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),x=p.filter(function(y){return o.getOptionValue(y)!==g}),b=E_(h,x,x[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(E_(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),x=E_(f,g,g[0]||null);o.onChange(x,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return DI(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return iX(C_(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return iot.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Zue(o.props,f)},o.getOptionValue=function(f){return BS(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=qot[f](h,p);g.boxSizing="border-box";var x=o.props.styles[f];return x?x(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,Er(Er({},Tot),f.components);var f},o.buildCategorizedOptions=function(){return C_(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return sX(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:Er({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Yk(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),x=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||x>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return nde(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,j=h.onKeyDown,k=h.tabSelectsValue,I=h.openMenuOnFocus,E=o.state,N=E.focusedOption,B=E.focusedValue,R=E.selectValue;if(!(w||typeof j=="function"&&(j(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(B)o.removeValue(B);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!_||!k||!N||I&&o.isOptionSelected(N,R))return;o.selectOption(N);break;case"Enter":if(f.keyCode===229)break;if(_){if(!N||o.isComposing)return;o.selectOption(N);break}return;case"Escape":_?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&x&&o.clearValue();break;case" ":if(b)return;if(!_){o.openMenu("first");break}if(!N)return;o.selectOption(N);break;case"ArrowUp":_?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":_?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!_)return;o.focusOption("pageup");break;case"PageDown":if(!_)return;o.focusOption("pagedown");break;case"Home":if(!_)return;o.focusOption("first");break;case"End":if(!_)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++Xot),o.state.selectValue=QW(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=u[d],o.state.focusedOptionId=DI(c,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&VW(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(VW(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(OI):Er(Er({},OI),this.props.theme):OI}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return ede(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return tde(this.props,i,o)}},{key:"filterOption",value:function(i,o){return rde(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents().Input,b=this.state,y=b.inputIsHidden,w=b.ariaSelection,_=this.commonProps,j=u||this.getElementId("input"),k=Er(Er(Er({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?S.createElement(x,Lr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:j,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},k)):S.createElement(Uot,Lr({id:j,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:kS,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,j=x.placeholder,k=this.state,I=k.selectValue,E=k.focusedValue,N=k.isFocused;if(!this.hasValue()||!b)return _?null:S.createElement(p,Lr({},g,{key:"placeholder",isDisabled:y,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),j);if(w)return I.map(function(R,D){var O=R===E,L="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return S.createElement(c,Lr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:O,isDisabled:y,key:L,index:D,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(M){M.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(_)return null;var B=I[0];return S.createElement(h,Lr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Lr({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?S.createElement(i,Lr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return S.createElement(c,Lr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Lr({},o,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,x=o.Option,b=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,j=w.inputValue,k=w.isLoading,I=w.loadingMessage,E=w.minMenuHeight,N=w.maxMenuHeight,B=w.menuIsOpen,R=w.menuPlacement,D=w.menuPosition,O=w.menuPortalTarget,L=w.menuShouldBlockScroll,M=w.menuShouldScrollIntoView,J=w.noOptionsMessage,V=w.onMenuScrollToTop,K=w.onMenuScrollToBottom;if(!B)return null;var z,G=function(X,Z){var ae=X.type,le=X.data,ie=X.isDisabled,ce=X.isSelected,fe=X.label,Ie=X.value,ne=y===le,_e=ie?void 0:function(){return i.onOptionHover(le)},Fe=ie?void 0:function(){return i.selectOption(le)},Se="".concat(i.getElementId("option"),"-").concat(Z),me={id:Se,onClick:Fe,onMouseMove:_e,onMouseOver:_e,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return S.createElement(x,Lr({},b,{innerProps:me,data:le,isDisabled:ie,isSelected:ce,key:Se,label:fe,type:ae,value:Ie,isFocused:ne,innerRef:ne?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(X.data,"menu"))};if(this.hasOptions())z=this.getCategorizedOptions().map(function(X){if(X.type==="group"){var Z=X.data,ae=X.options,le=X.index,ie="".concat(i.getElementId("group"),"-").concat(le),ce="".concat(ie,"-heading");return S.createElement(c,Lr({},b,{key:ie,data:Z,options:ae,Heading:u,headingProps:{id:ce,data:X.data},label:i.formatGroupLabel(X.data)}),X.options.map(function(fe){return G(fe,"".concat(le,"-").concat(fe.index))}))}if(X.type==="option")return G(X,"".concat(X.index))});else if(k){var Y=I({inputValue:j});if(Y===null)return null;z=S.createElement(p,b,Y)}else{var te=J({inputValue:j});if(te===null)return null;z=S.createElement(g,b,te)}var P={minMenuHeight:E,maxMenuHeight:N,menuPlacement:R,menuPosition:D,menuShouldScrollIntoView:M},H=S.createElement(hot,Lr({},b,P),function(X){var Z=X.ref,ae=X.placerProps,le=ae.placement,ie=ae.maxHeight;return S.createElement(d,Lr({},b,P,{innerRef:Z,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:k,placement:le}),S.createElement(Vot,{captureEnabled:_,onTopArrive:V,onBottomArrive:K,lockEnabled:L},function(ce){return S.createElement(f,Lr({},b,{innerRef:function(fe){i.getMenuListRef(fe),ce(fe)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:k,maxHeight:ie,focusedOption:y}),z)}))});return O||D==="fixed"?S.createElement(h,Lr({},b,{appendTo:O,controlElement:this.controlRef,menuPlacement:R,menuPosition:D}),H):H}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return S.createElement($ot,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=p.map(function(y){return i.getOptionValue(y)}).join(c);return S.createElement("input",{name:f,type:"hidden",value:g})}var x=p.length>0?p.map(function(y,w){return S.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:i.getOptionValue(y)})}):S.createElement("input",{name:f,type:"hidden",value:""});return S.createElement("div",null,x)}var b=p[0]?this.getOptionValue(p[0]):"";return S.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return S.createElement(Dot,Lr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,x=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return S.createElement(u,Lr({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),S.createElement(o,Lr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),S.createElement(d,Lr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(c,Lr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,x=i.options,b=i.value,y=i.menuIsOpen,w=i.inputValue,_=i.isMulti,j=QW(b),k={};if(c&&(b!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var I=y?function(L,M){return sX(C_(L,M))}(i,j):[],E=y?iX(C_(i,j),"".concat(g,"-option")):[],N=u?function(L,M){var J=L.focusedValue,V=L.selectValue.indexOf(J);if(V>-1){if(M.indexOf(J)>-1)return J;if(V<M.length)return M[V]}return null}(o,j):null,B=function(L,M){var J=L.focusedOption;return J&&M.indexOf(J)>-1?J:M[0]}(o,I);k={selectValue:j,focusedOption:B,focusedOptionId:DI(E,B),focusableOptionsWithIds:E,focusedValue:N,clearFocusValueOnUpdate:!1}}var R=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,O=h&&p;return h&&!O&&(D={value:E_(_,j,j[0]||null),options:j,action:"initial-input-focus"},O=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),Er(Er(Er({},k),R),{},{prevProps:i,ariaSelection:D,prevWasFocused:O})}}],r&&wW(t.prototype,r),n&&wW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();ade.defaultProps=Wot;var Yot=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Jot=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],NM=oa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Zot=oa(function(e){var t=NM.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),sde=oa(function(e){var t=NM.default;e.exports=function(r){var n=Zot(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),elt=oa(function(e){e.exports=function(t,r,n){return(r=sde(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){elt(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,sde(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var tlt=oa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&tlt(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var lX=oa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),rlt=oa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),nlt=oa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),alt=oa(function(e){var t=NM.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nlt(r)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){var r=rlt();return function(){var n,a=lX(t);if(r){var s=lX(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return alt(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var zO=oa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),slt=oa(function(e){e.exports=function(t){if(Array.isArray(t))return zO(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),ilt=oa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),ide=oa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return zO(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zO(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),olt=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){return slt(t)||ilt(t)||ide(t)||olt()},e.exports.__esModule=!0,e.exports.default=e.exports});var llt=oa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),clt=oa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),ult=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){return llt(t)||clt(t,r)||ide(t,r)||ult()},e.exports.__esModule=!0,e.exports.default=e.exports});var dlt=oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=dlt(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Alt=S.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,x=UA(a,Jot),b=x.inputValue,y=S.useRef(void 0),w=S.useRef(!1),_=Hi(S.useState(Array.isArray(i)?i:void 0),2),j=_[0],k=_[1],I=Hi(S.useState(b!==void 0?b:""),2),E=I[0],N=I[1],B=Hi(S.useState(i===!0),2),R=B[0],D=B[1],O=Hi(S.useState(void 0),2),L=O[0],M=O[1],J=Hi(S.useState([]),2),V=J[0],K=J[1],z=Hi(S.useState(!1),2),G=z[0],Y=z[1],te=Hi(S.useState({}),2),P=te[0],H=te[1],X=Hi(S.useState(void 0),2),Z=X[0],ae=X[1],le=Hi(S.useState(void 0),2),ie=le[0],ce=le[1];c!==ie&&(H({}),ce(c)),i!==Z&&(k(Array.isArray(i)?i:void 0),ae(i)),S.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var fe=S.useCallback(function(_e,Fe){if(!u)return Fe();var Se=u(_e,Fe);Se&&typeof Se.then=="function"&&Se.then(Fe,function(){return Fe()})},[u]);S.useEffect(function(){i===!0&&fe(E,function(_e){w.current&&(k(_e||[]),D(!!y.current))})},[]);var Ie=S.useCallback(function(_e,Fe){var Se=function(Te,Me,We){if(We){var be=We(Te,Me);if(typeof be=="string")return be}return Te}(_e,Fe,h);if(!Se)return y.current=void 0,N(""),M(""),K([]),D(!1),void Y(!1);if(c&&P[Se])N(Se),M(Se),K(P[Se]),D(!1),Y(!1);else{var me=y.current={};N(Se),D(!0),Y(!L),fe(Se,function(Te){w&&me===y.current&&(y.current=void 0,D(!1),M(Se),K(Te||[]),Y(!1),H(Te?Er(Er({},P),{},gv({},Se,Te)):P))})}},[c,fe,L,P,h]),ne=G?[]:E&&L?V:j||[];return Er(Er({},x),{},{options:ne,isLoading:R||f,onInputChange:Ie,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,x=a.onMenuClose,b=a.onMenuOpen,y=a.value,w=UA(a,Yot),_=Hi(S.useState(f!==void 0?f:i),2),j=_[0],k=_[1],I=Hi(S.useState(h!==void 0?h:c),2),E=I[0],N=I[1],B=Hi(S.useState(y!==void 0?y:d),2),R=B[0],D=B[1],O=S.useCallback(function(G,Y){typeof p=="function"&&p(G,Y),D(G)},[p]),L=S.useCallback(function(G,Y){var te;typeof g=="function"&&(te=g(G,Y)),k(te!==void 0?te:G)},[g]),M=S.useCallback(function(){typeof b=="function"&&b(),N(!0)},[b]),J=S.useCallback(function(){typeof x=="function"&&x(),N(!1)},[x]),V=f!==void 0?f:j,K=h!==void 0?h:E,z=y!==void 0?y:R;return Er(Er({},w),{},{inputValue:V,menuIsOpen:K,onChange:O,onInputChange:L,onMenuClose:J,onMenuOpen:M,value:z})}(r);return S.createElement(ade,Lr({ref:t},n))}),flt=Alt,hlt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},xv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(xv||(xv={}));class Ip{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,Ip.instance){if(!hlt(this.options,Ip.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Ip.instance.options)}`);return Ip.instance}Ip.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?xv.FAILURE:this.done?xv.SUCCESS:this.loading?xv.LOADING:xv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var mlt=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),o=rg({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,x=p.length;g<x;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},plt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=S.useRef(null),p=S.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,b=S.useRef(!1),y=S.useRef(null),w=S.useRef(!1),_=S.useRef(c);_.current=c;var j=S.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);S.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var k=S.useCallback(function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];p.current=E,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(_.current.apply(_,E),b.current=!0),y.current=setTimeout(function(){var B=!0;g&&b.current&&(B=!1),j(),!w.current&&x&&B&&_.current.apply(_,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var B=p.current;j(),w.current||_.current.apply(null,B)},f))},[f,u,j,g,x]),I=S.useCallback(function(){y.current&&(_.current.apply(null,p.current),j())},[j]);return[k,j,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=rg({},t);a.getPlacePredictions(mlt(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},cX=S.forwardRef(function(e,t){var r,n,a,s,i,o,c,u,d=function(x){var b=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=S.useState(void 0),j=_[0],k=_[1],I=S.useState(void 0),E=I[0],N=I[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");k(new window.google.maps.places.AutocompleteService),N(new google.maps.places.AutocompleteSessionToken)};return S.useEffect(function(){b?bit(void 0,void 0,void 0,function(){var R;return yit(this,function(D){switch(D.label){case 0:if(!b)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Ip(rg({apiKey:b},rg({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return B(),[3,5];case 4:return R=D.sent(),typeof w=="function"&&w(R),[3,5];case 5:return[2]}})}):B()},[]),{placesService:j,sessionToken:E,setSessionToken:N}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=plt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return S.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),nt.createElement(flt,rg({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $O=function(e,t){return $O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},$O(e,t)};function Wd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$O(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GO=function(){return GO=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},GO.apply(this,arguments)};function fl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(e,[])).next())})}function Ho(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function __(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Th=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Jk=function(e,t){return Th.fromClientRect(e,t.getBoundingClientRect())},glt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Th(0,0,n,a)},Zk=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Qs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},uX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xlt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var N_=0;N_<uX.length;N_++)xlt[uX.charCodeAt(N_)]=N_;var dX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var S_=0;S_<dX.length;S_++)Hy[dX.charCodeAt(S_)]=S_;var vlt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Hy[e.charCodeAt(n)],i=Hy[e.charCodeAt(n+1)],o=Hy[e.charCodeAt(n+2)],c=Hy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},blt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},ylt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},sg=5,SM=11,PI=2,wlt=SM-sg,ode=65536>>sg,Elt=1<<sg,RI=Elt-1,Clt=1024>>sg,_lt=ode+Clt,Nlt=_lt,Slt=32,klt=Nlt+Slt,jlt=65536>>SM,Blt=1<<wlt,Tlt=Blt-1,AX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Ilt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Flt=function(e,t){var r=vlt(e),n=Array.isArray(r)?ylt(r):new Uint32Array(r),a=Array.isArray(r)?blt(r):new Uint16Array(r),s=24,i=AX(a,s/2,n[4]/2),o=n[5]===2?AX(a,(s+n[4])/2):Ilt(n,Math.ceil((s+n[4])/4));return new Olt(n[0],n[1],n[2],n[3],i,o)},Olt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>sg],r=(r<<PI)+(t&RI),this.data[r];if(t<=65535)return r=this.index[ode+(t-55296>>sg)],r=(r<<PI)+(t&RI),this.data[r];if(t<this.highStart)return r=klt-jlt+(t>>SM),r=this.index[r],r+=t>>sg&Tlt,r=this.index[r],r=(r<<PI)+(t&RI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),fX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dlt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var k_=0;k_<fX.length;k_++)Dlt[fX.charCodeAt(k_)]=k_;var Plt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",hX=50,Rlt=1,lde=2,cde=3,Llt=4,Mlt=5,mX=7,ude=8,pX=9,Y0=10,KO=11,gX=12,qO=13,Ult=14,Vy=15,WO=16,j_=17,vy=18,Qlt=19,xX=20,XO=21,by=22,LI=23,zx=24,Sc=25,zy=26,$y=27,$x=28,Hlt=29,Fp=30,Vlt=31,B_=32,T_=33,YO=34,JO=35,ZO=36,w2=37,eD=38,F5=39,O5=40,MI=41,dde=42,zlt=43,$lt=[9001,65288],Ade="!",Sn="×",I_="÷",tD=Flt(Plt),Vf=[Fp,ZO],rD=[Rlt,lde,cde,Mlt],fde=[Y0,ude],vX=[$y,zy],Glt=rD.concat(fde),bX=[eD,F5,O5,YO,JO],Klt=[Vy,qO],qlt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=tD.get(s);if(o>hX?(a.push(!0),o-=hX):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(WO);if(o===Llt||o===KO){if(i===0)return n.push(i),r.push(Fp);var c=r[i-1];return Glt.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Fp))}if(n.push(i),o===Vlt)return r.push(t==="strict"?XO:w2);if(o===dde||o===Hlt)return r.push(Fp);if(o===zlt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(w2):r.push(Fp);r.push(o)}),[n,r,a]},UI=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==Y0)break}if(a===Y0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==Y0)break}if(o!==Y0)break}return!1},yX=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===Y0)r--;else return n}return 0},Wlt=function(e,t,r,n,a){if(r[n]===0)return Sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Sn;var i=s-1,o=s+1,c=t[s],u=i>=0?t[i]:0,d=t[o];if(c===lde&&d===cde)return Sn;if(rD.indexOf(c)!==-1)return Ade;if(rD.indexOf(d)!==-1||fde.indexOf(d)!==-1)return Sn;if(yX(s,t)===ude)return I_;if(tD.get(e[s])===KO||(c===B_||c===T_)&&tD.get(e[o])===KO||c===mX||d===mX||c===pX||[Y0,qO,Vy].indexOf(c)===-1&&d===pX||[j_,vy,Qlt,zx,$x].indexOf(d)!==-1||yX(s,t)===by||UI(LI,by,s,t)||UI([j_,vy],XO,s,t)||UI(gX,gX,s,t))return Sn;if(c===Y0)return I_;if(c===LI||d===LI)return Sn;if(d===WO||c===WO)return I_;if([qO,Vy,XO].indexOf(d)!==-1||c===Ult||u===ZO&&Klt.indexOf(c)!==-1||c===$x&&d===ZO||d===xX||Vf.indexOf(d)!==-1&&c===Sc||Vf.indexOf(c)!==-1&&d===Sc||c===$y&&[w2,B_,T_].indexOf(d)!==-1||[w2,B_,T_].indexOf(c)!==-1&&d===zy||Vf.indexOf(c)!==-1&&vX.indexOf(d)!==-1||vX.indexOf(c)!==-1&&Vf.indexOf(d)!==-1||[$y,zy].indexOf(c)!==-1&&(d===Sc||[by,Vy].indexOf(d)!==-1&&t[o+1]===Sc)||[by,Vy].indexOf(c)!==-1&&d===Sc||c===Sc&&[Sc,$x,zx].indexOf(d)!==-1)return Sn;if([Sc,$x,zx,j_,vy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Sc)return Sn;if([$x,zx].indexOf(h)!==-1)f--;else break}if([$y,zy].indexOf(d)!==-1)for(var f=[j_,vy].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===Sc)return Sn;if([$x,zx].indexOf(h)!==-1)f--;else break}if(eD===c&&[eD,F5,YO,JO].indexOf(d)!==-1||[F5,YO].indexOf(c)!==-1&&[F5,O5].indexOf(d)!==-1||[O5,JO].indexOf(c)!==-1&&d===O5||bX.indexOf(c)!==-1&&[xX,zy].indexOf(d)!==-1||bX.indexOf(d)!==-1&&c===$y||Vf.indexOf(c)!==-1&&Vf.indexOf(d)!==-1||c===zx&&Vf.indexOf(d)!==-1||Vf.concat(Sc).indexOf(c)!==-1&&d===by&&$lt.indexOf(e[o])===-1||Vf.concat(Sc).indexOf(d)!==-1&&c===vy)return Sn;if(c===MI&&d===MI){for(var p=r[s],g=1;p>0&&(p--,t[p]===MI);)g++;if(g%2!==0)return Sn}return c===B_&&d===T_?Sn:I_},Xlt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=qlt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[Sc,Fp,dde].indexOf(o)!==-1?w2:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Ylt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Ade,this.start=n,this.end=a}return e.prototype.slice=function(){return Qs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Jlt=function(e,t){var r=Zk(e),n=Xlt(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=Sn;u<o&&(d=Wlt(r,s,a,++u,i))===Sn;);if(d!==Sn||u===o){var f=new Ylt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Zlt=1,ect=2,xE=4,wX=8,TS=10,EX=47,bw=92,tct=9,rct=32,F_=34,yy=61,nct=35,act=36,sct=37,O_=39,D_=40,wy=41,ict=95,ql=45,oct=33,lct=60,cct=62,uct=64,dct=91,Act=93,fct=61,hct=123,P_=63,mct=125,CX=124,pct=126,gct=128,_X=65533,QI=42,Hp=43,xct=44,vct=58,bct=59,E2=46,yct=0,wct=8,Ect=11,Cct=14,_ct=31,Nct=127,kA=-1,hde=48,mde=97,pde=101,Sct=102,kct=117,jct=122,gde=65,xde=69,vde=70,Bct=85,Tct=90,Ko=function(e){return e>=hde&&e<=57},Ict=function(e){return e>=55296&&e<=57343},Gx=function(e){return Ko(e)||e>=gde&&e<=vde||e>=mde&&e<=Sct},Fct=function(e){return e>=mde&&e<=jct},Oct=function(e){return e>=gde&&e<=Tct},Dct=function(e){return Fct(e)||Oct(e)},Pct=function(e){return e>=gct},R_=function(e){return e===TS||e===tct||e===rct},IS=function(e){return Dct(e)||Pct(e)||e===ict},NX=function(e){return IS(e)||Ko(e)||e===ql},Rct=function(e){return e>=yct&&e<=wct||e===Ect||e>=Cct&&e<=_ct||e===Nct},R0=function(e,t){return e!==bw?!1:t!==TS},L_=function(e,t,r){return e===ql?IS(t)||R0(t,r):IS(e)?!0:!!(e===bw&&R0(e,t))},HI=function(e,t,r){return e===Hp||e===ql?Ko(t)?!0:t===E2&&Ko(r):Ko(e===E2?t:e)},Lct=function(e){var t=0,r=1;(e[t]===Hp||e[t]===ql)&&(e[t]===ql&&(r=-1),t++);for(var n=[];Ko(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Qs.apply(void 0,n),10):0;e[t]===E2&&t++;for(var s=[];Ko(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Qs.apply(void 0,s),10):0;(e[t]===xde||e[t]===pde)&&t++;var c=1;(e[t]===Hp||e[t]===ql)&&(e[t]===ql&&(c=-1),t++);for(var u=[];Ko(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Qs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},Mct={type:2},Uct={type:3},Qct={type:4},Hct={type:13},Vct={type:8},zct={type:21},$ct={type:9},Gct={type:10},Kct={type:11},qct={type:12},Wct={type:14},M_={type:23},Xct={type:1},Yct={type:25},Jct={type:24},Zct={type:26},eut={type:27},tut={type:28},rut={type:29},nut={type:31},nD={type:32},bde=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Zk(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==nD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case F_:return this.consumeStringToken(F_);case nct:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(NX(r)||R0(n,a)){var s=L_(r,n,a)?ect:Zlt,i=this.consumeName();return{type:5,value:i,flags:s}}break;case act:if(this.peekCodePoint(0)===yy)return this.consumeCodePoint(),Hct;break;case O_:return this.consumeStringToken(O_);case D_:return Mct;case wy:return Uct;case QI:if(this.peekCodePoint(0)===yy)return this.consumeCodePoint(),Wct;break;case Hp:if(HI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case xct:return Qct;case ql:var o=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(HI(o,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(L_(o,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===ql&&u===cct)return this.consumeCodePoint(),this.consumeCodePoint(),Jct;break;case E2:if(HI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case EX:if(this.peekCodePoint(0)===QI)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===QI&&(d=this.consumeCodePoint(),d===EX))return this.consumeToken();if(d===kA)return this.consumeToken()}break;case vct:return Zct;case bct:return eut;case lct:if(this.peekCodePoint(0)===oct&&this.peekCodePoint(1)===ql&&this.peekCodePoint(2)===ql)return this.consumeCodePoint(),this.consumeCodePoint(),Yct;break;case uct:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(L_(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case dct:return tut;case bw:if(R0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Act:return rut;case fct:if(this.peekCodePoint(0)===yy)return this.consumeCodePoint(),Vct;break;case hct:return Kct;case mct:return qct;case kct:case Bct:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Hp&&(Gx(x)||x===P_)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case CX:if(this.peekCodePoint(0)===yy)return this.consumeCodePoint(),$ct;if(this.peekCodePoint(0)===CX)return this.consumeCodePoint(),zct;break;case pct:if(this.peekCodePoint(0)===yy)return this.consumeCodePoint(),Gct;break;case kA:return nD}return R_(t)?(this.consumeWhiteSpace(),nut):Ko(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):IS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Qs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Gx(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===P_&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Qs.apply(void 0,t.map(function(c){return c===P_?hde:c})),16),s=parseInt(Qs.apply(void 0,t.map(function(c){return c===P_?vde:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Qs.apply(void 0,t),16);if(this.peekCodePoint(0)===ql&&Gx(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Gx(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Qs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===D_?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===D_?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===kA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===O_||r===F_){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===kA||this.peekCodePoint(0)===wy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),M_)}for(;;){var a=this.consumeCodePoint();if(a===kA||a===wy)return{type:22,value:Qs.apply(void 0,t)};if(R_(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===kA||this.peekCodePoint(0)===wy?(this.consumeCodePoint(),{type:22,value:Qs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),M_);if(a===F_||a===O_||a===D_||Rct(a))return this.consumeBadUrlRemnants(),M_;if(a===bw)if(R0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),M_;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;R_(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===wy||t===kA)return;R0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Qs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===kA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===TS)return this._value.splice(0,n),Xct;if(a===bw){var s=this._value[n+1];s!==kA&&s!==void 0&&(s===TS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):R0(a,s)&&(r+=this.consumeStringSlice(n),r+=Qs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=xE,n=this.peekCodePoint(0);for((n===Hp||n===ql)&&t.push(this.consumeCodePoint());Ko(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===E2&&Ko(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=wX;Ko(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===xde||n===pde)&&((a===Hp||a===ql)&&Ko(s)||Ko(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=wX;Ko(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Lct(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(L_(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===sct?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Gx(t)){for(var r=Qs(t);Gx(this.peekCodePoint(0))&&r.length<6;)r+=Qs(this.consumeCodePoint());R_(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Ict(n)||n>1114111?_X:n}return t===kA?_X:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(NX(r))t+=Qs(r);else if(R0(r,this.peekCodePoint(0)))t+=Qs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),yde=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new bde;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||sut(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?nD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),vE=function(e){return e.type===15},cb=function(e){return e.type===17},wa=function(e){return e.type===20},aut=function(e){return e.type===0},aD=function(e,t){return wa(e)&&e.value===t},wde=function(e){return e.type!==31},k1=function(e){return e.type!==31&&e.type!==4},cf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},sut=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Om=function(e){return e.type===17||e.type===15},Ai=function(e){return e.type===16||Om(e)},Ede=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},wo={type:17,number:0,flags:xE},kM={type:16,number:50,flags:xE},J0={type:16,number:100,flags:xE},Gy=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(vE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Cde="deg",_de="grad",Nde="rad",Sde="turn",ej={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Cde:return Math.PI*t.number/180;case _de:return Math.PI/200*t.number;case Nde:return t.number;case Sde:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},kde=function(e){return e.type===15&&(e.unit===Cde||e.unit===_de||e.unit===Nde||e.unit===Sde)},jde=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wo,wo];case"to top":case"bottom":return Pu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wo,J0];case"to right":case"left":return Pu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[J0,J0];case"to bottom":case"top":return Pu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[J0,wo];case"to left":case"right":return Pu(270)}return 0},Pu=function(e){return Math.PI*e/180},Am={name:"color",parse:function(e,t){if(t.type===18){var r=iut[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return Z0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return Z0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return Z0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return Z0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=fh[t.value.toUpperCase()];if(typeof o<"u")return o}return fh.TRANSPARENT}},fm=function(e){return(255&e)===0},Qi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},Z0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},SX=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},kX=function(e,t){var r=t.filter(k1);if(r.length===3){var n=r.map(SX),a=n[0],s=n[1],i=n[2];return Z0(a,s,i,1)}if(r.length===4){var o=r.map(SX),a=o[0],s=o[1],i=o[2],c=o[3];return Z0(a,s,i,c)}return 0};function VI(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var jX=function(e,t){var r=t.filter(k1),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Pu(n.number):ej.parse(e,n))/(Math.PI*2),c=Ai(a)?a.number/100:0,u=Ai(s)?s.number/100:0,d=typeof i<"u"&&Ai(i)?Da(i,1):1;if(c===0)return Z0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,p=VI(h,f,o+1/3),g=VI(h,f,o),x=VI(h,f,o-1/3);return Z0(p*255,g*255,x*255,d)},iut={hsl:jX,hsla:jX,rgb:kX,rgba:kX},yw=function(e,t){return Am.parse(e,yde.create(t).parseComponentValue())},fh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},out={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},lut={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tj=function(e,t){var r=Am.parse(e,t[0]),n=t[1];return n&&Ai(n)?{color:r,stop:n}:{color:r,stop:null}},BX=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=wo),n.stop===null&&(n.stop=J0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=Da(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(x,b){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},cut=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},uut=function(e,t,r){var n=typeof e=="number"?e:cut(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},bd=function(e,t){return Math.sqrt(e*e+t*t)},TX=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=bd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},dut=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(bd(t,r),bd(t,r-a),bd(t-n,r),bd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=TX(n,a,t,r,!0),u=c[0],d=c[1];s=bd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(bd(t,r),bd(t,r-a),bd(t-n,r),bd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=TX(n,a,t,r,!1),u=f[0],d=f[1];s=bd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},Aut=function(e,t){var r=Pu(180),n=[];return cf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=jde(a);return}else if(kde(i)){r=ej.parse(e,i);return}}var o=tj(e,a);n.push(o)}),{angle:r,stops:n,type:1}},U_=function(e,t){var r=Pu(180),n=[];return cf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=jde(a);return}else if(kde(i)){r=(ej.parse(e,i)+Pu(270))%Pu(360);return}}var o=tj(e,a);n.push(o)}),{angle:r,stops:n,type:1}},fut=function(e,t){var r=Pu(180),n=[],a=1,s=0,i=3,o=[];return cf(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=Am.parse(e,d.values[0]);n.push({stop:wo,color:f})}else if(d.name==="to"){var f=Am.parse(e,d.values[0]);n.push({stop:J0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(k1);if(h.length===2){var f=Am.parse(e,h[1]),p=h[0];cb(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Pu(180))%Pu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},Bde="closest-side",Tde="farthest-side",Ide="closest-corner",Fde="farthest-corner",Ode="circle",Dde="ellipse",Pde="cover",Rde="contain",hut=function(e,t){var r=0,n=3,a=[],s=[];return cf(t).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(kM),f;case"top":case"left":return s.push(wo),f;case"right":case"bottom":return s.push(J0),f}else(Ai(h)||Om(h))&&s.push(h);else if(wa(h))switch(h.value){case Ode:return r=0,!1;case Dde:return r=1,!1;case"at":return u=!0,!1;case Bde:return n=0,!1;case Pde:case Tde:return n=1,!1;case Rde:case Ide:return n=2,!1;case Fde:return n=3,!1}else if(Om(h)||Ai(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=tj(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},Q_=function(e,t){var r=0,n=3,a=[],s=[];return cf(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(kM),!1;case"top":case"left":return s.push(wo),!1;case"right":case"bottom":return s.push(J0),!1}else if(Ai(f)||Om(f))return s.push(f),!1;return d},c):o===1&&(c=i.reduce(function(d,f){if(wa(f))switch(f.value){case Ode:return r=0,!1;case Dde:return r=1,!1;case Rde:case Bde:return n=0,!1;case Tde:return n=1,!1;case Ide:return n=2,!1;case Pde:case Fde:return n=3,!1}else if(Om(f)||Ai(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=tj(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},mut=function(e){return e.type===1},put=function(e){return e.type===2},jM={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Lde[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function gut(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Lde[e.name])}var Lde={"linear-gradient":Aut,"-moz-linear-gradient":U_,"-ms-linear-gradient":U_,"-o-linear-gradient":U_,"-webkit-linear-gradient":U_,"radial-gradient":hut,"-moz-radial-gradient":Q_,"-ms-radial-gradient":Q_,"-o-radial-gradient":Q_,"-webkit-radial-gradient":Q_,"-webkit-gradient":fut},xut={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return k1(n)&&gut(n)}).map(function(n){return jM.parse(e,n)})}},vut={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},but={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return cf(t).map(function(r){return r.filter(Ai)}).map(Ede)}},yut={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return cf(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(wut)}},wut=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Hv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Hv||(Hv={}));var Eut={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return cf(t).map(function(r){return r.filter(Cut)})}},Cut=function(e){return wa(e)||Ai(e)},rj=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},_ut=rj("top"),Nut=rj("right"),Sut=rj("bottom"),kut=rj("left"),nj=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Ede(r.filter(Ai))}}},jut=nj("top-left"),But=nj("top-right"),Tut=nj("bottom-right"),Iut=nj("bottom-left"),aj=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Fut=aj("top"),Out=aj("right"),Dut=aj("bottom"),Put=aj("left"),sj=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return vE(r)?r.number:0}}},Rut=sj("top"),Lut=sj("right"),Mut=sj("bottom"),Uut=sj("left"),Qut={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Hut={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Vut={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|zut(n.value)},0)}},zut=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},$ut={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Gut={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},FS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(FS||(FS={}));var Kut={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return FS.STRICT;case"normal":default:return FS.NORMAL}}},qut={name:"line-height",initialValue:"normal",prefix:!1,type:4},IX=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ai(e)?Da(e,t):t},Wut={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:jM.parse(e,t)}},Xut={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},sD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ij=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Yut=ij("top"),Jut=ij("right"),Zut=ij("bottom"),edt=ij("left"),tdt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},rdt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},oj=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ndt=oj("top"),adt=oj("right"),sdt=oj("bottom"),idt=oj("left"),odt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},ldt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},cdt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&aD(t[0],"none")?[]:cf(t).map(function(r){for(var n={color:fh.TRANSPARENT,offsetX:wo,offsetY:wo,blur:wo},a=0,s=0;s<r.length;s++){var i=r[s];Om(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=Am.parse(e,i)}return n})}},udt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ddt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=hdt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Adt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},fdt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},hdt={matrix:Adt,matrix3d:fdt},FX={type:16,number:50,flags:xE},mdt=[FX,FX],pdt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ai);return r.length!==2?mdt:[r[0],r[1]]}},gdt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ww;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(ww||(ww={}));var xdt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return ww.BREAK_ALL;case"keep-all":return ww.KEEP_ALL;case"normal":default:return ww.NORMAL}}},vdt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(cb(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Mde={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},bdt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return cb(t)?t.number:1}},ydt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wdt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Edt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Cdt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},_dt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(cb(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Ndt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},Sdt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ci=function(e,t){return(e&t)!==0},kdt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},jdt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(wde),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&cb(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},Bdt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(wde),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(wa(s)&&s.value!=="none"){var o=i&&cb(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},Tdt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(vE).map(function(r){return Mde.parse(e,r)})}},Idt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(aut);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},OX=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},Fdt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&aD(t[0],"none")?[]:cf(t).map(function(r){for(var n={color:255,offsetX:wo,offsetY:wo,blur:wo,spread:wo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];aD(i,"inset")?n.inset=!0:Om(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=Am.parse(e,i)}return n})}},Odt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Ddt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Pdt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return vE(t)?t.number:0}},Rdt=function(){function e(t,r){var n,a;this.animationDuration=lr(t,Tdt,r.animationDuration),this.backgroundClip=lr(t,out,r.backgroundClip),this.backgroundColor=lr(t,lut,r.backgroundColor),this.backgroundImage=lr(t,xut,r.backgroundImage),this.backgroundOrigin=lr(t,vut,r.backgroundOrigin),this.backgroundPosition=lr(t,but,r.backgroundPosition),this.backgroundRepeat=lr(t,yut,r.backgroundRepeat),this.backgroundSize=lr(t,Eut,r.backgroundSize),this.borderTopColor=lr(t,_ut,r.borderTopColor),this.borderRightColor=lr(t,Nut,r.borderRightColor),this.borderBottomColor=lr(t,Sut,r.borderBottomColor),this.borderLeftColor=lr(t,kut,r.borderLeftColor),this.borderTopLeftRadius=lr(t,jut,r.borderTopLeftRadius),this.borderTopRightRadius=lr(t,But,r.borderTopRightRadius),this.borderBottomRightRadius=lr(t,Tut,r.borderBottomRightRadius),this.borderBottomLeftRadius=lr(t,Iut,r.borderBottomLeftRadius),this.borderTopStyle=lr(t,Fut,r.borderTopStyle),this.borderRightStyle=lr(t,Out,r.borderRightStyle),this.borderBottomStyle=lr(t,Dut,r.borderBottomStyle),this.borderLeftStyle=lr(t,Put,r.borderLeftStyle),this.borderTopWidth=lr(t,Rut,r.borderTopWidth),this.borderRightWidth=lr(t,Lut,r.borderRightWidth),this.borderBottomWidth=lr(t,Mut,r.borderBottomWidth),this.borderLeftWidth=lr(t,Uut,r.borderLeftWidth),this.boxShadow=lr(t,Fdt,r.boxShadow),this.color=lr(t,Qut,r.color),this.direction=lr(t,Hut,r.direction),this.display=lr(t,Vut,r.display),this.float=lr(t,$ut,r.cssFloat),this.fontFamily=lr(t,Edt,r.fontFamily),this.fontSize=lr(t,Cdt,r.fontSize),this.fontStyle=lr(t,Sdt,r.fontStyle),this.fontVariant=lr(t,Ndt,r.fontVariant),this.fontWeight=lr(t,_dt,r.fontWeight),this.letterSpacing=lr(t,Gut,r.letterSpacing),this.lineBreak=lr(t,Kut,r.lineBreak),this.lineHeight=lr(t,qut,r.lineHeight),this.listStyleImage=lr(t,Wut,r.listStyleImage),this.listStylePosition=lr(t,Xut,r.listStylePosition),this.listStyleType=lr(t,sD,r.listStyleType),this.marginTop=lr(t,Yut,r.marginTop),this.marginRight=lr(t,Jut,r.marginRight),this.marginBottom=lr(t,Zut,r.marginBottom),this.marginLeft=lr(t,edt,r.marginLeft),this.opacity=lr(t,bdt,r.opacity);var s=lr(t,tdt,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=lr(t,rdt,r.overflowWrap),this.paddingTop=lr(t,ndt,r.paddingTop),this.paddingRight=lr(t,adt,r.paddingRight),this.paddingBottom=lr(t,sdt,r.paddingBottom),this.paddingLeft=lr(t,idt,r.paddingLeft),this.paintOrder=lr(t,Odt,r.paintOrder),this.position=lr(t,ldt,r.position),this.textAlign=lr(t,odt,r.textAlign),this.textDecorationColor=lr(t,ydt,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=lr(t,wdt,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=lr(t,cdt,r.textShadow),this.textTransform=lr(t,udt,r.textTransform),this.transform=lr(t,ddt,r.transform),this.transformOrigin=lr(t,pdt,r.transformOrigin),this.visibility=lr(t,gdt,r.visibility),this.webkitTextStrokeColor=lr(t,Ddt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(t,Pdt,r.webkitTextStrokeWidth),this.wordBreak=lr(t,xdt,r.wordBreak),this.zIndex=lr(t,vdt,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return fm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ci(this.display,4)||Ci(this.display,33554432)||Ci(this.display,268435456)||Ci(this.display,536870912)||Ci(this.display,67108864)||Ci(this.display,134217728)},e}(),Ldt=function(){function e(t,r){this.content=lr(t,kdt,r.content),this.quotes=lr(t,Idt,r.quotes)}return e}(),DX=function(){function e(t,r){this.counterIncrement=lr(t,jdt,r.counterIncrement),this.counterReset=lr(t,Bdt,r.counterReset)}return e}(),lr=function(e,t,r){var n=new bde,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new yde(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,wa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return ej.parse(e,s.parseComponentValue());case"color":return Am.parse(e,s.parseComponentValue());case"image":return jM.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Om(o)?o:wo;case"length-percentage":var c=s.parseComponentValue();return Ai(c)?c:wo;case"time":return Mde.parse(e,s.parseComponentValue())}break}},Mdt="data-html2canvas-debug",Udt=function(e){var t=e.getAttribute(Mdt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},iD=function(e,t){var r=Udt(e);return r===1||t===r},uf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,iD(r,3))debugger;this.styles=new Rdt(t,window.getComputedStyle(r,null)),cD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Jk(this.context,r),iD(r,4)&&(this.flags|=16)}return e}(),Qdt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ky=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H_=0;H_<PX.length;H_++)Ky[PX.charCodeAt(H_)]=H_;var Hdt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ky[e.charCodeAt(n)],i=Ky[e.charCodeAt(n+1)],o=Ky[e.charCodeAt(n+2)],c=Ky[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},Vdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},zdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},ig=5,BM=11,zI=2,$dt=BM-ig,Ude=65536>>ig,Gdt=1<<ig,$I=Gdt-1,Kdt=1024>>ig,qdt=Ude+Kdt,Wdt=qdt,Xdt=32,Ydt=Wdt+Xdt,Jdt=65536>>BM,Zdt=1<<$dt,eAt=Zdt-1,RX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},tAt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},rAt=function(e,t){var r=Hdt(e),n=Array.isArray(r)?zdt(r):new Uint32Array(r),a=Array.isArray(r)?Vdt(r):new Uint16Array(r),s=24,i=RX(a,s/2,n[4]/2),o=n[5]===2?RX(a,(s+n[4])/2):tAt(n,Math.ceil((s+n[4])/4));return new nAt(n[0],n[1],n[2],n[3],i,o)},nAt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>ig],r=(r<<zI)+(t&$I),this.data[r];if(t<=65535)return r=this.index[Ude+(t-55296>>ig)],r=(r<<zI)+(t&$I),this.data[r];if(t<this.highStart)return r=Ydt-Jdt+(t>>BM),r=this.index[r],r+=t>>ig&eAt,r=this.index[r],r=(r<<zI)+(t&$I),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),LX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aAt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var V_=0;V_<LX.length;V_++)aAt[LX.charCodeAt(V_)]=V_;var sAt=1,GI=2,KI=3,MX=4,UX=5,iAt=7,QX=8,qI=9,WI=10,HX=11,VX=12,zX=13,$X=14,XI=15,oAt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},lAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},cAt=rAt(Qdt),ku="×",YI="÷",uAt=function(e){return cAt.get(e)},dAt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===GI&&i===KI)return ku;if(s===GI||s===KI||s===MX||i===GI||i===KI||i===MX)return YI;if(s===QX&&[QX,qI,HX,VX].indexOf(i)!==-1||(s===HX||s===qI)&&(i===qI||i===WI)||(s===VX||s===WI)&&i===WI||i===zX||i===UX||i===iAt||s===sAt)return ku;if(s===zX&&i===$X){for(;a===UX;)a=t[--n];if(a===$X)return ku}if(s===XI&&i===XI){for(var o=0;a===XI;)o++,a=t[--n];if(o%2===0)return ku}return YI},AAt=function(e){var t=oAt(e),r=t.length,n=0,a=0,s=t.map(uAt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=ku;n<r&&(i=dAt(t,s,++n))===ku;);if(i!==ku||n===r){var o=lAt.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},fAt=function(e){for(var t=AAt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},hAt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},mAt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=Zk(n.data).map(function(c){return Qs(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},pAt=function(){return typeof new Image().crossOrigin<"u"},gAt=function(){return typeof new XMLHttpRequest().responseType=="string"},xAt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},GX=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},vAt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=oD(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),KX(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",GX(c)?KX(oD(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),GX(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},oD=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},KX=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},mo={get SUPPORT_RANGE_BOUNDS(){var e=hAt(document);return Object.defineProperty(mo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=mo.SUPPORT_RANGE_BOUNDS&&mAt(document);return Object.defineProperty(mo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=xAt(document);return Object.defineProperty(mo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?vAt(document):Promise.resolve(!1);return Object.defineProperty(mo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=pAt();return Object.defineProperty(mo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=gAt();return Object.defineProperty(mo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(mo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(mo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ew=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),bAt=function(e,t,r,n){var a=EAt(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(mo.SUPPORT_RANGE_BOUNDS){var c=qX(n,i,o.length).getClientRects();if(c.length>1){var u=TM(o),d=0;u.forEach(function(h){s.push(new Ew(h,Th.fromDOMRectList(e,qX(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Ew(o,Th.fromDOMRectList(e,c)))}else{var f=n.splitText(o.length);s.push(new Ew(o,yAt(e,n))),n=f}else mo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},yAt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=Jk(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Th.EMPTY},qX=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},TM=function(e){if(mo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return fAt(e)},wAt=function(e,t){if(mo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return _At(e,t)},EAt=function(e,t){return t.letterSpacing!==0?TM(e):wAt(e,t)},CAt=[32,160,4961,65792,65793,4153,4241],_At=function(e,t){for(var r=Jlt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=Zk(i),c="";o.forEach(function(u){CAt.indexOf(u)===-1?c+=Qs(u):(c.length&&n.push(c),n.push(Qs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},NAt=function(){function e(t,r,n){this.text=SAt(r.data,n.textTransform),this.textBounds=bAt(t,this.text,n,r)}return e}(),SAt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(kAt,jAt);case 2:return e.toUpperCase();default:return e}},kAt=/(^|\s|:|-|\(|\))([a-z])/g,jAt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Qde=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(uf),Hde=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(uf),Vde=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=Jk(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(uf),zde=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(uf),lD=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(uf),BAt=[{type:15,flags:0,unit:"px",number:3}],TAt=[{type:16,flags:0,number:50}],IAt=function(e){return e.width>e.height?new Th(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Th(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},FAt=function(e){var t=e.type===OAt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},OS="checkbox",DS="radio",OAt="password",WX=707406591,IM=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=FAt(n),(a.type===OS||a.type===DS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=IAt(a.bounds)),a.type){case OS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=BAt;break;case DS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=TAt;break}return a}return t}(uf),$de=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(uf),Gde=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(uf),Kde=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Wde(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?yw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):fh.TRANSPARENT,i=n.contentWindow.document.body?yw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):fh.TRANSPARENT;a.backgroundColor=fm(s)?fm(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(uf),DAt=["OL","UL","MENU"],D5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Xde(a)&&a.data.trim().length>0)r.textNodes.push(new NAt(e,a,r.styles));else if(vv(a))if(eAe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return D5(e,o,r,n)});else{var i=qde(e,a);i.styles.isVisible()&&(PAt(a,i,n)?i.flags|=4:RAt(i.styles)&&(i.flags|=2),DAt.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?D5(e,a.shadowRoot,i,n):!PS(a)&&!Yde(a)&&!RS(a)&&D5(e,a,i,n))}},qde=function(e,t){return uD(t)?new Qde(e,t):Jde(t)?new Hde(e,t):Yde(t)?new Vde(e,t):LAt(t)?new zde(e,t):MAt(t)?new lD(e,t):UAt(t)?new IM(e,t):RS(t)?new $de(e,t):PS(t)?new Gde(e,t):Zde(t)?new Kde(e,t):new uf(e,t)},Wde=function(e,t){var r=qde(e,t);return r.flags|=4,D5(e,t,r,r),r},PAt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||FM(e)&&r.styles.isTransparent()},RAt=function(e){return e.isPositioned()||e.isFloating()},Xde=function(e){return e.nodeType===Node.TEXT_NODE},vv=function(e){return e.nodeType===Node.ELEMENT_NODE},cD=function(e){return vv(e)&&typeof e.style<"u"&&!P5(e)},P5=function(e){return typeof e.className=="object"},LAt=function(e){return e.tagName==="LI"},MAt=function(e){return e.tagName==="OL"},UAt=function(e){return e.tagName==="INPUT"},QAt=function(e){return e.tagName==="HTML"},Yde=function(e){return e.tagName==="svg"},FM=function(e){return e.tagName==="BODY"},Jde=function(e){return e.tagName==="CANVAS"},XX=function(e){return e.tagName==="VIDEO"},uD=function(e){return e.tagName==="IMG"},Zde=function(e){return e.tagName==="IFRAME"},YX=function(e){return e.tagName==="STYLE"},HAt=function(e){return e.tagName==="SCRIPT"},PS=function(e){return e.tagName==="TEXTAREA"},RS=function(e){return e.tagName==="SELECT"},eAe=function(e){return e.tagName==="SLOT"},JX=function(e){return e.tagName.indexOf("-")>0},VAt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),ZX={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},eY={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},zAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},$At={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Kx=function(e,t,r,n,a,s){return e<t||e>r?C2(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},tAe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ls=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(tAe(Math.abs(e),s,n,function(i){return Qs(Math.floor(i%s)+t)})+a)},vp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return tAe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},sv=1,I0=2,F0=4,qy=8,zf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return C2(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Ci(s,sv)&&o!==""?o=t[u]+o:u>1||u===1&&c===0||u===1&&c===1&&Ci(s,I0)||u===1&&c===1&&Ci(s,F0)&&e>100||u===1&&c>1&&Ci(s,qy)?o=t[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},tY="十百千萬",rY="拾佰仟萬",nY="マイナス",JI="마이너스",C2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ls(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return vp(e,"〇一二三四五六七八九",a);case 6:return Kx(e,1,3999,ZX,3,n).toLowerCase();case 7:return Kx(e,1,3999,ZX,3,n);case 8:return Ls(e,945,969,!1,n);case 9:return Ls(e,97,122,!1,n);case 10:return Ls(e,65,90,!1,n);case 11:return Ls(e,1632,1641,!0,n);case 12:case 49:return Kx(e,1,9999,eY,3,n);case 35:return Kx(e,1,9999,eY,3,n).toLowerCase();case 13:return Ls(e,2534,2543,!0,n);case 14:case 30:return Ls(e,6112,6121,!0,n);case 15:return vp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return vp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return zf(e,"零一二三四五六七八九",tY,"負",a,I0|F0|qy);case 47:return zf(e,"零壹貳參肆伍陸柒捌玖",rY,"負",a,sv|I0|F0|qy);case 42:return zf(e,"零一二三四五六七八九",tY,"负",a,I0|F0|qy);case 41:return zf(e,"零壹贰叁肆伍陆柒捌玖",rY,"负",a,sv|I0|F0|qy);case 26:return zf(e,"〇一二三四五六七八九","十百千万",nY,a,0);case 25:return zf(e,"零壱弐参四伍六七八九","拾百千万",nY,a,sv|I0|F0);case 31:return zf(e,"영일이삼사오육칠팔구","십백천만",JI,s,sv|I0|F0);case 33:return zf(e,"零一二三四五六七八九","十百千萬",JI,s,0);case 32:return zf(e,"零壹貳參四五六七八九","拾百千",JI,s,sv|I0|F0);case 18:return Ls(e,2406,2415,!0,n);case 20:return Kx(e,1,19999,$At,3,n);case 21:return Ls(e,2790,2799,!0,n);case 22:return Ls(e,2662,2671,!0,n);case 22:return Kx(e,1,10999,zAt,3,n);case 23:return vp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return vp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ls(e,3302,3311,!0,n);case 28:return vp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return vp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ls(e,3792,3801,!0,n);case 37:return Ls(e,6160,6169,!0,n);case 38:return Ls(e,4160,4169,!0,n);case 39:return Ls(e,2918,2927,!0,n);case 40:return Ls(e,1776,1785,!0,n);case 43:return Ls(e,3046,3055,!0,n);case 44:return Ls(e,3174,3183,!0,n);case 45:return Ls(e,3664,3673,!0,n);case 46:return Ls(e,3872,3881,!0,n);case 3:default:return Ls(e,48,57,!0,n)}},rAe="data-html2canvas-ignore",aY=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new VAt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=GAt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=WAt(a).then(function(){return fl(n,void 0,void 0,function(){var d,f;return Ho(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(ZAt),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,qAt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(YAt(document.doctype)+"<html></html>"),JAt(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(iD(t,2))debugger;if(Jde(t))return this.createCanvasClone(t);if(XX(t))return this.createVideoClone(t);if(YX(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return uD(r)&&(uD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),JX(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return ZI(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!vv(r)||!HAt(r)&&!r.hasAttribute(rAe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!vv(r)||!YX(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(vv(s)&&eAe(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Xde(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&vv(t)&&(cD(t)||P5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&cD(a)&&(this.clonedReferenceElement=a),FM(a)&&rft(a);var c=this.counters.parse(new DX(this.context,s)),u=this.resolvePseudoContent(t,a,i,Cw.BEFORE);JX(t)&&(r=!0),XX(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,Cw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||P5(t))&&!Zde(t)||r)&&ZI(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(PS(t)||RS(t))&&(PS(a)||RS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new DX(this.context,n));var c=new Ldt(this.context,n),u=o.createElement("html2canvaspseudoelement");ZI(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(wa);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(k1),x=g[0],b=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=b&&wa(b)?sD.parse(s.context,b.value):3;u.appendChild(o.createTextNode(C2(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(k1),x=_[0],j=_[1],b=_[2];if(x&&wa(x)){var k=s.counters.getCounterValues(x.value),I=b&&wa(b)?sD.parse(s.context,b.value):3,E=j&&j.type===0?j.value:"",N=k.map(function(D){return C2(D,I,!1)}).join(E);u.appendChild(o.createTextNode(N))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(OX(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(OX(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=dD+" "+AD;var d=a===Cw.BEFORE?" "+dD:" "+AD;return P5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Cw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Cw||(Cw={}));var GAt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(rAe,"true"),e.body.appendChild(r),r},KAt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},qAt=function(e){return Promise.all([].slice.call(e.images,0).map(KAt))},WAt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},XAt=["all","d","content"],ZI=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);XAt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},YAt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},JAt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},ZAt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},eft=":before",tft=":after",dD="___html2canvas___pseudoelement_before",AD="___html2canvas___pseudoelement_after",sY=`{
    content: "" !important;
    display: none !important;
}`,rft=function(e){nft(e,"."+dD+eft+sY+`
         .`+AD+tft+sY)},nft=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},nAe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),aft=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(t6(t)||lft(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return fl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Ho(this,function(o){switch(o.label){case 0:return r=nAe.isSameOrigin(t),n=!e6(t)&&this._options.useCORS===!0&&mo.SUPPORT_CORS_IMAGES&&!r,a=!e6(t)&&!r&&!t6(t)&&typeof this._options.proxy=="string"&&mo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!e6(t)&&!t6(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(cft(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=mo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),sft=/^data:image\/svg\+xml/i,ift=/^data:image\/.*;base64,/i,oft=/^data:image\/.*/i,lft=function(e){return mo.SUPPORT_SVG_DRAWING||!uft(e)},e6=function(e){return oft.test(e)},cft=function(e){return ift.test(e)},t6=function(e){return e.substr(0,4)==="blob"},uft=function(e){return e.substr(-3).toLowerCase()==="svg"||sft.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),qx=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},z_=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=qx(this.start,this.startControl,t),a=qx(this.startControl,this.endControl,t),s=qx(this.endControl,this.end,t),i=qx(n,a,t),o=qx(a,s,t),c=qx(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Tu=function(e){return e.type===1},dft=function(){function e(t){var r=t.styles,n=t.bounds,a=Gy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=Gy(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=Gy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=Gy(r.borderBottomLeftRadius,n.width,n.height),g=p[0],x=p[1],b=[];b.push((s+c)/n.width),b.push((g+f)/n.width),b.push((i+x)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,j=n.width-f,k=n.height-x,I=r.borderTopWidth,E=r.borderRightWidth,N=r.borderBottomWidth,B=r.borderLeftWidth,R=Da(r.paddingTop,t.bounds.width),D=Da(r.paddingRight,t.bounds.width),O=Da(r.paddingBottom,t.bounds.width),L=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Xa(n.left+B/3,n.top+I/3,s-B/3,i-I/3,aa.TOP_LEFT):new ar(n.left+B/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Xa(n.left+w,n.top+I/3,c-E/3,u-I/3,aa.TOP_RIGHT):new ar(n.left+n.width-E/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Xa(n.left+j,n.top+_,f-E/3,h-N/3,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Xa(n.left+B/3,n.top+k,g-B/3,x-N/3,aa.BOTTOM_LEFT):new ar(n.left+B/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Xa(n.left+B*2/3,n.top+I*2/3,s-B*2/3,i-I*2/3,aa.TOP_LEFT):new ar(n.left+B*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Xa(n.left+w,n.top+I*2/3,c-E*2/3,u-I*2/3,aa.TOP_RIGHT):new ar(n.left+n.width-E*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Xa(n.left+j,n.top+_,f-E*2/3,h-N*2/3,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E*2/3,n.top+n.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Xa(n.left+B*2/3,n.top+k,g-B*2/3,x-N*2/3,aa.BOTTOM_LEFT):new ar(n.left+B*2/3,n.top+n.height-N*2/3),this.topLeftBorderStroke=s>0||i>0?Xa(n.left+B/2,n.top+I/2,s-B/2,i-I/2,aa.TOP_LEFT):new ar(n.left+B/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?Xa(n.left+w,n.top+I/2,c-E/2,u-I/2,aa.TOP_RIGHT):new ar(n.left+n.width-E/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?Xa(n.left+j,n.top+_,f-E/2,h-N/2,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=g>0||x>0?Xa(n.left+B/2,n.top+k,g-B/2,x-N/2,aa.BOTTOM_LEFT):new ar(n.left+B/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||i>0?Xa(n.left,n.top,s,i,aa.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Xa(n.left+w,n.top,c,u,aa.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Xa(n.left+j,n.top+_,f,h,aa.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Xa(n.left,n.top+k,g,x,aa.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Xa(n.left+B,n.top+I,Math.max(0,s-B),Math.max(0,i-I),aa.TOP_LEFT):new ar(n.left+B,n.top+I),this.topRightPaddingBox=c>0||u>0?Xa(n.left+Math.min(w,n.width-E),n.top+I,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-I),aa.TOP_RIGHT):new ar(n.left+n.width-E,n.top+I),this.bottomRightPaddingBox=f>0||h>0?Xa(n.left+Math.min(j,n.width-B),n.top+Math.min(_,n.height-N),Math.max(0,f-E),Math.max(0,h-N),aa.BOTTOM_RIGHT):new ar(n.left+n.width-E,n.top+n.height-N),this.bottomLeftPaddingBox=g>0||x>0?Xa(n.left+B,n.top+Math.min(k,n.height-N),Math.max(0,g-B),Math.max(0,x-N),aa.BOTTOM_LEFT):new ar(n.left+B,n.top+n.height-N),this.topLeftContentBox=s>0||i>0?Xa(n.left+B+L,n.top+I+R,Math.max(0,s-(B+L)),Math.max(0,i-(I+R)),aa.TOP_LEFT):new ar(n.left+B+L,n.top+I+R),this.topRightContentBox=c>0||u>0?Xa(n.left+Math.min(w,n.width+B+L),n.top+I+R,w>n.width+B+L?0:c-B+L,u-(I+R),aa.TOP_RIGHT):new ar(n.left+n.width-(E+D),n.top+I+R),this.bottomRightContentBox=f>0||h>0?Xa(n.left+Math.min(j,n.width-(B+L)),n.top+Math.min(_,n.height+I+R),Math.max(0,f-(E+D)),h-(N+O),aa.BOTTOM_RIGHT):new ar(n.left+n.width-(E+D),n.top+n.height-(N+O)),this.bottomLeftContentBox=g>0||x>0?Xa(n.left+B+L,n.top+k,Math.max(0,g-(B+L)),x-(N+O),aa.BOTTOM_LEFT):new ar(n.left+B+L,n.top+n.height-(N+O))}return e}(),aa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(aa||(aa={}));var Xa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,u=t+n;switch(a){case aa.TOP_LEFT:return new z_(new ar(e,u),new ar(e,u-o),new ar(c-i,t),new ar(c,t));case aa.TOP_RIGHT:return new z_(new ar(e,t),new ar(e+i,t),new ar(c,u-o),new ar(c,u));case aa.BOTTOM_RIGHT:return new z_(new ar(c,t),new ar(c,t+o),new ar(e+i,u),new ar(e,u));case aa.BOTTOM_LEFT:default:return new z_(new ar(c,u),new ar(c-i,u),new ar(e,t+o),new ar(e,t))}},LS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Aft=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},MS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},fft=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),$_=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),hft=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),mft=function(e){return e.type===0},aAe=function(e){return e.type===1},pft=function(e){return e.type===2},iY=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},gft=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},sAe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),iAe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new dft(this.container),this.container.styles.opacity<1&&this.effects.push(new hft(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new fft(n,a,s))}if(this.container.styles.overflowX!==0){var i=LS(this.curves),o=MS(this.curves);iY(i,o)?this.effects.push(new $_(i,6)):(this.effects.push(new $_(i,2)),this.effects.push(new $_(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!aAe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=LS(n.curves),o=MS(n.curves);iY(i,o)||a.unshift(new $_(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Ci(c.target,t)})},e}(),fD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ci(a.flags,4),i=Ci(a.flags,2),o=new iAe(a,e);Ci(a.styles.display,2048)&&n.push(o);var c=Ci(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new sAe(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);fD(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),fD(o,t,r,c);Ci(a.flags,8)&&oAe(a,c)})},oAe=function(e,t){for(var r=e instanceof lD?e.start:1,n=e instanceof lD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof zde&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=C2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},xft=function(e){var t=new iAe(e,null),r=new sAe(t),n=[];return fD(t,r,r,n),oAe(t.container,n),r},oY=function(e,t){switch(t){case 0:return Ru(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Ru(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Ru(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Ru(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},vft=function(e,t){switch(t){case 0:return Ru(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Ru(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Ru(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Ru(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},bft=function(e,t){switch(t){case 0:return Ru(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Ru(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Ru(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Ru(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},yft=function(e,t){switch(t){case 0:return G_(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return G_(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return G_(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return G_(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},G_=function(e,t){var r=[];return Tu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Tu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Ru=function(e,t,r,n){var a=[];return Tu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Tu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Tu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Tu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},lAe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},US=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},wft=function(e,t){return e===0?t.bounds:e===2?US(t):lAe(t)},Eft=function(e,t){return e===0?t.bounds:e===2?US(t):lAe(t)},r6=function(e,t,r){var n=wft(iv(e.styles.backgroundOrigin,t),e),a=Eft(iv(e.styles.backgroundClip,t),e),s=Cft(iv(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=Gy(iv(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=_ft(iv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,o]},Wx=function(e){return wa(e)&&e.value===Hv.AUTO},K_=function(e){return typeof e=="number"},Cft=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Ai(i)&&o&&Ai(o))return[Da(i,r.width),Da(o,r.height)];var c=K_(s);if(wa(i)&&(i.value===Hv.CONTAIN||i.value===Hv.COVER)){if(K_(s)){var u=r.width/r.height;return u<s!=(i.value===Hv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=K_(n),f=K_(a),h=d||f;if(Wx(i)&&(!o||Wx(o))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var x=d?n:r.width,b=f?a:r.height;return[x,b]}if(c){var y=0,w=0;return Ai(i)?y=Da(i,r.width):Ai(o)&&(w=Da(o,r.height)),Wx(i)?y=w*s:(!o||Wx(o))&&(w=y/s),[y,w]}var _=null,j=null;if(Ai(i)?_=Da(i,r.width):o&&Ai(o)&&(j=Da(o,r.height)),_!==null&&(!o||Wx(o))&&(j=d&&f?_/n*a:r.height),j!==null&&Wx(i)&&(_=d&&f?j/a*n:r.width),_!==null&&j!==null)return[_,j];throw new Error("Unable to calculate background-size for element")},iv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},_ft=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},Nft="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lY="Hidden Text",Sft=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=Nft,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(lY)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(lY)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),cAe=function(){function e(t,r){this.context=t,this.options=r}return e}(),kft=1e4,jft=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new Sft(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),pft(r)&&(this.ctx.globalAlpha=r.opacity),mft(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),aAe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return fl(this,void 0,void 0,function(){var n;return Ho(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return fl(this,void 0,void 0,function(){return Ho(this,function(n){switch(n.label){case 0:if(Ci(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=TM(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=Oft(r.fontFamily).join(", "),s=vE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return fl(this,void 0,void 0,function(){var a,s,i,o,c,u,d,f,h=this;return Ho(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Qi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Qi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Qi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Qi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=US(r),i=MS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c,w,w,u,d,f,h,j,p,g,k,x,b,y,w,_,j,k;return Ho(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,I.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Qde))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Hde&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Vde))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Kde&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof IM&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===OS?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Qi(WX),this.ctx.fill(),this.ctx.restore()):n.type===DS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Qi(WX),this.ctx.fill(),this.ctx.restore())),Bft(n)&&n.value.length){switch(h=this.createFontStyle(s),j=h[0],p=h[1],g=this.fontMetrics.getMetrics(j,p).baseline,this.ctx.font=j,this.ctx.fillStyle=Qi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ift(n.styles.textAlign),k=US(n),x=0,n.styles.textAlign){case 1:x+=k.width/2;break;case 2:x+=k.width;break}b=k.add(x,0,0,-k.height/2+1),this.ctx.save(),this.path([new ar(k.left,k.top),new ar(k.left+k.width,k.top),new ar(k.left+k.width,k.top+k.height),new ar(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ew(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ci(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=I.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(j=this.createFontStyle(s)[0],this.ctx.font=j,this.ctx.fillStyle=Qi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new Th(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,IX(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ew(r.listValue,k),s.letterSpacing,IX(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return fl(this,void 0,void 0,function(){var n,a,y,s,i,y,o,c,y,u,d,y,f,h,y,p,g,y,x,b,y;return Ho(this,function(w){switch(w.label){case 0:if(Ci(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,w.label=11;case 11:return o<c.length?(y=c[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:x=0,b=r.positiveZIndex,w.label=27;case 27:return x<b.length?(y=b[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Tu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Tu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c;return Ho(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,R,V,K,L,M,N,g,R,V,K,L,M,x,b,y,w,_,j,k,I,E,N,B,R,D,O,L,M,J,V,K,z,G,Y,te,P,H,X,Z;return Ho(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=r6(r,n,[f.width,f.height,f.width/f.height]),R=p[0],V=p[1],K=p[2],L=p[3],M=p[4],N=s.ctx.createPattern(s.resizeImage(f,L,M),"repeat"),s.renderRepeat(R,N,V,K)),[3,6];case 5:mut(d)?(g=r6(r,n,[null,null,null]),R=g[0],V=g[1],K=g[2],L=g[3],M=g[4],x=uut(d.angle,L,M),b=x[0],y=x[1],w=x[2],_=x[3],j=x[4],k=document.createElement("canvas"),k.width=L,k.height=M,I=k.getContext("2d"),E=I.createLinearGradient(y,_,w,j),BX(d.stops,b).forEach(function(le){return E.addColorStop(le.stop,Qi(le.color))}),I.fillStyle=E,I.fillRect(0,0,L,M),L>0&&M>0&&(N=s.ctx.createPattern(k,"repeat"),s.renderRepeat(R,N,V,K))):put(d)&&(B=r6(r,n,[null,null,null]),R=B[0],D=B[1],O=B[2],L=B[3],M=B[4],J=d.position.length===0?[kM]:d.position,V=Da(J[0],L),K=Da(J[J.length-1],M),z=dut(d,V,K,L,M),G=z[0],Y=z[1],G>0&&Y>0&&(te=s.ctx.createRadialGradient(D+V,O+K,0,D+V,O+K,G),BX(d.stops,G*2).forEach(function(le){return te.addColorStop(le.stop,Qi(le.color))}),s.path(R),s.ctx.fillStyle=te,G!==Y?(P=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,X=Y/G,Z=1/X,s.ctx.save(),s.ctx.translate(P,H),s.ctx.transform(1,0,0,X,0,0),s.ctx.translate(-P,-H),s.ctx.fillRect(D,Z*(O-H)+H,L,M*Z),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return fl(this,void 0,void 0,function(){return Ho(this,function(s){return this.path(oY(a,n)),this.ctx.fillStyle=Qi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return fl(this,void 0,void 0,function(){var i,o;return Ho(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=vft(s,a),this.path(i),this.ctx.fillStyle=Qi(r),this.ctx.fill(),o=bft(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,f=this;return Ho(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!fm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=Tft(iv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),fm(n.backgroundColor)||(this.ctx.fillStyle=Qi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=LS(r.curves),x=p.inset?0:kft,b=gft(g,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+x,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Qi(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Qi(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!fm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return fl(this,void 0,void 0,function(){var o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,I,k,I;return Ho(this,function(E){return this.ctx.save(),o=yft(s,a),c=oY(s,a),i===2&&(this.path(c),this.ctx.clip()),Tu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Tu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),b=!0,p<=g*2?b=!1:p<=g*2+x?(y=p/(2*g+x),g*=y,x*=y):(w=Math.floor((p+x)/(g+x)),_=(p-w*g)/(w-1),j=(p-(w+1)*g)/w,x=j<=0||Math.abs(x-_)<Math.abs(x-j)?_:j),b&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Qi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Tu(c[0])&&(k=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke()),Tu(c[1])&&(k=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return fl(this,void 0,void 0,function(){var n;return Ho(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Qi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=xft(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(cAe),Bft=function(e){return e instanceof Gde||e instanceof $de?!0:e instanceof IM&&e.type!==DS&&e.type!==OS},Tft=function(e,t){switch(e){case 0:return LS(t);case 2:return Aft(t);case 1:default:return MS(t)}},Ift=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Fft=["-apple-system","system-ui"],Oft=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Fft.indexOf(t)===-1}):e},Dft=function(e){Wd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return fl(this,void 0,void 0,function(){var n,a;return Ho(this,function(s){switch(s.label){case 0:return n=oD(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Pft(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Qi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(cAe),Pft=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Rft=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Lft=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Rft({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new aft(this,t)}return e.instanceCount=1,e}(),hD=function(e,t){return t===void 0&&(t={}),Mft(e,t)};typeof window<"u"&&nAe.setContext(window);var Mft=function(e,t){return fl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,E,I,E,N,B,R,D,O,L,M,J,V,K,z,G,Y,te,P,H,X;return Ho(this,function(Z){switch(Z.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(N=t.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(R=t.useCORS)!==null&&R!==void 0?R:!1},s=GO({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(O=t.windowWidth)!==null&&O!==void 0?O:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(M=t.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(J=t.scrollY)!==null&&J!==void 0?J:n.pageYOffset},o=new Th(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new Lft(s,o),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(K=t.allowTaint)!==null&&K!==void 0?K:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new aY(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=Z.sent(),g=FM(h)||QAt(h)?glt(h.ownerDocument):Jk(c,h),x=g.width,b=g.height,y=g.left,w=g.top,_=Uft(c,h,t.backgroundColor),j={canvas:t.canvas,backgroundColor:_,scale:(G=(z=t.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((Y=t.x)!==null&&Y!==void 0?Y:0)+y,y:((te=t.y)!==null&&te!==void 0?te:0)+w,width:(P=t.width)!==null&&P!==void 0?P:Math.ceil(x),height:(H=t.height)!==null&&H!==void 0?H:Math.ceil(b)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new Dft(c,j),[4,E.render(h)]):[3,3];case 2:return k=Z.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+b+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=Wde(c,h),_===I.styles.backgroundColor&&(I.styles.backgroundColor=fh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+j.x+","+j.y+" with size "+j.width+"x"+j.height),E=new jft(c,j),[4,E.render(I)];case 4:k=Z.sent(),Z.label=5;case 5:return(!((X=t.removeContainer)!==null&&X!==void 0)||X)&&(aY.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,k]}})})},Uft=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?yw(e,getComputedStyle(n.documentElement).backgroundColor):fh.TRANSPARENT,s=n.body?yw(e,getComputedStyle(n.body).backgroundColor):fh.TRANSPARENT,i=typeof r=="string"?yw(e,r):r===null?fh.TRANSPARENT:4294967295;return t===n.documentElement?fm(a)?fm(s)?i:s:a:i};const Qft=Object.freeze(Object.defineProperty({__proto__:null,default:hD},Symbol.toStringTag,{value:"Module"})),Hft=e=>{const[t,r]=S.useState(!1),[n,a]=S.useState(null);return S.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},uAe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],Vft=["Mecánica Industrial","Mecánica Automotriz"],zft=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:uAe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),cY=({empresas:e,isLoaded:t,route:r})=>{const n=S.useRef(null),a=S.useRef(null),s=S.useRef([]),i=S.useRef(null),o=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return S.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},$ft=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,x;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((b,y)=>b.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:"🚌"}),l.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},uY=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Gft=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),l.jsx(th,{width:"100%",height:300,children:l.jsxs(GL,{children:[l.jsx(uk,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>l.jsx(_m,{fill:t[n%t.length]},`cell-${n}`))}),l.jsx(eh,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),l.jsx(th,{width:"100%",height:300,children:l.jsxs(Jw,{data:e.porSupervisor,layout:"vertical",children:[l.jsx(Yw,{strokeDasharray:"3 3"}),l.jsx(vg,{type:"number"}),l.jsx(bg,{type:"category",dataKey:"name",width:150}),l.jsx(eh,{}),l.jsx(f1,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),l.jsx(th,{width:"100%",height:300,children:l.jsxs(Jw,{data:e.porComuna,children:[l.jsx(Yw,{strokeDasharray:"3 3"}),l.jsx(vg,{dataKey:"name"}),l.jsx(bg,{}),l.jsx(eh,{}),l.jsx(f1,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),l.jsx(th,{width:"100%",height:300,children:l.jsxs(rLe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[l.jsx(Oae,{}),l.jsx(ck,{dataKey:"subject"}),l.jsx(ok,{angle:30,domain:[0,5]}),l.jsx(ML,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),l.jsx(eh,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),l.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:l.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>l.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[l.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),l.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},Kft=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState("list"),[i,o]=S.useState(null),[c,u]=S.useState(!0),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState(null),[b,y]=S.useState([]),[w,_]=S.useState(null),[j,k]=S.useState(!1),[I,E]=S.useState("DRIVING"),[N,B]=S.useState(""),[R,D]=S.useState([]),O="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:L}=Hft(O);S.useEffect(()=>{u(!0);const ie=fit(t),ce=pit(n),fe=xit(D);return u(!1),()=>{ie(),ce(),fe()}},[]);const M=S.useMemo(()=>{const ie=e.reduce((_e,Fe)=>{const Se=Fe.area||"Sin especificar";return _e[Se]=(_e[Se]||0)+1,_e},{}),ce=e.reduce((_e,Fe)=>{var me;const Se=((me=Fe.docenteSupervisor)==null?void 0:me.nombreCompleto)||"Sin asignar";return _e[Se]=(_e[Se]||0)+1,_e},{}),fe=e.reduce((_e,Fe)=>{const Se=Fe.direccion.split(",").map(Te=>Te.trim()),me=Se.length>1?Se[1]:"Desconocida";return _e[me]=(_e[me]||0)+1,_e},{}),Ie=uAe.map(_e=>{const Fe=e.flatMap(me=>{var Te;return(Te=me.calificaciones.find(Me=>Me.elemento===_e.elemento))==null?void 0:Te.score}).filter(me=>me!=null),Se=Fe.length>0?Fe.reduce((me,Te)=>me+Te,0)/Fe.length:0;return{subject:_e.elemento.split(" ")[0],A:Se,fullMark:5}}),ne=e.map(_e=>{const Fe=_e.calificaciones.map(me=>me.score).filter(me=>me!=null),Se=Fe.length>0?Fe.reduce((me,Te)=>me+Te,0)/Fe.length:0;return{..._e,promedio:Se}}).filter(_e=>_e.promedio>0).sort((_e,Fe)=>Fe.promedio-_e.promedio);return{porEspecialidad:Object.entries(ie).map(([_e,Fe])=>({name:_e,value:Fe})),porSupervisor:Object.entries(ce).map(([_e,Fe])=>({name:_e,value:Fe})),porComuna:Object.entries(fe).map(([_e,Fe])=>({name:_e,value:Fe})),calificacionPorAmbito:Ie,ranking:ne}},[e]),J=async()=>{if(i)try{await hit(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async ie=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await mit(ie)},K=(ie,ce)=>{o(fe=>fe?{...fe,[ie]:ce}:null)},z=async ie=>{var ce;if(f(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&L){const fe=await uY(ie.value.place_id);K("direccion",ie.label||""),K("coordenadas",fe)}else K("direccion",(ie==null?void 0:ie.label)||"")},G=ie=>{o(JSON.parse(JSON.stringify(ie))),ie.direccion&&f({label:ie.direccion,value:{description:ie.direccion}}),s("form")},Y=async ie=>{var ce;if(p(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&L){const fe=await uY(ie.value.place_id);x(fe)}},te=ie=>{y(ce=>ce.some(fe=>fe.id===ie.id)?ce.filter(fe=>fe.id!==ie.id):[...ce,ie])},P=()=>{if(!g||b.length===0||!L)return;k(!0);const ie=new window.google.maps.DirectionsService,ce=b.filter(fe=>fe.coordenadas).map(fe=>({location:fe.coordenadas,stopover:!0}));ie.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[I]},(fe,Ie)=>{k(!1),Ie===window.google.maps.DirectionsStatus.OK&&fe?_(fe):alert("No se pudo calcular la ruta: "+Ie)})},H=()=>{_(null),p(null),x(null),y([]),B("")},X=async()=>{if(!N||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ie={nombre:N,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:I};try{await git(ie),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},Z=async()=>{const ie=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!ie||!ce)return;const fe=new vr("p","mm","a4"),Ie=fe.internal.pageSize.getWidth();fe.text(`Ruta de Supervisión: ${N||"Sin nombre"}`,10,15),fe.setFontSize(10),fe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const _e=(await hD(ie,{useCORS:!0})).toDataURL("image/png");fe.addImage(_e,"PNG",10,30,Ie-20,100);const Se=(await hD(ce)).toDataURL("image/png"),me=fe.getImageProperties(Se),Te=me.height*(Ie-20)/me.width;fe.addImage(Se,"PNG",10,135,Ie-20,Te),fe.save(`ruta-${N||"supervision"}.pdf`)},ae=ie=>{p({label:ie.startPoint.label,value:null}),x(ie.startPoint.coords),y(ie.empresas),E(ie.travelMode),B(ie.nombre),s("route")},le=async ie=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await vit(ie),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),f(null),o(null),H()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(See,{size:18})," Dashboard"]}),l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),l.jsx("button",{onClick:()=>{o(zft()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&l.jsx(Gft,{data:M}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),l.jsx("div",{className:"space-y-3",children:R.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):R.map(ie=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:ie.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ie.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ae(ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>le(ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ie.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:N,onChange:ie=>B(ie.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(cX,{apiKey:O,selectProps:{value:h,onChange:Y,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${I==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),l.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${I==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ie=>ie.coordenadas).map(ie=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${ie.id}`,checked:b.some(ce=>ce.id===ie.id),onChange:()=>te(ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${ie.id}`,className:"ml-3 text-sm text-gray-700",children:ie.nombre})]},ie.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:P,disabled:!g||b.length===0||j,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:j?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:X,disabled:!N||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:Z,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:H,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(cY,{empresas:b,isLoaded:L,route:w})})]}),w&&l.jsx($ft,{route:w,travelMode:I})]}),a==="map"&&l.jsx(cY,{empresas:e,isLoaded:L}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ie=>{var ce;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:ie.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ie.rut," | ",ie.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ie.area||"No especificada"," | Cupos: ",ie.cupos," | Supervisor: ",((ce=ie.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>G(ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>V(ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ie.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(xye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.nombre,onChange:ie=>K("nombre",ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(nwe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.rut,onChange:ie=>K("rut",ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(oN,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),l.jsx("div",{className:"w-full pl-10",children:l.jsx(cX,{apiKey:O,selectProps:{value:d,onChange:z,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Rw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.contacto,onChange:ie=>K("contacto",ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(ywe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"email",value:i.email||"",onChange:ie=>K("email",ie.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(ec,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"number",value:i.cupos,onChange:ie=>K("cupos",parseInt(ie.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Cee,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.area||"",onChange:ie=>K("area",ie.target.value),className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),Vft.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(Rw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:ie=>{const ce=ie.target.value;K("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ie=>l.jsx("option",{value:JSON.stringify({id:ie.id,nombre:ie.nombreCompleto}),children:ie.nombreCompleto},ie.id))]})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((ie,ce)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[l.jsx(t2e,{className:"w-5 h-5 text-slate-400"}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ie.elemento}),l.jsxs("select",{value:ie.score||"",onChange:fe=>{const Ie=[...i.calificaciones];Ie[ce].score=fe.target.value?parseInt(fe.target.value):null,K("calificaciones",Ie)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(fe=>l.jsx("option",{value:fe,children:fe},fe))]})]},ce))]}),l.jsx("div",{className:"pt-6",children:l.jsx("button",{onClick:J,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},OM="dpd_actividades",dAe="dpd_respuestas",qft="usuarios";function Wft(e,{includeArchived:t=!1}={}){const r=yt(ft,OM),n=t?zt(r,gr("createdAt","desc")):zt(r,Dr("isArchived","==",!1),gr("createdAt","desc"));return fr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));e(s)})}async function Xft(e){const t=yt(ft,OM);return(await vn(t,{...e,isArchived:!1,createdAt:Si(),updatedAt:Si()})).id}async function Yft(e){const t=sr(ft,OM,e);await za(t)}function Jft(e,t){const r=yt(ft,dAe),n=zt(r,Dr("activityId","==",e),gr("createdAt","desc"));return fr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));t(s)})}async function Zft(e){const t=yt(ft,dAe);return(await vn(t,{...e,createdAt:Si()})).id}function eht(e,t){const r=yt(ft,qft),n=zt(r,Dr("profile","in",e));return fr(n,a=>{const s=a.docs.map(i=>{const o=i.data();return{id:i.id,nombre:(o==null?void 0:o.displayName)||(o==null?void 0:o.name)||(o==null?void 0:o.email)||"Sin nombre",profile:o==null?void 0:o.profile,email:o==null?void 0:o.email}});t(s)})}function AAe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const tht=[{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}},{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}],rht=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new cs(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function nht(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function fAe(){const e=rht();if(!e)return null;for(const t of tht){const r=await nht(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function hAe(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function aht(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function sht(e,t=3){var n;const r=await fAe();if(!r)return n6(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,i=(await r.generateContent(a)).response.text(),o=hAe(i);return(n=o==null?void 0:o.preguntas)!=null&&n.length?o.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",i),n6(e,t))}catch(a){return console.error("Error al generar preguntas:",a),n6(e,t)}}async function iht(e,t=30){var n;const r=await fAe();if(!r)return a6(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,o=(await r.generateContent(s)).response.text(),c=hAe(o);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",o),a6(e))}catch(a){return console.error("Error al analizar respuestas:",a),a6(e)}}function n6(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:aht(r).slice(0,4)}))}function a6(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}const QS=500,dY=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),Ey=nt.memo(({title:e,icon:t,right:r,children:n})=>l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[l.jsxs("header",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),oht=nt.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>l.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return l.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),lht=nt.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?l.jsx("ul",{className:"space-y-2",children:e.map(s=>{const i=s.id===t;return l.jsxs("li",{children:[l.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${i?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Ag,{className:"w-4 h-4"}),l.jsx("span",{className:"font-medium",children:s.titulo})]}),l.jsx(BP,{className:"w-4 h-4 opacity-70"})]}),n(s)&&l.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):l.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Yye,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),s6=nt.memo(({label:e,value:t,pill:r})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?l.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):l.jsx("span",{className:"font-medium",children:t})]})),cht=nt.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return l.jsxs("div",{className:"relative mt-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),l.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:l.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),uht=nt.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=S.useCallback(i=>r(e.id,i.target.value),[e.id,r]),s=S.useCallback(()=>n(e.id),[e.id,n]);return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(i=>i.id===e.id)+1}`}),l.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:l.jsx(Eo,{className:"w-4 h-4"})})]})}),dht=nt.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=S.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=S.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),i=S.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),o=S.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=S.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(p=>p.id===f?{...p,text:h}:p)})},[e.id,e.opciones,n]),u=S.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=S.useCallback(()=>r(e.id),[e.id,r]);return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),l.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:l.jsx(Eo,{className:"w-4 h-4"})})]}),l.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("label",{className:"text-sm",children:"Máx. palabras"}),l.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||QS,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:i})," Permitir selección múltiple"]}),e.opciones.map(f=>l.jsx(uht,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),l.jsx("button",{onClick:o,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),Aht=nt.memo(({q:e,respuestas:t,onChange:r})=>{var i,o;const n=S.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((i=t[e.id])==null?void 0:i.valorTexto)||"";return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||QS} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[AAe(c)," / ",e.maxPalabras||QS," palabras"]})]})}const a=((o=t[e.id])==null?void 0:o.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),l.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),fht=({currentUser:e})=>{var P;const[t,r]=S.useState("responder"),[n,a]=S.useState([]),[s,i]=S.useState(""),[o,c]=S.useState(""),[u,d]=S.useState(dY()),f=S.useCallback(H=>d(X=>({...X,...H})),[]),[h,p]=S.useState([]),[g,x]=S.useState({}),[b,y]=S.useState([]),w=FQ.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);S.useEffect(()=>{const H=Wft(X=>{a(X),i(Z=>{var ae;return Z||(((ae=X[0])==null?void 0:ae.id)??"")})});return()=>H()},[]),S.useEffect(()=>{const H=eht(["PROFESORADO","SUBDIRECCION"],X=>{p(X),d(Z=>{if(Z.creadorId)return Z;const ae=X.find(le=>le.id===(e==null?void 0:e.uid));return ae?{...Z,creadorId:ae.id,creadorNombre:ae.nombre,creadorPerfil:ae.profile||Z.creadorPerfil}:Z})});return()=>H()},[e]),S.useEffect(()=>{if(!s)return;const H=Jft(s,y);return()=>H()},[s]);const _=S.useMemo(()=>n.find(H=>H.id===s),[n,s]);S.useMemo(()=>qf[u.dimension]||[],[u.dimension]),S.useEffect(()=>{d(H=>{const X=qf[H.dimension]||[],Z=X.includes(H.subdimension)?H.subdimension:X[0]||"";return Z===H.subdimension?H:{...H,subdimension:Z}})},[u.dimension]);const j=S.useCallback(()=>{const H={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:QS};d(X=>({...X,preguntas:[...X.preguntas,H]}))},[]),k=S.useCallback(()=>{const H={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(X=>({...X,preguntas:[...X.preguntas,H]}))},[]),I=S.useCallback((H,X)=>{d(Z=>({...Z,preguntas:Z.preguntas.map(ae=>ae.id===H?{...ae,...X}:ae)}))},[]),E=S.useCallback(H=>{d(X=>({...X,preguntas:X.preguntas.filter(Z=>Z.id!==H)}))},[]),[N,B]=S.useState(!1),R=S.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const X=(await sht(u.aiTema,u.aiCantidad)).map(Z=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:Z.enunciado,opciones:Z.opciones.slice(0,5).map(ae=>({id:crypto.randomUUID(),text:ae})),multiple:!0}));d(Z=>({...Z,preguntas:[...Z.preguntas,...X]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[D,O]=S.useState([]);S.useEffect(()=>{(async()=>{var Z;if(!_)return;const X=[];for(const ae of b)if(ae.respuestas)for(const[le,ie]of Object.entries(ae.respuestas)){const ce=_.preguntas.find(Ie=>Ie.id===le);if(!ce||ce.tipo!=="abierta")continue;const fe=ie;fe.tipo==="abierta"&&((Z=fe.valorTexto)!=null&&Z.trim())&&X.push(fe.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",X.length),X.length>0)try{const ae=await iht(X,30);console.log("Keywords generadas:",ae),O(ae)}catch(ae){console.error("Error al extraer keywords:",ae),O([])}else O([])})()},[_,b]);const L=S.useMemo(()=>{if(!_)return{};const H={};for(const X of _.preguntas)X.tipo==="seleccion_multiple"&&(H[X.id]={},(X.opciones||[]).forEach(Z=>H[X.id][Z]=0));for(const X of b)for(const[Z,ae]of Object.entries(X.respuestas||{})){const le=ae;if((le==null?void 0:le.tipo)==="seleccion_multiple")for(const ie of le.seleccionados||[])H[Z]||(H[Z]={}),H[Z][ie]=(H[Z][ie]||0)+1}return H},[_,b]),M=S.useCallback(H=>H.map(X=>X.tipo==="abierta"?X:{...X,opciones:X.opciones.map(Z=>Z.text)}),[]),J=S.useCallback(()=>d(dY()),[]),V=S.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const H={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:M(u.preguntas)},X=await Xft(H);J(),i(X),r("responder")},[u,M,J]),K=S.useCallback(async(H,X)=>{var ae;if(window.confirm(`¿Eliminar "${X}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await Yft(H),s===H){const le=n.filter(ie=>ie.id!==H);i(((ae=le[0])==null?void 0:ae.id)||""),le.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),z=S.useCallback(async()=>{if(!_||!b.length)return;const H=new vr("p","mm","a4"),X=20;let Z=X;H.setFontSize(20),H.text(`Informe: ${_.titulo}`,X,Z),Z+=10,H.setFontSize(12),H.text(`Dimensión: ${_.dimension}`,X,Z+=10),H.text(`Subdimensión: ${_.subdimension}`,X,Z+=7),H.text(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,X,Z+=7),H.text(`Total de respuestas: ${b.length}`,X,Z+=7),Z+=10;for(const ae of _.preguntas){if(Z>250&&(H.addPage(),Z=X),H.setFontSize(14),H.text(`Pregunta: ${ae.enunciado}`,X,Z+=10),Z+=5,H.setFontSize(12),ae.tipo==="seleccion_multiple"){const le=L[ae.id]||{},ie=b.length;Object.entries(le).forEach(([ce,fe])=>{const Ie=ie>0?Math.round(fe/ie*100):0;H.text(`${ce}: ${fe} respuestas (${Ie}%)`,X+5,Z+=7)})}else{H.text("Respuestas:",X,Z+=7);for(const le of b){const ie=le.respuestas[ae.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){Z>250&&(H.addPage(),Z=X),H.text(`${le.userNombre}:`,X+5,Z+=7);const ce=H.splitTextToSize(ie.valorTexto,170);H.text(ce,X+10,Z+=7),Z+=ce.length*7}}}Z+=10}if(D.length>0){Z>250&&(H.addPage(),Z=X),H.setFontSize(14),H.text("Conceptos clave detectados:",X,Z+=10),H.setFontSize(12);const ae=D.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),le=H.splitTextToSize(ae,170);H.text(le,X,Z+=7)}H.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,b,L,D]),G=S.useCallback(H=>{const X=e==null?void 0:e.isAdmin,Z=H.creadorId===(e==null?void 0:e.uid);return w&&(X||Z)},[e,w]),Y=S.useCallback((H,X)=>{x(Z=>({...Z,[H.id]:H.tipo==="abierta"?{tipo:"abierta",valorTexto:X}:{tipo:"seleccion_multiple",seleccionados:X}}))},[]),te=S.useCallback(async()=>{if(_){for(const H of _.preguntas){const X=g[H.id];if(X&&H.tipo==="abierta"&&H.maxPalabras){const Z=AAe(X.valorTexto||"");if(Z>H.maxPalabras)return alert(`La respuesta a "${H.enunciado}" supera el máximo de ${H.maxPalabras} palabras (${Z}).`)}}await Zft({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return l.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(FP,{className:"w-7 h-7 text-indigo-600"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),l.jsx(oht,{value:t,onChange:r,canCreate:w})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:l.jsx(Ey,{title:"Actividades",icon:l.jsx(Ag,{className:"w-5 h-5 text-indigo-600"}),children:l.jsx(lht,{items:n,selectedId:s,onSelect:H=>{i(H),r("responder")},canDelete:G,onDelete:K})})}),l.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&l.jsxs(Ey,{title:"Nueva actividad / sesión",icon:l.jsx(MQ,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(vh,{className:"w-4 h-4"}),"Guardar"]}),children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Título"}),l.jsx("input",{value:u.titulo,onChange:H=>f({titulo:H.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),l.jsx("select",{value:u.dimension,onChange:H=>f({dimension:H.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(qf).map(H=>l.jsx("option",{value:H,children:H},H))}),l.jsx("select",{value:u.subdimension,onChange:H=>f({subdimension:H.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(qf[u.dimension]||[]).map(H=>l.jsx("option",{value:H,children:H},H))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),l.jsx("select",{value:u.creadorPerfil,onChange:H=>f({creadorPerfil:H.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:FQ.map(H=>l.jsx("option",{value:H,children:H},H))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),l.jsxs("select",{value:u.creadorId,onChange:H=>{const X=H.target.value,Z=h.find(ae=>ae.id===X);f({creadorId:X,creadorNombre:(Z==null?void 0:Z.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[l.jsx("option",{value:"",children:"Seleccione…"}),h.filter(H=>H.profile===u.creadorPerfil).map(H=>l.jsx("option",{value:H.id,children:H.nombre},H.id))]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[l.jsx(kee,{className:"w-4 h-4"})," Preguntas"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(Uu,{className:"w-4 h-4"})," Abierta"]}),l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(Uu,{className:"w-4 h-4"})," Selección múltiple"]}),l.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[l.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[l.jsx(g2e,{className:"w-4 h-4"})," IA"]}),l.jsx("input",{value:u.aiTema,onChange:H=>f({aiTema:H.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),l.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:H=>f({aiCantidad:parseInt(H.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),l.jsxs("button",{onClick:R,disabled:N||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[l.jsx(Gp,{className:"w-4 h-4"}),N?"Generando…":"Generar con IA"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((H,X)=>l.jsx(dht,{q:H,index:X,onRemove:E,onPatch:I},H.id)),u.preguntas.length===0&&l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Xi,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&l.jsx(Ey,{title:`Responder: ${_.titulo}`,icon:l.jsx(ec,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:te,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(vh,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[l.jsx(s6,{pill:!0,label:"Dimensión",value:_.dimension}),l.jsx(s6,{pill:!0,label:"Subdimensión",value:_.subdimension}),l.jsx(s6,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(H=>l.jsx(Aht,{q:H,respuestas:g,onChange:Y},H.id))]})}),t==="respuestas_individuales"&&_&&l.jsx(Ey,{title:`Respuestas individuales: ${_.titulo}`,icon:l.jsx(ec,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:z,disabled:!b.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:b.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[l.jsx(wm,{className:"w-4 h-4"}),"Descargar informe"]}),l.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(Sd,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:l.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[l.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[l.jsx(Yb,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",b.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:b.length>0?b.map(H=>{var X;return l.jsxs("button",{onClick:()=>c(H.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${o===H.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:l.jsx(Yb,{className:"w-4 h-4 text-indigo-600"})}),l.jsx("span",{className:"font-medium",children:H.userNombre})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[l.jsx(Mu,{className:"w-3.5 h-3.5"}),new Date(((X=H.createdAt)==null?void 0:X.seconds)*1e3).toLocaleDateString()]})]},H.userId)}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(Yb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),l.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:o?l.jsxs(l.Fragment,{children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[l.jsx(MQ,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",l.jsx("span",{className:"text-indigo-600",children:(P=b.find(H=>H.userId===o))==null?void 0:P.userNombre})]}),l.jsx("div",{className:"space-y-6",children:_.preguntas.map(H=>{var ae;const X=b.find(le=>le.userId===o),Z=(ae=X==null?void 0:X.respuestas)==null?void 0:ae[H.id];return console.log("Respuesta encontrada:",{preguntaId:H.id,tipo:H.tipo,respuesta:Z}),l.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:H.tipo==="abierta"?l.jsx(UQ,{className:"w-5 h-5 text-indigo-600"}):l.jsx(nw,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900",children:H.enunciado}),l.jsx("p",{className:"text-sm text-slate-500 mt-1",children:H.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),H.tipo==="abierta"?(Z==null?void 0:Z.tipo)==="abierta"&&Z.valorTexto?l.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:Z.valorTexto})}):l.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):l.jsxs("div",{className:"space-y-2 mt-3",children:[(H.opciones||[]).map(le=>{const ce=((Z==null?void 0:Z.tipo)==="seleccion_multiple"?Z.seleccionados||[]:[]).includes(le.text);return l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ce?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[l.jsx("div",{className:"flex-shrink-0",children:ce?l.jsx(Xi,{className:"w-4 h-4 text-indigo-600"}):l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),l.jsx("span",{className:"text-sm",children:typeof le=="string"?le:le.text})]},typeof le=="string"?le:le.id)}),!Z&&l.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},H.id)})})]}):l.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&l.jsxs(Ey,{title:`Dashboard: ${_.titulo}`,icon:l.jsx(Dw,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[l.jsx(Yb,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),G(_)&&l.jsxs("button",{onClick:()=>K(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[l.jsx(Eo,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:z,disabled:!b.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:b.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[l.jsx(wm,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:l.jsx(Yb,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),l.jsx("p",{className:"text-xl font-semibold",children:b.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:l.jsx(nw,{className:"w-5 h-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),l.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(fg,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),l.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:l.jsx(Mu,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),l.jsx("p",{className:"text-sm font-medium",children:(()=>{const H=_.createdAt,X=H!=null&&H.toDate?H.toDate():H!=null&&H.seconds?new Date(H.seconds*1e3):H?new Date(H):null;return X?X.toLocaleDateString():"No disponible"})()})]})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(_ee,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),l.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(H=>H.tipo==="seleccion_multiple").map(H=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[l.jsx("p",{className:"font-medium mb-3 text-slate-700",children:H.enunciado}),Object.entries(L[H.id]||{}).map(([X,Z])=>l.jsx(cht,{label:X,value:Z},X)),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[l.jsx(Zv,{className:"w-4 h-4"}),"Total respuestas: ",b.length]})]},H.id)),_.preguntas.filter(H=>H.tipo==="seleccion_multiple").length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(nw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(fye,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),D.length?l.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(H=>l.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(H.score*18)}px`},children:H.keyword},H.keyword))}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(UQ,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var bE=e=>e.type==="checkbox",Vp=e=>e instanceof Date,gl=e=>e==null;const mAe=e=>typeof e=="object";var Ws=e=>!gl(e)&&!Array.isArray(e)&&mAe(e)&&!Vp(e),hht=e=>Ws(e)&&e.target?bE(e.target)?e.target.checked:e.target.value:e,mht=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pht=(e,t)=>e.has(mht(t)),ght=e=>{const t=e.constructor&&e.constructor.prototype;return Ws(t)&&t.hasOwnProperty("isPrototypeOf")},DM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ya(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(DM&&(e instanceof Blob||n))&&(r||Ws(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!ght(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ya(e[a]));else return e;return t}var lj=e=>/^\w*$/.test(e),Ja=e=>e===void 0,cj=e=>Array.isArray(e)?e.filter(Boolean):[],PM=e=>cj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cr=(e,t,r)=>{if(!t||!Ws(e))return r;const n=(lj(t)?[t]:PM(t)).reduce((a,s)=>gl(a)?a:a[s],e);return Ja(n)||n===e?Ja(e[t])?r:e[t]:n},DA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=lj(t)?[t]:PM(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let c=r;if(n!==i){const u=e[o];c=Ws(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const AY={BLUR:"blur",FOCUS_OUT:"focusout"},Fu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$f={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},pAe=nt.createContext(null);pAe.displayName="HookFormContext";const xht=()=>nt.useContext(pAe);var vht=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Fu.all&&(t._proxyFormState[i]=!n||Fu.all),e[i]}});return a};const gAe=typeof window<"u"?nt.useLayoutEffect:nt.useEffect;var GA=e=>typeof e=="string",bht=(e,t,r,n,a)=>GA(e)?(n&&t.watch.add(e),cr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),cr(r,s))):(n&&(t.watchAll=!0),r),mD=e=>gl(e)||!mAe(e);function z0(e,t,r=new WeakSet){if(mD(e)||mD(t))return e===t;if(Vp(e)&&Vp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Vp(i)&&Vp(o)||Ws(i)&&Ws(o)||Array.isArray(i)&&Array.isArray(o)?!z0(i,o,r):i!==o)return!1}}return!0}var yht=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Zl=e=>Array.isArray(e)?e:[e],fY=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},hl=e=>Ws(e)&&!Object.keys(e).length,RM=e=>e.type==="file",_d=e=>typeof e=="function",HS=e=>{if(!DM)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},xAe=e=>e.type==="select-multiple",LM=e=>e.type==="radio",wht=e=>LM(e)||bE(e),i6=e=>HS(e)&&e.isConnected;function Eht(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ja(e)?n++:e[t[n++]];return e}function Cht(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ja(e[t]))return!1;return!0}function Us(e,t){const r=Array.isArray(t)?t:lj(t)?[t]:PM(t),n=r.length===1?e:Eht(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Ws(n)&&hl(n)||Array.isArray(n)&&Cht(n))&&Us(e,r.slice(0,-1)),e}var vAe=e=>{for(const t in e)if(_d(e[t]))return!0;return!1};function VS(e,t={}){const r=Array.isArray(e);if(Ws(e)||r)for(const n in e)Array.isArray(e[n])||Ws(e[n])&&!vAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},VS(e[n],t[n])):gl(e[n])||(t[n]=!0);return t}function bAe(e,t,r){const n=Array.isArray(e);if(Ws(e)||n)for(const a in e)Array.isArray(e[a])||Ws(e[a])&&!vAe(e[a])?Ja(t)||mD(r[a])?r[a]=Array.isArray(e[a])?VS(e[a],[]):{...VS(e[a])}:bAe(e[a],gl(t)?{}:t[a],r[a]):r[a]=!z0(e[a],t[a]);return r}var Cy=(e,t)=>bAe(e,t,VS(t));const hY={value:!1,isValid:!1},mY={value:!0,isValid:!0};var yAe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ja(e[0].attributes.value)?Ja(e[0].value)||e[0].value===""?mY:{value:e[0].value,isValid:!0}:mY:hY}return hY},wAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ja(e)?e:t?e===""?NaN:e&&+e:r&&GA(e)?new Date(e):n?n(e):e;const pY={isValid:!1,value:null};var EAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,pY):pY;function gY(e){const t=e.ref;return RM(t)?t.files:LM(t)?EAe(e.refs).value:xAe(t)?[...t.selectedOptions].map(({value:r})=>r):bE(t)?yAe(e.refs).value:wAe(Ja(t.value)?e.ref.value:t.value,e)}var _ht=(e,t,r,n)=>{const a={};for(const s of e){const i=cr(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},zS=e=>e instanceof RegExp,_y=e=>Ja(e)?e:zS(e)?e.source:Ws(e)?zS(e.value)?e.value.source:e.value:e,bv=e=>({isOnSubmit:!e||e===Fu.onSubmit,isOnBlur:e===Fu.onBlur,isOnChange:e===Fu.onChange,isOnAll:e===Fu.all,isOnTouch:e===Fu.onTouched});const xY="AsyncFunction";var Nht=e=>!!e&&!!e.validate&&!!(_d(e.validate)&&e.validate.constructor.name===xY||Ws(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xY)),Sht=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),pD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Vv=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=cr(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(Vv(o,t))break}else if(Ws(o)&&Vv(o,t))break}}};function vY(e,t,r){const n=cr(e,r);if(n||lj(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=cr(t,s),o=cr(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var kht=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return hl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Fu.all))},jht=(e,t,r)=>!e||!t||e===t||Zl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Bht=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,Tht=(e,t)=>!cj(cr(e,t)).length&&Us(e,t),CAe=(e,t,r)=>{const n=Zl(cr(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},R5=e=>GA(e);function bY(e,t,r="validate"){if(R5(e)||Array.isArray(e)&&e.every(R5)||DA(e)&&!e)return{type:r,message:R5(e)?e:"",ref:t}}var Xx=e=>Ws(e)&&!zS(e)?e:{value:e,message:""},gD=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:x,valueAsNumber:b,mount:y}=e._f,w=cr(r,x);if(!y||t.has(x))return{};const _=o?o[0]:i,j=O=>{a&&_.reportValidity&&(_.setCustomValidity(DA(O)?"":O||""),_.reportValidity())},k={},I=LM(i),E=bE(i),N=I||E,B=(b||RM(i))&&Ja(i.value)&&Ja(w)||HS(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,R=yht.bind(null,x,n,k),D=(O,L,M,J=$f.maxLength,V=$f.minLength)=>{const K=O?L:M;k[x]={type:O?J:V,message:K,ref:i,...R(O?J:V,K)}};if(s?!Array.isArray(w)||!w.length:c&&(!N&&(B||gl(w))||DA(w)&&!w||E&&!yAe(o).isValid||I&&!EAe(o).isValid)){const{value:O,message:L}=R5(c)?{value:!!c,message:c}:Xx(c);if(O&&(k[x]={type:$f.required,message:L,ref:_,...R($f.required,L)},!n))return j(L),k}if(!B&&(!gl(f)||!gl(h))){let O,L;const M=Xx(h),J=Xx(f);if(!gl(w)&&!isNaN(w)){const V=i.valueAsNumber||w&&+w;gl(M.value)||(O=V>M.value),gl(J.value)||(L=V<J.value)}else{const V=i.valueAsDate||new Date(w),K=Y=>new Date(new Date().toDateString()+" "+Y),z=i.type=="time",G=i.type=="week";GA(M.value)&&w&&(O=z?K(w)>K(M.value):G?w>M.value:V>new Date(M.value)),GA(J.value)&&w&&(L=z?K(w)<K(J.value):G?w<J.value:V<new Date(J.value))}if((O||L)&&(D(!!O,M.message,J.message,$f.max,$f.min),!n))return j(k[x].message),k}if((u||d)&&!B&&(GA(w)||s&&Array.isArray(w))){const O=Xx(u),L=Xx(d),M=!gl(O.value)&&w.length>+O.value,J=!gl(L.value)&&w.length<+L.value;if((M||J)&&(D(M,O.message,L.message),!n))return j(k[x].message),k}if(p&&!B&&GA(w)){const{value:O,message:L}=Xx(p);if(zS(O)&&!w.match(O)&&(k[x]={type:$f.pattern,message:L,ref:i,...R($f.pattern,L)},!n))return j(L),k}if(g){if(_d(g)){const O=await g(w,r),L=bY(O,_);if(L&&(k[x]={...L,...R($f.validate,L.message)},!n))return j(L.message),k}else if(Ws(g)){let O={};for(const L in g){if(!hl(O)&&!n)break;const M=bY(await g[L](w,r),_,L);M&&(O={...M,...R(L,M.message)},j(M.message),n&&(k[x]=O))}if(!hl(O)&&(k[x]={ref:_,...O},!n))return k}}return j(!0),k};const Iht={mode:Fu.onSubmit,reValidateMode:Fu.onChange,shouldFocusError:!0};function Fht(e={}){let t={...Iht,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:_d(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Ws(t.defaultValues)||Ws(t.values)?Ya(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ya(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:fY(),state:fY()},p=t.criteriaMode===Fu.all,g=be=>De=>{clearTimeout(u),u=setTimeout(be,De)},x=async be=>{if(!t.disabled&&(d.isValid||f.isValid||be)){const De=t.resolver?hl((await E()).errors):await B(n,!0);De!==r.isValid&&h.state.next({isValid:De})}},b=(be,De)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((be||Array.from(o.mount)).forEach(Re=>{Re&&(De?Fa(r.validatingFields,Re,De):Us(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!hl(r.validatingFields)}))},y=(be,De=[],Re,qe,Ze=!0,ct=!0)=>{if(qe&&Re&&!t.disabled){if(i.action=!0,ct&&Array.isArray(cr(n,be))){const pt=Re(cr(n,be),qe.argA,qe.argB);Ze&&Fa(n,be,pt)}if(ct&&Array.isArray(cr(r.errors,be))){const pt=Re(cr(r.errors,be),qe.argA,qe.argB);Ze&&Fa(r.errors,be,pt),Tht(r.errors,be)}if((d.touchedFields||f.touchedFields)&&ct&&Array.isArray(cr(r.touchedFields,be))){const pt=Re(cr(r.touchedFields,be),qe.argA,qe.argB);Ze&&Fa(r.touchedFields,be,pt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Cy(a,s)),h.state.next({name:be,isDirty:D(be,De),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,be,De)},w=(be,De)=>{Fa(r.errors,be,De),h.state.next({errors:r.errors})},_=be=>{r.errors=be,h.state.next({errors:r.errors,isValid:!1})},j=(be,De,Re,qe)=>{const Ze=cr(n,be);if(Ze){const ct=cr(s,be,Ja(Re)?cr(a,be):Re);Ja(ct)||qe&&qe.defaultChecked||De?Fa(s,be,De?ct:gY(Ze._f)):M(be,ct),i.mount&&x()}},k=(be,De,Re,qe,Ze)=>{let ct=!1,pt=!1;const It={name:be};if(!t.disabled){if(!Re||qe){(d.isDirty||f.isDirty)&&(pt=r.isDirty,r.isDirty=It.isDirty=D(),ct=pt!==It.isDirty);const Mt=z0(cr(a,be),De);pt=!!cr(r.dirtyFields,be),Mt?Us(r.dirtyFields,be):Fa(r.dirtyFields,be,!0),It.dirtyFields=r.dirtyFields,ct=ct||(d.dirtyFields||f.dirtyFields)&&pt!==!Mt}if(Re){const Mt=cr(r.touchedFields,be);Mt||(Fa(r.touchedFields,be,Re),It.touchedFields=r.touchedFields,ct=ct||(d.touchedFields||f.touchedFields)&&Mt!==Re)}ct&&Ze&&h.state.next(It)}return ct?It:{}},I=(be,De,Re,qe)=>{const Ze=cr(r.errors,be),ct=(d.isValid||f.isValid)&&DA(De)&&r.isValid!==De;if(t.delayError&&Re?(c=g(()=>w(be,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Fa(r.errors,be,Re):Us(r.errors,be)),(Re?!z0(Ze,Re):Ze)||!hl(qe)||ct){const pt={...qe,...ct&&DA(De)?{isValid:De}:{},errors:r.errors,name:be};r={...r,...pt},h.state.next(pt)}},E=async be=>{b(be,!0);const De=await t.resolver(s,t.context,_ht(be||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(be),De},N=async be=>{const{errors:De}=await E(be);if(be)for(const Re of be){const qe=cr(De,Re);qe?Fa(r.errors,Re,qe):Us(r.errors,Re)}else r.errors=De;return De},B=async(be,De,Re={valid:!0})=>{for(const qe in be){const Ze=be[qe];if(Ze){const{_f:ct,...pt}=Ze;if(ct){const It=o.array.has(ct.name),Mt=Ze._f&&Nht(Ze._f);Mt&&d.validatingFields&&b([qe],!0);const Pt=await gD(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!De,It);if(Mt&&d.validatingFields&&b([qe]),Pt[ct.name]&&(Re.valid=!1,De))break;!De&&(cr(Pt,ct.name)?It?CAe(r.errors,Pt,ct.name):Fa(r.errors,ct.name,Pt[ct.name]):Us(r.errors,ct.name))}!hl(pt)&&await B(pt,De,Re)}}return Re.valid},R=()=>{for(const be of o.unMount){const De=cr(n,be);De&&(De._f.refs?De._f.refs.every(Re=>!i6(Re)):!i6(De._f.ref))&&le(be)}o.unMount=new Set},D=(be,De)=>!t.disabled&&(be&&De&&Fa(s,be,De),!z0(Y(),a)),O=(be,De,Re)=>bht(be,o,{...i.mount?s:Ja(De)?a:GA(be)?{[be]:De}:De},Re,De),L=be=>cj(cr(i.mount?s:a,be,t.shouldUnregister?cr(a,be,[]):[])),M=(be,De,Re={})=>{const qe=cr(n,be);let Ze=De;if(qe){const ct=qe._f;ct&&(!ct.disabled&&Fa(s,be,wAe(De,ct)),Ze=HS(ct.ref)&&gl(De)?"":De,xAe(ct.ref)?[...ct.ref.options].forEach(pt=>pt.selected=Ze.includes(pt.value)):ct.refs?bE(ct.ref)?ct.refs.forEach(pt=>{(!pt.defaultChecked||!pt.disabled)&&(Array.isArray(Ze)?pt.checked=!!Ze.find(It=>It===pt.value):pt.checked=Ze===pt.value||!!Ze)}):ct.refs.forEach(pt=>pt.checked=pt.value===Ze):RM(ct.ref)?ct.ref.value="":(ct.ref.value=Ze,ct.ref.type||h.state.next({name:be,values:Ya(s)})))}(Re.shouldDirty||Re.shouldTouch)&&k(be,Ze,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&G(be)},J=(be,De,Re)=>{for(const qe in De){if(!De.hasOwnProperty(qe))return;const Ze=De[qe],ct=be+"."+qe,pt=cr(n,ct);(o.array.has(be)||Ws(Ze)||pt&&!pt._f)&&!Vp(Ze)?J(ct,Ze,Re):M(ct,Ze,Re)}},V=(be,De,Re={})=>{const qe=cr(n,be),Ze=o.array.has(be),ct=Ya(De);Fa(s,be,ct),Ze?(h.array.next({name:be,values:Ya(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Re.shouldDirty&&h.state.next({name:be,dirtyFields:Cy(a,s),isDirty:D(be,ct)})):qe&&!qe._f&&!gl(ct)?J(be,ct,Re):M(be,ct,Re),pD(be,o)&&h.state.next({...r,name:be}),h.state.next({name:i.mount?be:void 0,values:Ya(s)})},K=async be=>{i.mount=!0;const De=be.target;let Re=De.name,qe=!0;const Ze=cr(n,Re),ct=Mt=>{qe=Number.isNaN(Mt)||Vp(Mt)&&isNaN(Mt.getTime())||z0(Mt,cr(s,Re,Mt))},pt=bv(t.mode),It=bv(t.reValidateMode);if(Ze){let Mt,Pt;const Qt=De.type?gY(Ze._f):hht(be),wt=be.type===AY.BLUR||be.type===AY.FOCUS_OUT,jr=!Sht(Ze._f)&&!t.resolver&&!cr(r.errors,Re)&&!Ze._f.deps||Bht(wt,cr(r.touchedFields,Re),r.isSubmitted,It,pt),tr=pD(Re,o,wt);Fa(s,Re,Qt),wt?(!De||!De.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(be),c&&c(0)):Ze._f.onChange&&Ze._f.onChange(be);const an=k(Re,Qt,wt),Nr=!hl(an)||tr;if(!wt&&h.state.next({name:Re,type:be.type,values:Ya(s)}),jr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?wt&&x():wt||x()),Nr&&h.state.next({name:Re,...tr?{}:an});if(!wt&&tr&&h.state.next({...r}),t.resolver){const{errors:$r}=await E([Re]);if(ct(Qt),qe){const In=vY(r.errors,n,Re),Pr=vY($r,n,In.name||Re);Mt=Pr.error,Re=Pr.name,Pt=hl($r)}}else b([Re],!0),Mt=(await gD(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Re],b([Re]),ct(Qt),qe&&(Mt?Pt=!1:(d.isValid||f.isValid)&&(Pt=await B(n,!0)));qe&&(Ze._f.deps&&G(Ze._f.deps),I(Re,Pt,Mt,an))}},z=(be,De)=>{if(cr(r.errors,De)&&be.focus)return be.focus(),1},G=async(be,De={})=>{let Re,qe;const Ze=Zl(be);if(t.resolver){const ct=await N(Ja(be)?be:Ze);Re=hl(ct),qe=be?!Ze.some(pt=>cr(ct,pt)):Re}else be?(qe=(await Promise.all(Ze.map(async ct=>{const pt=cr(n,ct);return await B(pt&&pt._f?{[ct]:pt}:pt)}))).every(Boolean),!(!qe&&!r.isValid)&&x()):qe=Re=await B(n);return h.state.next({...!GA(be)||(d.isValid||f.isValid)&&Re!==r.isValid?{}:{name:be},...t.resolver||!be?{isValid:Re}:{},errors:r.errors}),De.shouldFocus&&!qe&&Vv(n,z,be?Ze:o.mount),qe},Y=be=>{const De={...i.mount?s:a};return Ja(be)?De:GA(be)?cr(De,be):be.map(Re=>cr(De,Re))},te=(be,De)=>({invalid:!!cr((De||r).errors,be),isDirty:!!cr((De||r).dirtyFields,be),error:cr((De||r).errors,be),isValidating:!!cr(r.validatingFields,be),isTouched:!!cr((De||r).touchedFields,be)}),P=be=>{be&&Zl(be).forEach(De=>Us(r.errors,De)),h.state.next({errors:be?r.errors:{}})},H=(be,De,Re)=>{const qe=(cr(n,be,{_f:{}})._f||{}).ref,Ze=cr(r.errors,be)||{},{ref:ct,message:pt,type:It,...Mt}=Ze;Fa(r.errors,be,{...Mt,...De,ref:qe}),h.state.next({name:be,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&qe&&qe.focus&&qe.focus()},X=(be,De)=>_d(be)?h.state.subscribe({next:Re=>"values"in Re&&be(O(void 0,De),Re)}):O(be,De,!0),Z=be=>h.state.subscribe({next:De=>{jht(be.name,De.name,be.exact)&&kht(De,be.formState||d,Te,be.reRenderRoot)&&be.callback({values:{...s},...r,...De,defaultValues:a})}}).unsubscribe,ae=be=>(i.mount=!0,f={...f,...be.formState},Z({...be,formState:f})),le=(be,De={})=>{for(const Re of be?Zl(be):o.mount)o.mount.delete(Re),o.array.delete(Re),De.keepValue||(Us(n,Re),Us(s,Re)),!De.keepError&&Us(r.errors,Re),!De.keepDirty&&Us(r.dirtyFields,Re),!De.keepTouched&&Us(r.touchedFields,Re),!De.keepIsValidating&&Us(r.validatingFields,Re),!t.shouldUnregister&&!De.keepDefaultValue&&Us(a,Re);h.state.next({values:Ya(s)}),h.state.next({...r,...De.keepDirty?{isDirty:D()}:{}}),!De.keepIsValid&&x()},ie=({disabled:be,name:De})=>{(DA(be)&&i.mount||be||o.disabled.has(De))&&(be?o.disabled.add(De):o.disabled.delete(De))},ce=(be,De={})=>{let Re=cr(n,be);const qe=DA(De.disabled)||DA(t.disabled);return Fa(n,be,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:be}},name:be,mount:!0,...De}}),o.mount.add(be),Re?ie({disabled:DA(De.disabled)?De.disabled:t.disabled,name:be}):j(be,!0,De.value),{...qe?{disabled:De.disabled||t.disabled}:{},...t.progressive?{required:!!De.required,min:_y(De.min),max:_y(De.max),minLength:_y(De.minLength),maxLength:_y(De.maxLength),pattern:_y(De.pattern)}:{},name:be,onChange:K,onBlur:K,ref:Ze=>{if(Ze){ce(be,De),Re=cr(n,be);const ct=Ja(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,pt=wht(ct),It=Re._f.refs||[];if(pt?It.find(Mt=>Mt===ct):ct===Re._f.ref)return;Fa(n,be,{_f:{...Re._f,...pt?{refs:[...It.filter(i6),ct,...Array.isArray(cr(a,be))?[{}]:[]],ref:{type:ct.type,name:be}}:{ref:ct}}}),j(be,!1,void 0,ct)}else Re=cr(n,be,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||De.shouldUnregister)&&!(pht(o.array,be)&&i.action)&&o.unMount.add(be)}}},fe=()=>t.shouldFocusError&&Vv(n,z,o.mount),Ie=be=>{DA(be)&&(h.state.next({disabled:be}),Vv(n,(De,Re)=>{const qe=cr(n,Re);qe&&(De.disabled=qe._f.disabled||be,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||be}))},0,!1))},ne=(be,De)=>async Re=>{let qe;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let Ze=Ya(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ct,values:pt}=await E();r.errors=ct,Ze=Ya(pt)}else await B(n);if(o.disabled.size)for(const ct of o.disabled)Us(Ze,ct);if(Us(r.errors,"root"),hl(r.errors)){h.state.next({errors:{}});try{await be(Ze,Re)}catch(ct){qe=ct}}else De&&await De({...r.errors},Re),fe(),setTimeout(fe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hl(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},_e=(be,De={})=>{cr(n,be)&&(Ja(De.defaultValue)?V(be,Ya(cr(a,be))):(V(be,De.defaultValue),Fa(a,be,Ya(De.defaultValue))),De.keepTouched||Us(r.touchedFields,be),De.keepDirty||(Us(r.dirtyFields,be),r.isDirty=De.defaultValue?D(be,Ya(cr(a,be))):D()),De.keepError||(Us(r.errors,be),d.isValid&&x()),h.state.next({...r}))},Fe=(be,De={})=>{const Re=be?Ya(be):a,qe=Ya(Re),Ze=hl(be),ct=Ze?a:qe;if(De.keepDefaultValues||(a=Re),!De.keepValues){if(De.keepDirtyValues){const pt=new Set([...o.mount,...Object.keys(Cy(a,s))]);for(const It of Array.from(pt))cr(r.dirtyFields,It)?Fa(ct,It,cr(s,It)):V(It,cr(ct,It))}else{if(DM&&Ja(be))for(const pt of o.mount){const It=cr(n,pt);if(It&&It._f){const Mt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(HS(Mt)){const Pt=Mt.closest("form");if(Pt){Pt.reset();break}}}}if(De.keepFieldsRef)for(const pt of o.mount)V(pt,cr(ct,pt));else n={}}s=t.shouldUnregister?De.keepDefaultValues?Ya(a):{}:Ya(ct),h.array.next({values:{...ct}}),h.state.next({values:{...ct}})}o={mount:De.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!De.keepIsValid||!!De.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:De.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:De.keepDirty?r.isDirty:!!(De.keepDefaultValues&&!z0(be,a)),isSubmitted:De.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:De.keepDirtyValues?De.keepDefaultValues&&s?Cy(a,s):r.dirtyFields:De.keepDefaultValues&&be?Cy(a,be):De.keepDirty?r.dirtyFields:{},touchedFields:De.keepTouched?r.touchedFields:{},errors:De.keepErrors?r.errors:{},isSubmitSuccessful:De.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Se=(be,De)=>Fe(_d(be)?be(s):be,De),me=(be,De={})=>{const Re=cr(n,be),qe=Re&&Re._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),De.shouldSelect&&_d(Ze.select)&&Ze.select())}},Te=be=>{r={...r,...be}},We={control:{register:ce,unregister:le,getFieldState:te,handleSubmit:ne,setError:H,_subscribe:Z,_runSchema:E,_focusError:fe,_getWatch:O,_getDirty:D,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:_,_getFieldArray:L,_reset:Fe,_resetDefaultValues:()=>_d(t.defaultValues)&&t.defaultValues().then(be=>{Se(be,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Ie,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(be){i=be},get _defaultValues(){return a},get _names(){return o},set _names(be){o=be},get _formState(){return r},get _options(){return t},set _options(be){t={...t,...be}}},subscribe:ae,trigger:G,register:ce,handleSubmit:ne,watch:X,setValue:V,getValues:Y,reset:Se,resetField:_e,clearErrors:P,unregister:le,setError:H,setFocus:me,getFieldState:te};return{...We,formControl:We}}var T0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},o6=(e,t,r={})=>r.shouldFocus||Ja(r.shouldFocus)?r.focusName||`${e}.${Ja(r.focusIndex)?t:r.focusIndex}.`:"",l6=(e,t)=>[...e,...Zl(t)],c6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function u6(e,t,r){return[...e.slice(0,t),...Zl(r),...e.slice(t)]}var d6=(e,t,r)=>Array.isArray(e)?(Ja(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],A6=(e,t)=>[...Zl(t),...Zl(e)];function Oht(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return cj(n).length?n:[]}var f6=(e,t)=>Ja(t)?[]:Oht(e,Zl(t).sort((r,n)=>r-n)),h6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},yY=(e,t,r)=>(e[t]=r,e);function Dht(e){const t=xht(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,c]=nt.useState(r._getFieldArray(n)),u=nt.useRef(r._getFieldArray(n).map(T0)),d=nt.useRef(o),f=nt.useRef(!1);d.current=o,r._names.array.add(n),nt.useMemo(()=>i&&r.register(n,i),[r,i,n]),gAe(()=>r._subjects.array.subscribe({next:({values:k,name:I})=>{if(I===n||!I){const E=cr(k,n);Array.isArray(E)&&(c(E),u.current=E.map(T0))}}}).unsubscribe,[r,n]);const h=nt.useCallback(k=>{f.current=!0,r._setFieldArray(n,k)},[r,n]),p=(k,I)=>{const E=Zl(Ya(k)),N=l6(r._getFieldArray(n),E);r._names.focus=o6(n,N.length-1,I),u.current=l6(u.current,E.map(T0)),h(N),c(N),r._setFieldArray(n,N,l6,{argA:c6(k)})},g=(k,I)=>{const E=Zl(Ya(k)),N=A6(r._getFieldArray(n),E);r._names.focus=o6(n,0,I),u.current=A6(u.current,E.map(T0)),h(N),c(N),r._setFieldArray(n,N,A6,{argA:c6(k)})},x=k=>{const I=f6(r._getFieldArray(n),k);u.current=f6(u.current,k),h(I),c(I),!Array.isArray(cr(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,I,f6,{argA:k})},b=(k,I,E)=>{const N=Zl(Ya(I)),B=u6(r._getFieldArray(n),k,N);r._names.focus=o6(n,k,E),u.current=u6(u.current,k,N.map(T0)),h(B),c(B),r._setFieldArray(n,B,u6,{argA:k,argB:c6(I)})},y=(k,I)=>{const E=r._getFieldArray(n);h6(E,k,I),h6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,h6,{argA:k,argB:I},!1)},w=(k,I)=>{const E=r._getFieldArray(n);d6(E,k,I),d6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,d6,{argA:k,argB:I},!1)},_=(k,I)=>{const E=Ya(I),N=yY(r._getFieldArray(n),k,E);u.current=[...N].map((B,R)=>!B||R===k?T0():u.current[R]),h(N),c([...N]),r._setFieldArray(n,N,yY,{argA:k,argB:E},!0,!1)},j=k=>{const I=Zl(Ya(k));u.current=I.map(T0),h([...I]),c([...I]),r._setFieldArray(n,[...I],E=>E,{},!0,!1)};return nt.useEffect(()=>{if(r._state.action=!1,pD(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!bv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!bv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(k=>{const I=cr(k.errors,n),E=cr(r._formState.errors,n);(E?!I&&E.type||I&&(E.type!==I.type||E.message!==I.message):I&&I.type)&&(I?Fa(r._formState.errors,n,I):Us(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const k=cr(r._fields,n);k&&k._f&&!(bv(r._options.reValidateMode).isOnSubmit&&bv(r._options.mode).isOnSubmit)&&gD(k,r._names.disabled,r._formValues,r._options.criteriaMode===Fu.all,r._options.shouldUseNativeValidation,!0).then(I=>!hl(I)&&r._subjects.state.next({errors:CAe(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:Ya(r._formValues)}),r._names.focus&&Vv(r._fields,(k,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&k.focus)return k.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),nt.useEffect(()=>(!cr(r._formValues,n)&&r._setFieldArray(n),()=>{const k=(I,E)=>{const N=cr(r._fields,I);N&&N._f&&(N._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):k(n,!1)}),[n,r,a,s]),{swap:nt.useCallback(y,[h,n,r]),move:nt.useCallback(w,[h,n,r]),prepend:nt.useCallback(g,[h,n,r]),append:nt.useCallback(p,[h,n,r]),remove:nt.useCallback(x,[h,n,r]),insert:nt.useCallback(b,[h,n,r]),update:nt.useCallback(_,[h,n,r]),replace:nt.useCallback(j,[h,n,r]),fields:nt.useMemo(()=>o.map((k,I)=>({...k,[a]:u.current[I]||T0()})),[o,a])}}function Pht(e={}){const t=nt.useRef(void 0),r=nt.useRef(void 0),[n,a]=nt.useState({isDirty:!1,isValidating:!1,isLoading:_d(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:_d(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!_d(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=Fht(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,gAe(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),nt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),nt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),nt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),nt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),nt.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),nt.useEffect(()=>{e.values&&!z0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),nt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=vht(n,s),t.current}const xD=yt(Tr,"alternancias");async function Rht(e){return(await vn(xD,{...e,createdAt:Si(),updatedAt:Si()})).id}async function Lht({especialidad:e,pageSize:t=10,lastDoc:r}){let n=zt(xD,gr("createdAt","desc"),Fd(t));e&&(n=zt(xD,Dr("especialidad","==",e),gr("createdAt","desc"),Fd(t))),r&&(n=zt(n,qZ(r)));const a=await Qn(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function Mht(e,t){const r=sr(Tr,"alternancias",e);await Kc(r,{...t,updatedAt:Si()})}async function Uht(e){const t=sr(Tr,"alternancias",e);await za(t)}async function Qht(e,t,r){const n=yt(Tr,"alternancias",e,t);await vn(n,{...r,createdAt:Si()})}async function Hht(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=L2(kP,r);await _P(n,t);const a=await C4(n);return await Qht(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const bp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return l.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),l.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},jA=({children:e,hint:t})=>l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&l.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),q_=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},yp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return l.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},Vht=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState(!1),{register:o,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=Pht({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=Dht({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||x.some(M=>b.includes(M))))return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[l.jsx(Xwe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=M=>(M||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),_=(M,J)=>{var V;return!M||!J?[]:((V=Kbe[M])==null?void 0:V[J])??[]},j=f("especialidad"),k=f("modulos")||[],I=S.useMemo(()=>j?zbe[j]??[]:[],[j]),E=S.useMemo(()=>j?Gbe[j]??[]:[],[j]);S.useEffect(()=>{h("curso",[]),h("modulos",[]);const M=[...f("actividades")||[]].map(J=>({...J,modulo:"",oa:""}));h("actividades",M)},[j]),S.useEffect(()=>{const M=[...f("actividades")||[]].map(J=>J.modulo&&!k.includes(J.modulo)?{...J,modulo:"",oa:""}:J);h("actividades",M)},[k]);const N=async()=>{i(!0);const{items:M}=await Lht({});r(M),i(!1)};S.useEffect(()=>{N()},[]);const B=async M=>{n?await Mht(n,{...M}):await Rht({...M,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await N()},R=M=>{const J=Array.isArray(M.curso)?M.curso:M.curso?[M.curso]:[],V=Array.isArray(M.modulos)?M.modulos.map(z=>w(z)):[],K=Array.isArray(M.actividades)?M.actividades.map(z=>({...z,modulo:z!=null&&z.modulo?w(z.modulo):"",oa:(z==null?void 0:z.oa)||""})):[];d({...M,curso:J,modulos:V,actividades:K}),a(M.id),window.scrollTo({top:0,behavior:"smooth"})},D=async M=>{confirm("¿Eliminar esta alternancia?")&&(await Uht(M),await N())},O=async(M,J)=>{await Hht(M,J),alert("Evidencia subida correctamente")},L=M=>{const J=Array.from(M.currentTarget.selectedOptions).map(V=>V.value);h("curso",J,{shouldDirty:!0})};return l.jsxs("div",{className:"p-4 md:p-6",children:[l.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:l.jsx(Cee,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),l.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(yp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[l.jsx(cN,{className:"w-4 h-4"}),"Limpiar"]}),l.jsxs(yp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(K0,{className:"w-4 h-4 animate-spin"}):l.jsx(vh,{className:"w-4 h-4"}),"Guardar"]})]})]})}),l.jsx(bp,{title:"Planes guardados",icon:l.jsx(Ag,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(K0,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?l.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(M=>l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[l.jsx(zB,{className:"w-4 h-4 text-indigo-600"}),M.especialidad]}),l.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[l.jsx(q_,{tone:"indigo",children:Array.isArray(M.curso)?M.curso.join(", "):M.curso}),l.jsx(q_,{tone:"sky",children:M.institucion}),(Array.isArray(M.tipoAlternancia)?M.tipoAlternancia:[]).slice(0,2).map(J=>l.jsx(q_,{tone:"emerald",children:J},J))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[l.jsx(U2,{className:"w-4 h-4"}),l.jsx("input",{type:"file",className:"hidden",onChange:J=>J.target.files&&O(M.id,J.target.files[0])}),"Evidencia"]}),l.jsxs(yp,{title:"Editar",onClick:()=>R(M),children:[l.jsx($6,{className:"w-4 h-4"})," Editar"]}),l.jsxs(yp,{title:"Eliminar",onClick:()=>D(M.id),tone:"danger",children:[l.jsx(Eo,{className:"w-4 h-4"})," Eliminar"]})]})]})},M.id))})}),l.jsxs("form",{onSubmit:u(B),className:"mt-6 space-y-5",children:[l.jsx(bp,{title:"Contexto de la Alternancia",icon:l.jsx(sN,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(jA,{children:"Especialidad"}),l.jsxs("div",{className:"relative",children:[l.jsx(zB,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),Hbe.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{children:[l.jsx(jA,{children:"Institución"}),l.jsxs("div",{className:"relative",children:[l.jsx(sN,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),Vbe.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{children:[l.jsx(jA,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),l.jsxs("div",{className:"relative",children:[l.jsx(ec,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:L,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!j,children:j?I.map(M=>l.jsx("option",{value:M,children:M},M)):l.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(M=>l.jsx(q_,{tone:"sky",children:M},M))})]})]})}),l.jsx(bp,{title:"Módulos implicados",icon:l.jsx(FP,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:j?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(M=>l.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:M,className:"mt-1 accent-emerald-600",...o("modulos")}),l.jsx("span",{className:"text-sm text-slate-700",children:M})]},M))}):l.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),l.jsx(bp,{title:"Tipo de Alternancia",icon:l.jsx(nw,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:l.jsx("div",{className:"flex gap-3 flex-wrap",children:$be.map(M=>l.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:M,className:"accent-amber-600",...o("tipoAlternancia")}),l.jsx("span",{className:"text-slate-700",children:M})]},M))})}),l.jsx(bp,{title:"Fundamentación técnico‑pedagógica",icon:l.jsx(uye,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),l.jsx(bp,{title:"Plan de actividades",icon:l.jsx(Ag,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"space-y-3",children:[g.fields.map((M,J)=>{const V=f(`actividades.${J}.modulo`)||"",K=_(j,V);return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(jA,{children:"Fecha"}),l.jsx(Mu,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{type:"date",placeholder:"Fecha",...o(`actividades.${J}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(jA,{children:"Tipo"}),l.jsx("input",{placeholder:"Pasantía, visita, taller...",...o(`actividades.${J}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(jA,{children:"Actividad"}),l.jsx("input",{placeholder:"Descripción breve",...o(`actividades.${J}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(jA,{children:"Lugar"}),l.jsx(oN,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...o(`actividades.${J}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(jA,{children:"Evidencias"}),l.jsx(Hye,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...o(`actividades.${J}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx(jA,{children:"Módulo"}),l.jsxs("select",{...o(`actividades.${J}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!j||k.length===0,children:[l.jsx("option",{value:"",children:!j&&"Elige especialidad arriba"||k.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),k.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx(jA,{children:"Objetivo de Aprendizaje (OA)"}),l.jsxs("select",{...o(`actividades.${J}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!V||K.length===0,children:[l.jsx("option",{value:"",children:V?K.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),K.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsxs(yp,{title:"Eliminar fila",onClick:()=>g.remove(J),tone:"danger",children:[l.jsx(Eo,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},M.id)}),l.jsxs(yp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[l.jsx(Uu,{className:"w-4 h-4"})," Agregar actividad"]})]})}),l.jsx(bp,{title:"Análisis Curricular",icon:l.jsx(zB,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),l.jsx("div",{className:"flex items-center justify-end gap-2",children:l.jsxs(yp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(K0,{className:"w-4 h-4 animate-spin"}):l.jsx(Xi,{className:"w-4 h-4"}),"Guardar"]})})]})]})},vD=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],zht={INCIPIENTE:25},$ht=["AULA","TALLER","EMPRESA"],wY={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Ght="tp_especialidades",Kht="tp_modulos",qht="tp_resultados_aprendizaje",Wht="tp_criterios_evaluacion",bD="tp_rubricas",_Ae="tp_evidencias",NAe="tp_evaluaciones_comp",yD="config_evaluacion/competencias",EY=()=>Date.now(),SAe=async()=>{const e=await Og(sr(Tr,yD));return e.exists()?e.data():(await pi(sr(Tr,yD),wY),wY)},Xht=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const i=(s-r)/(a-0||1);return Number((r+i*(e-0)).toFixed(1))}else{const i=(n-s)/(100-a||1);return Number((s+i*(e-a)).toFixed(1))}},Yht=async(e,t)=>{const r=await SAe();let n=0,a=0;Object.entries(t).forEach(([o,c])=>{a+=c;const u=e[o],d=(u==null?void 0:u.puntaje)??zht.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,i=Xht(s,r);return{puntajeTotal:n,porcentaje:s,nota:i}},Jht=e=>{const t=zt(yt(Tr,Ght),gr("nombre"));return fr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},Zht=async e=>{const t=zt(yt(Tr,Kht),Dr("especialidadId","==",e),gr("nombre"));return(await Qn(t)).docs.map(n=>({id:n.id,...n.data()}))},e0t=async e=>{const t=zt(yt(Tr,qht),Dr("moduloId","==",e),gr("codigo"));return(await Qn(t)).docs.map(n=>({id:n.id,...n.data()}))},t0t=async e=>{const t=zt(yt(Tr,Wht),Dr("raId","==",e),gr("codigo"));return(await Qn(t)).docs.map(n=>({id:n.id,...n.data()}))},r0t=async e=>e.id?(await Kc(sr(Tr,bD,e.id),{...e,updatedAt:EY()}),e.id):(await vn(yt(Tr,bD),{...e,updatedAt:EY()})).id,kAe=async e=>{const t=zt(yt(Tr,bD),Dr("raId","==",e)),n=(await Qn(t)).docs[0];return n?{id:n.id,...n.data()}:null},n0t=async(e,t)=>{const r=L2(kP,t),n=await _P(r,e);return{url:await C4(n.ref),path:n.ref.fullPath}},a0t=e=>vn(yt(Tr,_Ae),e),s0t=(e,t)=>{const r=zt(yt(Tr,_Ae),Dr("raId","==",e),gr("fecha","desc"));return fr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},i0t=async e=>{const t=await kAe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await Yht(e.ceIdScores,r);return vn(yt(Tr,NAe),{...e,puntajeTotal:n,porcentaje:a,nota:s})},o0t=(e,t)=>{const r=zt(yt(Tr,NAe),Dr("raId","==",e),gr("fecha","desc"));return fr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},l0t=async e=>{const t=await SAe();await pi(sr(Tr,yD),{...t,...e},{merge:!0})},c0t=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,i]=S.useState(null);if(S.useEffect(()=>{i(e?r??{id:"",raId:e,niveles:vD,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return l.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const o=(f,h)=>{i(p=>p&&{...p,ponderacionCE:{...p.ponderacionCE,[f]:h}})},c=(f,h,p)=>{i(g=>{if(!g)return g;const x=g.descriptores.filter(b=>!(b.ceId===f&&b.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:p,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=S.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await r0t(s);n==null||n(f)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),l.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),l.jsx("div",{className:"space-y-4",children:t.map(f=>l.jsxs("div",{className:"border rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),l.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>o(f.id,Number(h.target.value))}),l.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:vD.map(h=>{const p=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return l.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),l.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(p==null?void 0:p.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[l.jsx(vh,{className:"w-4 h-4"}),l.jsx("span",{children:"Guardar rúbrica"})]})})]})},u0t=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState("AULA"),[u,d]=S.useState(null),[f,h]=S.useState(""),[p,g]=S.useState(!1);if(!e)return l.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const b=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${b}`,{url:w,path:_}=await n0t(u,y);await a0t({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:d0t(u.name),fecha:Date.now(),autorId:t.id,contexto:o,observaciones:f,storagePath:_}),d(null),h(""),a(""),i("")}finally{g(!1)}}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[l.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:b=>a(b.target.value)}),l.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:b=>i(b.target.value)}),l.jsxs("select",{className:"border rounded-xl px-3 py-2",value:o,onChange:b=>c(b.target.value),children:[l.jsx("option",{value:"AULA",children:"AULA"}),l.jsx("option",{value:"TALLER",children:"TALLER"}),l.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),l.jsx("input",{type:"file",onChange:b=>{var y;return d(((y=b.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),l.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:b=>h(b.target.value)}),l.jsxs("button",{onClick:x,disabled:p||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${p||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[l.jsx(U2,{className:"w-4 h-4"}),l.jsx("span",{children:"Subir evidencia"})]}),l.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(b=>l.jsxs("a",{href:b.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[A0t(b.tipo),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium",children:new Date(b.fecha).toLocaleString()}),l.jsxs("div",{className:"text-xs text-slate-500",children:[b.contexto," — Est.: ",b.estudianteId]})]})]}),b.observaciones&&l.jsx("div",{className:"text-xs text-slate-600 mt-2",children:b.observaciones})]},b.id))})]})},d0t=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},A0t=e=>{switch(e){case"imagen":return l.jsx(iwe,{className:"w-5 h-5 text-rose-600"});case"video":return l.jsx(Gye,{className:"w-5 h-5 text-indigo-600"});case"documento":return l.jsx(Dd,{className:"w-5 h-5 text-emerald-600"});default:return l.jsx(U2,{className:"w-5 h-5 text-slate-500"})}},CY=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],f0t=({raId:e})=>{const[t,r]=S.useState([]);if(S.useEffect(()=>{if(!e){r([]);return}const i=o0t(e,r);return()=>i()},[e]),!e)return l.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=S.useMemo(()=>{const i={};return t.forEach(o=>{const c=o.curso||"—";i[c]||(i[c]={curso:c,promedio:0,n:0}),i[c].promedio+=o.nota,i[c].n+=1}),Object.values(i).map(o=>({curso:o.curso,promedio:Number((o.promedio/(o.n||1)).toFixed(2)),n:o.n}))},[t]),a=S.useMemo(()=>{const i={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(o=>{o.nota<4?i["1.0-3.9"]++:o.nota<5?i["4.0-4.9"]++:o.nota<6?i["5.0-5.9"]++:i["6.0-7.0"]++}),Object.entries(i).map(([o,c])=>({rango:o,value:c}))},[t]),s=()=>{const i=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),o=yl.book_new(),c=yl.json_to_sheet(i);yl.book_append_sheet(o,c,"Evaluaciones_RA"),kk(o,`evaluaciones_${e}.xlsx`)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[l.jsx(Sd,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),l.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[l.jsx(wm,{className:"w-4 h-4"}),l.jsx("span",{children:"Descargar CSV"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx("div",{className:"h-72 border rounded-xl p-3",children:l.jsx(th,{width:"100%",height:"100%",children:l.jsxs(Jw,{data:n,children:[l.jsx(vg,{dataKey:"curso"}),l.jsx(bg,{domain:[1,7]}),l.jsx(eh,{}),l.jsx(f1,{dataKey:"promedio"})]})})}),l.jsx("div",{className:"h-72 border rounded-xl p-3",children:l.jsx(th,{width:"100%",height:"100%",children:l.jsxs(GL,{children:[l.jsx(uk,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((i,o)=>l.jsx(_m,{fill:CY[o%CY.length]},`c-${o}`))}),l.jsx(eh,{}),l.jsx(V1,{})]})})})]}),l.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Ny=({active:e,onClick:t,icon:r,label:n})=>l.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,l.jsx("span",{className:"font-medium",children:n})]}),Yx=({children:e,className:t})=>l.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),h0t=({currentUser:e})=>{const[t,r]=S.useState("planificacion"),[n,a]=S.useState([]),[s,i]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState({}),[p,g]=S.useState(null),[x,b]=S.useState([]);S.useEffect(()=>{const w=Jht(a);return()=>w()},[]),S.useEffect(()=>{f.especialidadId?Zht(f.especialidadId).then(i):i([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),S.useEffect(()=>{f.moduloId?e0t(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),S.useEffect(()=>{if(f.raId){t0t(f.raId).then(d),kAe(f.raId).then(g);const w=s0t(f.raId,b);return()=>w()}else d([]),g(null),b([])},[f.raId]);const y=f.raId&&u.length>0;return l.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[l.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(FP,{className:"w-6 h-6 text-indigo-600"}),l.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ny,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:l.jsx(Ag,{className:"w-4 h-4"}),label:"Planificar"}),l.jsx(Ny,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:l.jsx(Hwe,{className:"w-4 h-4"}),label:"Evaluar"}),l.jsx(Ny,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:l.jsx(U2,{className:"w-4 h-4"}),label:"Evidencias"}),l.jsx(Ny,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:l.jsx(Sd,{className:"w-4 h-4"}),label:"Dashboard"}),l.jsx(Ny,{active:t==="config",onClick:()=>r("config"),icon:l.jsx(qwe,{className:"w-4 h-4"}),label:"Config"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[l.jsx(Yx,{children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),l.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>l.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),l.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(_=>({..._,moduloId:w.target.value})),children:[l.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>l.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),l.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(_=>({..._,raId:w.target.value})),children:[l.jsx("option",{value:"",children:"— Selecciona —"}),o.map(w=>l.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&l.jsx(Yx,{children:l.jsx(c0t,{raId:f.raId,ces:u,rubrica:p,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&l.jsxs(Yx,{children:[!y&&l.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&l.jsx(m0t,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&l.jsx(Yx,{children:l.jsx(u0t,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&l.jsx(Yx,{children:l.jsx(f0t,{raId:f.raId})}),t==="config"&&l.jsx(Yx,{children:l.jsx(p0t,{})})]})]})},m0t=({raId:e,ces:t,currentUser:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(r.curso||""),[o,c]=S.useState("AULA"),[u,d]=S.useState(""),[f,h]=S.useState({}),p=(b,y,w)=>{h(_=>({..._,[b]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const b={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:o,retroalimentacion:u};await i0t(b),d(""),h({}),a("")};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),l.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:b=>a(b.target.value),placeholder:"rut_o_uid"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),l.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:b=>i(b.target.value),placeholder:"p.ej. 3ºB"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),l.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:o,onChange:b=>c(b.target.value),children:$ht.map(b=>l.jsx("option",{value:b,children:b},b))})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[l.jsx(Xi,{className:"w-4 h-4"}),l.jsx("span",{children:"Guardar evaluación"})]})})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(b=>l.jsxs("div",{className:"border rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h4",{className:"font-semibold text-slate-800",children:[b.codigo," — ",b.descriptor]}),l.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",b.peso,"%"]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:vD.map(y=>{var w;return l.jsx("button",{onClick:()=>p(b.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[b.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},b.id))}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),l.jsx("textarea",{value:u,onChange:b=>d(b.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},p0t=()=>{const[e,t]=S.useState(60),[r,n]=S.useState(4),a=async()=>{await l0t({porcentajeAprobacion:e,notaAprobacion:r})};return l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),l.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),l.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),l.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},g0t=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},x0t=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=S.useMemo(()=>{const j=Lbe[o]||[];return o!==Wt.ESTUDIANTE?j:j.filter(k=>{if(k.name==="Asistencia a Empresa"){const I=g0t(e.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=S.useState(null),[f,h]=S.useState(!1),[p,g]=S.useState(!1),x=S.useRef([]);S.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const b=S.useCallback(j=>{d(j),window.innerWidth<768&&h(!1)},[]),y=S.useCallback(j=>{const k=c.find(I=>I.name===j);k&&b(k)},[c,b]),w=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:l.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:l.jsx(wbe,{className:"w-5 h-5"})})}),!p&&l.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),l.jsx("button",{type:"button",onClick:()=>g(j=>!j),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:p?"Expandir":"Colapsar",children:p?l.jsx(BP,{className:"w-5 h-5 text-slate-200"}):l.jsx(Pw,{className:"w-5 h-5 text-slate-200"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:j=>{var I,E,N;const k=x.current.findIndex(B=>B===document.activeElement);if(j.key==="ArrowDown"){j.preventDefault();const B=Math.min(k===-1?0:k+1,x.current.length-1);(I=x.current[B])==null||I.focus()}else if(j.key==="ArrowUp"){j.preventDefault();const B=Math.max(k===-1?0:k-1,0);(E=x.current[B])==null||E.focus()}else j.key==="Enter"&&k>=0&&((N=x.current[k])==null||N.click())},children:l.jsx("div",{className:"space-y-1",children:c.map((j,k)=>{const I=(u==null?void 0:u.name)===j.name;return l.jsxs("button",{ref:E=>x.current[k]=E,onClick:()=>b(j),className:`w-full group flex items-center ${p?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${I?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:p?j.name:void 0,children:[l.jsx("span",{className:`shrink-0 ${I?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:j.icon}),!p&&l.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:j.name})]},j.name)})})})]}),_=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return l.jsx(jLe,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(OLe,{currentUser:e});if(u.name==="Mensajería Interna")return l.jsx(mJe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(HLe,{});if(u.name==="Desarrollo Profesional")return l.jsx(fht,{currentUser:e});if(o===Wt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(X2e,{currentUser:e});if(u.name==="Administración")return l.jsx(AXe,{});if(u.name==="Seguimiento Curricular")return l.jsx(ait,{currentUser:e});if(u.name==="Acompañamiento docente")return l.jsx(oJe,{currentUser:e});if(u.name==="Análisis Taxonómico")return l.jsx(uit,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(Bq,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx($2e,{currentUser:e});if(u.name==="Crear horarios")return l.jsx(FEe,{});if(u.name==="Seguimiento de acciones pedagógicas")return l.jsx(lLe,{});if(u.name==="Inclusión")return l.jsx(_q,{currentUser:e})}if(o===Wt.PROFESORADO){if(u.name==="Planificación")return l.jsx(yLe,{currentUser:e});if(u.name==="Mis Acompañamientos")return l.jsx(Rst,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return l.jsx(Est,{});if(u.name==="Análisis Taxonómico")return l.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(Bq,{});if(u.name==="Inclusión")return l.jsx(_q,{currentUser:e});if(u.name==="Actividades Remotas")return l.jsx(HXe,{});if(u.name==="Evaluación de Aprendizajes")return l.jsx(VMe,{});if(u.name==="Evaluaciones Formativas")return l.jsx(HYe,{currentUser:e});if(u.name==="Evaluación de Competencias")return l.jsx(h0t,{currentUser:e})}if(o===Wt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(wXe,{});if(u.name==="Asistencia Dual")return l.jsx(NYe,{});if(u.name==="Pañol")return l.jsx(PJe,{});if(u.name==="Gestión de Empresas")return l.jsx(Kft,{});if(u.name==="Alternancia TP")return l.jsx(Vht,{})}if(o===Wt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(nYe,{currentUser:e});if(u.name==="Evaluación Formativa")return l.jsx(Bst,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return l.jsx(Dst,{currentUser:e});if(u.name==="Asistencia a Empresa")return l.jsx(xYe,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[l.jsx(_2e,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(j=>!j),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&l.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${p?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:l.jsx(w,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:l.jsx(Nwe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&l.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),l.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},v0t=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),l.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),l.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(jP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:Rbe.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),l.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),b0t=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(null),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{const w=iJ(M2,async _=>{if(t(_),_)try{const j=await bee(_.email);j?(n(j),j.profile===Wt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await LB())}catch{o("Error al conectar con la base de datos."),await LB()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>w()},[]);const h=async(w,_)=>{if(o(null),!w.trim()||!_.trim()){o("Por favor ingrese email y contraseña");return}try{await xbe(w.trim(),_)}catch(j){switch(j.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async w=>{try{await vbe(w)}catch(_){console.error("Error al enviar email de recuperación:",_)}},g=w=>{f(w),u(!1)},x=()=>{u(!0),f(null)},b=async()=>{try{await LB()}catch(w){console.error("Error al cerrar sesión:",w)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(jP,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return l.jsx(qbe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(c&&r.profile===Wt.SUBDIRECCION)return l.jsx(v0t,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return l.jsx(x0t,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===Wt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===Wt.SUBDIRECCION})},jAe=document.getElementById("root");if(!jAe)throw new Error("Could not find root element to mount to");const y0t=Gfe.createRoot(jAe);y0t.render(l.jsx(nt.StrictMode,{children:l.jsx(b0t,{})}));export{pa as _,E0t as c,_l as g};
