var nme=Object.defineProperty;var sme=(e,t,r)=>t in e?nme(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var yB=(e,t,r)=>sme(e,typeof t!="symbol"?t+"":t,r);function ime(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var jxt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ml(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ome(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),r}var wB={exports:{}},Fy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dQ;function lme(){if(dQ)return Fy;dQ=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var l in n)l!=="key"&&(i[l]=n[l])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:i}}return Fy.Fragment=t,Fy.jsx=r,Fy.jsxs=r,Fy}var fQ;function cme(){return fQ||(fQ=1,wB.exports=lme()),wB.exports}var s=cme(),NB={exports:{}},aa={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AQ;function ume(){if(AQ)return aa;AQ=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(W,Z,M){this.props=W,this.context=Z,this.refs=x,this.updater=M||m}v.prototype.isReactComponent={},v.prototype.setState=function(W,Z){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Z,"setState")},v.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function y(){}y.prototype=v.prototype;function N(W,Z,M){this.props=W,this.context=Z,this.refs=x,this.updater=M||m}var C=N.prototype=new y;C.constructor=N,g(C,v.prototype),C.isPureReactComponent=!0;var T=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function j(W,Z,M,F,X,Y){return M=Y.ref,{$$typeof:e,type:W,key:Z,ref:M!==void 0?M:null,props:Y}}function S(W,Z){return j(W.type,Z,void 0,void 0,void 0,W.props)}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function L(W){var Z={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(M){return Z[M]})}var D=/\/+/g;function k(W,Z){return typeof W=="object"&&W!==null&&W.key!=null?L(""+W.key):Z.toString(36)}function R(){}function U(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(R,R):(W.status="pending",W.then(function(Z){W.status==="pending"&&(W.status="fulfilled",W.value=Z)},function(Z){W.status==="pending"&&(W.status="rejected",W.reason=Z)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function H(W,Z,M,F,X){var Y=typeof W;(Y==="undefined"||Y==="boolean")&&(W=null);var ae=!1;if(W===null)ae=!0;else switch(Y){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(W.$$typeof){case e:case t:ae=!0;break;case d:return ae=W._init,H(ae(W._payload),Z,M,F,X)}}if(ae)return X=X(W),ae=F===""?"."+k(W,0):F,T(X)?(M="",ae!=null&&(M=ae.replace(D,"$&/")+"/"),H(X,Z,M,"",function(ne){return ne})):X!=null&&(B(X)&&(X=S(X,M+(X.key==null||W&&W.key===X.key?"":(""+X.key).replace(D,"$&/")+"/")+ae)),Z.push(X)),1;ae=0;var le=F===""?".":F+":";if(T(W))for(var ie=0;ie<W.length;ie++)F=W[ie],Y=le+k(F,ie),ae+=H(F,Z,M,Y,X);else if(ie=h(W),typeof ie=="function")for(W=ie.call(W),ie=0;!(F=W.next()).done;)F=F.value,Y=le+k(F,ie++),ae+=H(F,Z,M,Y,X);else if(Y==="object"){if(typeof W.then=="function")return H(U(W),Z,M,F,X);throw Z=String(W),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ae}function Q(W,Z,M){if(W==null)return W;var F=[],X=0;return H(W,F,"","",function(Y){return Z.call(M,Y,X++)}),F}function V(W){if(W._status===-1){var Z=W._result;Z=Z(),Z.then(function(M){(W._status===0||W._status===-1)&&(W._status=1,W._result=M)},function(M){(W._status===0||W._status===-1)&&(W._status=2,W._result=M)}),W._status===-1&&(W._status=0,W._result=Z)}if(W._status===1)return W._result.default;throw W._result}var G=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function J(){}return aa.Children={map:Q,forEach:function(W,Z,M){Q(W,function(){Z.apply(this,arguments)},M)},count:function(W){var Z=0;return Q(W,function(){Z++}),Z},toArray:function(W){return Q(W,function(Z){return Z})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},aa.Component=v,aa.Fragment=r,aa.Profiler=n,aa.PureComponent=N,aa.StrictMode=a,aa.Suspense=c,aa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,aa.__COMPILER_RUNTIME={__proto__:null,c:function(W){return _.H.useMemoCache(W)}},aa.cache=function(W){return function(){return W.apply(null,arguments)}},aa.cloneElement=function(W,Z,M){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var F=g({},W.props),X=W.key,Y=void 0;if(Z!=null)for(ae in Z.ref!==void 0&&(Y=void 0),Z.key!==void 0&&(X=""+Z.key),Z)!O.call(Z,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&Z.ref===void 0||(F[ae]=Z[ae]);var ae=arguments.length-2;if(ae===1)F.children=M;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];F.children=le}return j(W.type,X,void 0,void 0,Y,F)},aa.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:i,_context:W},W},aa.createElement=function(W,Z,M){var F,X={},Y=null;if(Z!=null)for(F in Z.key!==void 0&&(Y=""+Z.key),Z)O.call(Z,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(X[F]=Z[F]);var ae=arguments.length-2;if(ae===1)X.children=M;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];X.children=le}if(W&&W.defaultProps)for(F in ae=W.defaultProps,ae)X[F]===void 0&&(X[F]=ae[F]);return j(W,Y,void 0,void 0,null,X)},aa.createRef=function(){return{current:null}},aa.forwardRef=function(W){return{$$typeof:l,render:W}},aa.isValidElement=B,aa.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:V}},aa.memo=function(W,Z){return{$$typeof:u,type:W,compare:Z===void 0?null:Z}},aa.startTransition=function(W){var Z=_.T,M={};_.T=M;try{var F=W(),X=_.S;X!==null&&X(M,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(J,G)}catch(Y){G(Y)}finally{_.T=Z}},aa.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},aa.use=function(W){return _.H.use(W)},aa.useActionState=function(W,Z,M){return _.H.useActionState(W,Z,M)},aa.useCallback=function(W,Z){return _.H.useCallback(W,Z)},aa.useContext=function(W){return _.H.useContext(W)},aa.useDebugValue=function(){},aa.useDeferredValue=function(W,Z){return _.H.useDeferredValue(W,Z)},aa.useEffect=function(W,Z,M){var F=_.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(W,Z)},aa.useId=function(){return _.H.useId()},aa.useImperativeHandle=function(W,Z,M){return _.H.useImperativeHandle(W,Z,M)},aa.useInsertionEffect=function(W,Z){return _.H.useInsertionEffect(W,Z)},aa.useLayoutEffect=function(W,Z){return _.H.useLayoutEffect(W,Z)},aa.useMemo=function(W,Z){return _.H.useMemo(W,Z)},aa.useOptimistic=function(W,Z){return _.H.useOptimistic(W,Z)},aa.useReducer=function(W,Z,M){return _.H.useReducer(W,Z,M)},aa.useRef=function(W){return _.H.useRef(W)},aa.useState=function(W){return _.H.useState(W)},aa.useSyncExternalStore=function(W,Z,M){return _.H.useSyncExternalStore(W,Z,M)},aa.useTransition=function(){return _.H.useTransition()},aa.version="19.1.1",aa}var hQ;function c1(){return hQ||(hQ=1,NB.exports=ume()),NB.exports}var w=c1();const ct=Ml(w),dme=ime({__proto__:null,default:ct},[w]);var CB={exports:{}},Dy={},EB={exports:{}},jB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mQ;function fme(){return mQ||(mQ=1,function(e){function t(Q,V){var G=Q.length;Q.push(V);e:for(;0<G;){var J=G-1>>>1,W=Q[J];if(0<n(W,V))Q[J]=V,Q[G]=W,G=J;else break e}}function r(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var V=Q[0],G=Q.pop();if(G!==V){Q[0]=G;e:for(var J=0,W=Q.length,Z=W>>>1;J<Z;){var M=2*(J+1)-1,F=Q[M],X=M+1,Y=Q[X];if(0>n(F,G))X<W&&0>n(Y,F)?(Q[J]=Y,Q[X]=G,J=X):(Q[J]=F,Q[M]=G,J=M);else if(X<W&&0>n(Y,G))Q[J]=Y,Q[X]=G,J=X;else break e}}return V}function n(Q,V){var G=Q.sortIndex-V.sortIndex;return G!==0?G:Q.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function T(Q){for(var V=r(u);V!==null;){if(V.callback===null)a(u);else if(V.startTime<=Q)a(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(u)}}function _(Q){if(x=!1,T(Q),!g)if(r(c)!==null)g=!0,O||(O=!0,k());else{var V=r(u);V!==null&&H(_,V.startTime-Q)}}var O=!1,j=-1,S=5,B=-1;function L(){return v?!0:!(e.unstable_now()-B<S)}function D(){if(v=!1,O){var Q=e.unstable_now();B=Q;var V=!0;try{e:{g=!1,x&&(x=!1,N(j),j=-1),m=!0;var G=h;try{t:{for(T(Q),f=r(c);f!==null&&!(f.expirationTime>Q&&L());){var J=f.callback;if(typeof J=="function"){f.callback=null,h=f.priorityLevel;var W=J(f.expirationTime<=Q);if(Q=e.unstable_now(),typeof W=="function"){f.callback=W,T(Q),V=!0;break t}f===r(c)&&a(c),T(Q)}else a(c);f=r(c)}if(f!==null)V=!0;else{var Z=r(u);Z!==null&&H(_,Z.startTime-Q),V=!1}}break e}finally{f=null,h=G,m=!1}V=void 0}}finally{V?k():O=!1}}}var k;if(typeof C=="function")k=function(){C(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,U=R.port2;R.port1.onmessage=D,k=function(){U.postMessage(null)}}else k=function(){y(D,0)};function H(Q,V){j=y(function(){Q(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var G=h;h=V;try{return Q()}finally{h=G}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(Q,V){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var G=h;h=Q;try{return V()}finally{h=G}},e.unstable_scheduleCallback=function(Q,V,G){var J=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,Q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=G+W,Q={id:d++,callback:V,priorityLevel:Q,startTime:G,expirationTime:W,sortIndex:-1},G>J?(Q.sortIndex=G,t(u,Q),r(c)===null&&Q===r(u)&&(x?(N(j),j=-1):x=!0,H(_,G-J))):(Q.sortIndex=W,t(c,Q),g||m||(g=!0,O||(O=!0,k()))),Q},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Q){var V=h;return function(){var G=h;h=V;try{return Q.apply(this,arguments)}finally{h=G}}}}(jB)),jB}var pQ;function Ame(){return pQ||(pQ=1,EB.exports=fme()),EB.exports}var kB={exports:{}},$o={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gQ;function hme(){if(gQ)return $o;gQ=1;var e=c1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return $o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,$o.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(c,u,null,d)},$o.flushSync=function(c){var u=o.T,d=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=u,a.p=d,a.d.f()}},$o.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(c,u))},$o.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},$o.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?a.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&a.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},$o.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);a.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(c)},$o.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);a.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},$o.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);a.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(c)},$o.requestFormReset=function(c){a.d.r(c)},$o.unstable_batchedUpdates=function(c,u){return c(u)},$o.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},$o.useFormStatus=function(){return o.H.useHostTransitionStatus()},$o.version="19.1.1",$o}var xQ;function mZ(){if(xQ)return kB.exports;xQ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kB.exports=hme(),kB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vQ;function mme(){if(vQ)return Dy;vQ=1;var e=Ame(),t=c1(),r=mZ();function a(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function i(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function o(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function l(A){if(i(A)!==A)throw Error(a(188))}function c(A){var p=A.alternate;if(!p){if(p=i(A),p===null)throw Error(a(188));return p!==A?null:A}for(var b=A,E=p;;){var z=b.return;if(z===null)break;var ee=z.alternate;if(ee===null){if(E=z.return,E!==null){b=E;continue}break}if(z.child===ee.child){for(ee=z.child;ee;){if(ee===b)return l(z),A;if(ee===E)return l(z),p;ee=ee.sibling}throw Error(a(188))}if(b.return!==E.return)b=z,E=ee;else{for(var pe=!1,Ie=z.child;Ie;){if(Ie===b){pe=!0,b=z,E=ee;break}if(Ie===E){pe=!0,E=z,b=ee;break}Ie=Ie.sibling}if(!pe){for(Ie=ee.child;Ie;){if(Ie===b){pe=!0,b=ee,E=z;break}if(Ie===E){pe=!0,E=ee,b=z;break}Ie=Ie.sibling}if(!pe)throw Error(a(189))}}if(b.alternate!==E)throw Error(a(190))}if(b.tag!==3)throw Error(a(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var R=Symbol.for("react.client.reference");function U(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===R?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case _:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case C:return(A.displayName||"Context")+".Provider";case N:return(A._context.displayName||"Context")+".Consumer";case T:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case j:return p=A.displayName||null,p!==null?p:U(A.type)||"Memo";case S:p=A._payload,A=A._init;try{return U(A(p))}catch{}}return null}var H=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},J=[],W=-1;function Z(A){return{current:A}}function M(A){0>W||(A.current=J[W],J[W]=null,W--)}function F(A,p){W++,J[W]=A.current,A.current=p}var X=Z(null),Y=Z(null),ae=Z(null),le=Z(null);function ie(A,p){switch(F(ae,p),F(Y,A),F(X,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?M9(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=M9(p),A=U9(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}M(X),F(X,A)}function ne(){M(X),M(Y),M(ae)}function oe(A){A.memoizedState!==null&&F(le,A);var p=X.current,b=U9(p,A.type);p!==b&&(F(Y,A),F(X,b))}function we(A){Y.current===A&&(M(X),M(Y)),le.current===A&&(M(le),_y._currentValue=G)}var K=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,_e=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,de=e.unstable_requestPaint,xe=e.unstable_now,he=e.unstable_getCurrentPriorityLevel,ye=e.unstable_ImmediatePriority,ce=e.unstable_UserBlockingPriority,Ae=e.unstable_NormalPriority,Ne=e.unstable_LowPriority,Pe=e.unstable_IdlePriority,Qe=e.log,$e=e.unstable_setDisableYieldValue,et=null,Ke=null;function Ge(A){if(typeof Qe=="function"&&$e(A),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(et,A)}catch{}}var nt=Math.clz32?Math.clz32:ze,bt=Math.log,ut=Math.LN2;function ze(A){return A>>>=0,A===0?32:31-(bt(A)/ut|0)|0}var Tt=256,ir=4194304;function Kt(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Cr(A,p,b){var E=A.pendingLanes;if(E===0)return 0;var z=0,ee=A.suspendedLanes,pe=A.pingedLanes;A=A.warmLanes;var Ie=E&134217727;return Ie!==0?(E=Ie&~ee,E!==0?z=Kt(E):(pe&=Ie,pe!==0?z=Kt(pe):b||(b=Ie&~A,b!==0&&(z=Kt(b))))):(Ie=E&~ee,Ie!==0?z=Kt(Ie):pe!==0?z=Kt(pe):b||(b=E&~A,b!==0&&(z=Kt(b)))),z===0?0:p!==0&&p!==z&&(p&ee)===0&&(ee=z&-z,b=p&-p,ee>=b||ee===32&&(b&4194048)!==0)?p:z}function $r(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function br(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(){var A=Tt;return Tt<<=1,(Tt&4194048)===0&&(Tt=256),A}function Pr(){var A=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),A}function Ra(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function Dn(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Rr(A,p,b,E,z,ee){var pe=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var Ie=A.entanglements,qe=A.expirationTimes,mt=A.hiddenUpdates;for(b=pe&~b;0<b;){var Bt=31-nt(b),Rt=1<<Bt;Ie[Bt]=0,qe[Bt]=-1;var xt=mt[Bt];if(xt!==null)for(mt[Bt]=null,Bt=0;Bt<xt.length;Bt++){var vt=xt[Bt];vt!==null&&(vt.lane&=-536870913)}b&=~Rt}E!==0&&pr(A,E,0),ee!==0&&z===0&&A.tag!==0&&(A.suspendedLanes|=ee&~(pe&~p))}function pr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var E=31-nt(p);A.entangledLanes|=p,A.entanglements[E]=A.entanglements[E]|1073741824|b&4194090}function Jr(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var E=31-nt(b),z=1<<E;z&p|A[E]&p&&(A[E]|=p),b&=~z}}function gs(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Za(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Pn(){var A=V.p;return A!==0?A:(A=window.event,A===void 0?32:sQ(A.type))}function Us(A,p){var b=V.p;try{return V.p=A,p()}finally{V.p=b}}var er=Math.random().toString(36).slice(2),xa="__reactFiber$"+er,la="__reactProps$"+er,Ia="__reactContainer$"+er,Wa="__reactEvents$"+er,en="__reactListeners$"+er,je="__reactHandles$"+er,Ue="__reactResources$"+er,De="__reactMarker$"+er;function Le(A){delete A[xa],delete A[la],delete A[Wa],delete A[en],delete A[je]}function ge(A){var p=A[xa];if(p)return p;for(var b=A.parentNode;b;){if(p=b[Ia]||b[xa]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=V9(A);A!==null;){if(b=A[xa])return b;A=V9(A)}return p}A=b,b=A.parentNode}return null}function me(A){if(A=A[xa]||A[Ia]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function Oe(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(a(33))}function He(A){var p=A[Ue];return p||(p=A[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Re(A){A[De]=!0}var We=new Set,Ye={};function wt(A,p){Nt(A,p),Nt(A+"Capture",p)}function Nt(A,p){for(Ye[A]=p,A=0;A<p.length;A++)We.add(p[A])}var zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},Vt={};function jr(A){return K.call(Vt,A)?!0:K.call(Ot,A)?!1:zt.test(A)?Vt[A]=!0:(Ot[A]=!0,!1)}function ea(A,p,b){if(jr(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function ta(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function ia(A,p,b,E){if(E===null)A.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+E)}}var xs,Fo;function vs(A){if(xs===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);xs=p&&p[1]||"",Fo=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+A+Fo}var ci=!1;function Qs(A,p){if(!A||ci)return"";ci=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(vt){var xt=vt}Reflect.construct(A,[],Rt)}else{try{Rt.call()}catch(vt){xt=vt}A.call(Rt.prototype)}}else{try{throw Error()}catch(vt){xt=vt}(Rt=A())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(vt){if(vt&&xt&&typeof vt.stack=="string")return[vt.stack,xt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=E.DetermineComponentFrameRoot(),pe=ee[0],Ie=ee[1];if(pe&&Ie){var qe=pe.split(`
`),mt=Ie.split(`
`);for(z=E=0;E<qe.length&&!qe[E].includes("DetermineComponentFrameRoot");)E++;for(;z<mt.length&&!mt[z].includes("DetermineComponentFrameRoot");)z++;if(E===qe.length||z===mt.length)for(E=qe.length-1,z=mt.length-1;1<=E&&0<=z&&qe[E]!==mt[z];)z--;for(;1<=E&&0<=z;E--,z--)if(qe[E]!==mt[z]){if(E!==1||z!==1)do if(E--,z--,0>z||qe[E]!==mt[z]){var Bt=`
`+qe[E].replace(" at new "," at ");return A.displayName&&Bt.includes("<anonymous>")&&(Bt=Bt.replace("<anonymous>",A.displayName)),Bt}while(1<=E&&0<=z);break}}}finally{ci=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?vs(b):""}function ki(A){switch(A.tag){case 26:case 27:case 5:return vs(A.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 15:return Qs(A.type,!1);case 11:return Qs(A.type.render,!1);case 1:return Qs(A.type,!0);case 31:return vs("Activity");default:return""}}function yn(A){try{var p="";do p+=ki(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ui(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function gf(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function g0(A){var p=gf(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),E=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var z=b.get,ee=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return z.call(this)},set:function(pe){E=""+pe,ee.call(this,pe)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(pe){E=""+pe},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function pu(A){A._valueTracker||(A._valueTracker=g0(A))}function FA(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return A&&(E=gf(A)?A.checked?"true":"false":A.value),A=E,A!==b?(p.setValue(A),!0):!1}function Si(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var xf=/[\n"\\]/g;function ja(A){return A.replace(xf,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function _i(A,p,b,E,z,ee,pe,Ie){A.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?A.type=pe:A.removeAttribute("type"),p!=null?pe==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+ui(p)):A.value!==""+ui(p)&&(A.value=""+ui(p)):pe!=="submit"&&pe!=="reset"||A.removeAttribute("value"),p!=null?xu(A,pe,ui(p)):b!=null?xu(A,pe,ui(b)):E!=null&&A.removeAttribute("value"),z==null&&ee!=null&&(A.defaultChecked=!!ee),z!=null&&(A.checked=z&&typeof z!="function"&&typeof z!="symbol"),Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"&&typeof Ie!="boolean"?A.name=""+ui(Ie):A.removeAttribute("name")}function gu(A,p,b,E,z,ee,pe,Ie){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(A.type=ee),p!=null||b!=null){if(!(ee!=="submit"&&ee!=="reset"||p!=null))return;b=b!=null?""+ui(b):"",p=p!=null?""+ui(p):b,Ie||p===A.value||(A.value=p),A.defaultValue=p}E=E??z,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=Ie?A.checked:!!E,A.defaultChecked=!!E,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(A.name=pe)}function xu(A,p,b){p==="number"&&Si(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Ql(A,p,b,E){if(A=A.options,p){p={};for(var z=0;z<b.length;z++)p["$"+b[z]]=!0;for(b=0;b<A.length;b++)z=p.hasOwnProperty("$"+A[b].value),A[b].selected!==z&&(A[b].selected=z),z&&E&&(A[b].defaultSelected=!0)}else{for(b=""+ui(b),p=null,z=0;z<A.length;z++){if(A[z].value===b){A[z].selected=!0,E&&(A[z].defaultSelected=!0);return}p!==null||A[z].disabled||(p=A[z])}p!==null&&(p.selected=!0)}}function La(A,p,b){if(p!=null&&(p=""+ui(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+ui(b):""}function vu(A,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(a(92));if(H(E)){if(1<E.length)throw Error(a(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=ui(p),A.defaultValue=b,E=A.textContent,E===b&&E!==""&&E!==null&&(A.value=E)}function Do(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function x0(A,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":E?A.setProperty(p,b):typeof b!="number"||b===0||jc.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function DA(A,p,b){if(p!=null&&typeof p!="object")throw Error(a(62));if(A=A.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var z in p)E=p[z],p.hasOwnProperty(z)&&b[z]!==E&&x0(A,z,E)}else for(var ee in p)p.hasOwnProperty(ee)&&x0(A,ee,p[ee])}function PA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sc(A){return vf.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Hl=null;function fn(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var _c=null,zl=null;function Br(A){var p=me(A);if(p&&(A=p.stateNode)){var b=A[la]||null;e:switch(A=p.stateNode,p.type){case"input":if(_i(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+ja(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==A&&E.form===A.form){var z=E[la]||null;if(!z)throw Error(a(90));_i(E,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===A.form&&FA(E)}break e;case"textarea":La(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Ql(A,!!b.multiple,p,!1)}}}var Vl=!1;function v0(A,p,b){if(Vl)return A(p,b);Vl=!0;try{var E=A(p);return E}finally{if(Vl=!1,(_c!==null||zl!==null)&&(KC(),_c&&(p=_c,A=zl,zl=_c=null,Br(p),A)))for(p=0;p<A.length;p++)Br(A[p])}}function $i(A,p){var b=A.stateNode;if(b===null)return null;var E=b[la]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(a(231,p,typeof b));return b}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=!1;if(Po)try{var $l={};Object.defineProperty($l,"passive",{get:function(){ho=!0}}),window.addEventListener("test",$l,$l),window.removeEventListener("test",$l,$l)}catch{ho=!1}var Ro=null,bu=null,Bc=null;function RA(){if(Bc)return Bc;var A,p=bu,b=p.length,E,z="value"in Ro?Ro.value:Ro.textContent,ee=z.length;for(A=0;A<b&&p[A]===z[A];A++);var pe=b-A;for(E=1;E<=pe&&p[b-E]===z[ee-E];E++);return Bc=z.slice(A,1<E?1-E:void 0)}function Lo(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function Gi(){return!0}function Gl(){return!1}function bs(A){function p(b,E,z,ee,pe){this._reactName=b,this._targetInst=z,this.type=E,this.nativeEvent=ee,this.target=pe,this.currentTarget=null;for(var Ie in A)A.hasOwnProperty(Ie)&&(b=A[Ie],this[Ie]=b?b(ee):ee[Ie]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Gi:Gl,this.isPropagationStopped=Gl,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),p}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yu=bs(Aa),ql=d({},Aa,{view:0,detail:0}),LA=bs(ql),Ad,hd,wl,qi=d({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==wl&&(wl&&A.type==="mousemove"?(Ad=A.screenX-wl.screenX,hd=A.screenY-wl.screenY):hd=Ad=0,wl=A),Ad)},movementY:function(A){return"movementY"in A?A.movementY:hd}}),ys=bs(qi),b0=d({},qi,{dataTransfer:0}),wu=bs(b0),Bi=d({},ql,{relatedTarget:0}),Nu=bs(Bi),Tc=d({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),bf=bs(Tc),md=d({},Aa,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),yf=bs(md),MA=d({},Aa,{data:0}),pd=bs(MA),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xd(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=wf[A])?!!p[A]:!1}function Eu(){return xd}var y0=d({},ql,{key:function(A){if(A.key){var p=Cu[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=Lo(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?gd[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(A){return A.type==="keypress"?Lo(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Lo(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Ic=bs(y0),ju=d({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vd=bs(ju),Ki=d({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),Nf=bs(Ki),te=d({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=bs(te),Ve=d({},qi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=bs(Ve),st=d({},Aa,{newState:0,oldState:0}),Ct=bs(st),Qt=[9,13,27,32],Jt=Po&&"CompositionEvent"in window,P=null;Po&&"documentMode"in document&&(P=document.documentMode);var se=Po&&"TextEvent"in window&&!P,fe=Po&&(!Jt||P&&8<P&&11>=P),Te=" ",at=!1;function ht(A,p){switch(A){case"keyup":return Qt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ht(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Tr=!1;function ha(A,p){switch(A){case"compositionend":return Ht(p);case"keypress":return p.which!==32?null:(at=!0,Te);case"textInput":return A=p.data,A===Te&&at?null:A;default:return null}}function Gr(A,p){if(Tr)return A==="compositionend"||!Jt&&ht(A,p)?(A=RA(),Bc=bu=Ro=null,Tr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return fe&&p.locale!=="ko"?null:p.data;default:return null}}var Ma={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!Ma[A.type]:p==="textarea"}function Kl(A,p,b,E){_c?zl?zl.push(E):zl=[E]:_c=E,p=eE(p,"onChange"),0<p.length&&(b=new yu("onChange","change",null,b,E),A.push({event:b,listeners:p}))}var ss=null,Mo=null;function ku(A){F9(A,0)}function Cf(A){var p=Oe(A);if(FA(p))return A}function w0(A,p){if(A==="change")return p}var UA=!1;if(Po){var Hs;if(Po){var Ef="oninput"in document;if(!Ef){var QA=document.createElement("div");QA.setAttribute("oninput","return;"),Ef=typeof QA.oninput=="function"}Hs=Ef}else Hs=!1;UA=Hs&&(!document.documentMode||9<document.documentMode)}function HA(){ss&&(ss.detachEvent("onpropertychange",N0),Mo=ss=null)}function N0(A){if(A.propertyName==="value"&&Cf(Mo)){var p=[];Kl(p,Mo,A,fn(A)),v0(ku,p)}}function Uo(A,p,b){A==="focusin"?(HA(),ss=p,Mo=b,ss.attachEvent("onpropertychange",N0)):A==="focusout"&&HA()}function X1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Cf(Mo)}function wp(A,p){if(A==="click")return Cf(p)}function vx(A,p){if(A==="input"||A==="change")return Cf(p)}function Wl(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var di=typeof Object.is=="function"?Object.is:Wl;function jf(A,p){if(di(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var z=b[E];if(!K.call(p,z)||!di(A[z],p[z]))return!1}return!0}function Np(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function bd(A,p){var b=Np(A);A=0;for(var E;b;){if(b.nodeType===3){if(E=A+b.textContent.length,A<=p&&E>=p)return{node:b,offset:p-A};A=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Np(b)}}function kf(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?kf(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function mo(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=Si(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=Si(A.document)}return p}function Ti(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var Sf=Po&&"documentMode"in document&&11>=document.documentMode,Qo=null,Oc=null,Su=null,Fc=!1;function Yn(A,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Fc||Qo==null||Qo!==Si(E)||(E=Qo,"selectionStart"in E&&Ti(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Su&&jf(Su,E)||(Su=E,E=eE(Oc,"onSelect"),0<E.length&&(p=new yu("onSelect","select",null,p,b),A.push({event:p,listeners:E}),p.target=Qo)))}function Dc(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var ws={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionrun:Dc("Transition","TransitionRun"),transitionstart:Dc("Transition","TransitionStart"),transitioncancel:Dc("Transition","TransitionCancel"),transitionend:Dc("Transition","TransitionEnd")},Ho={},zA={};Po&&(zA=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function _u(A){if(Ho[A])return Ho[A];if(!ws[A])return A;var p=ws[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in zA)return Ho[A]=p[b];return A}var C0=_u("animationend"),_f=_u("animationiteration"),Bf=_u("animationstart"),Tf=_u("transitionrun"),VA=_u("transitionstart"),E0=_u("transitioncancel"),If=_u("transitionend"),yd=new Map,$A="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$A.push("scrollEnd");function Jn(A,p){yd.set(A,p),wt(p,[A])}var Nl=new WeakMap;function ca(A,p){if(typeof A=="object"&&A!==null){var b=Nl.get(A);return b!==void 0?b:(p={value:A,source:p,stack:yn(p)},Nl.set(A,p),p)}return{value:A,source:p,stack:yn(p)}}var ua=[],wn=0,is=0;function Xl(){for(var A=wn,p=is=wn=0;p<A;){var b=ua[p];ua[p++]=null;var E=ua[p];ua[p++]=null;var z=ua[p];ua[p++]=null;var ee=ua[p];if(ua[p++]=null,E!==null&&z!==null){var pe=E.pending;pe===null?z.next=z:(z.next=pe.next,pe.next=z),E.pending=z}ee!==0&&bx(b,z,ee)}}function Of(A,p,b,E){ua[wn++]=A,ua[wn++]=p,ua[wn++]=b,ua[wn++]=E,is|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function Ff(A,p,b,E){return Of(A,p,b,E),GA(A)}function wd(A,p){return Of(A,null,null,p),GA(A)}function bx(A,p,b){A.lanes|=b;var E=A.alternate;E!==null&&(E.lanes|=b);for(var z=!1,ee=A.return;ee!==null;)ee.childLanes|=b,E=ee.alternate,E!==null&&(E.childLanes|=b),ee.tag===22&&(A=ee.stateNode,A===null||A._visibility&1||(z=!0)),A=ee,ee=ee.return;return A.tag===3?(ee=A.stateNode,z&&p!==null&&(z=31-nt(b),A=ee.hiddenUpdates,E=A[z],E===null?A[z]=[p]:E.push(p),p.lane=b|536870912),ee):null}function GA(A){if(50<yy)throw yy=0,$3=null,Error(a(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var fi={};function Yl(A,p,b,E){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(A,p,b,E){return new Yl(A,p,b,E)}function j0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Bu(A,p){var b=A.alternate;return b===null?(b=Wi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function Cp(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function qA(A,p,b,E,z,ee){var pe=0;if(E=A,typeof A=="function")j0(A)&&(pe=1);else if(typeof A=="string")pe=$0e(A,b,X.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Wi(31,b,p,z),A.elementType=B,A.lanes=ee,A;case g:return Nd(b.children,z,ee,p);case x:pe=8,z|=24;break;case v:return A=Wi(12,b,p,z|2),A.elementType=v,A.lanes=ee,A;case _:return A=Wi(13,b,p,z),A.elementType=_,A.lanes=ee,A;case O:return A=Wi(19,b,p,z),A.elementType=O,A.lanes=ee,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case C:pe=10;break e;case N:pe=9;break e;case T:pe=11;break e;case j:pe=14;break e;case S:pe=16,E=null;break e}pe=29,b=Error(a(130,A===null?"null":typeof A,"")),E=null}return p=Wi(pe,b,p,z),p.elementType=A,p.type=E,p.lanes=ee,p}function Nd(A,p,b,E){return A=Wi(7,A,E,p),A.lanes=b,A}function yx(A,p,b){return A=Wi(6,A,null,p),A.lanes=b,A}function Ep(A,p,b){return p=Wi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var Df=[],Cd=0,k0=null,wx=0,Jl=[],Cl=0,KA=null,Ed=1,jd="";function WA(A,p){Df[Cd++]=wx,Df[Cd++]=k0,k0=A,wx=p}function xC(A,p,b){Jl[Cl++]=Ed,Jl[Cl++]=jd,Jl[Cl++]=KA,KA=A;var E=Ed;A=jd;var z=32-nt(E)-1;E&=~(1<<z),b+=1;var ee=32-nt(p)+z;if(30<ee){var pe=z-z%5;ee=(E&(1<<pe)-1).toString(32),E>>=pe,z-=pe,Ed=1<<32-nt(p)+z|b<<z|E,jd=ee+A}else Ed=1<<ee|b<<z|E,jd=A}function jp(A){A.return!==null&&(WA(A,1),xC(A,1,0))}function kp(A){for(;A===k0;)k0=Df[--Cd],Df[Cd]=null,wx=Df[--Cd],Df[Cd]=null;for(;A===KA;)KA=Jl[--Cl],Jl[Cl]=null,jd=Jl[--Cl],Jl[Cl]=null,Ed=Jl[--Cl],Jl[Cl]=null}var zs=null,Zn=null,Oa=!1,Pf=null,Tu=!1,Y1=Error(a(519));function XA(A){var p=Error(a(418,""));throw S0(ca(p,A)),Y1}function vC(A){var p=A.stateNode,b=A.type,E=A.memoizedProps;switch(p[xa]=A,p[la]=E,b){case"dialog":ba("cancel",p),ba("close",p);break;case"iframe":case"object":case"embed":ba("load",p);break;case"video":case"audio":for(b=0;b<Ny.length;b++)ba(Ny[b],p);break;case"source":ba("error",p);break;case"img":case"image":case"link":ba("error",p),ba("load",p);break;case"details":ba("toggle",p);break;case"input":ba("invalid",p),gu(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),pu(p);break;case"select":ba("invalid",p);break;case"textarea":ba("invalid",p),vu(p,E.value,E.defaultValue,E.children),pu(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||L9(p.textContent,b)?(E.popover!=null&&(ba("beforetoggle",p),ba("toggle",p)),E.onScroll!=null&&ba("scroll",p),E.onScrollEnd!=null&&ba("scrollend",p),E.onClick!=null&&(p.onclick=tE),p=!0):p=!1,p||XA(A)}function kd(A){for(zs=A.return;zs;)switch(zs.tag){case 5:case 13:Tu=!1;return;case 27:case 3:Tu=!0;return;default:zs=zs.return}}function po(A){if(A!==zs)return!1;if(!Oa)return kd(A),Oa=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||oB(A.type,A.memoizedProps)),b=!b),b&&Zn&&XA(A),kd(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){Zn=Dd(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}Zn=null}}else p===27?(p=Zn,$0(A.type)?(A=dB,dB=null,Zn=A):Zn=p):Zn=zs?Dd(A.stateNode.nextSibling):null;return!0}function El(){Zn=zs=null,Oa=!1}function bC(){var A=Pf;return A!==null&&(tc===null?tc=A:tc.push.apply(tc,A),Pf=null),A}function S0(A){Pf===null?Pf=[A]:Pf.push(A)}var Iu=Z(null),Ai=null,Sd=null;function Rf(A,p,b){F(Iu,p._currentValue),p._currentValue=b}function Ou(A){A._currentValue=Iu.current,M(Iu)}function Nx(A,p,b){for(;A!==null;){var E=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),A===b)break;A=A.return}}function Cx(A,p,b,E){var z=A.child;for(z!==null&&(z.return=A);z!==null;){var ee=z.dependencies;if(ee!==null){var pe=z.child;ee=ee.firstContext;e:for(;ee!==null;){var Ie=ee;ee=z;for(var qe=0;qe<p.length;qe++)if(Ie.context===p[qe]){ee.lanes|=b,Ie=ee.alternate,Ie!==null&&(Ie.lanes|=b),Nx(ee.return,b,A),E||(pe=null);break e}ee=Ie.next}}else if(z.tag===18){if(pe=z.return,pe===null)throw Error(a(341));pe.lanes|=b,ee=pe.alternate,ee!==null&&(ee.lanes|=b),Nx(pe,b,A),pe=null}else pe=z.child;if(pe!==null)pe.return=z;else for(pe=z;pe!==null;){if(pe===A){pe=null;break}if(z=pe.sibling,z!==null){z.return=pe.return,pe=z;break}pe=pe.return}z=pe}}function _0(A,p,b,E){A=null;for(var z=p,ee=!1;z!==null;){if(!ee){if((z.flags&524288)!==0)ee=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var pe=z.alternate;if(pe===null)throw Error(a(387));if(pe=pe.memoizedProps,pe!==null){var Ie=z.type;di(z.pendingProps.value,pe.value)||(A!==null?A.push(Ie):A=[Ie])}}else if(z===le.current){if(pe=z.alternate,pe===null)throw Error(a(387));pe.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(A!==null?A.push(_y):A=[_y])}z=z.return}A!==null&&Cx(p,A,b,E),p.flags|=262144}function Ex(A){for(A=A.firstContext;A!==null;){if(!di(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Fu(A){Ai=A,Sd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Vs(A){return jx(Ai,A)}function Lf(A,p){return Ai===null&&Fu(A),jx(A,p)}function jx(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},Sd===null){if(A===null)throw Error(a(308));Sd=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else Sd=Sd.next=p;return b}var p3=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,E){A.push(E)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},yC=e.unstable_scheduleCallback,g3=e.unstable_NormalPriority,$s={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function J1(){return{controller:new p3,data:new Map,refCount:0}}function Sp(A){A.refCount--,A.refCount===0&&yC(g3,function(){A.controller.abort()})}var _p=null,Z1=0,YA=0,_d=null;function x3(A,p){if(_p===null){var b=_p=[];Z1=0,YA=J3(),_d={status:"pending",value:void 0,then:function(E){b.push(E)}}}return Z1++,p.then(wC,wC),p}function wC(){if(--Z1===0&&_p!==null){_d!==null&&(_d.status="fulfilled");var A=_p;_p=null,YA=0,_d=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function NC(A,p){var b=[],E={status:"pending",value:null,reason:null,then:function(z){b.push(z)}};return A.then(function(){E.status="fulfilled",E.value=p;for(var z=0;z<b.length;z++)(0,b[z])(p)},function(z){for(E.status="rejected",E.reason=z,z=0;z<b.length;z++)(0,b[z])(void 0)}),E}var I=Q.S;Q.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&x3(A,p),I!==null&&I(A,p)};var q=Z(null);function re(){var A=q.current;return A!==null?A:Ln.pooledCache}function ue(A,p){p===null?F(q,q.current):F(q,p.pool)}function ve(){var A=re();return A===null?null:{parent:$s._currentValue,pool:A}}var ke=Error(a(460)),Se=Error(a(474)),Be=Error(a(542)),Fe={then:function(){}};function Me(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Je(){}function At(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Je,Je),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Dt(A),A;default:if(typeof p.status=="string")p.then(Je,Je);else{if(A=Ln,A!==null&&100<A.shellSuspendCounter)throw Error(a(482));A=p,A.status="pending",A.then(function(E){if(p.status==="pending"){var z=p;z.status="fulfilled",z.value=E}},function(E){if(p.status==="pending"){var z=p;z.status="rejected",z.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Dt(A),A}throw dt=p,ke}}var dt=null;function it(){if(dt===null)throw Error(a(459));var A=dt;return dt=null,A}function Dt(A){if(A===ke||A===Be)throw Error(a(483))}var yt=!1;function Ze(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rt(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function St(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Pt(A,p,b){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(hn&2)!==0){var z=E.pending;return z===null?p.next=p:(p.next=z.next,z.next=p),E.pending=p,p=GA(A),bx(A,null,b),p}return Of(A,E,p,b),GA(A)}function It(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,Jr(A,b)}}function tr(A,p){var b=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var z=null,ee=null;if(b=b.firstBaseUpdate,b!==null){do{var pe={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};ee===null?z=ee=pe:ee=ee.next=pe,b=b.next}while(b!==null);ee===null?z=ee=p:ee=ee.next=p}else z=ee=p;b={baseState:E.baseState,firstBaseUpdate:z,lastBaseUpdate:ee,shared:E.shared,callbacks:E.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Yt=!1;function xr(){if(Yt){var A=_d;if(A!==null)throw A}}function Zt(A,p,b,E){Yt=!1;var z=A.updateQueue;yt=!1;var ee=z.firstBaseUpdate,pe=z.lastBaseUpdate,Ie=z.shared.pending;if(Ie!==null){z.shared.pending=null;var qe=Ie,mt=qe.next;qe.next=null,pe===null?ee=mt:pe.next=mt,pe=qe;var Bt=A.alternate;Bt!==null&&(Bt=Bt.updateQueue,Ie=Bt.lastBaseUpdate,Ie!==pe&&(Ie===null?Bt.firstBaseUpdate=mt:Ie.next=mt,Bt.lastBaseUpdate=qe))}if(ee!==null){var Rt=z.baseState;pe=0,Bt=mt=qe=null,Ie=ee;do{var xt=Ie.lane&-536870913,vt=xt!==Ie.lane;if(vt?(Ba&xt)===xt:(E&xt)===xt){xt!==0&&xt===YA&&(Yt=!0),Bt!==null&&(Bt=Bt.next={lane:0,tag:Ie.tag,payload:Ie.payload,callback:null,next:null});e:{var zr=A,Ir=Ie;xt=p;var Cn=b;switch(Ir.tag){case 1:if(zr=Ir.payload,typeof zr=="function"){Rt=zr.call(Cn,Rt,xt);break e}Rt=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Ir.payload,xt=typeof zr=="function"?zr.call(Cn,Rt,xt):zr,xt==null)break e;Rt=d({},Rt,xt);break e;case 2:yt=!0}}xt=Ie.callback,xt!==null&&(A.flags|=64,vt&&(A.flags|=8192),vt=z.callbacks,vt===null?z.callbacks=[xt]:vt.push(xt))}else vt={lane:xt,tag:Ie.tag,payload:Ie.payload,callback:Ie.callback,next:null},Bt===null?(mt=Bt=vt,qe=Rt):Bt=Bt.next=vt,pe|=xt;if(Ie=Ie.next,Ie===null){if(Ie=z.shared.pending,Ie===null)break;vt=Ie,Ie=vt.next,vt.next=null,z.lastBaseUpdate=vt,z.shared.pending=null}}while(!0);Bt===null&&(qe=Rt),z.baseState=qe,z.firstBaseUpdate=mt,z.lastBaseUpdate=Bt,ee===null&&(z.shared.lanes=0),Q0|=pe,A.lanes=pe,A.memoizedState=Rt}}function Sa(A,p){if(typeof A!="function")throw Error(a(191,A));A.call(p)}function Ua(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)Sa(b[A],p)}var oa=Z(null),ra=Z(0);function rn(A,p){A=oh,F(ra,A),F(oa,p),oh=A|p.baseLanes}function Qa(){F(ra,oh),F(oa,oa.current)}function qr(){oh=ra.current,M(oa),M(ra)}var An=0,kr=null,Lr=null,ka=null,_a=!1,hi=!1,Gs=!1,os=0,ls=0,Ns=null,Zl=0;function Ha(){throw Error(a(321))}function Cs(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!di(A[b],p[b]))return!1;return!0}function Pc(A,p,b,E,z,ee){return An=ee,kr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Q.H=A===null||A.memoizedState===null?xU:vU,Gs=!1,ee=b(E,z),Gs=!1,hi&&(ee=JA(p,b,E,z)),Mf(A),ee}function Mf(A){Q.H=DC;var p=Lr!==null&&Lr.next!==null;if(An=0,ka=Lr=kr=null,_a=!1,ls=0,Ns=null,p)throw Error(a(300));A===null||Xi||(A=A.dependencies,A!==null&&Ex(A)&&(Xi=!0))}function JA(A,p,b,E){kr=A;var z=0;do{if(hi&&(Ns=null),ls=0,hi=!1,25<=z)throw Error(a(301));if(z+=1,ka=Lr=null,A.updateQueue!=null){var ee=A.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}Q.H=r0e,ee=p(b,E)}while(hi);return ee}function Uf(){var A=Q.H,p=A.useState()[0];return p=typeof p.then=="function"?Qf(p):p,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(kr.flags|=1024),p}function Rn(){var A=os!==0;return os=0,A}function Bp(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function kx(A){if(_a){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}_a=!1}An=0,ka=Lr=kr=null,hi=!1,ls=os=0,Ns=null}function go(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?kr.memoizedState=ka=A:ka=ka.next=A,ka}function zn(){if(Lr===null){var A=kr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var p=ka===null?kr.memoizedState:ka.next;if(p!==null)ka=p,Lr=A;else{if(A===null)throw kr.alternate===null?Error(a(467)):Error(a(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},ka===null?kr.memoizedState=ka=A:ka=ka.next=A}return ka}function ZA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qf(A){var p=ls;return ls+=1,Ns===null&&(Ns=[]),A=At(Ns,A,p),p=kr,(ka===null?p.memoizedState:ka.next)===null&&(p=p.alternate,Q.H=p===null||p.memoizedState===null?xU:vU),A}function zo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Qf(A);if(A.$$typeof===C)return Vs(A)}throw Error(a(438,String(A)))}function Hf(A){var p=null,b=kr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=kr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(z){return z.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=ZA(),kr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),E=0;E<A;E++)b[E]=L;return p.index++,b}function Vo(A,p){return typeof p=="function"?p(A):p}function Tp(A){var p=zn();return B0(p,Lr,A)}function B0(A,p,b){var E=A.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=b;var z=A.baseQueue,ee=E.pending;if(ee!==null){if(z!==null){var pe=z.next;z.next=ee.next,ee.next=pe}p.baseQueue=z=ee,E.pending=null}if(ee=A.baseState,z===null)A.memoizedState=ee;else{p=z.next;var Ie=pe=null,qe=null,mt=p,Bt=!1;do{var Rt=mt.lane&-536870913;if(Rt!==mt.lane?(Ba&Rt)===Rt:(An&Rt)===Rt){var xt=mt.revertLane;if(xt===0)qe!==null&&(qe=qe.next={lane:0,revertLane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),Rt===YA&&(Bt=!0);else if((An&xt)===xt){mt=mt.next,xt===YA&&(Bt=!0);continue}else Rt={lane:0,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},qe===null?(Ie=qe=Rt,pe=ee):qe=qe.next=Rt,kr.lanes|=xt,Q0|=xt;Rt=mt.action,Gs&&b(ee,Rt),ee=mt.hasEagerState?mt.eagerState:b(ee,Rt)}else xt={lane:Rt,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},qe===null?(Ie=qe=xt,pe=ee):qe=qe.next=xt,kr.lanes|=Rt,Q0|=Rt;mt=mt.next}while(mt!==null&&mt!==p);if(qe===null?pe=ee:qe.next=Ie,!di(ee,A.memoizedState)&&(Xi=!0,Bt&&(b=_d,b!==null)))throw b;A.memoizedState=ee,A.baseState=pe,A.baseQueue=qe,E.lastRenderedState=ee}return z===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function Sx(A){var p=zn(),b=p.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=A;var E=b.dispatch,z=b.pending,ee=p.memoizedState;if(z!==null){b.pending=null;var pe=z=z.next;do ee=A(ee,pe.action),pe=pe.next;while(pe!==z);di(ee,p.memoizedState)||(Xi=!0),p.memoizedState=ee,p.baseQueue===null&&(p.baseState=ee),b.lastRenderedState=ee}return[ee,E]}function Ip(A,p,b){var E=kr,z=zn(),ee=Oa;if(ee){if(b===void 0)throw Error(a(407));b=b()}else b=p();var pe=!di((Lr||z).memoizedState,b);pe&&(z.memoizedState=b,Xi=!0),z=z.queue;var Ie=T0.bind(null,E,z,A);if(F0(2048,8,Ie,[A]),z.getSnapshot!==p||pe||ka!==null&&ka.memoizedState.tag&1){if(E.flags|=2048,Td(9,Pp(),Op.bind(null,E,z,b,p),null),Ln===null)throw Error(a(349));ee||(An&124)!==0||_x(E,p,b)}return b}function _x(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=kr.updateQueue,p===null?(p=ZA(),kr.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function Op(A,p,b,E){p.value=b,p.getSnapshot=E,CC(p)&&EC(A)}function T0(A,p,b){return b(function(){CC(p)&&EC(A)})}function CC(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!di(A,b)}catch{return!0}}function EC(A){var p=wd(A,2);p!==null&&Hc(p,A,2)}function Fp(A){var p=go();if(typeof A=="function"){var b=A;if(A=b(),Gs){Ge(!0);try{b()}finally{Ge(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:A},p}function Bd(A,p,b,E){return A.baseState=b,B0(A,Lr,typeof E=="function"?E:Vo)}function v3(A,p,b,E,z){if(FC(A))throw Error(a(485));if(A=p.action,A!==null){var ee={payload:z,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){ee.listeners.push(pe)}};Q.T!==null?b(!0):ee.isTransition=!1,E(ee),b=p.pending,b===null?(ee.next=p.pending=ee,jC(p,ee)):(ee.next=b.next,p.pending=b.next=ee)}}function jC(A,p){var b=p.action,E=p.payload,z=A.state;if(p.isTransition){var ee=Q.T,pe={};Q.T=pe;try{var Ie=b(z,E),qe=Q.S;qe!==null&&qe(pe,Ie),kC(A,p,Ie)}catch(mt){I0(A,p,mt)}finally{Q.T=ee}}else try{ee=b(z,E),kC(A,p,ee)}catch(mt){I0(A,p,mt)}}function kC(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){ey(A,p,E)},function(E){return I0(A,p,E)}):ey(A,p,b)}function ey(A,p,b){p.status="fulfilled",p.value=b,ty(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,jC(A,b)))}function I0(A,p,b){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,ty(p),p=p.next;while(p!==E)}A.action=null}function ty(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function ry(A,p){return p}function Dp(A,p){if(Oa){var b=Ln.formState;if(b!==null){e:{var E=kr;if(Oa){if(Zn){t:{for(var z=Zn,ee=Tu;z.nodeType!==8;){if(!ee){z=null;break t}if(z=Dd(z.nextSibling),z===null){z=null;break t}}ee=z.data,z=ee==="F!"||ee==="F"?z:null}if(z){Zn=Dd(z.nextSibling),E=z.data==="F!";break e}}XA(E)}E=!1}E&&(p=b[0])}}return b=go(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:p},b.queue=E,b=mU.bind(null,kr,E),E.dispatch=b,E=Fp(!1),ee=b3.bind(null,kr,!1,E.queue),E=go(),z={state:p,dispatch:null,action:A,pending:null},E.queue=z,b=v3.bind(null,kr,z,ee,b),z.dispatch=b,E.memoizedState=A,[p,b,!1]}function Bx(A){var p=zn();return O0(p,Lr,A)}function O0(A,p,b){if(p=B0(A,p,ry)[0],A=Tp(Vo)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Qf(p)}catch(pe){throw pe===ke?Be:pe}else E=p;p=zn();var z=p.queue,ee=z.dispatch;return b!==p.memoizedState&&(kr.flags|=2048,Td(9,Pp(),SC.bind(null,z,b),null)),[E,ee,A]}function SC(A,p){A.action=p}function _C(A){var p=zn(),b=Lr;if(b!==null)return O0(p,b,A);zn(),p=p.memoizedState,b=zn();var E=b.queue.dispatch;return b.memoizedState=A,[p,E,!1]}function Td(A,p,b,E){return A={tag:A,create:b,deps:E,inst:p,next:null},p=kr.updateQueue,p===null&&(p=ZA(),kr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(E=b.next,b.next=A,A.next=E,p.lastEffect=A),A}function Pp(){return{destroy:void 0,resource:void 0}}function Tx(){return zn().memoizedState}function Rc(A,p,b,E){var z=go();E=E===void 0?null:E,kr.flags|=A,z.memoizedState=Td(1|p,Pp(),b,E)}function F0(A,p,b,E){var z=zn();E=E===void 0?null:E;var ee=z.memoizedState.inst;Lr!==null&&E!==null&&Cs(E,Lr.memoizedState.deps)?z.memoizedState=Td(p,ee,b,E):(kr.flags|=A,z.memoizedState=Td(1|p,ee,b,E))}function ay(A,p){Rc(8390656,8,A,p)}function BC(A,p){F0(2048,8,A,p)}function ny(A,p){return F0(4,2,A,p)}function eh(A,p){return F0(4,4,A,p)}function TC(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function sy(A,p,b){b=b!=null?b.concat([A]):null,F0(4,4,TC.bind(null,p,A),b)}function iy(){}function oy(A,p){var b=zn();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&Cs(p,E[1])?E[0]:(b.memoizedState=[A,p],A)}function IC(A,p){var b=zn();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&Cs(p,E[1]))return E[0];if(E=A(),Gs){Ge(!0);try{A()}finally{Ge(!1)}}return b.memoizedState=[E,p],E}function th(A,p,b){return b===void 0||(An&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=d9(),kr.lanes|=A,Q0|=A,b)}function Ix(A,p,b,E){return di(b,p)?b:oa.current!==null?(A=th(A,b,E),di(A,p)||(Xi=!0),A):(An&42)===0?(Xi=!0,A.memoizedState=b):(A=d9(),kr.lanes|=A,Q0|=A,p)}function Rp(A,p,b,E,z){var ee=V.p;V.p=ee!==0&&8>ee?ee:8;var pe=Q.T,Ie={};Q.T=Ie,b3(A,!1,p,b);try{var qe=z(),mt=Q.S;if(mt!==null&&mt(Ie,qe),qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var Bt=NC(qe,E);dy(A,p,Bt,Qc(A))}else dy(A,p,E,Qc(A))}catch(Rt){dy(A,p,{then:function(){},status:"rejected",reason:Rt},Qc())}finally{V.p=ee,Q.T=pe}}function Id(){}function Du(A,p,b,E){if(A.tag!==5)throw Error(a(476));var z=Od(A).queue;Rp(A,z,p,G,b===null?Id:function(){return Lp(A),b(E)})}function Od(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:G},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function Lp(A){var p=Od(A).next.queue;dy(A,p,{},Qc())}function Mp(){return Vs(_y)}function ly(){return zn().memoizedState}function OC(){return zn().memoizedState}function cy(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=Qc();A=St(b);var E=Pt(p,A,b);E!==null&&(Hc(E,p,b),It(E,p,b)),p={cache:J1()},A.payload=p;return}p=p.return}}function uy(A,p,b){var E=Qc();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},FC(A)?pU(p,b):(b=Ff(A,p,b,E),b!==null&&(Hc(b,A,E),gU(b,p,E)))}function mU(A,p,b){var E=Qc();dy(A,p,b,E)}function dy(A,p,b,E){var z={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(FC(A))pU(p,z);else{var ee=A.alternate;if(A.lanes===0&&(ee===null||ee.lanes===0)&&(ee=p.lastRenderedReducer,ee!==null))try{var pe=p.lastRenderedState,Ie=ee(pe,b);if(z.hasEagerState=!0,z.eagerState=Ie,di(Ie,pe))return Of(A,p,z,0),Ln===null&&Xl(),!1}catch{}finally{}if(b=Ff(A,p,z,E),b!==null)return Hc(b,A,E),gU(b,p,E),!0}return!1}function b3(A,p,b,E){if(E={lane:2,revertLane:J3(),action:E,hasEagerState:!1,eagerState:null,next:null},FC(A)){if(p)throw Error(a(479))}else p=Ff(A,b,E,2),p!==null&&Hc(p,A,2)}function FC(A){var p=A.alternate;return A===kr||p!==null&&p===kr}function pU(A,p){hi=_a=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function gU(A,p,b){if((b&4194048)!==0){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,Jr(A,b)}}var DC={readContext:Vs,use:zo,useCallback:Ha,useContext:Ha,useEffect:Ha,useImperativeHandle:Ha,useLayoutEffect:Ha,useInsertionEffect:Ha,useMemo:Ha,useReducer:Ha,useRef:Ha,useState:Ha,useDebugValue:Ha,useDeferredValue:Ha,useTransition:Ha,useSyncExternalStore:Ha,useId:Ha,useHostTransitionStatus:Ha,useFormState:Ha,useActionState:Ha,useOptimistic:Ha,useMemoCache:Ha,useCacheRefresh:Ha},xU={readContext:Vs,use:zo,useCallback:function(A,p){return go().memoizedState=[A,p===void 0?null:p],A},useContext:Vs,useEffect:ay,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Rc(4194308,4,TC.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Rc(4194308,4,A,p)},useInsertionEffect:function(A,p){Rc(4,2,A,p)},useMemo:function(A,p){var b=go();p=p===void 0?null:p;var E=A();if(Gs){Ge(!0);try{A()}finally{Ge(!1)}}return b.memoizedState=[E,p],E},useReducer:function(A,p,b){var E=go();if(b!==void 0){var z=b(p);if(Gs){Ge(!0);try{b(p)}finally{Ge(!1)}}}else z=p;return E.memoizedState=E.baseState=z,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:z},E.queue=A,A=A.dispatch=uy.bind(null,kr,A),[E.memoizedState,A]},useRef:function(A){var p=go();return A={current:A},p.memoizedState=A},useState:function(A){A=Fp(A);var p=A.queue,b=mU.bind(null,kr,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:iy,useDeferredValue:function(A,p){var b=go();return th(b,A,p)},useTransition:function(){var A=Fp(!1);return A=Rp.bind(null,kr,A.queue,!0,!1),go().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var E=kr,z=go();if(Oa){if(b===void 0)throw Error(a(407));b=b()}else{if(b=p(),Ln===null)throw Error(a(349));(Ba&124)!==0||_x(E,p,b)}z.memoizedState=b;var ee={value:b,getSnapshot:p};return z.queue=ee,ay(T0.bind(null,E,ee,A),[A]),E.flags|=2048,Td(9,Pp(),Op.bind(null,E,ee,b,p),null),b},useId:function(){var A=go(),p=Ln.identifierPrefix;if(Oa){var b=jd,E=Ed;b=(E&~(1<<32-nt(E)-1)).toString(32)+b,p="«"+p+"R"+b,b=os++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=Zl++,p="«"+p+"r"+b.toString(32)+"»";return A.memoizedState=p},useHostTransitionStatus:Mp,useFormState:Dp,useActionState:Dp,useOptimistic:function(A){var p=go();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=b3.bind(null,kr,!0,b),b.dispatch=p,[A,p]},useMemoCache:Hf,useCacheRefresh:function(){return go().memoizedState=cy.bind(null,kr)}},vU={readContext:Vs,use:zo,useCallback:oy,useContext:Vs,useEffect:BC,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:eh,useMemo:IC,useReducer:Tp,useRef:Tx,useState:function(){return Tp(Vo)},useDebugValue:iy,useDeferredValue:function(A,p){var b=zn();return Ix(b,Lr.memoizedState,A,p)},useTransition:function(){var A=Tp(Vo)[0],p=zn().memoizedState;return[typeof A=="boolean"?A:Qf(A),p]},useSyncExternalStore:Ip,useId:ly,useHostTransitionStatus:Mp,useFormState:Bx,useActionState:Bx,useOptimistic:function(A,p){var b=zn();return Bd(b,Lr,A,p)},useMemoCache:Hf,useCacheRefresh:OC},r0e={readContext:Vs,use:zo,useCallback:oy,useContext:Vs,useEffect:BC,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:eh,useMemo:IC,useReducer:Sx,useRef:Tx,useState:function(){return Sx(Vo)},useDebugValue:iy,useDeferredValue:function(A,p){var b=zn();return Lr===null?th(b,A,p):Ix(b,Lr.memoizedState,A,p)},useTransition:function(){var A=Sx(Vo)[0],p=zn().memoizedState;return[typeof A=="boolean"?A:Qf(A),p]},useSyncExternalStore:Ip,useId:ly,useHostTransitionStatus:Mp,useFormState:_C,useActionState:_C,useOptimistic:function(A,p){var b=zn();return Lr!==null?Bd(b,Lr,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:OC},Ox=null,fy=0;function PC(A){var p=fy;return fy+=1,Ox===null&&(Ox=[]),At(Ox,A,p)}function Ay(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function RC(A,p){throw p.$$typeof===f?Error(a(525)):(A=Object.prototype.toString.call(p),Error(a(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function bU(A){var p=A._init;return p(A._payload)}function yU(A){function p(lt,tt){if(A){var ft=lt.deletions;ft===null?(lt.deletions=[tt],lt.flags|=16):ft.push(tt)}}function b(lt,tt){if(!A)return null;for(;tt!==null;)p(lt,tt),tt=tt.sibling;return null}function E(lt){for(var tt=new Map;lt!==null;)lt.key!==null?tt.set(lt.key,lt):tt.set(lt.index,lt),lt=lt.sibling;return tt}function z(lt,tt){return lt=Bu(lt,tt),lt.index=0,lt.sibling=null,lt}function ee(lt,tt,ft){return lt.index=ft,A?(ft=lt.alternate,ft!==null?(ft=ft.index,ft<tt?(lt.flags|=67108866,tt):ft):(lt.flags|=67108866,tt)):(lt.flags|=1048576,tt)}function pe(lt){return A&&lt.alternate===null&&(lt.flags|=67108866),lt}function Ie(lt,tt,ft,Ft){return tt===null||tt.tag!==6?(tt=yx(ft,lt.mode,Ft),tt.return=lt,tt):(tt=z(tt,ft),tt.return=lt,tt)}function qe(lt,tt,ft,Ft){var hr=ft.type;return hr===g?Bt(lt,tt,ft.props.children,Ft,ft.key):tt!==null&&(tt.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===S&&bU(hr)===tt.type)?(tt=z(tt,ft.props),Ay(tt,ft),tt.return=lt,tt):(tt=qA(ft.type,ft.key,ft.props,null,lt.mode,Ft),Ay(tt,ft),tt.return=lt,tt)}function mt(lt,tt,ft,Ft){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==ft.containerInfo||tt.stateNode.implementation!==ft.implementation?(tt=Ep(ft,lt.mode,Ft),tt.return=lt,tt):(tt=z(tt,ft.children||[]),tt.return=lt,tt)}function Bt(lt,tt,ft,Ft,hr){return tt===null||tt.tag!==7?(tt=Nd(ft,lt.mode,Ft,hr),tt.return=lt,tt):(tt=z(tt,ft),tt.return=lt,tt)}function Rt(lt,tt,ft){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=yx(""+tt,lt.mode,ft),tt.return=lt,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case h:return ft=qA(tt.type,tt.key,tt.props,null,lt.mode,ft),Ay(ft,tt),ft.return=lt,ft;case m:return tt=Ep(tt,lt.mode,ft),tt.return=lt,tt;case S:var Ft=tt._init;return tt=Ft(tt._payload),Rt(lt,tt,ft)}if(H(tt)||k(tt))return tt=Nd(tt,lt.mode,ft,null),tt.return=lt,tt;if(typeof tt.then=="function")return Rt(lt,PC(tt),ft);if(tt.$$typeof===C)return Rt(lt,Lf(lt,tt),ft);RC(lt,tt)}return null}function xt(lt,tt,ft,Ft){var hr=tt!==null?tt.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return hr!==null?null:Ie(lt,tt,""+ft,Ft);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case h:return ft.key===hr?qe(lt,tt,ft,Ft):null;case m:return ft.key===hr?mt(lt,tt,ft,Ft):null;case S:return hr=ft._init,ft=hr(ft._payload),xt(lt,tt,ft,Ft)}if(H(ft)||k(ft))return hr!==null?null:Bt(lt,tt,ft,Ft,null);if(typeof ft.then=="function")return xt(lt,tt,PC(ft),Ft);if(ft.$$typeof===C)return xt(lt,tt,Lf(lt,ft),Ft);RC(lt,ft)}return null}function vt(lt,tt,ft,Ft,hr){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint")return lt=lt.get(ft)||null,Ie(tt,lt,""+Ft,hr);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case h:return lt=lt.get(Ft.key===null?ft:Ft.key)||null,qe(tt,lt,Ft,hr);case m:return lt=lt.get(Ft.key===null?ft:Ft.key)||null,mt(tt,lt,Ft,hr);case S:var ma=Ft._init;return Ft=ma(Ft._payload),vt(lt,tt,ft,Ft,hr)}if(H(Ft)||k(Ft))return lt=lt.get(ft)||null,Bt(tt,lt,Ft,hr,null);if(typeof Ft.then=="function")return vt(lt,tt,ft,PC(Ft),hr);if(Ft.$$typeof===C)return vt(lt,tt,ft,Lf(tt,Ft),hr);RC(tt,Ft)}return null}function zr(lt,tt,ft,Ft){for(var hr=null,ma=null,yr=tt,Or=tt=0,Ji=null;yr!==null&&Or<ft.length;Or++){yr.index>Or?(Ji=yr,yr=null):Ji=yr.sibling;var za=xt(lt,yr,ft[Or],Ft);if(za===null){yr===null&&(yr=Ji);break}A&&yr&&za.alternate===null&&p(lt,yr),tt=ee(za,tt,Or),ma===null?hr=za:ma.sibling=za,ma=za,yr=Ji}if(Or===ft.length)return b(lt,yr),Oa&&WA(lt,Or),hr;if(yr===null){for(;Or<ft.length;Or++)yr=Rt(lt,ft[Or],Ft),yr!==null&&(tt=ee(yr,tt,Or),ma===null?hr=yr:ma.sibling=yr,ma=yr);return Oa&&WA(lt,Or),hr}for(yr=E(yr);Or<ft.length;Or++)Ji=vt(yr,lt,Or,ft[Or],Ft),Ji!==null&&(A&&Ji.alternate!==null&&yr.delete(Ji.key===null?Or:Ji.key),tt=ee(Ji,tt,Or),ma===null?hr=Ji:ma.sibling=Ji,ma=Ji);return A&&yr.forEach(function(X0){return p(lt,X0)}),Oa&&WA(lt,Or),hr}function Ir(lt,tt,ft,Ft){if(ft==null)throw Error(a(151));for(var hr=null,ma=null,yr=tt,Or=tt=0,Ji=null,za=ft.next();yr!==null&&!za.done;Or++,za=ft.next()){yr.index>Or?(Ji=yr,yr=null):Ji=yr.sibling;var X0=xt(lt,yr,za.value,Ft);if(X0===null){yr===null&&(yr=Ji);break}A&&yr&&X0.alternate===null&&p(lt,yr),tt=ee(X0,tt,Or),ma===null?hr=X0:ma.sibling=X0,ma=X0,yr=Ji}if(za.done)return b(lt,yr),Oa&&WA(lt,Or),hr;if(yr===null){for(;!za.done;Or++,za=ft.next())za=Rt(lt,za.value,Ft),za!==null&&(tt=ee(za,tt,Or),ma===null?hr=za:ma.sibling=za,ma=za);return Oa&&WA(lt,Or),hr}for(yr=E(yr);!za.done;Or++,za=ft.next())za=vt(yr,lt,Or,za.value,Ft),za!==null&&(A&&za.alternate!==null&&yr.delete(za.key===null?Or:za.key),tt=ee(za,tt,Or),ma===null?hr=za:ma.sibling=za,ma=za);return A&&yr.forEach(function(ame){return p(lt,ame)}),Oa&&WA(lt,Or),hr}function Cn(lt,tt,ft,Ft){if(typeof ft=="object"&&ft!==null&&ft.type===g&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case h:e:{for(var hr=ft.key;tt!==null;){if(tt.key===hr){if(hr=ft.type,hr===g){if(tt.tag===7){b(lt,tt.sibling),Ft=z(tt,ft.props.children),Ft.return=lt,lt=Ft;break e}}else if(tt.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===S&&bU(hr)===tt.type){b(lt,tt.sibling),Ft=z(tt,ft.props),Ay(Ft,ft),Ft.return=lt,lt=Ft;break e}b(lt,tt);break}else p(lt,tt);tt=tt.sibling}ft.type===g?(Ft=Nd(ft.props.children,lt.mode,Ft,ft.key),Ft.return=lt,lt=Ft):(Ft=qA(ft.type,ft.key,ft.props,null,lt.mode,Ft),Ay(Ft,ft),Ft.return=lt,lt=Ft)}return pe(lt);case m:e:{for(hr=ft.key;tt!==null;){if(tt.key===hr)if(tt.tag===4&&tt.stateNode.containerInfo===ft.containerInfo&&tt.stateNode.implementation===ft.implementation){b(lt,tt.sibling),Ft=z(tt,ft.children||[]),Ft.return=lt,lt=Ft;break e}else{b(lt,tt);break}else p(lt,tt);tt=tt.sibling}Ft=Ep(ft,lt.mode,Ft),Ft.return=lt,lt=Ft}return pe(lt);case S:return hr=ft._init,ft=hr(ft._payload),Cn(lt,tt,ft,Ft)}if(H(ft))return zr(lt,tt,ft,Ft);if(k(ft)){if(hr=k(ft),typeof hr!="function")throw Error(a(150));return ft=hr.call(ft),Ir(lt,tt,ft,Ft)}if(typeof ft.then=="function")return Cn(lt,tt,PC(ft),Ft);if(ft.$$typeof===C)return Cn(lt,tt,Lf(lt,ft),Ft);RC(lt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,tt!==null&&tt.tag===6?(b(lt,tt.sibling),Ft=z(tt,ft),Ft.return=lt,lt=Ft):(b(lt,tt),Ft=yx(ft,lt.mode,Ft),Ft.return=lt,lt=Ft),pe(lt)):b(lt,tt)}return function(lt,tt,ft,Ft){try{fy=0;var hr=Cn(lt,tt,ft,Ft);return Ox=null,hr}catch(yr){if(yr===ke||yr===Be)throw yr;var ma=Wi(29,yr,null,lt.mode);return ma.lanes=Ft,ma.return=lt,ma}finally{}}}var Fx=yU(!0),wU=yU(!1),Pu=Z(null),zf=null;function D0(A){var p=A.alternate;F(Ii,Ii.current&1),F(Pu,A),zf===null&&(p===null||oa.current!==null||p.memoizedState!==null)&&(zf=A)}function NU(A){if(A.tag===22){if(F(Ii,Ii.current),F(Pu,A),zf===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&(zf=A)}}else P0()}function P0(){F(Ii,Ii.current),F(Pu,Pu.current)}function rh(A){M(Pu),zf===A&&(zf=null),M(Ii)}var Ii=Z(0);function LC(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||uB(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function y3(A,p,b,E){p=A.memoizedState,b=b(E,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var w3={enqueueSetState:function(A,p,b){A=A._reactInternals;var E=Qc(),z=St(E);z.payload=p,b!=null&&(z.callback=b),p=Pt(A,z,E),p!==null&&(Hc(p,A,E),It(p,A,E))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var E=Qc(),z=St(E);z.tag=1,z.payload=p,b!=null&&(z.callback=b),p=Pt(A,z,E),p!==null&&(Hc(p,A,E),It(p,A,E))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=Qc(),E=St(b);E.tag=2,p!=null&&(E.callback=p),p=Pt(A,E,b),p!==null&&(Hc(p,A,b),It(p,A,b))}};function CU(A,p,b,E,z,ee,pe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,ee,pe):p.prototype&&p.prototype.isPureReactComponent?!jf(b,E)||!jf(z,ee):!0}function EU(A,p,b,E){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==A&&w3.enqueueReplaceState(p,p.state,null)}function Up(A,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var z in A)b[z]===void 0&&(b[z]=A[z])}return b}var MC=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function jU(A){MC(A)}function kU(A){console.error(A)}function SU(A){MC(A)}function UC(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function _U(A,p,b){try{var E=A.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function N3(A,p,b){return b=St(b),b.tag=3,b.payload={element:null},b.callback=function(){UC(A,p)},b}function BU(A){return A=St(A),A.tag=3,A}function TU(A,p,b,E){var z=b.type.getDerivedStateFromError;if(typeof z=="function"){var ee=E.value;A.payload=function(){return z(ee)},A.callback=function(){_U(p,b,E)}}var pe=b.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(A.callback=function(){_U(p,b,E),typeof z!="function"&&(H0===null?H0=new Set([this]):H0.add(this));var Ie=E.stack;this.componentDidCatch(E.value,{componentStack:Ie!==null?Ie:""})})}function a0e(A,p,b,E,z){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&_0(p,b,z,!0),b=Pu.current,b!==null){switch(b.tag){case 13:return zf===null?q3():b.alternate===null&&Es===0&&(Es=3),b.flags&=-257,b.flags|=65536,b.lanes=z,E===Fe?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),W3(A,E,z)),!1;case 22:return b.flags|=65536,E===Fe?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),W3(A,E,z)),!1}throw Error(a(435,b.tag))}return W3(A,E,z),q3(),!1}if(Oa)return p=Pu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=z,E!==Y1&&(A=Error(a(422),{cause:E}),S0(ca(A,b)))):(E!==Y1&&(p=Error(a(423),{cause:E}),S0(ca(p,b))),A=A.current.alternate,A.flags|=65536,z&=-z,A.lanes|=z,E=ca(E,b),z=N3(A.stateNode,E,z),tr(A,z),Es!==4&&(Es=2)),!1;var ee=Error(a(520),{cause:E});if(ee=ca(ee,b),by===null?by=[ee]:by.push(ee),Es!==4&&(Es=2),p===null)return!0;E=ca(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=z&-z,b.lanes|=A,A=N3(b.stateNode,E,A),tr(b,A),!1;case 1:if(p=b.type,ee=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(H0===null||!H0.has(ee))))return b.flags|=65536,z&=-z,b.lanes|=z,z=BU(z),TU(z,A,b,E),tr(b,z),!1}b=b.return}while(b!==null);return!1}var IU=Error(a(461)),Xi=!1;function xo(A,p,b,E){p.child=A===null?wU(p,null,b,E):Fx(p,A.child,b,E)}function OU(A,p,b,E,z){b=b.render;var ee=p.ref;if("ref"in E){var pe={};for(var Ie in E)Ie!=="ref"&&(pe[Ie]=E[Ie])}else pe=E;return Fu(p),E=Pc(A,p,b,pe,ee,z),Ie=Rn(),A!==null&&!Xi?(Bp(A,p,z),ah(A,p,z)):(Oa&&Ie&&jp(p),p.flags|=1,xo(A,p,E,z),p.child)}function FU(A,p,b,E,z){if(A===null){var ee=b.type;return typeof ee=="function"&&!j0(ee)&&ee.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=ee,DU(A,p,ee,E,z)):(A=qA(b.type,null,E,p,p.mode,z),A.ref=p.ref,A.return=p,p.child=A)}if(ee=A.child,!T3(A,z)){var pe=ee.memoizedProps;if(b=b.compare,b=b!==null?b:jf,b(pe,E)&&A.ref===p.ref)return ah(A,p,z)}return p.flags|=1,A=Bu(ee,E),A.ref=p.ref,A.return=p,p.child=A}function DU(A,p,b,E,z){if(A!==null){var ee=A.memoizedProps;if(jf(ee,E)&&A.ref===p.ref)if(Xi=!1,p.pendingProps=E=ee,T3(A,z))(A.flags&131072)!==0&&(Xi=!0);else return p.lanes=A.lanes,ah(A,p,z)}return C3(A,p,b,E,z)}function PU(A,p,b){var E=p.pendingProps,z=E.children,ee=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=ee!==null?ee.baseLanes|b:b,A!==null){for(z=p.child=A.child,ee=0;z!==null;)ee=ee|z.lanes|z.childLanes,z=z.sibling;p.childLanes=ee&~E}else p.childLanes=0,p.child=null;return RU(A,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&ue(p,ee!==null?ee.cachePool:null),ee!==null?rn(p,ee):Qa(),NU(p);else return p.lanes=p.childLanes=536870912,RU(A,p,ee!==null?ee.baseLanes|b:b,b)}else ee!==null?(ue(p,ee.cachePool),rn(p,ee),P0(),p.memoizedState=null):(A!==null&&ue(p,null),Qa(),P0());return xo(A,p,z,b),p.child}function RU(A,p,b,E){var z=re();return z=z===null?null:{parent:$s._currentValue,pool:z},p.memoizedState={baseLanes:b,cachePool:z},A!==null&&ue(p,null),Qa(),NU(p),A!==null&&_0(A,p,E,!0),null}function QC(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(a(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function C3(A,p,b,E,z){return Fu(p),b=Pc(A,p,b,E,void 0,z),E=Rn(),A!==null&&!Xi?(Bp(A,p,z),ah(A,p,z)):(Oa&&E&&jp(p),p.flags|=1,xo(A,p,b,z),p.child)}function LU(A,p,b,E,z,ee){return Fu(p),p.updateQueue=null,b=JA(p,E,b,z),Mf(A),E=Rn(),A!==null&&!Xi?(Bp(A,p,ee),ah(A,p,ee)):(Oa&&E&&jp(p),p.flags|=1,xo(A,p,b,ee),p.child)}function MU(A,p,b,E,z){if(Fu(p),p.stateNode===null){var ee=fi,pe=b.contextType;typeof pe=="object"&&pe!==null&&(ee=Vs(pe)),ee=new b(E,ee),p.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=w3,p.stateNode=ee,ee._reactInternals=p,ee=p.stateNode,ee.props=E,ee.state=p.memoizedState,ee.refs={},Ze(p),pe=b.contextType,ee.context=typeof pe=="object"&&pe!==null?Vs(pe):fi,ee.state=p.memoizedState,pe=b.getDerivedStateFromProps,typeof pe=="function"&&(y3(p,b,pe,E),ee.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(pe=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),pe!==ee.state&&w3.enqueueReplaceState(ee,ee.state,null),Zt(p,E,ee,z),xr(),ee.state=p.memoizedState),typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(A===null){ee=p.stateNode;var Ie=p.memoizedProps,qe=Up(b,Ie);ee.props=qe;var mt=ee.context,Bt=b.contextType;pe=fi,typeof Bt=="object"&&Bt!==null&&(pe=Vs(Bt));var Rt=b.getDerivedStateFromProps;Bt=typeof Rt=="function"||typeof ee.getSnapshotBeforeUpdate=="function",Ie=p.pendingProps!==Ie,Bt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(Ie||mt!==pe)&&EU(p,ee,E,pe),yt=!1;var xt=p.memoizedState;ee.state=xt,Zt(p,E,ee,z),xr(),mt=p.memoizedState,Ie||xt!==mt||yt?(typeof Rt=="function"&&(y3(p,b,Rt,E),mt=p.memoizedState),(qe=yt||CU(p,b,qe,E,xt,mt,pe))?(Bt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=mt),ee.props=E,ee.state=mt,ee.context=pe,E=qe):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{ee=p.stateNode,rt(A,p),pe=p.memoizedProps,Bt=Up(b,pe),ee.props=Bt,Rt=p.pendingProps,xt=ee.context,mt=b.contextType,qe=fi,typeof mt=="object"&&mt!==null&&(qe=Vs(mt)),Ie=b.getDerivedStateFromProps,(mt=typeof Ie=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(pe!==Rt||xt!==qe)&&EU(p,ee,E,qe),yt=!1,xt=p.memoizedState,ee.state=xt,Zt(p,E,ee,z),xr();var vt=p.memoizedState;pe!==Rt||xt!==vt||yt||A!==null&&A.dependencies!==null&&Ex(A.dependencies)?(typeof Ie=="function"&&(y3(p,b,Ie,E),vt=p.memoizedState),(Bt=yt||CU(p,b,Bt,E,xt,vt,qe)||A!==null&&A.dependencies!==null&&Ex(A.dependencies))?(mt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(E,vt,qe),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(E,vt,qe)),typeof ee.componentDidUpdate=="function"&&(p.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ee.componentDidUpdate!="function"||pe===A.memoizedProps&&xt===A.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||pe===A.memoizedProps&&xt===A.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=vt),ee.props=E,ee.state=vt,ee.context=qe,E=Bt):(typeof ee.componentDidUpdate!="function"||pe===A.memoizedProps&&xt===A.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||pe===A.memoizedProps&&xt===A.memoizedState||(p.flags|=1024),E=!1)}return ee=E,QC(A,p),E=(p.flags&128)!==0,ee||E?(ee=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:ee.render(),p.flags|=1,A!==null&&E?(p.child=Fx(p,A.child,null,z),p.child=Fx(p,null,b,z)):xo(A,p,b,z),p.memoizedState=ee.state,A=p.child):A=ah(A,p,z),A}function UU(A,p,b,E){return El(),p.flags|=256,xo(A,p,b,E),p.child}var E3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function j3(A){return{baseLanes:A,cachePool:ve()}}function k3(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=Ru),A}function QU(A,p,b){var E=p.pendingProps,z=!1,ee=(p.flags&128)!==0,pe;if((pe=ee)||(pe=A!==null&&A.memoizedState===null?!1:(Ii.current&2)!==0),pe&&(z=!0,p.flags&=-129),pe=(p.flags&32)!==0,p.flags&=-33,A===null){if(Oa){if(z?D0(p):P0(),Oa){var Ie=Zn,qe;if(qe=Ie){e:{for(qe=Ie,Ie=Tu;qe.nodeType!==8;){if(!Ie){Ie=null;break e}if(qe=Dd(qe.nextSibling),qe===null){Ie=null;break e}}Ie=qe}Ie!==null?(p.memoizedState={dehydrated:Ie,treeContext:KA!==null?{id:Ed,overflow:jd}:null,retryLane:536870912,hydrationErrors:null},qe=Wi(18,null,null,0),qe.stateNode=Ie,qe.return=p,p.child=qe,zs=p,Zn=null,qe=!0):qe=!1}qe||XA(p)}if(Ie=p.memoizedState,Ie!==null&&(Ie=Ie.dehydrated,Ie!==null))return uB(Ie)?p.lanes=32:p.lanes=536870912,null;rh(p)}return Ie=E.children,E=E.fallback,z?(P0(),z=p.mode,Ie=HC({mode:"hidden",children:Ie},z),E=Nd(E,z,b,null),Ie.return=p,E.return=p,Ie.sibling=E,p.child=Ie,z=p.child,z.memoizedState=j3(b),z.childLanes=k3(A,pe,b),p.memoizedState=E3,E):(D0(p),S3(p,Ie))}if(qe=A.memoizedState,qe!==null&&(Ie=qe.dehydrated,Ie!==null)){if(ee)p.flags&256?(D0(p),p.flags&=-257,p=_3(A,p,b)):p.memoizedState!==null?(P0(),p.child=A.child,p.flags|=128,p=null):(P0(),z=E.fallback,Ie=p.mode,E=HC({mode:"visible",children:E.children},Ie),z=Nd(z,Ie,b,null),z.flags|=2,E.return=p,z.return=p,E.sibling=z,p.child=E,Fx(p,A.child,null,b),E=p.child,E.memoizedState=j3(b),E.childLanes=k3(A,pe,b),p.memoizedState=E3,p=z);else if(D0(p),uB(Ie)){if(pe=Ie.nextSibling&&Ie.nextSibling.dataset,pe)var mt=pe.dgst;pe=mt,E=Error(a(419)),E.stack="",E.digest=pe,S0({value:E,source:null,stack:null}),p=_3(A,p,b)}else if(Xi||_0(A,p,b,!1),pe=(b&A.childLanes)!==0,Xi||pe){if(pe=Ln,pe!==null&&(E=b&-b,E=(E&42)!==0?1:gs(E),E=(E&(pe.suspendedLanes|b))!==0?0:E,E!==0&&E!==qe.retryLane))throw qe.retryLane=E,wd(A,E),Hc(pe,A,E),IU;Ie.data==="$?"||q3(),p=_3(A,p,b)}else Ie.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=qe.treeContext,Zn=Dd(Ie.nextSibling),zs=p,Oa=!0,Pf=null,Tu=!1,A!==null&&(Jl[Cl++]=Ed,Jl[Cl++]=jd,Jl[Cl++]=KA,Ed=A.id,jd=A.overflow,KA=p),p=S3(p,E.children),p.flags|=4096);return p}return z?(P0(),z=E.fallback,Ie=p.mode,qe=A.child,mt=qe.sibling,E=Bu(qe,{mode:"hidden",children:E.children}),E.subtreeFlags=qe.subtreeFlags&65011712,mt!==null?z=Bu(mt,z):(z=Nd(z,Ie,b,null),z.flags|=2),z.return=p,E.return=p,E.sibling=z,p.child=E,E=z,z=p.child,Ie=A.child.memoizedState,Ie===null?Ie=j3(b):(qe=Ie.cachePool,qe!==null?(mt=$s._currentValue,qe=qe.parent!==mt?{parent:mt,pool:mt}:qe):qe=ve(),Ie={baseLanes:Ie.baseLanes|b,cachePool:qe}),z.memoizedState=Ie,z.childLanes=k3(A,pe,b),p.memoizedState=E3,E):(D0(p),b=A.child,A=b.sibling,b=Bu(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,A!==null&&(pe=p.deletions,pe===null?(p.deletions=[A],p.flags|=16):pe.push(A)),p.child=b,p.memoizedState=null,b)}function S3(A,p){return p=HC({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function HC(A,p){return A=Wi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function _3(A,p,b){return Fx(p,A.child,null,b),A=S3(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function HU(A,p,b){A.lanes|=p;var E=A.alternate;E!==null&&(E.lanes|=p),Nx(A.return,p,b)}function B3(A,p,b,E,z){var ee=A.memoizedState;ee===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:z}:(ee.isBackwards=p,ee.rendering=null,ee.renderingStartTime=0,ee.last=E,ee.tail=b,ee.tailMode=z)}function zU(A,p,b){var E=p.pendingProps,z=E.revealOrder,ee=E.tail;if(xo(A,p,E.children,b),E=Ii.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&HU(A,b,p);else if(A.tag===19)HU(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(F(Ii,E),z){case"forwards":for(b=p.child,z=null;b!==null;)A=b.alternate,A!==null&&LC(A)===null&&(z=b),b=b.sibling;b=z,b===null?(z=p.child,p.child=null):(z=b.sibling,b.sibling=null),B3(p,!1,z,b,ee);break;case"backwards":for(b=null,z=p.child,p.child=null;z!==null;){if(A=z.alternate,A!==null&&LC(A)===null){p.child=z;break}A=z.sibling,z.sibling=b,b=z,z=A}B3(p,!0,b,null,ee);break;case"together":B3(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ah(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),Q0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(_0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(a(153));if(p.child!==null){for(A=p.child,b=Bu(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=Bu(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function T3(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&Ex(A)))}function n0e(A,p,b){switch(p.tag){case 3:ie(p,p.stateNode.containerInfo),Rf(p,$s,A.memoizedState.cache),El();break;case 27:case 5:oe(p);break;case 4:ie(p,p.stateNode.containerInfo);break;case 10:Rf(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(D0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?QU(A,p,b):(D0(p),A=ah(A,p,b),A!==null?A.sibling:null);D0(p);break;case 19:var z=(A.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(_0(A,p,b,!1),E=(b&p.childLanes)!==0),z){if(E)return zU(A,p,b);p.flags|=128}if(z=p.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),F(Ii,Ii.current),E)break;return null;case 22:case 23:return p.lanes=0,PU(A,p,b);case 24:Rf(p,$s,A.memoizedState.cache)}return ah(A,p,b)}function VU(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)Xi=!0;else{if(!T3(A,b)&&(p.flags&128)===0)return Xi=!1,n0e(A,p,b);Xi=(A.flags&131072)!==0}else Xi=!1,Oa&&(p.flags&1048576)!==0&&xC(p,wx,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var E=p.elementType,z=E._init;if(E=z(E._payload),p.type=E,typeof E=="function")j0(E)?(A=Up(E,A),p.tag=1,p=MU(null,p,E,A,b)):(p.tag=0,p=C3(null,p,E,A,b));else{if(E!=null){if(z=E.$$typeof,z===T){p.tag=11,p=OU(null,p,E,A,b);break e}else if(z===j){p.tag=14,p=FU(null,p,E,A,b);break e}}throw p=U(E)||E,Error(a(306,p,""))}}return p;case 0:return C3(A,p,p.type,p.pendingProps,b);case 1:return E=p.type,z=Up(E,p.pendingProps),MU(A,p,E,z,b);case 3:e:{if(ie(p,p.stateNode.containerInfo),A===null)throw Error(a(387));E=p.pendingProps;var ee=p.memoizedState;z=ee.element,rt(A,p),Zt(p,E,null,b);var pe=p.memoizedState;if(E=pe.cache,Rf(p,$s,E),E!==ee.cache&&Cx(p,[$s],b,!0),xr(),E=pe.element,ee.isDehydrated)if(ee={element:E,isDehydrated:!1,cache:pe.cache},p.updateQueue.baseState=ee,p.memoizedState=ee,p.flags&256){p=UU(A,p,E,b);break e}else if(E!==z){z=ca(Error(a(424)),p),S0(z),p=UU(A,p,E,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Zn=Dd(A.firstChild),zs=p,Oa=!0,Pf=null,Tu=!0,b=wU(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(El(),E===z){p=ah(A,p,b);break e}xo(A,p,E,b)}p=p.child}return p;case 26:return QC(A,p),A===null?(b=K9(p.type,null,p.pendingProps,null))?p.memoizedState=b:Oa||(b=p.type,A=p.pendingProps,E=rE(ae.current).createElement(b),E[xa]=p,E[la]=A,bo(E,b,A),Re(E),p.stateNode=E):p.memoizedState=K9(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return oe(p),A===null&&Oa&&(E=p.stateNode=$9(p.type,p.pendingProps,ae.current),zs=p,Tu=!0,z=Zn,$0(p.type)?(dB=z,Zn=Dd(E.firstChild)):Zn=z),xo(A,p,p.pendingProps.children,b),QC(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&Oa&&((z=E=Zn)&&(E=I0e(E,p.type,p.pendingProps,Tu),E!==null?(p.stateNode=E,zs=p,Zn=Dd(E.firstChild),Tu=!1,z=!0):z=!1),z||XA(p)),oe(p),z=p.type,ee=p.pendingProps,pe=A!==null?A.memoizedProps:null,E=ee.children,oB(z,ee)?E=null:pe!==null&&oB(z,pe)&&(p.flags|=32),p.memoizedState!==null&&(z=Pc(A,p,Uf,null,null,b),_y._currentValue=z),QC(A,p),xo(A,p,E,b),p.child;case 6:return A===null&&Oa&&((A=b=Zn)&&(b=O0e(b,p.pendingProps,Tu),b!==null?(p.stateNode=b,zs=p,Zn=null,A=!0):A=!1),A||XA(p)),null;case 13:return QU(A,p,b);case 4:return ie(p,p.stateNode.containerInfo),E=p.pendingProps,A===null?p.child=Fx(p,null,E,b):xo(A,p,E,b),p.child;case 11:return OU(A,p,p.type,p.pendingProps,b);case 7:return xo(A,p,p.pendingProps,b),p.child;case 8:return xo(A,p,p.pendingProps.children,b),p.child;case 12:return xo(A,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,Rf(p,p.type,E.value),xo(A,p,E.children,b),p.child;case 9:return z=p.type._context,E=p.pendingProps.children,Fu(p),z=Vs(z),E=E(z),p.flags|=1,xo(A,p,E,b),p.child;case 14:return FU(A,p,p.type,p.pendingProps,b);case 15:return DU(A,p,p.type,p.pendingProps,b);case 19:return zU(A,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},A===null?(b=HC(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=Bu(A.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return PU(A,p,b);case 24:return Fu(p),E=Vs($s),A===null?(z=re(),z===null&&(z=Ln,ee=J1(),z.pooledCache=ee,ee.refCount++,ee!==null&&(z.pooledCacheLanes|=b),z=ee),p.memoizedState={parent:E,cache:z},Ze(p),Rf(p,$s,z)):((A.lanes&b)!==0&&(rt(A,p),Zt(p,null,null,b),xr()),z=A.memoizedState,ee=p.memoizedState,z.parent!==E?(z={parent:E,cache:E},p.memoizedState=z,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=z),Rf(p,$s,E)):(E=ee.cache,Rf(p,$s,E),E!==z.cache&&Cx(p,[$s],b,!0))),xo(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(a(156,p.tag))}function nh(A){A.flags|=4}function $U(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!Z9(p)){if(p=Pu.current,p!==null&&((Ba&4194048)===Ba?zf!==null:(Ba&62914560)!==Ba&&(Ba&536870912)===0||p!==zf))throw dt=Fe,Se;A.flags|=8192}}function zC(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?Pr():536870912,A.lanes|=p,Lx|=p)}function hy(A,p){if(!Oa)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function cs(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,E=0;if(p)for(var z=A.child;z!==null;)b|=z.lanes|z.childLanes,E|=z.subtreeFlags&65011712,E|=z.flags&65011712,z.return=A,z=z.sibling;else for(z=A.child;z!==null;)b|=z.lanes|z.childLanes,E|=z.subtreeFlags,E|=z.flags,z.return=A,z=z.sibling;return A.subtreeFlags|=E,A.childLanes=b,p}function s0e(A,p,b){var E=p.pendingProps;switch(kp(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(p),null;case 1:return cs(p),null;case 3:return b=p.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),Ou($s),ne(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(po(p)?nh(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,bC())),cs(p),null;case 26:return b=p.memoizedState,A===null?(nh(p),b!==null?(cs(p),$U(p,b)):(cs(p),p.flags&=-16777217)):b?b!==A.memoizedState?(nh(p),cs(p),$U(p,b)):(cs(p),p.flags&=-16777217):(A.memoizedProps!==E&&nh(p),cs(p),p.flags&=-16777217),null;case 27:we(p),b=ae.current;var z=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==E&&nh(p);else{if(!E){if(p.stateNode===null)throw Error(a(166));return cs(p),null}A=X.current,po(p)?vC(p):(A=$9(z,E,b),p.stateNode=A,nh(p))}return cs(p),null;case 5:if(we(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==E&&nh(p);else{if(!E){if(p.stateNode===null)throw Error(a(166));return cs(p),null}if(A=X.current,po(p))vC(p);else{switch(z=rE(ae.current),A){case 1:A=z.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=z.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=z.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?z.createElement("select",{is:E.is}):z.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?z.createElement(b,{is:E.is}):z.createElement(b)}}A[xa]=p,A[la]=E;e:for(z=p.child;z!==null;){if(z.tag===5||z.tag===6)A.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===p)break e;for(;z.sibling===null;){if(z.return===null||z.return===p)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}p.stateNode=A;e:switch(bo(A,b,E),b){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&nh(p)}}return cs(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==E&&nh(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(a(166));if(A=ae.current,po(p)){if(A=p.stateNode,b=p.memoizedProps,E=null,z=zs,z!==null)switch(z.tag){case 27:case 5:E=z.memoizedProps}A[xa]=p,A=!!(A.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||L9(A.nodeValue,b)),A||XA(p)}else A=rE(A).createTextNode(E),A[xa]=p,p.stateNode=A}return cs(p),null;case 13:if(E=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(z=po(p),E!==null&&E.dehydrated!==null){if(A===null){if(!z)throw Error(a(318));if(z=p.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(a(317));z[xa]=p}else El(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;cs(p),z=!1}else z=bC(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=z),z=!0;if(!z)return p.flags&256?(rh(p),p):(rh(p),null)}if(rh(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,A=A!==null&&A.memoizedState!==null,b){E=p.child,z=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(z=E.alternate.memoizedState.cachePool.pool);var ee=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(ee=E.memoizedState.cachePool.pool),ee!==z&&(E.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),zC(p,p.updateQueue),cs(p),null;case 4:return ne(),A===null&&rB(p.stateNode.containerInfo),cs(p),null;case 10:return Ou(p.type),cs(p),null;case 19:if(M(Ii),z=p.memoizedState,z===null)return cs(p),null;if(E=(p.flags&128)!==0,ee=z.rendering,ee===null)if(E)hy(z,!1);else{if(Es!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(ee=LC(A),ee!==null){for(p.flags|=128,hy(z,!1),A=ee.updateQueue,p.updateQueue=A,zC(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)Cp(b,A),b=b.sibling;return F(Ii,Ii.current&1|2),p.child}A=A.sibling}z.tail!==null&&xe()>GC&&(p.flags|=128,E=!0,hy(z,!1),p.lanes=4194304)}else{if(!E)if(A=LC(ee),A!==null){if(p.flags|=128,E=!0,A=A.updateQueue,p.updateQueue=A,zC(p,A),hy(z,!0),z.tail===null&&z.tailMode==="hidden"&&!ee.alternate&&!Oa)return cs(p),null}else 2*xe()-z.renderingStartTime>GC&&b!==536870912&&(p.flags|=128,E=!0,hy(z,!1),p.lanes=4194304);z.isBackwards?(ee.sibling=p.child,p.child=ee):(A=z.last,A!==null?A.sibling=ee:p.child=ee,z.last=ee)}return z.tail!==null?(p=z.tail,z.rendering=p,z.tail=p.sibling,z.renderingStartTime=xe(),p.sibling=null,A=Ii.current,F(Ii,E?A&1|2:A&1),p):(cs(p),null);case 22:case 23:return rh(p),qr(),E=p.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(cs(p),p.subtreeFlags&6&&(p.flags|=8192)):cs(p),b=p.updateQueue,b!==null&&zC(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),A!==null&&M(q),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Ou($s),cs(p),null;case 25:return null;case 30:return null}throw Error(a(156,p.tag))}function i0e(A,p){switch(kp(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return Ou($s),ne(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return we(p),null;case 13:if(rh(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(a(340));El()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return M(Ii),null;case 4:return ne(),null;case 10:return Ou(p.type),null;case 22:case 23:return rh(p),qr(),A!==null&&M(q),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return Ou($s),null;case 25:return null;default:return null}}function GU(A,p){switch(kp(p),p.tag){case 3:Ou($s),ne();break;case 26:case 27:case 5:we(p);break;case 4:ne();break;case 13:rh(p);break;case 19:M(Ii);break;case 10:Ou(p.type);break;case 22:case 23:rh(p),qr(),A!==null&&M(q);break;case 24:Ou($s)}}function my(A,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var z=E.next;b=z;do{if((b.tag&A)===A){E=void 0;var ee=b.create,pe=b.inst;E=ee(),pe.destroy=E}b=b.next}while(b!==z)}}catch(Ie){_n(p,p.return,Ie)}}function R0(A,p,b){try{var E=p.updateQueue,z=E!==null?E.lastEffect:null;if(z!==null){var ee=z.next;E=ee;do{if((E.tag&A)===A){var pe=E.inst,Ie=pe.destroy;if(Ie!==void 0){pe.destroy=void 0,z=p;var qe=b,mt=Ie;try{mt()}catch(Bt){_n(z,qe,Bt)}}}E=E.next}while(E!==ee)}}catch(Bt){_n(p,p.return,Bt)}}function qU(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{Ua(p,b)}catch(E){_n(A,A.return,E)}}}function KU(A,p,b){b.props=Up(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(E){_n(A,p,E)}}function py(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof b=="function"?A.refCleanup=b(E):b.current=E}}catch(z){_n(A,p,z)}}function Vf(A,p){var b=A.ref,E=A.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(z){_n(A,p,z)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(z){_n(A,p,z)}else b.current=null}function WU(A){var p=A.type,b=A.memoizedProps,E=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(z){_n(A,A.return,z)}}function I3(A,p,b){try{var E=A.stateNode;k0e(E,A.type,b,p),E[la]=p}catch(z){_n(A,A.return,z)}}function XU(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&$0(A.type)||A.tag===4}function O3(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||XU(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&$0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function F3(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=tE));else if(E!==4&&(E===27&&$0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(F3(A,p,b),A=A.sibling;A!==null;)F3(A,p,b),A=A.sibling}function VC(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(E!==4&&(E===27&&$0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(VC(A,p,b),A=A.sibling;A!==null;)VC(A,p,b),A=A.sibling}function YU(A){var p=A.stateNode,b=A.memoizedProps;try{for(var E=A.type,z=p.attributes;z.length;)p.removeAttributeNode(z[0]);bo(p,E,b),p[xa]=A,p[la]=b}catch(ee){_n(A,A.return,ee)}}var sh=!1,qs=!1,D3=!1,JU=typeof WeakSet=="function"?WeakSet:Set,Yi=null;function o0e(A,p){if(A=A.containerInfo,sB=lE,A=mo(A),Ti(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var z=E.anchorOffset,ee=E.focusNode;E=E.focusOffset;try{b.nodeType,ee.nodeType}catch{b=null;break e}var pe=0,Ie=-1,qe=-1,mt=0,Bt=0,Rt=A,xt=null;t:for(;;){for(var vt;Rt!==b||z!==0&&Rt.nodeType!==3||(Ie=pe+z),Rt!==ee||E!==0&&Rt.nodeType!==3||(qe=pe+E),Rt.nodeType===3&&(pe+=Rt.nodeValue.length),(vt=Rt.firstChild)!==null;)xt=Rt,Rt=vt;for(;;){if(Rt===A)break t;if(xt===b&&++mt===z&&(Ie=pe),xt===ee&&++Bt===E&&(qe=pe),(vt=Rt.nextSibling)!==null)break;Rt=xt,xt=Rt.parentNode}Rt=vt}b=Ie===-1||qe===-1?null:{start:Ie,end:qe}}else b=null}b=b||{start:0,end:0}}else b=null;for(iB={focusedElem:A,selectionRange:b},lE=!1,Yi=p;Yi!==null;)if(p=Yi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,Yi=A;else for(;Yi!==null;){switch(p=Yi,ee=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&ee!==null){A=void 0,b=p,z=ee.memoizedProps,ee=ee.memoizedState,E=b.stateNode;try{var zr=Up(b.type,z,b.elementType===b.type);A=E.getSnapshotBeforeUpdate(zr,ee),E.__reactInternalSnapshotBeforeUpdate=A}catch(Ir){_n(b,b.return,Ir)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)cB(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":cB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(a(163))}if(A=p.sibling,A!==null){A.return=p.return,Yi=A;break}Yi=p.return}}function ZU(A,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:L0(A,b),E&4&&my(5,b);break;case 1:if(L0(A,b),E&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(pe){_n(b,b.return,pe)}else{var z=Up(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(z,p,A.__reactInternalSnapshotBeforeUpdate)}catch(pe){_n(b,b.return,pe)}}E&64&&qU(b),E&512&&py(b,b.return);break;case 3:if(L0(A,b),E&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Ua(A,p)}catch(pe){_n(b,b.return,pe)}}break;case 27:p===null&&E&4&&YU(b);case 26:case 5:L0(A,b),p===null&&E&4&&WU(b),E&512&&py(b,b.return);break;case 12:L0(A,b);break;case 13:L0(A,b),E&4&&r9(A,b),E&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=p0e.bind(null,b),F0e(A,b))));break;case 22:if(E=b.memoizedState!==null||sh,!E){p=p!==null&&p.memoizedState!==null||qs,z=sh;var ee=qs;sh=E,(qs=p)&&!ee?M0(A,b,(b.subtreeFlags&8772)!==0):L0(A,b),sh=z,qs=ee}break;case 30:break;default:L0(A,b)}}function e9(A){var p=A.alternate;p!==null&&(A.alternate=null,e9(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&Le(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var es=null,ec=!1;function ih(A,p,b){for(b=b.child;b!==null;)t9(A,p,b),b=b.sibling}function t9(A,p,b){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(et,b)}catch{}switch(b.tag){case 26:qs||Vf(b,p),ih(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:qs||Vf(b,p);var E=es,z=ec;$0(b.type)&&(es=b.stateNode,ec=!1),ih(A,p,b),Ey(b.stateNode),es=E,ec=z;break;case 5:qs||Vf(b,p);case 6:if(E=es,z=ec,es=null,ih(A,p,b),es=E,ec=z,es!==null)if(ec)try{(es.nodeType===9?es.body:es.nodeName==="HTML"?es.ownerDocument.body:es).removeChild(b.stateNode)}catch(ee){_n(b,p,ee)}else try{es.removeChild(b.stateNode)}catch(ee){_n(b,p,ee)}break;case 18:es!==null&&(ec?(A=es,z9(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),Oy(A)):z9(es,b.stateNode));break;case 4:E=es,z=ec,es=b.stateNode.containerInfo,ec=!0,ih(A,p,b),es=E,ec=z;break;case 0:case 11:case 14:case 15:qs||R0(2,b,p),qs||R0(4,b,p),ih(A,p,b);break;case 1:qs||(Vf(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&KU(b,p,E)),ih(A,p,b);break;case 21:ih(A,p,b);break;case 22:qs=(E=qs)||b.memoizedState!==null,ih(A,p,b),qs=E;break;default:ih(A,p,b)}}function r9(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Oy(A)}catch(b){_n(p,p.return,b)}}function l0e(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new JU),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new JU),p;default:throw Error(a(435,A.tag))}}function P3(A,p){var b=l0e(A);p.forEach(function(E){var z=g0e.bind(null,A,E);b.has(E)||(b.add(E),E.then(z,z))})}function Lc(A,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var z=b[E],ee=A,pe=p,Ie=pe;e:for(;Ie!==null;){switch(Ie.tag){case 27:if($0(Ie.type)){es=Ie.stateNode,ec=!1;break e}break;case 5:es=Ie.stateNode,ec=!1;break e;case 3:case 4:es=Ie.stateNode.containerInfo,ec=!0;break e}Ie=Ie.return}if(es===null)throw Error(a(160));t9(ee,pe,z),es=null,ec=!1,ee=z.alternate,ee!==null&&(ee.return=null),z.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)a9(p,A),p=p.sibling}var Fd=null;function a9(A,p){var b=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Lc(p,A),Mc(A),E&4&&(R0(3,A,A.return),my(3,A),R0(5,A,A.return));break;case 1:Lc(p,A),Mc(A),E&512&&(qs||b===null||Vf(b,b.return)),E&64&&sh&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var z=Fd;if(Lc(p,A),Mc(A),E&512&&(qs||b===null||Vf(b,b.return)),E&4){var ee=b!==null?b.memoizedState:null;if(E=A.memoizedState,b===null)if(E===null)if(A.stateNode===null){e:{E=A.type,b=A.memoizedProps,z=z.ownerDocument||z;t:switch(E){case"title":ee=z.getElementsByTagName("title")[0],(!ee||ee[De]||ee[xa]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=z.createElement(E),z.head.insertBefore(ee,z.querySelector("head > title"))),bo(ee,E,b),ee[xa]=A,Re(ee),E=ee;break e;case"link":var pe=Y9("link","href",z).get(E+(b.href||""));if(pe){for(var Ie=0;Ie<pe.length;Ie++)if(ee=pe[Ie],ee.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&ee.getAttribute("rel")===(b.rel==null?null:b.rel)&&ee.getAttribute("title")===(b.title==null?null:b.title)&&ee.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){pe.splice(Ie,1);break t}}ee=z.createElement(E),bo(ee,E,b),z.head.appendChild(ee);break;case"meta":if(pe=Y9("meta","content",z).get(E+(b.content||""))){for(Ie=0;Ie<pe.length;Ie++)if(ee=pe[Ie],ee.getAttribute("content")===(b.content==null?null:""+b.content)&&ee.getAttribute("name")===(b.name==null?null:b.name)&&ee.getAttribute("property")===(b.property==null?null:b.property)&&ee.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&ee.getAttribute("charset")===(b.charSet==null?null:b.charSet)){pe.splice(Ie,1);break t}}ee=z.createElement(E),bo(ee,E,b),z.head.appendChild(ee);break;default:throw Error(a(468,E))}ee[xa]=A,Re(ee),E=ee}A.stateNode=E}else J9(z,A.type,A.stateNode);else A.stateNode=X9(z,E,A.memoizedProps);else ee!==E?(ee===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):ee.count--,E===null?J9(z,A.type,A.stateNode):X9(z,E,A.memoizedProps)):E===null&&A.stateNode!==null&&I3(A,A.memoizedProps,b.memoizedProps)}break;case 27:Lc(p,A),Mc(A),E&512&&(qs||b===null||Vf(b,b.return)),b!==null&&E&4&&I3(A,A.memoizedProps,b.memoizedProps);break;case 5:if(Lc(p,A),Mc(A),E&512&&(qs||b===null||Vf(b,b.return)),A.flags&32){z=A.stateNode;try{Do(z,"")}catch(vt){_n(A,A.return,vt)}}E&4&&A.stateNode!=null&&(z=A.memoizedProps,I3(A,z,b!==null?b.memoizedProps:z)),E&1024&&(D3=!0);break;case 6:if(Lc(p,A),Mc(A),E&4){if(A.stateNode===null)throw Error(a(162));E=A.memoizedProps,b=A.stateNode;try{b.nodeValue=E}catch(vt){_n(A,A.return,vt)}}break;case 3:if(sE=null,z=Fd,Fd=aE(p.containerInfo),Lc(p,A),Fd=z,Mc(A),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Oy(p.containerInfo)}catch(vt){_n(A,A.return,vt)}D3&&(D3=!1,n9(A));break;case 4:E=Fd,Fd=aE(A.stateNode.containerInfo),Lc(p,A),Mc(A),Fd=E;break;case 12:Lc(p,A),Mc(A);break;case 13:Lc(p,A),Mc(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(H3=xe()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,P3(A,E)));break;case 22:z=A.memoizedState!==null;var qe=b!==null&&b.memoizedState!==null,mt=sh,Bt=qs;if(sh=mt||z,qs=Bt||qe,Lc(p,A),qs=Bt,sh=mt,Mc(A),E&8192)e:for(p=A.stateNode,p._visibility=z?p._visibility&-2:p._visibility|1,z&&(b===null||qe||sh||qs||Qp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){qe=b=p;try{if(ee=qe.stateNode,z)pe=ee.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Ie=qe.stateNode;var Rt=qe.memoizedProps.style,xt=Rt!=null&&Rt.hasOwnProperty("display")?Rt.display:null;Ie.style.display=xt==null||typeof xt=="boolean"?"":(""+xt).trim()}}catch(vt){_n(qe,qe.return,vt)}}}else if(p.tag===6){if(b===null){qe=p;try{qe.stateNode.nodeValue=z?"":qe.memoizedProps}catch(vt){_n(qe,qe.return,vt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=A.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,P3(A,b))));break;case 19:Lc(p,A),Mc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,P3(A,E)));break;case 30:break;case 21:break;default:Lc(p,A),Mc(A)}}function Mc(A){var p=A.flags;if(p&2){try{for(var b,E=A.return;E!==null;){if(XU(E)){b=E;break}E=E.return}if(b==null)throw Error(a(160));switch(b.tag){case 27:var z=b.stateNode,ee=O3(A);VC(A,ee,z);break;case 5:var pe=b.stateNode;b.flags&32&&(Do(pe,""),b.flags&=-33);var Ie=O3(A);VC(A,Ie,pe);break;case 3:case 4:var qe=b.stateNode.containerInfo,mt=O3(A);F3(A,mt,qe);break;default:throw Error(a(161))}}catch(Bt){_n(A,A.return,Bt)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function n9(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;n9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function L0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)ZU(A,p.alternate,p),p=p.sibling}function Qp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:R0(4,p,p.return),Qp(p);break;case 1:Vf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&KU(p,p.return,b),Qp(p);break;case 27:Ey(p.stateNode);case 26:case 5:Vf(p,p.return),Qp(p);break;case 22:p.memoizedState===null&&Qp(p);break;case 30:Qp(p);break;default:Qp(p)}A=A.sibling}}function M0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,z=A,ee=p,pe=ee.flags;switch(ee.tag){case 0:case 11:case 15:M0(z,ee,b),my(4,ee);break;case 1:if(M0(z,ee,b),E=ee,z=E.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(mt){_n(E,E.return,mt)}if(E=ee,z=E.updateQueue,z!==null){var Ie=E.stateNode;try{var qe=z.shared.hiddenCallbacks;if(qe!==null)for(z.shared.hiddenCallbacks=null,z=0;z<qe.length;z++)Sa(qe[z],Ie)}catch(mt){_n(E,E.return,mt)}}b&&pe&64&&qU(ee),py(ee,ee.return);break;case 27:YU(ee);case 26:case 5:M0(z,ee,b),b&&E===null&&pe&4&&WU(ee),py(ee,ee.return);break;case 12:M0(z,ee,b);break;case 13:M0(z,ee,b),b&&pe&4&&r9(z,ee);break;case 22:ee.memoizedState===null&&M0(z,ee,b),py(ee,ee.return);break;case 30:break;default:M0(z,ee,b)}p=p.sibling}}function R3(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&Sp(b))}function L3(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&Sp(A))}function $f(A,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)s9(A,p,b,E),p=p.sibling}function s9(A,p,b,E){var z=p.flags;switch(p.tag){case 0:case 11:case 15:$f(A,p,b,E),z&2048&&my(9,p);break;case 1:$f(A,p,b,E);break;case 3:$f(A,p,b,E),z&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&Sp(A)));break;case 12:if(z&2048){$f(A,p,b,E),A=p.stateNode;try{var ee=p.memoizedProps,pe=ee.id,Ie=ee.onPostCommit;typeof Ie=="function"&&Ie(pe,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(qe){_n(p,p.return,qe)}}else $f(A,p,b,E);break;case 13:$f(A,p,b,E);break;case 23:break;case 22:ee=p.stateNode,pe=p.alternate,p.memoizedState!==null?ee._visibility&2?$f(A,p,b,E):gy(A,p):ee._visibility&2?$f(A,p,b,E):(ee._visibility|=2,Dx(A,p,b,E,(p.subtreeFlags&10256)!==0)),z&2048&&R3(pe,p);break;case 24:$f(A,p,b,E),z&2048&&L3(p.alternate,p);break;default:$f(A,p,b,E)}}function Dx(A,p,b,E,z){for(z=z&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var ee=A,pe=p,Ie=b,qe=E,mt=pe.flags;switch(pe.tag){case 0:case 11:case 15:Dx(ee,pe,Ie,qe,z),my(8,pe);break;case 23:break;case 22:var Bt=pe.stateNode;pe.memoizedState!==null?Bt._visibility&2?Dx(ee,pe,Ie,qe,z):gy(ee,pe):(Bt._visibility|=2,Dx(ee,pe,Ie,qe,z)),z&&mt&2048&&R3(pe.alternate,pe);break;case 24:Dx(ee,pe,Ie,qe,z),z&&mt&2048&&L3(pe.alternate,pe);break;default:Dx(ee,pe,Ie,qe,z)}p=p.sibling}}function gy(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,E=p,z=E.flags;switch(E.tag){case 22:gy(b,E),z&2048&&R3(E.alternate,E);break;case 24:gy(b,E),z&2048&&L3(E.alternate,E);break;default:gy(b,E)}p=p.sibling}}var xy=8192;function Px(A){if(A.subtreeFlags&xy)for(A=A.child;A!==null;)i9(A),A=A.sibling}function i9(A){switch(A.tag){case 26:Px(A),A.flags&xy&&A.memoizedState!==null&&q0e(Fd,A.memoizedState,A.memoizedProps);break;case 5:Px(A);break;case 3:case 4:var p=Fd;Fd=aE(A.stateNode.containerInfo),Px(A),Fd=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=xy,xy=16777216,Px(A),xy=p):Px(A));break;default:Px(A)}}function o9(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function vy(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Yi=E,c9(E,A)}o9(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)l9(A),A=A.sibling}function l9(A){switch(A.tag){case 0:case 11:case 15:vy(A),A.flags&2048&&R0(9,A,A.return);break;case 3:vy(A);break;case 12:vy(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,$C(A)):vy(A);break;default:vy(A)}}function $C(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Yi=E,c9(E,A)}o9(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:R0(8,p,p.return),$C(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,$C(p));break;default:$C(p)}A=A.sibling}}function c9(A,p){for(;Yi!==null;){var b=Yi;switch(b.tag){case 0:case 11:case 15:R0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Sp(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,Yi=E;else e:for(b=A;Yi!==null;){E=Yi;var z=E.sibling,ee=E.return;if(e9(E),E===b){Yi=null;break e}if(z!==null){z.return=ee,Yi=z;break e}Yi=ee}}}var c0e={getCacheForType:function(A){var p=Vs($s),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},u0e=typeof WeakMap=="function"?WeakMap:Map,hn=0,Ln=null,va=null,Ba=0,mn=0,Uc=null,U0=!1,Rx=!1,M3=!1,oh=0,Es=0,Q0=0,Hp=0,U3=0,Ru=0,Lx=0,by=null,tc=null,Q3=!1,H3=0,GC=1/0,qC=null,H0=null,vo=0,z0=null,Mx=null,Ux=0,z3=0,V3=null,u9=null,yy=0,$3=null;function Qc(){if((hn&2)!==0&&Ba!==0)return Ba&-Ba;if(Q.T!==null){var A=YA;return A!==0?A:J3()}return Pn()}function d9(){Ru===0&&(Ru=(Ba&536870912)===0||Oa?Sn():536870912);var A=Pu.current;return A!==null&&(A.flags|=32),Ru}function Hc(A,p,b){(A===Ln&&(mn===2||mn===9)||A.cancelPendingCommit!==null)&&(Qx(A,0),V0(A,Ba,Ru,!1)),Dn(A,b),((hn&2)===0||A!==Ln)&&(A===Ln&&((hn&2)===0&&(Hp|=b),Es===4&&V0(A,Ba,Ru,!1)),Gf(A))}function f9(A,p,b){if((hn&6)!==0)throw Error(a(327));var E=!b&&(p&124)===0&&(p&A.expiredLanes)===0||$r(A,p),z=E?A0e(A,p):K3(A,p,!0),ee=E;do{if(z===0){Rx&&!E&&V0(A,p,0,!1);break}else{if(b=A.current.alternate,ee&&!d0e(b)){z=K3(A,p,!1),ee=!1;continue}if(z===2){if(ee=p,A.errorRecoveryDisabledLanes&ee)var pe=0;else pe=A.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){p=pe;e:{var Ie=A;z=by;var qe=Ie.current.memoizedState.isDehydrated;if(qe&&(Qx(Ie,pe).flags|=256),pe=K3(Ie,pe,!1),pe!==2){if(M3&&!qe){Ie.errorRecoveryDisabledLanes|=ee,Hp|=ee,z=4;break e}ee=tc,tc=z,ee!==null&&(tc===null?tc=ee:tc.push.apply(tc,ee))}z=pe}if(ee=!1,z!==2)continue}}if(z===1){Qx(A,0),V0(A,p,0,!0);break}e:{switch(E=A,ee=z,ee){case 0:case 1:throw Error(a(345));case 4:if((p&4194048)!==p)break;case 6:V0(E,p,Ru,!U0);break e;case 2:tc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((p&62914560)===p&&(z=H3+300-xe(),10<z)){if(V0(E,p,Ru,!U0),Cr(E,0,!0)!==0)break e;E.timeoutHandle=Q9(A9.bind(null,E,b,tc,qC,Q3,p,Ru,Hp,Lx,U0,ee,2,-0,0),z);break e}A9(E,b,tc,qC,Q3,p,Ru,Hp,Lx,U0,ee,0,-0,0)}}break}while(!0);Gf(A)}function A9(A,p,b,E,z,ee,pe,Ie,qe,mt,Bt,Rt,xt,vt){if(A.timeoutHandle=-1,Rt=p.subtreeFlags,(Rt&8192||(Rt&16785408)===16785408)&&(Sy={stylesheets:null,count:0,unsuspend:G0e},i9(p),Rt=K0e(),Rt!==null)){A.cancelPendingCommit=Rt(b9.bind(null,A,p,ee,b,E,z,pe,Ie,qe,Bt,1,xt,vt)),V0(A,ee,pe,!mt);return}b9(A,p,ee,b,E,z,pe,Ie,qe)}function d0e(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var z=b[E],ee=z.getSnapshot;z=z.value;try{if(!di(ee(),z))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function V0(A,p,b,E){p&=~U3,p&=~Hp,A.suspendedLanes|=p,A.pingedLanes&=~p,E&&(A.warmLanes|=p),E=A.expirationTimes;for(var z=p;0<z;){var ee=31-nt(z),pe=1<<ee;E[ee]=-1,z&=~pe}b!==0&&pr(A,b,p)}function KC(){return(hn&6)===0?(wy(0),!1):!0}function G3(){if(va!==null){if(mn===0)var A=va.return;else A=va,Sd=Ai=null,kx(A),Ox=null,fy=0,A=va;for(;A!==null;)GU(A.alternate,A),A=A.return;va=null}}function Qx(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,_0e(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),G3(),Ln=A,va=b=Bu(A.current,null),Ba=p,mn=0,Uc=null,U0=!1,Rx=$r(A,p),M3=!1,Lx=Ru=U3=Hp=Q0=Es=0,tc=by=null,Q3=!1,(p&8)!==0&&(p|=p&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=p;0<E;){var z=31-nt(E),ee=1<<z;p|=A[z],E&=~ee}return oh=p,Xl(),b}function h9(A,p){kr=null,Q.H=DC,p===ke||p===Be?(p=it(),mn=3):p===Se?(p=it(),mn=4):mn=p===IU?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Uc=p,va===null&&(Es=1,UC(A,ca(p,A.current)))}function m9(){var A=Q.H;return Q.H=DC,A===null?DC:A}function p9(){var A=Q.A;return Q.A=c0e,A}function q3(){Es=4,U0||(Ba&4194048)!==Ba&&Pu.current!==null||(Rx=!0),(Q0&134217727)===0&&(Hp&134217727)===0||Ln===null||V0(Ln,Ba,Ru,!1)}function K3(A,p,b){var E=hn;hn|=2;var z=m9(),ee=p9();(Ln!==A||Ba!==p)&&(qC=null,Qx(A,p)),p=!1;var pe=Es;e:do try{if(mn!==0&&va!==null){var Ie=va,qe=Uc;switch(mn){case 8:G3(),pe=6;break e;case 3:case 2:case 9:case 6:Pu.current===null&&(p=!0);var mt=mn;if(mn=0,Uc=null,Hx(A,Ie,qe,mt),b&&Rx){pe=0;break e}break;default:mt=mn,mn=0,Uc=null,Hx(A,Ie,qe,mt)}}f0e(),pe=Es;break}catch(Bt){h9(A,Bt)}while(!0);return p&&A.shellSuspendCounter++,Sd=Ai=null,hn=E,Q.H=z,Q.A=ee,va===null&&(Ln=null,Ba=0,Xl()),pe}function f0e(){for(;va!==null;)g9(va)}function A0e(A,p){var b=hn;hn|=2;var E=m9(),z=p9();Ln!==A||Ba!==p?(qC=null,GC=xe()+500,Qx(A,p)):Rx=$r(A,p);e:do try{if(mn!==0&&va!==null){p=va;var ee=Uc;t:switch(mn){case 1:mn=0,Uc=null,Hx(A,p,ee,1);break;case 2:case 9:if(Me(ee)){mn=0,Uc=null,x9(p);break}p=function(){mn!==2&&mn!==9||Ln!==A||(mn=7),Gf(A)},ee.then(p,p);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:Me(ee)?(mn=0,Uc=null,x9(p)):(mn=0,Uc=null,Hx(A,p,ee,7));break;case 5:var pe=null;switch(va.tag){case 26:pe=va.memoizedState;case 5:case 27:var Ie=va;if(!pe||Z9(pe)){mn=0,Uc=null;var qe=Ie.sibling;if(qe!==null)va=qe;else{var mt=Ie.return;mt!==null?(va=mt,WC(mt)):va=null}break t}}mn=0,Uc=null,Hx(A,p,ee,5);break;case 6:mn=0,Uc=null,Hx(A,p,ee,6);break;case 8:G3(),Es=6;break e;default:throw Error(a(462))}}h0e();break}catch(Bt){h9(A,Bt)}while(!0);return Sd=Ai=null,Q.H=E,Q.A=z,hn=b,va!==null?0:(Ln=null,Ba=0,Xl(),Es)}function h0e(){for(;va!==null&&!Ce();)g9(va)}function g9(A){var p=VU(A.alternate,A,oh);A.memoizedProps=A.pendingProps,p===null?WC(A):va=p}function x9(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=LU(b,p,p.pendingProps,p.type,void 0,Ba);break;case 11:p=LU(b,p,p.pendingProps,p.type.render,p.ref,Ba);break;case 5:kx(p);default:GU(b,p),p=va=Cp(p,oh),p=VU(b,p,oh)}A.memoizedProps=A.pendingProps,p===null?WC(A):va=p}function Hx(A,p,b,E){Sd=Ai=null,kx(p),Ox=null,fy=0;var z=p.return;try{if(a0e(A,z,p,b,Ba)){Es=1,UC(A,ca(b,A.current)),va=null;return}}catch(ee){if(z!==null)throw va=z,ee;Es=1,UC(A,ca(b,A.current)),va=null;return}p.flags&32768?(Oa||E===1?A=!0:Rx||(Ba&536870912)!==0?A=!1:(U0=A=!0,(E===2||E===9||E===3||E===6)&&(E=Pu.current,E!==null&&E.tag===13&&(E.flags|=16384))),v9(p,A)):WC(p)}function WC(A){var p=A;do{if((p.flags&32768)!==0){v9(p,U0);return}A=p.return;var b=s0e(p.alternate,p,oh);if(b!==null){va=b;return}if(p=p.sibling,p!==null){va=p;return}va=p=A}while(p!==null);Es===0&&(Es=5)}function v9(A,p){do{var b=i0e(A.alternate,A);if(b!==null){b.flags&=32767,va=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){va=A;return}va=A=b}while(A!==null);Es=6,va=null}function b9(A,p,b,E,z,ee,pe,Ie,qe){A.cancelPendingCommit=null;do XC();while(vo!==0);if((hn&6)!==0)throw Error(a(327));if(p!==null){if(p===A.current)throw Error(a(177));if(ee=p.lanes|p.childLanes,ee|=is,Rr(A,b,ee,pe,Ie,qe),A===Ln&&(va=Ln=null,Ba=0),Mx=p,z0=A,Ux=b,z3=ee,V3=z,u9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,x0e(Ae,function(){return E9(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=Q.T,Q.T=null,z=V.p,V.p=2,pe=hn,hn|=4;try{o0e(A,p,b)}finally{hn=pe,V.p=z,Q.T=E}}vo=1,y9(),w9(),N9()}}function y9(){if(vo===1){vo=0;var A=z0,p=Mx,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=Q.T,Q.T=null;var E=V.p;V.p=2;var z=hn;hn|=4;try{a9(p,A);var ee=iB,pe=mo(A.containerInfo),Ie=ee.focusedElem,qe=ee.selectionRange;if(pe!==Ie&&Ie&&Ie.ownerDocument&&kf(Ie.ownerDocument.documentElement,Ie)){if(qe!==null&&Ti(Ie)){var mt=qe.start,Bt=qe.end;if(Bt===void 0&&(Bt=mt),"selectionStart"in Ie)Ie.selectionStart=mt,Ie.selectionEnd=Math.min(Bt,Ie.value.length);else{var Rt=Ie.ownerDocument||document,xt=Rt&&Rt.defaultView||window;if(xt.getSelection){var vt=xt.getSelection(),zr=Ie.textContent.length,Ir=Math.min(qe.start,zr),Cn=qe.end===void 0?Ir:Math.min(qe.end,zr);!vt.extend&&Ir>Cn&&(pe=Cn,Cn=Ir,Ir=pe);var lt=bd(Ie,Ir),tt=bd(Ie,Cn);if(lt&&tt&&(vt.rangeCount!==1||vt.anchorNode!==lt.node||vt.anchorOffset!==lt.offset||vt.focusNode!==tt.node||vt.focusOffset!==tt.offset)){var ft=Rt.createRange();ft.setStart(lt.node,lt.offset),vt.removeAllRanges(),Ir>Cn?(vt.addRange(ft),vt.extend(tt.node,tt.offset)):(ft.setEnd(tt.node,tt.offset),vt.addRange(ft))}}}}for(Rt=[],vt=Ie;vt=vt.parentNode;)vt.nodeType===1&&Rt.push({element:vt,left:vt.scrollLeft,top:vt.scrollTop});for(typeof Ie.focus=="function"&&Ie.focus(),Ie=0;Ie<Rt.length;Ie++){var Ft=Rt[Ie];Ft.element.scrollLeft=Ft.left,Ft.element.scrollTop=Ft.top}}lE=!!sB,iB=sB=null}finally{hn=z,V.p=E,Q.T=b}}A.current=p,vo=2}}function w9(){if(vo===2){vo=0;var A=z0,p=Mx,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=Q.T,Q.T=null;var E=V.p;V.p=2;var z=hn;hn|=4;try{ZU(A,p.alternate,p)}finally{hn=z,V.p=E,Q.T=b}}vo=3}}function N9(){if(vo===4||vo===3){vo=0,de();var A=z0,p=Mx,b=Ux,E=u9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?vo=5:(vo=0,Mx=z0=null,C9(A,A.pendingLanes));var z=A.pendingLanes;if(z===0&&(H0=null),Za(b),p=p.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(et,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=Q.T,z=V.p,V.p=2,Q.T=null;try{for(var ee=A.onRecoverableError,pe=0;pe<E.length;pe++){var Ie=E[pe];ee(Ie.value,{componentStack:Ie.stack})}}finally{Q.T=p,V.p=z}}(Ux&3)!==0&&XC(),Gf(A),z=A.pendingLanes,(b&4194090)!==0&&(z&42)!==0?A===$3?yy++:(yy=0,$3=A):yy=0,wy(0)}}function C9(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,Sp(p)))}function XC(A){return y9(),w9(),N9(),E9()}function E9(){if(vo!==5)return!1;var A=z0,p=z3;z3=0;var b=Za(Ux),E=Q.T,z=V.p;try{V.p=32>b?32:b,Q.T=null,b=V3,V3=null;var ee=z0,pe=Ux;if(vo=0,Mx=z0=null,Ux=0,(hn&6)!==0)throw Error(a(331));var Ie=hn;if(hn|=4,l9(ee.current),s9(ee,ee.current,pe,b),hn=Ie,wy(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(et,ee)}catch{}return!0}finally{V.p=z,Q.T=E,C9(A,p)}}function j9(A,p,b){p=ca(b,p),p=N3(A.stateNode,p,2),A=Pt(A,p,2),A!==null&&(Dn(A,2),Gf(A))}function _n(A,p,b){if(A.tag===3)j9(A,A,b);else for(;p!==null;){if(p.tag===3){j9(p,A,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(H0===null||!H0.has(E))){A=ca(b,A),b=BU(2),E=Pt(p,b,2),E!==null&&(TU(b,E,p,A),Dn(E,2),Gf(E));break}}p=p.return}}function W3(A,p,b){var E=A.pingCache;if(E===null){E=A.pingCache=new u0e;var z=new Set;E.set(p,z)}else z=E.get(p),z===void 0&&(z=new Set,E.set(p,z));z.has(b)||(M3=!0,z.add(b),A=m0e.bind(null,A,p,b),p.then(A,A))}function m0e(A,p,b){var E=A.pingCache;E!==null&&E.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Ln===A&&(Ba&b)===b&&(Es===4||Es===3&&(Ba&62914560)===Ba&&300>xe()-H3?(hn&2)===0&&Qx(A,0):U3|=b,Lx===Ba&&(Lx=0)),Gf(A)}function k9(A,p){p===0&&(p=Pr()),A=wd(A,p),A!==null&&(Dn(A,p),Gf(A))}function p0e(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),k9(A,b)}function g0e(A,p){var b=0;switch(A.tag){case 13:var E=A.stateNode,z=A.memoizedState;z!==null&&(b=z.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(a(314))}E!==null&&E.delete(p),k9(A,b)}function x0e(A,p){return Ee(A,p)}var YC=null,zx=null,X3=!1,JC=!1,Y3=!1,zp=0;function Gf(A){A!==zx&&A.next===null&&(zx===null?YC=zx=A:zx=zx.next=A),JC=!0,X3||(X3=!0,b0e())}function wy(A,p){if(!Y3&&JC){Y3=!0;do for(var b=!1,E=YC;E!==null;){if(A!==0){var z=E.pendingLanes;if(z===0)var ee=0;else{var pe=E.suspendedLanes,Ie=E.pingedLanes;ee=(1<<31-nt(42|A)+1)-1,ee&=z&~(pe&~Ie),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(b=!0,T9(E,ee))}else ee=Ba,ee=Cr(E,E===Ln?ee:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(ee&3)===0||$r(E,ee)||(b=!0,T9(E,ee));E=E.next}while(b);Y3=!1}}function v0e(){S9()}function S9(){JC=X3=!1;var A=0;zp!==0&&(S0e()&&(A=zp),zp=0);for(var p=xe(),b=null,E=YC;E!==null;){var z=E.next,ee=_9(E,p);ee===0?(E.next=null,b===null?YC=z:b.next=z,z===null&&(zx=b)):(b=E,(A!==0||(ee&3)!==0)&&(JC=!0)),E=z}wy(A)}function _9(A,p){for(var b=A.suspendedLanes,E=A.pingedLanes,z=A.expirationTimes,ee=A.pendingLanes&-62914561;0<ee;){var pe=31-nt(ee),Ie=1<<pe,qe=z[pe];qe===-1?((Ie&b)===0||(Ie&E)!==0)&&(z[pe]=br(Ie,p)):qe<=p&&(A.expiredLanes|=Ie),ee&=~Ie}if(p=Ln,b=Ba,b=Cr(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,b===0||A===p&&(mn===2||mn===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&_e(E),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||$r(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(E!==null&&_e(E),Za(b)){case 2:case 8:b=ce;break;case 32:b=Ae;break;case 268435456:b=Pe;break;default:b=Ae}return E=B9.bind(null,A),b=Ee(b,E),A.callbackPriority=p,A.callbackNode=b,p}return E!==null&&E!==null&&_e(E),A.callbackPriority=2,A.callbackNode=null,2}function B9(A,p){if(vo!==0&&vo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(XC()&&A.callbackNode!==b)return null;var E=Ba;return E=Cr(A,A===Ln?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(f9(A,E,p),_9(A,xe()),A.callbackNode!=null&&A.callbackNode===b?B9.bind(null,A):null)}function T9(A,p){if(XC())return null;f9(A,p,!0)}function b0e(){B0e(function(){(hn&6)!==0?Ee(ye,v0e):S9()})}function J3(){return zp===0&&(zp=Sn()),zp}function I9(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Sc(""+A)}function O9(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function y0e(A,p,b,E,z){if(p==="submit"&&b&&b.stateNode===z){var ee=I9((z[la]||null).action),pe=E.submitter;pe&&(p=(p=pe[la]||null)?I9(p.formAction):pe.getAttribute("formAction"),p!==null&&(ee=p,pe=null));var Ie=new yu("action","action",null,E,z);A.push({event:Ie,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(zp!==0){var qe=pe?O9(z,pe):new FormData(z);Du(b,{pending:!0,data:qe,method:z.method,action:ee},null,qe)}}else typeof ee=="function"&&(Ie.preventDefault(),qe=pe?O9(z,pe):new FormData(z),Du(b,{pending:!0,data:qe,method:z.method,action:ee},ee,qe))},currentTarget:z}]})}}for(var Z3=0;Z3<$A.length;Z3++){var eB=$A[Z3],w0e=eB.toLowerCase(),N0e=eB[0].toUpperCase()+eB.slice(1);Jn(w0e,"on"+N0e)}Jn(C0,"onAnimationEnd"),Jn(_f,"onAnimationIteration"),Jn(Bf,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Tf,"onTransitionRun"),Jn(VA,"onTransitionStart"),Jn(E0,"onTransitionCancel"),Jn(If,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ny="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ny));function F9(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var E=A[b],z=E.event;E=E.listeners;e:{var ee=void 0;if(p)for(var pe=E.length-1;0<=pe;pe--){var Ie=E[pe],qe=Ie.instance,mt=Ie.currentTarget;if(Ie=Ie.listener,qe!==ee&&z.isPropagationStopped())break e;ee=Ie,z.currentTarget=mt;try{ee(z)}catch(Bt){MC(Bt)}z.currentTarget=null,ee=qe}else for(pe=0;pe<E.length;pe++){if(Ie=E[pe],qe=Ie.instance,mt=Ie.currentTarget,Ie=Ie.listener,qe!==ee&&z.isPropagationStopped())break e;ee=Ie,z.currentTarget=mt;try{ee(z)}catch(Bt){MC(Bt)}z.currentTarget=null,ee=qe}}}}function ba(A,p){var b=p[Wa];b===void 0&&(b=p[Wa]=new Set);var E=A+"__bubble";b.has(E)||(D9(p,A,2,!1),b.add(E))}function tB(A,p,b){var E=0;p&&(E|=4),D9(b,A,E,p)}var ZC="_reactListening"+Math.random().toString(36).slice(2);function rB(A){if(!A[ZC]){A[ZC]=!0,We.forEach(function(b){b!=="selectionchange"&&(C0e.has(b)||tB(b,!1,A),tB(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[ZC]||(p[ZC]=!0,tB("selectionchange",!1,p))}}function D9(A,p,b,E){switch(sQ(p)){case 2:var z=Y0e;break;case 8:z=J0e;break;default:z=pB}b=z.bind(null,p,b,A),z=void 0,!ho||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(z=!0),E?z!==void 0?A.addEventListener(p,b,{capture:!0,passive:z}):A.addEventListener(p,b,!0):z!==void 0?A.addEventListener(p,b,{passive:z}):A.addEventListener(p,b,!1)}function aB(A,p,b,E,z){var ee=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var pe=E.tag;if(pe===3||pe===4){var Ie=E.stateNode.containerInfo;if(Ie===z)break;if(pe===4)for(pe=E.return;pe!==null;){var qe=pe.tag;if((qe===3||qe===4)&&pe.stateNode.containerInfo===z)return;pe=pe.return}for(;Ie!==null;){if(pe=ge(Ie),pe===null)return;if(qe=pe.tag,qe===5||qe===6||qe===26||qe===27){E=ee=pe;continue e}Ie=Ie.parentNode}}E=E.return}v0(function(){var mt=ee,Bt=fn(b),Rt=[];e:{var xt=yd.get(A);if(xt!==void 0){var vt=yu,zr=A;switch(A){case"keypress":if(Lo(b)===0)break e;case"keydown":case"keyup":vt=Ic;break;case"focusin":zr="focus",vt=Nu;break;case"focusout":zr="blur",vt=Nu;break;case"beforeblur":case"afterblur":vt=Nu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=Nf;break;case C0:case _f:case Bf:vt=bf;break;case If:vt=be;break;case"scroll":case"scrollend":vt=LA;break;case"wheel":vt=Xe;break;case"copy":case"cut":case"paste":vt=yf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=vd;break;case"toggle":case"beforetoggle":vt=Ct}var Ir=(p&4)!==0,Cn=!Ir&&(A==="scroll"||A==="scrollend"),lt=Ir?xt!==null?xt+"Capture":null:xt;Ir=[];for(var tt=mt,ft;tt!==null;){var Ft=tt;if(ft=Ft.stateNode,Ft=Ft.tag,Ft!==5&&Ft!==26&&Ft!==27||ft===null||lt===null||(Ft=$i(tt,lt),Ft!=null&&Ir.push(Cy(tt,Ft,ft))),Cn)break;tt=tt.return}0<Ir.length&&(xt=new vt(xt,zr,null,b,Bt),Rt.push({event:xt,listeners:Ir}))}}if((p&7)===0){e:{if(xt=A==="mouseover"||A==="pointerover",vt=A==="mouseout"||A==="pointerout",xt&&b!==Hl&&(zr=b.relatedTarget||b.fromElement)&&(ge(zr)||zr[Ia]))break e;if((vt||xt)&&(xt=Bt.window===Bt?Bt:(xt=Bt.ownerDocument)?xt.defaultView||xt.parentWindow:window,vt?(zr=b.relatedTarget||b.toElement,vt=mt,zr=zr?ge(zr):null,zr!==null&&(Cn=i(zr),Ir=zr.tag,zr!==Cn||Ir!==5&&Ir!==27&&Ir!==6)&&(zr=null)):(vt=null,zr=mt),vt!==zr)){if(Ir=ys,Ft="onMouseLeave",lt="onMouseEnter",tt="mouse",(A==="pointerout"||A==="pointerover")&&(Ir=vd,Ft="onPointerLeave",lt="onPointerEnter",tt="pointer"),Cn=vt==null?xt:Oe(vt),ft=zr==null?xt:Oe(zr),xt=new Ir(Ft,tt+"leave",vt,b,Bt),xt.target=Cn,xt.relatedTarget=ft,Ft=null,ge(Bt)===mt&&(Ir=new Ir(lt,tt+"enter",zr,b,Bt),Ir.target=ft,Ir.relatedTarget=Cn,Ft=Ir),Cn=Ft,vt&&zr)t:{for(Ir=vt,lt=zr,tt=0,ft=Ir;ft;ft=Vx(ft))tt++;for(ft=0,Ft=lt;Ft;Ft=Vx(Ft))ft++;for(;0<tt-ft;)Ir=Vx(Ir),tt--;for(;0<ft-tt;)lt=Vx(lt),ft--;for(;tt--;){if(Ir===lt||lt!==null&&Ir===lt.alternate)break t;Ir=Vx(Ir),lt=Vx(lt)}Ir=null}else Ir=null;vt!==null&&P9(Rt,xt,vt,Ir,!1),zr!==null&&Cn!==null&&P9(Rt,Cn,zr,Ir,!0)}}e:{if(xt=mt?Oe(mt):window,vt=xt.nodeName&&xt.nodeName.toLowerCase(),vt==="select"||vt==="input"&&xt.type==="file")var hr=w0;else if(tn(xt))if(UA)hr=vx;else{hr=X1;var ma=Uo}else vt=xt.nodeName,!vt||vt.toLowerCase()!=="input"||xt.type!=="checkbox"&&xt.type!=="radio"?mt&&PA(mt.elementType)&&(hr=w0):hr=wp;if(hr&&(hr=hr(A,mt))){Kl(Rt,hr,b,Bt);break e}ma&&ma(A,xt,mt),A==="focusout"&&mt&&xt.type==="number"&&mt.memoizedProps.value!=null&&xu(xt,"number",xt.value)}switch(ma=mt?Oe(mt):window,A){case"focusin":(tn(ma)||ma.contentEditable==="true")&&(Qo=ma,Oc=mt,Su=null);break;case"focusout":Su=Oc=Qo=null;break;case"mousedown":Fc=!0;break;case"contextmenu":case"mouseup":case"dragend":Fc=!1,Yn(Rt,b,Bt);break;case"selectionchange":if(Sf)break;case"keydown":case"keyup":Yn(Rt,b,Bt)}var yr;if(Jt)e:{switch(A){case"compositionstart":var Or="onCompositionStart";break e;case"compositionend":Or="onCompositionEnd";break e;case"compositionupdate":Or="onCompositionUpdate";break e}Or=void 0}else Tr?ht(A,b)&&(Or="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Or="onCompositionStart");Or&&(fe&&b.locale!=="ko"&&(Tr||Or!=="onCompositionStart"?Or==="onCompositionEnd"&&Tr&&(yr=RA()):(Ro=Bt,bu="value"in Ro?Ro.value:Ro.textContent,Tr=!0)),ma=eE(mt,Or),0<ma.length&&(Or=new pd(Or,A,null,b,Bt),Rt.push({event:Or,listeners:ma}),yr?Or.data=yr:(yr=Ht(b),yr!==null&&(Or.data=yr)))),(yr=se?ha(A,b):Gr(A,b))&&(Or=eE(mt,"onBeforeInput"),0<Or.length&&(ma=new pd("onBeforeInput","beforeinput",null,b,Bt),Rt.push({event:ma,listeners:Or}),ma.data=yr)),y0e(Rt,A,mt,b,Bt)}F9(Rt,p)})}function Cy(A,p,b){return{instance:A,listener:p,currentTarget:b}}function eE(A,p){for(var b=p+"Capture",E=[];A!==null;){var z=A,ee=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||ee===null||(z=$i(A,b),z!=null&&E.unshift(Cy(A,z,ee)),z=$i(A,p),z!=null&&E.push(Cy(A,z,ee))),A.tag===3)return E;A=A.return}return[]}function Vx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function P9(A,p,b,E,z){for(var ee=p._reactName,pe=[];b!==null&&b!==E;){var Ie=b,qe=Ie.alternate,mt=Ie.stateNode;if(Ie=Ie.tag,qe!==null&&qe===E)break;Ie!==5&&Ie!==26&&Ie!==27||mt===null||(qe=mt,z?(mt=$i(b,ee),mt!=null&&pe.unshift(Cy(b,mt,qe))):z||(mt=$i(b,ee),mt!=null&&pe.push(Cy(b,mt,qe)))),b=b.return}pe.length!==0&&A.push({event:p,listeners:pe})}var E0e=/\r\n?/g,j0e=/\u0000|\uFFFD/g;function R9(A){return(typeof A=="string"?A:""+A).replace(E0e,`
`).replace(j0e,"")}function L9(A,p){return p=R9(p),R9(A)===p}function tE(){}function Nn(A,p,b,E,z,ee){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||Do(A,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&Do(A,""+E);break;case"className":ta(A,"class",E);break;case"tabIndex":ta(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ta(A,b,E);break;case"style":DA(A,E,ee);break;case"data":if(p!=="object"){ta(A,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=Sc(""+E),A.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(b==="formAction"?(p!=="input"&&Nn(A,p,"name",z.name,z,null),Nn(A,p,"formEncType",z.formEncType,z,null),Nn(A,p,"formMethod",z.formMethod,z,null),Nn(A,p,"formTarget",z.formTarget,z,null)):(Nn(A,p,"encType",z.encType,z,null),Nn(A,p,"method",z.method,z,null),Nn(A,p,"target",z.target,z,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=Sc(""+E),A.setAttribute(b,E);break;case"onClick":E!=null&&(A.onclick=tE);break;case"onScroll":E!=null&&ba("scroll",A);break;case"onScrollEnd":E!=null&&ba("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(a(61));if(b=E.__html,b!=null){if(z.children!=null)throw Error(a(60));A.innerHTML=b}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}b=Sc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""+E):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":E===!0?A.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,E):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(b,E):A.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(b):A.setAttribute(b,E);break;case"popover":ba("beforetoggle",A),ba("toggle",A),ea(A,"popover",E);break;case"xlinkActuate":ia(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":ia(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":ia(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":ia(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":ia(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":ia(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":ia(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":ia(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":ia(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":ea(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=kc.get(b)||b,ea(A,b,E))}}function nB(A,p,b,E,z,ee){switch(b){case"style":DA(A,E,ee);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(a(61));if(b=E.__html,b!=null){if(z.children!=null)throw Error(a(60));A.innerHTML=b}}break;case"children":typeof E=="string"?Do(A,E):(typeof E=="number"||typeof E=="bigint")&&Do(A,""+E);break;case"onScroll":E!=null&&ba("scroll",A);break;case"onScrollEnd":E!=null&&ba("scrollend",A);break;case"onClick":E!=null&&(A.onclick=tE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ye.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(z=b.endsWith("Capture"),p=b.slice(2,z?b.length-7:void 0),ee=A[la]||null,ee=ee!=null?ee[b]:null,typeof ee=="function"&&A.removeEventListener(p,ee,z),typeof E=="function")){typeof ee!="function"&&ee!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,E,z);break e}b in A?A[b]=E:E===!0?A.setAttribute(b,""):ea(A,b,E)}}}function bo(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ba("error",A),ba("load",A);var E=!1,z=!1,ee;for(ee in b)if(b.hasOwnProperty(ee)){var pe=b[ee];if(pe!=null)switch(ee){case"src":E=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,p));default:Nn(A,p,ee,pe,b,null)}}z&&Nn(A,p,"srcSet",b.srcSet,b,null),E&&Nn(A,p,"src",b.src,b,null);return;case"input":ba("invalid",A);var Ie=ee=pe=z=null,qe=null,mt=null;for(E in b)if(b.hasOwnProperty(E)){var Bt=b[E];if(Bt!=null)switch(E){case"name":z=Bt;break;case"type":pe=Bt;break;case"checked":qe=Bt;break;case"defaultChecked":mt=Bt;break;case"value":ee=Bt;break;case"defaultValue":Ie=Bt;break;case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(a(137,p));break;default:Nn(A,p,E,Bt,b,null)}}gu(A,ee,Ie,qe,mt,pe,z,!1),pu(A);return;case"select":ba("invalid",A),E=pe=ee=null;for(z in b)if(b.hasOwnProperty(z)&&(Ie=b[z],Ie!=null))switch(z){case"value":ee=Ie;break;case"defaultValue":pe=Ie;break;case"multiple":E=Ie;default:Nn(A,p,z,Ie,b,null)}p=ee,b=pe,A.multiple=!!E,p!=null?Ql(A,!!E,p,!1):b!=null&&Ql(A,!!E,b,!0);return;case"textarea":ba("invalid",A),ee=z=E=null;for(pe in b)if(b.hasOwnProperty(pe)&&(Ie=b[pe],Ie!=null))switch(pe){case"value":E=Ie;break;case"defaultValue":z=Ie;break;case"children":ee=Ie;break;case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(a(91));break;default:Nn(A,p,pe,Ie,b,null)}vu(A,E,z,ee),pu(A);return;case"option":for(qe in b)if(b.hasOwnProperty(qe)&&(E=b[qe],E!=null))switch(qe){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Nn(A,p,qe,E,b,null)}return;case"dialog":ba("beforetoggle",A),ba("toggle",A),ba("cancel",A),ba("close",A);break;case"iframe":case"object":ba("load",A);break;case"video":case"audio":for(E=0;E<Ny.length;E++)ba(Ny[E],A);break;case"image":ba("error",A),ba("load",A);break;case"details":ba("toggle",A);break;case"embed":case"source":case"link":ba("error",A),ba("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in b)if(b.hasOwnProperty(mt)&&(E=b[mt],E!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,p));default:Nn(A,p,mt,E,b,null)}return;default:if(PA(p)){for(Bt in b)b.hasOwnProperty(Bt)&&(E=b[Bt],E!==void 0&&nB(A,p,Bt,E,b,void 0));return}}for(Ie in b)b.hasOwnProperty(Ie)&&(E=b[Ie],E!=null&&Nn(A,p,Ie,E,b,null))}function k0e(A,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,ee=null,pe=null,Ie=null,qe=null,mt=null,Bt=null;for(vt in b){var Rt=b[vt];if(b.hasOwnProperty(vt)&&Rt!=null)switch(vt){case"checked":break;case"value":break;case"defaultValue":qe=Rt;default:E.hasOwnProperty(vt)||Nn(A,p,vt,null,E,Rt)}}for(var xt in E){var vt=E[xt];if(Rt=b[xt],E.hasOwnProperty(xt)&&(vt!=null||Rt!=null))switch(xt){case"type":ee=vt;break;case"name":z=vt;break;case"checked":mt=vt;break;case"defaultChecked":Bt=vt;break;case"value":pe=vt;break;case"defaultValue":Ie=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(a(137,p));break;default:vt!==Rt&&Nn(A,p,xt,vt,E,Rt)}}_i(A,pe,Ie,qe,mt,Bt,ee,z);return;case"select":vt=pe=Ie=xt=null;for(ee in b)if(qe=b[ee],b.hasOwnProperty(ee)&&qe!=null)switch(ee){case"value":break;case"multiple":vt=qe;default:E.hasOwnProperty(ee)||Nn(A,p,ee,null,E,qe)}for(z in E)if(ee=E[z],qe=b[z],E.hasOwnProperty(z)&&(ee!=null||qe!=null))switch(z){case"value":xt=ee;break;case"defaultValue":Ie=ee;break;case"multiple":pe=ee;default:ee!==qe&&Nn(A,p,z,ee,E,qe)}p=Ie,b=pe,E=vt,xt!=null?Ql(A,!!b,xt,!1):!!E!=!!b&&(p!=null?Ql(A,!!b,p,!0):Ql(A,!!b,b?[]:"",!1));return;case"textarea":vt=xt=null;for(Ie in b)if(z=b[Ie],b.hasOwnProperty(Ie)&&z!=null&&!E.hasOwnProperty(Ie))switch(Ie){case"value":break;case"children":break;default:Nn(A,p,Ie,null,E,z)}for(pe in E)if(z=E[pe],ee=b[pe],E.hasOwnProperty(pe)&&(z!=null||ee!=null))switch(pe){case"value":xt=z;break;case"defaultValue":vt=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(91));break;default:z!==ee&&Nn(A,p,pe,z,E,ee)}La(A,xt,vt);return;case"option":for(var zr in b)if(xt=b[zr],b.hasOwnProperty(zr)&&xt!=null&&!E.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:Nn(A,p,zr,null,E,xt)}for(qe in E)if(xt=E[qe],vt=b[qe],E.hasOwnProperty(qe)&&xt!==vt&&(xt!=null||vt!=null))switch(qe){case"selected":A.selected=xt&&typeof xt!="function"&&typeof xt!="symbol";break;default:Nn(A,p,qe,xt,E,vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ir in b)xt=b[Ir],b.hasOwnProperty(Ir)&&xt!=null&&!E.hasOwnProperty(Ir)&&Nn(A,p,Ir,null,E,xt);for(mt in E)if(xt=E[mt],vt=b[mt],E.hasOwnProperty(mt)&&xt!==vt&&(xt!=null||vt!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(a(137,p));break;default:Nn(A,p,mt,xt,E,vt)}return;default:if(PA(p)){for(var Cn in b)xt=b[Cn],b.hasOwnProperty(Cn)&&xt!==void 0&&!E.hasOwnProperty(Cn)&&nB(A,p,Cn,void 0,E,xt);for(Bt in E)xt=E[Bt],vt=b[Bt],!E.hasOwnProperty(Bt)||xt===vt||xt===void 0&&vt===void 0||nB(A,p,Bt,xt,E,vt);return}}for(var lt in b)xt=b[lt],b.hasOwnProperty(lt)&&xt!=null&&!E.hasOwnProperty(lt)&&Nn(A,p,lt,null,E,xt);for(Rt in E)xt=E[Rt],vt=b[Rt],!E.hasOwnProperty(Rt)||xt===vt||xt==null&&vt==null||Nn(A,p,Rt,xt,E,vt)}var sB=null,iB=null;function rE(A){return A.nodeType===9?A:A.ownerDocument}function M9(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U9(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function oB(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var lB=null;function S0e(){var A=window.event;return A&&A.type==="popstate"?A===lB?!1:(lB=A,!0):(lB=null,!1)}var Q9=typeof setTimeout=="function"?setTimeout:void 0,_0e=typeof clearTimeout=="function"?clearTimeout:void 0,H9=typeof Promise=="function"?Promise:void 0,B0e=typeof queueMicrotask=="function"?queueMicrotask:typeof H9<"u"?function(A){return H9.resolve(null).then(A).catch(T0e)}:Q9;function T0e(A){setTimeout(function(){throw A})}function $0(A){return A==="head"}function z9(A,p){var b=p,E=0,z=0;do{var ee=b.nextSibling;if(A.removeChild(b),ee&&ee.nodeType===8)if(b=ee.data,b==="/$"){if(0<E&&8>E){b=E;var pe=A.ownerDocument;if(b&1&&Ey(pe.documentElement),b&2&&Ey(pe.body),b&4)for(b=pe.head,Ey(b),pe=b.firstChild;pe;){var Ie=pe.nextSibling,qe=pe.nodeName;pe[De]||qe==="SCRIPT"||qe==="STYLE"||qe==="LINK"&&pe.rel.toLowerCase()==="stylesheet"||b.removeChild(pe),pe=Ie}}if(z===0){A.removeChild(ee),Oy(p);return}z--}else b==="$"||b==="$?"||b==="$!"?z++:E=b.charCodeAt(0)-48;else E=0;b=ee}while(b);Oy(p)}function cB(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":cB(b),Le(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function I0e(A,p,b,E){for(;A.nodeType===1;){var z=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[De])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(ee=A.getAttribute("rel"),ee==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(ee!==z.rel||A.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||A.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||A.getAttribute("title")!==(z.title==null?null:z.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(ee=A.getAttribute("src"),(ee!==(z.src==null?null:z.src)||A.getAttribute("type")!==(z.type==null?null:z.type)||A.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&ee&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var ee=z.name==null?null:""+z.name;if(z.type==="hidden"&&A.getAttribute("name")===ee)return A}else return A;if(A=Dd(A.nextSibling),A===null)break}return null}function O0e(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=Dd(A.nextSibling),A===null))return null;return A}function uB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function F0e(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function Dd(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var dB=null;function V9(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function $9(A,p,b){switch(p=rE(b),A){case"html":if(A=p.documentElement,!A)throw Error(a(452));return A;case"head":if(A=p.head,!A)throw Error(a(453));return A;case"body":if(A=p.body,!A)throw Error(a(454));return A;default:throw Error(a(451))}}function Ey(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);Le(A)}var Lu=new Map,G9=new Set;function aE(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var lh=V.d;V.d={f:D0e,r:P0e,D:R0e,C:L0e,L:M0e,m:U0e,X:H0e,S:Q0e,M:z0e};function D0e(){var A=lh.f(),p=KC();return A||p}function P0e(A){var p=me(A);p!==null&&p.tag===5&&p.type==="form"?Lp(p):lh.r(A)}var $x=typeof document>"u"?null:document;function q9(A,p,b){var E=$x;if(E&&typeof p=="string"&&p){var z=ja(p);z='link[rel="'+A+'"][href="'+z+'"]',typeof b=="string"&&(z+='[crossorigin="'+b+'"]'),G9.has(z)||(G9.add(z),A={rel:A,crossOrigin:b,href:p},E.querySelector(z)===null&&(p=E.createElement("link"),bo(p,"link",A),Re(p),E.head.appendChild(p)))}}function R0e(A){lh.D(A),q9("dns-prefetch",A,null)}function L0e(A,p){lh.C(A,p),q9("preconnect",A,p)}function M0e(A,p,b){lh.L(A,p,b);var E=$x;if(E&&A&&p){var z='link[rel="preload"][as="'+ja(p)+'"]';p==="image"&&b&&b.imageSrcSet?(z+='[imagesrcset="'+ja(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(z+='[imagesizes="'+ja(b.imageSizes)+'"]')):z+='[href="'+ja(A)+'"]';var ee=z;switch(p){case"style":ee=Gx(A);break;case"script":ee=qx(A)}Lu.has(ee)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),Lu.set(ee,A),E.querySelector(z)!==null||p==="style"&&E.querySelector(jy(ee))||p==="script"&&E.querySelector(ky(ee))||(p=E.createElement("link"),bo(p,"link",A),Re(p),E.head.appendChild(p)))}}function U0e(A,p){lh.m(A,p);var b=$x;if(b&&A){var E=p&&typeof p.as=="string"?p.as:"script",z='link[rel="modulepreload"][as="'+ja(E)+'"][href="'+ja(A)+'"]',ee=z;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=qx(A)}if(!Lu.has(ee)&&(A=d({rel:"modulepreload",href:A},p),Lu.set(ee,A),b.querySelector(z)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(ky(ee)))return}E=b.createElement("link"),bo(E,"link",A),Re(E),b.head.appendChild(E)}}}function Q0e(A,p,b){lh.S(A,p,b);var E=$x;if(E&&A){var z=He(E).hoistableStyles,ee=Gx(A);p=p||"default";var pe=z.get(ee);if(!pe){var Ie={loading:0,preload:null};if(pe=E.querySelector(jy(ee)))Ie.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=Lu.get(ee))&&fB(A,b);var qe=pe=E.createElement("link");Re(qe),bo(qe,"link",A),qe._p=new Promise(function(mt,Bt){qe.onload=mt,qe.onerror=Bt}),qe.addEventListener("load",function(){Ie.loading|=1}),qe.addEventListener("error",function(){Ie.loading|=2}),Ie.loading|=4,nE(pe,p,E)}pe={type:"stylesheet",instance:pe,count:1,state:Ie},z.set(ee,pe)}}}function H0e(A,p){lh.X(A,p);var b=$x;if(b&&A){var E=He(b).hoistableScripts,z=qx(A),ee=E.get(z);ee||(ee=b.querySelector(ky(z)),ee||(A=d({src:A,async:!0},p),(p=Lu.get(z))&&AB(A,p),ee=b.createElement("script"),Re(ee),bo(ee,"link",A),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},E.set(z,ee))}}function z0e(A,p){lh.M(A,p);var b=$x;if(b&&A){var E=He(b).hoistableScripts,z=qx(A),ee=E.get(z);ee||(ee=b.querySelector(ky(z)),ee||(A=d({src:A,async:!0,type:"module"},p),(p=Lu.get(z))&&AB(A,p),ee=b.createElement("script"),Re(ee),bo(ee,"link",A),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},E.set(z,ee))}}function K9(A,p,b,E){var z=(z=ae.current)?aE(z):null;if(!z)throw Error(a(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Gx(b.href),b=He(z).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=Gx(b.href);var ee=He(z).hoistableStyles,pe=ee.get(A);if(pe||(z=z.ownerDocument||z,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(A,pe),(ee=z.querySelector(jy(A)))&&!ee._p&&(pe.instance=ee,pe.state.loading=5),Lu.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Lu.set(A,b),ee||V0e(z,A,b,pe.state))),p&&E===null)throw Error(a(528,""));return pe}if(p&&E!==null)throw Error(a(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=qx(b),b=He(z).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,A))}}function Gx(A){return'href="'+ja(A)+'"'}function jy(A){return'link[rel="stylesheet"]['+A+"]"}function W9(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function V0e(A,p,b,E){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=A.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),bo(p,"link",b),Re(p),A.head.appendChild(p))}function qx(A){return'[src="'+ja(A)+'"]'}function ky(A){return"script[async]"+A}function X9(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=A.querySelector('style[data-href~="'+ja(b.href)+'"]');if(E)return p.instance=E,Re(E),E;var z=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),Re(E),bo(E,"style",z),nE(E,b.precedence,A),p.instance=E;case"stylesheet":z=Gx(b.href);var ee=A.querySelector(jy(z));if(ee)return p.state.loading|=4,p.instance=ee,Re(ee),ee;E=W9(b),(z=Lu.get(z))&&fB(E,z),ee=(A.ownerDocument||A).createElement("link"),Re(ee);var pe=ee;return pe._p=new Promise(function(Ie,qe){pe.onload=Ie,pe.onerror=qe}),bo(ee,"link",E),p.state.loading|=4,nE(ee,b.precedence,A),p.instance=ee;case"script":return ee=qx(b.src),(z=A.querySelector(ky(ee)))?(p.instance=z,Re(z),z):(E=b,(z=Lu.get(ee))&&(E=d({},b),AB(E,z)),A=A.ownerDocument||A,z=A.createElement("script"),Re(z),bo(z,"link",E),A.head.appendChild(z),p.instance=z);case"void":return null;default:throw Error(a(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,nE(E,b.precedence,A));return p.instance}function nE(A,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=E.length?E[E.length-1]:null,ee=z,pe=0;pe<E.length;pe++){var Ie=E[pe];if(Ie.dataset.precedence===p)ee=Ie;else if(ee!==z)break}ee?ee.parentNode.insertBefore(A,ee.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function fB(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function AB(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var sE=null;function Y9(A,p,b){if(sE===null){var E=new Map,z=sE=new Map;z.set(b,E)}else z=sE,E=z.get(b),E||(E=new Map,z.set(b,E));if(E.has(A))return E;for(E.set(A,null),b=b.getElementsByTagName(A),z=0;z<b.length;z++){var ee=b[z];if(!(ee[De]||ee[xa]||A==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=ee.getAttribute(p)||"";pe=A+pe;var Ie=E.get(pe);Ie?Ie.push(ee):E.set(pe,[ee])}}return E}function J9(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function $0e(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function Z9(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Sy=null;function G0e(){}function q0e(A,p,b){if(Sy===null)throw Error(a(475));var E=Sy;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var z=Gx(b.href),ee=A.querySelector(jy(z));if(ee){A=ee._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=iE.bind(E),A.then(E,E)),p.state.loading|=4,p.instance=ee,Re(ee);return}ee=A.ownerDocument||A,b=W9(b),(z=Lu.get(z))&&fB(b,z),ee=ee.createElement("link"),Re(ee);var pe=ee;pe._p=new Promise(function(Ie,qe){pe.onload=Ie,pe.onerror=qe}),bo(ee,"link",b),p.instance=ee}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=iE.bind(E),A.addEventListener("load",p),A.addEventListener("error",p))}}function K0e(){if(Sy===null)throw Error(a(475));var A=Sy;return A.stylesheets&&A.count===0&&hB(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&hB(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function iE(){if(this.count--,this.count===0){if(this.stylesheets)hB(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var oE=null;function hB(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,oE=new Map,p.forEach(W0e,A),oE=null,iE.call(A))}function W0e(A,p){if(!(p.state.loading&4)){var b=oE.get(A);if(b)var E=b.get(null);else{b=new Map,oE.set(A,b);for(var z=A.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<z.length;ee++){var pe=z[ee];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(b.set(pe.dataset.precedence,pe),E=pe)}E&&b.set(null,E)}z=p.instance,pe=z.getAttribute("data-precedence"),ee=b.get(pe)||E,ee===E&&b.set(null,z),b.set(pe,z),this.count++,E=iE.bind(this),z.addEventListener("load",E),z.addEventListener("error",E),ee?ee.parentNode.insertBefore(z,ee.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(z,A.firstChild)),p.state.loading|=4}}var _y={$$typeof:C,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function X0e(A,p,b,E,z,ee,pe,Ie){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.hiddenUpdates=Ra(null),this.identifierPrefix=E,this.onUncaughtError=z,this.onCaughtError=ee,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ie,this.incompleteTransitions=new Map}function eQ(A,p,b,E,z,ee,pe,Ie,qe,mt,Bt,Rt){return A=new X0e(A,p,b,pe,Ie,qe,mt,Rt),p=1,ee===!0&&(p|=24),ee=Wi(3,null,null,p),A.current=ee,ee.stateNode=A,p=J1(),p.refCount++,A.pooledCache=p,p.refCount++,ee.memoizedState={element:E,isDehydrated:b,cache:p},Ze(ee),A}function tQ(A){return A?(A=fi,A):fi}function rQ(A,p,b,E,z,ee){z=tQ(z),E.context===null?E.context=z:E.pendingContext=z,E=St(p),E.payload={element:b},ee=ee===void 0?null:ee,ee!==null&&(E.callback=ee),b=Pt(A,E,p),b!==null&&(Hc(b,A,p),It(b,A,p))}function aQ(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function mB(A,p){aQ(A,p),(A=A.alternate)&&aQ(A,p)}function nQ(A){if(A.tag===13){var p=wd(A,67108864);p!==null&&Hc(p,A,67108864),mB(A,67108864)}}var lE=!0;function Y0e(A,p,b,E){var z=Q.T;Q.T=null;var ee=V.p;try{V.p=2,pB(A,p,b,E)}finally{V.p=ee,Q.T=z}}function J0e(A,p,b,E){var z=Q.T;Q.T=null;var ee=V.p;try{V.p=8,pB(A,p,b,E)}finally{V.p=ee,Q.T=z}}function pB(A,p,b,E){if(lE){var z=gB(E);if(z===null)aB(A,p,E,cE,b),iQ(A,E);else if(eme(z,A,p,b,E))E.stopPropagation();else if(iQ(A,E),p&4&&-1<Z0e.indexOf(A)){for(;z!==null;){var ee=me(z);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var pe=Kt(ee.pendingLanes);if(pe!==0){var Ie=ee;for(Ie.pendingLanes|=2,Ie.entangledLanes|=2;pe;){var qe=1<<31-nt(pe);Ie.entanglements[1]|=qe,pe&=~qe}Gf(ee),(hn&6)===0&&(GC=xe()+500,wy(0))}}break;case 13:Ie=wd(ee,2),Ie!==null&&Hc(Ie,ee,2),KC(),mB(ee,2)}if(ee=gB(E),ee===null&&aB(A,p,E,cE,b),ee===z)break;z=ee}z!==null&&E.stopPropagation()}else aB(A,p,E,null,b)}}function gB(A){return A=fn(A),xB(A)}var cE=null;function xB(A){if(cE=null,A=ge(A),A!==null){var p=i(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=o(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return cE=A,null}function sQ(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case ye:return 2;case ce:return 8;case Ae:case Ne:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var vB=!1,G0=null,q0=null,K0=null,By=new Map,Ty=new Map,W0=[],Z0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iQ(A,p){switch(A){case"focusin":case"focusout":G0=null;break;case"dragenter":case"dragleave":q0=null;break;case"mouseover":case"mouseout":K0=null;break;case"pointerover":case"pointerout":By.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ty.delete(p.pointerId)}}function Iy(A,p,b,E,z,ee){return A===null||A.nativeEvent!==ee?(A={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:ee,targetContainers:[z]},p!==null&&(p=me(p),p!==null&&nQ(p)),A):(A.eventSystemFlags|=E,p=A.targetContainers,z!==null&&p.indexOf(z)===-1&&p.push(z),A)}function eme(A,p,b,E,z){switch(p){case"focusin":return G0=Iy(G0,A,p,b,E,z),!0;case"dragenter":return q0=Iy(q0,A,p,b,E,z),!0;case"mouseover":return K0=Iy(K0,A,p,b,E,z),!0;case"pointerover":var ee=z.pointerId;return By.set(ee,Iy(By.get(ee)||null,A,p,b,E,z)),!0;case"gotpointercapture":return ee=z.pointerId,Ty.set(ee,Iy(Ty.get(ee)||null,A,p,b,E,z)),!0}return!1}function oQ(A){var p=ge(A.target);if(p!==null){var b=i(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){A.blockedOn=p,Us(A.priority,function(){if(b.tag===13){var E=Qc();E=gs(E);var z=wd(b,E);z!==null&&Hc(z,b,E),mB(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function uE(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=gB(A.nativeEvent);if(b===null){b=A.nativeEvent;var E=new b.constructor(b.type,b);Hl=E,b.target.dispatchEvent(E),Hl=null}else return p=me(b),p!==null&&nQ(p),A.blockedOn=b,!1;p.shift()}return!0}function lQ(A,p,b){uE(A)&&b.delete(p)}function tme(){vB=!1,G0!==null&&uE(G0)&&(G0=null),q0!==null&&uE(q0)&&(q0=null),K0!==null&&uE(K0)&&(K0=null),By.forEach(lQ),Ty.forEach(lQ)}function dE(A,p){A.blockedOn===p&&(A.blockedOn=null,vB||(vB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tme)))}var fE=null;function cQ(A){fE!==A&&(fE=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){fE===A&&(fE=null);for(var p=0;p<A.length;p+=3){var b=A[p],E=A[p+1],z=A[p+2];if(typeof E!="function"){if(xB(E||b)===null)continue;break}var ee=me(b);ee!==null&&(A.splice(p,3),p-=3,Du(ee,{pending:!0,data:z,method:b.method,action:E},E,z))}}))}function Oy(A){function p(qe){return dE(qe,A)}G0!==null&&dE(G0,A),q0!==null&&dE(q0,A),K0!==null&&dE(K0,A),By.forEach(p),Ty.forEach(p);for(var b=0;b<W0.length;b++){var E=W0[b];E.blockedOn===A&&(E.blockedOn=null)}for(;0<W0.length&&(b=W0[0],b.blockedOn===null);)oQ(b),b.blockedOn===null&&W0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var z=b[E],ee=b[E+1],pe=z[la]||null;if(typeof ee=="function")pe||cQ(b);else if(pe){var Ie=null;if(ee&&ee.hasAttribute("formAction")){if(z=ee,pe=ee[la]||null)Ie=pe.formAction;else if(xB(z)!==null)continue}else Ie=pe.action;typeof Ie=="function"?b[E+1]=Ie:(b.splice(E,3),E-=3),cQ(b)}}}function bB(A){this._internalRoot=A}AE.prototype.render=bB.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(a(409));var b=p.current,E=Qc();rQ(b,E,A,p,null,null)},AE.prototype.unmount=bB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;rQ(A.current,2,null,A,null,null),KC(),p[Ia]=null}};function AE(A){this._internalRoot=A}AE.prototype.unstable_scheduleHydration=function(A){if(A){var p=Pn();A={blockedOn:null,target:A,priority:p};for(var b=0;b<W0.length&&p!==0&&p<W0[b].priority;b++);W0.splice(b,0,A),b===0&&oQ(A)}};var uQ=t.version;if(uQ!=="19.1.1")throw Error(a(527,uQ,"19.1.1"));V.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(a(188)):(A=Object.keys(A).join(","),Error(a(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var rme={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hE.isDisabled&&hE.supportsFiber)try{et=hE.inject(rme),Ke=hE}catch{}}return Dy.createRoot=function(A,p){if(!n(A))throw Error(a(299));var b=!1,E="",z=jU,ee=kU,pe=SU,Ie=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(z=p.onUncaughtError),p.onCaughtError!==void 0&&(ee=p.onCaughtError),p.onRecoverableError!==void 0&&(pe=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Ie=p.unstable_transitionCallbacks)),p=eQ(A,1,!1,null,null,b,E,z,ee,pe,Ie,null),A[Ia]=p.current,rB(A),new bB(p)},Dy.hydrateRoot=function(A,p,b){if(!n(A))throw Error(a(299));var E=!1,z="",ee=jU,pe=kU,Ie=SU,qe=null,mt=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(z=b.identifierPrefix),b.onUncaughtError!==void 0&&(ee=b.onUncaughtError),b.onCaughtError!==void 0&&(pe=b.onCaughtError),b.onRecoverableError!==void 0&&(Ie=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(qe=b.unstable_transitionCallbacks),b.formState!==void 0&&(mt=b.formState)),p=eQ(A,1,!0,p,b??null,E,z,ee,pe,Ie,qe,mt),p.context=tQ(null),b=p.current,E=Qc(),E=gs(E),z=St(E),z.callback=null,Pt(b,z,E),b=E,p.current.lanes=b,Dn(p,b),Gf(p),A[Ia]=p.current,rB(A),new AE(p)},Dy.version="19.1.1",Dy}var bQ;function pme(){if(bQ)return CB.exports;bQ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),CB.exports=mme(),CB.exports}var gme=pme();const xme=Ml(gme),vme=()=>{};var yQ={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pZ=function(e){const t=[];let r=0;for(let a=0;a<e.length;a++){let n=e.charCodeAt(a);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=n&63|128):(n&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(n=65536+((n&1023)<<10)+(e.charCodeAt(++a)&1023),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=n&63|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=n&63|128)}return t},bme=function(e){const t=[];let r=0,a=0;for(;r<e.length;){const n=e[r++];if(n<128)t[a++]=String.fromCharCode(n);else if(n>191&&n<224){const i=e[r++];t[a++]=String.fromCharCode((n&31)<<6|i&63)}else if(n>239&&n<365){const i=e[r++],o=e[r++],l=e[r++],c=((n&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const i=e[r++],o=e[r++];t[a++]=String.fromCharCode((n&15)<<12|(i&63)<<6|o&63)}}return t.join("")},gZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let n=0;n<e.length;n+=3){const i=e[n],o=n+1<e.length,l=o?e[n+1]:0,c=n+2<e.length,u=c?e[n+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(h=64)),a.push(r[d],r[f],r[h],r[m])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pZ(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):bme(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let n=0;n<e.length;){const i=r[e.charAt(n++)],l=n<e.length?r[e.charAt(n)]:0;++n;const u=n<e.length?r[e.charAt(n)]:64;++n;const f=n<e.length?r[e.charAt(n)]:64;if(++n,i==null||l==null||u==null||f==null)throw new yme;const h=i<<2|l>>4;if(a.push(h),u!==64){const m=l<<4&240|u>>2;if(a.push(m),f!==64){const g=u<<6&192|f;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class yme extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wme=function(e){const t=pZ(e);return gZ.encodeByteArray(t,!0)},R5=function(e){return wme(e).replace(/\./g,"")},xZ=function(e){try{return gZ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nme(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cme=()=>Nme().__FIREBASE_DEFAULTS__,Eme=()=>{if(typeof process>"u"||typeof yQ>"u")return;const e=yQ.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},jme=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&xZ(e[1]);return t&&JSON.parse(t)},qS=()=>{try{return vme()||Cme()||Eme()||jme()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vZ=e=>{var t,r;return(r=(t=qS())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},WP=e=>{const t=vZ(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},bZ=()=>{var e;return(e=qS())==null?void 0:e.config},yZ=e=>{var t;return(t=qS())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kme{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KS(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wZ(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${a}`,aud:a,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[R5(JSON.stringify(r)),R5(JSON.stringify(o)),""].join(".")}const Q2={};function Sme(){const e={prod:[],emulator:[]};for(const t of Object.keys(Q2))Q2[t]?e.emulator.push(t):e.prod.push(t);return e}function _me(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let wQ=!1;function WS(e,t){if(typeof window>"u"||typeof document>"u"||!i0(window.location.host)||Q2[e]===t||Q2[e]||wQ)return;Q2[e]=t;function r(h){return`__firebase__banner__${h}`}const a="__firebase__banner",i=Sme().prod.length>0;function o(){const h=document.getElementById(a);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{wQ=!0,o()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=_me(a),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),N=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const C=h.element;l(C),d(v,x);const T=u();c(N,y),C.append(N,g,v,T),document.body.appendChild(C)}i?(g.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bme(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pl())}function Tme(){var t;const e=(t=qS())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ime(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ome(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Fme(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dme(){const e=pl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Pme(){return!Tme()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rme(){try{return typeof indexedDB=="object"}catch{return!1}}function Lme(){return new Promise((e,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(a);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(a),e(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var i;t(((i=n.error)==null?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme="FirebaseError";class uf extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=Mme,Object.setPrototypeOf(this,uf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vN.prototype.create)}}class vN{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},n=`${this.service}/${t}`,i=this.errors[t],o=i?Ume(i,a):"Error",l=`${this.serviceName}: ${o} (${n}).`;return new uf(n,l,a)}}function Ume(e,t){return e.replace(Qme,(r,a)=>{const n=t[a];return n!=null?String(n):`<${a}?>`})}const Qme=/\{\$([^}]+)}/g;function Hme(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function zm(e,t){if(e===t)return!0;const r=Object.keys(e),a=Object.keys(t);for(const n of r){if(!a.includes(n))return!1;const i=e[n],o=t[n];if(NQ(i)&&NQ(o)){if(!zm(i,o))return!1}else if(i!==o)return!1}for(const n of a)if(!r.includes(n))return!1;return!0}function NQ(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(e){const t=[];for(const[r,a]of Object.entries(e))Array.isArray(a)?a.forEach(n=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function h2(e){const t={};return e.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[n,i]=a.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function m2(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function zme(e,t){const r=new Vme(e,t);return r.subscribe.bind(r)}class Vme{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let n;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");$me(t,["next","error","complete"])?n=t:n={next:t,error:r,complete:a},n.next===void 0&&(n.next=SB),n.error===void 0&&(n.error=SB),n.complete===void 0&&(n.complete=SB);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $me(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function SB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(e){return e&&e._delegate?e._delegate:e}class Uh{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gme=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new kme;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&a.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(n){if(a)return null;throw n}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Kme(t))try{this.getOrInitializeService({instanceIdentifier:Wp})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:n});a.resolve(i)}catch{}}}}clearInstance(t=Wp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wp){return this.instances.has(t)}getOptions(t=Wp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);a===l&&o.resolve(n)}return n}onInit(t,r){const a=this.normalizeInstanceIdentifier(r),n=this.onInitCallbacks.get(a)??new Set;n.add(t),this.onInitCallbacks.set(a,n);const i=this.instances.get(a);return i&&t(i,a),()=>{n.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const n of a)try{n(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:qme(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Wp){return this.component?this.component.multipleInstances?t:Wp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qme(e){return e===Wp?void 0:e}function Kme(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wme{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Gme(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wa;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(wa||(wa={}));const Xme={debug:wa.DEBUG,verbose:wa.VERBOSE,info:wa.INFO,warn:wa.WARN,error:wa.ERROR,silent:wa.SILENT},Yme=wa.INFO,Jme={[wa.DEBUG]:"log",[wa.VERBOSE]:"log",[wa.INFO]:"info",[wa.WARN]:"warn",[wa.ERROR]:"error"},Zme=(e,t,...r)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),n=Jme[t];if(n)console[n](`[${a}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let XP=class{constructor(t){this.name=t,this._logLevel=Yme,this._logHandler=Zme,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in wa))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Xme[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,wa.DEBUG,...t),this._logHandler(this,wa.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,wa.VERBOSE,...t),this._logHandler(this,wa.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,wa.INFO,...t),this._logHandler(this,wa.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,wa.WARN,...t),this._logHandler(this,wa.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,wa.ERROR,...t),this._logHandler(this,wa.ERROR,...t)}};const epe=(e,t)=>t.some(r=>e instanceof r);let CQ,EQ;function tpe(){return CQ||(CQ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rpe(){return EQ||(EQ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NZ=new WeakMap,kO=new WeakMap,CZ=new WeakMap,_B=new WeakMap,YP=new WeakMap;function ape(e){const t=new Promise((r,a)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{r(_m(e.result)),n()},o=()=>{a(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&NZ.set(r,e)}).catch(()=>{}),YP.set(t,e),t}function npe(e){if(kO.has(e))return;const t=new Promise((r,a)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{r(),n()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});kO.set(e,t)}let SO={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return kO.get(e);if(t==="objectStoreNames")return e.objectStoreNames||CZ.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _m(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function spe(e){SO=e(SO)}function ipe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=e.call(BB(this),t,...r);return CZ.set(a,t.sort?t.sort():[t]),_m(a)}:rpe().includes(e)?function(...t){return e.apply(BB(this),t),_m(NZ.get(this))}:function(...t){return _m(e.apply(BB(this),t))}}function ope(e){return typeof e=="function"?ipe(e):(e instanceof IDBTransaction&&npe(e),epe(e,tpe())?new Proxy(e,SO):e)}function _m(e){if(e instanceof IDBRequest)return ape(e);if(_B.has(e))return _B.get(e);const t=ope(e);return t!==e&&(_B.set(e,t),YP.set(t,e)),t}const BB=e=>YP.get(e);function lpe(e,t,{blocked:r,upgrade:a,blocking:n,terminated:i}={}){const o=indexedDB.open(e,t),l=_m(o);return a&&o.addEventListener("upgradeneeded",c=>{a(_m(o.result),c.oldVersion,c.newVersion,_m(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),n&&c.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const cpe=["get","getKey","getAll","getAllKeys","count"],upe=["put","add","delete","clear"],TB=new Map;function jQ(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(TB.get(t))return TB.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,n=upe.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||cpe.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,n?"readwrite":"readonly");let u=c.store;return a&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),n&&c.done]))[0]};return TB.set(t,i),i}spe(e=>({...e,get:(t,r,a)=>jQ(t,r)||e.get(t,r,a),has:(t,r)=>!!jQ(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dpe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(fpe(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function fpe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const _O="@firebase/app",kQ="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new XP("@firebase/app"),Ape="@firebase/app-compat",hpe="@firebase/analytics-compat",mpe="@firebase/analytics",ppe="@firebase/app-check-compat",gpe="@firebase/app-check",xpe="@firebase/auth",vpe="@firebase/auth-compat",bpe="@firebase/database",ype="@firebase/data-connect",wpe="@firebase/database-compat",Npe="@firebase/functions",Cpe="@firebase/functions-compat",Epe="@firebase/installations",jpe="@firebase/installations-compat",kpe="@firebase/messaging",Spe="@firebase/messaging-compat",_pe="@firebase/performance",Bpe="@firebase/performance-compat",Tpe="@firebase/remote-config",Ipe="@firebase/remote-config-compat",Ope="@firebase/storage",Fpe="@firebase/storage-compat",Dpe="@firebase/firestore",Ppe="@firebase/ai",Rpe="@firebase/firestore-compat",Lpe="firebase",Mpe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="[DEFAULT]",Upe={[_O]:"fire-core",[Ape]:"fire-core-compat",[mpe]:"fire-analytics",[hpe]:"fire-analytics-compat",[gpe]:"fire-app-check",[ppe]:"fire-app-check-compat",[xpe]:"fire-auth",[vpe]:"fire-auth-compat",[bpe]:"fire-rtdb",[ype]:"fire-data-connect",[wpe]:"fire-rtdb-compat",[Npe]:"fire-fn",[Cpe]:"fire-fn-compat",[Epe]:"fire-iid",[jpe]:"fire-iid-compat",[kpe]:"fire-fcm",[Spe]:"fire-fcm-compat",[_pe]:"fire-perf",[Bpe]:"fire-perf-compat",[Tpe]:"fire-rc",[Ipe]:"fire-rc-compat",[Ope]:"fire-gcs",[Fpe]:"fire-gcs-compat",[Dpe]:"fire-fst",[Rpe]:"fire-fst-compat",[Ppe]:"fire-vertex","fire-js":"fire-js",[Lpe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Map,Qpe=new Map,TO=new Map;function SQ(e,t){try{e.container.addComponent(t)}catch(r){Qh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Vm(e){const t=e.name;if(TO.has(t))return Qh.debug(`There were multiple attempts to register component ${t}.`),!1;TO.set(t,e);for(const r of xw.values())SQ(r,e);for(const r of Qpe.values())SQ(r,e);return!0}function yN(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Zc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hpe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bm=new vN("app","Firebase",Hpe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpe{constructor(t,r,a){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Uh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=Mpe;function JP(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const a={name:BO,automaticDataCollectionEnabled:!0,...t},n=a.name;if(typeof n!="string"||!n)throw Bm.create("bad-app-name",{appName:String(n)});if(r||(r=bZ()),!r)throw Bm.create("no-options");const i=xw.get(n);if(i){if(zm(r,i.options)&&zm(a,i.config))return i;throw Bm.create("duplicate-app",{appName:n})}const o=new Wme(n);for(const c of TO.values())o.addComponent(c);const l=new zpe(r,a,o);return xw.set(n,l),l}function XS(e=BO){const t=xw.get(e);if(!t&&e===BO&&bZ())return JP();if(!t)throw Bm.create("no-app",{appName:e});return t}function _Q(){return Array.from(xw.values())}function sd(e,t,r){let a=Upe[e]??e;r&&(a+=`-${r}`);const n=a.match(/\s|\//),i=t.match(/\s|\//);if(n||i){const o=[`Unable to register library "${a}" with version "${t}":`];n&&o.push(`library name "${a}" contains illegal characters (whitespace or "/")`),n&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qh.warn(o.join(" "));return}Vm(new Uh(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vpe="firebase-heartbeat-database",$pe=1,vw="firebase-heartbeat-store";let IB=null;function EZ(){return IB||(IB=lpe(Vpe,$pe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(vw)}catch(r){console.warn(r)}}}}).catch(e=>{throw Bm.create("idb-open",{originalErrorMessage:e.message})})),IB}async function Gpe(e){try{const r=(await EZ()).transaction(vw),a=await r.objectStore(vw).get(jZ(e));return await r.done,a}catch(t){if(t instanceof uf)Qh.warn(t.message);else{const r=Bm.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Qh.warn(r.message)}}}async function BQ(e,t){try{const a=(await EZ()).transaction(vw,"readwrite");await a.objectStore(vw).put(t,jZ(e)),await a.done}catch(r){if(r instanceof uf)Qh.warn(r.message);else{const a=Bm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Qh.warn(a.message)}}}function jZ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qpe=1024,Kpe=30;class Wpe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ype(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=TQ();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Kpe){const o=Jpe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Qh.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=TQ(),{heartbeatsToSend:a,unsentEntries:n}=Xpe(this._heartbeatsCache.heartbeats),i=R5(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Qh.warn(r),""}}}function TQ(){return new Date().toISOString().substring(0,10)}function Xpe(e,t=qpe){const r=[];let a=e.slice();for(const n of e){const i=r.find(o=>o.agent===n.agent);if(i){if(i.dates.push(n.date),IQ(r)>t){i.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),IQ(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class Ype{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rme()?Lme().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Gpe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return BQ(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return BQ(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function IQ(e){return R5(JSON.stringify({version:2,heartbeats:e})).length}function Jpe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let a=1;a<e.length;a++)e[a].date<r&&(r=e[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zpe(e){Vm(new Uh("platform-logger",t=>new dpe(t),"PRIVATE")),Vm(new Uh("heartbeat",t=>new Wpe(t),"PRIVATE")),sd(_O,kQ,e),sd(_O,kQ,"esm2020"),sd("fire-js","")}Zpe("");function kZ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ege=kZ,SZ=new vN("auth","Firebase",kZ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=new XP("@firebase/auth");function tge(e,...t){L5.logLevel<=wa.WARN&&L5.warn(`Auth (${Zg}): ${e}`,...t)}function Wj(e,...t){L5.logLevel<=wa.ERROR&&L5.error(`Auth (${Zg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(e,...t){throw ZP(e,...t)}function mA(e,...t){return ZP(e,...t)}function _Z(e,t,r){const a={...ege(),[t]:r};return new vN("auth","Firebase",a).create(t,{appName:e.name})}function Tm(e){return _Z(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZP(e,...t){if(typeof e!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(r,...a)}return SZ.create(e,...t)}function Qr(e,t,...r){if(!e)throw ZP(t,...r)}function bh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wj(t),new Error(t)}function Hh(e,t){e||bh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function rge(){return OQ()==="http:"||OQ()==="https:"}function OQ(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function age(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rge()||Ome()||"connection"in navigator)?navigator.onLine:!0}function nge(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t,r){this.shortDelay=t,this.longDelay=r,Hh(r>t,"Short delay should be less than long delay!"),this.isMobile=Bme()||Fme()}get(){return age()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(e,t){Hh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ige=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oge=new wN(3e4,6e4);function op(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function o0(e,t,r,a,n={}){return TZ(e,n,async()=>{let i={},o={};a&&(t==="GET"?o=a:i={body:JSON.stringify(a)});const l=bN({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...i};return Ime()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&i0(e.emulatorConfig.host)&&(u.credentials="include"),BZ.fetch()(await IZ(e,e.config.apiHost,r,l),u)})}async function TZ(e,t,r){e._canInitEmulator=!1;const a={...sge,...t};try{const n=new cge(e),i=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw mE(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw mE(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw mE(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw mE(e,"user-disabled",o);const d=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _Z(e,d,u);af(e,d)}}catch(n){if(n instanceof uf)throw n;af(e,"network-request-failed",{message:String(n)})}}async function YS(e,t,r,a,n={}){const i=await o0(e,t,r,a,n);return"mfaPendingCredential"in i&&af(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function IZ(e,t,r,a){const n=`${t}${r}?${a}`,i=e,o=i.config.emulator?eR(e.config,n):`${e.config.apiScheme}://${n}`;return ige.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function lge(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cge{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(mA(this.auth,"network-request-failed")),oge.get())})}}function mE(e,t,r){const a={appName:e.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const n=mA(e,t,a);return n.customData._tokenResponse=r,n}function FQ(e){return e!==void 0&&e.enterprise!==void 0}class uge{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return lge(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dge(e,t){return o0(e,"GET","/v2/recaptchaConfig",op(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fge(e,t){return o0(e,"POST","/v1/accounts:delete",t)}async function M5(e,t){return o0(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Age(e,t=!1){const r=Ga(e),a=await r.getIdToken(t),n=tR(a);Qr(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:n,token:a,authTime:H2(OB(n.auth_time)),issuedAtTime:H2(OB(n.iat)),expirationTime:H2(OB(n.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function OB(e){return Number(e)*1e3}function tR(e){const[t,r,a]=e.split(".");if(t===void 0||r===void 0||a===void 0)return Wj("JWT malformed, contained fewer than 3 sections"),null;try{const n=xZ(r);return n?JSON.parse(n):(Wj("Failed to decode base64 JWT payload"),null)}catch(n){return Wj("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function DQ(e){const t=tR(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(e,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof uf&&hge(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function hge({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mge{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=H2(this.lastLoginAt),this.creationTime=H2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(e){var f;const t=e.auth,r=await e.getIdToken(),a=await bw(e,M5(t,{idToken:r}));Qr(a==null?void 0:a.users.length,t,"internal-error");const n=a.users[0];e._notifyReloadListener(n);const i=(f=n.providerUserInfo)!=null&&f.length?OZ(n.providerUserInfo):[],o=gge(e.providerData,i),l=e.isAnonymous,c=!(e.email&&n.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:o,metadata:new OO(n.createdAt,n.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function pge(e){const t=Ga(e);await U5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gge(e,t){return[...e.filter(a=>!t.some(n=>n.providerId===a.providerId)),...t]}function OZ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xge(e,t){const r=await TZ(e,{},async()=>{const a=bN({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=e.config,o=await IZ(e,n,"/v1/token",`key=${i}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:a};return e.emulatorConfig&&i0(e.emulatorConfig.host)&&(c.credentials="include"),BZ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function vge(e,t){return o0(e,"POST","/v2/accounts:revokeToken",op(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):DQ(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=DQ(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:n,expiresIn:i}=await xge(t,r);this.updateTokensAndExpiration(a,n,Number(i))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:n,expirationTime:i}=r,o=new Kv;return a&&(Qr(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),n&&(Qr(typeof n=="string","internal-error",{appName:t}),o.accessToken=n),i&&(Qr(typeof i=="number","internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Kv,this.toJSON())}_performRefresh(){return bh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class $d{constructor({uid:t,auth:r,stsTokenManager:a,...n}){this.providerId="firebase",this.proactiveRefresh=new mge(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new OO(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(t){const r=await bw(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Age(this,t)}reload(){return pge(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new $d({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await U5(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zc(this.auth.app))return Promise.reject(Tm(this.auth));const t=await this.getIdToken();return await bw(this,fge(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const a=r.displayName??void 0,n=r.email??void 0,i=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Qr(f&&x,t,"internal-error");const v=Kv.fromJSON(this.name,x);Qr(typeof f=="string",t,"internal-error"),Y0(a,t.name),Y0(n,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof m=="boolean",t,"internal-error"),Y0(i,t.name),Y0(o,t.name),Y0(l,t.name),Y0(c,t.name),Y0(u,t.name),Y0(d,t.name);const y=new $d({uid:f,auth:t,email:n,emailVerified:h,displayName:a,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(N=>({...N}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,a=!1){const n=new Kv;n.updateFromServerResponse(r);const i=new $d({uid:r.localId,auth:t,stsTokenManager:n,isAnonymous:a});return await U5(i),i}static async _fromGetAccountInfoResponse(t,r,a){const n=r.users[0];Qr(n.localId!==void 0,"internal-error");const i=n.providerUserInfo!==void 0?OZ(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(i!=null&&i.length),l=new Kv;l.updateFromIdToken(a);const c=new $d({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new OO(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQ=new Map;function yh(e){Hh(e instanceof Function,"Expected a class definition");let t=PQ.get(e);return t?(Hh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,PQ.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}FZ.type="NONE";const RQ=FZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(e,t,r){return`firebase:${e}:${t}:${r}`}class Wv{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:n,name:i}=this.auth;this.fullUserKey=Xj(this.userKey,n.apiKey,i),this.fullPersistenceKey=Xj("persistence",n.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await M5(this.auth,{idToken:t}).catch(()=>{});return r?$d._fromGetAccountInfoResponse(this.auth,r,t):null}return $d._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new Wv(yh(RQ),t,a);const n=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=n[0]||yh(RQ);const o=Xj(a,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const h=await M5(t,{idToken:d}).catch(()=>{});if(!h)break;f=await $d._fromGetAccountInfoResponse(t,h,d)}else f=$d._fromJSON(t,d);u!==i&&(l=f),i=u;break}}catch{}const c=n.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Wv(i,t,a):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Wv(i,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(LZ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(DZ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(UZ(t))return"Blackberry";if(QZ(t))return"Webos";if(PZ(t))return"Safari";if((t.includes("chrome/")||RZ(t))&&!t.includes("edge/"))return"Chrome";if(MZ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function DZ(e=pl()){return/firefox\//i.test(e)}function PZ(e=pl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function RZ(e=pl()){return/crios\//i.test(e)}function LZ(e=pl()){return/iemobile/i.test(e)}function MZ(e=pl()){return/android/i.test(e)}function UZ(e=pl()){return/blackberry/i.test(e)}function QZ(e=pl()){return/webos/i.test(e)}function rR(e=pl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bge(e=pl()){var t;return rR(e)&&!!((t=window.navigator)!=null&&t.standalone)}function yge(){return Dme()&&document.documentMode===10}function HZ(e=pl()){return rR(e)||MZ(e)||QZ(e)||UZ(e)||/windows phone/i.test(e)||LZ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(e,t=[]){let r;switch(e){case"Browser":r=LQ(pl());break;case"Worker":r=`${LQ(pl())}-${e}`;break;default:r=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zg}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=i=>new Promise((o,l)=>{try{const c=t(i);o(c)}catch(c){l(c)}});a.onAbort=r,this.queue.push(a);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nge(e,t={}){return o0(e,"GET","/v2/passwordPolicy",op(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cge=6;class Ege{constructor(t){var a;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Cge,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=t.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),n&&(r.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let n=0;n<t.length;n++)a=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,n,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jge{constructor(t,r,a,n){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MQ(this),this.idTokenSubscription=new MQ(this),this.beforeStateQueue=new wge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SZ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=yh(r)),this._initializationPromise=this.queue(async()=>{var a,n,i;if(!this._deleted&&(this.persistenceManager=await Wv.create(this,t),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((n=this._popupRedirectResolver)!=null&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await M5(this,{idToken:t}),a=await $d._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(Zc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,n=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,n=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await U5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nge()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Zc(this.app))return Promise.reject(Tm(this));const r=t?Ga(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Zc(this.app)?Promise.reject(Tm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Zc(this.app)?Promise.reject(Tm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Nge(this),r=new Ege(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new vN("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await vge(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&yh(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await Wv.create(this,[yh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,n){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,a,n);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=zZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var n;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((n=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var r;if(Zc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&tge(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ex(e){return Ga(e)}class MQ{constructor(t){this.auth=t,this.observer=null,this.addObserver=zme(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kge(e){JS=e}function VZ(e){return JS.loadJS(e)}function Sge(){return JS.recaptchaEnterpriseScript}function _ge(){return JS.gapiScript}function Bge(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Tge{constructor(){this.enterprise=new Ige}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Ige{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Oge="recaptcha-enterprise",$Z="NO_RECAPTCHA";class Fge{constructor(t){this.type=Oge,this.auth=ex(t)}async verify(t="verify",r=!1){async function a(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{dge(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new uge(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function n(i,o,l){const c=window.grecaptcha;FQ(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:t}).then(u=>{o(u)}).catch(()=>{o($Z)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tge().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{a(this.auth).then(l=>{if(!r&&FQ(window.grecaptcha))n(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Sge();c.length!==0&&(c+=l),VZ(c).then(()=>{n(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function UQ(e,t,r,a=!1,n=!1){const i=new Fge(e);let o;if(n)o=$Z;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return a?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function FO(e,t,r,a,n){var i;if((i=e._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await UQ(e,t,r,r==="getOobCode");return a(e,o)}else return a(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await UQ(e,t,r,r==="getOobCode");return a(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dge(e,t){const r=yN(e,"auth");if(r.isInitialized()){const n=r.getImmediate(),i=r.getOptions();if(zm(i,t??{}))return n;af(n,"already-initialized")}return r.initialize({options:t})}function Pge(e,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(yh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function Rge(e,t,r){const a=ex(e);Qr(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const n=!1,i=GZ(t),{host:o,port:l}=Lge(t),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!a._canInitEmulator){Qr(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Qr(zm(u,a.config.emulator)&&zm(d,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=u,a.emulatorConfig=d,a.settings.appVerificationDisabledForTesting=!0,i0(o)?(KS(`${i}//${o}${c}`),WS("Auth",!0)):Mge()}function GZ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Lge(e){const t=GZ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(a);if(n){const i=n[1];return{host:i,port:QQ(a.substr(i.length+1))}}else{const[i,o]=a.split(":");return{host:i,port:QQ(o)}}}function QQ(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Mge(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return bh("not implemented")}_getIdTokenResponse(t){return bh("not implemented")}_linkToIdToken(t,r){return bh("not implemented")}_getReauthenticationResolver(t){return bh("not implemented")}}async function Uge(e,t){return o0(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qge(e,t){return YS(e,"POST","/v1/accounts:signInWithPassword",op(e,t))}async function Hge(e,t){return o0(e,"POST","/v1/accounts:sendOobCode",op(e,t))}async function zge(e,t){return Hge(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vge(e,t){return YS(e,"POST","/v1/accounts:signInWithEmailLink",op(e,t))}async function $ge(e,t){return YS(e,"POST","/v1/accounts:signInWithEmailLink",op(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends aR{constructor(t,r,a,n=null){super("password",a),this._email=t,this._password=r,this._tenantId=n}static _fromEmailAndPassword(t,r){return new yw(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new yw(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return FO(t,r,"signInWithPassword",Qge);case"emailLink":return Vge(t,{email:this._email,oobCode:this._password});default:af(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return FO(t,a,"signUpPassword",Uge);case"emailLink":return $ge(t,{idToken:r,email:this._email,oobCode:this._password});default:af(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xv(e,t){return YS(e,"POST","/v1/accounts:signInWithIdp",op(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gge="http://localhost";class Dg extends aR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Dg(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):af("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:n,...i}=r;if(!a||!n)return null;const o=new Dg(a,n);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Xv(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,Xv(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Xv(t,r)}buildRequest(){const t={requestUri:Gge,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=bN(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qge(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Kge(e){const t=h2(m2(e)).link,r=t?h2(m2(t)).deep_link_id:null,a=h2(m2(e)).deep_link_id;return(a?h2(m2(a)).link:null)||a||r||t||e}class nR{constructor(t){const r=h2(m2(t)),a=r.apiKey??null,n=r.oobCode??null,i=qge(r.mode??null);Qr(a&&n&&i,"argument-error"),this.apiKey=a,this.operation=i,this.code=n,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Kge(t);try{return new nR(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.providerId=u1.PROVIDER_ID}static credential(t,r){return yw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=nR.parseLink(r);return Qr(a,"argument-error"),yw._fromEmailAndCode(t,a.code,a.tenantId)}}u1.PROVIDER_ID="password";u1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";u1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN extends qZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends NN{constructor(){super("facebook.com")}static credential(t){return Dg._fromParams({providerId:hm.PROVIDER_ID,signInMethod:hm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hm.credentialFromTaggedObject(t)}static credentialFromError(t){return hm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hm.credential(t.oauthAccessToken)}catch{return null}}}hm.FACEBOOK_SIGN_IN_METHOD="facebook.com";hm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends NN{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Dg._fromParams({providerId:mm.PROVIDER_ID,signInMethod:mm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return mm.credentialFromTaggedObject(t)}static credentialFromError(t){return mm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return mm.credential(r,a)}catch{return null}}}mm.GOOGLE_SIGN_IN_METHOD="google.com";mm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends NN{constructor(){super("github.com")}static credential(t){return Dg._fromParams({providerId:pm.PROVIDER_ID,signInMethod:pm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return pm.credentialFromTaggedObject(t)}static credentialFromError(t){return pm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return pm.credential(t.oauthAccessToken)}catch{return null}}}pm.GITHUB_SIGN_IN_METHOD="github.com";pm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends NN{constructor(){super("twitter.com")}static credential(t,r){return Dg._fromParams({providerId:gm.PROVIDER_ID,signInMethod:gm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return gm.credentialFromTaggedObject(t)}static credentialFromError(t){return gm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return gm.credential(r,a)}catch{return null}}}gm.TWITTER_SIGN_IN_METHOD="twitter.com";gm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,n=!1){const i=await $d._fromIdTokenResponse(t,a,n),o=HQ(a);return new wb({user:i,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const n=HQ(a);return new wb({user:t,providerId:n,_tokenResponse:a,operationType:r})}}function HQ(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5 extends uf{constructor(t,r,a,n){super(r.code,r.message),this.operationType=a,this.user=n,Object.setPrototypeOf(this,Q5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,n){return new Q5(t,r,a,n)}}function KZ(e,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Q5._fromErrorAndOperation(e,i,t,a):i})}async function Wge(e,t,r=!1){const a=await bw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return wb._forOperation(e,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xge(e,t,r=!1){const{auth:a}=e;if(Zc(a.app))return Promise.reject(Tm(a));const n="reauthenticate";try{const i=await bw(e,KZ(a,n,t,e),r);Qr(i.idToken,a,"internal-error");const o=tR(i.idToken);Qr(o,a,"internal-error");const{sub:l}=o;return Qr(e.uid===l,a,"user-mismatch"),wb._forOperation(e,n,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&af(a,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WZ(e,t,r=!1){if(Zc(e.app))return Promise.reject(Tm(e));const a="signIn",n=await KZ(e,a,t),i=await wb._fromIdTokenResponse(e,a,n);return r||await e._updateCurrentUser(i.user),i}async function Yge(e,t){return WZ(ex(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jge(e){const t=ex(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Zge(e,t,r){const a=ex(e);await FO(a,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",zge)}function exe(e,t,r){return Zc(e.app)?Promise.reject(Tm(e)):Yge(Ga(e),u1.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Jge(e),a})}function txe(e,t,r,a){return Ga(e).onIdTokenChanged(t,r,a)}function rxe(e,t,r){return Ga(e).beforeAuthStateChanged(t,r)}function XZ(e,t,r,a){return Ga(e).onAuthStateChanged(t,r,a)}function axe(e){return Ga(e).signOut()}const H5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(H5,"1"),this.storage.removeItem(H5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nxe=1e3,sxe=10;class JZ extends YZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),n=this.localCache[r];a!==n&&t(r,n,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const a=t.key;r?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},i=this.storage.getItem(a);yge()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,sxe):n()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},nxe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}JZ.type="LOCAL";const ixe=JZ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ extends YZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}ZZ.type="SESSION";const eee=ZZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oxe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(n=>n.isListeningto(t));if(r)return r;const a=new ZS(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:n,data:i}=r.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:n});const l=Array.from(o).map(async u=>u(r.origin,i)),c=await oxe(l);r.ports[0].postMessage({status:"done",eventId:a,eventType:n,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ZS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(e="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=sR("",20);n.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:n,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(h.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(){return window}function cxe(e){pA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tee(){return typeof pA().WorkerGlobalScope<"u"&&typeof pA().importScripts=="function"}async function uxe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dxe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function fxe(){return tee()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ree="firebaseLocalStorageDb",Axe=1,z5="firebaseLocalStorage",aee="fbase_key";class CN{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function e_(e,t){return e.transaction([z5],t?"readwrite":"readonly").objectStore(z5)}function hxe(){const e=indexedDB.deleteDatabase(ree);return new CN(e).toPromise()}function DO(){const e=indexedDB.open(ree,Axe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(z5,{keyPath:aee})}catch(n){r(n)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(z5)?t(a):(a.close(),await hxe(),t(await DO()))})})}async function zQ(e,t,r){const a=e_(e,!0).put({[aee]:t,value:r});return new CN(a).toPromise()}async function mxe(e,t){const r=e_(e,!1).get(t),a=await new CN(r).toPromise();return a===void 0?null:a.value}function VQ(e,t){const r=e_(e,!0).delete(t);return new CN(r).toPromise()}const pxe=800,gxe=3;class nee{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await DO(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>gxe)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tee()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ZS._getInstance(fxe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,a;if(this.activeServiceWorker=await uxe(),!this.activeServiceWorker)return;this.sender=new lxe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(a=t[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||dxe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await DO();return await zQ(t,H5,"1"),await VQ(t,H5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>zQ(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>mxe(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>VQ(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const i=e_(n,!1).getAll();return new CN(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:n,value:i}of t)a.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!a.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pxe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nee.type="LOCAL";const xxe=nee;new wN(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vxe(e,t){return t?yh(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR extends aR{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Xv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Xv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function bxe(e){return WZ(e.auth,new iR(e),e.bypassAuthState)}function yxe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),Xge(r,new iR(e),e.bypassAuthState)}async function wxe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),Wge(r,new iR(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class see{constructor(t,r,a,n,i=!1){this.auth=t,this.resolver=a,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:n,tenantId:i,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:a,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return bxe;case"linkViaPopup":case"linkViaRedirect":return wxe;case"reauthViaPopup":case"reauthViaRedirect":return yxe;default:af(this.auth,"internal-error")}}resolve(t){Hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nxe=new wN(2e3,1e4);class Fv extends see{constructor(t,r,a,n,i){super(t,r,n,i),this.provider=a,this.authWindow=null,this.pollId=null,Fv.currentPopupAction&&Fv.currentPopupAction.cancel(),Fv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){Hh(this.filter.length===1,"Popup operations only handle one event");const t=sR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(mA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(mA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if((a=(r=this.authWindow)==null?void 0:r.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Nxe.get())};t()}}Fv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cxe="pendingRedirect",Yj=new Map;class Exe extends see{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Yj.get(this.auth._key());if(!t){try{const a=await jxe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Yj.set(this.auth._key(),t)}return this.bypassAuthState||Yj.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jxe(e,t){const r=_xe(t),a=Sxe(e);if(!await a._isAvailable())return!1;const n=await a._get(r)==="true";return await a._remove(r),n}function kxe(e,t){Yj.set(e._key(),t)}function Sxe(e){return yh(e._redirectPersistence)}function _xe(e){return Xj(Cxe,e.config.apiKey,e.name)}async function Bxe(e,t,r=!1){if(Zc(e.app))return Promise.reject(Tm(e));const a=ex(e),n=vxe(a,t),o=await new Exe(a,n,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Txe=600*1e3;class Ixe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Oxe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!iee(t)){const n=((a=t.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";r.onError(mA(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Txe&&this.cachedEventUids.clear(),this.cachedEventUids.has($Q(t))}saveEventToCache(t){this.cachedEventUids.add($Q(t)),this.lastProcessedEventTime=Date.now()}}function $Q(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function iee({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Oxe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iee(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fxe(e,t={}){return o0(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dxe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pxe=/^https?/;async function Rxe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Fxe(e);for(const r of t)try{if(Lxe(r))return}catch{}af(e,"unauthorized-domain")}function Lxe(e){const t=IO(),{protocol:r,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!Pxe.test(r))return!1;if(Dxe.test(e))return a===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mxe=new wN(3e4,6e4);function GQ(){const e=pA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Uxe(e){return new Promise((t,r)=>{var n,i,o;function a(){GQ(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{GQ(),r(mA(e,"network-request-failed"))},timeout:Mxe.get()})}if((i=(n=pA().gapi)==null?void 0:n.iframes)!=null&&i.Iframe)t(gapi.iframes.getContext());else if((o=pA().gapi)!=null&&o.load)a();else{const l=Bge("iframefcb");return pA()[l]=()=>{gapi.load?a():r(mA(e,"network-request-failed"))},VZ(`${_ge()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw Jj=null,t})}let Jj=null;function Qxe(e){return Jj=Jj||Uxe(e),Jj}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hxe=new wN(5e3,15e3),zxe="__/auth/iframe",Vxe="emulator/auth/iframe",$xe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gxe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qxe(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?eR(t,Vxe):`https://${e.config.authDomain}/${zxe}`,a={apiKey:t.apiKey,appName:e.name,v:Zg},n=Gxe.get(e.config.apiHost);n&&(a.eid=n);const i=e._getFrameworks();return i.length&&(a.fw=i.join(",")),`${r}?${bN(a).slice(1)}`}async function Kxe(e){const t=await Qxe(e),r=pA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:qxe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$xe,dontclear:!0},a=>new Promise(async(n,i)=>{await a.restyle({setHideOnLeave:!1});const o=mA(e,"network-request-failed"),l=pA().setTimeout(()=>{i(o)},Hxe.get());function c(){pA().clearTimeout(l),n(a)}a.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wxe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xxe=500,Yxe=600,Jxe="_blank",Zxe="http://localhost";class qQ{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eve(e,t,r,a=Xxe,n=Yxe){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let l="";const c={...Wxe,width:a.toString(),height:n.toString(),top:i,left:o},u=pl().toLowerCase();r&&(l=RZ(u)?Jxe:r),DZ(u)&&(t=t||Zxe,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(bge(u)&&l!=="_self")return tve(t||"",l),new qQ(null);const f=window.open(t||"",l,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new qQ(f)}function tve(e,t){const r=document.createElement("a");r.href=e,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rve="__/auth/handler",ave="emulator/auth/handler",nve=encodeURIComponent("fac");async function KQ(e,t,r,a,n,i){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:a,v:Zg,eventId:n};if(t instanceof qZ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Hme(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof NN){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${nve}=${encodeURIComponent(c)}`:"";return`${sve(e)}?${bN(l).slice(1)}${u}`}function sve({config:e}){return e.emulator?eR(e,ave):`https://${e.authDomain}/${rve}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB="webStorageSupport";class ive{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eee,this._completeRedirectFn=Bxe,this._overrideRedirectResult=kxe}async _openPopup(t,r,a,n){var o;Hh((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await KQ(t,r,a,IO(),n);return eve(t,i,sR())}async _openRedirect(t,r,a,n){await this._originValidation(t);const i=await KQ(t,r,a,IO(),n);return cxe(i),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:n,promise:i}=this.eventManagers[r];return n?Promise.resolve(n):(Hh(i,"If manager is not set, promise should be"),i)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await Kxe(t),a=new Ixe(t);return r.register("authEvent",n=>(Qr(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:a.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(FB,{type:FB},n=>{var o;const i=(o=n==null?void 0:n[0])==null?void 0:o[FB];i!==void 0&&r(!!i),af(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Rxe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return HZ()||PZ()||rR()}}const ove=ive;var WQ="@firebase/auth",XQ="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cve(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uve(e){Vm(new Uh("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=a.options;Qr(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zZ(e)},u=new jge(a,n,i,c);return Pge(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),Vm(new Uh("auth-internal",t=>{const r=ex(t.getProvider("auth").getImmediate());return(a=>new lve(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),sd(WQ,XQ,cve(e)),sd(WQ,XQ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dve=300,fve=yZ("authIdTokenMaxAge")||dve;let YQ=null;const Ave=e=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>fve)return;const n=r==null?void 0:r.token;YQ!==n&&(YQ=n,await fetch(e,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function oee(e=XS()){const t=yN(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Dge(e,{popupRedirectResolver:ove,persistence:[xxe,ixe,eee]}),a=yZ("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(a,location.origin);if(location.origin===i.origin){const o=Ave(i.toString());rxe(r,o,()=>o(r.currentUser)),txe(r,l=>o(l))}}const n=vZ("auth");return n&&Rge(r,`http://${n}`),r}function hve(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}kge({loadJS(e){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=n=>{const i=mA("internal-error");i.customData=n,r(i)},a.type="text/javascript",a.charset="UTF-8",hve().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uve("Browser");var mve="firebase",pve="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sd(mve,pve,"app");var JQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Im,lee;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(j,S){function B(){}B.prototype=S.prototype,j.D=S.prototype,j.prototype=new B,j.prototype.constructor=j,j.C=function(L,D,k){for(var R=Array(arguments.length-2),U=2;U<arguments.length;U++)R[U-2]=arguments[U];return S.prototype[D].apply(L,R)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(j,S,B){B||(B=0);var L=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)L[D]=S.charCodeAt(B++)|S.charCodeAt(B++)<<8|S.charCodeAt(B++)<<16|S.charCodeAt(B++)<<24;else for(D=0;16>D;++D)L[D]=S[B++]|S[B++]<<8|S[B++]<<16|S[B++]<<24;S=j.g[0],B=j.g[1],D=j.g[2];var k=j.g[3],R=S+(k^B&(D^k))+L[0]+3614090360&4294967295;S=B+(R<<7&4294967295|R>>>25),R=k+(D^S&(B^D))+L[1]+3905402710&4294967295,k=S+(R<<12&4294967295|R>>>20),R=D+(B^k&(S^B))+L[2]+606105819&4294967295,D=k+(R<<17&4294967295|R>>>15),R=B+(S^D&(k^S))+L[3]+3250441966&4294967295,B=D+(R<<22&4294967295|R>>>10),R=S+(k^B&(D^k))+L[4]+4118548399&4294967295,S=B+(R<<7&4294967295|R>>>25),R=k+(D^S&(B^D))+L[5]+1200080426&4294967295,k=S+(R<<12&4294967295|R>>>20),R=D+(B^k&(S^B))+L[6]+2821735955&4294967295,D=k+(R<<17&4294967295|R>>>15),R=B+(S^D&(k^S))+L[7]+4249261313&4294967295,B=D+(R<<22&4294967295|R>>>10),R=S+(k^B&(D^k))+L[8]+1770035416&4294967295,S=B+(R<<7&4294967295|R>>>25),R=k+(D^S&(B^D))+L[9]+2336552879&4294967295,k=S+(R<<12&4294967295|R>>>20),R=D+(B^k&(S^B))+L[10]+4294925233&4294967295,D=k+(R<<17&4294967295|R>>>15),R=B+(S^D&(k^S))+L[11]+2304563134&4294967295,B=D+(R<<22&4294967295|R>>>10),R=S+(k^B&(D^k))+L[12]+1804603682&4294967295,S=B+(R<<7&4294967295|R>>>25),R=k+(D^S&(B^D))+L[13]+4254626195&4294967295,k=S+(R<<12&4294967295|R>>>20),R=D+(B^k&(S^B))+L[14]+2792965006&4294967295,D=k+(R<<17&4294967295|R>>>15),R=B+(S^D&(k^S))+L[15]+1236535329&4294967295,B=D+(R<<22&4294967295|R>>>10),R=S+(D^k&(B^D))+L[1]+4129170786&4294967295,S=B+(R<<5&4294967295|R>>>27),R=k+(B^D&(S^B))+L[6]+3225465664&4294967295,k=S+(R<<9&4294967295|R>>>23),R=D+(S^B&(k^S))+L[11]+643717713&4294967295,D=k+(R<<14&4294967295|R>>>18),R=B+(k^S&(D^k))+L[0]+3921069994&4294967295,B=D+(R<<20&4294967295|R>>>12),R=S+(D^k&(B^D))+L[5]+3593408605&4294967295,S=B+(R<<5&4294967295|R>>>27),R=k+(B^D&(S^B))+L[10]+38016083&4294967295,k=S+(R<<9&4294967295|R>>>23),R=D+(S^B&(k^S))+L[15]+3634488961&4294967295,D=k+(R<<14&4294967295|R>>>18),R=B+(k^S&(D^k))+L[4]+3889429448&4294967295,B=D+(R<<20&4294967295|R>>>12),R=S+(D^k&(B^D))+L[9]+568446438&4294967295,S=B+(R<<5&4294967295|R>>>27),R=k+(B^D&(S^B))+L[14]+3275163606&4294967295,k=S+(R<<9&4294967295|R>>>23),R=D+(S^B&(k^S))+L[3]+4107603335&4294967295,D=k+(R<<14&4294967295|R>>>18),R=B+(k^S&(D^k))+L[8]+1163531501&4294967295,B=D+(R<<20&4294967295|R>>>12),R=S+(D^k&(B^D))+L[13]+2850285829&4294967295,S=B+(R<<5&4294967295|R>>>27),R=k+(B^D&(S^B))+L[2]+4243563512&4294967295,k=S+(R<<9&4294967295|R>>>23),R=D+(S^B&(k^S))+L[7]+1735328473&4294967295,D=k+(R<<14&4294967295|R>>>18),R=B+(k^S&(D^k))+L[12]+2368359562&4294967295,B=D+(R<<20&4294967295|R>>>12),R=S+(B^D^k)+L[5]+4294588738&4294967295,S=B+(R<<4&4294967295|R>>>28),R=k+(S^B^D)+L[8]+2272392833&4294967295,k=S+(R<<11&4294967295|R>>>21),R=D+(k^S^B)+L[11]+1839030562&4294967295,D=k+(R<<16&4294967295|R>>>16),R=B+(D^k^S)+L[14]+4259657740&4294967295,B=D+(R<<23&4294967295|R>>>9),R=S+(B^D^k)+L[1]+2763975236&4294967295,S=B+(R<<4&4294967295|R>>>28),R=k+(S^B^D)+L[4]+1272893353&4294967295,k=S+(R<<11&4294967295|R>>>21),R=D+(k^S^B)+L[7]+4139469664&4294967295,D=k+(R<<16&4294967295|R>>>16),R=B+(D^k^S)+L[10]+3200236656&4294967295,B=D+(R<<23&4294967295|R>>>9),R=S+(B^D^k)+L[13]+681279174&4294967295,S=B+(R<<4&4294967295|R>>>28),R=k+(S^B^D)+L[0]+3936430074&4294967295,k=S+(R<<11&4294967295|R>>>21),R=D+(k^S^B)+L[3]+3572445317&4294967295,D=k+(R<<16&4294967295|R>>>16),R=B+(D^k^S)+L[6]+76029189&4294967295,B=D+(R<<23&4294967295|R>>>9),R=S+(B^D^k)+L[9]+3654602809&4294967295,S=B+(R<<4&4294967295|R>>>28),R=k+(S^B^D)+L[12]+3873151461&4294967295,k=S+(R<<11&4294967295|R>>>21),R=D+(k^S^B)+L[15]+530742520&4294967295,D=k+(R<<16&4294967295|R>>>16),R=B+(D^k^S)+L[2]+3299628645&4294967295,B=D+(R<<23&4294967295|R>>>9),R=S+(D^(B|~k))+L[0]+4096336452&4294967295,S=B+(R<<6&4294967295|R>>>26),R=k+(B^(S|~D))+L[7]+1126891415&4294967295,k=S+(R<<10&4294967295|R>>>22),R=D+(S^(k|~B))+L[14]+2878612391&4294967295,D=k+(R<<15&4294967295|R>>>17),R=B+(k^(D|~S))+L[5]+4237533241&4294967295,B=D+(R<<21&4294967295|R>>>11),R=S+(D^(B|~k))+L[12]+1700485571&4294967295,S=B+(R<<6&4294967295|R>>>26),R=k+(B^(S|~D))+L[3]+2399980690&4294967295,k=S+(R<<10&4294967295|R>>>22),R=D+(S^(k|~B))+L[10]+4293915773&4294967295,D=k+(R<<15&4294967295|R>>>17),R=B+(k^(D|~S))+L[1]+2240044497&4294967295,B=D+(R<<21&4294967295|R>>>11),R=S+(D^(B|~k))+L[8]+1873313359&4294967295,S=B+(R<<6&4294967295|R>>>26),R=k+(B^(S|~D))+L[15]+4264355552&4294967295,k=S+(R<<10&4294967295|R>>>22),R=D+(S^(k|~B))+L[6]+2734768916&4294967295,D=k+(R<<15&4294967295|R>>>17),R=B+(k^(D|~S))+L[13]+1309151649&4294967295,B=D+(R<<21&4294967295|R>>>11),R=S+(D^(B|~k))+L[4]+4149444226&4294967295,S=B+(R<<6&4294967295|R>>>26),R=k+(B^(S|~D))+L[11]+3174756917&4294967295,k=S+(R<<10&4294967295|R>>>22),R=D+(S^(k|~B))+L[2]+718787259&4294967295,D=k+(R<<15&4294967295|R>>>17),R=B+(k^(D|~S))+L[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,j.g[2]=j.g[2]+D&4294967295,j.g[3]=j.g[3]+k&4294967295}a.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var B=S-this.blockSize,L=this.B,D=this.h,k=0;k<S;){if(D==0)for(;k<=B;)n(this,j,k),k+=this.blockSize;if(typeof j=="string"){for(;k<S;)if(L[D++]=j.charCodeAt(k++),D==this.blockSize){n(this,L),D=0;break}}else for(;k<S;)if(L[D++]=j[k++],D==this.blockSize){n(this,L),D=0;break}}this.h=D,this.o+=S},a.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var B=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=B&255,B/=256;for(this.u(j),j=Array(16),S=B=0;4>S;++S)for(var L=0;32>L;L+=8)j[B++]=this.g[S]>>>L&255;return j};function i(j,S){var B=l;return Object.prototype.hasOwnProperty.call(B,j)?B[j]:B[j]=S(j)}function o(j,S){this.h=S;for(var B=[],L=!0,D=j.length-1;0<=D;D--){var k=j[D]|0;L&&k==S||(B[D]=k,L=!1)}this.g=B}var l={};function c(j){return-128<=j&&128>j?i(j,function(S){return new o([S|0],0>S?-1:0)}):new o([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return v(u(-j));for(var S=[],B=1,L=0;j>=B;L++)S[L]=j/B|0,B*=4294967296;return new o(S,0)}function d(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return v(d(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(S,8)),L=f,D=0;D<j.length;D+=8){var k=Math.min(8,j.length-D),R=parseInt(j.substring(D,D+k),S);8>k?(k=u(Math.pow(S,k)),L=L.j(k).add(u(R))):(L=L.j(B),L=L.add(u(R)))}return L}var f=c(0),h=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var j=0,S=1,B=0;B<this.g.length;B++){var L=this.i(B);j+=(0<=L?L:4294967296+L)*S,S*=4294967296}return j},e.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(g(this))return"0";if(x(this))return"-"+v(this).toString(j);for(var S=u(Math.pow(j,6)),B=this,L="";;){var D=T(B,S).g;B=y(B,D.j(S));var k=((0<B.g.length?B.g[0]:B.h)>>>0).toString(j);if(B=D,g(B))return k+L;for(;6>k.length;)k="0"+k;L=k+L}},e.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function g(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function x(j){return j.h==-1}e.l=function(j){return j=y(this,j),x(j)?-1:g(j)?0:1};function v(j){for(var S=j.g.length,B=[],L=0;L<S;L++)B[L]=~j.g[L];return new o(B,~j.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(j){for(var S=Math.max(this.g.length,j.g.length),B=[],L=0,D=0;D<=S;D++){var k=L+(this.i(D)&65535)+(j.i(D)&65535),R=(k>>>16)+(this.i(D)>>>16)+(j.i(D)>>>16);L=R>>>16,k&=65535,R&=65535,B[D]=R<<16|k}return new o(B,B[B.length-1]&-2147483648?-1:0)};function y(j,S){return j.add(v(S))}e.j=function(j){if(g(this)||g(j))return f;if(x(this))return x(j)?v(this).j(v(j)):v(v(this).j(j));if(x(j))return v(this.j(v(j)));if(0>this.l(m)&&0>j.l(m))return u(this.m()*j.m());for(var S=this.g.length+j.g.length,B=[],L=0;L<2*S;L++)B[L]=0;for(L=0;L<this.g.length;L++)for(var D=0;D<j.g.length;D++){var k=this.i(L)>>>16,R=this.i(L)&65535,U=j.i(D)>>>16,H=j.i(D)&65535;B[2*L+2*D]+=R*H,N(B,2*L+2*D),B[2*L+2*D+1]+=k*H,N(B,2*L+2*D+1),B[2*L+2*D+1]+=R*U,N(B,2*L+2*D+1),B[2*L+2*D+2]+=k*U,N(B,2*L+2*D+2)}for(L=0;L<S;L++)B[L]=B[2*L+1]<<16|B[2*L];for(L=S;L<2*S;L++)B[L]=0;return new o(B,0)};function N(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function C(j,S){this.g=j,this.h=S}function T(j,S){if(g(S))throw Error("division by zero");if(g(j))return new C(f,f);if(x(j))return S=T(v(j),S),new C(v(S.g),v(S.h));if(x(S))return S=T(j,v(S)),new C(v(S.g),S.h);if(30<j.g.length){if(x(j)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var B=h,L=S;0>=L.l(j);)B=_(B),L=_(L);var D=O(B,1),k=O(L,1);for(L=O(L,2),B=O(B,2);!g(L);){var R=k.add(L);0>=R.l(j)&&(D=D.add(B),k=R),L=O(L,1),B=O(B,1)}return S=y(j,D.j(S)),new C(D,S)}for(D=f;0<=j.l(S);){for(B=Math.max(1,Math.floor(j.m()/S.m())),L=Math.ceil(Math.log(B)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),k=u(B),R=k.j(S);x(R)||0<R.l(j);)B-=L,k=u(B),R=k.j(S);g(k)&&(k=h),D=D.add(k),j=y(j,R)}return new C(D,j)}e.A=function(j){return T(this,j).h},e.and=function(j){for(var S=Math.max(this.g.length,j.g.length),B=[],L=0;L<S;L++)B[L]=this.i(L)&j.i(L);return new o(B,this.h&j.h)},e.or=function(j){for(var S=Math.max(this.g.length,j.g.length),B=[],L=0;L<S;L++)B[L]=this.i(L)|j.i(L);return new o(B,this.h|j.h)},e.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),B=[],L=0;L<S;L++)B[L]=this.i(L)^j.i(L);return new o(B,this.h^j.h)};function _(j){for(var S=j.g.length+1,B=[],L=0;L<S;L++)B[L]=j.i(L)<<1|j.i(L-1)>>>31;return new o(B,j.h)}function O(j,S){var B=S>>5;S%=32;for(var L=j.g.length-B,D=[],k=0;k<L;k++)D[k]=0<S?j.i(k+B)>>>S|j.i(k+B+1)<<32-S:j.i(k+B);return new o(D,j.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,lee=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Im=o}).apply(typeof JQ<"u"?JQ:typeof self<"u"?self:typeof window<"u"?window:{});var pE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cee,p2,uee,Zj,PO,dee,fee,Aee;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,se,fe){return P==Array.prototype||P==Object.prototype||(P[se]=fe.value),P};function r(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof pE=="object"&&pE];for(var se=0;se<P.length;++se){var fe=P[se];if(fe&&fe.Math==Math)return fe}throw Error("Cannot find global object")}var a=r(this);function n(P,se){if(se)e:{var fe=a;P=P.split(".");for(var Te=0;Te<P.length-1;Te++){var at=P[Te];if(!(at in fe))break e;fe=fe[at]}P=P[P.length-1],Te=fe[P],se=se(Te),se!=Te&&se!=null&&t(fe,P,{configurable:!0,writable:!0,value:se})}}function i(P,se){P instanceof String&&(P+="");var fe=0,Te=!1,at={next:function(){if(!Te&&fe<P.length){var ht=fe++;return{value:se(ht,P[ht]),done:!1}}return Te=!0,{done:!0,value:void 0}}};return at[Symbol.iterator]=function(){return at},at}n("Array.prototype.values",function(P){return P||function(){return i(this,function(se,fe){return fe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(P){var se=typeof P;return se=se!="object"?se:P?Array.isArray(P)?"array":se:"null",se=="array"||se=="object"&&typeof P.length=="number"}function u(P){var se=typeof P;return se=="object"&&P!=null||se=="function"}function d(P,se,fe){return P.call.apply(P.bind,arguments)}function f(P,se,fe){if(!P)throw Error();if(2<arguments.length){var Te=Array.prototype.slice.call(arguments,2);return function(){var at=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(at,Te),P.apply(se,at)}}return function(){return P.apply(se,arguments)}}function h(P,se,fe){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(P,se){var fe=Array.prototype.slice.call(arguments,1);return function(){var Te=fe.slice();return Te.push.apply(Te,arguments),P.apply(this,Te)}}function g(P,se){function fe(){}fe.prototype=se.prototype,P.aa=se.prototype,P.prototype=new fe,P.prototype.constructor=P,P.Qb=function(Te,at,ht){for(var Ht=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)Ht[Tr-2]=arguments[Tr];return se.prototype[at].apply(Te,Ht)}}function x(P){const se=P.length;if(0<se){const fe=Array(se);for(let Te=0;Te<se;Te++)fe[Te]=P[Te];return fe}return[]}function v(P,se){for(let fe=1;fe<arguments.length;fe++){const Te=arguments[fe];if(c(Te)){const at=P.length||0,ht=Te.length||0;P.length=at+ht;for(let Ht=0;Ht<ht;Ht++)P[at+Ht]=Te[Ht]}else P.push(Te)}}class y{constructor(se,fe){this.i=se,this.j=fe,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function N(P){return/^[\s\xa0]*$/.test(P)}function C(){var P=l.navigator;return P&&(P=P.userAgent)?P:""}function T(P){return T[" "](P),P}T[" "]=function(){};var _=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function O(P,se,fe){for(const Te in P)se.call(fe,P[Te],Te,P)}function j(P,se){for(const fe in P)se.call(void 0,P[fe],fe,P)}function S(P){const se={};for(const fe in P)se[fe]=P[fe];return se}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(P,se){let fe,Te;for(let at=1;at<arguments.length;at++){Te=arguments[at];for(fe in Te)P[fe]=Te[fe];for(let ht=0;ht<B.length;ht++)fe=B[ht],Object.prototype.hasOwnProperty.call(Te,fe)&&(P[fe]=Te[fe])}}function D(P){var se=1;P=P.split(":");const fe=[];for(;0<se&&P.length;)fe.push(P.shift()),se--;return P.length&&fe.push(P.join(":")),fe}function k(P){l.setTimeout(()=>{throw P},0)}function R(){var P=J;let se=null;return P.g&&(se=P.g,P.g=P.g.next,P.g||(P.h=null),se.next=null),se}class U{constructor(){this.h=this.g=null}add(se,fe){const Te=H.get();Te.set(se,fe),this.h?this.h.next=Te:this.g=Te,this.h=Te}}var H=new y(()=>new Q,P=>P.reset());class Q{constructor(){this.next=this.g=this.h=null}set(se,fe){this.h=se,this.g=fe,this.next=null}reset(){this.next=this.g=this.h=null}}let V,G=!1,J=new U,W=()=>{const P=l.Promise.resolve(void 0);V=()=>{P.then(Z)}};var Z=()=>{for(var P;P=R();){try{P.h.call(P.g)}catch(fe){k(fe)}var se=H;se.j(P),100>se.h&&(se.h++,P.next=se.g,se.g=P)}G=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(P,se){this.type=P,this.g=this.target=se,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var P=!1,se=Object.defineProperty({},"passive",{get:function(){P=!0}});try{const fe=()=>{};l.addEventListener("test",fe,se),l.removeEventListener("test",fe,se)}catch{}return P}();function Y(P,se){if(F.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P){var fe=this.type=P.type,Te=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;if(this.target=P.target||P.srcElement,this.g=se,se=P.relatedTarget){if(_){e:{try{T(se.nodeName);var at=!0;break e}catch{}at=!1}at||(se=null)}}else fe=="mouseover"?se=P.fromElement:fe=="mouseout"&&(se=P.toElement);this.relatedTarget=se,Te?(this.clientX=Te.clientX!==void 0?Te.clientX:Te.pageX,this.clientY=Te.clientY!==void 0?Te.clientY:Te.pageY,this.screenX=Te.screenX||0,this.screenY=Te.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=typeof P.pointerType=="string"?P.pointerType:ae[P.pointerType]||"",this.state=P.state,this.i=P,P.defaultPrevented&&Y.aa.h.call(this)}}g(Y,F);var ae={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ne(P,se,fe,Te,at){this.listener=P,this.proxy=null,this.src=se,this.type=fe,this.capture=!!Te,this.ha=at,this.key=++ie,this.da=this.fa=!1}function oe(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function we(P){this.src=P,this.g={},this.h=0}we.prototype.add=function(P,se,fe,Te,at){var ht=P.toString();P=this.g[ht],P||(P=this.g[ht]=[],this.h++);var Ht=Ee(P,se,Te,at);return-1<Ht?(se=P[Ht],fe||(se.fa=!1)):(se=new ne(se,this.src,ht,!!Te,at),se.fa=fe,P.push(se)),se};function K(P,se){var fe=se.type;if(fe in P.g){var Te=P.g[fe],at=Array.prototype.indexOf.call(Te,se,void 0),ht;(ht=0<=at)&&Array.prototype.splice.call(Te,at,1),ht&&(oe(se),P.g[fe].length==0&&(delete P.g[fe],P.h--))}}function Ee(P,se,fe,Te){for(var at=0;at<P.length;++at){var ht=P[at];if(!ht.da&&ht.listener==se&&ht.capture==!!fe&&ht.ha==Te)return at}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),Ce={};function de(P,se,fe,Te,at){if(Array.isArray(se)){for(var ht=0;ht<se.length;ht++)de(P,se[ht],fe,Te,at);return null}return fe=$e(fe),P&&P[le]?P.K(se,fe,u(Te)?!!Te.capture:!1,at):xe(P,se,fe,!1,Te,at)}function xe(P,se,fe,Te,at,ht){if(!se)throw Error("Invalid event type");var Ht=u(at)?!!at.capture:!!at,Tr=Pe(P);if(Tr||(P[_e]=Tr=new we(P)),fe=Tr.add(se,fe,Te,Ht,ht),fe.proxy)return fe;if(Te=he(),fe.proxy=Te,Te.src=P,Te.listener=fe,P.addEventListener)X||(at=Ht),at===void 0&&(at=!1),P.addEventListener(se.toString(),Te,at);else if(P.attachEvent)P.attachEvent(Ae(se.toString()),Te);else if(P.addListener&&P.removeListener)P.addListener(Te);else throw Error("addEventListener and attachEvent are unavailable.");return fe}function he(){function P(fe){return se.call(P.src,P.listener,fe)}const se=Ne;return P}function ye(P,se,fe,Te,at){if(Array.isArray(se))for(var ht=0;ht<se.length;ht++)ye(P,se[ht],fe,Te,at);else Te=u(Te)?!!Te.capture:!!Te,fe=$e(fe),P&&P[le]?(P=P.i,se=String(se).toString(),se in P.g&&(ht=P.g[se],fe=Ee(ht,fe,Te,at),-1<fe&&(oe(ht[fe]),Array.prototype.splice.call(ht,fe,1),ht.length==0&&(delete P.g[se],P.h--)))):P&&(P=Pe(P))&&(se=P.g[se.toString()],P=-1,se&&(P=Ee(se,fe,Te,at)),(fe=-1<P?se[P]:null)&&ce(fe))}function ce(P){if(typeof P!="number"&&P&&!P.da){var se=P.src;if(se&&se[le])K(se.i,P);else{var fe=P.type,Te=P.proxy;se.removeEventListener?se.removeEventListener(fe,Te,P.capture):se.detachEvent?se.detachEvent(Ae(fe),Te):se.addListener&&se.removeListener&&se.removeListener(Te),(fe=Pe(se))?(K(fe,P),fe.h==0&&(fe.src=null,se[_e]=null)):oe(P)}}}function Ae(P){return P in Ce?Ce[P]:Ce[P]="on"+P}function Ne(P,se){if(P.da)P=!0;else{se=new Y(se,this);var fe=P.listener,Te=P.ha||P.src;P.fa&&ce(P),P=fe.call(Te,se)}return P}function Pe(P){return P=P[_e],P instanceof we?P:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(P){return typeof P=="function"?P:(P[Qe]||(P[Qe]=function(se){return P.handleEvent(se)}),P[Qe])}function et(){M.call(this),this.i=new we(this),this.M=this,this.F=null}g(et,M),et.prototype[le]=!0,et.prototype.removeEventListener=function(P,se,fe,Te){ye(this,P,se,fe,Te)};function Ke(P,se){var fe,Te=P.F;if(Te)for(fe=[];Te;Te=Te.F)fe.push(Te);if(P=P.M,Te=se.type||se,typeof se=="string")se=new F(se,P);else if(se instanceof F)se.target=se.target||P;else{var at=se;se=new F(Te,P),L(se,at)}if(at=!0,fe)for(var ht=fe.length-1;0<=ht;ht--){var Ht=se.g=fe[ht];at=Ge(Ht,Te,!0,se)&&at}if(Ht=se.g=P,at=Ge(Ht,Te,!0,se)&&at,at=Ge(Ht,Te,!1,se)&&at,fe)for(ht=0;ht<fe.length;ht++)Ht=se.g=fe[ht],at=Ge(Ht,Te,!1,se)&&at}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var P=this.i,se;for(se in P.g){for(var fe=P.g[se],Te=0;Te<fe.length;Te++)oe(fe[Te]);delete P.g[se],P.h--}}this.F=null},et.prototype.K=function(P,se,fe,Te){return this.i.add(String(P),se,!1,fe,Te)},et.prototype.L=function(P,se,fe,Te){return this.i.add(String(P),se,!0,fe,Te)};function Ge(P,se,fe,Te){if(se=P.i.g[String(se)],!se)return!0;se=se.concat();for(var at=!0,ht=0;ht<se.length;++ht){var Ht=se[ht];if(Ht&&!Ht.da&&Ht.capture==fe){var Tr=Ht.listener,ha=Ht.ha||Ht.src;Ht.fa&&K(P.i,Ht),at=Tr.call(ha,Te)!==!1&&at}}return at&&!Te.defaultPrevented}function nt(P,se,fe){if(typeof P=="function")fe&&(P=h(P,fe));else if(P&&typeof P.handleEvent=="function")P=h(P.handleEvent,P);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:l.setTimeout(P,se||0)}function bt(P){P.g=nt(()=>{P.g=null,P.i&&(P.i=!1,bt(P))},P.l);const se=P.h;P.h=null,P.m.apply(null,se)}class ut extends M{constructor(se,fe){super(),this.m=se,this.l=fe,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(P){M.call(this),this.h=P,this.g={}}g(ze,M);var Tt=[];function ir(P){O(P.g,function(se,fe){this.g.hasOwnProperty(fe)&&ce(se)},P),P.g={}}ze.prototype.N=function(){ze.aa.N.call(this),ir(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=l.JSON.stringify,Cr=l.JSON.parse,$r=class{stringify(P){return l.JSON.stringify(P,void 0)}parse(P){return l.JSON.parse(P,void 0)}};function br(){}br.prototype.h=null;function Sn(P){return P.h||(P.h=P.i())}function Pr(){}var Ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dn(){F.call(this,"d")}g(Dn,F);function Rr(){F.call(this,"c")}g(Rr,F);var pr={},Jr=null;function gs(){return Jr=Jr||new et}pr.La="serverreachability";function Za(P){F.call(this,pr.La,P)}g(Za,F);function Pn(P){const se=gs();Ke(se,new Za(se))}pr.STAT_EVENT="statevent";function Us(P,se){F.call(this,pr.STAT_EVENT,P),this.stat=se}g(Us,F);function er(P){const se=gs();Ke(se,new Us(se,P))}pr.Ma="timingevent";function xa(P,se){F.call(this,pr.Ma,P),this.size=se}g(xa,F);function la(P,se){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){P()},se)}function Ia(){this.g=!0}Ia.prototype.xa=function(){this.g=!1};function Wa(P,se,fe,Te,at,ht){P.info(function(){if(P.g)if(ht)for(var Ht="",Tr=ht.split("&"),ha=0;ha<Tr.length;ha++){var Gr=Tr[ha].split("=");if(1<Gr.length){var Ma=Gr[0];Gr=Gr[1];var tn=Ma.split("_");Ht=2<=tn.length&&tn[1]=="type"?Ht+(Ma+"="+Gr+"&"):Ht+(Ma+"=redacted&")}}else Ht=null;else Ht=ht;return"XMLHTTP REQ ("+Te+") [attempt "+at+"]: "+se+`
`+fe+`
`+Ht})}function en(P,se,fe,Te,at,ht,Ht){P.info(function(){return"XMLHTTP RESP ("+Te+") [ attempt "+at+"]: "+se+`
`+fe+`
`+ht+" "+Ht})}function je(P,se,fe,Te){P.info(function(){return"XMLHTTP TEXT ("+se+"): "+De(P,fe)+(Te?" "+Te:"")})}function Ue(P,se){P.info(function(){return"TIMEOUT: "+se})}Ia.prototype.info=function(){};function De(P,se){if(!P.g)return se;if(!se)return null;try{var fe=JSON.parse(se);if(fe){for(P=0;P<fe.length;P++)if(Array.isArray(fe[P])){var Te=fe[P];if(!(2>Te.length)){var at=Te[1];if(Array.isArray(at)&&!(1>at.length)){var ht=at[0];if(ht!="noop"&&ht!="stop"&&ht!="close")for(var Ht=1;Ht<at.length;Ht++)at[Ht]=""}}}}return Kt(fe)}catch{return se}}var Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ge={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},me;function Oe(){}g(Oe,br),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},me=new Oe;function He(P,se,fe,Te){this.j=P,this.i=se,this.l=fe,this.R=Te||1,this.U=new ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}var We={},Ye={};function wt(P,se,fe){P.L=1,P.v=vu(_i(se)),P.m=fe,P.P=!0,Nt(P,null)}function Nt(P,se){P.F=Date.now(),Vt(P),P.A=_i(P.v);var fe=P.A,Te=P.R;Array.isArray(Te)||(Te=[String(Te)]),Br(fe.i,"t",Te),P.C=0,fe=P.j.J,P.h=new Re,P.g=be(P.j,fe?se:null,!P.m),0<P.O&&(P.M=new ut(h(P.Y,P,P.g),P.O)),se=P.U,fe=P.g,Te=P.ca;var at="readystatechange";Array.isArray(at)||(at&&(Tt[0]=at.toString()),at=Tt);for(var ht=0;ht<at.length;ht++){var Ht=de(fe,at[ht],Te||se.handleEvent,!1,se.h||se);if(!Ht)break;se.g[Ht.key]=Ht}se=P.H?S(P.H):{},P.m?(P.u||(P.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.A,P.u,P.m,se)):(P.u="GET",P.g.ea(P.A,P.u,null,se)),Pn(),Wa(P.i,P.u,P.A,P.l,P.R,P.m)}He.prototype.ca=function(P){P=P.target;const se=this.M;se&&ys(P)==3?se.j():this.Y(P)},He.prototype.Y=function(P){try{if(P==this.g)e:{const tn=ys(this.g);var se=this.g.Ba();const Kl=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||b0(this.g)))){this.J||tn!=4||se==7||(se==8||0>=Kl?Pn(3):Pn(2)),ea(this);var fe=this.g.Z();this.X=fe;t:if(zt(this)){var Te=b0(this.g);P="";var at=Te.length,ht=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ia(this),ta(this);var Ht="";break t}this.h.i=new l.TextDecoder}for(se=0;se<at;se++)this.h.h=!0,P+=this.h.i.decode(Te[se],{stream:!(ht&&se==at-1)});Te.length=0,this.h.g+=P,this.C=0,Ht=this.h.g}else Ht=this.g.oa();if(this.o=fe==200,en(this.i,this.u,this.A,this.l,this.R,tn,fe),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,ha=this.g;if((Tr=ha.g?ha.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Tr)){var Gr=Tr;break t}}Gr=null}if(fe=Gr)je(this.i,this.l,fe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,fe);else{this.o=!1,this.s=3,er(12),ia(this),ta(this);break e}}if(this.P){fe=!0;let ss;for(;!this.J&&this.C<Ht.length;)if(ss=Ot(this,Ht),ss==Ye){tn==4&&(this.s=4,er(14),fe=!1),je(this.i,this.l,null,"[Incomplete Response]");break}else if(ss==We){this.s=4,er(15),je(this.i,this.l,Ht,"[Invalid Chunk]"),fe=!1;break}else je(this.i,this.l,ss,null),xs(this,ss);if(zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||Ht.length!=0||this.h.h||(this.s=1,er(16),fe=!1),this.o=this.o&&fe,!fe)je(this.i,this.l,Ht,"[Invalid Chunked Response]"),ia(this),ta(this);else if(0<Ht.length&&!this.W){this.W=!0;var Ma=this.j;Ma.g==this&&Ma.ba&&!Ma.M&&(Ma.j.info("Great, no buffering proxy detected. Bytes received: "+Ht.length),Eu(Ma),Ma.M=!0,er(11))}}else je(this.i,this.l,Ht,null),xs(this,Ht);tn==4&&ia(this),this.o&&!this.J&&(tn==4?ju(this.j,this):(this.o=!1,Vt(this)))}else wu(this.g),fe==400&&0<Ht.indexOf("Unknown SID")?(this.s=3,er(12)):(this.s=0,er(13)),ia(this),ta(this)}}}catch{}finally{}};function zt(P){return P.g?P.u=="GET"&&P.L!=2&&P.j.Ca:!1}function Ot(P,se){var fe=P.C,Te=se.indexOf(`
`,fe);return Te==-1?Ye:(fe=Number(se.substring(fe,Te)),isNaN(fe)?We:(Te+=1,Te+fe>se.length?Ye:(se=se.slice(Te,Te+fe),P.C=Te+fe,se)))}He.prototype.cancel=function(){this.J=!0,ia(this)};function Vt(P){P.S=Date.now()+P.I,jr(P,P.I)}function jr(P,se){if(P.B!=null)throw Error("WatchDog timer not null");P.B=la(h(P.ba,P),se)}function ea(P){P.B&&(l.clearTimeout(P.B),P.B=null)}He.prototype.ba=function(){this.B=null;const P=Date.now();0<=P-this.S?(Ue(this.i,this.A),this.L!=2&&(Pn(),er(17)),ia(this),this.s=2,ta(this)):jr(this,this.S-P)};function ta(P){P.j.G==0||P.J||ju(P.j,P)}function ia(P){ea(P);var se=P.M;se&&typeof se.ma=="function"&&se.ma(),P.M=null,ir(P.U),P.g&&(se=P.g,P.g=null,se.abort(),se.ma())}function xs(P,se){try{var fe=P.j;if(fe.G!=0&&(fe.g==P||ki(fe.h,P))){if(!P.K&&ki(fe.h,P)&&fe.G==3){try{var Te=fe.Da.g.parse(se)}catch{Te=null}if(Array.isArray(Te)&&Te.length==3){var at=Te;if(at[0]==0){e:if(!fe.u){if(fe.g)if(fe.g.F+3e3<P.F)Ic(fe),bf(fe);else break e;xd(fe),er(18)}}else fe.za=at[1],0<fe.za-fe.T&&37500>at[2]&&fe.F&&fe.v==0&&!fe.C&&(fe.C=la(h(fe.Za,fe),6e3));if(1>=Qs(fe.h)&&fe.ca){try{fe.ca()}catch{}fe.ca=void 0}}else Ki(fe,11)}else if((P.K||fe.g==P)&&Ic(fe),!N(se))for(at=fe.Da.g.parse(se),se=0;se<at.length;se++){let Gr=at[se];if(fe.T=Gr[0],Gr=Gr[1],fe.G==2)if(Gr[0]=="c"){fe.K=Gr[1],fe.ia=Gr[2];const Ma=Gr[3];Ma!=null&&(fe.la=Ma,fe.j.info("VER="+fe.la));const tn=Gr[4];tn!=null&&(fe.Aa=tn,fe.j.info("SVER="+fe.Aa));const Kl=Gr[5];Kl!=null&&typeof Kl=="number"&&0<Kl&&(Te=1.5*Kl,fe.L=Te,fe.j.info("backChannelRequestTimeoutMs_="+Te)),Te=fe;const ss=P.g;if(ss){const Mo=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var ht=Te.h;ht.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(ht.j=ht.l,ht.g=new Set,ht.h&&(yn(ht,ht.h),ht.h=null))}if(Te.D){const ku=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;ku&&(Te.ya=ku,La(Te.I,Te.D,ku))}}fe.G=3,fe.l&&fe.l.ua(),fe.ba&&(fe.R=Date.now()-P.F,fe.j.info("Handshake RTT: "+fe.R+"ms")),Te=fe;var Ht=P;if(Te.qa=te(Te,Te.J?Te.ia:null,Te.W),Ht.K){ui(Te.h,Ht);var Tr=Ht,ha=Te.L;ha&&(Tr.I=ha),Tr.B&&(ea(Tr),Vt(Tr)),Te.g=Ht}else wf(Te);0<fe.i.length&&yf(fe)}else Gr[0]!="stop"&&Gr[0]!="close"||Ki(fe,7);else fe.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Ki(fe,7):Tc(fe):Gr[0]!="noop"&&fe.l&&fe.l.ta(Gr),fe.v=0)}}Pn(4)}catch{}}var Fo=class{constructor(P,se){this.g=P,this.map=se}};function vs(P){this.l=P||10,l.PerformanceNavigationTiming?(P=l.performance.getEntriesByType("navigation"),P=0<P.length&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2")):P=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ci(P){return P.h?!0:P.g?P.g.size>=P.j:!1}function Qs(P){return P.h?1:P.g?P.g.size:0}function ki(P,se){return P.h?P.h==se:P.g?P.g.has(se):!1}function yn(P,se){P.g?P.g.add(se):P.h=se}function ui(P,se){P.h&&P.h==se?P.h=null:P.g&&P.g.has(se)&&P.g.delete(se)}vs.prototype.cancel=function(){if(this.i=gf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const P of this.g.values())P.cancel();this.g.clear()}};function gf(P){if(P.h!=null)return P.i.concat(P.h.D);if(P.g!=null&&P.g.size!==0){let se=P.i;for(const fe of P.g.values())se=se.concat(fe.D);return se}return x(P.i)}function g0(P){if(P.V&&typeof P.V=="function")return P.V();if(typeof Map<"u"&&P instanceof Map||typeof Set<"u"&&P instanceof Set)return Array.from(P.values());if(typeof P=="string")return P.split("");if(c(P)){for(var se=[],fe=P.length,Te=0;Te<fe;Te++)se.push(P[Te]);return se}se=[],fe=0;for(Te in P)se[fe++]=P[Te];return se}function pu(P){if(P.na&&typeof P.na=="function")return P.na();if(!P.V||typeof P.V!="function"){if(typeof Map<"u"&&P instanceof Map)return Array.from(P.keys());if(!(typeof Set<"u"&&P instanceof Set)){if(c(P)||typeof P=="string"){var se=[];P=P.length;for(var fe=0;fe<P;fe++)se.push(fe);return se}se=[],fe=0;for(const Te in P)se[fe++]=Te;return se}}}function FA(P,se){if(P.forEach&&typeof P.forEach=="function")P.forEach(se,void 0);else if(c(P)||typeof P=="string")Array.prototype.forEach.call(P,se,void 0);else for(var fe=pu(P),Te=g0(P),at=Te.length,ht=0;ht<at;ht++)se.call(void 0,Te[ht],fe&&fe[ht],P)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xf(P,se){if(P){P=P.split("&");for(var fe=0;fe<P.length;fe++){var Te=P[fe].indexOf("="),at=null;if(0<=Te){var ht=P[fe].substring(0,Te);at=P[fe].substring(Te+1)}else ht=P[fe];se(ht,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}function ja(P){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,P instanceof ja){this.h=P.h,gu(this,P.j),this.o=P.o,this.g=P.g,xu(this,P.s),this.l=P.l;var se=P.i,fe=new Hl;fe.i=se.i,se.g&&(fe.g=new Map(se.g),fe.h=se.h),Ql(this,fe),this.m=P.m}else P&&(se=String(P).match(Si))?(this.h=!1,gu(this,se[1]||"",!0),this.o=Do(se[2]||""),this.g=Do(se[3]||"",!0),xu(this,se[4]),this.l=Do(se[5]||"",!0),Ql(this,se[6]||"",!0),this.m=Do(se[7]||"")):(this.h=!1,this.i=new Hl(null,this.h))}ja.prototype.toString=function(){var P=[],se=this.j;se&&P.push(jc(se,DA,!0),":");var fe=this.g;return(fe||se=="file")&&(P.push("//"),(se=this.o)&&P.push(jc(se,DA,!0),"@"),P.push(encodeURIComponent(String(fe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),fe=this.s,fe!=null&&P.push(":",String(fe))),(fe=this.l)&&(this.g&&fe.charAt(0)!="/"&&P.push("/"),P.push(jc(fe,fe.charAt(0)=="/"?kc:PA,!0))),(fe=this.i.toString())&&P.push("?",fe),(fe=this.m)&&P.push("#",jc(fe,Sc)),P.join("")};function _i(P){return new ja(P)}function gu(P,se,fe){P.j=fe?Do(se,!0):se,P.j&&(P.j=P.j.replace(/:$/,""))}function xu(P,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);P.s=se}else P.s=null}function Ql(P,se,fe){se instanceof Hl?(P.i=se,v0(P.i,P.h)):(fe||(se=jc(se,vf)),P.i=new Hl(se,P.h))}function La(P,se,fe){P.i.set(se,fe)}function vu(P){return La(P,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),P}function Do(P,se){return P?se?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function jc(P,se,fe){return typeof P=="string"?(P=encodeURI(P).replace(se,x0),fe&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function x0(P){return P=P.charCodeAt(0),"%"+(P>>4&15).toString(16)+(P&15).toString(16)}var DA=/[#\/\?@]/g,PA=/[#\?:]/g,kc=/[#\?]/g,vf=/[#\?@]/g,Sc=/#/g;function Hl(P,se){this.h=this.g=null,this.i=P||null,this.j=!!se}function fn(P){P.g||(P.g=new Map,P.h=0,P.i&&xf(P.i,function(se,fe){P.add(decodeURIComponent(se.replace(/\+/g," ")),fe)}))}e=Hl.prototype,e.add=function(P,se){fn(this),this.i=null,P=Vl(this,P);var fe=this.g.get(P);return fe||this.g.set(P,fe=[]),fe.push(se),this.h+=1,this};function _c(P,se){fn(P),se=Vl(P,se),P.g.has(se)&&(P.i=null,P.h-=P.g.get(se).length,P.g.delete(se))}function zl(P,se){return fn(P),se=Vl(P,se),P.g.has(se)}e.forEach=function(P,se){fn(this),this.g.forEach(function(fe,Te){fe.forEach(function(at){P.call(se,at,Te,this)},this)},this)},e.na=function(){fn(this);const P=Array.from(this.g.values()),se=Array.from(this.g.keys()),fe=[];for(let Te=0;Te<se.length;Te++){const at=P[Te];for(let ht=0;ht<at.length;ht++)fe.push(se[Te])}return fe},e.V=function(P){fn(this);let se=[];if(typeof P=="string")zl(this,P)&&(se=se.concat(this.g.get(Vl(this,P))));else{P=Array.from(this.g.values());for(let fe=0;fe<P.length;fe++)se=se.concat(P[fe])}return se},e.set=function(P,se){return fn(this),this.i=null,P=Vl(this,P),zl(this,P)&&(this.h-=this.g.get(P).length),this.g.set(P,[se]),this.h+=1,this},e.get=function(P,se){return P?(P=this.V(P),0<P.length?String(P[0]):se):se};function Br(P,se,fe){_c(P,se),0<fe.length&&(P.i=null,P.g.set(Vl(P,se),x(fe)),P.h+=fe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const P=[],se=Array.from(this.g.keys());for(var fe=0;fe<se.length;fe++){var Te=se[fe];const ht=encodeURIComponent(String(Te)),Ht=this.V(Te);for(Te=0;Te<Ht.length;Te++){var at=ht;Ht[Te]!==""&&(at+="="+encodeURIComponent(String(Ht[Te]))),P.push(at)}}return this.i=P.join("&")};function Vl(P,se){return se=String(se),P.j&&(se=se.toLowerCase()),se}function v0(P,se){se&&!P.j&&(fn(P),P.i=null,P.g.forEach(function(fe,Te){var at=Te.toLowerCase();Te!=at&&(_c(this,Te),Br(this,at,fe))},P)),P.j=se}function $i(P,se){const fe=new Ia;if(l.Image){const Te=new Image;Te.onload=m(ho,fe,"TestLoadImage: loaded",!0,se,Te),Te.onerror=m(ho,fe,"TestLoadImage: error",!1,se,Te),Te.onabort=m(ho,fe,"TestLoadImage: abort",!1,se,Te),Te.ontimeout=m(ho,fe,"TestLoadImage: timeout",!1,se,Te),l.setTimeout(function(){Te.ontimeout&&Te.ontimeout()},1e4),Te.src=P}else se(!1)}function Po(P,se){const fe=new Ia,Te=new AbortController,at=setTimeout(()=>{Te.abort(),ho(fe,"TestPingServer: timeout",!1,se)},1e4);fetch(P,{signal:Te.signal}).then(ht=>{clearTimeout(at),ht.ok?ho(fe,"TestPingServer: ok",!0,se):ho(fe,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(at),ho(fe,"TestPingServer: error",!1,se)})}function ho(P,se,fe,Te,at){try{at&&(at.onload=null,at.onerror=null,at.onabort=null,at.ontimeout=null),Te(fe)}catch{}}function $l(){this.g=new $r}function Ro(P,se,fe){const Te=fe||"";try{FA(P,function(at,ht){let Ht=at;u(at)&&(Ht=Kt(at)),se.push(Te+ht+"="+encodeURIComponent(Ht))})}catch(at){throw se.push(Te+"type="+encodeURIComponent("_badmap")),at}}function bu(P){this.l=P.Ub||null,this.j=P.eb||!1}g(bu,br),bu.prototype.g=function(){return new Bc(this.l,this.j)},bu.prototype.i=function(P){return function(){return P}}({});function Bc(P,se){et.call(this),this.D=P,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Bc,et),e=Bc.prototype,e.open=function(P,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=P,this.A=se,this.readyState=1,Gi(this)},e.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};P&&(se.body=P),(this.D||l).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},e.Sa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RA(this)}else P.text().then(this.Ra.bind(this),this.ga.bind(this))};function RA(P){P.j.read().then(P.Pa.bind(P)).catch(P.ga.bind(P))}e.Pa=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var se=P.value?P.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!P.done}))&&(this.response=this.responseText+=se)}P.done?Lo(this):Gi(this),this.readyState==3&&RA(this)}},e.Ra=function(P){this.g&&(this.response=this.responseText=P,Lo(this))},e.Qa=function(P){this.g&&(this.response=P,Lo(this))},e.ga=function(){this.g&&Lo(this)};function Lo(P){P.readyState=4,P.l=null,P.j=null,P.v=null,Gi(P)}e.setRequestHeader=function(P,se){this.u.append(P,se)},e.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const P=[],se=this.h.entries();for(var fe=se.next();!fe.done;)fe=fe.value,P.push(fe[0]+": "+fe[1]),fe=se.next();return P.join(`\r
`)};function Gi(P){P.onreadystatechange&&P.onreadystatechange.call(P)}Object.defineProperty(Bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}});function Gl(P){let se="";return O(P,function(fe,Te){se+=Te,se+=":",se+=fe,se+=`\r
`}),se}function bs(P,se,fe){e:{for(Te in fe){var Te=!1;break e}Te=!0}Te||(fe=Gl(fe),typeof P=="string"?fe!=null&&encodeURIComponent(String(fe)):La(P,se,fe))}function Aa(P){et.call(this),this.headers=new Map,this.o=P||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Aa,et);var yu=/^https?$/i,ql=["POST","PUT"];e=Aa.prototype,e.Ha=function(P){this.J=P},e.ea=function(P,se,fe,Te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);se=se?se.toUpperCase():"GET",this.D=P,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():me.g(),this.v=this.o?Sn(this.o):Sn(me),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(se,String(P),!0),this.B=!1}catch(ht){LA(this,ht);return}if(P=fe||"",fe=new Map(this.headers),Te)if(Object.getPrototypeOf(Te)===Object.prototype)for(var at in Te)fe.set(at,Te[at]);else if(typeof Te.keys=="function"&&typeof Te.get=="function")for(const ht of Te.keys())fe.set(ht,Te.get(ht));else throw Error("Unknown input type for opt_headers: "+String(Te));Te=Array.from(fe.keys()).find(ht=>ht.toLowerCase()=="content-type"),at=l.FormData&&P instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ql,se,void 0))||Te||at||fe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ht,Ht]of fe)this.g.setRequestHeader(ht,Ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qi(this),this.u=!0,this.g.send(P),this.u=!1}catch(ht){LA(this,ht)}};function LA(P,se){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=se,P.m=5,Ad(P),wl(P)}function Ad(P){P.A||(P.A=!0,Ke(P,"complete"),Ke(P,"error"))}e.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=P||7,Ke(this,"complete"),Ke(this,"abort"),wl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Aa.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?hd(this):this.bb())},e.bb=function(){hd(this)};function hd(P){if(P.h&&typeof o<"u"&&(!P.v[1]||ys(P)!=4||P.Z()!=2)){if(P.u&&ys(P)==4)nt(P.Ea,0,P);else if(Ke(P,"readystatechange"),ys(P)==4){P.h=!1;try{const Ht=P.Z();e:switch(Ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var fe;if(!(fe=se)){var Te;if(Te=Ht===0){var at=String(P.D).match(Si)[1]||null;!at&&l.self&&l.self.location&&(at=l.self.location.protocol.slice(0,-1)),Te=!yu.test(at?at.toLowerCase():"")}fe=Te}if(fe)Ke(P,"complete"),Ke(P,"success");else{P.m=6;try{var ht=2<ys(P)?P.g.statusText:""}catch{ht=""}P.l=ht+" ["+P.Z()+"]",Ad(P)}}finally{wl(P)}}}}function wl(P,se){if(P.g){qi(P);const fe=P.g,Te=P.v[0]?()=>{}:null;P.g=null,P.v=null,se||Ke(P,"ready");try{fe.onreadystatechange=Te}catch{}}}function qi(P){P.I&&(l.clearTimeout(P.I),P.I=null)}e.isActive=function(){return!!this.g};function ys(P){return P.g?P.g.readyState:0}e.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(P){if(this.g){var se=this.g.responseText;return P&&se.indexOf(P)==0&&(se=se.substring(P.length)),Cr(se)}};function b0(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.H){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function wu(P){const se={};P=(P.g&&2<=ys(P)&&P.g.getAllResponseHeaders()||"").split(`\r
`);for(let Te=0;Te<P.length;Te++){if(N(P[Te]))continue;var fe=D(P[Te]);const at=fe[0];if(fe=fe[1],typeof fe!="string")continue;fe=fe.trim();const ht=se[at]||[];se[at]=ht,ht.push(fe)}j(se,function(Te){return Te.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(P,se,fe){return fe&&fe.internalChannelParams&&fe.internalChannelParams[P]||se}function Nu(P){this.Aa=0,this.i=[],this.j=new Ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,P),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,P),this.cb=Bi("retryDelaySeedMs",1e4,P),this.Wa=Bi("forwardChannelMaxRetries",2,P),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,P),this.pa=P&&P.xmlHttpFactory||void 0,this.Xa=P&&P.Tb||void 0,this.Ca=P&&P.useFetchStreams||!1,this.L=void 0,this.J=P&&P.supportsCrossDomainXhr||!1,this.K="",this.h=new vs(P&&P.concurrentRequestLimit),this.Da=new $l,this.P=P&&P.fastHandshake||!1,this.O=P&&P.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=P&&P.Rb||!1,P&&P.xa&&this.j.xa(),P&&P.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&P&&P.detectBufferingProxy||!1,this.ja=void 0,P&&P.longPollingTimeout&&0<P.longPollingTimeout&&(this.ja=P.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Nu.prototype,e.la=8,e.G=1,e.connect=function(P,se,fe,Te){er(0),this.W=P,this.H=se||{},fe&&Te!==void 0&&(this.H.OSID=fe,this.H.OAID=Te),this.F=this.X,this.I=te(this,null,this.W),yf(this)};function Tc(P){if(md(P),P.G==3){var se=P.U++,fe=_i(P.I);if(La(fe,"SID",P.K),La(fe,"RID",se),La(fe,"TYPE","terminate"),Cu(P,fe),se=new He(P,P.j,se),se.L=2,se.v=vu(_i(fe)),fe=!1,l.navigator&&l.navigator.sendBeacon)try{fe=l.navigator.sendBeacon(se.v.toString(),"")}catch{}!fe&&l.Image&&(new Image().src=se.v,fe=!0),fe||(se.g=be(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Vt(se)}Nf(P)}function bf(P){P.g&&(Eu(P),P.g.cancel(),P.g=null)}function md(P){bf(P),P.u&&(l.clearTimeout(P.u),P.u=null),Ic(P),P.h.cancel(),P.s&&(typeof P.s=="number"&&l.clearTimeout(P.s),P.s=null)}function yf(P){if(!ci(P.h)&&!P.s){P.s=!0;var se=P.Ga;V||W(),G||(V(),G=!0),J.add(se,P),P.B=0}}function MA(P,se){return Qs(P.h)>=P.h.j-(P.s?1:0)?!1:P.s?(P.i=se.D.concat(P.i),!0):P.G==1||P.G==2||P.B>=(P.Va?0:P.Wa)?!1:(P.s=la(h(P.Ga,P,se),vd(P,P.B)),P.B++,!0)}e.Ga=function(P){if(this.s)if(this.s=null,this.G==1){if(!P){this.U=Math.floor(1e5*Math.random()),P=this.U++;const at=new He(this,this.j,P);let ht=this.o;if(this.S&&(ht?(ht=S(ht),L(ht,this.S)):ht=this.S),this.m!==null||this.O||(at.H=ht,ht=null),this.P)e:{for(var se=0,fe=0;fe<this.i.length;fe++){t:{var Te=this.i[fe];if("__data__"in Te.map&&(Te=Te.map.__data__,typeof Te=="string")){Te=Te.length;break t}Te=void 0}if(Te===void 0)break;if(se+=Te,4096<se){se=fe;break e}if(se===4096||fe===this.i.length-1){se=fe+1;break e}}se=1e3}else se=1e3;se=gd(this,at,se),fe=_i(this.I),La(fe,"RID",P),La(fe,"CVER",22),this.D&&La(fe,"X-HTTP-Session-Id",this.D),Cu(this,fe),ht&&(this.O?se="headers="+encodeURIComponent(String(Gl(ht)))+"&"+se:this.m&&bs(fe,this.m,ht)),yn(this.h,at),this.Ua&&La(fe,"TYPE","init"),this.P?(La(fe,"$req",se),La(fe,"SID","null"),at.T=!0,wt(at,fe,null)):wt(at,fe,se),this.G=2}}else this.G==3&&(P?pd(this,P):this.i.length==0||ci(this.h)||pd(this))};function pd(P,se){var fe;se?fe=se.l:fe=P.U++;const Te=_i(P.I);La(Te,"SID",P.K),La(Te,"RID",fe),La(Te,"AID",P.T),Cu(P,Te),P.m&&P.o&&bs(Te,P.m,P.o),fe=new He(P,P.j,fe,P.B+1),P.m===null&&(fe.H=P.o),se&&(P.i=se.D.concat(P.i)),se=gd(P,fe,1e3),fe.I=Math.round(.5*P.wa)+Math.round(.5*P.wa*Math.random()),yn(P.h,fe),wt(fe,Te,se)}function Cu(P,se){P.H&&O(P.H,function(fe,Te){La(se,Te,fe)}),P.l&&FA({},function(fe,Te){La(se,Te,fe)})}function gd(P,se,fe){fe=Math.min(P.i.length,fe);var Te=P.l?h(P.l.Na,P.l,P):null;e:{var at=P.i;let ht=-1;for(;;){const Ht=["count="+fe];ht==-1?0<fe?(ht=at[0].g,Ht.push("ofs="+ht)):ht=0:Ht.push("ofs="+ht);let Tr=!0;for(let ha=0;ha<fe;ha++){let Gr=at[ha].g;const Ma=at[ha].map;if(Gr-=ht,0>Gr)ht=Math.max(0,at[ha].g-100),Tr=!1;else try{Ro(Ma,Ht,"req"+Gr+"_")}catch{Te&&Te(Ma)}}if(Tr){Te=Ht.join("&");break e}}}return P=P.i.splice(0,fe),se.D=P,Te}function wf(P){if(!P.g&&!P.u){P.Y=1;var se=P.Fa;V||W(),G||(V(),G=!0),J.add(se,P),P.v=0}}function xd(P){return P.g||P.u||3<=P.v?!1:(P.Y++,P.u=la(h(P.Fa,P),vd(P,P.v)),P.v++,!0)}e.Fa=function(){if(this.u=null,y0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var P=2*this.R;this.j.info("BP detection timer enabled: "+P),this.A=la(h(this.ab,this),P)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,er(10),bf(this),y0(this))};function Eu(P){P.A!=null&&(l.clearTimeout(P.A),P.A=null)}function y0(P){P.g=new He(P,P.j,"rpc",P.Y),P.m===null&&(P.g.H=P.o),P.g.O=0;var se=_i(P.qa);La(se,"RID","rpc"),La(se,"SID",P.K),La(se,"AID",P.T),La(se,"CI",P.F?"0":"1"),!P.F&&P.ja&&La(se,"TO",P.ja),La(se,"TYPE","xmlhttp"),Cu(P,se),P.m&&P.o&&bs(se,P.m,P.o),P.L&&(P.g.I=P.L);var fe=P.g;P=P.ia,fe.L=1,fe.v=vu(_i(se)),fe.m=null,fe.P=!0,Nt(fe,P)}e.Za=function(){this.C!=null&&(this.C=null,bf(this),xd(this),er(19))};function Ic(P){P.C!=null&&(l.clearTimeout(P.C),P.C=null)}function ju(P,se){var fe=null;if(P.g==se){Ic(P),Eu(P),P.g=null;var Te=2}else if(ki(P.h,se))fe=se.D,ui(P.h,se),Te=1;else return;if(P.G!=0){if(se.o)if(Te==1){fe=se.m?se.m.length:0,se=Date.now()-se.F;var at=P.B;Te=gs(),Ke(Te,new xa(Te,fe)),yf(P)}else wf(P);else if(at=se.s,at==3||at==0&&0<se.X||!(Te==1&&MA(P,se)||Te==2&&xd(P)))switch(fe&&0<fe.length&&(se=P.h,se.i=se.i.concat(fe)),at){case 1:Ki(P,5);break;case 4:Ki(P,10);break;case 3:Ki(P,6);break;default:Ki(P,2)}}}function vd(P,se){let fe=P.Ta+Math.floor(Math.random()*P.cb);return P.isActive()||(fe*=2),fe*se}function Ki(P,se){if(P.j.info("Error code "+se),se==2){var fe=h(P.fb,P),Te=P.Xa;const at=!Te;Te=new ja(Te||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gu(Te,"https"),vu(Te),at?$i(Te.toString(),fe):Po(Te.toString(),fe)}else er(2);P.G=0,P.l&&P.l.sa(se),Nf(P),md(P)}e.fb=function(P){P?(this.j.info("Successfully pinged google.com"),er(2)):(this.j.info("Failed to ping google.com"),er(1))};function Nf(P){if(P.G=0,P.ka=[],P.l){const se=gf(P.h);(se.length!=0||P.i.length!=0)&&(v(P.ka,se),v(P.ka,P.i),P.h.i.length=0,x(P.i),P.i.length=0),P.l.ra()}}function te(P,se,fe){var Te=fe instanceof ja?_i(fe):new ja(fe);if(Te.g!="")se&&(Te.g=se+"."+Te.g),xu(Te,Te.s);else{var at=l.location;Te=at.protocol,se=se?se+"."+at.hostname:at.hostname,at=+at.port;var ht=new ja(null);Te&&gu(ht,Te),se&&(ht.g=se),at&&xu(ht,at),fe&&(ht.l=fe),Te=ht}return fe=P.D,se=P.ya,fe&&se&&La(Te,fe,se),La(Te,"VER",P.la),Cu(P,Te),Te}function be(P,se,fe){if(se&&!P.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=P.Ca&&!P.pa?new Aa(new bu({eb:fe})):new Aa(P.pa),se.Ha(P.J),se}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ve(){}e=Ve.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Xe(){}Xe.prototype.g=function(P,se){return new st(P,se)};function st(P,se){et.call(this),this.g=new Nu(se),this.l=P,this.h=se&&se.messageUrlParams||null,P=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(P?P["X-WebChannel-Content-Type"]=se.messageContentType:P={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(P?P["X-WebChannel-Client-Profile"]=se.va:P={"X-WebChannel-Client-Profile":se.va}),this.g.S=P,(P=se&&se.Sb)&&!N(P)&&(this.g.m=P),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!N(se)&&(this.g.D=se,P=this.h,P!==null&&se in P&&(P=this.h,se in P&&delete P[se])),this.j=new Jt(this)}g(st,et),st.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},st.prototype.close=function(){Tc(this.g)},st.prototype.o=function(P){var se=this.g;if(typeof P=="string"){var fe={};fe.__data__=P,P=fe}else this.u&&(fe={},fe.__data__=Kt(P),P=fe);se.i.push(new Fo(se.Ya++,P)),se.G==3&&yf(se)},st.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,st.aa.N.call(this)};function Ct(P){Dn.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var se=P.__sm__;if(se){e:{for(const fe in se){P=fe;break e}P=void 0}(this.i=P)&&(P=this.i,se=se!==null&&P in se?se[P]:void 0),this.data=se}else this.data=P}g(Ct,Dn);function Qt(){Rr.call(this),this.status=1}g(Qt,Rr);function Jt(P){this.g=P}g(Jt,Ve),Jt.prototype.ua=function(){Ke(this.g,"a")},Jt.prototype.ta=function(P){Ke(this.g,new Ct(P))},Jt.prototype.sa=function(P){Ke(this.g,new Qt)},Jt.prototype.ra=function(){Ke(this.g,"b")},Xe.prototype.createWebChannel=Xe.prototype.g,st.prototype.send=st.prototype.o,st.prototype.open=st.prototype.m,st.prototype.close=st.prototype.close,Aee=function(){return new Xe},fee=function(){return gs()},dee=pr,PO={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,Zj=Le,ge.COMPLETE="complete",uee=ge,Pr.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",et.prototype.listen=et.prototype.K,p2=Pr,Aa.prototype.listenOnce=Aa.prototype.L,Aa.prototype.getLastError=Aa.prototype.Ka,Aa.prototype.getLastErrorCode=Aa.prototype.Ba,Aa.prototype.getStatus=Aa.prototype.Z,Aa.prototype.getResponseJson=Aa.prototype.Oa,Aa.prototype.getResponseText=Aa.prototype.oa,Aa.prototype.send=Aa.prototype.ea,Aa.prototype.setWithCredentials=Aa.prototype.Ha,cee=Aa}).apply(typeof pE<"u"?pE:typeof self<"u"?self:typeof window<"u"?window:{});const ZQ="@firebase/firestore",eH="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};tl.UNAUTHENTICATED=new tl(null),tl.GOOGLE_CREDENTIALS=new tl("google-credentials-uid"),tl.FIRST_PARTY=new tl("first-party-uid"),tl.MOCK_USER=new tl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=new XP("@firebase/firestore");function Cv(){return Pg.logLevel}function ur(e,...t){if(Pg.logLevel<=wa.DEBUG){const r=t.map(oR);Pg.debug(`Firestore (${d1}): ${e}`,...r)}}function zh(e,...t){if(Pg.logLevel<=wa.ERROR){const r=t.map(oR);Pg.error(`Firestore (${d1}): ${e}`,...r)}}function Rg(e,...t){if(Pg.logLevel<=wa.WARN){const r=t.map(oR);Pg.warn(`Firestore (${d1}): ${e}`,...r)}}function oR(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,hee(e,a,r)}function hee(e,t,r){let a=`FIRESTORE (${d1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{a+=" CONTEXT: "+JSON.stringify(r)}catch{a+=" CONTEXT: "+r}throw zh(a),new Error(a)}function un(e,t,r,a){let n="Unexpected state";typeof r=="string"?n=r:a=r,e||hee(t,n,a)}function Xr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends uf{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mee{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pee{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(tl.UNAUTHENTICATED))}shutdown(){}}class gve{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class xve{constructor(t){this.t=t,this.currentUser=tl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){un(this.o===void 0,42304);let a=this.i;const n=c=>this.i!==a?(a=this.i,r(c)):Promise.resolve();let i=new Th;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Th,t.enqueueRetryable(()=>n(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await n(this.currentUser)})},l=c=>{ur("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ur("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Th)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(ur("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(un(typeof a.accessToken=="string",31837,{l:a}),new mee(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return un(t===null||typeof t=="string",2055,{h:t}),new tl(t)}}class vve{constructor(t,r,a){this.P=t,this.T=r,this.I=a,this.type="FirstParty",this.user=tl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bve{constructor(t,r,a){this.P=t,this.T=r,this.I=a}getToken(){return Promise.resolve(new vve(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(tl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tH{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yve{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){un(this.o===void 0,3512);const a=i=>{i.error!=null&&ur("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ur("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>a(i))};const n=i=>{ur("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?n(i):ur("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tH(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(un(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new tH(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wve(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<e;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const n=wve(40);for(let i=0;i<n.length;++i)a.length<20&&n[i]<r&&(a+=t.charAt(n[i]%62))}return a}}function Na(e,t){return e<t?-1:e>t?1:0}function RO(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const n=e.charAt(a),i=t.charAt(a);if(n!==i)return DB(n)===DB(i)?Na(n,i):DB(n)?1:-1}return Na(e.length,t.length)}const Nve=55296,Cve=57343;function DB(e){const t=e.charCodeAt(0);return t>=Nve&&t<=Cve}function Nb(e,t,r){return e.length===t.length&&e.every((a,n)=>r(a,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH="__name__";class Zf{constructor(t,r,a){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),a===void 0?a=t.length-r:a>t.length-r&&Hr(1746,{length:a,range:t.length-r}),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return Zf.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Zf?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let n=0;n<a;n++){const i=Zf.compareSegments(t.get(n),r.get(n));if(i!==0)return i}return Na(t.length,r.length)}static compareSegments(t,r){const a=Zf.isNumericId(t),n=Zf.isNumericId(r);return a&&!n?-1:!a&&n?1:a&&n?Zf.extractNumericId(t).compare(Zf.extractNumericId(r)):RO(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Im.fromString(t.substring(4,t.length-2))}}class In extends Zf{construct(t,r,a){return new In(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Xt(kt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(n=>n.length>0))}return new In(r)}static emptyPath(){return new In([])}}const Eve=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class so extends Zf{construct(t,r,a){return new so(t,r,a)}static isValidIdentifier(t){return Eve.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),so.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rH}static keyField(){return new so([rH])}static fromServerFormat(t){const r=[];let a="",n=0;const i=()=>{if(a.length===0)throw new Xt(kt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;n<t.length;){const l=t[n];if(l==="\\"){if(n+1===t.length)throw new Xt(kt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[n+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(kt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,n+=2}else l==="`"?(o=!o,n++):l!=="."||o?(a+=l,n++):(i(),n++)}if(i(),o)throw new Xt(kt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new so(r)}static emptyPath(){return new so([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t){this.path=t}static fromPath(t){return new vr(In.fromString(t))}static fromName(t){return new vr(In.fromString(t).popFirst(5))}static empty(){return new vr(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&In.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return In.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vr(new In(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gee(e,t,r){if(!r)throw new Xt(kt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xee(e,t,r,a){if(t===!0&&a===!0)throw new Xt(kt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function aH(e){if(!vr.isDocumentKey(e))throw new Xt(kt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function nH(e){if(vr.isDocumentKey(e))throw new Xt(kt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vee(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function r_(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function Al(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(kt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=r_(e);throw new Xt(kt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function jve(e,t){if(t<=0)throw new Xt(kt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(e,t){const r={typeString:e};return t&&(r.value=t),r}function EN(e,t){if(!vee(e))throw new Xt(kt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const a in t)if(t[a]){const n=t[a].typeString,i="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){r=`JSON missing required field: '${a}'`;break}const o=e[a];if(n&&typeof o!==n){r=`JSON field '${a}' must be a ${n}.`;break}if(i!==void 0&&o!==i.value){r=`Expected '${a}' field to equal '${i.value}'`;break}}if(r)throw new Xt(kt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=-62135596800,iH=1e6;class lr{static now(){return lr.fromMillis(Date.now())}static fromDate(t){return lr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*iH);return new lr(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<sH)throw new Xt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iH}_compareTo(t){return this.seconds===t.seconds?Na(this.nanoseconds,t.nanoseconds):Na(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(EN(t,lr._jsonSchema))return new lr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-sH;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lr._jsonSchemaVersion="firestore/timestamp/1.0",lr._jsonSchema={type:Ci("string",lr._jsonSchemaVersion),seconds:Ci("number"),nanoseconds:Ci("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{static fromTimestamp(t){return new Kr(t)}static min(){return new Kr(new lr(0,0))}static max(){return new Kr(new lr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=-1;function kve(e,t){const r=e.toTimestamp().seconds,a=e.toTimestamp().nanoseconds+1,n=Kr.fromTimestamp(a===1e9?new lr(r+1,0):new lr(r,a));return new $m(n,vr.empty(),t)}function Sve(e){return new $m(e.readTime,e.key,ww)}class $m{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new $m(Kr.min(),vr.empty(),ww)}static max(){return new $m(Kr.max(),vr.empty(),ww)}}function _ve(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=vr.comparator(e.documentKey,t.documentKey),r!==0?r:Na(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tve{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(e){if(e.code!==kt.FAILED_PRECONDITION||e.message!==Bve)throw e;ur("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Lt((a,n)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(a,n)},this.catchCallback=i=>{this.wrapFailure(r,i).next(a,n)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Lt?r:Lt.resolve(r)}catch(r){return Lt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Lt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Lt.reject(r)}static resolve(t){return new Lt((r,a)=>{r(t)})}static reject(t){return new Lt((r,a)=>{a(t)})}static waitFor(t){return new Lt((r,a)=>{let n=0,i=0,o=!1;t.forEach(l=>{++n,l.next(()=>{++i,o&&i===n&&r()},c=>a(c))}),o=!0,i===n&&r()})}static or(t){let r=Lt.resolve(!1);for(const a of t)r=r.next(n=>n?Lt.resolve(n):a());return r}static forEach(t,r){const a=[];return t.forEach((n,i)=>{a.push(r.call(this,n,i))}),this.waitFor(a)}static mapArray(t,r){return new Lt((a,n)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===i&&a(o)},d=>n(d))}})}static doWhile(t,r){return new Lt((a,n)=>{const i=()=>{t()===!0?r().next(()=>{i()},n):a()};i()})}}function Ive(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function A1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>r.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}a_.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=-1;function n_(e){return e==null}function V5(e){return e===0&&1/e==-1/0}function Ove(e){return typeof e=="number"&&Number.isInteger(e)&&!V5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee="";function Fve(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=oH(t)),t=Dve(e.get(r),t);return oH(t)}function Dve(e,t){let r=t;const a=e.length;for(let n=0;n<a;n++){const i=e.charAt(n);switch(i){case"\0":r+="";break;case bee:r+="";break;default:r+=i}}return r}function oH(e){return e+bee+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function lp(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function yee(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,r){this.comparator=t,this.root=r||jo.EMPTY}insert(t,r){return new As(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,jo.BLACK,null,null))}remove(t){return new As(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const n=this.comparator(t,a.key);if(n===0)return r+a.left.size;n<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gE(this.root,t,this.comparator,!1)}getReverseIterator(){return new gE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gE(this.root,t,this.comparator,!0)}}class gE{constructor(t,r,a,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=r?a(t.key,r):1,r&&n&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class jo{constructor(t,r,a,n,i){this.key=t,this.value=r,this.color=a??jo.RED,this.left=n??jo.EMPTY,this.right=i??jo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,n,i){return new jo(t??this.key,r??this.value,a??this.color,n??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let n=this;const i=a(t,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(t,r,a),null):i===0?n.copy(null,r,null,null,null):n.copy(null,null,null,null,n.right.insert(t,r,a)),n.fixUp()}removeMin(){if(this.left.isEmpty())return jo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,n=this;if(r(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),r(t,n.key)===0){if(n.right.isEmpty())return jo.EMPTY;a=n.right.min(),n=n.copy(a.key,a.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,jo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,jo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}jo.EMPTY=null,jo.RED=!0,jo.BLACK=!1;jo.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,a,n,i){return this}insert(t,r,a){return new jo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t){this.comparator=t,this.data=new As(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const n=a.getNext();if(this.comparator(n.key,t[1])>=0)return;r(n.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new cH(this.data.getIterator())}getIteratorFrom(t){return new cH(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof Ri)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const n=r.getNext().key,i=a.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ri(this.comparator);return r.data=t,r}}class cH{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t){this.fields=t,t.sort(so.comparator)}static empty(){return new su([])}unionWith(t){let r=new Ri(so.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new su(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Nb(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wee("Invalid base64 string: "+i):i}}(t);return new co(r)}static fromUint8Array(t){const r=function(n){let i="";for(let o=0;o<n.length;++o)i+=String.fromCharCode(n[o]);return i}(t);return new co(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Na(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}co.EMPTY_BYTE_STRING=new co("");const Pve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gm(e){if(un(!!e,39018),typeof e=="string"){let t=0;const r=Pve.exec(e);if(un(!!r,46558,{timestamp:e}),r[1]){let n=r[1];n=(n+"000000000").substr(0,9),t=Number(n)}const a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Zs(e.seconds),nanos:Zs(e.nanos)}}function Zs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function qm(e){return typeof e=="string"?co.fromBase64String(e):co.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee="server_timestamp",Cee="__type__",Eee="__previous_value__",jee="__local_write_time__";function s_(e){var r,a;return((a=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[Cee])==null?void 0:a.stringValue)===Nee}function i_(e){const t=e.mapValue.fields[Eee];return s_(t)?i_(t):t}function Nw(e){const t=Gm(e.mapValue.fields[jee].timestampValue);return new lr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(t,r,a,n,i,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=n,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const $5="(default)";class Cb{constructor(t,r){this.projectId=t,this.database=r||$5}static empty(){return new Cb("","")}get isDefaultDatabase(){return this.database===$5}isEqual(t){return t instanceof Cb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kee="__type__",Lve="__max__",xE={mapValue:{}},See="__vector__",G5="value";function Km(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?s_(e)?4:Uve(e)?9007199254740991:Mve(e)?10:11:Hr(28295,{value:e})}function EA(e,t){if(e===t)return!0;const r=Km(e);if(r!==Km(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Nw(e).isEqual(Nw(t));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const o=Gm(n.timestampValue),l=Gm(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(n,i){return qm(n.bytesValue).isEqual(qm(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(n,i){return Zs(n.geoPointValue.latitude)===Zs(i.geoPointValue.latitude)&&Zs(n.geoPointValue.longitude)===Zs(i.geoPointValue.longitude)}(e,t);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Zs(n.integerValue)===Zs(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const o=Zs(n.doubleValue),l=Zs(i.doubleValue);return o===l?V5(o)===V5(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return Nb(e.arrayValue.values||[],t.arrayValue.values||[],EA);case 10:case 11:return function(n,i){const o=n.mapValue.fields||{},l=i.mapValue.fields||{};if(lH(o)!==lH(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!EA(o[c],l[c])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function Cw(e,t){return(e.values||[]).find(r=>EA(r,t))!==void 0}function Eb(e,t){if(e===t)return 0;const r=Km(e),a=Km(t);if(r!==a)return Na(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return Na(e.booleanValue,t.booleanValue);case 2:return function(i,o){const l=Zs(i.integerValue||i.doubleValue),c=Zs(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return uH(e.timestampValue,t.timestampValue);case 4:return uH(Nw(e),Nw(t));case 5:return RO(e.stringValue,t.stringValue);case 6:return function(i,o){const l=qm(i),c=qm(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Na(l[u],c[u]);if(d!==0)return d}return Na(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const l=Na(Zs(i.latitude),Zs(o.latitude));return l!==0?l:Na(Zs(i.longitude),Zs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return dH(e.arrayValue,t.arrayValue);case 10:return function(i,o){var h,m,g,x;const l=i.fields||{},c=o.fields||{},u=(h=l[G5])==null?void 0:h.arrayValue,d=(m=c[G5])==null?void 0:m.arrayValue,f=Na(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:dH(u,d)}(e.mapValue,t.mapValue);case 11:return function(i,o){if(i===xE.mapValue&&o===xE.mapValue)return 0;if(i===xE.mapValue)return 1;if(o===xE.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=RO(c[f],d[f]);if(h!==0)return h;const m=Eb(l[c[f]],u[d[f]]);if(m!==0)return m}return Na(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function uH(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Na(e,t);const r=Gm(e),a=Gm(t),n=Na(r.seconds,a.seconds);return n!==0?n:Na(r.nanos,a.nanos)}function dH(e,t){const r=e.values||[],a=t.values||[];for(let n=0;n<r.length&&n<a.length;++n){const i=Eb(r[n],a[n]);if(i)return i}return Na(r.length,a.length)}function jb(e){return LO(e)}function LO(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const a=Gm(r);return`time(${a.seconds},${a.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return qm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return vr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let a="[",n=!0;for(const i of r.values||[])n?n=!1:a+=",",a+=LO(i);return a+"]"}(e.arrayValue):"mapValue"in e?function(r){const a=Object.keys(r.fields||{}).sort();let n="{",i=!0;for(const o of a)i?i=!1:n+=",",n+=`${o}:${LO(r.fields[o])}`;return n+"}"}(e.mapValue):Hr(61005,{value:e})}function e5(e){switch(Km(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=i_(e);return t?16+e5(t):16;case 5:return 2*e.stringValue.length;case 6:return qm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((n,i)=>n+e5(i),0)}(e.arrayValue);case 10:case 11:return function(a){let n=0;return lp(a.fields,(i,o)=>{n+=i.length+e5(o)}),n}(e.mapValue);default:throw Hr(13486,{value:e})}}function q5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function MO(e){return!!e&&"integerValue"in e}function cR(e){return!!e&&"arrayValue"in e}function fH(e){return!!e&&"nullValue"in e}function AH(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function t5(e){return!!e&&"mapValue"in e}function Mve(e){var r,a;return((a=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[kee])==null?void 0:a.stringValue)===See}function z2(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return lp(e.mapValue.fields,(r,a)=>t.mapValue.fields[r]=z2(a)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=z2(e.arrayValue.values[r]);return t}return{...e}}function Uve(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Lve}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t){this.value=t}static empty(){return new fc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!t5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=z2(r)}setAll(t){let r=so.emptyPath(),a={},n=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,a,n),a={},n=[],r=l.popLast()}o?a[l.lastSegment()]=z2(o):n.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,a,n)}delete(t){const r=this.field(t.popLast());t5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return EA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let n=r.mapValue.fields[t.get(a)];t5(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=n),r=n}return r.mapValue.fields}applyChanges(t,r,a){lp(r,(n,i)=>t[n]=i);for(const n of a)delete t[n]}clone(){return new fc(z2(this.value))}}function _ee(e){const t=[];return lp(e.fields,(r,a)=>{const n=new so([r]);if(t5(a)){const i=_ee(a.mapValue).fields;if(i.length===0)t.push(n);else for(const o of i)t.push(n.child(o))}else t.push(n)}),new su(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,r,a,n,i,o,l){this.key=t,this.documentType=r,this.version=a,this.readTime=n,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new sl(t,0,Kr.min(),Kr.min(),Kr.min(),fc.empty(),0)}static newFoundDocument(t,r,a,n){return new sl(t,1,r,Kr.min(),a,n,0)}static newNoDocument(t,r){return new sl(t,2,r,Kr.min(),Kr.min(),fc.empty(),0)}static newUnknownDocument(t,r){return new sl(t,3,r,Kr.min(),Kr.min(),fc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Kr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t,r){this.position=t,this.inclusive=r}}function hH(e,t,r){let a=0;for(let n=0;n<e.position.length;n++){const i=t[n],o=e.position[n];if(i.field.isKeyField()?a=vr.comparator(vr.fromName(o.referenceValue),r.key):a=Eb(o,r.data.field(i.field)),i.dir==="desc"&&(a*=-1),a!==0)break}return a}function mH(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!EA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,r="asc"){this.field=t,this.dir=r}}function Qve(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bee{}class wi extends Bee{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new zve(t,r,a):r==="array-contains"?new Gve(t,a):r==="in"?new qve(t,a):r==="not-in"?new Kve(t,a):r==="array-contains-any"?new Wve(t,a):new wi(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new Vve(t,a):new $ve(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Eb(r,this.value)):r!==null&&Km(this.value)===Km(r)&&this.matchesComparison(Eb(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nf extends Bee{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new nf(t,r)}matches(t){return Tee(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tee(e){return e.op==="and"}function Iee(e){return Hve(e)&&Tee(e)}function Hve(e){for(const t of e.filters)if(t instanceof nf)return!1;return!0}function UO(e){if(e instanceof wi)return e.field.canonicalString()+e.op.toString()+jb(e.value);if(Iee(e))return e.filters.map(t=>UO(t)).join(",");{const t=e.filters.map(r=>UO(r)).join(",");return`${e.op}(${t})`}}function Oee(e,t){return e instanceof wi?function(a,n){return n instanceof wi&&a.op===n.op&&a.field.isEqual(n.field)&&EA(a.value,n.value)}(e,t):e instanceof nf?function(a,n){return n instanceof nf&&a.op===n.op&&a.filters.length===n.filters.length?a.filters.reduce((i,o,l)=>i&&Oee(o,n.filters[l]),!0):!1}(e,t):void Hr(19439)}function Fee(e){return e instanceof wi?function(r){return`${r.field.canonicalString()} ${r.op} ${jb(r.value)}`}(e):e instanceof nf?function(r){return r.op.toString()+" {"+r.getFilters().map(Fee).join(" ,")+"}"}(e):"Filter"}class zve extends wi{constructor(t,r,a){super(t,r,a),this.key=vr.fromName(a.referenceValue)}matches(t){const r=vr.comparator(t.key,this.key);return this.matchesComparison(r)}}class Vve extends wi{constructor(t,r){super(t,"in",r),this.keys=Dee("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class $ve extends wi{constructor(t,r){super(t,"not-in",r),this.keys=Dee("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Dee(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(a=>vr.fromName(a.referenceValue))}class Gve extends wi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return cR(r)&&Cw(r.arrayValue,this.value)}}class qve extends wi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Cw(this.value.arrayValue,r)}}class Kve extends wi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Cw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Cw(this.value.arrayValue,r)}}class Wve extends wi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!cR(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Cw(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(t,r=null,a=[],n=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=n,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function pH(e,t=null,r=[],a=[],n=null,i=null,o=null){return new Xve(e,t,r,a,n,i,o)}function uR(e){const t=Xr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>UO(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(i){return i.field.canonicalString()+i.dir}(a)).join(","),n_(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>jb(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>jb(a)).join(",")),t.Te=r}return t.Te}function dR(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Qve(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Oee(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mH(e.startAt,t.startAt)&&mH(e.endAt,t.endAt)}function QO(e){return vr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(t,r=null,a=[],n=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=n,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Yve(e,t,r,a,n,i,o,l){return new tx(e,t,r,a,n,i,o,l)}function o_(e){return new tx(e)}function gH(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function fR(e){return e.collectionGroup!==null}function Yv(e){const t=Xr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),r.add(i.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ri(so.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new Ew(i,a))}),r.has(so.keyField().canonicalString())||t.Ie.push(new Ew(so.keyField(),a))}return t.Ie}function gA(e){const t=Xr(e);return t.Ee||(t.Ee=Jve(t,Yv(e))),t.Ee}function Jve(e,t){if(e.limitType==="F")return pH(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(n=>{const i=n.dir==="desc"?"asc":"desc";return new Ew(n.field,i)});const r=e.endAt?new kb(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new kb(e.startAt.position,e.startAt.inclusive):null;return pH(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}}function HO(e,t){const r=e.filters.concat([t]);return new tx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function K5(e,t,r){return new tx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function l_(e,t){return dR(gA(e),gA(t))&&e.limitType===t.limitType}function Pee(e){return`${uR(gA(e))}|lt:${e.limitType}`}function Ev(e){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(n=>Fee(n)).join(", ")}]`),n_(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(n=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(n)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(n=>jb(n)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(n=>jb(n)).join(",")),`Target(${a})`}(gA(e))}; limitType=${e.limitType})`}function c_(e,t){return t.isFoundDocument()&&function(a,n){const i=n.key.path;return a.collectionGroup!==null?n.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(i):vr.isDocumentKey(a.path)?a.path.isEqual(i):a.path.isImmediateParentOf(i)}(e,t)&&function(a,n){for(const i of Yv(a))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(e,t)&&function(a,n){for(const i of a.filters)if(!i.matches(n))return!1;return!0}(e,t)&&function(a,n){return!(a.startAt&&!function(o,l,c){const u=hH(o,l,c);return o.inclusive?u<=0:u<0}(a.startAt,Yv(a),n)||a.endAt&&!function(o,l,c){const u=hH(o,l,c);return o.inclusive?u>=0:u>0}(a.endAt,Yv(a),n))}(e,t)}function Zve(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ree(e){return(t,r)=>{let a=!1;for(const n of Yv(e)){const i=ebe(n,t,r);if(i!==0)return i;a=a||n.field.isKeyField()}return 0}}function ebe(e,t,r){const a=e.field.isKeyField()?vr.comparator(t.key,r.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Eb(c,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return a;case"desc":return-1*a;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[n,i]of a)if(this.equalsFn(n,t))return i}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),n=this.inner[a];if(n===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return void(n[i]=[t,r]);n.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let n=0;n<a.length;n++)if(this.equalsFn(a[n][0],t))return a.length===1?delete this.inner[r]:a.splice(n,1),this.innerSize--,!0;return!1}forEach(t){lp(this.inner,(r,a)=>{for(const[n,i]of a)t(n,i)})}isEmpty(){return yee(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tbe=new As(vr.comparator);function Vh(){return tbe}const Lee=new As(vr.comparator);function g2(...e){let t=Lee;for(const r of e)t=t.insert(r.key,r);return t}function Mee(e){let t=Lee;return e.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function og(){return V2()}function Uee(){return V2()}function V2(){return new rx(e=>e.toString(),(e,t)=>e.isEqual(t))}const rbe=new As(vr.comparator),abe=new Ri(vr.comparator);function Ca(...e){let t=abe;for(const r of e)t=t.add(r);return t}const nbe=new Ri(Na);function sbe(){return nbe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:V5(t)?"-0":t}}function Qee(e){return{integerValue:""+e}}function ibe(e,t){return Ove(t)?Qee(t):AR(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this._=void 0}}function obe(e,t,r){return e instanceof jw?function(n,i){const o={fields:{[Cee]:{stringValue:Nee},[jee]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&s_(i)&&(i=i_(i)),i&&(o.fields[Eee]=i),{mapValue:o}}(r,t):e instanceof Sb?zee(e,t):e instanceof kw?Vee(e,t):function(n,i){const o=Hee(n,i),l=xH(o)+xH(n.Ae);return MO(o)&&MO(n.Ae)?Qee(l):AR(n.serializer,l)}(e,t)}function lbe(e,t,r){return e instanceof Sb?zee(e,t):e instanceof kw?Vee(e,t):r}function Hee(e,t){return e instanceof W5?function(a){return MO(a)||function(i){return!!i&&"doubleValue"in i}(a)}(t)?t:{integerValue:0}:null}class jw extends u_{}class Sb extends u_{constructor(t){super(),this.elements=t}}function zee(e,t){const r=$ee(t);for(const a of e.elements)r.some(n=>EA(n,a))||r.push(a);return{arrayValue:{values:r}}}class kw extends u_{constructor(t){super(),this.elements=t}}function Vee(e,t){let r=$ee(t);for(const a of e.elements)r=r.filter(n=>!EA(n,a));return{arrayValue:{values:r}}}class W5 extends u_{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function xH(e){return Zs(e.integerValue||e.doubleValue)}function $ee(e){return cR(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gee{constructor(t,r){this.field=t,this.transform=r}}function cbe(e,t){return e.field.isEqual(t.field)&&function(a,n){return a instanceof Sb&&n instanceof Sb||a instanceof kw&&n instanceof kw?Nb(a.elements,n.elements,EA):a instanceof W5&&n instanceof W5?EA(a.Ae,n.Ae):a instanceof jw&&n instanceof jw}(e.transform,t.transform)}class ube{constructor(t,r){this.version=t,this.transformResults=r}}class Dl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Dl}static exists(t){return new Dl(void 0,t)}static updateTime(t){return new Dl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function r5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class d_{}function qee(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new f_(e.key,Dl.none()):new jN(e.key,e.data,Dl.none());{const r=e.data,a=fc.empty();let n=new Ri(so.comparator);for(let i of t.fields)if(!n.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?a.delete(i):a.set(i,o),n=n.add(i)}return new cp(e.key,a,new su(n.toArray()),Dl.none())}}function dbe(e,t,r){e instanceof jN?function(n,i,o){const l=n.value.clone(),c=bH(n.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof cp?function(n,i,o){if(!r5(n.precondition,i))return void i.convertToUnknownDocument(o.version);const l=bH(n.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Kee(n)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(n,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function $2(e,t,r,a){return e instanceof jN?function(i,o,l,c){if(!r5(i.precondition,o))return l;const u=i.value.clone(),d=yH(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,a):e instanceof cp?function(i,o,l,c){if(!r5(i.precondition,o))return l;const u=yH(i.fieldTransforms,c,o),d=o.data;return d.setAll(Kee(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(e,t,r,a):function(i,o,l){return r5(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function fbe(e,t){let r=null;for(const a of e.fieldTransforms){const n=t.data.field(a.field),i=Hee(a.transform,n||null);i!=null&&(r===null&&(r=fc.empty()),r.set(a.field,i))}return r||null}function vH(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(a,n){return a===void 0&&n===void 0||!(!a||!n)&&Nb(a,n,(i,o)=>cbe(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jN extends d_{constructor(t,r,a,n=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class cp extends d_{constructor(t,r,a,n,i=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kee(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=e.data.field(r);t.set(r,a)}}),t}function bH(e,t,r){const a=new Map;un(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let n=0;n<r.length;n++){const i=e[n],o=i.transform,l=t.data.field(i.field);a.set(i.field,lbe(o,l,r[n]))}return a}function yH(e,t,r){const a=new Map;for(const n of e){const i=n.transform,o=r.data.field(n.field);a.set(n.field,obe(i,o,t))}return a}class f_ extends d_{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Abe extends d_{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hbe{constructor(t,r,a,n){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=n}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(t.key)&&dbe(i,t,a[n])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=$2(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=$2(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=Uee();return this.mutations.forEach(n=>{const i=t.get(n.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(n.key)?null:l;const c=qee(o,l);c!==null&&a.set(n.key,c),o.isValidDocument()||o.convertToNoDocument(Kr.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Ca())}isEqual(t){return this.batchId===t.batchId&&Nb(this.mutations,t.mutations,(r,a)=>vH(r,a))&&Nb(this.baseMutations,t.baseMutations,(r,a)=>vH(r,a))}}class hR{constructor(t,r,a,n){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=n}static from(t,r,a){un(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let n=function(){return rbe}();const i=t.mutations;for(let o=0;o<i.length;o++)n=n.insert(i[o].key,a[o].version);return new hR(t,r,a,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mbe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pbe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi,Ta;function gbe(e){switch(e){case kt.OK:return Hr(64938);case kt.CANCELLED:case kt.UNKNOWN:case kt.DEADLINE_EXCEEDED:case kt.RESOURCE_EXHAUSTED:case kt.INTERNAL:case kt.UNAVAILABLE:case kt.UNAUTHENTICATED:return!1;case kt.INVALID_ARGUMENT:case kt.NOT_FOUND:case kt.ALREADY_EXISTS:case kt.PERMISSION_DENIED:case kt.FAILED_PRECONDITION:case kt.ABORTED:case kt.OUT_OF_RANGE:case kt.UNIMPLEMENTED:case kt.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function Wee(e){if(e===void 0)return zh("GRPC error has no .code"),kt.UNKNOWN;switch(e){case pi.OK:return kt.OK;case pi.CANCELLED:return kt.CANCELLED;case pi.UNKNOWN:return kt.UNKNOWN;case pi.DEADLINE_EXCEEDED:return kt.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return kt.RESOURCE_EXHAUSTED;case pi.INTERNAL:return kt.INTERNAL;case pi.UNAVAILABLE:return kt.UNAVAILABLE;case pi.UNAUTHENTICATED:return kt.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return kt.INVALID_ARGUMENT;case pi.NOT_FOUND:return kt.NOT_FOUND;case pi.ALREADY_EXISTS:return kt.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return kt.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return kt.FAILED_PRECONDITION;case pi.ABORTED:return kt.ABORTED;case pi.OUT_OF_RANGE:return kt.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return kt.UNIMPLEMENTED;case pi.DATA_LOSS:return kt.DATA_LOSS;default:return Hr(39323,{code:e})}}(Ta=pi||(pi={}))[Ta.OK=0]="OK",Ta[Ta.CANCELLED=1]="CANCELLED",Ta[Ta.UNKNOWN=2]="UNKNOWN",Ta[Ta.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ta[Ta.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ta[Ta.NOT_FOUND=5]="NOT_FOUND",Ta[Ta.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ta[Ta.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ta[Ta.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ta[Ta.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ta[Ta.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ta[Ta.ABORTED=10]="ABORTED",Ta[Ta.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ta[Ta.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ta[Ta.INTERNAL=13]="INTERNAL",Ta[Ta.UNAVAILABLE=14]="UNAVAILABLE",Ta[Ta.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xbe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vbe=new Im([4294967295,4294967295],0);function wH(e){const t=xbe().encode(e),r=new lee;return r.update(t),new Uint8Array(r.digest())}function NH(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),n=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Im([r,a],0),new Im([n,i],0)]}class mR{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new x2(`Invalid padding: ${r}`);if(a<0)throw new x2(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new x2(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new x2(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Im.fromNumber(this.ge)}ye(t,r,a){let n=t.add(r.multiply(Im.fromNumber(a)));return n.compare(vbe)===1&&(n=new Im([n.getBits(0),n.getBits(1)],0)),n.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=wH(t),[a,n]=NH(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(a,n,i);if(!this.we(o))return!1}return!0}static create(t,r,a){const n=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new mR(i,n,r);return a.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=wH(t),[a,n]=NH(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(a,n,i);this.Se(o)}}Se(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class x2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(t,r,a,n,i){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const n=new Map;return n.set(t,kN.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new A_(Kr.min(),n,new As(Na),Vh(),Ca())}}class kN{constructor(t,r,a,n,i){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new kN(a,r,Ca(),Ca(),Ca())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(t,r,a,n){this.be=t,this.removedTargetIds=r,this.key=a,this.De=n}}class Xee{constructor(t,r){this.targetId=t,this.Ce=r}}class Yee{constructor(t,r,a=co.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=n}}class CH{constructor(){this.ve=0,this.Fe=EH(),this.Me=co.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ca(),r=Ca(),a=Ca();return this.Fe.forEach((n,i)=>{switch(i){case 0:t=t.add(n);break;case 2:r=r.add(n);break;case 1:a=a.add(n);break;default:Hr(38017,{changeType:i})}}),new kN(this.Me,this.xe,t,r,a)}qe(){this.Oe=!1,this.Fe=EH()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bbe{constructor(t){this.Ge=t,this.ze=new Map,this.je=Vh(),this.Je=vE(),this.He=vE(),this.Ye=new As(Na)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const a=this.nt(r);switch(t.state){case 0:this.rt(r)&&a.Le(t.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(t.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(a.We(),a.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),a.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((a,n)=>{this.rt(n)&&r(n)})}st(t){const r=t.targetId,a=t.Ce.count,n=this.ot(r);if(n){const i=n.target;if(QO(i))if(a===0){const o=new vr(i.path);this.et(r,o,sl.newNoDocument(o,Kr.min()))}else un(a===1,20013,{expectedCount:a});else{const o=this._t(r);if(o!==a){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:n=0},hashCount:i=0}=r;let o,l;try{o=qm(a).toUint8Array()}catch(c){if(c instanceof wee)return Rg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new mR(o,n,i)}catch(c){return Rg(c instanceof x2?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,a){return r.Ce.count===a-this.Pt(t,r.targetId)?0:2}Pt(t,r){const a=this.Ge.getRemoteKeysForTarget(r);let n=0;return a.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(r,i,null),n++)}),n}Tt(t){const r=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&QO(l.target)){const c=new vr(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,sl.newNoDocument(c,t))}i.Be&&(r.set(o,i.ke()),i.qe())}});let a=Ca();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(a=a.add(i))}),this.je.forEach((i,o)=>o.setReadTime(t));const n=new A_(t,r,this.Ye,this.je,a);return this.je=Vh(),this.Je=vE(),this.He=vE(),this.Ye=new As(Na),n}Xe(t,r){if(!this.rt(t))return;const a=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,a),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,a){if(!this.rt(t))return;const n=this.nt(t);this.Et(t,r)?n.Qe(r,1):n.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),a&&(this.je=this.je.insert(r,a))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new CH,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ri(Na),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ri(Na),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||ur("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new CH),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function vE(){return new As(vr.comparator)}function EH(){return new As(vr.comparator)}const ybe={asc:"ASCENDING",desc:"DESCENDING"},wbe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nbe={and:"AND",or:"OR"};class Cbe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function zO(e,t){return e.useProto3Json||n_(t)?t:{value:t}}function X5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jee(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ebe(e,t){return X5(e,t.toTimestamp())}function xA(e){return un(!!e,49232),Kr.fromTimestamp(function(r){const a=Gm(r);return new lr(a.seconds,a.nanos)}(e))}function pR(e,t){return VO(e,t).canonicalString()}function VO(e,t){const r=function(n){return new In(["projects",n.projectId,"databases",n.database])}(e).child("documents");return t===void 0?r:r.child(t)}function Zee(e){const t=In.fromString(e);return un(nte(t),10190,{key:t.toString()}),t}function $O(e,t){return pR(e.databaseId,t.path)}function PB(e,t){const r=Zee(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new vr(tte(r))}function ete(e,t){return pR(e.databaseId,t)}function jbe(e){const t=Zee(e);return t.length===4?In.emptyPath():tte(t)}function GO(e){return new In(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tte(e){return un(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function jH(e,t,r){return{name:$O(e,t),fields:r.value.mapValue.fields}}function kbe(e,t){let r;if("targetChange"in t){t.targetChange;const a=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(un(d===void 0||typeof d=="string",58123),co.fromBase64String(d||"")):(un(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),co.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?kt.UNKNOWN:Wee(u.code);return new Xt(d,u.message||"")}(o);r=new Yee(a,n,i,l||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const n=PB(e,a.document.name),i=xA(a.document.updateTime),o=a.document.createTime?xA(a.document.createTime):Kr.min(),l=new fc({mapValue:{fields:a.document.fields}}),c=sl.newFoundDocument(n,i,o,l),u=a.targetIds||[],d=a.removedTargetIds||[];r=new a5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const n=PB(e,a.document),i=a.readTime?xA(a.readTime):Kr.min(),o=sl.newNoDocument(n,i),l=a.removedTargetIds||[];r=new a5([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const n=PB(e,a.document),i=a.removedTargetIds||[];r=new a5([],i,n,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const a=t.filter;a.targetId;const{count:n=0,unchangedNames:i}=a,o=new pbe(n,i),l=a.targetId;r=new Xee(l,o)}}return r}function Sbe(e,t){let r;if(t instanceof jN)r={update:jH(e,t.key,t.value)};else if(t instanceof f_)r={delete:$O(e,t.key)};else if(t instanceof cp)r={update:jH(e,t.key,t.data),updateMask:Rbe(t.fieldMask)};else{if(!(t instanceof Abe))return Hr(16599,{Vt:t.type});r={verify:$O(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(i,o){const l=o.transform;if(l instanceof jw)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Sb)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof kw)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof W5)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Hr(20930,{transform:o.transform})}(0,a))),t.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:Ebe(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Hr(27497)}(e,t.precondition)),r}function _be(e,t){return e&&e.length>0?(un(t!==void 0,14353),e.map(r=>function(n,i){let o=n.updateTime?xA(n.updateTime):xA(i);return o.isEqual(Kr.min())&&(o=xA(i)),new ube(o,n.transformResults||[])}(r,t))):[]}function Bbe(e,t){return{documents:[ete(e,t.path)]}}function Tbe(e,t){const r={structuredQuery:{}},a=t.path;let n;t.collectionGroup!==null?(n=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=ete(e,n);const i=function(u){if(u.length!==0)return ate(nf.create(u,"and"))}(t.filters);i&&(r.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:jv(h.field),direction:Fbe(h.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=zO(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:n}}function Ibe(e){let t=jbe(e.parent);const r=e.structuredQuery,a=r.from?r.from.length:0;let n=null;if(a>0){un(a===1,65062);const d=r.from[0];d.allDescendants?n=d.collectionId:t=t.child(d.collectionId)}let i=[];r.where&&(i=function(f){const h=rte(f);return h instanceof nf&&Iee(h)?h.getFilters():[h]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(h=>function(g){return new Ew(kv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,n_(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new kb(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new kb(m,h)}(r.endAt)),Yve(t,n,o,i,l,"F",c,u)}function Obe(e,t){const r=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:n})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function rte(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=kv(r.unaryFilter.field);return wi.create(a,"==",{doubleValue:NaN});case"IS_NULL":const n=kv(r.unaryFilter.field);return wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=kv(r.unaryFilter.field);return wi.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kv(r.unaryFilter.field);return wi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return wi.create(kv(r.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return nf.create(r.compositeFilter.filters.map(a=>rte(a)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function Fbe(e){return ybe[e]}function Dbe(e){return wbe[e]}function Pbe(e){return Nbe[e]}function jv(e){return{fieldPath:e.canonicalString()}}function kv(e){return so.fromServerFormat(e.fieldPath)}function ate(e){return e instanceof wi?function(r){if(r.op==="=="){if(AH(r.value))return{unaryFilter:{field:jv(r.field),op:"IS_NAN"}};if(fH(r.value))return{unaryFilter:{field:jv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(AH(r.value))return{unaryFilter:{field:jv(r.field),op:"IS_NOT_NAN"}};if(fH(r.value))return{unaryFilter:{field:jv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jv(r.field),op:Dbe(r.op),value:r.value}}}(e):e instanceof nf?function(r){const a=r.getFilters().map(n=>ate(n));return a.length===1?a[0]:{compositeFilter:{op:Pbe(r.op),filters:a}}}(e):Hr(54877,{filter:e})}function Rbe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function nte(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(t,r,a,n,i=Kr.min(),o=Kr.min(),l=co.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new ym(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new ym(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ym(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ym(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lbe{constructor(t){this.yt=t}}function Mbe(e){const t=Ibe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?K5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ube{constructor(){this.Cn=new Qbe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Lt.resolve()}getCollectionParents(t,r){return Lt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Lt.resolve()}deleteFieldIndex(t,r){return Lt.resolve()}deleteAllFieldIndexes(t){return Lt.resolve()}createTargetIndexes(t,r){return Lt.resolve()}getDocumentsMatchingTarget(t,r){return Lt.resolve(null)}getIndexType(t,r){return Lt.resolve(0)}getFieldIndexes(t,r){return Lt.resolve([])}getNextCollectionGroupToUpdate(t){return Lt.resolve(null)}getMinOffset(t,r){return Lt.resolve($m.min())}getMinOffsetFromCollectionGroup(t,r){return Lt.resolve($m.min())}updateCollectionGroup(t,r,a){return Lt.resolve()}updateIndexEntries(t,r){return Lt.resolve()}}class Qbe{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r]||new Ri(In.comparator),i=!n.has(a);return this.index[r]=n.add(a),i}has(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r];return n&&n.has(a)}getEntries(t){return(this.index[t]||new Ri(In.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ste=41943040;class sc{static withCacheSize(t){return new sc(t,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sc.DEFAULT_COLLECTION_PERCENTILE=10,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sc.DEFAULT=new sc(ste,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sc.DISABLED=new sc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new _b(0)}static cr(){return new _b(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH="LruGarbageCollector",Hbe=1048576;function _H([e,t],[r,a]){const n=Na(e,r);return n===0?Na(t,a):n}class zbe{constructor(t){this.Ir=t,this.buffer=new Ri(_H),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();_H(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Vbe{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ur(SH,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){A1(r)?ur(SH,"Ignoring IndexedDB error during garbage collection: ",r):await f1(r)}await this.Vr(3e5)})}}class $be{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Lt.resolve(a_.ce);const a=new zbe(r);return this.mr.forEachTarget(t,n=>a.Ar(n.sequenceNumber)).next(()=>this.mr.pr(t,n=>a.Ar(n))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.mr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(ur("LruGarbageCollector","Garbage collection skipped; disabled"),Lt.resolve(kH)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(ur("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kH):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let a,n,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ur("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),n=this.params.maximumSequenceNumbersToCollect):n=f,o=Date.now(),this.nthSequenceNumber(t,n))).next(f=>(a=f,l=Date.now(),this.removeTargets(t,a,r))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(t,a))).next(f=>(u=Date.now(),Cv()<=wa.DEBUG&&ur("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${n} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Lt.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:f})))}}function Gbe(e,t){return new $be(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qbe{constructor(){this.changes=new rx(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,sl.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Lt.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kbe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wbe{constructor(t,r,a,n){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=n}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(n=>(a=n,this.remoteDocumentCache.getEntry(t,r))).next(n=>(a!==null&&$2(a.mutation,n,su.empty(),lr.now()),n))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Ca()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Ca()){const n=og();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,a).next(i=>{let o=g2();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=og();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Ca()))}populateOverlays(t,r,a){const n=[];return a.forEach(i=>{r.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(t,n).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,a,n){let i=Vh();const o=V2(),l=function(){return V2()}();return r.forEach((c,u)=>{const d=a.get(u.key);n.has(u.key)&&(d===void 0||d.mutation instanceof cp)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),$2(d.mutation,u,d.mutation.getFieldMask(),lr.now())):o.set(u.key,su.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new Kbe(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const a=V2();let n=new As((o,l)=>o-l),i=Ca();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=a.get(c)||su.empty();d=l.applyToLocalView(u,d),a.set(c,d);const f=(n.get(l.batchId)||Ca()).add(c);n=n.insert(l.batchId,f)})}).next(()=>{const o=[],l=n.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=Uee();d.forEach(h=>{if(!i.has(h)){const m=qee(r.get(h),a.get(h));m!==null&&f.set(h,m),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Lt.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,n){return function(o){return vr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):fR(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,n):this.getDocumentsMatchingCollectionQuery(t,r,a,n)}getNextDocuments(t,r,a,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,n).next(i=>{const o=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,n-i.size):Lt.resolve(og());let l=ww,c=i;return o.next(u=>Lt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?Lt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,i)).next(()=>this.computeViews(t,c,u,Ca())).next(d=>({batchId:l,changes:Mee(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new vr(r)).next(a=>{let n=g2();return a.isFoundDocument()&&(n=n.insert(a.key,a)),n})}getDocumentsMatchingCollectionGroupQuery(t,r,a,n){const i=r.collectionGroup;let o=g2();return this.indexManager.getCollectionParents(t,i).next(l=>Lt.forEach(l,c=>{const u=function(f,h){return new tx(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,u,a,n).next(d=>{d.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,i,n))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,sl.newInvalidDocument(d)))});let l=g2();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&$2(d.mutation,u,su.empty(),lr.now()),c_(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xbe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Lt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(n){return{id:n.id,version:n.version,createTime:xA(n.createTime)}}(r)),Lt.resolve()}getNamedQuery(t,r){return Lt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(n){return{name:n.name,query:Mbe(n.bundledQuery),readTime:xA(n.readTime)}}(r)),Lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ybe{constructor(){this.overlays=new As(vr.comparator),this.qr=new Map}getOverlay(t,r){return Lt.resolve(this.overlays.get(r))}getOverlays(t,r){const a=og();return Lt.forEach(r,n=>this.getOverlay(t,n).next(i=>{i!==null&&a.set(n,i)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((n,i)=>{this.St(t,r,i)}),Lt.resolve()}removeOverlaysForBatchId(t,r,a){const n=this.qr.get(a);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(a)),Lt.resolve()}getOverlaysForCollection(t,r,a){const n=og(),i=r.length+1,o=new vr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>a&&n.set(c.getKey(),c)}return Lt.resolve(n)}getOverlaysForCollectionGroup(t,r,a,n){let i=new As((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>a){let d=i.get(u.largestBatchId);d===null&&(d=og(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=og(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=n)););return Lt.resolve(l)}St(t,r,a){const n=this.overlays.get(a.key);if(n!==null){const o=this.qr.get(n.largestBatchId).delete(a.key);this.qr.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new mbe(r,a));let i=this.qr.get(r);i===void 0&&(i=Ca(),this.qr.set(r,i)),this.qr.set(r,i.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jbe{constructor(){this.sessionToken=co.EMPTY_BYTE_STRING}getSessionToken(t){return Lt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.Qr=new Ri(to.$r),this.Ur=new Ri(to.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const a=new to(t,r);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.Gr(new to(t,r))}zr(t,r){t.forEach(a=>this.removeReference(a,r))}jr(t){const r=new vr(new In([])),a=new to(r,t),n=new to(r,t+1),i=[];return this.Ur.forEachInRange([a,n],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new vr(new In([])),a=new to(r,t),n=new to(r,t+1);let i=Ca();return this.Ur.forEachInRange([a,n],o=>{i=i.add(o.key)}),i}containsKey(t){const r=new to(t,0),a=this.Qr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class to{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return vr.comparator(t.key,r.key)||Na(t.Yr,r.Yr)}static Kr(t,r){return Na(t.Yr,r.Yr)||vr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zbe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ri(to.$r)}checkEmpty(t){return Lt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,n){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hbe(i,r,a,n);this.mutationQueue.push(o);for(const l of n)this.Zr=this.Zr.add(new to(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Lt.resolve(o)}lookupMutationBatch(t,r){return Lt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,n=this.ei(a),i=n<0?0:n;return Lt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Lt.resolve(this.mutationQueue.length===0?lR:this.tr-1)}getAllMutationBatches(t){return Lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new to(r,0),n=new to(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([a,n],o=>{const l=this.Xr(o.Yr);i.push(l)}),Lt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new Ri(Na);return r.forEach(n=>{const i=new to(n,0),o=new to(n,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{a=a.add(l.Yr)})}),Lt.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,n=a.length+1;let i=a;vr.isDocumentKey(i)||(i=i.child(""));const o=new to(new vr(i),0);let l=new Ri(Na);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!a.isPrefixOf(u)&&(u.length===n&&(l=l.add(c.Yr)),!0)},o),Lt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(a=>{const n=this.Xr(a);n!==null&&r.push(n)}),r}removeMutationBatch(t,r){un(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Lt.forEach(r.mutations,n=>{const i=new to(n.key,r.batchId);return a=a.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.Zr=a})}ir(t){}containsKey(t,r){const a=new to(r,0),n=this.Zr.firstAfterOrEqual(a);return Lt.resolve(r.isEqual(n&&n.key))}performConsistencyCheck(t){return this.mutationQueue.length,Lt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1e{constructor(t){this.ri=t,this.docs=function(){return new As(vr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,n=this.docs.get(a),i=n?n.size:0,o=this.ri(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Lt.resolve(a?a.document.mutableCopy():sl.newInvalidDocument(r))}getEntries(t,r){let a=Vh();return r.forEach(n=>{const i=this.docs.get(n);a=a.insert(n,i?i.document.mutableCopy():sl.newInvalidDocument(n))}),Lt.resolve(a)}getDocumentsMatchingQuery(t,r,a,n){let i=Vh();const o=r.path,l=new vr(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||_ve(Sve(d),a)<=0||(n.has(d.key)||c_(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Lt.resolve(i)}getAllFromCollectionGroup(t,r,a,n){Hr(9500)}ii(t,r){return Lt.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new t1e(this)}getSize(t){return Lt.resolve(this.size)}}class t1e extends qbe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((a,n)=>{n.isValidDocument()?r.push(this.Nr.addEntry(t,n)):this.Nr.removeEntry(a)}),Lt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1e{constructor(t){this.persistence=t,this.si=new rx(r=>uR(r),dR),this.lastRemoteSnapshotVersion=Kr.min(),this.highestTargetId=0,this.oi=0,this._i=new gR,this.targetCount=0,this.ai=_b.ur()}forEachTarget(t,r){return this.si.forEach((a,n)=>r(n)),Lt.resolve()}getLastRemoteSnapshotVersion(t){return Lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Lt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Lt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.oi&&(this.oi=r),Lt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new _b(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Lt.resolve()}updateTargetData(t,r){return this.Pr(r),Lt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Lt.resolve()}removeTargets(t,r,a){let n=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&a.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),n++)}),Lt.waitFor(i).next(()=>n)}getTargetCount(t){return Lt.resolve(this.targetCount)}getTargetData(t,r){const a=this.si.get(r)||null;return Lt.resolve(a)}addMatchingKeys(t,r,a){return this._i.Wr(r,a),Lt.resolve()}removeMatchingKeys(t,r,a){this._i.zr(r,a);const n=this.persistence.referenceDelegate,i=[];return n&&r.forEach(o=>{i.push(n.markPotentiallyOrphaned(t,o))}),Lt.waitFor(i)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Lt.resolve()}getMatchingKeysForTargetId(t,r){const a=this._i.Hr(r);return Lt.resolve(a)}containsKey(t,r){return Lt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(t,r){this.ui={},this.overlays={},this.ci=new a_(0),this.li=!1,this.li=!0,this.hi=new Jbe,this.referenceDelegate=t(this),this.Pi=new r1e(this),this.indexManager=new Ube,this.remoteDocumentCache=function(n){return new e1e(n)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new Lbe(r),this.Ii=new Xbe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Ybe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.ui[t.toKey()];return a||(a=new Zbe(r,this.referenceDelegate),this.ui[t.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,a){ur("MemoryPersistence","Starting transaction:",t);const n=new a1e(this.ci.next());return this.referenceDelegate.Ei(),a(n).next(i=>this.referenceDelegate.di(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Ai(t,r){return Lt.or(Object.values(this.ui).map(a=>()=>a.containsKey(t,r)))}}class a1e extends Tve{constructor(t){super(),this.currentSequenceNumber=t}}class xR{constructor(t){this.persistence=t,this.Ri=new gR,this.Vi=null}static mi(t){return new xR(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,a){return this.Ri.addReference(a,r),this.fi.delete(a.toString()),Lt.resolve()}removeReference(t,r,a){return this.Ri.removeReference(a,r),this.fi.add(a.toString()),Lt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Lt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(n=>this.fi.add(n.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(n=>{n.forEach(i=>this.fi.add(i.toString()))}).next(()=>a.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lt.forEach(this.fi,a=>{const n=vr.fromPath(a);return this.gi(t,n).next(i=>{i||r.removeEntry(n,Kr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(a=>{a?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Lt.or([()=>Lt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class Y5{constructor(t,r){this.persistence=t,this.pi=new rx(a=>Fve(a.path),(a,n)=>a.isEqual(n)),this.garbageCollector=Gbe(this,r)}static mi(t,r){return new Y5(t,r)}Ei(){}di(t){return Lt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(n=>a+n))}wr(t){let r=0;return this.pr(t,a=>{r++}).next(()=>r)}pr(t,r){return Lt.forEach(this.pi,(a,n)=>this.br(t,a,n).next(i=>i?Lt.resolve():r(n)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.ii(t,o=>this.br(t,o,r).next(l=>{l||(a++,i.removeEntry(o,Kr.min()))})).next(()=>i.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Lt.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.pi.set(a,t.currentSequenceNumber),Lt.resolve()}removeReference(t,r,a){return this.pi.set(a,t.currentSequenceNumber),Lt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Lt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=e5(t.data.value)),r}br(t,r,a){return Lt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const n=this.pi.get(r);return Lt.resolve(n!==void 0&&n>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,r,a,n){this.targetId=t,this.fromCache=r,this.Es=a,this.ds=n}static As(t,r){let a=Ca(),n=Ca();for(const i of r.docChanges)switch(i.type){case 0:a=a.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new vR(t,r.fromCache,a,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Pme()?8:Ive(pl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,a,n){const i={result:null};return this.ys(t,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(t,r,n,a).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new n1e;return this.Ss(t,r,o).next(l=>{if(i.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>i.result)}bs(t,r,a,n){return a.documentReadCount<this.fs?(Cv()<=wa.DEBUG&&ur("QueryEngine","SDK will not create cache indexes for query:",Ev(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Lt.resolve()):(Cv()<=wa.DEBUG&&ur("QueryEngine","Query:",Ev(r),"scans",a.documentReadCount,"local documents and returns",n,"documents as results."),a.documentReadCount>this.gs*n?(Cv()<=wa.DEBUG&&ur("QueryEngine","The SDK decides to create cache indexes for query:",Ev(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gA(r))):Lt.resolve())}ys(t,r){if(gH(r))return Lt.resolve(null);let a=gA(r);return this.indexManager.getIndexType(t,a).next(n=>n===0?null:(r.limit!==null&&n===1&&(r=K5(r,null,"F"),a=gA(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(i=>{const o=Ca(...i);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,a).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,K5(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,a,n){return gH(r)||n.isEqual(Kr.min())?Lt.resolve(null):this.ps.getDocuments(t,a).next(i=>{const o=this.Ds(r,i);return this.Cs(r,o,a,n)?Lt.resolve(null):(Cv()<=wa.DEBUG&&ur("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ev(r)),this.vs(t,o,r,kve(n,ww)).next(l=>l))})}Ds(t,r){let a=new Ri(Ree(t));return r.forEach((n,i)=>{c_(t,i)&&(a=a.add(i))}),a}Cs(t,r,a,n){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const i=t.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Ss(t,r,a){return Cv()<=wa.DEBUG&&ur("QueryEngine","Using full collection scan to execute query:",Ev(r)),this.ps.getDocumentsMatchingQuery(t,r,$m.min(),a)}vs(t,r,a,n){return this.ps.getDocumentsMatchingQuery(t,a,n).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="LocalStore",i1e=3e8;class o1e{constructor(t,r,a,n){this.persistence=t,this.Fs=r,this.serializer=n,this.Ms=new As(Na),this.xs=new rx(i=>uR(i),dR),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(a)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Wbe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function l1e(e,t,r,a){return new o1e(e,t,r,a)}async function ote(e,t){const r=Xr(e);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let n;return r.mutationQueue.getAllMutationBatches(a).next(i=>(n=i,r.Bs(t),r.mutationQueue.getAllMutationBatches(a))).next(i=>{const o=[],l=[];let c=Ca();for(const u of n){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(a,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function c1e(e,t){const r=Xr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const n=t.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=Lt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);un(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,a,t,i).next(()=>i.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(l){let c=Ca();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(a,n))})}function lte(e){const t=Xr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function u1e(e,t){const r=Xr(e),a=t.snapshotVersion;let n=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});n=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const h=n.get(f);if(!h)return;l.push(r.Pi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(i,d.addedDocuments,f)));let m=h.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(co.EMPTY_BYTE_STRING,Kr.min()).withLastLimboFreeSnapshotVersion(Kr.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,a)),n=n.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=i1e?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(i,m))});let c=Vh(),u=Ca();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(d1e(i,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!a.isEqual(Kr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(i).next(f=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,a));l.push(d)}return Lt.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Ms=n,i))}function d1e(e,t,r){let a=Ca(),n=Ca();return r.forEach(i=>a=a.add(i)),t.getEntries(e,a).next(i=>{let o=Vh();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(n=n.add(l)),c.isNoDocument()&&c.version.isEqual(Kr.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):ur(bR,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:n}})}function f1e(e,t){const r=Xr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=lR),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function A1e(e,t){const r=Xr(e);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let n;return r.Pi.getTargetData(a,t).next(i=>i?(n=i,Lt.resolve(n)):r.Pi.allocateTargetId(a).next(o=>(n=new ym(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Pi.addTargetData(a,n).next(()=>n))))}).then(a=>{const n=r.Ms.get(a.targetId);return(n===null||a.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(a.targetId,a),r.xs.set(t,a.targetId)),a})}async function qO(e,t,r){const a=Xr(e),n=a.Ms.get(t),i=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",i,o=>a.persistence.referenceDelegate.removeTarget(o,n))}catch(o){if(!A1(o))throw o;ur(bR,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ms=a.Ms.remove(t),a.xs.delete(n.target)}function BH(e,t,r){const a=Xr(e);let n=Kr.min(),i=Ca();return a.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Xr(c),h=f.xs.get(d);return h!==void 0?Lt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(a,o,gA(t)).next(l=>{if(l)return n=l.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>a.Fs.getDocumentsMatchingQuery(o,t,r?n:Kr.min(),r?i:Ca())).next(l=>(h1e(a,Zve(t),l),{documents:l,Qs:i})))}function h1e(e,t,r){let a=e.Os.get(t)||Kr.min();r.forEach((n,i)=>{i.readTime.compareTo(a)>0&&(a=i.readTime)}),e.Os.set(t,a)}class TH{constructor(){this.activeTargetIds=sbe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class m1e{constructor(){this.Mo=new TH,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,a){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new TH,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="ConnectivityMonitor";class OH{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ur(IH,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ur(IH,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bE=null;function KO(){return bE===null?bE=function(){return 268435456+Math.round(2147483648*Math.random())}():bE++,"0x"+bE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="RestConnection",g1e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x1e{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${a}/databases/${n}`,this.Wo=this.databaseId.database===$5?`project_id=${a}`:`project_id=${a}&database_id=${n}`}Go(t,r,a,n,i){const o=KO(),l=this.zo(t,r.toUriEncodedString());ur(RB,`Sending RPC '${t}' ${o}:`,l,a);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,n,i);const{host:u}=new URL(l),d=i0(u);return this.Jo(t,l,c,a,d).then(f=>(ur(RB,`Received RPC '${t}' ${o}: `,f),f),f=>{throw Rg(RB,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",a),f})}Ho(t,r,a,n,i,o){return this.Go(t,r,a,n,i)}jo(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+d1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((n,i)=>t[i]=n),a&&a.headers.forEach((n,i)=>t[i]=n)}zo(t,r){const a=g1e[t];return`${this.Uo}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1e{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="WebChannelConnection";class b1e extends x1e{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,a,n,i){const o=KO();return new Promise((l,c)=>{const u=new cee;u.setWithCredentials(!0),u.listenOnce(uee.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zj.NO_ERROR:const f=u.getResponseJson();ur(Go,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case Zj.TIMEOUT:ur(Go,`RPC '${t}' ${o} timed out`),c(new Xt(kt.DEADLINE_EXCEEDED,"Request time out"));break;case Zj.HTTP_ERROR:const h=u.getStatus();if(ur(Go,`RPC '${t}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const N=y.toLowerCase().replace(/_/g,"-");return Object.values(kt).indexOf(N)>=0?N:kt.UNKNOWN}(g.status);c(new Xt(x,g.message))}else c(new Xt(kt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Xt(kt.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ur(Go,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(n);ur(Go,`RPC '${t}' ${o} sending request:`,n),u.send(r,"POST",d,a,15)})}T_(t,r,a){const n=KO(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Aee(),l=fee(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,a),c.encodeInitMessageHeaders=!0;const d=i.join("");ur(Go,`Creating RPC '${t}' stream ${n}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new v1e({Yo:v=>{m?ur(Go,`Not sending because RPC '${t}' stream ${n} is closed:`,v):(h||(ur(Go,`Opening RPC '${t}' stream ${n} transport.`),f.open(),h=!0),ur(Go,`RPC '${t}' stream ${n} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,N)=>{v.listen(y,C=>{try{N(C)}catch(T){setTimeout(()=>{throw T},0)}})};return x(f,p2.EventType.OPEN,()=>{m||(ur(Go,`RPC '${t}' stream ${n} transport opened.`),g.o_())}),x(f,p2.EventType.CLOSE,()=>{m||(m=!0,ur(Go,`RPC '${t}' stream ${n} transport closed`),g.a_(),this.E_(f))}),x(f,p2.EventType.ERROR,v=>{m||(m=!0,Rg(Go,`RPC '${t}' stream ${n} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Xt(kt.UNAVAILABLE,"The operation could not be completed")))}),x(f,p2.EventType.MESSAGE,v=>{var y;if(!m){const N=v.data[0];un(!!N,16349);const C=N,T=(C==null?void 0:C.error)||((y=C[0])==null?void 0:y.error);if(T){ur(Go,`RPC '${t}' stream ${n} received error:`,T);const _=T.status;let O=function(B){const L=pi[B];if(L!==void 0)return Wee(L)}(_),j=T.message;O===void 0&&(O=kt.INTERNAL,j="Unknown error status: "+_+" with message "+T.message),m=!0,g.a_(new Xt(O,j)),f.close()}else ur(Go,`RPC '${t}' stream ${n} received:`,N),g.u_(N)}}),x(l,dee.STAT_EVENT,v=>{v.stat===PO.PROXY?ur(Go,`RPC '${t}' stream ${n} detected buffering proxy`):v.stat===PO.NOPROXY&&ur(Go,`RPC '${t}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function LB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(e){return new Cbe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cte{constructor(t,r,a=1e3,n=1.5,i=6e4){this.Mi=t,this.timerId=r,this.d_=a,this.A_=n,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),n=Math.max(0,r-a);n>0&&ur("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,n,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH="PersistentStream";class ute{constructor(t,r,a,n,i,o,l,c){this.Mi=t,this.S_=a,this.b_=n,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cte(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===kt.RESOURCE_EXHAUSTED?(zh(r.toString()),zh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===kt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,n])=>{this.D_===r&&this.G_(a,n)},a=>{t(()=>{const n=new Xt(kt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(n)})})}G_(t,r){const a=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(n=>{a(()=>this.z_(n))}),this.stream.onMessage(n=>{a(()=>++this.F_==1?this.J_(n):this.onNext(n))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ur(FH,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(ur(FH,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y1e extends ute{constructor(t,r,a,n,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,n,o),this.serializer=i}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=kbe(this.serializer,t),a=function(i){if(!("targetChange"in i))return Kr.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Kr.min():o.readTime?xA(o.readTime):Kr.min()}(t);return this.listener.H_(r,a)}Y_(t){const r={};r.database=GO(this.serializer),r.addTarget=function(i,o){let l;const c=o.target;if(l=QO(c)?{documents:Bbe(i,c)}:{query:Tbe(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Jee(i,o.resumeToken);const u=zO(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Kr.min())>0){l.readTime=X5(i,o.snapshotVersion.toTimestamp());const u=zO(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const a=Obe(this.serializer,t);a&&(r.labels=a),this.q_(r)}Z_(t){const r={};r.database=GO(this.serializer),r.removeTarget=t,this.q_(r)}}class w1e extends ute{constructor(t,r,a,n,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,n,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return un(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,un(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){un(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=_be(t.writeResults,t.commitTime),a=xA(t.commitTime);return this.listener.na(a,r)}ra(){const t={};t.database=GO(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>Sbe(this.serializer,a))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1e{}class C1e extends N1e{constructor(t,r,a,n){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=n,this.ia=!1}sa(){if(this.ia)throw new Xt(kt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,a,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(t,VO(r,a),n,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(kt.UNKNOWN,i.toString())})}Ho(t,r,a,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,VO(r,a),n,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xt(kt.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class E1e{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zh(r),this.aa=!1):ur("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="RemoteStore";class j1e{constructor(t,r,a,n,i){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{a.enqueueAndForget(async()=>{ax(this)&&(ur(Lg,"Restarting streams for network reachability change."),await async function(c){const u=Xr(c);u.Ea.add(4),await SN(u),u.Ra.set("Unknown"),u.Ea.delete(4),await m_(u)}(this))})}),this.Ra=new E1e(a,n)}}async function m_(e){if(ax(e))for(const t of e.da)await t(!0)}async function SN(e){for(const t of e.da)await t(!1)}function dte(e,t){const r=Xr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),CR(r)?NR(r):h1(r).O_()&&wR(r,t))}function yR(e,t){const r=Xr(e),a=h1(r);r.Ia.delete(t),a.O_()&&fte(r,t),r.Ia.size===0&&(a.O_()?a.L_():ax(r)&&r.Ra.set("Unknown"))}function wR(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Kr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}h1(e).Y_(t)}function fte(e,t){e.Va.Ue(t),h1(e).Z_(t)}function NR(e){e.Va=new bbe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),h1(e).start(),e.Ra.ua()}function CR(e){return ax(e)&&!h1(e).x_()&&e.Ia.size>0}function ax(e){return Xr(e).Ea.size===0}function Ate(e){e.Va=void 0}async function k1e(e){e.Ra.set("Online")}async function S1e(e){e.Ia.forEach((t,r)=>{wR(e,t)})}async function _1e(e,t){Ate(e),CR(e)?(e.Ra.ha(t),NR(e)):e.Ra.set("Unknown")}async function B1e(e,t,r){if(e.Ra.set("Online"),t instanceof Yee&&t.state===2&&t.cause)try{await async function(n,i){const o=i.cause;for(const l of i.targetIds)n.Ia.has(l)&&(await n.remoteSyncer.rejectListen(l,o),n.Ia.delete(l),n.Va.removeTarget(l))}(e,t)}catch(a){ur(Lg,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await J5(e,a)}else if(t instanceof a5?e.Va.Ze(t):t instanceof Xee?e.Va.st(t):e.Va.tt(t),!r.isEqual(Kr.min()))try{const a=await lte(e.localStore);r.compareTo(a)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(co.EMPTY_BYTE_STRING,d.snapshotVersion)),fte(i,c);const f=new ym(d.target,c,u,d.sequenceNumber);wR(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(a){ur(Lg,"Failed to raise snapshot:",a),await J5(e,a)}}async function J5(e,t,r){if(!A1(t))throw t;e.Ea.add(1),await SN(e),e.Ra.set("Offline"),r||(r=()=>lte(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ur(Lg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await m_(e)})}function hte(e,t){return t().catch(r=>J5(e,r,t))}async function p_(e){const t=Xr(e),r=Wm(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:lR;for(;T1e(t);)try{const n=await f1e(t.localStore,a);if(n===null){t.Ta.length===0&&r.L_();break}a=n.batchId,I1e(t,n)}catch(n){await J5(t,n)}mte(t)&&pte(t)}function T1e(e){return ax(e)&&e.Ta.length<10}function I1e(e,t){e.Ta.push(t);const r=Wm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function mte(e){return ax(e)&&!Wm(e).x_()&&e.Ta.length>0}function pte(e){Wm(e).start()}async function O1e(e){Wm(e).ra()}async function F1e(e){const t=Wm(e);for(const r of e.Ta)t.ea(r.mutations)}async function D1e(e,t,r){const a=e.Ta.shift(),n=hR.from(a,t,r);await hte(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await p_(e)}async function P1e(e,t){t&&Wm(e).X_&&await async function(a,n){if(function(o){return gbe(o)&&o!==kt.ABORTED}(n.code)){const i=a.Ta.shift();Wm(a).B_(),await hte(a,()=>a.remoteSyncer.rejectFailedWrite(i.batchId,n)),await p_(a)}}(e,t),mte(e)&&pte(e)}async function DH(e,t){const r=Xr(e);r.asyncQueue.verifyOperationInProgress(),ur(Lg,"RemoteStore received new credentials");const a=ax(r);r.Ea.add(3),await SN(r),a&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await m_(r)}async function R1e(e,t){const r=Xr(e);t?(r.Ea.delete(2),await m_(r)):t||(r.Ea.add(2),await SN(r),r.Ra.set("Unknown"))}function h1(e){return e.ma||(e.ma=function(r,a,n){const i=Xr(r);return i.sa(),new y1e(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Xo:k1e.bind(null,e),t_:S1e.bind(null,e),r_:_1e.bind(null,e),H_:B1e.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),CR(e)?NR(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ate(e))})),e.ma}function Wm(e){return e.fa||(e.fa=function(r,a,n){const i=Xr(r);return i.sa(),new w1e(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:O1e.bind(null,e),r_:P1e.bind(null,e),ta:F1e.bind(null,e),na:D1e.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await p_(e)):(await e.fa.stop(),e.Ta.length>0&&(ur(Lg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(t,r,a,n,i){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=n,this.removalCallback=i,this.deferred=new Th,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,n,i){const o=Date.now()+a,l=new ER(t,r,o,n,i);return l.start(a),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(kt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jR(e,t){if(zh("AsyncQueue",`${t}: ${e}`),A1(e))return new Xt(kt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static emptySet(t){return new Jv(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||vr.comparator(r.key,a.key):(r,a)=>vr.comparator(r.key,a.key),this.keyedMap=g2(),this.sortedSet=new As(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Jv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const n=r.getNext().key,i=a.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new Jv;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(){this.ga=new As(vr.comparator)}track(t){const r=t.doc.key,a=this.ga.get(r);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(r,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(r):t.type===1&&a.type===2?this.ga=this.ga.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:a}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,a)=>{t.push(a)}),t}}class Bb{constructor(t,r,a,n,i,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=n,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,a,n,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Bb(t,r,Jv.emptySet(r),o,a,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&l_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let n=0;n<r.length;n++)if(r[n].type!==a[n].type||!r[n].doc.isEqual(a[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1e{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class M1e{constructor(){this.queries=RH(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,a){const n=Xr(r),i=n.queries;n.queries=RH(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(a)})})(this,new Xt(kt.ABORTED,"Firestore shutting down"))}}function RH(){return new rx(e=>Pee(e),l_)}async function kR(e,t){const r=Xr(e);let a=3;const n=t.query;let i=r.queries.get(n);i?!i.ba()&&t.Da()&&(a=2):(i=new L1e,a=t.Da()?0:1);try{switch(a){case 0:i.wa=await r.onListen(n,!0);break;case 1:i.wa=await r.onListen(n,!1);break;case 2:await r.onFirstRemoteStoreListen(n)}}catch(o){const l=jR(o,`Initialization of query '${Ev(t.query)}' failed`);return void t.onError(l)}r.queries.set(n,i),i.Sa.push(t),t.va(r.onlineState),i.wa&&t.Fa(i.wa)&&_R(r)}async function SR(e,t){const r=Xr(e),a=t.query;let n=3;const i=r.queries.get(a);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?n=t.Da()?0:1:!i.ba()&&t.Da()&&(n=2))}switch(n){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function U1e(e,t){const r=Xr(e);let a=!1;for(const n of t){const i=n.query,o=r.queries.get(i);if(o){for(const l of o.Sa)l.Fa(n)&&(a=!0);o.wa=n}}a&&_R(r)}function Q1e(e,t,r){const a=Xr(e),n=a.queries.get(t);if(n)for(const i of n.Sa)i.onError(r);a.queries.delete(t)}function _R(e){e.Ca.forEach(t=>{t.next()})}var WO,LH;(LH=WO||(WO={})).Ma="default",LH.Cache="cache";class BR{constructor(t,r,a){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const n of t.docChanges)n.type!==3&&a.push(n);t=new Bb(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const a=r!=="Offline";return(!this.options.qa||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Bb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==WO.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gte{constructor(t){this.key=t}}class xte{constructor(t){this.key=t}}class H1e{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ca(),this.mutatedKeys=Ca(),this.eu=Ree(t),this.tu=new Jv(this.eu)}get nu(){return this.Ya}ru(t,r){const a=r?r.iu:new PH,n=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,o=n,l=!1;const c=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,u=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((d,f)=>{const h=n.get(d),m=c_(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(a.track({type:3,doc:m}),v=!0):this.su(h,m)||(a.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(a.track({type:0,doc:m}),v=!0):h&&!m&&(a.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),a.track({type:1,doc:d})}return{tu:o,iu:a,Cs:l,mutatedKeys:i}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,n){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(a),n=n??!1;const l=r&&!n?this._u():[],c=this.Xa.size===0&&this.current&&!n?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Bb(this.query,t.tu,i,o,t.mutatedKeys,c===0,u,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PH,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ca(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const r=[];return t.forEach(a=>{this.Xa.has(a)||r.push(new xte(a))}),this.Xa.forEach(a=>{t.has(a)||r.push(new gte(a))}),r}cu(t){this.Ya=t.Qs,this.Xa=Ca();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Bb.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const TR="SyncEngine";class z1e{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class V1e{constructor(t){this.key=t,this.hu=!1}}class $1e{constructor(t,r,a,n,i,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rx(l=>Pee(l),l_),this.Iu=new Map,this.Eu=new Set,this.du=new As(vr.comparator),this.Au=new Map,this.Ru=new gR,this.Vu={},this.mu=new Map,this.fu=_b.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function G1e(e,t,r=!0){const a=Cte(e);let n;const i=a.Tu.get(t);return i?(a.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.lu()):n=await vte(a,t,r,!0),n}async function q1e(e,t){const r=Cte(e);await vte(r,t,!0,!1)}async function vte(e,t,r,a){const n=await A1e(e.localStore,gA(t)),i=n.targetId,o=e.sharedClientState.addLocalQueryTarget(i,r);let l;return a&&(l=await K1e(e,t,i,o==="current",n.resumeToken)),e.isPrimaryClient&&r&&dte(e.remoteStore,n),l}async function K1e(e,t,r,a,n){e.pu=(f,h,m)=>async function(x,v,y,N){let C=v.view.ru(y);C.Cs&&(C=await BH(x.localStore,v.query,!1).then(({documents:j})=>v.view.ru(j,C)));const T=N&&N.targetChanges.get(v.targetId),_=N&&N.targetMismatches.get(v.targetId)!=null,O=v.view.applyChanges(C,x.isPrimaryClient,T,_);return UH(x,v.targetId,O.au),O.snapshot}(e,f,h,m);const i=await BH(e.localStore,t,!0),o=new H1e(t,i.Qs),l=o.ru(i.documents),c=kN.createSynthesizedTargetChangeForCurrentChange(r,a&&e.onlineState!=="Offline",n),u=o.applyChanges(l,e.isPrimaryClient,c);UH(e,r,u.au);const d=new z1e(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function W1e(e,t,r){const a=Xr(e),n=a.Tu.get(t),i=a.Iu.get(n.targetId);if(i.length>1)return a.Iu.set(n.targetId,i.filter(o=>!l_(o,t))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(n.targetId),a.sharedClientState.isActiveQueryTarget(n.targetId)||await qO(a.localStore,n.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(n.targetId),r&&yR(a.remoteStore,n.targetId),XO(a,n.targetId)}).catch(f1)):(XO(a,n.targetId),await qO(a.localStore,n.targetId,!0))}async function X1e(e,t){const r=Xr(e),a=r.Tu.get(t),n=r.Iu.get(a.targetId);r.isPrimaryClient&&n.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),yR(r.remoteStore,a.targetId))}async function Y1e(e,t,r){const a=nye(e);try{const n=await function(o,l){const c=Xr(o),u=lr.now(),d=l.reduce((m,g)=>m.add(g.key),Ca());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Vh(),x=Ca();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,N)=>{N.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const N of l){const C=fbe(N,f.get(N.key).overlayedDocument);C!=null&&y.push(new cp(N.key,C,_ee(C.value.mapValue),Dl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:Mee(f)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(n.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new As(Na)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(a,n.batchId,r),await _N(a,n.changes),await p_(a.remoteStore)}catch(n){const i=jR(n,"Failed to persist write");r.reject(i)}}async function bte(e,t){const r=Xr(e);try{const a=await u1e(r.localStore,t);t.targetChanges.forEach((n,i)=>{const o=r.Au.get(i);o&&(un(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?o.hu=!0:n.modifiedDocuments.size>0?un(o.hu,14607):n.removedDocuments.size>0&&(un(o.hu,42227),o.hu=!1))}),await _N(r,a,t)}catch(a){await f1(a)}}function MH(e,t,r){const a=Xr(e);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const n=[];a.Tu.forEach((i,o)=>{const l=o.view.va(t);l.snapshot&&n.push(l.snapshot)}),function(o,l){const c=Xr(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(l)&&(u=!0)}),u&&_R(c)}(a.eventManager,t),n.length&&a.Pu.H_(n),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function J1e(e,t,r){const a=Xr(e);a.sharedClientState.updateQueryState(t,"rejected",r);const n=a.Au.get(t),i=n&&n.key;if(i){let o=new As(vr.comparator);o=o.insert(i,sl.newNoDocument(i,Kr.min()));const l=Ca().add(i),c=new A_(Kr.min(),new Map,new As(Na),o,l);await bte(a,c),a.du=a.du.remove(i),a.Au.delete(t),IR(a)}else await qO(a.localStore,t,!1).then(()=>XO(a,t,r)).catch(f1)}async function Z1e(e,t){const r=Xr(e),a=t.batch.batchId;try{const n=await c1e(r.localStore,t);wte(r,a,null),yte(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await _N(r,n)}catch(n){await f1(n)}}async function eye(e,t,r){const a=Xr(e);try{const n=await function(o,l){const c=Xr(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(un(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(a.localStore,t);wte(a,t,r),yte(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await _N(a,n)}catch(n){await f1(n)}}function yte(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function wte(e,t,r){const a=Xr(e);let n=a.Vu[a.currentUser.toKey()];if(n){const i=n.get(t);i&&(r?i.reject(r):i.resolve(),n=n.remove(t)),a.Vu[a.currentUser.toKey()]=n}}function XO(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const a of e.Iu.get(t))e.Tu.delete(a),r&&e.Pu.yu(a,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(a=>{e.Ru.containsKey(a)||Nte(e,a)})}function Nte(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(yR(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),IR(e))}function UH(e,t,r){for(const a of r)a instanceof gte?(e.Ru.addReference(a.key,t),tye(e,a)):a instanceof xte?(ur(TR,"Document no longer in limbo: "+a.key),e.Ru.removeReference(a.key,t),e.Ru.containsKey(a.key)||Nte(e,a.key)):Hr(19791,{wu:a})}function tye(e,t){const r=t.key,a=r.path.canonicalString();e.du.get(r)||e.Eu.has(a)||(ur(TR,"New document in limbo: "+r),e.Eu.add(a),IR(e))}function IR(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new vr(In.fromString(t)),a=e.fu.next();e.Au.set(a,new V1e(r)),e.du=e.du.insert(r,a),dte(e.remoteStore,new ym(gA(o_(r.path)),a,"TargetPurposeLimboResolution",a_.ce))}}async function _N(e,t,r){const a=Xr(e),n=[],i=[],o=[];a.Tu.isEmpty()||(a.Tu.forEach((l,c)=>{o.push(a.pu(c,t,r).then(u=>{var d;if((u||r)&&a.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;a.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){n.push(u);const f=vR.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),a.Pu.H_(n),await async function(c,u){const d=Xr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Lt.forEach(u,h=>Lt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Lt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!A1(f))throw f;ur(bR,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(a.localStore,i))}async function rye(e,t){const r=Xr(e);if(!r.currentUser.isEqual(t)){ur(TR,"User change. New user:",t.toKey());const a=await ote(r.localStore,t);r.currentUser=t,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Xt(kt.CANCELLED,o))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await _N(r,a.Ls)}}function aye(e,t){const r=Xr(e),a=r.Au.get(t);if(a&&a.hu)return Ca().add(a.key);{let n=Ca();const i=r.Iu.get(t);if(!i)return n;for(const o of i){const l=r.Tu.get(o);n=n.unionWith(l.view.nu)}return n}}function Cte(e){const t=Xr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bte.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aye.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=J1e.bind(null,t),t.Pu.H_=U1e.bind(null,t.eventManager),t.Pu.yu=Q1e.bind(null,t.eventManager),t}function nye(e){const t=Xr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Z1e.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eye.bind(null,t),t}class Z5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=h_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return l1e(this.persistence,new s1e,t.initialUser,this.serializer)}Cu(t){return new ite(xR.mi,this.serializer)}Du(t){return new m1e}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Z5.provider={build:()=>new Z5};class sye extends Z5{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){un(this.persistence.referenceDelegate instanceof Y5,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new Vbe(a,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?sc.withCacheSize(this.cacheSizeBytes):sc.DEFAULT;return new ite(a=>Y5.mi(a,r),this.serializer)}}class YO{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>MH(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=rye.bind(null,this.syncEngine),await R1e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new M1e}()}createDatastore(t){const r=h_(t.databaseInfo.databaseId),a=function(i){return new b1e(i)}(t.databaseInfo);return function(i,o,l,c){return new C1e(i,o,l,c)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,n,i,o,l){return new j1e(a,n,i,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>MH(this.syncEngine,r,0),function(){return OH.v()?new OH:new p1e}())}createSyncEngine(t,r){return function(n,i,o,l,c,u,d){const f=new $1e(n,i,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(n){const i=Xr(n);ur(Lg,"RemoteStore shutting down."),i.Ea.add(5),await SN(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}YO.provider={build:()=>new YO};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):zh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="FirestoreClient";class iye{constructor(t,r,a,n,i){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=n,this.user=tl.UNAUTHENTICATED,this.clientId=t_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(a,async o=>{ur(Xm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(ur(Xm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Th;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=jR(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function MB(e,t){e.asyncQueue.verifyOperationInProgress(),ur(Xm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let a=r.initialUser;e.setCredentialChangeListener(async n=>{a.isEqual(n)||(await ote(t.localStore,n),a=n)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function QH(e,t){e.asyncQueue.verifyOperationInProgress();const r=await oye(e);ur(Xm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(a=>DH(t.remoteStore,a)),e.setAppCheckTokenChangeListener((a,n)=>DH(t.remoteStore,n)),e._onlineComponents=t}async function oye(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ur(Xm,"Using user provided OfflineComponentProvider");try{await MB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(n){return n.name==="FirebaseError"?n.code===kt.FAILED_PRECONDITION||n.code===kt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(r))throw r;Rg("Error using user provided cache. Falling back to memory cache: "+r),await MB(e,new Z5)}}else ur(Xm,"Using default OfflineComponentProvider"),await MB(e,new sye(void 0));return e._offlineComponents}async function Ete(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ur(Xm,"Using user provided OnlineComponentProvider"),await QH(e,e._uninitializedComponentsProvider._online)):(ur(Xm,"Using default OnlineComponentProvider"),await QH(e,new YO))),e._onlineComponents}function lye(e){return Ete(e).then(t=>t.syncEngine)}async function ek(e){const t=await Ete(e),r=t.eventManager;return r.onListen=G1e.bind(null,t.syncEngine),r.onUnlisten=W1e.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=q1e.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=X1e.bind(null,t.syncEngine),r}function cye(e,t,r={}){const a=new Th;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new OR({next:h=>{d.Nu(),o.enqueueAndForget(()=>SR(i,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new Xt(kt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new Xt(kt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new BR(o_(l.path),d,{includeMetadataChanges:!0,qa:!0});return kR(i,f)}(await ek(e),e.asyncQueue,t,r,a)),a.promise}function uye(e,t,r={}){const a=new Th;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new OR({next:h=>{d.Nu(),o.enqueueAndForget(()=>SR(i,f)),h.fromCache&&c.source==="server"?u.reject(new Xt(kt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new BR(l,d,{includeMetadataChanges:!0,qa:!0});return kR(i,f)}(await ek(e),e.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jte(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kte="firestore.googleapis.com",zH=!0;class VH{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(kt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kte,this.ssl=zH}else this.host=t.host,this.ssl=t.ssl??zH;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ste;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Hbe)throw new Xt(kt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}xee("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jte(t.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Xt(kt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Xt(kt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Xt(kt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,n){return a.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class g_{constructor(t,r,a,n){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(kt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(kt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VH(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new pee;switch(a.type){case"firstParty":return new bve(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Xt(kt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=HH.get(r);a&&(ur("ComponentProvider","Removing Datastore"),HH.delete(r),a.terminate())}(this),Promise.resolve()}}function Ste(e,t,r,a={}){var u;e=Al(e,g_);const n=i0(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;n&&(KS(`https://${l}`),WS("Firestore",!0)),i.host!==kte&&i.host!==l&&Rg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:n,emulatorOptions:a};if(!zm(c,o)&&(e._setSettings(c),a.mockUserToken)){let d,f;if(typeof a.mockUserToken=="string")d=a.mockUserToken,f=tl.MOCK_USER;else{d=wZ(a.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=a.mockUserToken.sub||a.mockUserToken.user_id;if(!h)throw new Xt(kt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new tl(h)}e._authCredentials=new gve(new mee(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new df(this.firestore,t,this._query)}}class us{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ih(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new us(this.firestore,t,this._key)}toJSON(){return{type:us._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,a){if(EN(r,us._jsonSchema))return new us(t,a||null,new vr(In.fromString(r.referencePath)))}}us._jsonSchemaVersion="firestore/documentReference/1.0",us._jsonSchema={type:Ci("string",us._jsonSchemaVersion),referencePath:Ci("string")};class Ih extends df{constructor(t,r,a){super(t,r,o_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new us(this.firestore,null,new vr(t))}withConverter(t){return new Ih(this.firestore,t,this._path)}}function pt(e,t,...r){if(e=Ga(e),gee("collection","path",t),e instanceof g_){const a=In.fromString(t,...r);return nH(a),new Ih(e,null,a)}{if(!(e instanceof us||e instanceof Ih))throw new Xt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(In.fromString(t,...r));return nH(a),new Ih(e.firestore,null,a)}}function $t(e,t,...r){if(e=Ga(e),arguments.length===1&&(t=t_.newId()),gee("doc","path",t),e instanceof g_){const a=In.fromString(t,...r);return aH(a),new us(e,null,new vr(a))}{if(!(e instanceof us||e instanceof Ih))throw new Xt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(In.fromString(t,...r));return aH(a),new us(e.firestore,e instanceof Ih?e.converter:null,new vr(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H="AsyncQueue";class GH{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cte(this,"async_queue_retry"),this._c=()=>{const a=LB();a&&ur($H,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const r=LB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=LB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Th;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!A1(t))throw t;ur($H,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(a=>{throw this.nc=a,this.rc=!1,zh("INTERNAL UNHANDLED ERROR: ",qH(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=r,r}enqueueAfterDelay(t,r,a){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const n=ER.createAndSchedule(this,t,r,a,i=>this.hc(i));return this.tc.push(n),n}uc(){this.nc&&Hr(47125,{Pc:qH(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function qH(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(e){return function(r,a){if(typeof r!="object"||r===null)return!1;const n=r;for(const i of a)if(i in n&&typeof n[i]=="function")return!0;return!1}(e,["next","error","complete"])}class sf extends g_{constructor(t,r,a,n){super(t,r,a,n),this.type="firestore",this._queue=new GH,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new GH(t),this._firestoreClient=void 0,await t}}}function FR(e,t){const r=typeof e=="object"?e:XS(),a=typeof e=="string"?e:$5,n=yN(r,"firestore").getImmediate({identifier:a});if(!n._initialized){const i=WP("firestore");i&&Ste(n,...i)}return n}function m1(e){if(e._terminated)throw new Xt(kt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dye(e),e._firestoreClient}function dye(e){var a,n,i;const t=e._freezeSettings(),r=function(l,c,u,d){return new Rve(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,jte(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((a=e._app)==null?void 0:a.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(n=t.localCache)!=null&&n._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new iye(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new eu(co.fromBase64String(t))}catch(r){throw new Xt(kt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new eu(co.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:eu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(EN(t,eu._jsonSchema))return eu.fromBase64String(t.bytes)}}eu._jsonSchemaVersion="firestore/bytes/1.0",eu._jsonSchema={type:Ci("string",eu._jsonSchemaVersion),bytes:Ci("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(kt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new so(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(kt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(kt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Na(this._lat,t._lat)||Na(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jd._jsonSchemaVersion}}static fromJSON(t){if(EN(t,Jd._jsonSchema))return new Jd(t.latitude,t.longitude)}}Jd._jsonSchemaVersion="firestore/geoPoint/1.0",Jd._jsonSchema={type:Ci("string",Jd._jsonSchemaVersion),latitude:Ci("number"),longitude:Ci("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,n){if(a.length!==n.length)return!1;for(let i=0;i<a.length;++i)if(a[i]!==n[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Zd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(EN(t,Zd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Zd(t.vectorValues);throw new Xt(kt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zd._jsonSchemaVersion="firestore/vectorValue/1.0",Zd._jsonSchema={type:Ci("string",Zd._jsonSchemaVersion),vectorValues:Ci("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fye=/^__.*__$/;class Aye{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new cp(t,this.data,this.fieldMask,r,this.fieldTransforms):new jN(t,this.data,r,this.fieldTransforms)}}class _te{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new cp(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Bte(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class x_{constructor(t,r,a,n,i,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=n,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new x_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var n;const r=(n=this.path)==null?void 0:n.child(t),a=this.Vc({path:r,fc:!1});return a.gc(t),a}yc(t){var n;const r=(n=this.path)==null?void 0:n.child(t),a=this.Vc({path:r,fc:!1});return a.Rc(),a}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return tk(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Bte(this.Ac)&&fye.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class hye{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||h_(t)}Cc(t,r,a,n=!1){return new x_({Ac:t,methodName:r,Dc:a,path:so.emptyPath(),fc:!1,bc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x1(e){const t=e._freezeSettings(),r=h_(e._databaseId);return new hye(e._databaseId,!!t.ignoreUndefinedProperties,r)}function DR(e,t,r,a,n,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,r,n);LR("Data must be an object, but it was:",o,a);const l=Fte(a,o);let c,u;if(i.merge)c=new su(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const h=JO(t,f,r);if(!o.contains(h))throw new Xt(kt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Pte(d,h)||d.push(h)}c=new su(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Aye(new fc(l),c,u)}class v_ extends g1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof v_}}function mye(e,t,r){return new x_({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class PR extends g1{_toFieldTransform(t){return new Gee(t.path,new jw)}isEqual(t){return t instanceof PR}}class RR extends g1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=mye(this,t,!0),a=this.vc.map(i=>v1(i,r)),n=new Sb(a);return new Gee(t.path,n)}isEqual(t){return t instanceof RR&&zm(this.vc,t.vc)}}function Tte(e,t,r,a){const n=e.Cc(1,t,r);LR("Data must be an object, but it was:",n,a);const i=[],o=fc.empty();lp(a,(c,u)=>{const d=MR(t,c,r);u=Ga(u);const f=n.yc(d);if(u instanceof v_)i.push(d);else{const h=v1(u,f);h!=null&&(i.push(d),o.set(d,h))}});const l=new su(i);return new _te(o,l,n.fieldTransforms)}function Ite(e,t,r,a,n,i){const o=e.Cc(1,t,r),l=[JO(t,a,r)],c=[n];if(i.length%2!=0)throw new Xt(kt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)l.push(JO(t,i[h])),c.push(i[h+1]);const u=[],d=fc.empty();for(let h=l.length-1;h>=0;--h)if(!Pte(u,l[h])){const m=l[h];let g=c[h];g=Ga(g);const x=o.yc(m);if(g instanceof v_)u.push(m);else{const v=v1(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new su(u);return new _te(d,f,o.fieldTransforms)}function Ote(e,t,r,a=!1){return v1(r,e.Cc(a?4:3,t))}function v1(e,t){if(Dte(e=Ga(e)))return LR("Unsupported field value:",t,e),Fte(e,t);if(e instanceof g1)return function(a,n){if(!Bte(n.Ac))throw n.Sc(`${a._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Sc(`${a._methodName}() is not currently supported inside arrays`);const i=a._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(a,n){const i=[];let o=0;for(const l of a){let c=v1(l,n.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(a,n){if((a=Ga(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return ibe(n.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const i=lr.fromDate(a);return{timestampValue:X5(n.serializer,i)}}if(a instanceof lr){const i=new lr(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:X5(n.serializer,i)}}if(a instanceof Jd)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof eu)return{bytesValue:Jee(n.serializer,a._byteString)};if(a instanceof us){const i=n.databaseId,o=a.firestore._databaseId;if(!o.isEqual(i))throw n.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pR(a.firestore._databaseId||n.databaseId,a._key.path)}}if(a instanceof Zd)return function(o,l){return{mapValue:{fields:{[kee]:{stringValue:See},[G5]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return AR(l.serializer,u)})}}}}}}(a,n);throw n.Sc(`Unsupported field value: ${r_(a)}`)}(e,t)}function Fte(e,t){const r={};return yee(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lp(e,(a,n)=>{const i=v1(n,t.mc(a));i!=null&&(r[a]=i)}),{mapValue:{fields:r}}}function Dte(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof lr||e instanceof Jd||e instanceof eu||e instanceof us||e instanceof g1||e instanceof Zd)}function LR(e,t,r){if(!Dte(r)||!vee(r)){const a=r_(r);throw a==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+a)}}function JO(e,t,r){if((t=Ga(t))instanceof p1)return t._internalPath;if(typeof t=="string")return MR(e,t);throw tk("Field path arguments must be of type string or ",e,!1,void 0,r)}const pye=new RegExp("[~\\*/\\[\\]]");function MR(e,t,r){if(t.search(pye)>=0)throw tk(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new p1(...t.split("."))._internalPath}catch{throw tk(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function tk(e,t,r,a,n){const i=a&&!a.isEmpty(),o=n!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${a}`),o&&(c+=` in document ${n}`),c+=")"),new Xt(kt.INVALID_ARGUMENT,l+e+c)}function Pte(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t,r,a,n,i){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new us(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(b_("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class gye extends UR{data(){return super.data()}}function b_(e,t){return typeof t=="string"?MR(e,t):t instanceof p1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rte(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(kt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QR{}class BN extends QR{}function _t(e,t,...r){let a=[];t instanceof QR&&a.push(t),a=a.concat(r),function(i){const o=i.filter(c=>c instanceof y_).length,l=i.filter(c=>c instanceof TN).length;if(o>1||o>0&&l>0)throw new Xt(kt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const n of a)e=n._apply(e);return e}class TN extends BN{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new TN(t,r,a)}_apply(t){const r=this._parse(t);return Mte(t._query,r),new df(t.firestore,t.converter,HO(t._query,r))}_parse(t){const r=x1(t.firestore);return function(i,o,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(kt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XH(f,d);const g=[];for(const x of f)g.push(WH(c,i,x));h={arrayValue:{values:g}}}else h=WH(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XH(f,d),h=Ote(l,o,f,d==="in"||d==="not-in");return wi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function rr(e,t,r){const a=t,n=b_("where",e);return TN._create(n,a,r)}class y_ extends QR{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new y_(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:nf.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(n,i){let o=n;const l=i.getFlattenedFilters();for(const c of l)Mte(o,c),o=HO(o,c)}(t._query,r),new df(t.firestore,t.converter,HO(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class w_ extends BN{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new w_(t,r)}_apply(t){const r=function(n,i,o){if(n.startAt!==null)throw new Xt(kt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Xt(kt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ew(i,o)}(t._query,this._field,this._direction);return new df(t.firestore,t.converter,function(n,i){const o=n.explicitOrderBy.concat([i]);return new tx(n.path,n.collectionGroup,o,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(t._query,r))}}function Gt(e,t="asc"){const r=t,a=b_("orderBy",e);return w_._create(a,r)}class N_ extends BN{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new N_(t,r,a)}_apply(t){return new df(t.firestore,t.converter,K5(t._query,this._limit,this._limitType))}}function hl(e){return jve("limit",e),N_._create("limit",e,"F")}class C_ extends BN{constructor(t,r,a){super(),this.type=t,this._docOrFields=r,this._inclusive=a}static _create(t,r,a){return new C_(t,r,a)}_apply(t){const r=xye(t,this.type,this._docOrFields,this._inclusive);return new df(t.firestore,t.converter,function(n,i){return new tx(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)}(t._query,r))}}function Lte(...e){return C_._create("startAfter",e,!1)}function xye(e,t,r,a){if(r[0]=Ga(r[0]),r[0]instanceof UR)return function(i,o,l,c,u){if(!c)throw new Xt(kt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of Yv(i))if(f.field.isKeyField())d.push(q5(o,c.key));else{const h=c.data.field(f.field);if(s_(h))throw new Xt(kt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new kb(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,a);{const n=x1(e.firestore);return function(o,l,c,u,d,f){const h=o.explicitOrderBy;if(d.length>h.length)throw new Xt(kt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!fR(o)&&x.indexOf("/")!==-1)throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(In.fromString(x));if(!vr.isDocumentKey(v))throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new vr(v);m.push(q5(l,y))}else{const v=Ote(c,u,x);m.push(v)}}return new kb(m,f)}(e._query,e.firestore._databaseId,n,t,r,a)}}function WH(e,t,r){if(typeof(r=Ga(r))=="string"){if(r==="")throw new Xt(kt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fR(t)&&r.indexOf("/")!==-1)throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(In.fromString(r));if(!vr.isDocumentKey(a))throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return q5(e,new vr(a))}if(r instanceof us)return q5(e,r._key);throw new Xt(kt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${r_(r)}.`)}function XH(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(kt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Mte(e,t){const r=function(n,i){for(const o of n)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(kt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(kt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Ute{convertValue(t,r="none"){switch(Km(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(qm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return lp(t,(n,i)=>{a[n]=this.convertValue(i,r)}),a}convertVectorValue(t){var a,n,i;const r=(i=(n=(a=t.fields)==null?void 0:a[G5].arrayValue)==null?void 0:n.values)==null?void 0:i.map(o=>Zs(o.doubleValue));return new Zd(r)}convertGeoPoint(t){return new Jd(Zs(t.latitude),Zs(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=i_(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Nw(t));default:return null}}convertTimestamp(t){const r=Gm(t);return new lr(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=In.fromString(t);un(nte(a),9688,{name:t});const n=new Cb(a.get(1),a.get(3)),i=new vr(a.popFirst(5));return n.isEqual(r)||zh(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(e,t,r){let a;return a=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,a}class Dv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Om extends UR{constructor(t,r,a,n,i,o){super(t,r,a,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new G2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(b_("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(kt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Om._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Om._jsonSchemaVersion="firestore/documentSnapshot/1.0",Om._jsonSchema={type:Ci("string",Om._jsonSchemaVersion),bundleSource:Ci("string","DocumentSnapshot"),bundleName:Ci("string"),bundle:Ci("string")};class G2 extends Om{data(t={}){return super.data(t)}}class Fm{constructor(t,r,a,n){this._firestore=t,this._userDataWriter=r,this._snapshot=n,this.metadata=new Dv(n.hasPendingWrites,n.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new G2(this._firestore,this._userDataWriter,a.key,a,new Dv(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(kt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let o=0;return n._snapshot.docChanges.map(l=>{const c=new G2(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Dv(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new G2(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Dv(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:vye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(kt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=t_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],a=[],n=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),a.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),n.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function vye(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(e){e=Al(e,us);const t=Al(e.firestore,sf);return cye(m1(t),e._key).then(r=>Qte(t,e,r))}Fm._jsonSchemaVersion="firestore/querySnapshot/1.0",Fm._jsonSchema={type:Ci("string",Fm._jsonSchemaVersion),bundleSource:Ci("string","QuerySnapshot"),bundleName:Ci("string"),bundle:Ci("string")};class zR extends Ute{constructor(t){super(),this.firestore=t}convertBytes(t){return new eu(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new us(this.firestore,null,r)}}function _r(e){e=Al(e,df);const t=Al(e.firestore,sf),r=m1(t),a=new zR(t);return Rte(e._query),uye(r,e._query).then(n=>new Fm(t,a,e,n))}function ii(e,t,r){e=Al(e,us);const a=Al(e.firestore,sf),n=HR(e.converter,t,r);return b1(a,[DR(x1(a),"setDoc",e._key,n,e.converter!==null,r).toMutation(e._key,Dl.none())])}function Ui(e,t,r,...a){e=Al(e,us);const n=Al(e.firestore,sf),i=x1(n);let o;return o=typeof(t=Ga(t))=="string"||t instanceof p1?Ite(i,"updateDoc",e._key,t,r,a):Tte(i,"updateDoc",e._key,t),b1(n,[o.toMutation(e._key,Dl.exists(!0))])}function Ja(e){return b1(Al(e.firestore,sf),[new f_(e._key,Dl.none())])}function Yr(e,t){const r=Al(e.firestore,sf),a=$t(e),n=HR(e.converter,t);return b1(r,[DR(x1(e.firestore),"addDoc",a._key,n,e.converter!==null,{}).toMutation(a._key,Dl.exists(!1))]).then(()=>a)}function ar(e,...t){var c,u,d;e=Ga(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||KH(t[a])||(r=t[a++]);const n={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(KH(t[a])){const f=t[a];t[a]=(c=f.next)==null?void 0:c.bind(f),t[a+1]=(u=f.error)==null?void 0:u.bind(f),t[a+2]=(d=f.complete)==null?void 0:d.bind(f)}let i,o,l;if(e instanceof us)o=Al(e.firestore,sf),l=o_(e._key.path),i={next:f=>{t[a]&&t[a](Qte(o,e,f))},error:t[a+1],complete:t[a+2]};else{const f=Al(e,df);o=Al(f.firestore,sf),l=f._query;const h=new zR(o);i={next:m=>{t[a]&&t[a](new Fm(o,h,f,m))},error:t[a+1],complete:t[a+2]},Rte(e._query)}return function(h,m,g,x){const v=new OR(x),y=new BR(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>kR(await ek(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>SR(await ek(h),y))}}(m1(o),l,n,i)}function b1(e,t){return function(a,n){const i=new Th;return a.asyncQueue.enqueueAndForget(async()=>Y1e(await lye(a),n,i)),i.promise}(m1(e),t)}function Qte(e,t,r){const a=r.docs.get(t._key),n=new zR(e);return new Om(e,n,t._key,a,new Dv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hte{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=x1(t)}set(t,r,a){this._verifyNotCommitted();const n=UB(t,this._firestore),i=HR(n.converter,r,a),o=DR(this._dataReader,"WriteBatch.set",n._key,i,n.converter!==null,a);return this._mutations.push(o.toMutation(n._key,Dl.none())),this}update(t,r,a,...n){this._verifyNotCommitted();const i=UB(t,this._firestore);let o;return o=typeof(r=Ga(r))=="string"||r instanceof p1?Ite(this._dataReader,"WriteBatch.update",i._key,r,a,n):Tte(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(o.toMutation(i._key,Dl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=UB(t,this._firestore);return this._mutations=this._mutations.concat(new f_(r._key,Dl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(kt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function UB(e,t){if((e=Ga(e)).firestore!==t)throw new Xt(kt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function qa(){return new PR("serverTimestamp")}function zte(...e){return new RR("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(e){return m1(e=Al(e,sf)),new Hte(e,t=>b1(e,t))}(function(t,r=!0){(function(n){d1=n})(Zg),Vm(new Uh("firestore",(a,{instanceIdentifier:n,options:i})=>{const o=a.getProvider("app").getImmediate(),l=new sf(new xve(a.getProvider("auth-internal")),new yve(o,a.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(kt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cb(u.options.projectId,d)}(o,n),o);return i={useFetchStreams:r,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),sd(ZQ,eH,t),sd(ZQ,eH,"esm2020")})();const Tb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Ute,Bytes:eu,CollectionReference:Ih,DocumentReference:us,DocumentSnapshot:Om,FieldPath:p1,FieldValue:g1,Firestore:sf,FirestoreError:Xt,GeoPoint:Jd,Query:df,QueryCompositeFilterConstraint:y_,QueryConstraint:BN,QueryDocumentSnapshot:G2,QueryFieldFilterConstraint:TN,QueryLimitConstraint:N_,QueryOrderByConstraint:w_,QuerySnapshot:Fm,QueryStartAtConstraint:C_,SnapshotMetadata:Dv,Timestamp:lr,VectorValue:Zd,WriteBatch:Hte,_AutoId:t_,_ByteString:co,_DatabaseId:Cb,_DocumentKey:vr,_EmptyAuthCredentialsProvider:pee,_FieldPath:so,_cast:Al,_logWarn:Rg,_validateIsNotUsedTogether:xee,addDoc:Yr,arrayUnion:zte,collection:pt,connectFirestoreEmulator:Ste,deleteDoc:Ja,doc:$t,ensureFirestoreConfigured:m1,executeWrite:b1,getDoc:$h,getDocs:_r,getFirestore:FR,limit:hl,onSnapshot:ar,orderBy:Gt,query:_t,serverTimestamp:qa,setDoc:ii,startAfter:Lte,updateDoc:Ui,where:rr,writeBatch:up},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vte="firebasestorage.googleapis.com",$te="storageBucket",bye=120*1e3,yye=600*1e3,wye=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends uf{constructor(t,r,a=0){super(QB(t),`Firebase Storage: ${r} (${QB(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ps.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return QB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wn||(Wn={}));function QB(e){return"storage/"+e}function VR(){const e="An unknown error occurred, please check the error payload for server response.";return new ps(Wn.UNKNOWN,e)}function Nye(e){return new ps(Wn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Cye(e){return new ps(Wn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Eye(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ps(Wn.UNAUTHENTICATED,e)}function jye(){return new ps(Wn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kye(e){return new ps(Wn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Gte(){return new ps(Wn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qte(){return new ps(Wn.CANCELED,"User canceled the upload/download.")}function Sye(e){return new ps(Wn.INVALID_URL,"Invalid URL '"+e+"'.")}function _ye(e){return new ps(Wn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Bye(){return new ps(Wn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$te+"' property when initializing the app?")}function Kte(){return new ps(Wn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tye(){return new ps(Wn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Iye(){return new ps(Wn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Oye(e){return new ps(Wn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ZO(e){return new ps(Wn.INVALID_ARGUMENT,e)}function Wte(){return new ps(Wn.APP_DELETED,"The Firebase app was deleted.")}function Fye(e){return new ps(Wn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function q2(e,t){return new ps(Wn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Py(e){throw new ps(Wn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=Il.makeFromUrl(t,r)}catch{return new Il(t,"")}if(a.path==="")return a;throw _ye(t)}static makeFromUrl(t,r){let a=null;const n="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+n+o,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${n}/o${h}`,"i"),g={bucket:1,path:3},x=r===Vte?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${n}/${v}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<C.length;T++){const _=C[T],O=_.regex.exec(t);if(O){const j=O[_.indices.bucket];let S=O[_.indices.path];S||(S=""),a=new Il(j,S),_.postModify(a);break}}if(a==null)throw Sye(t);return a}}class Dye{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pye(e,t,r){let a=1,n=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){n=setTimeout(()=>{n=null,e(m,c())},v)}function h(){i&&clearTimeout(i)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||o){h(),d.call(null,v,...y);return}a<64&&(a*=2);let C;l===1?(l=2,C=0):C=(a+Math.random())*1e3,f(C)}let g=!1;function x(v){g||(g=!0,h(),!u&&(n!==null?(v||(l=2),clearTimeout(n),f(0)):v||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,x(!0)},r),x}function Rye(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lye(e){return e!==void 0}function Mye(e){return typeof e=="function"}function Uye(e){return typeof e=="object"&&!Array.isArray(e)}function E_(e){return typeof e=="string"||e instanceof String}function YH(e){return $R()&&e instanceof Blob}function $R(){return typeof Blob<"u"}function eF(e,t,r,a){if(a<t)throw ZO(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>r)throw ZO(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(e,t,r){let a=t;return r==null&&(a=`https://${t}`),`${r}://${a}/v0${e}`}function Xte(e){const t=encodeURIComponent;let r="?";for(const a in e)if(e.hasOwnProperty(a)){const n=t(a)+"="+t(e[a]);r=r+n+"&"}return r=r.slice(0,-1),r}var gg;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(gg||(gg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yte(e,t){const r=e>=500&&e<600,n=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return r||n||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qye{constructor(t,r,a,n,i,o,l,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=a,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(a,n)=>{if(n){a(!1,new yE(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===gg.NO_ERROR,c=i.getStatus();if(!l||Yte(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===gg.ABORT;a(!1,new yE(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;a(!0,new yE(u,i))})},r=(a,n)=>{const i=this.resolve_,o=this.reject_,l=n.connection;if(n.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Lye(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=VR();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(n.canceled){const c=this.appDelete_?Wte():qte();o(c)}else{const c=Gte();o(c)}};this.canceled_?r(!1,new yE(!1,null,!0)):this.backoffId_=Pye(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Rye(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yE{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function Hye(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function zye(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Vye(e,t){t&&(e["X-Firebase-GMPID"]=t)}function $ye(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Gye(e,t,r,a,n,i,o=!0,l=!1){const c=Xte(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return Vye(d,t),Hye(d,r),zye(d,i),$ye(d,a),new Qye(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qye(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Kye(...e){const t=qye();if(t!==void 0){const r=new t;for(let a=0;a<e.length;a++)r.append(e[a]);return r.getBlob()}else{if($R())return new Blob(e);throw new ps(Wn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Wye(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xye(e){if(typeof atob>"u")throw Oye("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HB{constructor(t,r){this.data=t,this.contentType=r||null}}function Yye(e,t){switch(e){case lA.RAW:return new HB(Jte(t));case lA.BASE64:case lA.BASE64URL:return new HB(Zte(e,t));case lA.DATA_URL:return new HB(Zye(t),e2e(t))}throw VR()}function Jte(e){const t=[];for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);if(a<=127)t.push(a);else if(a<=2047)t.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const i=a,o=e.charCodeAt(++r);a=65536|(i&1023)<<10|o&1023,t.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?t.push(239,191,189):t.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(t)}function Jye(e){let t;try{t=decodeURIComponent(e)}catch{throw q2(lA.DATA_URL,"Malformed data URL.")}return Jte(t)}function Zte(e,t){switch(e){case lA.BASE64:{const n=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(n||i)throw q2(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case lA.BASE64URL:{const n=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(n||i)throw q2(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Xye(t)}catch(n){throw n.message.includes("polyfill")?n:q2(e,"Invalid character found")}const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}class ere{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw q2(lA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=r[1]||null;a!=null&&(this.base64=t2e(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=t.substring(t.indexOf(",")+1)}}function Zye(e){const t=new ere(e);return t.base64?Zte(lA.BASE64,t.rest):Jye(t.rest)}function e2e(e){return new ere(e).contentType}function t2e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t,r){let a=0,n="";YH(t)?(this.data_=t,a=t.size,n=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),a=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),a=t.length),this.size_=a,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,r){if(YH(this.data_)){const a=this.data_,n=Wye(a,t,r);return n===null?null:new ph(n)}else{const a=new Uint8Array(this.data_.buffer,t,r-t);return new ph(a,!0)}}static getBlob(...t){if($R()){const r=t.map(a=>a instanceof ph?a.data_:a);return new ph(Kye.apply(null,r))}else{const r=t.map(o=>E_(o)?Yye(lA.RAW,o).data:o.data_);let a=0;r.forEach(o=>{a+=o.byteLength});const n=new Uint8Array(a);let i=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)n[i++]=o[l]}),new ph(n,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(e){let t;try{t=JSON.parse(e)}catch{return null}return Uye(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function a2e(e,t){const r=t.split("/").filter(a=>a.length>0).join("/");return e.length===0?r:e+"/"+r}function tre(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2e(e,t){return t}class jl{constructor(t,r,a,n){this.server=t,this.local=r||t,this.writable=!!a,this.xform=n||n2e}}let wE=null;function s2e(e){return!E_(e)||e.length<2?e:tre(e)}function qR(){if(wE)return wE;const e=[];e.push(new jl("bucket")),e.push(new jl("generation")),e.push(new jl("metageneration")),e.push(new jl("name","fullPath",!0));function t(i,o){return s2e(o)}const r=new jl("name");r.xform=t,e.push(r);function a(i,o){return o!==void 0?Number(o):o}const n=new jl("size");return n.xform=a,e.push(n),e.push(new jl("timeCreated")),e.push(new jl("updated")),e.push(new jl("md5Hash",null,!0)),e.push(new jl("cacheControl",null,!0)),e.push(new jl("contentDisposition",null,!0)),e.push(new jl("contentEncoding",null,!0)),e.push(new jl("contentLanguage",null,!0)),e.push(new jl("contentType",null,!0)),e.push(new jl("metadata","customMetadata",!0)),wE=e,wE}function i2e(e,t){function r(){const a=e.bucket,n=e.fullPath,i=new Il(a,n);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:r})}function o2e(e,t,r){const a={};a.type="file";const n=r.length;for(let i=0;i<n;i++){const o=r[i];a[o.local]=o.xform(a,t[o.server])}return i2e(a,e),a}function rre(e,t,r){const a=GR(t);return a===null?null:o2e(e,a,r)}function l2e(e,t,r,a){const n=GR(t);if(n===null||!E_(n.downloadTokens))return null;const i=n.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+o(d)+"/o/"+o(f),m=nx(h,r,a),g=Xte({alt:"media",token:u});return m+g})[0]}function are(e,t){const r={},a=t.length;for(let n=0;n<a;n++){const i=t[n];i.writable&&(r[i.server]=e[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH="prefixes",ZH="items";function c2e(e,t,r){const a={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[JH])for(const n of r[JH]){const i=n.replace(/\/$/,""),o=e._makeStorageReference(new Il(t,i));a.prefixes.push(o)}if(r[ZH])for(const n of r[ZH]){const i=e._makeStorageReference(new Il(t,n.name));a.items.push(i)}return a}function u2e(e,t,r){const a=GR(r);return a===null?null:c2e(e,t,a)}class dp{constructor(t,r,a,n){this.url=t,this.method=r,this.handler=a,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(e){if(!e)throw VR()}function KR(e,t){function r(a,n){const i=rre(e,n,t);return vA(i!==null),i}return r}function d2e(e,t){function r(a,n){const i=u2e(e,t,n);return vA(i!==null),i}return r}function f2e(e,t){function r(a,n){const i=rre(e,n,t);return vA(i!==null),l2e(i,n,e.host,e._protocol)}return r}function y1(e){function t(r,a){let n;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?n=jye():n=Eye():r.getStatus()===402?n=Cye(e.bucket):r.getStatus()===403?n=kye(e.path):n=a,n.status=r.getStatus(),n.serverResponse=a.serverResponse,n}return t}function WR(e){const t=y1(e);function r(a,n){let i=t(a,n);return a.getStatus()===404&&(i=Nye(e.path)),i.serverResponse=n.serverResponse,i}return r}function A2e(e,t,r){const a=t.fullServerUrl(),n=nx(a,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,l=new dp(n,i,KR(e,r),o);return l.errorHandler=WR(t),l}function h2e(e,t,r,a,n){const i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",r.length>0&&(i.delimiter=r),a&&(i.pageToken=a),n&&(i.maxResults=n);const o=t.bucketOnlyServerUrl(),l=nx(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new dp(l,c,d2e(e,t.bucket),u);return d.urlParams=i,d.errorHandler=y1(t),d}function m2e(e,t,r){const a=t.fullServerUrl(),n=nx(a,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,l=new dp(n,i,f2e(e,r),o);return l.errorHandler=WR(t),l}function p2e(e,t){const r=t.fullServerUrl(),a=nx(r,e.host,e._protocol),n="DELETE",i=e.maxOperationRetryTime;function o(c,u){}const l=new dp(a,n,o,i);return l.successCodes=[200,204],l.errorHandler=WR(t),l}function g2e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function nre(e,t,r){const a=Object.assign({},r);return a.fullPath=e.path,a.size=t.size(),a.contentType||(a.contentType=g2e(null,t)),a}function sre(e,t,r,a,n){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let T=0;T<2;T++)C=C+Math.random().toString().slice(2);return C}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=nre(t,a,n),d=are(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=ph.getBlob(f,a,h);if(m===null)throw Kte();const g={name:u.fullPath},x=nx(i,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,N=new dp(x,v,KR(e,r),y);return N.urlParams=g,N.headers=o,N.body=m.uploadData(),N.errorHandler=y1(t),N}class rk{constructor(t,r,a,n){this.current=t,this.total=r,this.finalized=!!a,this.metadata=n||null}}function XR(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{vA(!1)}return vA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function x2e(e,t,r,a,n){const i=t.bucketOnlyServerUrl(),o=nre(t,a,n),l={name:o.fullPath},c=nx(i,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=are(o,r),h=e.maxUploadRetryTime;function m(x){XR(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{vA(!1)}return vA(E_(v)),v}const g=new dp(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=y1(t),g}function v2e(e,t,r,a){const n={"X-Goog-Upload-Command":"query"};function i(u){const d=XR(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vA(!1)}f||vA(!1);const h=Number(f);return vA(!isNaN(h)),new rk(h,a.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new dp(r,o,i,l);return c.headers=n,c.errorHandler=y1(t),c}const ez=256*1024;function b2e(e,t,r,a,n,i,o,l){const c=new rk(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw Tye();const u=c.total-c.current;let d=u;n>0&&(d=Math.min(d,n));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=a.slice(f,h);if(x===null)throw Kte();function v(T,_){const O=XR(T,["active","final"]),j=c.current+d,S=a.size();let B;return O==="final"?B=KR(t,i)(T,_):B=null,new rk(j,S,O==="final",B)}const y="POST",N=t.maxUploadRetryTime,C=new dp(r,y,v,N);return C.headers=g,C.body=x.uploadData(),C.progressCallback=l||null,C.errorHandler=y1(e),C}const ic={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zB(e){switch(e){case"running":case"pausing":case"canceling":return ic.RUNNING;case"paused":return ic.PAUSED;case"success":return ic.SUCCESS;case"canceled":return ic.CANCELED;case"error":return ic.ERROR;default:return ic.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2e{constructor(t,r,a){if(Mye(t)||r!=null||a!=null)this.next=t,this.error=r??void 0,this.complete=a??void 0;else{const i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class w2e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gg.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gg.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gg.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,a,n,i){if(this.sent_)throw Py("cannot .send() more than once");if(i0(t)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Py("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Py("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Py("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Py("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class N2e extends w2e{initXhr(){this.xhr_.responseType="text"}}function gh(){return new N2e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=a,this._mappings=qR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=n=>{if(this._request=void 0,this._chunkMultiplier=1,n._codeEquals(Wn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(Yte(n.status,[]))if(i)n=Gte();else{this.sleepTime=Math.max(this.sleepTime*2,wye),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=n,this._transition("error")}},this._metadataErrorHandler=n=>{this._request=void 0,n._codeEquals(Wn.CANCELED)?this.completeTransitions_():(this._error=n,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((n,i)=>{this._resolve=n,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,a])=>{switch(this._state){case"running":t(r,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const a=x2e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(a,gh,t,r);this._request=n,n.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,a)=>{const n=v2e(this._ref.storage,this._ref._location,t,this._blob),i=this._ref.storage._makeRequest(n,gh,r,a);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=ez*this._chunkMultiplier,r=new rk(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((n,i)=>{let o;try{o=b2e(this._ref._location,this._ref.storage,a,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,gh,n,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ez*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const a=A2e(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(a,gh,t,r);this._request=n,n.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const a=sre(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(a,gh,t,r);this._request=n,n.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=qte(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=zB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,a,n){const i=new y2e(r||void 0,a||void 0,n||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(zB(this._state)){case ic.SUCCESS:Kx(this._resolve.bind(null,this.snapshot))();break;case ic.CANCELED:case ic.ERROR:const r=this._reject;Kx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(zB(this._state)){case ic.RUNNING:case ic.PAUSED:t.next&&Kx(t.next.bind(t,this.snapshot))();break;case ic.SUCCESS:t.complete&&Kx(t.complete.bind(t))();break;case ic.CANCELED:case ic.ERROR:t.error&&Kx(t.error.bind(t,this._error))();break;default:t.error&&Kx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,r){this._service=t,r instanceof Il?this._location=r:this._location=Il.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Mg(t,r)}get root(){const t=new Il(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tre(this._location.path)}get storage(){return this._service}get parent(){const t=r2e(this._location.path);if(t===null)return null;const r=new Il(this._location.bucket,t);return new Mg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Fye(t)}}function E2e(e,t,r){e._throwIfRoot("uploadBytes");const a=sre(e.storage,e._location,qR(),new ph(t,!0),r);return e.storage.makeRequestWithTokens(a,gh).then(n=>({metadata:n,ref:e}))}function j2e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new C2e(e,new ph(t),r)}function k2e(e){const t={prefixes:[],items:[]};return ire(e,t).then(()=>t)}async function ire(e,t,r){const n=await S2e(e,{pageToken:r});t.prefixes.push(...n.prefixes),t.items.push(...n.items),n.nextPageToken!=null&&await ire(e,t,n.nextPageToken)}function S2e(e,t){t!=null&&typeof t.maxResults=="number"&&eF("options.maxResults",1,1e3,t.maxResults);const r=t||{},a=h2e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(a,gh)}function _2e(e){e._throwIfRoot("getDownloadURL");const t=m2e(e.storage,e._location,qR());return e.storage.makeRequestWithTokens(t,gh).then(r=>{if(r===null)throw Iye();return r})}function B2e(e){e._throwIfRoot("deleteObject");const t=p2e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,gh)}function T2e(e,t){const r=a2e(e._location.path,t),a=new Il(e._location.bucket,r);return new Mg(e.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2e(e){return/^[A-Za-z]+:\/\//.test(e)}function O2e(e,t){return new Mg(e,t)}function ore(e,t){if(e instanceof YR){const r=e;if(r._bucket==null)throw Bye();const a=new Mg(r,r._bucket);return t!=null?ore(a,t):a}else return t!==void 0?T2e(e,t):e}function F2e(e,t){if(t&&I2e(t)){if(e instanceof YR)return O2e(e,t);throw ZO("To use ref(service, url), the first argument must be a Storage instance.")}else return ore(e,t)}function tz(e,t){const r=t==null?void 0:t[$te];return r==null?null:Il.makeFromBucketSpec(r,e)}function D2e(e,t,r,a={}){e.host=`${t}:${r}`;const n=i0(t);n&&(KS(`https://${e.host}/b`),WS("Storage",!0)),e._isUsingEmulator=!0,e._protocol=n?"https":"http";const{mockUserToken:i}=a;i&&(e._overrideAuthToken=typeof i=="string"?i:wZ(i,e.app.options.projectId))}class YR{constructor(t,r,a,n,i,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=n,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Vte,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bye,this._maxUploadRetryTime=yye,this._requests=new Set,n!=null?this._bucket=Il.makeFromBucketSpec(n,this._host):this._bucket=tz(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Il.makeFromBucketSpec(this._url,t):this._bucket=tz(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){eF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){eF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Zc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Mg(this,t)}_makeRequest(t,r,a,n,i=!0){if(this._deleted)return new Dye(Wte());{const o=Gye(t,this._appId,a,n,r,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,n).getPromise()}}const rz="@firebase/storage",az="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre="storage";function j_(e,t,r){return e=Ga(e),E2e(e,t,r)}function cre(e,t,r){return e=Ga(e),j2e(e,t,r)}function P2e(e){return e=Ga(e),k2e(e)}function w1(e){return e=Ga(e),_2e(e)}function JR(e){return e=Ga(e),B2e(e)}function l0(e,t){return e=Ga(e),F2e(e,t)}function ZR(e=XS(),t){e=Ga(e);const a=yN(e,lre).getImmediate({identifier:t}),n=WP("storage");return n&&R2e(a,...n),a}function R2e(e,t,r,a={}){D2e(e,t,r,a)}function L2e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new YR(r,a,n,t,Zg)}function M2e(){Vm(new Uh(lre,L2e,"PUBLIC").setMultipleInstances(!0)),sd(rz,az,""),sd(rz,az,"esm2020")}M2e();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2e="type.googleapis.com/google.protobuf.Int64Value",Q2e="type.googleapis.com/google.protobuf.UInt64Value";function ure(e,t){const r={};for(const a in e)e.hasOwnProperty(a)&&(r[a]=t(e[a]));return r}function ak(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>ak(t));if(typeof e=="function"||typeof e=="object")return ure(e,t=>ak(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Ib(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case U2e:case Q2e:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Ib(t)):typeof e=="function"||typeof e=="object"?ure(e,t=>Ib(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pc extends uf{constructor(t,r,a){super(`${e8}/${t}`,r||""),this.details=a,Object.setPrototypeOf(this,pc.prototype)}}function H2e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function nk(e,t){let r=H2e(e),a=r,n;try{const i=t&&t.error;if(i){const o=i.status;if(typeof o=="string"){if(!nz[o])return new pc("internal","internal");r=nz[o],a=o}const l=i.message;typeof l=="string"&&(a=l),n=i.details,n!==void 0&&(n=Ib(n))}}catch{}return r==="ok"?null:new pc(r,a,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2e{constructor(t,r,a,n){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Zc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||r.get().then(i=>this.auth=i,()=>{}),this.messaging||a.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),a=await this.getMessagingToken(),n=await this.getAppCheckToken(t);return{authToken:r,messagingToken:a,appCheckToken:n}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF="us-central1",V2e=/^data: (.*?)(?:\n|$)/;function $2e(e){let t=null;return{promise:new Promise((r,a)=>{t=setTimeout(()=>{a(new pc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class G2e{constructor(t,r,a,n,i=tF,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new z2e(t,r,a,n),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=tF}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function q2e(e,t,r){const a=i0(t);e.emulatorOrigin=`http${a?"s":""}://${t}:${r}`,a&&(KS(e.emulatorOrigin),WS("Functions",!0))}function K2e(e,t,r){const a=n=>X2e(e,t,n,{});return a.stream=(n,i)=>J2e(e,t,n,i),a}async function W2e(e,t,r,a){r["Content-Type"]="application/json";let n;try{n=await a(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await n.json()}catch{}return{status:n.status,json:i}}async function dre(e,t){const r={},a=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return a.authToken&&(r.Authorization="Bearer "+a.authToken),a.messagingToken&&(r["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=a.appCheckToken),r}function X2e(e,t,r,a){const n=e._url(t);return Y2e(e,n,r,a)}async function Y2e(e,t,r,a){r=ak(r);const n={data:r},i=await dre(e,a),o=a.timeout||7e4,l=$2e(o),c=await Promise.race([W2e(t,n,i,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new pc("cancelled","Firebase Functions instance was deleted.");const u=nk(c.status,c.json);if(u)throw u;if(!c.json)throw new pc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new pc("internal","Response is missing data field.");return{data:Ib(d)}}function J2e(e,t,r,a){const n=e._url(t);return Z2e(e,n,r,a||{})}async function Z2e(e,t,r,a){var h;r=ak(r);const n={data:r},i=await dre(e,a);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:i,signal:a==null?void 0:a.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new pc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=nk(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=a==null?void 0:a.signal)==null||h.addEventListener("abort",()=>{const m=new pc("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=ewe(d,l,c,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function ewe(e,t,r,a){const n=(o,l)=>{const c=o.match(V2e);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(Ib(d.result));return}if("message"in d){l.enqueue(Ib(d.message));return}if("error"in d){const f=nk(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof pc){l.error(d),r(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(a!=null&&a.aborted){const u=new pc("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&n(l.trim(),o),o.close();return}if(a!=null&&a.aborted){const h=new pc("cancelled","Request was cancelled");o.error(h),r(h),await e.cancel();return}l+=i.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const h of f)h.trim()&&n(h.trim(),o);return c()}catch(u){const d=u instanceof pc?u:nk(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const sz="@firebase/functions",iz="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const twe="auth-internal",rwe="app-check-internal",awe="messaging-internal";function nwe(e){const t=(r,{instanceIdentifier:a})=>{const n=r.getProvider("app").getImmediate(),i=r.getProvider(twe),o=r.getProvider(awe),l=r.getProvider(rwe);return new G2e(n,i,o,l,a)};Vm(new Uh(e8,t,"PUBLIC").setMultipleInstances(!0)),sd(sz,iz,e),sd(sz,iz,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(e=XS(),t=tF){const a=yN(Ga(e),e8).getImmediate({identifier:t}),n=WP("functions");return n&&swe(a,...n),a}function swe(e,t,r){q2e(Ga(e),t,r)}function lc(e,t,r){return K2e(Ga(e),t)}nwe();const iwe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},N1=JP(iwe),jn=oee(N1),Ar=FR(N1),IN=ZR(N1),Sw=mh(N1,"us-central1"),fre=Object.freeze(Object.defineProperty({__proto__:null,app:N1,auth:jn,db:Ar,functions:Sw,storage:IN},Symbol.toStringTag,{value:"Module"})),owe=async(e,t)=>{try{return(await exe(jn,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},VB=async()=>{try{await axe(jn)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},lwe=async e=>{try{await Zge(jn,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},Are=async e=>{try{const t=$t(Ar,"usuarios",e),r=await $h(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uwe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),oz=e=>{const t=uwe(e);return t.charAt(0).toUpperCase()+t.slice(1)},hre=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),dwe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fwe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Awe=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...fwe,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:hre("lucide",n),...!i&&!dwe(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(e,t)=>{const r=w.forwardRef(({className:a,...n},i)=>w.createElement(Awe,{ref:i,iconNode:t,className:hre(`lucide-${cwe(oz(e))}`,`lucide-${e}`,a),...n}));return r.displayName=oz(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],mwe=jt("activity",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],NE=jt("arrow-left",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gwe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],xwe=jt("arrow-up-down",gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vwe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],bwe=jt("award",vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],wwe=jt("bell-ring",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Cwe=jt("bell",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ewe=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],jwe=jt("book-marked",Ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Swe=jt("book-open-check",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _we=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ds=jt("book-open",_we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],lz=jt("book",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Iwe=jt("brain-circuit",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],_w=jt("brain",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ob=jt("briefcase",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dwe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Zv=jt("building-2",Dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Rwe=jt("building",Pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],t8=jt("calculator",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],r8=jt("calendar-check",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Io=jt("calendar",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qwe=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Hwe=jt("camera",Qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zwe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fl=jt("chart-column",zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],$we=jt("chart-line",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],qwe=jt("chart-no-axes-column-increasing",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],mre=jt("chart-no-axes-column",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],eb=jt("chart-pie",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xwe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pre=jt("check",Xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rF=jt("chevron-down",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jwe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bw=jt("chevron-left",Jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zwe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],k_=jt("chevron-right",Zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vc=jt("circle-alert",eNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tNe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ON=jt("circle-check-big",tNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cn=jt("circle-check",rNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aNe=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nNe=jt("circle-play",aNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],CE=jt("circle-plus",sNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gre=jt("circle-question-mark",iNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],nA=jt("circle-x",oNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cNe=jt("circle",lNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uNe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],v2=jt("clipboard-check",uNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dNe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Gh=jt("clipboard-list",dNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fNe=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ANe=jt("clock-3",fNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hNe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ac=jt("clock",hNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mNe=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],cz=jt("cloud-upload",mNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pNe=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],gNe=jt("cog",pNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xNe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],of=jt("download",xNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vNe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],xg=jt("external-link",vNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bNe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yNe=jt("eye-off",bNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wNe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tb=jt("eye",wNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NNe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],CNe=jt("factory",NNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ENe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],aF=jt("file-check",ENe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jNe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],kNe=jt("file-down",jNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SNe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],_Ne=jt("file-pen",SNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BNe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],TNe=jt("file-play",BNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const INe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],S_=jt("file-spreadsheet",INe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ONe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Pl=jt("file-text",ONe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FNe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],$B=jt("files",FNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DNe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],xre=jt("film",DNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PNe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],RNe=jt("folder-closed",PNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LNe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],uz=jt("folder-open",LNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MNe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],UNe=jt("folder",MNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QNe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],FN=jt("funnel",QNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HNe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],sk=jt("gauge",HNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],VNe=jt("globe",zNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ne=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ym=jt("graduation-cap",$Ne);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GNe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],qNe=jt("hash",GNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KNe=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],WNe=jt("heart",KNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XNe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],vre=jt("hourglass",XNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YNe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ik=jt("image",YNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ZNe=jt("info",JNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eCe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],bre=jt("layout-dashboard",eCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tCe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],__=jt("layers",tCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rCe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],aCe=jt("layout-grid",rCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nCe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],sCe=jt("layout-list",nCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iCe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],oCe=jt("lightbulb",iCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lCe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],dz=jt("link-2",lCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cCe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ok=jt("link",cCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uCe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],rb=jt("list-checks",uCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dCe=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],fCe=jt("list-ordered",dCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ACe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Di=jt("loader-circle",ACe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hCe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],yre=jt("mail",hCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mCe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Tw=jt("map-pin",mCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pCe=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],gCe=jt("map",pCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xCe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],wre=jt("megaphone",xCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vCe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],bCe=jt("menu",vCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yCe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],DN=jt("message-square",yCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wCe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],fz=jt("notebook-pen",wCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NCe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],CCe=jt("palette",NCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],b2=jt("paperclip",ECe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jCe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Iw=jt("pen-line",jCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kCe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],B_=jt("pencil",kCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SCe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],_Ce=jt("percent",SCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BCe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],TCe=jt("phone",BCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ICe=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],nF=jt("pin",ICe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OCe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Li=jt("plus",OCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FCe=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],sF=jt("presentation",FCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DCe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],PCe=jt("puzzle",DCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RCe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],iF=jt("refresh-ccw",RCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LCe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bA=jt("refresh-cw",LCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MCe=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],UCe=jt("rocket",MCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QCe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],HCe=jt("route",QCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zCe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],VCe=jt("ruler",zCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ce=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gl=jt("save",$Ce);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GCe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],wm=jt("school",GCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qCe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Az=jt("scroll-text",qCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KCe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],C1=jt("search",KCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WCe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Nre=jt("send",WCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XCe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cre=jt("settings",XCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YCe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JCe=jt("shield-check",YCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],vg=jt("sparkles",ZCe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eEe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wh=jt("square-pen",eEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tEe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],oF=jt("square-plus",tEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rEe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ere=jt("star",rEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],nEe=jt("tag",aEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fb=jt("target",sEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iEe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Da=jt("trash-2",iEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],lk=jt("trending-up",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lEe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Db=jt("triangle-alert",lEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],uEe=jt("university",cEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dEe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],E1=jt("upload",dEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hz=jt("user-cog",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mz=jt("user-minus",AEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ck=jt("user-plus",hEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],pEe=jt("user-round",mEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gEe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pb=jt("user",gEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xEe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Sv=jt("users-round",xEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ei=jt("users",vEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bEe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],tu=jt("video",bEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yEe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],jre=jt("wand-sparkles",yEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wEe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],K2=jt("wrench",wEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NEe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oo=jt("x",NEe);var Mt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Mt||{}),sa=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(sa||{}),tg=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(tg||{});const CEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),EEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Ms="w-5 h-5",T_="w-16 h-16",a8=()=>s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),jEe=({className:e,...t})=>s.jsxs("svg",{className:e??"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("path",{d:"M9 18h6"}),s.jsx("path",{d:"M10 22h4"}),s.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),kEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),n5=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),y2=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),w2=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),kre=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),SEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:T_,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),_Ee=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:T_,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),BEe=()=>s.jsx(gNe,{className:T_}),TEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:T_,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),IEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Ry=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),EE=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),jE=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),kE=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Wx=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),pz=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),OEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),FEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),DEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),PEe=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),SE=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),REe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),GB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),LEe=()=>s.jsx(K2,{className:Ms}),MEe=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ms,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),gz=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ms,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),_E=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ms,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),UEe=[{id:Mt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:s.jsx(SEe,{})},{id:Mt.PROFESORADO,label:"Profesorado",icon:s.jsx(_Ee,{})},{id:Mt.COORDINACION_TP,label:"Coordinación TP",icon:s.jsx(BEe,{})},{id:Mt.ESTUDIANTE,label:"Estudiantes",icon:s.jsx(TEe,{})}],QEe={[Mt.SUBDIRECCION]:[{name:"Intranet",icon:s.jsx(n5,{})},{name:"Dashboard",icon:s.jsx(IEe,{})},{name:"Administración",icon:s.jsx(PEe,{})},{name:"Horario del liceo",icon:s.jsx(jE,{})},{name:"Multicopias",icon:s.jsx(Ry,{})},{name:"Evaluación de Ensayo",icon:s.jsx(Wx,{})},{name:"Seguimiento Curricular",icon:s.jsx(MEe,{})},{name:"Acompañamiento docente",icon:s.jsx(DEe,{})},{name:"Análisis Taxonómico",icon:s.jsx(gz,{})},{name:"SIMCE",icon:s.jsx(_E,{})},{name:"Interdisciplinario",icon:s.jsx(GB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:s.jsx(Ry,{})},{name:"Crear horarios",icon:s.jsx(jE,{})},{name:"Seguimiento de acciones pedagógicas",icon:s.jsx(kE,{})},{name:"Inclusión",icon:s.jsx(SE,{})},{name:"Calendario Académico",icon:s.jsx(EE,{})},{name:"Muro de Anuncios",icon:s.jsx(y2,{})},{name:"Mensajería Interna",icon:s.jsx(w2,{})},{name:"Generador de Actas",icon:s.jsx(Wx,{})}],[Mt.PROFESORADO]:[{name:"Intranet",icon:s.jsx(n5,{})},{name:"Planificación",icon:s.jsx(pz,{})},{name:"Mis Acompañamientos",icon:s.jsx(REe,{})},{name:"Recursos de Aprendizaje",icon:s.jsx(OEe,{})},{name:"Análisis Taxonómico",icon:s.jsx(gz,{})},{name:"SIMCE",icon:s.jsx(_E,{})},{name:"Interdisciplinario",icon:s.jsx(GB,{})},{name:"Inclusión",icon:s.jsx(SE,{})},{name:"Multicopias",icon:s.jsx(Ry,{})},{name:"Actividades Remotas",icon:s.jsx(FEe,{})},{name:"Evaluación de Ensayo",icon:s.jsx(Wx,{})},{name:"Evaluación de Aprendizajes",icon:s.jsx(Wx,{})},{name:"Evaluaciones Formativas",icon:s.jsx(kE,{})},{name:"Desarrollo Profesional",icon:s.jsx(SE,{})},{name:"Evaluación de Competencias",icon:s.jsx(EEe,{})},{name:"Calendario Académico",icon:s.jsx(EE,{})},{name:"Muro de Anuncios",icon:s.jsx(y2,{})},{name:"Mensajería Interna",icon:s.jsx(w2,{})},{name:"Generador de Actas",icon:s.jsx(Ry,{})}],[Mt.COORDINACION_TP]:[{name:"Intranet",icon:s.jsx(n5,{})},{name:"Seguimiento Dual",icon:s.jsx(kE,{})},{name:"Asistencia Dual",icon:s.jsx(jE,{})},{name:"Pañol",icon:s.jsx(LEe,{})},{name:"SIMCE",icon:s.jsx(_E,{})},{name:"Evaluación de Ensayo",icon:s.jsx(Wx,{})},{name:"Multicopias",icon:s.jsx(Ry,{})},{name:"Gestión de Empresas",icon:s.jsx(CEe,{})},{name:"Calendario Académico",icon:s.jsx(EE,{})},{name:"Muro de Anuncios",icon:s.jsx(y2,{})},{name:"Mensajería Interna",icon:s.jsx(w2,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:s.jsx(SE,{})},{name:"Generador de Actas",icon:s.jsx(Wx,{})}],[Mt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:s.jsx(pz,{})},{name:"Evaluación Formativa",icon:s.jsx(kE,{})},{name:"SIMCE",icon:s.jsx(_E,{})},{name:"Tareas Interdisciplinarias",icon:s.jsx(GB,{})},{name:"Asistencia a Empresa",icon:s.jsx(jE,{})},{name:"Calendario Académico",icon:s.jsx(EE,{})},{name:"Muro de Anuncios",icon:s.jsx(y2,{})},{name:"Mensajería Interna",icon:s.jsx(w2,{})}]},Nh=["1º Medio","2º Medio","3º Medio","4º Medio"],ln=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],on=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],lF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],yA=["Lunes","Martes","Miércoles","Jueves","Viernes"],Bs=[{bloque:1,inicio:"08:30",fin:"09:10"},{bloque:2,inicio:"09:10",fin:"09:50"},{bloque:3,inicio:"10:10",fin:"10:50"},{bloque:4,inicio:"10:50",fin:"11:30"},{bloque:5,inicio:"11:40",fin:"12:20"},{bloque:6,inicio:"12:20",fin:"13:00"},{bloque:7,inicio:"13:40",fin:"14:20"},{bloque:8,inicio:"14:20",fin:"15:00"},{bloque:9,inicio:"15:10",fin:"15:50"},{bloque:10,inicio:"15:50",fin:"16:30"}],ab={[sa.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[sa.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[sa.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[sa.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},HEe=Object.values(tg),qB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],KB=["Vinculado","Desvinculado","En proceso","Empresa"],bg=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],zEe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],uk=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],W2=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],Sre=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],BE=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],VEe=["Mecánica Industrial","Mecánica Automotriz"],$Ee=["INACAP","UNAB","DUOC","Universidad de Las Américas"],GEe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},qEe=["Pasantía","Visita","Certificación","Formación en empresa"],KEe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},WEe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},xh={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},xz=["Pendiente","En Proceso","Cumplida"],vz=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],XEe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState("login"),u=h=>{h.preventDefault(),e(a,i)},d=h=>{h.preventDefault(),t(a),c("forgot_sent")},f=()=>l==="forgot"?s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:h=>n(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),s.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",s.jsx("strong",{children:a}),", hemos enviado un enlace para restablecer su contraseña."]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),s.jsx("button",{type:"button",onClick:()=>{c("login"),n("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:h=>n(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:h=>o(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&s.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:s.jsx("p",{children:r})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("div",{className:"mb-4 flex justify-center items-center",children:s.jsx(a8,{})}),s.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),s.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),s.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},TE=({trigger:e,children:t,onOpen:r})=>{const[a,n]=w.useState(!1),i=w.useRef(null),o=()=>{const c=!a;n(c),c&&r&&r()},l=c=>{i.current&&!i.current.contains(c.target)&&n(!1)};return w.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),s.jsxs("div",{className:"relative",ref:i,children:[s.jsx("div",{onClick:o,children:e}),a&&s.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>n(!1),children:t})]})},bz="usuariosLiceo",YEe=({user:e,onClose:t,onSave:r})=>{const[a,n]=w.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),i=l=>{n({...a,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...a};try{const u=localStorage.getItem(bz);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(bz,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:s.jsxs("form",{onSubmit:o,children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),s.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:a.fotoUrl,onChange:i,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),s.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:a.nombreCompleto,onChange:i,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),s.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:i,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),s.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},yz="usuariosLiceo",JEe=({user:e,onClose:t,onSave:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState(null),u=d=>{if(d.preventDefault(),c(null),!a){c("La contraseña no puede estar en blanco.");return}if(a!==i){c("Las contraseñas no coinciden.");return}const f={...e,password:a};try{const h=localStorage.getItem(yz);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(yz,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),s.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:a,onChange:d=>n(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:i,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&s.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:s.jsx("p",{children:l})})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};async function _re(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:qa()};return Object.keys(t).forEach(a=>t[a]===void 0&&delete t[a]),(await Yr(pt(Ar,"notificaciones"),t)).id}function ZEe(e,t){const r=[];let a=[],n=[];const i=()=>{const o=new Map;[...a,...n].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=_t(pt(Ar,"notificaciones"),rr("docenteEmailLower","==",e.email.toLowerCase()),Gt("createdAt","desc"));r.push(ar(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),i()}))}if(e.nombreCompleto){const o=_t(pt(Ar,"notificaciones"),rr("docenteNombre","==",e.nombreCompleto),Gt("createdAt","desc"));r.push(ar(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),i()}))}return()=>r.forEach(o=>o())}async function eje(e){const t=$t(Ar,"notificaciones",e);await Ui(t,{leida:!0})}async function tje(e){const t=$t(Ar,"notificaciones",e);await Ja(t)}const wz="anunciosMuro",Nz="mensajesInternos",Cz="lir-read-status",rje=({user:e})=>{if(e.fotoUrl)return s.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(a=>a).map(a=>a[0]).join("").toUpperCase();return s.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},aje=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:a,onChangeProfile:n,canChangeProfile:i,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=w.useState([]),[f,h]=w.useState([]),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),C=w.useCallback(()=>{try{const B=localStorage.getItem(`${Cz}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),T=w.useCallback(B=>{try{localStorage.setItem(`${Cz}-${e.id}`,JSON.stringify(B))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);w.useEffect(()=>{const B=JSON.parse(localStorage.getItem(wz)||"[]"),L=C();d(B.filter(k=>!L.announcements.includes(k.id)));const D=JSON.parse(localStorage.getItem(Nz)||"[]");h(D.filter(k=>k.para===e.email).sort((k,R)=>new Date(R.fecha).getTime()-new Date(k.fecha).getTime()).slice(0,5))},[e.id,C,l]),w.useEffect(()=>{if(!((e==null?void 0:e.profile)===Mt.SUBDIRECCION||(e==null?void 0:e.profile)===Mt.PROFESORADO)||!(e!=null&&e.email))return;const L=ZEe({email:e.email,nombreCompleto:e.nombreCompleto},D=>{const k=D.filter(R=>R.tipo&&(R.tipo.toLowerCase()==="pie"||R.tipo==="nueva_intervencion"));N(k)});return()=>L()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto,e==null?void 0:e.profile]);const _=()=>{const B=C(),L=JSON.parse(localStorage.getItem(wz)||"[]").map(D=>D.id);B.announcements=L,T(B),d([])},O=()=>{const B=C(),D=JSON.parse(localStorage.getItem(Nz)||"[]").filter(k=>k.para===e.email).map(k=>k.id);B.messages=[...new Set([...B.messages,...D])],T(B),c()},j=y.filter(B=>!B.leida).length,S=B=>{var L;try{const D=(L=B.createdAt)!=null&&L.toDate?B.createdAt.toDate():new Date(B.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:s.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:s.jsx(kEe,{})}),s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),s.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),s.jsx("div",{className:"flex-1 flex justify-center",children:s.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:s.jsx(n5,{})})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(TE,{onOpen:_,trigger:s.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[s.jsx(y2,{}),u.length>0&&s.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:s.jsxs("div",{className:"p-2",children:[s.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),s.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>s.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&s.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),s.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),(e.profile===Mt.SUBDIRECCION||e.profile===Mt.PROFESORADO)&&s.jsx(TE,{trigger:s.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[s.jsx(PCe,{className:"w-5 h-5"}),j>0&&s.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:j})]}),children:s.jsxs("div",{className:"p-2 w-80",children:[s.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),s.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&s.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>s.jsx("li",{className:"p-2 text-sm",children:s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),s.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",s.jsx("b",{children:B.estudianteNombre})]}),s.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:S(B)})]}),s.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&s.jsx("button",{onClick:()=>B.id&&eje(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),s.jsx("button",{onClick:()=>B.id&&tje(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),s.jsx(TE,{onOpen:O,trigger:s.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[s.jsx(w2,{}),l>0&&s.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:s.jsxs("div",{className:"p-2",children:[s.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),s.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>s.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&s.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),s.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),s.jsx(TE,{trigger:s.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:s.jsx(rje,{user:e})}),children:s.jsxs("div",{className:"p-2",children:[s.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),s.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[s.jsx("li",{children:s.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),i&&s.jsx("li",{children:s.jsx("button",{onClick:n,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),s.jsx("li",{children:s.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&s.jsx(YEe,{user:e,onClose:()=>g(!1),onSave:a}),x&&s.jsx(JEe,{user:e,onClose:()=>v(!1),onSave:a})]})},nje={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},n8=_Q().length?_Q()[0]:JP(nje),ot=FR(n8),Ow=oee(n8),I_=ZR(n8),s8=Object.freeze(Object.defineProperty({__proto__:null,auth:Ow,db:ot,storage:I_},Symbol.toStringTag,{value:"Module"})),O_="reemplazos_docentes",sje="usuarios",Bre=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((i=(n=t.fechaActualizacion)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString())||t.fechaActualizacion}},ije=e=>{const t=e.data();return{id:e.id,...t}},oje=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:lr.fromDate(new Date),fechaActualizacion:lr.fromDate(new Date)};return(await Yr(pt(ot,O_),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},lje=async(e,t)=>{try{const r=$t(ot,O_,e),a=await $h(r);if(!a.exists()||a.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Ja(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},cje=(e,t,r=50)=>{try{const a=_t(pt(ot,O_),rr("userId","==",e),Gt("diaAusencia","desc"),hl(r));return ar(a,n=>{const i=n.docs.map(Bre);t(i)},n=>{console.error("Error en suscripción a reemplazos:",n),t([])})}catch(a){return console.error("Error al crear la suscripción de reemplazos:",a),()=>{}}},uje=e=>{try{const t=_t(pt(ot,sje),rr("profile","==",Mt.PROFESORADO));return ar(t,a=>{const n=a.docs.map(ije);e(n)},a=>{console.error("Error al obtener la lista de profesores:",a),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},dje=async(e,t)=>{try{if(!t.trim())return[];const r=_t(pt(ot,O_),rr("userId","==",e),Gt("diaAusencia","desc"),hl(100)),n=(await _r(r)).docs.map(Bre),i=t.toLowerCase();return n.filter(o=>o.docenteAusente.toLowerCase().includes(i)||o.docenteReemplazante.toLowerCase().includes(i)||o.curso.toLowerCase().includes(i)||o.diaAusencia.includes(i)||o.asignaturaAusente.toLowerCase().includes(i)||o.asignaturaReemplazante.toLowerCase().includes(i))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var dk={};dk.version="0.18.5";var Tre=1252,fje=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],i8={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},o8=function(e){fje.indexOf(e)!=-1&&(Tre=i8[0]=e)};function Aje(){o8(1252)}var Gd=function(e){o8(e)};function l8(){Gd(1200),Aje()}function Ez(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function hje(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Ire(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var N2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?hje(e.slice(2)):t==254&&r==255?Ire(e.slice(2)):t==65279?e.slice(1):e},IE=function(t){return String.fromCharCode(t)},jz=function(t){return String.fromCharCode(t)},Fw,Nm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Dw(e){for(var t="",r=0,a=0,n=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),o=(r&3)<<4|a>>4,n=e.charCodeAt(u++),l=(a&15)<<2|n>>6,c=n&63,isNaN(a)?l=c=64:isNaN(n)&&(c=64),t+=Nm.charAt(i)+Nm.charAt(o)+Nm.charAt(l)+Nm.charAt(c);return t}function cu(e){var t="",r=0,a=0,n=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Nm.indexOf(e.charAt(u++)),o=Nm.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Nm.indexOf(e.charAt(u++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=Nm.indexOf(e.charAt(u++)),n=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(n));return t}var da=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),c0=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Jm(e){return da?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function kz(e){return da?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ru=function(t){return da?c0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function F_(e){if(typeof ArrayBuffer>"u")return ru(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function fp(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function mje(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function c8(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return c8(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var io=da?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:c0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function pje(e){for(var t=[],r=0,a=e.length+250,n=Jm(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)n[r++]=o;else if(o<2048)n[r++]=192|o>>6&31,n[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;n[r++]=240|o>>8&7,n[r++]=128|o>>2&63,n[r++]=128|l>>6&15|(o&3)<<4,n[r++]=128|l&63}else n[r++]=224|o>>12&15,n[r++]=128|o>>6&63,n[r++]=128|o&63;r>a&&(t.push(n.slice(0,r)),r=0,n=Jm(65535),a=65530)}return t.push(n.slice(0,r)),io(t)}var Rl=/\u0000/g,C2=/[\u0001-\u0006]/g;function nb(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function qd(e,t){var r=""+e;return r.length>=t?r:Ts("0",t-r.length)+r}function u8(e,t){var r=""+e;return r.length>=t?r:Ts(" ",t-r.length)+r}function fk(e,t){var r=""+e;return r.length>=t?r:r+Ts(" ",t-r.length)}function gje(e,t){var r=""+Math.round(e);return r.length>=t?r:Ts("0",t-r.length)+r}function xje(e,t){var r=""+e;return r.length>=t?r:Ts("0",t-r.length)+r}var Sz=Math.pow(2,32);function Xx(e,t){if(e>Sz||e<-Sz)return gje(e,t);var r=Math.round(e);return xje(r,t)}function Ak(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var _z=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],WB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function vje(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Dr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},Bz={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bje={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hk(e,t,r){for(var a=e<0?-1:1,n=e*a,i=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(n);u<t&&(f=Math.floor(n),l=f*o+i,d=f*u+c,!(n-f<5e-8));)n=1/(n-f),i=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=o)),!r)return[0,a*l,d];var h=Math.floor(a*l/d);return[h,a*l-h*d,d]}function lg(e,t,r){if(e>2958465||e<0)return null;var a=e|0,n=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:n,u:86400*(e-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++n==86400&&(l.T=n=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=jje(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=n%60,n=Math.floor(n/60),l.M=n%60,n=Math.floor(n/60),l.H=n,l.q=i,l}var Ore=new Date(1899,11,31,0,0,0),yje=Ore.getTime(),wje=new Date(1900,2,1,0,0,0);function Fre(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=wje&&(r+=1440*60*1e3),(r-(yje+(e.getTimezoneOffset()-Ore.getTimezoneOffset())*6e4))/(1440*60*1e3)}function d8(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Nje(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Cje(e){var t=e<0?12:11,r=d8(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Eje(e){var t=d8(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Pw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Cje(e):t===10?r=e.toFixed(10).substr(0,12):r=Eje(e),d8(Nje(r.toUpperCase()))}function Ug(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Pw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return od(14,Fre(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function jje(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function kje(e,t,r,a){var n="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return WB[r.m-1][1];case 5:return WB[r.m-1][0];default:return WB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return _z[r.q][0];default:return _z[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?qd(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(n=qd(i,2+a),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?qd(c,u):"";return d}function Cm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var Dre=/%/g;function Sje(e,t,r){var a=t.replace(Dre,""),n=t.length-a.length;return Oh(e,a,r*Math.pow(10,2*n))+Ts("%",n)}function _je(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Oh(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Pre(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Pre(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(t/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(n+i)%n)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Rre=/# (\?+)( ?)\/( ?)(\d+)/;function Bje(e,t,r){var a=parseInt(e[4],10),n=Math.round(t*a),i=Math.floor(n/a),o=n-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Ts(" ",e[1].length+1+e[4].length):u8(o,e[1].length)+e[2]+"/"+e[3]+qd(l,e[4].length))}function Tje(e,t,r){return r+(t===0?"":""+t)+Ts(" ",e[1].length+2+e[4].length)}var Lre=/^#*0*\.([0#]+)/,Mre=/\).*[0#]/,Ure=/\(###\) ###\\?-####/;function _l(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function Tz(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function Iz(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Ije(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Oje(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Vu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Mre)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Vu("n",a,r):"("+Vu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return _je(e,t,r);if(t.indexOf("%")!==-1)return Sje(e,t,r);if(t.indexOf("E")!==-1)return Pre(t,r);if(t.charCodeAt(0)===36)return"$"+Vu(e,t.substr(t.charAt(1)==" "?2:1),r);var n,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Xx(c,t.length);if(t.match(/^[#?]+$/))return n=Xx(r,0),n==="0"&&(n=""),n.length>t.length?n:_l(t.substr(0,t.length-n.length))+n;if(i=t.match(Rre))return Bje(i,c,u);if(t.match(/^#+0+$/))return u+Xx(c,t.length-t.indexOf("0"));if(i=t.match(Lre))return n=Tz(r,i[1].length).replace(/^([^\.]+)$/,"$1."+_l(i[1])).replace(/\.$/,"."+_l(i[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ts("0",_l(i[1]).length-x.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+Tz(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Cm(Xx(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Vu(e,t,-r):Cm(""+(Math.floor(r)+Ije(r,i[1].length)))+"."+qd(Iz(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Vu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=nb(Vu(e,t.replace(/[\\-]/g,""),r)),o=0,nb(nb(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<n.length?n.charAt(o++):g==="0"?"0":""}));if(t.match(Ure))return n=Vu(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=hk(c,Math.pow(10,o)-1,!1),n=""+u,d=Oh("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+i[2]+"/"+i[3],d=fk(l[2],o),d.length<i[4].length&&(d=_l(i[4].substr(i[4].length-d.length))+d),n+=d,n;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=hk(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?u8(l[1],o)+i[2]+"/"+i[3]+fk(l[2],o):Ts(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return n=Xx(r,0),t.length<=n.length?n:_l(t.substr(0,t.length-n.length))+n;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var f=t.indexOf(".")-o,h=t.length-n.length-f;return _l(t.substr(0,f)+n+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=Iz(r,i[1].length),r<0?"-"+Vu(e,t,-r):Cm(Oje(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?qd(0,3-g.length):"")+g})+"."+qd(o,i[1].length);switch(t){case"###,##0.00":return Vu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Cm(Xx(c,0));return m!=="0"?u+m:"";case"###,###.00":return Vu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Vu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Fje(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Oh(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Dje(e,t,r){var a=t.replace(Dre,""),n=t.length-a.length;return Oh(e,a,r*Math.pow(10,2*n))+Ts("%",n)}function Qre(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Qre(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(t/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(n+i)%n)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Xf(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Mre)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Xf("n",a,r):"("+Xf("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Fje(e,t,r);if(t.indexOf("%")!==-1)return Dje(e,t,r);if(t.indexOf("E")!==-1)return Qre(t,r);if(t.charCodeAt(0)===36)return"$"+Xf(e,t.substr(t.charAt(1)==" "?2:1),r);var n,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+qd(c,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:_l(t.substr(0,t.length-n.length))+n;if(i=t.match(Rre))return Tje(i,c,u);if(t.match(/^#+0+$/))return u+qd(c,t.length-t.indexOf("0"));if(i=t.match(Lre))return n=(""+r).replace(/^([^\.]+)$/,"$1."+_l(i[1])).replace(/\.$/,"."+_l(i[1])),n=n.replace(/\.(\d*)$/,function(g,x){return"."+x+Ts("0",_l(i[1]).length-x.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Cm(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Xf(e,t,-r):Cm(""+r)+"."+Ts("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Xf(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=nb(Xf(e,t.replace(/[\\-]/g,""),r)),o=0,nb(nb(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<n.length?n.charAt(o++):g==="0"?"0":""}));if(t.match(Ure))return n=Xf(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=hk(c,Math.pow(10,o)-1,!1),n=""+u,d=Oh("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+i[2]+"/"+i[3],d=fk(l[2],o),d.length<i[4].length&&(d=_l(i[4].substr(i[4].length-d.length))+d),n+=d,n;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=hk(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?u8(l[1],o)+i[2]+"/"+i[3]+fk(l[2],o):Ts(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:_l(t.substr(0,t.length-n.length))+n;if(i=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var f=t.indexOf(".")-o,h=t.length-n.length-f;return _l(t.substr(0,f)+n+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Xf(e,t,-r):Cm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?qd(0,3-g.length):"")+g})+"."+qd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Cm(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return Xf(e,t.slice(0,t.lastIndexOf(".")),r)+_l(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Oh(e,t,r){return(r|0)===r?Xf(e,t,r):Vu(e,t,r)}function Pje(e){for(var t=[],r=!1,a=0,n=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(n,a-n),n=a+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Hre=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function j1(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":Ak(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(Hre))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Rje(e,t,r,a){for(var n=[],i="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Ak(e,o))throw new Error("unrecognized character "+l+" in "+e);n[n.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);n[n.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";n[n.length]={t:g,v:m},++o;break;case"_":n[n.length]={t:"t",v:" "},o+=2;break;case"@":n[n.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=lg(t,r,e.charAt(o+1)==="2"),u==null))return"";n[n.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=lg(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),n[n.length]={t:l,v:i},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(u==null&&(u=lg(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",o+=5,h="h"):(x.t="t",++o),u==null&&x.t==="T")return"";n[n.length]=x,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Hre)){if(u==null&&(u=lg(t,r),u==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",j1(e)||(n[n.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;n[n.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;n[n.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":n[n.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:l,v:l},++o;break;case"$":n[n.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);n[n.length]={t:"t",v:l},++o;break}var v=0,y=0,N;for(o=n.length-1,c="t";o>=0;--o)switch(n[o].t){case"h":case"H":n[o].t=h,c="h",v<1&&(v=1);break;case"s":(N=n[o].v.match(/\.0+$/))&&(y=Math.max(y,N[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=n[o].t;break;case"m":c==="s"&&(n[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&n[o].v.match(/[Hh]/)&&(v=1),v<2&&n[o].v.match(/[Mm]/)&&(v=2),v<3&&n[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var C="",T;for(o=0;o<n.length;++o)switch(n[o].t){case"t":case"T":case" ":case"D":break;case"X":n[o].v="",n[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[o].v=kje(n[o].t.charCodeAt(0),n[o].v,u,y),n[o].t="t";break;case"n":case"?":for(T=o+1;n[T]!=null&&((l=n[T].t)==="?"||l==="D"||(l===" "||l==="t")&&n[T+1]!=null&&(n[T+1].t==="?"||n[T+1].t==="t"&&n[T+1].v==="/")||n[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(n[T].v==="/"||n[T].v===" "&&n[T+1]!=null&&n[T+1].t=="?"));)n[o].v+=n[T].v,n[T]={v:"",t:";"},++T;C+=n[o].v,o=T-1;break;case"G":n[o].t="t",n[o].v=Ug(t,r);break}var _="",O,j;if(C.length>0){C.charCodeAt(0)==40?(O=t<0&&C.charCodeAt(0)===45?-t:t,j=Oh("n",C,O)):(O=t<0&&a>1?-t:t,j=Oh("n",C,O),O<0&&n[0]&&n[0].t=="t"&&(j=j.substr(1),n[0].v="-"+n[0].v)),T=j.length-1;var S=n.length;for(o=0;o<n.length;++o)if(n[o]!=null&&n[o].t!="t"&&n[o].v.indexOf(".")>-1){S=o;break}var B=n.length;if(S===n.length&&j.indexOf("E")===-1){for(o=n.length-1;o>=0;--o)n[o]==null||"n?".indexOf(n[o].t)===-1||(T>=n[o].v.length-1?(T-=n[o].v.length,n[o].v=j.substr(T+1,n[o].v.length)):T<0?n[o].v="":(n[o].v=j.substr(0,T+1),T=-1),n[o].t="t",B=o);T>=0&&B<n.length&&(n[B].v=j.substr(0,T+1)+n[B].v)}else if(S!==n.length&&j.indexOf("E")===-1){for(T=j.indexOf(".")-1,o=S;o>=0;--o)if(!(n[o]==null||"n?".indexOf(n[o].t)===-1)){for(d=n[o].v.indexOf(".")>-1&&o===S?n[o].v.indexOf(".")-1:n[o].v.length-1,_=n[o].v.substr(d+1);d>=0;--d)T>=0&&(n[o].v.charAt(d)==="0"||n[o].v.charAt(d)==="#")&&(_=j.charAt(T--)+_);n[o].v=_,n[o].t="t",B=o}for(T>=0&&B<n.length&&(n[B].v=j.substr(0,T+1)+n[B].v),T=j.indexOf(".")+1,o=S;o<n.length;++o)if(!(n[o]==null||"n?(".indexOf(n[o].t)===-1&&o!==S)){for(d=n[o].v.indexOf(".")>-1&&o===S?n[o].v.indexOf(".")+1:0,_=n[o].v.substr(0,d);d<n[o].v.length;++d)T<j.length&&(_+=j.charAt(T++));n[o].v=_,n[o].t="t",B=o}}}for(o=0;o<n.length;++o)n[o]!=null&&"n?".indexOf(n[o].t)>-1&&(O=a>1&&t<0&&o>0&&n[o-1].v==="-"?-t:t,n[o].v=Oh(n[o].t,n[o].v,O),n[o].t="t");var L="";for(o=0;o!==n.length;++o)n[o]!=null&&(L+=n[o].v);return L}var Oz=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Fz(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Lje(e,t){var r=Pje(e),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(Oz),l=r[1].match(Oz);return Fz(t,o)?[a,r[0]]:Fz(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function od(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Dr)[e],a==null&&(a=r.table&&r.table[Bz[e]]||Dr[Bz[e]]),a==null&&(a=bje[e]||"General");break}if(Ak(a,0))return Ug(t,r);t instanceof Date&&(t=Fre(t,r.date1904));var n=Lje(a,t);if(Ak(n[1]))return Ug(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Rje(n[1],t,r,n[0])}function Fh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Dr[r]==null){t<0&&(t=r);continue}if(Dr[r]==e){t=r;break}}t<0&&(t=391)}return Dr[t]=e,t}function D_(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Fh(e[t],t)}function k1(){Dr=vje()}var Mje={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},zre=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Uje(e){var t=typeof e=="number"?Dr[e]:e;return t=t.replace(zre,"(\\d+)"),new RegExp("^"+t+"$")}function Qje(e,t,r){var a=-1,n=-1,i=-1,o=-1,l=-1,c=-1;(t.match(zre)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=m;break;case"d":i=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:n=m;break}}),c>=0&&l==-1&&n>=0&&(l=n,n=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:a==-1&&n==-1&&i==-1?d:u+"T"+d}var Hje=function(){var e={};e.version="1.2.0";function t(){for(var j=0,S=new Array(256),B=0;B!=256;++B)j=B,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,S[B]=j;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function a(j){var S=0,B=0,L=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)D[L]=j[L];for(L=0;L!=256;++L)for(B=j[L],S=256+L;S<4096;S+=256)B=D[S]=B>>>8^j[B&255];var k=[];for(L=1;L!=16;++L)k[L-1]=typeof Int32Array<"u"?D.subarray(L*256,L*256+256):D.slice(L*256,L*256+256);return k}var n=a(r),i=n[0],o=n[1],l=n[2],c=n[3],u=n[4],d=n[5],f=n[6],h=n[7],m=n[8],g=n[9],x=n[10],v=n[11],y=n[12],N=n[13],C=n[14];function T(j,S){for(var B=S^-1,L=0,D=j.length;L<D;)B=B>>>8^r[(B^j.charCodeAt(L++))&255];return~B}function _(j,S){for(var B=S^-1,L=j.length-15,D=0;D<L;)B=C[j[D++]^B&255]^N[j[D++]^B>>8&255]^y[j[D++]^B>>16&255]^v[j[D++]^B>>>24]^x[j[D++]]^g[j[D++]]^m[j[D++]]^h[j[D++]]^f[j[D++]]^d[j[D++]]^u[j[D++]]^c[j[D++]]^l[j[D++]]^o[j[D++]]^i[j[D++]]^r[j[D++]];for(L+=15;D<L;)B=B>>>8^r[(B^j[D++])&255];return~B}function O(j,S){for(var B=S^-1,L=0,D=j.length,k=0,R=0;L<D;)k=j.charCodeAt(L++),k<128?B=B>>>8^r[(B^k)&255]:k<2048?(B=B>>>8^r[(B^(192|k>>6&31))&255],B=B>>>8^r[(B^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,R=j.charCodeAt(L++)&1023,B=B>>>8^r[(B^(240|k>>8&7))&255],B=B>>>8^r[(B^(128|k>>2&63))&255],B=B>>>8^r[(B^(128|R>>6&15|(k&3)<<4))&255],B=B>>>8^r[(B^(128|R&63))&255]):(B=B>>>8^r[(B^(224|k>>12&15))&255],B=B>>>8^r[(B^(128|k>>6&63))&255],B=B>>>8^r[(B^(128|k&63))&255]);return~B}return e.table=r,e.bstr=T,e.buf=_,e.str=O,e}(),Er=function(){var t={};t.version="1.2.1";function r(je,Ue){for(var De=je.split("/"),Le=Ue.split("/"),ge=0,me=0,Oe=Math.min(De.length,Le.length);ge<Oe;++ge){if(me=De[ge].length-Le[ge].length)return me;if(De[ge]!=Le[ge])return De[ge]<Le[ge]?-1:1}return De.length-Le.length}function a(je){if(je.charAt(je.length-1)=="/")return je.slice(0,-1).indexOf("/")===-1?je:a(je.slice(0,-1));var Ue=je.lastIndexOf("/");return Ue===-1?je:je.slice(0,Ue+1)}function n(je){if(je.charAt(je.length-1)=="/")return n(je.slice(0,-1));var Ue=je.lastIndexOf("/");return Ue===-1?je:je.slice(Ue+1)}function i(je,Ue){typeof Ue=="string"&&(Ue=new Date(Ue));var De=Ue.getHours();De=De<<6|Ue.getMinutes(),De=De<<5|Ue.getSeconds()>>>1,je.write_shift(2,De);var Le=Ue.getFullYear()-1980;Le=Le<<4|Ue.getMonth()+1,Le=Le<<5|Ue.getDate(),je.write_shift(2,Le)}function o(je){var Ue=je.read_shift(2)&65535,De=je.read_shift(2)&65535,Le=new Date,ge=De&31;De>>>=5;var me=De&15;De>>>=4,Le.setMilliseconds(0),Le.setFullYear(De+1980),Le.setMonth(me-1),Le.setDate(ge);var Oe=Ue&31;Ue>>>=5;var He=Ue&63;return Ue>>>=6,Le.setHours(Ue),Le.setMinutes(He),Le.setSeconds(Oe<<1),Le}function l(je){So(je,0);for(var Ue={},De=0;je.l<=je.length-4;){var Le=je.read_shift(2),ge=je.read_shift(2),me=je.l+ge,Oe={};switch(Le){case 21589:De=je.read_shift(1),De&1&&(Oe.mtime=je.read_shift(4)),ge>5&&(De&2&&(Oe.atime=je.read_shift(4)),De&4&&(Oe.ctime=je.read_shift(4))),Oe.mtime&&(Oe.mt=new Date(Oe.mtime*1e3));break}je.l=me,Ue[Le]=Oe}return Ue}var c;function u(){return c||(c={})}function d(je,Ue){if(je[0]==80&&je[1]==75)return Pr(je,Ue);if((je[0]|32)==109&&(je[1]|32)==105)return Us(je,Ue);if(je.length<512)throw new Error("CFB file size "+je.length+" < 512");var De=3,Le=512,ge=0,me=0,Oe=0,He=0,Re=0,We=[],Ye=je.slice(0,512);So(Ye,0);var wt=f(Ye);switch(De=wt[0],De){case 3:Le=512;break;case 4:Le=4096;break;case 0:if(wt[1]==0)return Pr(je,Ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+De)}Le!==512&&(Ye=je.slice(0,Le),So(Ye,28));var Nt=je.slice(0,Le);h(Ye,De);var zt=Ye.read_shift(4,"i");if(De===3&&zt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+zt);Ye.l+=4,Oe=Ye.read_shift(4,"i"),Ye.l+=4,Ye.chk("00100000","Mini Stream Cutoff Size: "),He=Ye.read_shift(4,"i"),ge=Ye.read_shift(4,"i"),Re=Ye.read_shift(4,"i"),me=Ye.read_shift(4,"i");for(var Ot=-1,Vt=0;Vt<109&&(Ot=Ye.read_shift(4,"i"),!(Ot<0));++Vt)We[Vt]=Ot;var jr=m(je,Le);v(Re,me,jr,Le,We);var ea=N(jr,Oe,We,Le);ea[Oe].name="!Directory",ge>0&&He!==R&&(ea[He].name="!MiniFAT"),ea[We[0]].name="!FAT",ea.fat_addrs=We,ea.ssz=Le;var ta={},ia=[],xs=[],Fo=[];C(Oe,ea,jr,ia,ge,ta,xs,He),g(xs,Fo,ia),ia.shift();var vs={FileIndex:xs,FullPaths:Fo};return Ue&&Ue.raw&&(vs.raw={header:Nt,sectors:jr}),vs}function f(je){if(je[je.l]==80&&je[je.l+1]==75)return[0,0];je.chk(U,"Header Signature: "),je.l+=16;var Ue=je.read_shift(2,"u");return[je.read_shift(2,"u"),Ue]}function h(je,Ue){var De=9;switch(je.l+=2,De=je.read_shift(2)){case 9:if(Ue!=3)throw new Error("Sector Shift: Expected 9 saw "+De);break;case 12:if(Ue!=4)throw new Error("Sector Shift: Expected 12 saw "+De);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+De)}je.chk("0600","Mini Sector Shift: "),je.chk("000000000000","Reserved: ")}function m(je,Ue){for(var De=Math.ceil(je.length/Ue)-1,Le=[],ge=1;ge<De;++ge)Le[ge-1]=je.slice(ge*Ue,(ge+1)*Ue);return Le[De-1]=je.slice(De*Ue),Le}function g(je,Ue,De){for(var Le=0,ge=0,me=0,Oe=0,He=0,Re=De.length,We=[],Ye=[];Le<Re;++Le)We[Le]=Ye[Le]=Le,Ue[Le]=De[Le];for(;He<Ye.length;++He)Le=Ye[He],ge=je[Le].L,me=je[Le].R,Oe=je[Le].C,We[Le]===Le&&(ge!==-1&&We[ge]!==ge&&(We[Le]=We[ge]),me!==-1&&We[me]!==me&&(We[Le]=We[me])),Oe!==-1&&(We[Oe]=Le),ge!==-1&&Le!=We[Le]&&(We[ge]=We[Le],Ye.lastIndexOf(ge)<He&&Ye.push(ge)),me!==-1&&Le!=We[Le]&&(We[me]=We[Le],Ye.lastIndexOf(me)<He&&Ye.push(me));for(Le=1;Le<Re;++Le)We[Le]===Le&&(me!==-1&&We[me]!==me?We[Le]=We[me]:ge!==-1&&We[ge]!==ge&&(We[Le]=We[ge]));for(Le=1;Le<Re;++Le)if(je[Le].type!==0){if(He=Le,He!=We[He])do He=We[He],Ue[Le]=Ue[He]+"/"+Ue[Le];while(He!==0&&We[He]!==-1&&He!=We[He]);We[Le]=-1}for(Ue[0]+="/",Le=1;Le<Re;++Le)je[Le].type!==2&&(Ue[Le]+="/")}function x(je,Ue,De){for(var Le=je.start,ge=je.size,me=[],Oe=Le;De&&ge>0&&Oe>=0;)me.push(Ue.slice(Oe*k,Oe*k+k)),ge-=k,Oe=rg(De,Oe*4);return me.length===0?Et(0):io(me).slice(0,je.size)}function v(je,Ue,De,Le,ge){var me=R;if(je===R){if(Ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(je!==-1){var Oe=De[je],He=(Le>>>2)-1;if(!Oe)return;for(var Re=0;Re<He&&(me=rg(Oe,Re*4))!==R;++Re)ge.push(me);v(rg(Oe,Le-4),Ue-1,De,Le,ge)}}function y(je,Ue,De,Le,ge){var me=[],Oe=[];ge||(ge=[]);var He=Le-1,Re=0,We=0;for(Re=Ue;Re>=0;){ge[Re]=!0,me[me.length]=Re,Oe.push(je[Re]);var Ye=De[Math.floor(Re*4/Le)];if(We=Re*4&He,Le<4+We)throw new Error("FAT boundary crossed: "+Re+" 4 "+Le);if(!je[Ye])break;Re=rg(je[Ye],We)}return{nodes:me,data:Gz([Oe])}}function N(je,Ue,De,Le){var ge=je.length,me=[],Oe=[],He=[],Re=[],We=Le-1,Ye=0,wt=0,Nt=0,zt=0;for(Ye=0;Ye<ge;++Ye)if(He=[],Nt=Ye+Ue,Nt>=ge&&(Nt-=ge),!Oe[Nt]){Re=[];var Ot=[];for(wt=Nt;wt>=0;){Ot[wt]=!0,Oe[wt]=!0,He[He.length]=wt,Re.push(je[wt]);var Vt=De[Math.floor(wt*4/Le)];if(zt=wt*4&We,Le<4+zt)throw new Error("FAT boundary crossed: "+wt+" 4 "+Le);if(!je[Vt]||(wt=rg(je[Vt],zt),Ot[wt]))break}me[Nt]={nodes:He,data:Gz([Re])}}return me}function C(je,Ue,De,Le,ge,me,Oe,He){for(var Re=0,We=Le.length?2:0,Ye=Ue[je].data,wt=0,Nt=0,zt;wt<Ye.length;wt+=128){var Ot=Ye.slice(wt,wt+128);So(Ot,64),Nt=Ot.read_shift(2),zt=x8(Ot,0,Nt-We),Le.push(zt);var Vt={name:zt,type:Ot.read_shift(1),color:Ot.read_shift(1),L:Ot.read_shift(4,"i"),R:Ot.read_shift(4,"i"),C:Ot.read_shift(4,"i"),clsid:Ot.read_shift(16),state:Ot.read_shift(4,"i"),start:0,size:0},jr=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);jr!==0&&(Vt.ct=T(Ot,Ot.l-8));var ea=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);ea!==0&&(Vt.mt=T(Ot,Ot.l-8)),Vt.start=Ot.read_shift(4,"i"),Vt.size=Ot.read_shift(4,"i"),Vt.size<0&&Vt.start<0&&(Vt.size=Vt.type=0,Vt.start=R,Vt.name=""),Vt.type===5?(Re=Vt.start,ge>0&&Re!==R&&(Ue[Re].name="!StreamData")):Vt.size>=4096?(Vt.storage="fat",Ue[Vt.start]===void 0&&(Ue[Vt.start]=y(De,Vt.start,Ue.fat_addrs,Ue.ssz)),Ue[Vt.start].name=Vt.name,Vt.content=Ue[Vt.start].data.slice(0,Vt.size)):(Vt.storage="minifat",Vt.size<0?Vt.size=0:Re!==R&&Vt.start!==R&&Ue[Re]&&(Vt.content=x(Vt,Ue[Re].data,(Ue[He]||{}).data))),Vt.content&&So(Vt.content,0),me[zt]=Vt,Oe.push(Vt)}}function T(je,Ue){return new Date((Jc(je,Ue+4)/1e7*Math.pow(2,32)+Jc(je,Ue)/1e7-11644473600)*1e3)}function _(je,Ue){return u(),d(c.readFileSync(je),Ue)}function O(je,Ue){var De=Ue&&Ue.type;switch(De||da&&Buffer.isBuffer(je)&&(De="buffer"),De||"base64"){case"file":return _(je,Ue);case"base64":return d(ru(cu(je)),Ue);case"binary":return d(ru(je),Ue)}return d(je,Ue)}function j(je,Ue){var De=Ue||{},Le=De.root||"Root Entry";if(je.FullPaths||(je.FullPaths=[]),je.FileIndex||(je.FileIndex=[]),je.FullPaths.length!==je.FileIndex.length)throw new Error("inconsistent CFB structure");je.FullPaths.length===0&&(je.FullPaths[0]=Le+"/",je.FileIndex[0]={name:Le,type:5}),De.CLSID&&(je.FileIndex[0].clsid=De.CLSID),S(je)}function S(je){var Ue="Sh33tJ5";if(!Er.find(je,"/"+Ue)){var De=Et(4);De[0]=55,De[1]=De[3]=50,De[2]=54,je.FileIndex.push({name:Ue,type:2,content:De,size:4,L:69,R:69,C:69}),je.FullPaths.push(je.FullPaths[0]+Ue),B(je)}}function B(je,Ue){j(je);for(var De=!1,Le=!1,ge=je.FullPaths.length-1;ge>=0;--ge){var me=je.FileIndex[ge];switch(me.type){case 0:Le?De=!0:(je.FileIndex.pop(),je.FullPaths.pop());break;case 1:case 2:case 5:Le=!0,isNaN(me.R*me.L*me.C)&&(De=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(De=!0);break;default:De=!0;break}}if(!(!De&&!Ue)){var Oe=new Date(1987,1,19),He=0,Re=Object.create?Object.create(null):{},We=[];for(ge=0;ge<je.FullPaths.length;++ge)Re[je.FullPaths[ge]]=!0,je.FileIndex[ge].type!==0&&We.push([je.FullPaths[ge],je.FileIndex[ge]]);for(ge=0;ge<We.length;++ge){var Ye=a(We[ge][0]);Le=Re[Ye],Le||(We.push([Ye,{name:n(Ye).replace("/",""),type:1,clsid:Q,ct:Oe,mt:Oe,content:null}]),Re[Ye]=!0)}for(We.sort(function(zt,Ot){return r(zt[0],Ot[0])}),je.FullPaths=[],je.FileIndex=[],ge=0;ge<We.length;++ge)je.FullPaths[ge]=We[ge][0],je.FileIndex[ge]=We[ge][1];for(ge=0;ge<We.length;++ge){var wt=je.FileIndex[ge],Nt=je.FullPaths[ge];if(wt.name=n(Nt).replace("/",""),wt.L=wt.R=wt.C=-(wt.color=1),wt.size=wt.content?wt.content.length:0,wt.start=0,wt.clsid=wt.clsid||Q,ge===0)wt.C=We.length>1?1:-1,wt.size=0,wt.type=5;else if(Nt.slice(-1)=="/"){for(He=ge+1;He<We.length&&a(je.FullPaths[He])!=Nt;++He);for(wt.C=He>=We.length?-1:He,He=ge+1;He<We.length&&a(je.FullPaths[He])!=a(Nt);++He);wt.R=He>=We.length?-1:He,wt.type=1}else a(je.FullPaths[ge+1]||"")==a(Nt)&&(wt.R=ge+1),wt.type=2}}}function L(je,Ue){var De=Ue||{};if(De.fileType=="mad")return er(je,De);switch(B(je),De.fileType){case"zip":return Dn(je,De)}var Le=function(zt){for(var Ot=0,Vt=0,jr=0;jr<zt.FileIndex.length;++jr){var ea=zt.FileIndex[jr];if(ea.content){var ta=ea.content.length;ta>0&&(ta<4096?Ot+=ta+63>>6:Vt+=ta+511>>9)}}for(var ia=zt.FullPaths.length+3>>2,xs=Ot+7>>3,Fo=Ot+127>>7,vs=xs+Vt+ia+Fo,ci=vs+127>>7,Qs=ci<=109?0:Math.ceil((ci-109)/127);vs+ci+Qs+127>>7>ci;)Qs=++ci<=109?0:Math.ceil((ci-109)/127);var ki=[1,Qs,ci,Fo,ia,Vt,Ot,0];return zt.FileIndex[0].size=Ot<<6,ki[7]=(zt.FileIndex[0].start=ki[0]+ki[1]+ki[2]+ki[3]+ki[4]+ki[5])+(ki[6]+7>>3),ki}(je),ge=Et(Le[7]<<9),me=0,Oe=0;{for(me=0;me<8;++me)ge.write_shift(1,H[me]);for(me=0;me<8;++me)ge.write_shift(2,0);for(ge.write_shift(2,62),ge.write_shift(2,3),ge.write_shift(2,65534),ge.write_shift(2,9),ge.write_shift(2,6),me=0;me<3;++me)ge.write_shift(2,0);for(ge.write_shift(4,0),ge.write_shift(4,Le[2]),ge.write_shift(4,Le[0]+Le[1]+Le[2]+Le[3]-1),ge.write_shift(4,0),ge.write_shift(4,4096),ge.write_shift(4,Le[3]?Le[0]+Le[1]+Le[2]-1:R),ge.write_shift(4,Le[3]),ge.write_shift(-4,Le[1]?Le[0]-1:R),ge.write_shift(4,Le[1]),me=0;me<109;++me)ge.write_shift(-4,me<Le[2]?Le[1]+me:-1)}if(Le[1])for(Oe=0;Oe<Le[1];++Oe){for(;me<236+Oe*127;++me)ge.write_shift(-4,me<Le[2]?Le[1]+me:-1);ge.write_shift(-4,Oe===Le[1]-1?R:Oe+1)}var He=function(zt){for(Oe+=zt;me<Oe-1;++me)ge.write_shift(-4,me+1);zt&&(++me,ge.write_shift(-4,R))};for(Oe=me=0,Oe+=Le[1];me<Oe;++me)ge.write_shift(-4,V.DIFSECT);for(Oe+=Le[2];me<Oe;++me)ge.write_shift(-4,V.FATSECT);He(Le[3]),He(Le[4]);for(var Re=0,We=0,Ye=je.FileIndex[0];Re<je.FileIndex.length;++Re)Ye=je.FileIndex[Re],Ye.content&&(We=Ye.content.length,!(We<4096)&&(Ye.start=Oe,He(We+511>>9)));for(He(Le[6]+7>>3);ge.l&511;)ge.write_shift(-4,V.ENDOFCHAIN);for(Oe=me=0,Re=0;Re<je.FileIndex.length;++Re)Ye=je.FileIndex[Re],Ye.content&&(We=Ye.content.length,!(!We||We>=4096)&&(Ye.start=Oe,He(We+63>>6)));for(;ge.l&511;)ge.write_shift(-4,V.ENDOFCHAIN);for(me=0;me<Le[4]<<2;++me){var wt=je.FullPaths[me];if(!wt||wt.length===0){for(Re=0;Re<17;++Re)ge.write_shift(4,0);for(Re=0;Re<3;++Re)ge.write_shift(4,-1);for(Re=0;Re<12;++Re)ge.write_shift(4,0);continue}Ye=je.FileIndex[me],me===0&&(Ye.start=Ye.size?Ye.start-1:R);var Nt=me===0&&De.root||Ye.name;if(We=2*(Nt.length+1),ge.write_shift(64,Nt,"utf16le"),ge.write_shift(2,We),ge.write_shift(1,Ye.type),ge.write_shift(1,Ye.color),ge.write_shift(-4,Ye.L),ge.write_shift(-4,Ye.R),ge.write_shift(-4,Ye.C),Ye.clsid)ge.write_shift(16,Ye.clsid,"hex");else for(Re=0;Re<4;++Re)ge.write_shift(4,0);ge.write_shift(4,Ye.state||0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,Ye.start),ge.write_shift(4,Ye.size),ge.write_shift(4,0)}for(me=1;me<je.FileIndex.length;++me)if(Ye=je.FileIndex[me],Ye.size>=4096)if(ge.l=Ye.start+1<<9,da&&Buffer.isBuffer(Ye.content))Ye.content.copy(ge,ge.l,0,Ye.size),ge.l+=Ye.size+511&-512;else{for(Re=0;Re<Ye.size;++Re)ge.write_shift(1,Ye.content[Re]);for(;Re&511;++Re)ge.write_shift(1,0)}for(me=1;me<je.FileIndex.length;++me)if(Ye=je.FileIndex[me],Ye.size>0&&Ye.size<4096)if(da&&Buffer.isBuffer(Ye.content))Ye.content.copy(ge,ge.l,0,Ye.size),ge.l+=Ye.size+63&-64;else{for(Re=0;Re<Ye.size;++Re)ge.write_shift(1,Ye.content[Re]);for(;Re&63;++Re)ge.write_shift(1,0)}if(da)ge.l=ge.length;else for(;ge.l<ge.length;)ge.write_shift(1,0);return ge}function D(je,Ue){var De=je.FullPaths.map(function(Re){return Re.toUpperCase()}),Le=De.map(function(Re){var We=Re.split("/");return We[We.length-(Re.slice(-1)=="/"?2:1)]}),ge=!1;Ue.charCodeAt(0)===47?(ge=!0,Ue=De[0].slice(0,-1)+Ue):ge=Ue.indexOf("/")!==-1;var me=Ue.toUpperCase(),Oe=ge===!0?De.indexOf(me):Le.indexOf(me);if(Oe!==-1)return je.FileIndex[Oe];var He=!me.match(C2);for(me=me.replace(Rl,""),He&&(me=me.replace(C2,"!")),Oe=0;Oe<De.length;++Oe)if((He?De[Oe].replace(C2,"!"):De[Oe]).replace(Rl,"")==me||(He?Le[Oe].replace(C2,"!"):Le[Oe]).replace(Rl,"")==me)return je.FileIndex[Oe];return null}var k=64,R=-2,U="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",V={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(je,Ue,De){u();var Le=L(je,De);c.writeFileSync(Ue,Le)}function J(je){for(var Ue=new Array(je.length),De=0;De<je.length;++De)Ue[De]=String.fromCharCode(je[De]);return Ue.join("")}function W(je,Ue){var De=L(je,Ue);switch(Ue&&Ue.type||"buffer"){case"file":return u(),c.writeFileSync(Ue.filename,De),De;case"binary":return typeof De=="string"?De:J(De);case"base64":return Dw(typeof De=="string"?De:J(De));case"buffer":if(da)return Buffer.isBuffer(De)?De:c0(De);case"array":return typeof De=="string"?ru(De):De}return De}var Z;function M(je){try{var Ue=je.InflateRaw,De=new Ue;if(De._processChunk(new Uint8Array([3,0]),De._finishFlushFlag),De.bytesRead)Z=je;else throw new Error("zlib does not expose bytesRead")}catch(Le){console.error("cannot use native zlib: "+(Le.message||Le))}}function F(je,Ue){if(!Z)return br(je,Ue);var De=Z.InflateRaw,Le=new De,ge=Le._processChunk(je.slice(je.l),Le._finishFlushFlag);return je.l+=Le.bytesRead,ge}function X(je){return Z?Z.deflateRawSync(je):bt(je)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(je){var Ue=(je<<1|je<<11)&139536|(je<<5|je<<15)&558144;return(Ue>>16|Ue>>8|Ue)&255}for(var ne=typeof Uint8Array<"u",oe=ne?new Uint8Array(256):[],we=0;we<256;++we)oe[we]=ie(we);function K(je,Ue){var De=oe[je&255];return Ue<=8?De>>>8-Ue:(De=De<<8|oe[je>>8&255],Ue<=16?De>>>16-Ue:(De=De<<8|oe[je>>16&255],De>>>24-Ue))}function Ee(je,Ue){var De=Ue&7,Le=Ue>>>3;return(je[Le]|(De<=6?0:je[Le+1]<<8))>>>De&3}function _e(je,Ue){var De=Ue&7,Le=Ue>>>3;return(je[Le]|(De<=5?0:je[Le+1]<<8))>>>De&7}function Ce(je,Ue){var De=Ue&7,Le=Ue>>>3;return(je[Le]|(De<=4?0:je[Le+1]<<8))>>>De&15}function de(je,Ue){var De=Ue&7,Le=Ue>>>3;return(je[Le]|(De<=3?0:je[Le+1]<<8))>>>De&31}function xe(je,Ue){var De=Ue&7,Le=Ue>>>3;return(je[Le]|(De<=1?0:je[Le+1]<<8))>>>De&127}function he(je,Ue,De){var Le=Ue&7,ge=Ue>>>3,me=(1<<De)-1,Oe=je[ge]>>>Le;return De<8-Le||(Oe|=je[ge+1]<<8-Le,De<16-Le)||(Oe|=je[ge+2]<<16-Le,De<24-Le)||(Oe|=je[ge+3]<<24-Le),Oe&me}function ye(je,Ue,De){var Le=Ue&7,ge=Ue>>>3;return Le<=5?je[ge]|=(De&7)<<Le:(je[ge]|=De<<Le&255,je[ge+1]=(De&7)>>8-Le),Ue+3}function ce(je,Ue,De){var Le=Ue&7,ge=Ue>>>3;return De=(De&1)<<Le,je[ge]|=De,Ue+1}function Ae(je,Ue,De){var Le=Ue&7,ge=Ue>>>3;return De<<=Le,je[ge]|=De&255,De>>>=8,je[ge+1]=De,Ue+8}function Ne(je,Ue,De){var Le=Ue&7,ge=Ue>>>3;return De<<=Le,je[ge]|=De&255,De>>>=8,je[ge+1]=De&255,je[ge+2]=De>>>8,Ue+16}function Pe(je,Ue){var De=je.length,Le=2*De>Ue?2*De:Ue+5,ge=0;if(De>=Ue)return je;if(da){var me=kz(Le);if(je.copy)je.copy(me);else for(;ge<je.length;++ge)me[ge]=je[ge];return me}else if(ne){var Oe=new Uint8Array(Le);if(Oe.set)Oe.set(je);else for(;ge<De;++ge)Oe[ge]=je[ge];return Oe}return je.length=Le,je}function Qe(je){for(var Ue=new Array(je),De=0;De<je;++De)Ue[De]=0;return Ue}function $e(je,Ue,De){var Le=1,ge=0,me=0,Oe=0,He=0,Re=je.length,We=ne?new Uint16Array(32):Qe(32);for(me=0;me<32;++me)We[me]=0;for(me=Re;me<De;++me)je[me]=0;Re=je.length;var Ye=ne?new Uint16Array(Re):Qe(Re);for(me=0;me<Re;++me)We[ge=je[me]]++,Le<ge&&(Le=ge),Ye[me]=0;for(We[0]=0,me=1;me<=Le;++me)We[me+16]=He=He+We[me-1]<<1;for(me=0;me<Re;++me)He=je[me],He!=0&&(Ye[me]=We[He+16]++);var wt=0;for(me=0;me<Re;++me)if(wt=je[me],wt!=0)for(He=K(Ye[me],Le)>>Le-wt,Oe=(1<<Le+4-wt)-1;Oe>=0;--Oe)Ue[He|Oe<<wt]=wt&15|me<<4;return Le}var et=ne?new Uint16Array(512):Qe(512),Ke=ne?new Uint16Array(32):Qe(32);if(!ne){for(var Ge=0;Ge<512;++Ge)et[Ge]=0;for(Ge=0;Ge<32;++Ge)Ke[Ge]=0}(function(){for(var je=[],Ue=0;Ue<32;Ue++)je.push(5);$e(je,Ke,32);var De=[];for(Ue=0;Ue<=143;Ue++)De.push(8);for(;Ue<=255;Ue++)De.push(9);for(;Ue<=279;Ue++)De.push(7);for(;Ue<=287;Ue++)De.push(8);$e(De,et,288)})();var nt=function(){for(var Ue=ne?new Uint8Array(32768):[],De=0,Le=0;De<le.length-1;++De)for(;Le<le[De+1];++Le)Ue[Le]=De;for(;Le<32768;++Le)Ue[Le]=29;var ge=ne?new Uint8Array(259):[];for(De=0,Le=0;De<ae.length-1;++De)for(;Le<ae[De+1];++Le)ge[Le]=De;function me(He,Re){for(var We=0;We<He.length;){var Ye=Math.min(65535,He.length-We),wt=We+Ye==He.length;for(Re.write_shift(1,+wt),Re.write_shift(2,Ye),Re.write_shift(2,~Ye&65535);Ye-- >0;)Re[Re.l++]=He[We++]}return Re.l}function Oe(He,Re){for(var We=0,Ye=0,wt=ne?new Uint16Array(32768):[];Ye<He.length;){var Nt=Math.min(65535,He.length-Ye);if(Nt<10){for(We=ye(Re,We,+(Ye+Nt==He.length)),We&7&&(We+=8-(We&7)),Re.l=We/8|0,Re.write_shift(2,Nt),Re.write_shift(2,~Nt&65535);Nt-- >0;)Re[Re.l++]=He[Ye++];We=Re.l*8;continue}We=ye(Re,We,+(Ye+Nt==He.length)+2);for(var zt=0;Nt-- >0;){var Ot=He[Ye];zt=(zt<<5^Ot)&32767;var Vt=-1,jr=0;if((Vt=wt[zt])&&(Vt|=Ye&-32768,Vt>Ye&&(Vt-=32768),Vt<Ye))for(;He[Vt+jr]==He[Ye+jr]&&jr<250;)++jr;if(jr>2){Ot=ge[jr],Ot<=22?We=Ae(Re,We,oe[Ot+1]>>1)-1:(Ae(Re,We,3),We+=5,Ae(Re,We,oe[Ot-23]>>5),We+=3);var ea=Ot<8?0:Ot-4>>2;ea>0&&(Ne(Re,We,jr-ae[Ot]),We+=ea),Ot=Ue[Ye-Vt],We=Ae(Re,We,oe[Ot]>>3),We-=3;var ta=Ot<4?0:Ot-2>>1;ta>0&&(Ne(Re,We,Ye-Vt-le[Ot]),We+=ta);for(var ia=0;ia<jr;++ia)wt[zt]=Ye&32767,zt=(zt<<5^He[Ye])&32767,++Ye;Nt-=jr-1}else Ot<=143?Ot=Ot+48:We=ce(Re,We,1),We=Ae(Re,We,oe[Ot]),wt[zt]=Ye&32767,++Ye}We=Ae(Re,We,0)-1}return Re.l=(We+7)/8|0,Re.l}return function(Re,We){return Re.length<8?me(Re,We):Oe(Re,We)}}();function bt(je){var Ue=Et(50+Math.floor(je.length*1.1)),De=nt(je,Ue);return Ue.slice(0,De)}var ut=ne?new Uint16Array(32768):Qe(32768),ze=ne?new Uint16Array(32768):Qe(32768),Tt=ne?new Uint16Array(128):Qe(128),ir=1,Kt=1;function Cr(je,Ue){var De=de(je,Ue)+257;Ue+=5;var Le=de(je,Ue)+1;Ue+=5;var ge=Ce(je,Ue)+4;Ue+=4;for(var me=0,Oe=ne?new Uint8Array(19):Qe(19),He=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,We=ne?new Uint8Array(8):Qe(8),Ye=ne?new Uint8Array(8):Qe(8),wt=Oe.length,Nt=0;Nt<ge;++Nt)Oe[Y[Nt]]=me=_e(je,Ue),Re<me&&(Re=me),We[me]++,Ue+=3;var zt=0;for(We[0]=0,Nt=1;Nt<=Re;++Nt)Ye[Nt]=zt=zt+We[Nt-1]<<1;for(Nt=0;Nt<wt;++Nt)(zt=Oe[Nt])!=0&&(He[Nt]=Ye[zt]++);var Ot=0;for(Nt=0;Nt<wt;++Nt)if(Ot=Oe[Nt],Ot!=0){zt=oe[He[Nt]]>>8-Ot;for(var Vt=(1<<7-Ot)-1;Vt>=0;--Vt)Tt[zt|Vt<<Ot]=Ot&7|Nt<<3}var jr=[];for(Re=1;jr.length<De+Le;)switch(zt=Tt[xe(je,Ue)],Ue+=zt&7,zt>>>=3){case 16:for(me=3+Ee(je,Ue),Ue+=2,zt=jr[jr.length-1];me-- >0;)jr.push(zt);break;case 17:for(me=3+_e(je,Ue),Ue+=3;me-- >0;)jr.push(0);break;case 18:for(me=11+xe(je,Ue),Ue+=7;me-- >0;)jr.push(0);break;default:jr.push(zt),Re<zt&&(Re=zt);break}var ea=jr.slice(0,De),ta=jr.slice(De);for(Nt=De;Nt<286;++Nt)ea[Nt]=0;for(Nt=Le;Nt<30;++Nt)ta[Nt]=0;return ir=$e(ea,ut,286),Kt=$e(ta,ze,30),Ue}function $r(je,Ue){if(je[0]==3&&!(je[1]&3))return[Jm(Ue),2];for(var De=0,Le=0,ge=kz(Ue||1<<18),me=0,Oe=ge.length>>>0,He=0,Re=0;(Le&1)==0;){if(Le=_e(je,De),De+=3,Le>>>1)Le>>1==1?(He=9,Re=5):(De=Cr(je,De),He=ir,Re=Kt);else{De&7&&(De+=8-(De&7));var We=je[De>>>3]|je[(De>>>3)+1]<<8;if(De+=32,We>0)for(!Ue&&Oe<me+We&&(ge=Pe(ge,me+We),Oe=ge.length);We-- >0;)ge[me++]=je[De>>>3],De+=8;continue}for(;;){!Ue&&Oe<me+32767&&(ge=Pe(ge,me+32767),Oe=ge.length);var Ye=he(je,De,He),wt=Le>>>1==1?et[Ye]:ut[Ye];if(De+=wt&15,wt>>>=4,(wt>>>8&255)===0)ge[me++]=wt;else{if(wt==256)break;wt-=257;var Nt=wt<8?0:wt-4>>2;Nt>5&&(Nt=0);var zt=me+ae[wt];Nt>0&&(zt+=he(je,De,Nt),De+=Nt),Ye=he(je,De,Re),wt=Le>>>1==1?Ke[Ye]:ze[Ye],De+=wt&15,wt>>>=4;var Ot=wt<4?0:wt-2>>1,Vt=le[wt];for(Ot>0&&(Vt+=he(je,De,Ot),De+=Ot),!Ue&&Oe<zt&&(ge=Pe(ge,zt+100),Oe=ge.length);me<zt;)ge[me]=ge[me-Vt],++me}}}return Ue?[ge,De+7>>>3]:[ge.slice(0,me),De+7>>>3]}function br(je,Ue){var De=je.slice(je.l||0),Le=$r(De,Ue);return je.l+=Le[1],Le[0]}function Sn(je,Ue){if(je)typeof console<"u"&&console.error(Ue);else throw new Error(Ue)}function Pr(je,Ue){var De=je;So(De,0);var Le=[],ge=[],me={FileIndex:Le,FullPaths:ge};j(me,{root:Ue.root});for(var Oe=De.length-4;(De[Oe]!=80||De[Oe+1]!=75||De[Oe+2]!=5||De[Oe+3]!=6)&&Oe>=0;)--Oe;De.l=Oe+4,De.l+=4;var He=De.read_shift(2);De.l+=6;var Re=De.read_shift(4);for(De.l=Re,Oe=0;Oe<He;++Oe){De.l+=20;var We=De.read_shift(4),Ye=De.read_shift(4),wt=De.read_shift(2),Nt=De.read_shift(2),zt=De.read_shift(2);De.l+=8;var Ot=De.read_shift(4),Vt=l(De.slice(De.l+wt,De.l+wt+Nt));De.l+=wt+Nt+zt;var jr=De.l;De.l=Ot+4,Ra(De,We,Ye,me,Vt),De.l=jr}return me}function Ra(je,Ue,De,Le,ge){je.l+=2;var me=je.read_shift(2),Oe=je.read_shift(2),He=o(je);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Re=je.read_shift(4),We=je.read_shift(4),Ye=je.read_shift(4),wt=je.read_shift(2),Nt=je.read_shift(2),zt="",Ot=0;Ot<wt;++Ot)zt+=String.fromCharCode(je[je.l++]);if(Nt){var Vt=l(je.slice(je.l,je.l+Nt));(Vt[21589]||{}).mt&&(He=Vt[21589].mt),((ge||{})[21589]||{}).mt&&(He=ge[21589].mt)}je.l+=Nt;var jr=je.slice(je.l,je.l+We);switch(Oe){case 8:jr=F(je,Ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Oe)}var ea=!1;me&8&&(Re=je.read_shift(4),Re==134695760&&(Re=je.read_shift(4),ea=!0),We=je.read_shift(4),Ye=je.read_shift(4)),We!=Ue&&Sn(ea,"Bad compressed size: "+Ue+" != "+We),Ye!=De&&Sn(ea,"Bad uncompressed size: "+De+" != "+Ye),la(Le,zt,jr,{unsafe:!0,mt:He})}function Dn(je,Ue){var De=Ue||{},Le=[],ge=[],me=Et(1),Oe=De.compression?8:0,He=0,Re=0,We=0,Ye=0,wt=0,Nt=je.FullPaths[0],zt=Nt,Ot=je.FileIndex[0],Vt=[],jr=0;for(Re=1;Re<je.FullPaths.length;++Re)if(zt=je.FullPaths[Re].slice(Nt.length),Ot=je.FileIndex[Re],!(!Ot.size||!Ot.content||zt=="Sh33tJ5")){var ea=Ye,ta=Et(zt.length);for(We=0;We<zt.length;++We)ta.write_shift(1,zt.charCodeAt(We)&127);ta=ta.slice(0,ta.l),Vt[wt]=Hje.buf(Ot.content,0);var ia=Ot.content;Oe==8&&(ia=X(ia)),me=Et(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,He),me.write_shift(2,Oe),Ot.mt?i(me,Ot.mt):me.write_shift(4,0),me.write_shift(-4,Vt[wt]),me.write_shift(4,ia.length),me.write_shift(4,Ot.content.length),me.write_shift(2,ta.length),me.write_shift(2,0),Ye+=me.length,Le.push(me),Ye+=ta.length,Le.push(ta),Ye+=ia.length,Le.push(ia),me=Et(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,He),me.write_shift(2,Oe),me.write_shift(4,0),me.write_shift(-4,Vt[wt]),me.write_shift(4,ia.length),me.write_shift(4,Ot.content.length),me.write_shift(2,ta.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,ea),jr+=me.l,ge.push(me),jr+=ta.length,ge.push(ta),++wt}return me=Et(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,wt),me.write_shift(2,wt),me.write_shift(4,jr),me.write_shift(4,Ye),me.write_shift(2,0),io([io(Le),io(ge),me])}var Rr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function pr(je,Ue){if(je.ctype)return je.ctype;var De=je.name||"",Le=De.match(/\.([^\.]+)$/);return Le&&Rr[Le[1]]||Ue&&(Le=(De=Ue).match(/[\.\\]([^\.\\])+$/),Le&&Rr[Le[1]])?Rr[Le[1]]:"application/octet-stream"}function Jr(je){for(var Ue=Dw(je),De=[],Le=0;Le<Ue.length;Le+=76)De.push(Ue.slice(Le,Le+76));return De.join(`\r
`)+`\r
`}function gs(je){var Ue=je.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Ye=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Ye.length==1?"0"+Ye:Ye)});Ue=Ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ue.charAt(0)==`
`&&(Ue="=0D"+Ue.slice(1)),Ue=Ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var De=[],Le=Ue.split(`\r
`),ge=0;ge<Le.length;++ge){var me=Le[ge];if(me.length==0){De.push("");continue}for(var Oe=0;Oe<me.length;){var He=76,Re=me.slice(Oe,Oe+He);Re.charAt(He-1)=="="?He--:Re.charAt(He-2)=="="?He-=2:Re.charAt(He-3)=="="&&(He-=3),Re=me.slice(Oe,Oe+He),Oe+=He,Oe<me.length&&(Re+="="),De.push(Re)}}return De.join(`\r
`)}function Za(je){for(var Ue=[],De=0;De<je.length;++De){for(var Le=je[De];De<=je.length&&Le.charAt(Le.length-1)=="=";)Le=Le.slice(0,Le.length-1)+je[++De];Ue.push(Le)}for(var ge=0;ge<Ue.length;++ge)Ue[ge]=Ue[ge].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return ru(Ue.join(`\r
`))}function Pn(je,Ue,De){for(var Le="",ge="",me="",Oe,He=0;He<10;++He){var Re=Ue[He];if(!Re||Re.match(/^\s*$/))break;var We=Re.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":Le=We[2].trim();break;case"content-type":me=We[2].trim();break;case"content-transfer-encoding":ge=We[2].trim();break}}switch(++He,ge.toLowerCase()){case"base64":Oe=ru(cu(Ue.slice(He).join("")));break;case"quoted-printable":Oe=Za(Ue.slice(He));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ge)}var Ye=la(je,Le.slice(De.length),Oe,{unsafe:!0});me&&(Ye.ctype=me)}function Us(je,Ue){if(J(je.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var De=Ue&&Ue.root||"",Le=(da&&Buffer.isBuffer(je)?je.toString("binary"):J(je)).split(`\r
`),ge=0,me="";for(ge=0;ge<Le.length;++ge)if(me=Le[ge],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),De||(De=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,De.length)!=De))for(;De.length>0&&(De=De.slice(0,De.length-1),De=De.slice(0,De.lastIndexOf("/")+1),me.slice(0,De.length)!=De););var Oe=(Le[1]||"").match(/boundary="(.*?)"/);if(!Oe)throw new Error("MAD cannot find boundary");var He="--"+(Oe[1]||""),Re=[],We=[],Ye={FileIndex:Re,FullPaths:We};j(Ye);var wt,Nt=0;for(ge=0;ge<Le.length;++ge){var zt=Le[ge];zt!==He&&zt!==He+"--"||(Nt++&&Pn(Ye,Le.slice(wt,ge),De),wt=ge)}return Ye}function er(je,Ue){var De=Ue||{},Le=De.boundary||"SheetJS";Le="------="+Le;for(var ge=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Le.slice(2)+'"',"","",""],me=je.FullPaths[0],Oe=me,He=je.FileIndex[0],Re=1;Re<je.FullPaths.length;++Re)if(Oe=je.FullPaths[Re].slice(me.length),He=je.FileIndex[Re],!(!He.size||!He.content||Oe=="Sh33tJ5")){Oe=Oe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(jr){return"_x"+jr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(jr){return"_u"+jr.charCodeAt(0).toString(16)+"_"});for(var We=He.content,Ye=da&&Buffer.isBuffer(We)?We.toString("binary"):J(We),wt=0,Nt=Math.min(1024,Ye.length),zt=0,Ot=0;Ot<=Nt;++Ot)(zt=Ye.charCodeAt(Ot))>=32&&zt<128&&++wt;var Vt=wt>=Nt*4/5;ge.push(Le),ge.push("Content-Location: "+(De.root||"file:///C:/SheetJS/")+Oe),ge.push("Content-Transfer-Encoding: "+(Vt?"quoted-printable":"base64")),ge.push("Content-Type: "+pr(He,Oe)),ge.push(""),ge.push(Vt?gs(Ye):Jr(Ye))}return ge.push(Le+`--\r
`),ge.join(`\r
`)}function xa(je){var Ue={};return j(Ue,je),Ue}function la(je,Ue,De,Le){var ge=Le&&Le.unsafe;ge||j(je);var me=!ge&&Er.find(je,Ue);if(!me){var Oe=je.FullPaths[0];Ue.slice(0,Oe.length)==Oe?Oe=Ue:(Oe.slice(-1)!="/"&&(Oe+="/"),Oe=(Oe+Ue).replace("//","/")),me={name:n(Ue),type:2},je.FileIndex.push(me),je.FullPaths.push(Oe),ge||Er.utils.cfb_gc(je)}return me.content=De,me.size=De?De.length:0,Le&&(Le.CLSID&&(me.clsid=Le.CLSID),Le.mt&&(me.mt=Le.mt),Le.ct&&(me.ct=Le.ct)),me}function Ia(je,Ue){j(je);var De=Er.find(je,Ue);if(De){for(var Le=0;Le<je.FileIndex.length;++Le)if(je.FileIndex[Le]==De)return je.FileIndex.splice(Le,1),je.FullPaths.splice(Le,1),!0}return!1}function Wa(je,Ue,De){j(je);var Le=Er.find(je,Ue);if(Le){for(var ge=0;ge<je.FileIndex.length;++ge)if(je.FileIndex[ge]==Le)return je.FileIndex[ge].name=n(De),je.FullPaths[ge]=De,!0}return!1}function en(je){B(je,!0)}return t.find=D,t.read=O,t.parse=d,t.write=W,t.writeFile=G,t.utils={cfb_new:xa,cfb_add:la,cfb_del:Ia,cfb_mov:Wa,cfb_gc:en,ReadShift:X2,CheckField:dae,prep_blob:So,bconcat:io,use_zlib:M,_deflateRaw:bt,_inflateRaw:br,consts:V},t}();function zje(e){return typeof e=="string"?F_(e):Array.isArray(e)?mje(e):e}function PN(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=F_(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?cA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var n=new Blob([zje(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if(typeof saveAs<"u")return saveAs(n,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=fp(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Vje(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Ls(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function Dz(e,t){for(var r=[],a=Ls(e),n=0;n!==a.length;++n)r[e[a[n]][t]]==null&&(r[e[a[n]][t]]=a[n]);return r}function P_(e){for(var t=[],r=Ls(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function R_(e){for(var t=[],r=Ls(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function $je(e){for(var t=[],r=Ls(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var mk=new Date(1899,11,30,0,0,0);function Mi(e,t){var r=e.getTime(),a=mk.getTime()+(e.getTimezoneOffset()-mk.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var Vre=new Date,Gje=mk.getTime()+(Vre.getTimezoneOffset()-mk.getTimezoneOffset())*6e4,Pz=Vre.getTimezoneOffset();function L_(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Gje),t.getTimezoneOffset()!==Pz&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Pz)*6e4),t}function qje(e){var t=0,r=0,a=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(a=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(n[i],10)}return t}var Rz=new Date("2017-02-19T19:06:09.000Z"),$re=isNaN(Rz.getFullYear())?new Date("2/19/17"):Rz,Kje=$re.getFullYear()==2017;function qn(e,t){var r=new Date(e);if(Kje)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if($re.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Qg(e,t){if(da&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return cA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return cA(Ire(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return cA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return cA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var a=[],n=0;n!=e.length;++n)a.push(String.fromCharCode(e[n]));return a.join("")}function Kn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Kn(e[r]));return t}function Ts(e,t){for(var r="";r.length<t;)r+=e;return r}function ef(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var Wje=["january","february","march","april","may","june","july","august","september","october","november","december"];function Rb(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),n=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Wje.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Xje=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(n),o.push(i[l]);return o}}();function Gre(e){return e?e.content&&e.type?Qg(e.content,!0):e.data?N2(e.data):e.asNodeBuffer&&da?N2(e.asNodeBuffer().toString("binary")):e.asBinary?N2(e.asBinary()):e._data&&e._data.getContent?N2(Qg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function qre(e){if(!e)return null;if(e.data)return Ez(e.data);if(e.asNodeBuffer&&da)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?Ez(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Yje(e){return e&&e.name.slice(-4)===".bin"?qre(e):Gre(e)}function Ku(e,t){for(var r=e.FullPaths||Ls(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||n==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function f8(e,t){var r=Ku(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function xi(e,t,r){if(!r)return Yje(f8(e,t));if(!t)return null;try{return xi(e,t)}catch{return null}}function au(e,t,r){if(!r)return Gre(f8(e,t));if(!t)return null;try{return au(e,t)}catch{return null}}function Jje(e,t,r){return qre(f8(e,t))}function Lz(e){for(var t=e.FullPaths||Ls(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function na(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return da?a=c0(r):a=pje(r),Er.utils.cfb_add(e,t,a)}Er.utils.cfb_add(e,t,r)}else e.file(t,r)}function A8(){return Er.utils.cfb_new()}function Kre(e,t){switch(t.type){case"base64":return Er.read(e,{type:"base64"});case"binary":return Er.read(e,{type:"binary"});case"buffer":case"array":return Er.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function E2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var oi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Zje=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Mz=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,e5e=/<[^>]*>/g,bl=oi.match(Mz)?Mz:e5e,t5e=/<\w*:/,r5e=/<(\/?)\w+:/;function Vr(e,t,r){for(var a={},n=0,i=0;n!==e.length&&!((i=e.charCodeAt(n))===32||i===10||i===13);++n);if(t||(a[0]=e.slice(0,n)),n===e.length)return a;var o=e.match(Zje),l=0,c="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(d=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(h=(n=f.charCodeAt(i+1))==34||n==39?1:0,c=f.slice(i+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(a[m]&&d.slice(l-3,l)=="ext")continue;a[m]=c,a[m.toLowerCase()]=c}}return a}function SA(e){return e.replace(r5e,"<$1")}var Wre={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},h8=P_(Wre),Fa=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(e,function(l,c){return Wre[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,o)+r(n.slice(o+3))}}(),m8=/[&<>'"]/g,a5e=/[\u0000-\u0008\u000b-\u001f]/g;function vn(e){var t=e+"";return t.replace(m8,function(r){return h8[r]}).replace(a5e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Uz(e){return vn(e).replace(/ /g,"_x0020_")}var Xre=/[\u0000-\u001f]/g;function p8(e){var t=e+"";return t.replace(m8,function(r){return h8[r]}).replace(/\n/g,"<br/>").replace(Xre,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function n5e(e){var t=e+"";return t.replace(m8,function(r){return h8[r]}).replace(Xre,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var Qz=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function s5e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function $n(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function XB(e){for(var t="",r=0,a=0,n=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(n=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=n&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(n&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function Hz(e){var t=Jm(2*e.length),r,a,n=1,i=0,o=0,l;for(a=0;a<e.length;a+=n)n=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),n=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),n=3):(n=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function zz(e){return c0(e,"binary").toString("utf8")}var OE="foo bar bazâð£",kn=da&&(zz(OE)==XB(OE)&&zz||Hz(OE)==XB(OE)&&Hz)||XB,cA=da?function(e){return c0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,n=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Rw=function(){var e={};return function(r,a){var n=r+"|"+(a||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),Yre=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)a=a.replace(e[n][0],e[n][1]);return a}}(),i5e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),o5e=/<\/?(?:vt:)?variant>/g,l5e=/<(?:vt:)([^>]*)>([\s\S]*)</;function Vz(e,t){var r=Vr(e),a=e.match(i5e(r.baseType))||[],n=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(i){var o=i.replace(o5e,"").match(l5e);o&&n.push({v:kn(o[2]),t:o[1]})}),n}var Jre=/(^\s|\s$|\n)/;function _o(e,t){return"<"+e+(t.match(Jre)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Lw(e){return Ls(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function qt(e,t,r){return"<"+e+(r!=null?Lw(r):"")+(t!=null?(t.match(Jre)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function cF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function c5e(e,t){switch(typeof e){case"string":var r=qt("vt:lpwstr",vn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return qt((e|0)==e?"vt:i4":"vt:r8",vn(String(e)));case"boolean":return qt("vt:bool",e?"true":"false")}if(e instanceof Date)return qt("vt:filetime",cF(e));throw new Error("Unable to serialize "+e)}function g8(e){if(da&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return kn(fp(c8(e)));throw new Error("Bad input format: expected Buffer or string")}var Mw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Pi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},sx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Yc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function u5e(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,i=5;i>=0;--i)n=n*256+e[t+i];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function d5e(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,n=0,i=0,o=a?-t:t;isFinite(o)?o==0?n=i=0:(n=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(n&15)<<4|i&15,e[r+7]=n>>4|a}var $z=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var n=0,i=e[0][a].length;n<i;n+=r)t.push.apply(t,e[0][a].slice(n,n+r));return t},Gz=da?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:c0(t)})):$z(e)}:$z,qz=function(e,t,r){for(var a=[],n=t;n<r;n+=2)a.push(String.fromCharCode(Ch(e,n)));return a.join("").replace(Rl,"")},x8=da?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Rl,""):qz(e,t,r)}:qz,Kz=function(e,t,r){for(var a=[],n=t;n<t+r;++n)a.push(("0"+e[n].toString(16)).slice(-2));return a.join("")},Zre=da?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Kz(e,t,r)}:Kz,Wz=function(e,t,r){for(var a=[],n=t;n<r;n++)a.push(String.fromCharCode(_v(e,n)));return a.join("")},RN=da?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):Wz(t,r,a)}:Wz,eae=function(e,t){var r=Jc(e,t);return r>0?RN(e,t+4,t+4+r-1):""},tae=eae,rae=function(e,t){var r=Jc(e,t);return r>0?RN(e,t+4,t+4+r-1):""},aae=rae,nae=function(e,t){var r=2*Jc(e,t);return r>0?RN(e,t+4,t+4+r-1):""},sae=nae,iae=function(t,r){var a=Jc(t,r);return a>0?x8(t,r+4,r+4+a):""},oae=iae,lae=function(e,t){var r=Jc(e,t);return r>0?RN(e,t+4,t+4+r):""},cae=lae,uae=function(e,t){return u5e(e,t)},pk=uae,v8=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};da&&(tae=function(t,r){if(!Buffer.isBuffer(t))return eae(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},aae=function(t,r){if(!Buffer.isBuffer(t))return rae(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},sae=function(t,r){if(!Buffer.isBuffer(t))return nae(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},oae=function(t,r){if(!Buffer.isBuffer(t))return iae(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},cae=function(t,r){if(!Buffer.isBuffer(t))return lae(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},pk=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):uae(t,r)},v8=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var _v=function(e,t){return e[t]},Ch=function(e,t){return e[t+1]*256+e[t]},f5e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Jc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},rg=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},A5e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function X2(e,t){var r="",a,n,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,da&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Ch(this,u)),u+=2;e*=2;break;case"utf8":r=RN(this,this.l,this.l+e);break;case"utf16le":e*=2,r=x8(this,this.l,this.l+e);break;case"wstr":return X2.call(this,e,"dbcs");case"lpstr-ansi":r=tae(this,this.l),e=4+Jc(this,this.l);break;case"lpstr-cp":r=aae(this,this.l),e=4+Jc(this,this.l);break;case"lpwstr":r=sae(this,this.l),e=4+2*Jc(this,this.l);break;case"lpp4":e=4+Jc(this,this.l),r=oae(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Jc(this,this.l),r=cae(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=_v(this,this.l+e++))!==0;)i.push(IE(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Ch(this,this.l+e))!==0;)i.push(IE(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=_v(this,u),this.l=u+1,l=X2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(IE(Ch(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=_v(this,u),this.l=u+1,l=X2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(IE(_v(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=_v(this,this.l),this.l++,a;case 2:return a=(t==="i"?f5e:Ch)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?rg:A5e)(this,this.l),this.l+=4,a):(n=Jc(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=pk(this,this.l):n=pk([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=Zre(this,this.l,e);break}}return this.l+=e,r}var h5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},m5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},p5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function g5e(e,t,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)p5e(this,t.charCodeAt(n),this.l+2*n);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;a=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var o=t.charCodeAt(n);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,h5e(this,t,this.l);break;case 8:if(a=8,r==="f"){d5e(this,t,this.l);break}case 16:break;case-4:a=4,m5e(this,t,this.l);break}return this.l+=a,this}function dae(e,t){var r=Zre(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function So(e,t){e.l=t,e.read_shift=X2,e.chk=dae,e.write_shift=g5e}function xl(e,t){e.l+=t}function Et(e){var t=Jm(e);return So(t,0),t}function u0(e,t,r){if(e){var a,n,i;So(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=$w[l]||$w[65535];for(a=e.read_shift(1),i=a&127,n=1;n<4&&a&128;++n)i+=((a=e.read_shift(1))&127)<<7*n;c=e.l+i;var d=u.f&&u.f(e,i,r);if(e.l=c,t(d,u,l))return}}}function bc(){var e=[],t=da?256:2048,r=function(u){var d=Et(u);return So(d,0),d},a=r(t),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(n(),a=r(Math.max(u+1,t)))},o=function(){return n(),io(e)},l=function(u){n(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Ut(e,t,r,a){var n=+t,i;if(!isNaN(n)){a||(a=$w[n].p||(r||[]).length||0),i=1+(n>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);n<=127?o.write_shift(1,n):(o.write_shift(1,(n&127)+128),o.write_shift(1,n>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&v8(r)&&e.push(r)}}function Y2(e,t,r){var a=Kn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function Xz(e,t,r){var a=Kn(e);return a.s=Y2(a.s,t.s,r),a.e=Y2(a.e,t.s,r),a}function J2(e,t){if(e.cRel&&e.c<0)for(e=Kn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Kn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=b5e(r)),!e.rRel&&e.rRel!=null&&(r=x5e(r)),r}function YB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ds(e.s.c)+":"+(e.e.cRel?"":"$")+ds(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ni(e.s.r)+":"+(e.e.rRel?"":"$")+ni(e.e.r):J2(e.s,t.biff)+":"+J2(e.e,t.biff)}function b8(e){return parseInt(v5e(e),10)-1}function ni(e){return""+(e+1)}function x5e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function v5e(e){return e.replace(/\$(\d+)$/,"$1")}function y8(e){for(var t=y5e(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function ds(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function b5e(e){return e.replace(/^([A-Z])/,"$$$1")}function y5e(e){return e.replace(/^\$([A-Z])/,"$1")}function w5e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function fs(e){for(var t=0,r=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function wc(e){var t=e.indexOf(":");return t==-1?{s:fs(e),e:fs(e)}:{s:fs(e.slice(0,t)),e:fs(e.slice(t+1))}}function Zr(e,t){return typeof t>"u"||typeof t=="number"?Zr(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Pa(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,i=e.length;for(r=0;a<i&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(t.s.c=--r,r=0;a<i&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(t.s.r=--r,a===i||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(t.e.c=--r,r=0;a!=i&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return t.e.r=--r,t}function Yz(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=od(e.z,r?Mi(t):t)}catch{}try{return e.w=od((e.XF||{}).numFmtId||(r?14:0),r?Mi(t):t)}catch{return""+t}}function qh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?d0[e.v]||e.v:t==null?Yz(e,e.v):Yz(e,t))}function Ap(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function fae(e,t,r){var a=r||{},n=e?Array.isArray(e):a.dense,i=e||(n?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?fs(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Pa(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=o+f,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else if(a.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=a.dateNF||Dr[14],a.cellDates?(m.t="d",m.w=od(m.z,Mi(m.v))):(m.t="n",m.v=Mi(m.v),m.w=od(m.z,m.v))):m.t="s";if(n)i[g]||(i[g]=[]),i[g][x]&&i[g][x].z&&(m.z=i[g][x].z),i[g][x]=m;else{var v=Ur({c:x,r:g});i[v]&&i[v].z&&(m.z=i[v].z),i[v]=m}}}return u.s.c<1e7&&(i["!ref"]=Zr(u)),i}function S1(e,t){return fae(null,e,t)}function N5e(e){return e.read_shift(4,"i")}function tf(e,t){return t||(t=Et(4)),t.write_shift(4,e),t}function ml(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function oo(e,t){var r=!1;return t==null&&(r=!0,t=Et(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function C5e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function E5e(e,t){return t||(t=Et(4)),t.write_shift(2,0),t.write_shift(2,0),t}function w8(e,t){var r=e.l,a=e.read_shift(1),n=ml(e),i=[],o={t:n,h:n};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(C5e(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function j5e(e,t){var r=!1;return t==null&&(r=!0,t=Et(15+4*e.t.length)),t.write_shift(1,0),oo(e.t,t),r?t.slice(0,t.l):t}var k5e=w8;function S5e(e,t){var r=!1;return t==null&&(r=!0,t=Et(23+4*e.t.length)),t.write_shift(1,1),oo(e.t,t),t.write_shift(4,1),E5e({},t),r?t.slice(0,t.l):t}function ud(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function ix(e,t){return t==null&&(t=Et(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ox(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function lx(e,t){return t==null&&(t=Et(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var _5e=ml,Aae=oo;function N8(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function gk(e,t){var r=!1;return t==null&&(r=!0,t=Et(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var B5e=ml,uF=N8,C8=gk;function E8(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var n=a===0?pk([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):rg(t,0)>>2;return r?n/100:n}function hae(e,t){t==null&&(t=Et(4));var r=0,a=0,n=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?n:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function mae(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function T5e(e,t){return t||(t=Et(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var cx=mae,_1=T5e;function cl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Hg(e,t){return(t||Et(8)).write_shift(8,e,"f")}function I5e(e){var t={},r=e.read_shift(1),a=r>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=n;var u=yg[n];u&&(t.rgb=Qw(u));break;case 2:t.rgb=Qw([o,l,c]);break;case 3:t.theme=n;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function xk(e,t){if(t||(t=Et(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function O5e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function F5e(e,t){t||(t=Et(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function pae(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function D5e(e){return pae(e,1)}function P5e(e){return pae(e,2)}var j8=2,ac=3,FE=11,Jz=12,vk=19,DE=64,R5e=65,L5e=71,M5e=4108,U5e=4126,ro=80,gae=81,Q5e=[ro,gae],dF={1:{n:"CodePage",t:j8},2:{n:"Category",t:ro},3:{n:"PresentationFormat",t:ro},4:{n:"ByteCount",t:ac},5:{n:"LineCount",t:ac},6:{n:"ParagraphCount",t:ac},7:{n:"SlideCount",t:ac},8:{n:"NoteCount",t:ac},9:{n:"HiddenCount",t:ac},10:{n:"MultimediaClipCount",t:ac},11:{n:"ScaleCrop",t:FE},12:{n:"HeadingPairs",t:M5e},13:{n:"TitlesOfParts",t:U5e},14:{n:"Manager",t:ro},15:{n:"Company",t:ro},16:{n:"LinksUpToDate",t:FE},17:{n:"CharacterCount",t:ac},19:{n:"SharedDoc",t:FE},22:{n:"HyperlinksChanged",t:FE},23:{n:"AppVersion",t:ac,p:"version"},24:{n:"DigSig",t:R5e},26:{n:"ContentType",t:ro},27:{n:"ContentStatus",t:ro},28:{n:"Language",t:ro},29:{n:"Version",t:ro},255:{},2147483648:{n:"Locale",t:vk},2147483651:{n:"Behavior",t:vk},1919054434:{}},fF={1:{n:"CodePage",t:j8},2:{n:"Title",t:ro},3:{n:"Subject",t:ro},4:{n:"Author",t:ro},5:{n:"Keywords",t:ro},6:{n:"Comments",t:ro},7:{n:"Template",t:ro},8:{n:"LastAuthor",t:ro},9:{n:"RevNumber",t:ro},10:{n:"EditTime",t:DE},11:{n:"LastPrinted",t:DE},12:{n:"CreatedDate",t:DE},13:{n:"ModifiedDate",t:DE},14:{n:"PageCount",t:ac},15:{n:"WordCount",t:ac},16:{n:"CharCount",t:ac},17:{n:"Thumbnail",t:L5e},18:{n:"Application",t:ro},19:{n:"DocSecurity",t:ac},255:{},2147483648:{n:"Locale",t:vk},2147483651:{n:"Behavior",t:vk},1919054434:{}},Zz={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},H5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function z5e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var V5e=z5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),yg=Kn(V5e),d0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},xae={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},AF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},PE={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function k8(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $5e(e){var t=k8();if(!e||!e.match)return t;var r={};if((e.match(bl)||[]).forEach(function(a){var n=Vr(a);switch(n[0].replace(t5e,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":t[AF[n.ContentType]]!==void 0&&t[AF[n.ContentType]].push(n.PartName);break}}),t.xmlns!==Pi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function vae(e,t){var r=$je(AF),a=[],n;a[a.length]=oi,a[a.length]=qt("Types",null,{xmlns:Pi.CT,"xmlns:xsd":Pi.xsd,"xmlns:xsi":Pi.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return qt("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(n=e[c][0],a[a.length]=qt("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:PE[c][t.bookType]||PE[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){a[a.length]=qt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:PE[c][t.bookType]||PE[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){a[a.length]=qt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var ga={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Uw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Z2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(bl)||[]).forEach(function(n){var i=Vr(n);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:E2(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function sb(e){var t=[oi,qt("Relationships",null,{xmlns:Pi.RELS})];return Ls(e["!id"]).forEach(function(r){t[t.length]=qt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function gn(e,t,r,a,n,i){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,n.Id="rId"+t,n.Type=a,n.Target=r,[ga.HLINK,ga.XPATH,ga.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,t}var G5e="application/vnd.oasis.opendocument.spreadsheet";function q5e(e,t){for(var r=g8(e),a,n;a=Mw.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=Vr(a[0],!1),n.path=="/"&&n.type!==G5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function K5e(e){var t=[oi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function eV(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function W5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function X5e(e){var t=[oi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(eV(e[r][0],e[r][1])),t.push(W5e("",e[r][0]));return t.push(eV("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function bae(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+dk.version+"</meta:generator></office:meta></office:document-meta>"}var id=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Y5e=function(){for(var e=new Array(id.length),t=0;t<id.length;++t){var r=id[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function yae(e){var t={};e=kn(e);for(var r=0;r<id.length;++r){var a=id[r],n=e.match(Y5e[r]);n!=null&&n.length>0&&(t[a[1]]=Fa(n[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=qn(t[a[1]]))}return t}function JB(e,t,r,a,n){n[e]!=null||t==null||t===""||(n[e]=t,t=vn(t),a[a.length]=r?qt(e,t,r):_o(e,t))}function wae(e,t){var r=t||{},a=[oi,qt("cp:coreProperties",null,{"xmlns:cp":Pi.CORE_PROPS,"xmlns:dc":Pi.dc,"xmlns:dcterms":Pi.dcterms,"xmlns:dcmitype":Pi.dcmitype,"xmlns:xsi":Pi.xsi})],n={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&JB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:cF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n),e.ModifiedDate!=null&&JB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:cF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n));for(var i=0;i!=id.length;++i){var o=id[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&JB(o[0],l,null,a,n)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var wg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Nae=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Cae(e,t,r,a){var n=[];if(typeof e=="string")n=Vz(e,a);else for(var i=0;i<e.length;++i)n=n.concat(e[i].map(function(d){return{v:d}}));var o=typeof t=="string"?Vz(t,a).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==n.length;u+=2){switch(c=+n[u+1].v,n[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function J5e(e,t,r){var a={};return t||(t={}),e=kn(e),wg.forEach(function(n){var i=(e.match(Rw(n[0]))||[])[1];switch(n[2]){case"string":i&&(t[n[1]]=Fa(i));break;case"bool":t[n[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));o&&o.length>0&&(a[n[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&Cae(a.HeadingPairs,a.TitlesOfParts,t,r),t}function Eae(e){var t=[],r=qt;return e||(e={}),e.Application="SheetJS",t[t.length]=oi,t[t.length]=qt("Properties",null,{xmlns:Pi.EXT_PROPS,"xmlns:vt":Pi.vt}),wg.forEach(function(a){if(e[a[1]]!==void 0){var n;switch(a[2]){case"string":n=vn(String(e[a[1]]));break;case"bool":n=e[a[1]]?"true":"false";break}n!==void 0&&(t[t.length]=r(a[0],n))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+vn(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Z5e=/<[^>]+>[^<]*/g;function eke(e,t){var r={},a="",n=e.match(Z5e);if(n)for(var i=0;i!=n.length;++i){var o=n[i],l=Vr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Fa(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=Fa(d);break;case"bool":r[a]=$n(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(d);break;case"filetime":case"date":r[a]=qn(d);break;case"cy":case"error":r[a]=Fa(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function jae(e){var t=[oi,qt("Properties",null,{xmlns:Pi.CUST_PROPS,"xmlns:vt":Pi.vt})];if(!e)return t.join("");var r=1;return Ls(e).forEach(function(n){++r,t[t.length]=qt("property",c5e(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:vn(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var hF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},ZB;function tke(e,t,r){ZB||(ZB=P_(hF)),t=ZB[t]||t,e[t]=r}function rke(e,t){var r=[];return Ls(hF).map(function(a){for(var n=0;n<id.length;++n)if(id[n][1]==a)return id[n];for(n=0;n<wg.length;++n)if(wg[n][1]==a)return wg[n];throw a}).forEach(function(a){if(e[a[1]]!=null){var n=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),r.push(_o(hF[a[1]]||a[1],n))}}),qt("DocumentProperties",r.join(""),{xmlns:Yc.o})}function ake(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",n=[];return e&&Ls(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<id.length;++o)if(i==id[o][1])return;for(o=0;o<wg.length;++o)if(i==wg[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),n.push(qt(Uz(i),l,{"dt:dt":c}))}}),t&&Ls(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),n.push(qt(Uz(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Yc.o+'">'+n.join("")+"</"+a+">"}function S8(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function nke(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),n=(r-a)/Math.pow(2,32);a*=1e7,n*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),n+=i);var o=Et(8);return o.write_shift(4,a),o.write_shift(4,n),o}function kae(e,t,r){var a=e.l,n=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return n}function Sae(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function _ae(e,t,r){return t===31?Sae(e):kae(e,t,r)}function mF(e,t,r){return _ae(e,t,r===!1?0:4)}function ske(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return _ae(e,t,0)}function ike(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var n=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Rl,""),e.l-n&2&&(e.l+=2)}return r}function oke(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Rl,"");return r}function lke(e){var t=e.l,r=bk(e,gae);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=bk(e,ac);return[r,a]}function cke(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(lke(e));return r}function tV(e,t){for(var r=e.read_shift(4),a={},n=0;n!=r;++n){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Rl,"").replace(C2,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function Bae(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function uke(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function bk(e,t,r){var a=e.read_shift(2),n,i=r||{};if(e.l+=2,t!==Jz&&a!==t&&Q5e.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===Jz?a:t){case 2:return n=e.read_shift(2,"i"),i.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return kae(e,a,4).replace(Rl,"");case 31:return Sae(e);case 64:return S8(e);case 65:return Bae(e);case 71:return uke(e);case 80:return mF(e,a,!i.raw).replace(Rl,"");case 81:return ske(e,a).replace(Rl,"");case 4108:return cke(e);case 4126:case 4127:return a==4127?ike(e):oke(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function rV(e,t){var r=Et(4),a=Et(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Et(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=nke(t);break;case 31:case 80:for(a=Et(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return io([r,a])}function aV(e,t){var r=e.l,a=e.read_shift(4),n=e.read_shift(4),i=[],o=0,l=0,c=-1,u={};for(o=0;o!=n;++o){var d=e.read_shift(4),f=e.read_shift(4);i[o]=[d,f+r]}i.sort(function(N,C){return N[1]-C[1]});var h={};for(o=0;o!=n;++o){if(e.l!==i[o][1]){var m=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(m=!1,e.l=i[o][1]),m)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[i[o][0]];if(h[g.n]=bk(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Gd(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(i[o][0]===1){if(l=h.CodePage=bk(e,j8),Gd(l),c!==-1){var x=e.l;e.l=i[c][1],u=tV(e,l),e.l=x}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}u=tV(e,l)}else{var v=u[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Bae(e);break;case 30:e.l+=4,y=mF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=mF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Xs(e,4);break;case 64:e.l+=4,y=qn(S8(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+a,h}var Tae=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function dke(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function nV(e,t,r){var a=Et(8),n=[],i=[],o=8,l=0,c=Et(8),u=Et(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),n.push(u),o+=8+c.length,!t){u=Et(8),u.write_shift(4,0),n.unshift(u);var d=[Et(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Et(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=io(d),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(Tae.indexOf(e[l][0])>-1||Nae.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=rV(g.t,h)}else{var v=dke(h);v==-1&&(v=31,h=String(h)),c=rV(v,h)}i.push(c),u=Et(8),u.write_shift(4,t?m:2+l),n.push(u),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)n[l].write_shift(4,y),y+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),io([a].concat(n).concat(i))}function sV(e,t,r){var a=e.content;if(!a)return{};So(a,0);var n,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),d=a.read_shift(16);if(d!==Er.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=a.read_shift(16),l=a.read_shift(4),n===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);n===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=aV(a,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=i,n===1)return h;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var g;try{g=aV(a,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[i,o],h}function iV(e,t,r,a,n,i){var o=Et(n?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Er.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,n?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,n?68:48);var c=nV(e,r,a);if(l.push(c),n){var u=nV(n,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return io(l)}function J0(e,t){return e.read_shift(t),null}function fke(e,t){t||(t=Et(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Ake(e,t,r){for(var a=[],n=e.l+t;e.l<n;)a.push(r(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return a}function Xs(e,t){return e.read_shift(t)===1}function Bl(e,t){return t||(t=Et(2)),t.write_shift(2,+!!e),t}function vi(e){return e.read_shift(2,"u")}function Xu(e,t){return t||(t=Et(2)),t.write_shift(2,e),t}function Iae(e,t){return Ake(e,t,vi)}function hke(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Oae(e,t,r){return r||(r=Et(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function LN(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var o=a?e.read_shift(a,n):"";return o}function mke(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,n=r&8,i=1+(r&1),o=0,l,c={};n&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return n&&(e.l+=4*o),a&&(e.l+=l),c.t=d,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function pke(e){var t=e.t||"",r=Et(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Et(2*t.length);a.write_shift(2*t.length,t,"utf16le");var n=[r,a];return io(n)}function zg(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function MN(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):zg(e,a,r)}function ux(e,t,r){if(r.biff>5)return MN(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Fae(e,t,r){return r||(r=Et(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function gke(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function xke(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var n=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Rl,"");return a&&(e.l+=24),n}function vke(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Rl,"");return r+o}function bke(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return xke(e);case"0303000000000000c000000000000046":return vke(e);default:throw new Error("Unsupported Moniker "+r)}}function RE(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Rl,""):"";return r}function oV(e,t){t||(t=Et(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function yke(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=e.read_shift(2);e.l+=2;var i,o,l,c,u="",d,f;n&16&&(i=RE(e,r-e.l)),n&128&&(o=RE(e,r-e.l)),(n&257)===257&&(l=RE(e,r-e.l)),(n&257)===1&&(c=bke(e,r-e.l)),n&8&&(u=RE(e,r-e.l)),n&32&&(d=e.read_shift(16)),n&64&&(f=S8(e)),e.l=r;var h=o||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),n&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),i&&(m.Tooltip=i),m}function wke(e){var t=Et(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var n=a.indexOf("#"),i=n>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),oV(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=n>-1?a.slice(0,n):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&oV(n>-1?a.slice(n+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Dae(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),n=e.read_shift(1);return[t,r,a,n]}function Pae(e,t){var r=Dae(e);return r[3]=0,r}function _A(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Vg(e,t,r,a){return a||(a=Et(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Nke(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Cke(e,t,r){return t===0?"":ux(e,t,r)}function Eke(e,t,r){var a=r.biff>8?4:2,n=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[n,i,o]}function Rae(e){var t=e.read_shift(2),r=E8(e);return[t,r]}function jke(e,t,r){e.l+=4,t-=4;var a=e.l+t,n=LN(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,n}function M_(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),n=e.read_shift(2);return{s:{c:a,r:t},e:{c:n,r}}}function Lae(e,t){return t||(t=Et(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Mae(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),n=e.read_shift(1);return{s:{c:a,r:t},e:{c:n,r}}}var kke=Mae;function Uae(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function Ske(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function _ke(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function qo(e){e.l+=2,e.l+=e.read_shift(2)}var Bke={0:qo,4:qo,5:qo,6:qo,7:_ke,8:qo,9:qo,10:qo,11:qo,12:qo,13:Ske,14:qo,15:qo,16:qo,17:qo,18:qo,19:qo,20:qo,21:Uae};function Tke(e,t){for(var r=e.l+t,a=[];e.l<r;){var n=e.read_shift(2);e.l-=2;try{a.push(Bke[n](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function LE(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function _8(e,t,r){var a=1536,n=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,n=8;break;case"biff4":a=4,n=6;break;case"biff3":a=3,n=6;break;case"biff2":a=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Et(n);return i.write_shift(2,a),i.write_shift(2,t),n>4&&i.write_shift(2,29282),n>6&&i.write_shift(2,1997),n>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Ike(e,t){return t===0||e.read_shift(2),1200}function Oke(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,n=ux(e,0,r);return e.read_shift(t+a-e.l),n}function Fke(e,t){var r=!t||t.biff==8,a=Et(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Dke(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Pke(e,t,r){var a=e.read_shift(4),n=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=LN(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:n,dt:i,name:o}}function Rke(e,t){var r=!t||t.biff>=8?2:1,a=Et(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var n=a.slice(0,a.l);return n.l=a.l,n}function Lke(e,t){for(var r=e.l+t,a=e.read_shift(4),n=e.read_shift(4),i=[],o=0;o!=n&&e.l<r;++o)i.push(mke(e));return i.Count=a,i.Unique=n,i}function Mke(e,t){var r=Et(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],n=0;n<e.length;++n)a[n]=pke(e[n]);var i=io([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function Uke(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Qke(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Hke(e){var t=Nke(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function zke(e){return e.read_shift(2),e.read_shift(4)}function lV(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var n=e.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function Vke(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,n],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function $ke(){var e=Et(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Gke(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function qke(e){var t=Et(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Kke(){}function Wke(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=LN(e,0,r),a}function Xke(e,t){var r=e.name||"Arial",a=t&&t.biff==5,n=a?15+r.length:16+2*r.length,i=Et(n);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function Yke(e){var t=_A(e);return t.isst=e.read_shift(4),t}function Jke(e,t,r,a){var n=Et(10);return Vg(e,t,a,n),n.write_shift(4,r),n}function Zke(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,n=_A(e);r.biff==2&&e.l++;var i=MN(e,a-e.l,r);return n.val=i,n}function eSe(e,t,r,a,n){var i=!n||n.biff==8,o=Et(8+ +i+(1+i)*r.length);return Vg(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function tSe(e,t,r){var a=e.read_shift(2),n=ux(e,0,r);return[a,n]}function rSe(e,t,r,a){var n=r&&r.biff==5;a||(a=Et(n?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(n?1:2,t.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var aSe=ux;function cV(e,t,r){var a=e.l+t,n=r.biff==8||!r.biff?4:2,i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function nSe(e,t){var r=t.biff==8||!t.biff?4:2,a=Et(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function sSe(e){var t=e.read_shift(2),r=e.read_shift(2),a=Rae(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function iSe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),n=e.read_shift(2),i=[];e.l<r;)i.push(Rae(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:o,rkrec:i}}function oSe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),n=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:o,ixfe:i}}function lSe(e,t,r,a){var n={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return n.patternType=H5e[l>>26],a.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=o&15,n.dgRight=o>>4&15,n.dgTop=o>>8&15,n.dgBottom=o>>12&15,n.icvLeft=o>>16&127,n.icvRight=o>>23&127,n.grbitDiag=o>>30&3,n.icvTop=l&127,n.icvBottom=l>>7&127,n.icvDiag=l>>14&127,n.dgDiag=l>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function cSe(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=lSe(e,t,a.fStyle,r),a}function uV(e,t,r,a){var n=r&&r.biff==5;a||(a=Et(n?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&n&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),n||a.write_shift(4,0),a.write_shift(2,0),a}function uSe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function dSe(e){var t=Et(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function dV(e,t,r){var a=_A(e);(r.biff==2||t==9)&&++e.l;var n=hke(e);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function fSe(e,t,r,a,n,i){var o=Et(8);return Vg(e,t,a,o),Oae(r,i,o),o}function ASe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=_A(e),n=cl(e);return a.val=n,a}function hSe(e,t,r,a){var n=Et(14);return Vg(e,t,a,n),Hg(r,n),n}var fV=Cke;function mSe(e,t,r){var a=e.l+t,n=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=zg(e,i),l=[];a>e.l;)l.push(MN(e));return[i,n,o,l]}function AV(e,t,r){var a=e.read_shift(2),n,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=jke(e,t-2,r)),i.body=n||e.read_shift(t-2),typeof n=="string"&&(i.Name=n),i}var pSe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function hV(e,t,r){var a=e.l+t,n=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=zg(e,o,r);n&32&&(u=pSe[u.charCodeAt(0)]);var d=a-e.l;r&&r.biff==2&&--d;var f=a==e.l||l===0||!(d>0)?[]:TBe(e,d,r,l);return{chKey:i,Name:u,itab:c,rgce:f}}function Qae(e,t,r){if(r.biff<8)return gSe(e,t,r);for(var a=[],n=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Eke(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return a}function gSe(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=LN(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function xSe(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),n=e.read_shift(2),i=zg(e,a,r),o=zg(e,n,r);return[i,o]}function vSe(e,t,r){var a=Mae(e);e.l++;var n=e.read_shift(1);return t-=8,[IBe(e,t,r),n,a]}function mV(e,t,r){var a=kke(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,_Be(e,t,r)]}function bSe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function ySe(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=ux(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:n},l,o,i]}}function wSe(e,t,r){return ySe(e,t,r)}function NSe(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(M_(e));return r}function CSe(e){var t=Et(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Lae(e[r],t);return t}function ESe(e,t,r){if(r&&r.biff<8)return kSe(e,t,r);var a=Uae(e),n=Tke(e,t-22,a[1]);return{cmo:a,ft:n}}var jSe={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=r,{fmt:a}}};function kSe(e,t,r){e.l+=4;var a=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((jSe[a]||xl)(e,t,r)),{cmo:[n,a,i],ft:o}}function SSe(e,t,r){var a=e.l,n="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=gke(e,6,r);var l=e.read_shift(2);e.read_shift(2),vi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=zg(e,e.lens[u+1]-e.lens[u]-1);if(n+=f,n.length>=(d?l:2*l))break}if(n.length!==l&&n.length!==l*2)throw new Error("cchText: "+l+" != "+n.length);return e.l=a+t,{t:n}}catch{return e.l=a+t,{t:n}}}function _Se(e,t){var r=M_(e);e.l+=16;var a=yke(e,t-24);return[r,a]}function BSe(e){var t=Et(24),r=fs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)t.write_shift(1,parseInt(a[n],16));return io([t,wke(e[1])])}function TSe(e,t){e.read_shift(2);var r=M_(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Rl,""),[r,a]}function ISe(e){var t=e[1].Tooltip,r=Et(10+2*(t.length+1));r.write_shift(2,2048);var a=fs(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var n=0;n<t.length;++n)r.write_shift(2,t.charCodeAt(n));return r.write_shift(2,0),r}function OSe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=Zz[r]||r,r=e.read_shift(2),t[1]=Zz[r]||r,t}function FSe(e){return e||(e=Et(4)),e.write_shift(2,1),e.write_shift(2,1),e}function DSe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Pae(e));return r}function PSe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Pae(e));return r}function RSe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Hae(e,t,r){if(!r.cellStyles)return xl(e,t);var a=r&&r.biff>=12?4:2,n=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var u={s:n,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function LSe(e,t){var r=Et(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function MSe(e,t){var r={};return t<32||(e.l+=16,r.header=cl(e),r.footer=cl(e),e.l+=2),r}function USe(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var n=e.read_shift(1);return e.l+=3,n&16&&(a.area=!0),a}function QSe(e){for(var t=Et(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var HSe=_A,zSe=Iae,VSe=MN;function $Se(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),n={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,n}function GSe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=_A(e);++e.l;var n=ux(e,t-7,r);return a.t="str",a.val=n,a}function qSe(e){var t=_A(e);++e.l;var r=cl(e);return t.t="n",t.val=r,t}function KSe(e,t,r){var a=Et(15);return zN(a,e,t),a.write_shift(8,r,"f"),a}function WSe(e){var t=_A(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function XSe(e,t,r){var a=Et(9);return zN(a,e,t),a.write_shift(2,r),a}function YSe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function JSe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function ZSe(e,t,r){var a=e.l+t,n=_A(e),i=e.read_shift(2),o=zg(e,i,r);return e.l=a,n.t="str",n.val=o,n}var e_e=[2,3,48,49,131,139,140,245],pF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=P_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Jm(1);switch(c.type){case"base64":d=ru(cu(l));break;case"binary":d=ru(l);break;case"buffer":case"array":d=l;break}So(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),N=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(N=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var C=[],T={},_=Math.min(d.length,f==2?521:v-10-(m?264:0)),O=g?32:11;d.l<_&&d[d.l]!=13;)switch(T={},T.name=Fw.utils.decode(N,d.slice(d.l,d.l+O)).replace(/[\u0000\r\n].*$/g,""),d.l+=O,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&C.push(T),f!=2&&(d.l+=g?13:14),T.type){case"B":(!m||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var j=0,S=0;for(u[0]=[],S=0;S!=C.length;++S)u[0][S]=C[S].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++j]=[],S=0,S=0;S!=C.length;++S){var B=d.slice(d.l,d.l+C[S].len);d.l+=C[S].len,So(B,0);var L=Fw.utils.decode(N,B);switch(C[S].type){case"C":L.trim().length&&(u[j][S]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[j][S]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[j][S]=L;break;case"F":u[j][S]=parseFloat(L.trim());break;case"+":case"I":u[j][S]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[j][S]=!0;break;case"N":case"F":u[j][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][S]="##MEMO##"+(g?parseInt(L.trim(),10):B.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[j][S]=+L||0);break;case"@":u[j][S]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[j][S]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[j][S]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][S]=-B.read_shift(-8,"f");break;case"B":if(m&&C[S].len==8){u[j][S]=B.read_shift(8,"f");break}case"G":case"P":B.l+=C[S].len;break;case"0":if(C[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=C,u}function a(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=S1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function n(l,c){try{return Ap(a(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Gd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=bc(),f=Nk(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,N=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var C=Pa(l["!ref"]),T=[],_=[],O=[];for(x=0;x<=C.e.c-C.s.c;++x){var j="",S="",B=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||h[x]==null){T[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=L[v]instanceof Date?"D":"C";break;default:S="C"}B=Math.max(B,String(L[v]).length),j=j&&j!=S?"C":S}B>250&&(B=250),S=((g[x]||{}).DBF||{}).type,S=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),j=="B"&&S=="N"&&(j="N",O[x]=g[x].DBF.dec,B=g[x].DBF.len),_[x]=j=="C"||S=="N"?B:i[j]||0,N+=_[x],T[x]=j}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,m.length),D.write_shift(2,296+32*y),D.write_shift(2,N),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+t[Tre]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var k=d.next(32),R=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,R,"sbcs"),k.write_shift(1,T[x]=="?"?"C":T[x],"sbcs"),k.write_shift(4,v),k.write_shift(1,_[x]||i[T[x]]||0),k.write_shift(1,O[x]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),v+=_[x]||i[T[x]]||0}var U=d.next(264);for(U.write_shift(4,13),x=0;x<65;++x)U.write_shift(4,0);for(x=0;x<m.length;++x){var H=d.next(N);for(H.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":H.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":H.write_shift(8,m[x][v]||0,"f");break;case"N":var Q="0";for(typeof m[x][v]=="number"&&(Q=m[x][v].toFixed(O[v]||0)),y=0;y<_[v]-Q.length;++y)H.write_shift(1,32);H.write_shift(1,Q,"sbcs");break;case"D":m[x][v]?(H.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),H.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),H.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):H.write_shift(8,"00000000","sbcs");break;case"C":var V=String(m[x][v]!=null?m[x][v]:"").slice(0,_[v]);for(H.write_shift(1,V,"sbcs"),y=0;y<_[v]-V.length;++y)H.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:n,to_sheet:a,from_sheet:o}}(),zae=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ls(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?jz(g):g},a=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:jz(x)};e["|"]=254;function n(h,m){switch(m.type){case"base64":return i(cu(h),m);case"binary":return i(h,m);case"buffer":return i(da&&Buffer.isBuffer(h)?h.toString("binary"):fp(h),m);case"array":return i(Qg(h),m)}throw new Error("Unrecognized type "+m.type)}function i(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,N=0,C=[],T=[],_=null,O={},j=[],S=[],B=[],L=0,D;for(+m.codepage>=0&&Gd(+m.codepage);y!==g.length;++y){L=0;var k=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),R=k.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),U=R[0],H;if(k.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&T.push(k.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,V=!1,G=!1,J=!1,W=-1,Z=-1;for(N=1;N<R.length;++N)switch(R[N].charAt(0)){case"A":break;case"X":v=parseInt(R[N].slice(1))-1,V=!0;break;case"Y":for(x=parseInt(R[N].slice(1))-1,V||(v=0),D=C.length;D<=x;++D)C[D]=[];break;case"K":H=R[N].slice(1),H.charAt(0)==='"'?H=H.slice(1,H.length-1):H==="TRUE"?H=!0:H==="FALSE"?H=!1:isNaN(ef(H))?isNaN(Rb(H).getDate())||(H=qn(H)):(H=ef(H),_!==null&&j1(_)&&(H=L_(H))),Q=!0;break;case"E":J=!0;var M=ib(R[N].slice(1),{r:x,c:v});C[x][v]=[C[x][v],M];break;case"S":G=!0,C[x][v]=[C[x][v],"S5S"];break;case"G":break;case"R":W=parseInt(R[N].slice(1))-1;break;case"C":Z=parseInt(R[N].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}if(Q&&(C[x][v]&&C[x][v].length==2?C[x][v][0]=H:C[x][v]=H,_=null),G){if(J)throw new Error("SYLK shared formula cannot have own formula");var F=W>-1&&C[W][Z];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");C[x][v][1]=one(F[1],{r:x-W,c:v-Z})}break;case"F":var X=0;for(N=1;N<R.length;++N)switch(R[N].charAt(0)){case"X":v=parseInt(R[N].slice(1))-1,++X;break;case"Y":for(x=parseInt(R[N].slice(1))-1,D=C.length;D<=x;++D)C[D]=[];break;case"M":L=parseInt(R[N].slice(1))/20;break;case"F":break;case"G":break;case"P":_=T[parseInt(R[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=R[N].slice(1).split(" "),D=parseInt(B[0],10);D<=parseInt(B[1],10);++D)L=parseInt(B[2],10),S[D-1]=L===0?{hidden:!0}:{wch:L},Zm(S[D-1]);break;case"C":v=parseInt(R[N].slice(1))-1,S[v]||(S[v]={});break;case"R":x=parseInt(R[N].slice(1))-1,j[x]||(j[x]={}),L>0?(j[x].hpt=L,j[x].hpx=Mb(L)):L===0&&(j[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}X<1&&(_=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}}return j.length>0&&(O["!rows"]=j),S.length>0&&(O["!cols"]=S),m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),[C,O]}function o(h,m){var g=n(h,m),x=g[0],v=g[1],y=S1(x,m);return Ls(v).forEach(function(N){y[N]=v[N]}),y}function l(h,m){return Ap(o(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+D8(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Hw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=zw(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*Vw(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Pa(h["!ref"]),y,N=Array.isArray(h),C=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var _=v.s.c;_<=v.e.c;++_){var O=Ur({r:T,c:_});y=N?(h[T]||[])[_]:h[O],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,T,_))}return g.join(C)+C+x.join(C)+C+"E"+C}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),Vae=function(){function e(i,o){switch(o.type){case"base64":return t(cu(i),o);case"binary":return t(i,o);case"buffer":return t(da&&Buffer.isBuffer(i)?i.toString("binary"):fp(i),o);case"array":return t(Qg(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(ef(g))?isNaN(Rb(g).getDate())?f[c][u]=g:f[c][u]=qn(g):f[c][u]=ef(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return S1(e(i,o),o)}function a(i,o){return Ap(r(i,o),o)}var n=function(){var i=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Pa(c["!ref"]),f,h=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Ur({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=od(f.z||Dr[14],Mi(qn(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,N=u.join(y);return N}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),$ae=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var N=m[v].trim().split(":");if(N[0]==="cell"){var C=fs(N[1]);if(y.length<=C.r)for(g=y.length;g<=C.r;++g)y[g]||(y[g]=[]);switch(g=C.r,x=C.c,N[2]){case"t":y[g][x]=e(N[3]);break;case"v":y[g][x]=+N[3];break;case"vtf":var T=N[N.length-1];case"vtc":switch(N[3]){case"nl":y[g][x]=!!+N[4];break;default:y[g][x]=+N[4];break}N[2]=="vtf"&&(y[g][x]=[y[g][x],T])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function a(f,h){return S1(r(f,h),h)}function n(f,h){return Ap(a(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=wc(f["!ref"]),y=Array.isArray(f),N=v.s.r;N<=v.e.r;++N)for(var C=v.s.c;C<=v.e.c;++C)if(x=Ur({r:N,c:C}),g=y?(f[N]||[])[C]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var T=Mi(qn(g.v));m[2]="vtc",m[3]="nd",m[4]=""+T,m[5]=g.w||od(g.z||Dr[14],T);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[i,o,l,o,u(f),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:d}}(),Lb=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(ef(d))?isNaN(Rb(d).getDate())?f[h][m]=d:f[h][m]=qn(d):f[h][m]=ef(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,N=0;N<=x;++N)y=g[N].indexOf(" "),y==-1?y=g[N].length:y++,v=Math.max(v,y);for(N=0;N<=x;++N){m[N]=[];var C=0;for(e(g[N].slice(0,v).trim(),m,N,C,h),C=1;C<=(g[N].length-v)/10+1;++C)e(g[N].slice(v+(C-1)*10,v+C*10).trim(),m,N,C,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=a;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||a[x[1]]-a[v[1]]}),r[g.pop()[1]]||44}function i(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=n(d.slice(0,1024)):h&&h.FS?m=h.FS:m=n(d.slice(0,1024));var v=0,y=0,N=0,C=0,T=0,_=m.charCodeAt(0),O=!1,j=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=h.dateNF!=null?Uje(h.dateNF):null;function L(){var D=d.slice(C,T),k={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)k.t="z";else if(h.raw)k.t="s",k.v=D;else if(D.trim().length===0)k.t="s",k.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(k.t="s",k.v=D.slice(2,-1).replace(/""/g,'"')):m3e(D)?(k.t="n",k.f=D.slice(1)):(k.t="s",k.v=D);else if(D=="TRUE")k.t="b",k.v=!0;else if(D=="FALSE")k.t="b",k.v=!1;else if(!isNaN(N=ef(D)))k.t="n",h.cellText!==!1&&(k.w=D),k.v=N;else if(!isNaN(Rb(D).getDate())||B&&D.match(B)){k.z=h.dateNF||Dr[14];var R=0;B&&D.match(B)&&(D=Qje(D,h.dateNF,D.match(B)||[]),R=1),h.cellDates?(k.t="d",k.v=qn(D,R)):(k.t="n",k.v=Mi(qn(D,R))),h.cellText!==!1&&(k.w=od(k.z,k.v instanceof Date?Mi(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=D;if(k.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=k):g[Ur({c:y,r:v})]=k),C=T+1,S=d.charCodeAt(C),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),j==_)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<d.length;++T)switch(j=d.charCodeAt(T)){case 34:S===34&&(O=!O);break;case _:case 10:case 13:if(!O&&L())break e;break}return T-C>0&&L(),g["!ref"]=Zr(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):S1(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:z8(d,f);switch(f.type){case"base64":h=cu(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Fw<"u"||(h=da&&Buffer.isBuffer(d)?d.toString("binary"):fp(d));break;case"array":h=Qg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=kn(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=kn(h):f.type=="binary"&&typeof Fw<"u",h.slice(0,19)=="socialcalc:version:"?$ae.to_sheet(f.type=="string"?h:kn(h),f):o(h,f)}function c(d,f){return Ap(l(d,f),f)}function u(d){for(var f=[],h=Pa(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var N=Ur({r:x,c:y});if(m=g?(d[x]||[])[y]:d[N],!m||m.v==null){v.push("          ");continue}for(var C=(m.w||(qh(m),m.w)||"").slice(0,10);C.length<10;)C+=" ";v.push(C+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function t_e(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var n=zae.to_workbook(e,r);return r.WTF=a,n}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Lb.to_workbook(e,t)}}var Ng=function(){function e(M,F,X){if(M){So(M,M.l||0);for(var Y=X.Enum||W;M.l<M.length;){var ae=M.read_shift(2),le=Y[ae]||Y[65535],ie=M.read_shift(2),ne=M.l+ie,oe=le.f&&le.f(M,ie,X);if(M.l=ne,F(oe,le,ae))return}}}function t(M,F){switch(F.type){case"base64":return r(ru(cu(M)),F);case"binary":return r(ru(M),F);case"buffer":case"array":return r(M,F)}throw"Unsupported type "+F.type}function r(M,F){if(!M)return M;var X=F||{},Y=X.dense?[]:{},ae="Sheet1",le="",ie=0,ne={},oe=[],we=[],K={s:{r:0,c:0},e:{r:0,c:0}},Ee=X.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)X.Enum=W,e(M,function(xe,he,ye){switch(ye){case 0:X.vers=xe,xe>=4096&&(X.qpro=!0);break;case 6:K=xe;break;case 204:xe&&(le=xe);break;case 222:le=xe;break;case 15:case 51:X.qpro||(xe[1].v=xe[1].v.slice(1));case 13:case 14:case 16:ye==14&&(xe[2]&112)==112&&(xe[2]&15)>1&&(xe[2]&15)<15&&(xe[1].z=X.dateNF||Dr[14],X.cellDates&&(xe[1].t="d",xe[1].v=L_(xe[1].v))),X.qpro&&xe[3]>ie&&(Y["!ref"]=Zr(K),ne[ae]=Y,oe.push(ae),Y=X.dense?[]:{},K={s:{r:0,c:0},e:{r:0,c:0}},ie=xe[3],ae=le||"Sheet"+(ie+1),le="");var ce=X.dense?(Y[xe[0].r]||[])[xe[0].c]:Y[Ur(xe[0])];if(ce){ce.t=xe[1].t,ce.v=xe[1].v,xe[1].z!=null&&(ce.z=xe[1].z),xe[1].f!=null&&(ce.f=xe[1].f);break}X.dense?(Y[xe[0].r]||(Y[xe[0].r]=[]),Y[xe[0].r][xe[0].c]=xe[1]):Y[Ur(xe[0])]=xe[1];break}},X);else if(M[2]==26||M[2]==14)X.Enum=Z,M[2]==14&&(X.qpro=!0,M.l=0),e(M,function(xe,he,ye){switch(ye){case 204:ae=xe;break;case 22:xe[1].v=xe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(xe[3]>ie&&(Y["!ref"]=Zr(K),ne[ae]=Y,oe.push(ae),Y=X.dense?[]:{},K={s:{r:0,c:0},e:{r:0,c:0}},ie=xe[3],ae="Sheet"+(ie+1)),Ee>0&&xe[0].r>=Ee)break;X.dense?(Y[xe[0].r]||(Y[xe[0].r]=[]),Y[xe[0].r][xe[0].c]=xe[1]):Y[Ur(xe[0])]=xe[1],K.e.c<xe[0].c&&(K.e.c=xe[0].c),K.e.r<xe[0].r&&(K.e.r=xe[0].r);break;case 27:xe[14e3]&&(we[xe[14e3][0]]=xe[14e3][1]);break;case 1537:we[xe[0]]=xe[1],xe[0]==ie&&(ae=xe[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Y["!ref"]=Zr(K),ne[le||ae]=Y,oe.push(le||ae),!we.length)return{SheetNames:oe,Sheets:ne};for(var _e={},Ce=[],de=0;de<we.length;++de)ne[oe[de]]?(Ce.push(we[de]||oe[de]),_e[we[de]]=ne[we[de]]||ne[oe[de]]):(Ce.push(we[de]),_e[we[de]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:_e}}function a(M,F){var X=F||{};if(+X.codepage>=0&&Gd(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=bc(),ae=Pa(M["!ref"]),le=Array.isArray(M),ie=[];Wt(Y,0,i(1030)),Wt(Y,6,c(ae));for(var ne=Math.min(ae.e.r,8191),oe=ae.s.r;oe<=ne;++oe)for(var we=ni(oe),K=ae.s.c;K<=ae.e.c;++K){oe===ae.s.r&&(ie[K]=ds(K));var Ee=ie[K]+we,_e=le?(M[oe]||[])[K]:M[Ee];if(!(!_e||_e.t=="z"))if(_e.t=="n")(_e.v|0)==_e.v&&_e.v>=-32768&&_e.v<=32767?Wt(Y,13,m(oe,K,_e.v)):Wt(Y,14,x(oe,K,_e.v));else{var Ce=qh(_e);Wt(Y,15,f(oe,K,Ce.slice(0,239)))}}return Wt(Y,1),Y.end()}function n(M,F){var X=F||{};if(+X.codepage>=0&&Gd(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=bc();Wt(Y,0,o(M));for(var ae=0,le=0;ae<M.SheetNames.length;++ae)(M.Sheets[M.SheetNames[ae]]||{})["!ref"]&&Wt(Y,27,J(M.SheetNames[ae],le++));var ie=0;for(ae=0;ae<M.SheetNames.length;++ae){var ne=M.Sheets[M.SheetNames[ae]];if(!(!ne||!ne["!ref"])){for(var oe=Pa(ne["!ref"]),we=Array.isArray(ne),K=[],Ee=Math.min(oe.e.r,8191),_e=oe.s.r;_e<=Ee;++_e)for(var Ce=ni(_e),de=oe.s.c;de<=oe.e.c;++de){_e===oe.s.r&&(K[de]=ds(de));var xe=K[de]+Ce,he=we?(ne[_e]||[])[de]:ne[xe];if(!(!he||he.t=="z"))if(he.t=="n")Wt(Y,23,L(_e,de,ie,he.v));else{var ye=qh(he);Wt(Y,22,j(_e,de,ie,ye.slice(0,239)))}}++ie}}return Wt(Y,1),Y.end()}function i(M){var F=Et(2);return F.write_shift(2,M),F}function o(M){var F=Et(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var X=0,Y=0,ae=0,le=0;le<M.SheetNames.length;++le){var ie=M.SheetNames[le],ne=M.Sheets[ie];if(!(!ne||!ne["!ref"])){++ae;var oe=wc(ne["!ref"]);X<oe.e.r&&(X=oe.e.r),Y<oe.e.c&&(Y=oe.e.c)}}return X>8191&&(X=8191),F.write_shift(2,X),F.write_shift(1,ae),F.write_shift(1,Y),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(M,F,X){var Y={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&X.qpro?(Y.s.c=M.read_shift(1),M.l++,Y.s.r=M.read_shift(2),Y.e.c=M.read_shift(1),M.l++,Y.e.r=M.read_shift(2),Y):(Y.s.c=M.read_shift(2),Y.s.r=M.read_shift(2),F==12&&X.qpro&&(M.l+=2),Y.e.c=M.read_shift(2),Y.e.r=M.read_shift(2),F==12&&X.qpro&&(M.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function c(M){var F=Et(8);return F.write_shift(2,M.s.c),F.write_shift(2,M.s.r),F.write_shift(2,M.e.c),F.write_shift(2,M.e.r),F}function u(M,F,X){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(Y[0].c=M.read_shift(1),Y[3]=M.read_shift(1),Y[0].r=M.read_shift(2),M.l+=2):(Y[2]=M.read_shift(1),Y[0].c=M.read_shift(2),Y[0].r=M.read_shift(2)),Y}function d(M,F,X){var Y=M.l+F,ae=u(M,F,X);if(ae[1].t="s",X.vers==20768){M.l++;var le=M.read_shift(1);return ae[1].v=M.read_shift(le,"utf8"),ae}return X.qpro&&M.l++,ae[1].v=M.read_shift(Y-M.l,"cstr"),ae}function f(M,F,X){var Y=Et(7+X.length);Y.write_shift(1,255),Y.write_shift(2,F),Y.write_shift(2,M),Y.write_shift(1,39);for(var ae=0;ae<Y.length;++ae){var le=X.charCodeAt(ae);Y.write_shift(1,le>=128?95:le)}return Y.write_shift(1,0),Y}function h(M,F,X){var Y=u(M,F,X);return Y[1].v=M.read_shift(2,"i"),Y}function m(M,F,X){var Y=Et(7);return Y.write_shift(1,255),Y.write_shift(2,F),Y.write_shift(2,M),Y.write_shift(2,X,"i"),Y}function g(M,F,X){var Y=u(M,F,X);return Y[1].v=M.read_shift(8,"f"),Y}function x(M,F,X){var Y=Et(13);return Y.write_shift(1,255),Y.write_shift(2,F),Y.write_shift(2,M),Y.write_shift(8,X,"f"),Y}function v(M,F,X){var Y=M.l+F,ae=u(M,F,X);if(ae[1].v=M.read_shift(8,"f"),X.qpro)M.l=Y;else{var le=M.read_shift(2);T(M.slice(M.l,M.l+le),ae),M.l+=le}return ae}function y(M,F,X){var Y=F&32768;return F&=-32769,F=(Y?M:0)+(F>=8192?F-16384:F),(Y?"":"$")+(X?ds(F):ni(F))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(M,F){So(M,0);for(var X=[],Y=0,ae="",le="",ie="",ne="";M.l<M.length;){var oe=M[M.l++];switch(oe){case 0:X.push(M.read_shift(8,"f"));break;case 1:le=y(F[0].c,M.read_shift(2),!0),ae=y(F[0].r,M.read_shift(2),!1),X.push(le+ae);break;case 2:{var we=y(F[0].c,M.read_shift(2),!0),K=y(F[0].r,M.read_shift(2),!1);le=y(F[0].c,M.read_shift(2),!0),ae=y(F[0].r,M.read_shift(2),!1),X.push(we+K+":"+le+ae)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(M.read_shift(2));break;case 6:{for(var Ee="";oe=M[M.l++];)Ee+=String.fromCharCode(oe);X.push('"'+Ee.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:ne=X.pop(),ie=X.pop(),X.push(["AND","OR"][oe-20]+"("+ie+","+ne+")");break;default:if(oe<32&&C[oe])ne=X.pop(),ie=X.pop(),X.push(ie+C[oe]+ne);else if(N[oe]){if(Y=N[oe][1],Y==69&&(Y=M[M.l++]),Y>X.length){console.error("WK1 bad formula parse 0x"+oe.toString(16)+":|"+X.join("|")+"|");return}var _e=X.slice(-Y);X.length-=Y,X.push(N[oe][0]+"("+_e.join(",")+")")}else return oe<=7?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=24?console.error("WK1 unsupported op "+oe.toString(16)):oe<=30?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=115?console.error("WK1 unsupported function opcode "+oe.toString(16)):console.error("WK1 unrecognized opcode "+oe.toString(16))}}X.length==1?F[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function _(M){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=M.read_shift(2),F[3]=M[M.l++],F[0].c=M[M.l++],F}function O(M,F){var X=_(M);return X[1].t="s",X[1].v=M.read_shift(F-4,"cstr"),X}function j(M,F,X,Y){var ae=Et(6+Y.length);ae.write_shift(2,M),ae.write_shift(1,X),ae.write_shift(1,F),ae.write_shift(1,39);for(var le=0;le<Y.length;++le){var ie=Y.charCodeAt(le);ae.write_shift(1,ie>=128?95:ie)}return ae.write_shift(1,0),ae}function S(M,F){var X=_(M);X[1].v=M.read_shift(2);var Y=X[1].v>>1;if(X[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return X[1].v=Y,X}function B(M,F){var X=_(M),Y=M.read_shift(4),ae=M.read_shift(4),le=M.read_shift(2);if(le==65535)return Y===0&&ae===3221225472?(X[1].t="e",X[1].v=15):Y===0&&ae===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var ie=le&32768;return le=(le&32767)-16446,X[1].v=(1-ie*2)*(ae*Math.pow(2,le+32)+Y*Math.pow(2,le)),X}function L(M,F,X,Y){var ae=Et(14);if(ae.write_shift(2,M),ae.write_shift(1,X),ae.write_shift(1,F),Y==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var le=0,ie=0,ne=0,oe=0;return Y<0&&(le=1,Y=-Y),ie=Math.log2(Y)|0,Y/=Math.pow(2,ie-31),oe=Y>>>0,(oe&2147483648)==0&&(Y/=2,++ie,oe=Y>>>0),Y-=oe,oe|=2147483648,oe>>>=0,Y*=Math.pow(2,32),ne=Y>>>0,ae.write_shift(4,ne),ae.write_shift(4,oe),ie+=16383+(le?32768:0),ae.write_shift(2,ie),ae}function D(M,F){var X=B(M);return M.l+=F-14,X}function k(M,F){var X=_(M),Y=M.read_shift(4);return X[1].v=Y>>6,X}function R(M,F){var X=_(M),Y=M.read_shift(8,"f");return X[1].v=Y,X}function U(M,F){var X=R(M);return M.l+=F-10,X}function H(M,F){return M[M.l+F-1]==0?M.read_shift(F,"cstr"):""}function Q(M,F){var X=M[M.l++];X>F-1&&(X=F-1);for(var Y="";Y.length<X;)Y+=String.fromCharCode(M[M.l++]);return Y}function V(M,F,X){if(!(!X.qpro||F<21)){var Y=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var ae=M.read_shift(F-21,"cstr");return[Y,ae]}}function G(M,F){for(var X={},Y=M.l+F;M.l<Y;){var ae=M.read_shift(2);if(ae==14e3){for(X[ae]=[0,""],X[ae][0]=M.read_shift(2);M[M.l];)X[ae][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return X}function J(M,F){var X=Et(5+M.length);X.write_shift(2,14e3),X.write_shift(2,F);for(var Y=0;Y<M.length;++Y){var ae=M.charCodeAt(Y);X[X.l++]=ae>127?95:ae}return X[X.l++]=0,X}var W={0:{n:"BOF",f:vi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:H},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:O},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:U},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:H},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:V},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:t}}();function r_e(e){var t={},r=e.match(bl),a=0,n=!1;if(r)for(;a!=r.length;++a){var i=Vr(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=i8[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return t}var a_e=function(){var e=Rw("t"),t=Rw("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Fa(o[1])},c=i.match(t);return c&&(l.s=r_e(c[1])),l}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(n).map(r).filter(function(l){return l.v})}}(),n_e=function(){var t=/(\r\n|\n)/g;function r(n,i,o){var l=[];n.u&&l.push("text-decoration: underline;"),n.uval&&l.push("text-underline-style:"+n.uval+";"),n.sz&&l.push("font-size:"+n.sz+"pt;"),n.outline&&l.push("text-effect: outline;"),n.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),n.b&&(i.push("<b>"),o.push("</b>")),n.i&&(i.push("<i>"),o.push("</i>")),n.strike&&(i.push("<s>"),o.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),n}function a(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),s_e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,i_e=/<(?:\w+:)?r>/,o_e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function B8(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Fa(kn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=kn(e),r&&(a.h=p8(a.t))):e.match(i_e)&&(a.r=kn(e),a.t=Fa(kn((e.replace(o_e,"").match(s_e)||[]).join("").replace(bl,""))),r&&(a.h=n_e(a_e(a.r)))),a):{t:""}}var l_e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,c_e=/<(?:\w+:)?(?:si|sstItem)>/g,u_e=/<\/(?:\w+:)?(?:si|sstItem)>/;function d_e(e,t){var r=[],a="";if(!e)return r;var n=e.match(l_e);if(n){a=n[2].replace(c_e,"").split(u_e);for(var i=0;i!=a.length;++i){var o=B8(a[i].trim(),t);o!=null&&(r[r.length]=o)}n=Vr(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}var f_e=/^\s|\s$|[\t\n\r]/;function Gae(e,t){if(!t.bookSST)return"";var r=[oi];r[r.length]=qt("sst",null,{xmlns:sx[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var n=e[a],i="<si>";n.r?i+=n.r:(i+="<t",n.t||(n.t=""),n.t.match(f_e)&&(i+=' xml:space="preserve"'),i+=">"+vn(n.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function A_e(e){return[e.read_shift(4),e.read_shift(4)]}function h_e(e,t){var r=[],a=!1;return u0(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function m_e(e,t){return t||(t=Et(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var p_e=j5e;function g_e(e){var t=bc();Ut(t,159,m_e(e));for(var r=0;r<e.length;++r)Ut(t,19,p_e(e[r]));return Ut(t,160),t.end()}function qae(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Dh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function x_e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Dh(e,4),t.U=Dh(e,4),t.W=Dh(e,4),t}function v_e(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},n=e.read_shift(4),i=[];n-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function b_e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(v_e(e));return t}function y_e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function w_e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Dh(e,4),t.U=Dh(e,4),t.W=Dh(e,4),t}function N_e(e){var t=w_e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Kae(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function Wae(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function C_e(e){var t=Dh(e);switch(t.Minor){case 2:return[t.Minor,E_e(e)];case 3:return[t.Minor,j_e()];case 4:return[t.Minor,k_e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function E_e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=Kae(e,r),n=Wae(e,e.length-e.l);return{t:"Std",h:a,v:n}}function j_e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function k_e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(bl,function(i){var o=Vr(i);switch(SA(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function S_e(e,t){var r={},a=r.EncryptionVersionInfo=Dh(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var n=e.read_shift(4);return t-=4,r.EncryptionHeader=Kae(e,n),t-=n,r.EncryptionVerifier=Wae(e,t),r}function __e(e){var t={},r=t.EncryptionVersionInfo=Dh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function T8(e){var t=0,r,a=qae(e),n=a.length+1,i,o,l,c,u;for(r=Jm(n),r[0]=a.length,i=1;i!=n;++i)r[i]=a[i-1];for(i=n-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Xae=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},n=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=qae(o),c=i(l),u=l.length,d=Jm(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=n(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=n(m,h));u>0;)--u,h=c>>8,d[u]=n(l[u],h),--u,h=c&255,d[u]=n(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=n(e[g],h),--u,--g,h=c&255,d[u]=n(l[u],h),--u,--g;return d}}(),B_e=function(e,t,r,a,n){n||(n=t),a||(a=Xae(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,n[i]=o,++r;return[n,r,a]},T_e=function(e){var t=0,r=Xae(e);return function(a){var n=B_e("",a,t,r);return t=n[1],n[0]}};function I_e(e,t,r,a){var n={key:vi(e),verificationBytes:vi(e)};return r.password&&(n.verifier=T8(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=T_e(r.password)),n}function O_e(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=__e(e):a.Data=S_e(e,t),a}function F_e(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?O_e(e,t-2,a):I_e(e,r.biff>=8?t:t-2,r,a),a}var Yae=function(){function e(n,i){switch(i.type){case"base64":return t(cu(n),i);case"binary":return t(n,i);case"buffer":return t(da&&Buffer.isBuffer(n)?n.toString("binary"):fp(n),i);case"array":return t(Qg(n),i)}throw new Error("Unrecognized type "+i.type)}function t(n,i){var o=i||{},l=o.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Ur({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=Zr(u),l}function r(n,i){return Ap(e(n,i),i)}function a(n){for(var i=["{\\rtf1\\ansi"],o=Pa(n["!ref"]),l,c=Array.isArray(n),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Ur({r:u,c:d});l=c?(n[u]||[])[d]:n[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(qh(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function D_e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Qw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function P_e(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,n=Math.max(t,r,a),i=Math.min(t,r,a),o=n-i;if(o===0)return[0,0,t];var l=0,c=0,u=n+i;switch(c=o/(u>1?2-u:u),n){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,u/2]}function R_e(e){var t=e[0],r=e[1],a=e[2],n=r*2*(a<.5?a:1-a),i=a-n/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=n*l,o[0]+=n,o[1]+=c;break;case 1:c=n*(2-l),o[0]+=c,o[1]+=n;break;case 2:c=n*(l-2),o[1]+=n,o[2]+=c;break;case 3:c=n*(4-l),o[1]+=c,o[2]+=n;break;case 4:c=n*(l-4),o[2]+=n,o[0]+=c;break;case 5:c=n*(6-l),o[2]+=c,o[0]+=n;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function yk(e,t){if(t===0)return e;var r=P_e(D_e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Qw(R_e(r))}var Jae=6,L_e=15,M_e=1,il=Jae;function Hw(e){return Math.floor((e+Math.round(128/il)/256)*il)}function zw(e){return Math.floor((e-5)/il*100+.5)/100}function wk(e){return Math.round((e*il+5)/il*256)/256}function eT(e){return wk(zw(Hw(e)))}function I8(e){var t=Math.abs(e-eT(e)),r=il;if(t>.005)for(il=M_e;il<L_e;++il)Math.abs(e-eT(e))<=t&&(t=Math.abs(e-eT(e)),r=il);il=r}function Zm(e){e.width?(e.wpx=Hw(e.width),e.wch=zw(e.wpx),e.MDW=il):e.wpx?(e.wch=zw(e.wpx),e.width=wk(e.wch),e.MDW=il):typeof e.wch=="number"&&(e.width=wk(e.wch),e.wpx=Hw(e.width),e.MDW=il),e.customWidth&&delete e.customWidth}var U_e=96,Zae=U_e;function Vw(e){return e*96/Zae}function Mb(e){return e*Zae/96}var Q_e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function H_e(e,t,r,a){t.Borders=[];var n={},i=!1;(e[0].match(bl)||[]).forEach(function(o){var l=Vr(o);switch(SA(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},l.diagonalUp&&(n.diagonalUp=$n(l.diagonalUp)),l.diagonalDown&&(n.diagonalDown=$n(l.diagonalDown)),t.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function z_e(e,t,r,a){t.Fills=[];var n={},i=!1;(e[0].match(bl)||[]).forEach(function(o){var l=Vr(o);switch(SA(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},t.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":l.patternType&&(n.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),l.indexed&&(n.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(n.bgColor.theme=parseInt(l.theme,10)),l.tint&&(n.bgColor.tint=parseFloat(l.tint)),l.rgb&&(n.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),l.theme&&(n.fgColor.theme=parseInt(l.theme,10)),l.tint&&(n.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(n.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function V_e(e,t,r,a){t.Fonts=[];var n={},i=!1;(e[0].match(bl)||[]).forEach(function(o){var l=Vr(o);switch(SA(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(n),n={};break;case"<name":l.val&&(n.name=kn(l.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=l.val?$n(l.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=l.val?$n(l.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(l.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=l.val?$n(l.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=l.val?$n(l.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=l.val?$n(l.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=l.val?$n(l.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=l.val?$n(l.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":l.val&&(n.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(n.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(n.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(n.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=i8[parseInt(l.val,10)];break;case"<color":if(n.color||(n.color={}),l.auto&&(n.color.auto=$n(l.auto)),l.rgb)n.color.rgb=l.rgb.slice(-6);else if(l.indexed){n.color.index=parseInt(l.indexed,10);var c=yg[n.color.index];n.color.index==81&&(c=yg[1]),c||(c=yg[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(n.color.theme=parseInt(l.theme,10),l.tint&&(n.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=yk(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function $_e(e,t,r){t.NumberFmt=[];for(var a=Ls(Dr),n=0;n<a.length;++n)t.NumberFmt[a[n]]=Dr[a[n]];var i=e[0].match(bl);if(i)for(n=0;n<i.length;++n){var o=Vr(i[n]);switch(SA(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Fa(kn(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Fh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function G_e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=qt("numFmt",null,{numFmtId:a,formatCode:vn(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=qt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var ME=["numFmtId","fillId","fontId","borderId","xfId"],UE=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function q_e(e,t,r){t.CellXf=[];var a,n=!1;(e[0].match(bl)||[]).forEach(function(i){var o=Vr(i),l=0;switch(SA(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<ME.length;++l)a[ME[l]]&&(a[ME[l]]=parseInt(a[ME[l]],10));for(l=0;l<UE.length;++l)a[UE[l]]&&(a[UE[l]]=$n(a[UE[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=$n(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function K_e(e){var t=[];return t[t.length]=qt("cellXfs",null),e.forEach(function(r){t[t.length]=qt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=qt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var W_e=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&$_e(f,d,u),(f=l.match(n))&&V_e(f,d,c,u),(f=l.match(a))&&z_e(f,d,c,u),(f=l.match(i))&&H_e(f,d,c,u),(f=l.match(r))&&q_e(f,d,u),d}}();function ene(e,t){var r=[oi,qt("styleSheet",null,{xmlns:sx[0],"xmlns:vt":Pi.vt})],a;return e.SSF&&(a=G_e(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=K_e(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function X_e(e,t){var r=e.read_shift(2),a=ml(e);return[r,a]}function Y_e(e,t,r){r||(r=Et(6+4*t.length)),r.write_shift(2,e),oo(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function J_e(e,t,r){var a={};a.sz=e.read_shift(2)/20;var n=O5e(e);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=I5e(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=ml(e),a}function Z_e(e,t){t||(t=Et(153)),t.write_shift(2,e.sz*20),F5e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),xk(e.color,t);var a=0;return a=2,t.write_shift(1,a),oo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var e4e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],tT,t4e=xl;function pV(e,t){t||(t=Et(84)),tT||(tT=P_(e4e));var r=tT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(xk({auto:1},t),xk({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function r4e(e,t){var r=e.l+t,a=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:n}}function tne(e,t,r){r||(r=Et(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ly(e,t){return t||(t=Et(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var a4e=xl;function n4e(e,t){return t||(t=Et(51)),t.write_shift(1,0),Ly(null,t),Ly(null,t),Ly(null,t),Ly(null,t),Ly(null,t),t.length>t.l?t.slice(0,t.l):t}function s4e(e,t){return t||(t=Et(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),gk(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function i4e(e,t,r){var a=Et(2052);return a.write_shift(4,e),gk(t,a),gk(r,a),a.length>a.l?a.slice(0,a.l):a}function o4e(e,t,r){var a={};a.NumberFmt=[];for(var n in Dr)a.NumberFmt[n]=Dr[n];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return u0(e,function(c,u,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],Fh(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=yk(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(d),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function l4e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&++r}),r!=0&&(Ut(e,615,tf(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&Ut(e,44,Y_e(n,t[n]))}),Ut(e,616))}}function c4e(e){var t=1;Ut(e,611,tf(t)),Ut(e,43,Z_e({sz:12,color:{theme:1},name:"Calibri",family:2})),Ut(e,612)}function u4e(e){var t=2;Ut(e,603,tf(t)),Ut(e,45,pV({patternType:"none"})),Ut(e,45,pV({patternType:"gray125"})),Ut(e,604)}function d4e(e){var t=1;Ut(e,613,tf(t)),Ut(e,46,n4e()),Ut(e,614)}function f4e(e){var t=1;Ut(e,626,tf(t)),Ut(e,47,tne({numFmtId:0},65535)),Ut(e,627)}function A4e(e,t){Ut(e,617,tf(t.length)),t.forEach(function(r){Ut(e,47,tne(r,0))}),Ut(e,618)}function h4e(e){var t=1;Ut(e,619,tf(t)),Ut(e,48,s4e({xfId:0,name:"Normal"})),Ut(e,620)}function m4e(e){var t=0;Ut(e,505,tf(t)),Ut(e,506)}function p4e(e){var t=0;Ut(e,508,i4e(t,"TableStyleMedium9","PivotStyleMedium4")),Ut(e,509)}function g4e(e,t){var r=bc();return Ut(r,278),l4e(r,e.SSF),c4e(r),u4e(r),d4e(r),f4e(r),A4e(r,t.cellXfs),h4e(r),m4e(r),p4e(r),Ut(r,279),r.end()}var x4e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function v4e(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(bl)||[]).forEach(function(n){var i=Vr(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[x4e.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function b4e(){}function y4e(){}var w4e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,N4e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,C4e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function E4e(e,t,r){t.themeElements={};var a;[["clrScheme",w4e,v4e],["fontScheme",N4e,b4e],["fmtScheme",C4e,y4e]].forEach(function(n){if(!(a=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,t,r)})}var j4e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function rne(e,t){(!e||e.length===0)&&(e=O8());var r,a={};if(!(r=e.match(j4e)))throw new Error("themeElements not found in theme");return E4e(r[0],a,t),a.raw=e,a}function O8(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[oi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function k4e(e,t,r){var a=e.l+t,n=e.read_shift(4);if(n!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=Kre(i,{type:"array"})}catch{return}var l=au(o,"theme/theme/theme1.xml",!0);if(l)return rne(l,r)}}function S4e(e){return e.read_shift(4)}function _4e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=B4e(e,4);break;case 2:t.xclrValue=Dae(e);break;case 3:t.xclrValue=S4e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function B4e(e,t){return xl(e,t)}function T4e(e,t){return xl(e,t)}function I4e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=_4e(e);break;case 6:a[1]=T4e(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function O4e(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),i=[];n-- >0;)i.push(I4e(e,r-e.l));return{ixfe:a,ext:i}}function F4e(e,t){t.forEach(function(r){r[0]})}function D4e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ml(e)}}function P4e(e){var t=Et(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),oo(e.name,t),t.slice(0,t.l)}function R4e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function L4e(e){var t=Et(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function M4e(e,t){var r=Et(8+2*t.length);return r.write_shift(4,e),oo(t,r),r.slice(0,r.l)}function U4e(e){return e.l+=4,e.read_shift(4)!=0}function Q4e(e,t){var r=Et(8);return r.write_shift(4,e),r.write_shift(4,1),r}function H4e(e,t,r){var a={Types:[],Cell:[],Value:[]},n=r||{},i=[],o=!1,l=2;return u0(e,function(c,u,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(d),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function z4e(){var e=bc();return Ut(e,332),Ut(e,334,tf(1)),Ut(e,335,P4e({name:"XLDAPR",version:12e4,flags:3496657072})),Ut(e,336),Ut(e,339,M4e(1,"XLDAPR")),Ut(e,52),Ut(e,35,tf(514)),Ut(e,4096,tf(0)),Ut(e,4097,Xu(1)),Ut(e,36),Ut(e,53),Ut(e,340),Ut(e,337,Q4e(1)),Ut(e,51,L4e([[1,0]])),Ut(e,338),Ut(e,333),e.end()}function V4e(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var n=!1,i=2,o;return e.replace(bl,function(l){var c=Vr(l);switch(SA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==c.name&&(o=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function ane(){var e=[oi];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function $4e(e){var t=[];if(!e)return t;var r=1;return(e.match(bl)||[]).forEach(function(a){var n=Vr(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n);break}}),t}function G4e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function q4e(e,t,r){var a=[];return u0(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function K4e(e,t,r,a){if(!e)return e;var n=a||{},i=!1;u0(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},n)}function W4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Pv=1024;function nne(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),n=[qt("xml",null,{"xmlns:v":Yc.v,"xmlns:o":Yc.o,"xmlns:x":Yc.x,"xmlns:mv":Yc.mv}).replace(/\/>/,">"),qt("o:shapelayout",qt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),qt("v:shapetype",[qt("v:stroke",null,{joinstyle:"miter"}),qt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Pv<e*1e3;)Pv+=1e3;return t.forEach(function(i){var o=fs(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?qt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=qt("v:fill",c,l),d={on:"t",obscured:"t"};++Pv,n=n.concat(["<v:shape"+Lw({id:"_x0000_s"+Pv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,qt("v:shadow",null,d),qt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",_o("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),_o("x:AutoFill","False"),_o("x:Row",String(o.r)),_o("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function gV(e,t,r,a){var n=Array.isArray(e),i;t.forEach(function(o){var l=fs(o.ref);if(n?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},n?e[l.r][l.c]=i:e[o.ref]=i;var c=Pa(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=Zr(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}i.c.push(d)})}function X4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Vr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=fs(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&B8(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),a.push(u)}}}}),a}function sne(e){var t=[oi,qt("comments",null,{xmlns:sx[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(n){var i=vn(n.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),n.T&&n.ID&&r.indexOf("tc="+n.ID)==-1&&(r.push("tc="+n.ID),t.push("<author>tc="+n.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var n=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?n=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(n=r.indexOf(vn(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+n+'"><text>'),i.length<=1)t.push(_o("t",vn(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(_o("t",vn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Y4e(e,t){var r=[],a=!1,n={},i=0;return e.replace(bl,function(l,c){var u=Vr(l);switch(SA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":n.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function J4e(e,t,r){var a=[oi,qt("ThreadedComments",null,{xmlns:Pi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(n){var i="";(n[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(qt("threadedComment",_o("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function Z4e(e,t){var r=[],a=!1;return e.replace(bl,function(i){var o=Vr(i);switch(SA(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function e3e(e){var t=[oi,qt("personList",null,{xmlns:Pi.TCMNT,"xmlns:x":sx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(qt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function t3e(e){var t={};t.iauthor=e.read_shift(4);var r=cx(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function r3e(e,t){return t==null&&(t=Et(36)),t.write_shift(4,e[1].iauthor),_1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var a3e=ml;function n3e(e){return oo(e.slice(0,54))}function s3e(e,t){var r=[],a=[],n={},i=!1;return u0(e,function(l,c,u){switch(u){case 632:a.push(l);break;case 635:n=l;break;case 637:n.t=l.t,n.h=l.h,n.r=l.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,t.sheetRows&&n.rfx&&t.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function i3e(e){var t=bc(),r=[];return Ut(t,628),Ut(t,630),e.forEach(function(a){a[1].forEach(function(n){r.indexOf(n.a)>-1||(r.push(n.a.slice(0,54)),Ut(t,632,n3e(n.a)))})}),Ut(t,631),Ut(t,633),e.forEach(function(a){a[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var i={s:fs(a[0]),e:fs(a[0])};Ut(t,635,r3e([i,n])),n.t&&n.t.length>0&&Ut(t,637,S5e(n)),Ut(t,636),delete n.iauthor})}),Ut(t,634),Ut(t,629),t.end()}var o3e="application/vnd.ms-office.vbaProject";function l3e(e){var t=Er.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Er.utils.cfb_add(t,n,e.FileIndex[a].content)}}),Er.write(t)}function c3e(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var n=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&Er.utils.cfb_add(e,n,t.FileIndex[a].content)}})}var ine=["xlsb","xlsm","xlam","biff8","xla"];function u3e(){return{"!type":"dialog"}}function d3e(){return{"!type":"dialog"}}function f3e(){return{"!type":"macro"}}function A3e(){return{"!type":"macro"}}var ib=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,n,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,n+(l?"":"$")+ds(d)+(c?"":"$")+ni(u)}return function(n,i){return t=i,n.replace(e,r)}}(),F8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,D8=function(){return function(t,r){return t.replace(F8,function(a,n,i,o,l,c){var u=y8(o)-(i?0:r.c),d=b8(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":i?u+1:"["+u+"]";return n+"R"+f+"C"+h})}}();function one(e,t){return e.replace(F8,function(r,a,n,i,o,l){return a+(n=="$"?n+i:ds(y8(i)+t.c))+(o=="$"?o+l:ni(b8(l)+t.r))})}function h3e(e,t,r){var a=wc(t),n=a.s,i=fs(r),o={r:i.r-n.r,c:i.c-n.c};return one(e,o)}function m3e(e){return e.length!=1}function xV(e){return e.replace(/_xlfn\./g,"")}function mi(e){e.l+=1}function ep(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function lne(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return cne(e);r.biff==12&&(a=4)}var n=e.read_shift(a),i=e.read_shift(a),o=ep(e),l=ep(e);return{s:{r:n,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function cne(e){var t=ep(e),r=ep(e),a=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function p3e(e,t,r){if(r.biff<8)return cne(e);var a=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),i=ep(e),o=ep(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:o[0],cRel:o[1],rRel:o[2]}}}function une(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return g3e(e);var a=e.read_shift(r&&r.biff==12?4:2),n=ep(e);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function g3e(e){var t=ep(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function x3e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function v3e(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return b3e(e);var n=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;n>524287;)n-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:o,rRel:l}}function b3e(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:a}}function y3e(e,t,r){var a=(e[e.l++]&96)>>5,n=lne(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function w3e(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=lne(e,i,r);return[a,n,o]}function N3e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function C3e(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,n]}function E3e(e,t,r){var a=(e[e.l++]&96)>>5,n=p3e(e,t-1,r);return[a,n]}function j3e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function vV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function k3e(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=a;++i)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function S3e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function _3e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function B3e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function T3e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function dne(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function I3e(e){return e.read_shift(2),dne(e)}function O3e(e){return e.read_shift(2),dne(e)}function F3e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=une(e,0,r);return[a,n]}function D3e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=v3e(e,0,r);return[a,n]}function P3e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=une(e,0,r);return[a,n,i]}function R3e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[UBe[n],hne[n],a]}function L3e(e,t,r){var a=e[e.l++],n=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:M3e(e);return[n,(i[0]===0?hne:MBe)[i[1]]]}function M3e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function U3e(e,t,r){e.l+=r&&r.biff==2?3:4}function Q3e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function H3e(e){return e.l++,d0[e.read_shift(1)]}function z3e(e){return e.l++,e.read_shift(2)}function V3e(e){return e.l++,e.read_shift(1)!==0}function $3e(e){return e.l++,cl(e)}function G3e(e,t,r){return e.l++,LN(e,t-1,r)}function q3e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Xs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=d0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=cl(e);break;case 2:r[1]=ux(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function K3e(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),n=[],i=0;i!=a;++i)n.push((r.biff==12?cx:M_)(e));return n}function W3e(e,t,r){var a=0,n=0;r.biff==12?(a=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=n;++l)o[i][l]=q3e(e,r.biff);return o}function X3e(e,t,r){var a=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function Y3e(e,t,r){if(r.biff==5)return J3e(e);var a=e.read_shift(1)>>>5&3,n=e.read_shift(2),i=e.read_shift(4);return[a,n,i]}function J3e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Z3e(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function eBe(e,t,r){var a=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function tBe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function rBe(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,n]}var aBe=xl,nBe=xl,sBe=xl;function UN(e,t,r){return e.l+=2,[x3e(e)]}function P8(e){return e.l+=6,[]}var iBe=UN,oBe=P8,lBe=P8,cBe=UN;function fne(e){return e.l+=2,[vi(e),e.read_shift(2)&1]}var uBe=UN,dBe=fne,fBe=P8,ABe=UN,hBe=UN,mBe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function pBe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),n=e.read_shift(2),i=e.read_shift(2),o=mBe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:n,C:i}}function gBe(e){return e.l+=2,[e.read_shift(4)]}function xBe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function vBe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function bBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function yBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function wBe(e){return e.l+=4,[0,0]}var bV={1:{n:"PtgExp",f:Q3e},2:{n:"PtgTbl",f:sBe},3:{n:"PtgAdd",f:mi},4:{n:"PtgSub",f:mi},5:{n:"PtgMul",f:mi},6:{n:"PtgDiv",f:mi},7:{n:"PtgPower",f:mi},8:{n:"PtgConcat",f:mi},9:{n:"PtgLt",f:mi},10:{n:"PtgLe",f:mi},11:{n:"PtgEq",f:mi},12:{n:"PtgGe",f:mi},13:{n:"PtgGt",f:mi},14:{n:"PtgNe",f:mi},15:{n:"PtgIsect",f:mi},16:{n:"PtgUnion",f:mi},17:{n:"PtgRange",f:mi},18:{n:"PtgUplus",f:mi},19:{n:"PtgUminus",f:mi},20:{n:"PtgPercent",f:mi},21:{n:"PtgParen",f:mi},22:{n:"PtgMissArg",f:mi},23:{n:"PtgStr",f:G3e},26:{n:"PtgSheet",f:xBe},27:{n:"PtgEndSheet",f:vBe},28:{n:"PtgErr",f:H3e},29:{n:"PtgBool",f:V3e},30:{n:"PtgInt",f:z3e},31:{n:"PtgNum",f:$3e},32:{n:"PtgArray",f:j3e},33:{n:"PtgFunc",f:R3e},34:{n:"PtgFuncVar",f:L3e},35:{n:"PtgName",f:X3e},36:{n:"PtgRef",f:F3e},37:{n:"PtgArea",f:y3e},38:{n:"PtgMemArea",f:Z3e},39:{n:"PtgMemErr",f:aBe},40:{n:"PtgMemNoMem",f:nBe},41:{n:"PtgMemFunc",f:eBe},42:{n:"PtgRefErr",f:tBe},43:{n:"PtgAreaErr",f:N3e},44:{n:"PtgRefN",f:D3e},45:{n:"PtgAreaN",f:E3e},46:{n:"PtgMemAreaN",f:bBe},47:{n:"PtgMemNoMemN",f:yBe},57:{n:"PtgNameX",f:Y3e},58:{n:"PtgRef3d",f:P3e},59:{n:"PtgArea3d",f:w3e},60:{n:"PtgRefErr3d",f:rBe},61:{n:"PtgAreaErr3d",f:C3e},255:{}},NBe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},CBe={1:{n:"PtgElfLel",f:fne},2:{n:"PtgElfRw",f:ABe},3:{n:"PtgElfCol",f:iBe},6:{n:"PtgElfRwV",f:hBe},7:{n:"PtgElfColV",f:cBe},10:{n:"PtgElfRadical",f:uBe},11:{n:"PtgElfRadicalS",f:fBe},13:{n:"PtgElfColS",f:oBe},15:{n:"PtgElfColSV",f:lBe},16:{n:"PtgElfRadicalLel",f:dBe},25:{n:"PtgList",f:pBe},29:{n:"PtgSxName",f:gBe},255:{}},EBe={0:{n:"PtgAttrNoop",f:wBe},1:{n:"PtgAttrSemi",f:T3e},2:{n:"PtgAttrIf",f:_3e},4:{n:"PtgAttrChoose",f:k3e},8:{n:"PtgAttrGoto",f:S3e},16:{n:"PtgAttrSum",f:U3e},32:{n:"PtgAttrBaxcel",f:vV},33:{n:"PtgAttrBaxcel",f:vV},64:{n:"PtgAttrSpace",f:I3e},65:{n:"PtgAttrSpaceSemi",f:O3e},128:{n:"PtgAttrIfError",f:B3e},255:{}};function QN(e,t,r,a){if(a.biff<8)return xl(e,t);for(var n=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=W3e(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=K3e(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=n-e.l,t!==0&&i.push(xl(e,t)),i}function HN(e,t,r){for(var a=e.l+t,n,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],n=bV[i]||bV[NBe[i]],(i===24||i===25)&&(n=(i===24?CBe:EBe)[e[e.l+1]]),!n||!n.f?xl(e,t):o.push([n.n,n.f(e,t,r)]);return o}function jBe(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],n=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:n.push('"'+o[1].replace(/"/g,'""')+'"');break;default:n.push(o[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var kBe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function SBe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Ane(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[a[0]][0]){case 357:return n=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(n=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function yV(e,t,r){var a=Ane(e,t,r);return a=="#REF"?a:SBe(a,r)}function al(e,t,r,a,n){var i=n&&n.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,N=e[0].length;y<N;++y){var C=e[0][y];switch(C[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Ts(" ",e[0][x][1][1]);break;case 1:v=Ts("\r",e[0][x][1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+kBe[C[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Y2(C[1][1],o,n),l.push(J2(d,i));break;case"PtgRefN":d=r?Y2(C[1][1],r,n):C[1][1],l.push(J2(d,i));break;case"PtgRef3d":f=C[1][1],d=Y2(C[1][2],o,n),g=yV(a,f,n),l.push(g+"!"+J2(d,i));break;case"PtgFunc":case"PtgFuncVar":var T=C[1][0],_=C[1][1];T||(T=0),T&=127;var O=T==0?[]:l.slice(-T);l.length-=T,_==="User"&&(_=O.shift()),l.push(_+"("+O.join(",")+")");break;case"PtgBool":l.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(C[1]);break;case"PtgNum":l.push(String(C[1]));break;case"PtgStr":l.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(C[1]);break;case"PtgAreaN":m=Xz(C[1][1],r?{s:r}:o,n),l.push(YB(m,n));break;case"PtgArea":m=Xz(C[1][1],o,n),l.push(YB(m,n));break;case"PtgArea3d":f=C[1][1],m=C[1][2],g=yV(a,f,n),l.push(g+"!"+YB(m,n));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=C[1][2];var j=(a.names||[])[h-1]||(a[0]||[])[h],S=j?j.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!n.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var B=C[1][1];h=C[1][2];var L;if(n.biff<=5)B<0&&(B=-B),a[B]&&(L=a[B][h]);else{var D="";if(((a[B]||[])[0]||[])[0]==14849||(((a[B]||[])[0]||[])[0]==1025?a[B][h]&&a[B][h].itab>0&&(D=a.SheetNames[a[B][h].itab-1]+"!"):D=a.SheetNames[h-1]+"!"),a[B]&&a[B][h])D+=a[B][h].Name;else if(a[0]&&a[0][h])D+=a[0][h].Name;else{var k=(Ane(a,B,n)||"").split(";;");k[h-1]?D=k[h-1]:D+="SH33TJSERRX"}l.push(D);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var R="(",U=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:R=Ts(" ",e[0][x][1][1])+R;break;case 3:R=Ts("\r",e[0][x][1][1])+R;break;case 4:U=Ts(" ",e[0][x][1][1])+U;break;case 5:U=Ts("\r",e[0][x][1][1])+U;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(R+l.pop()+U);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:C[1][1],r:C[1][0]};var H={c:r.c,r:r.r};if(a.sharedf[Ur(d)]){var Q=a.sharedf[Ur(d)];l.push(al(Q,o,H,a,n))}else{var V=!1;for(c=0;c!=a.arrayf.length;++c)if(u=a.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(al(u[1],o,H,a,n)),V=!0;break}V||l.push(C[1])}break;case"PtgArray":l.push("{"+jBe(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&x>=0&&G.indexOf(e[0][y][0])==-1){C=e[0][x];var J=!0;switch(C[1][0]){case 4:J=!1;case 0:v=Ts(" ",C[1][1]);break;case 5:J=!1;case 1:v=Ts("\r",C[1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}l.push((J?v:"")+l.pop()+(J?"":v)),x=-1}}if(l.length>1&&n.WTF)throw new Error("bad formula stack");return l[0]}function _Be(e,t,r){var a=e.l+t,n=r.biff==2?1:2,i,o=e.read_shift(n);if(o==65535)return[[],xl(e,t-2)];var l=HN(e,o,r);return t!==o+n&&(i=QN(e,t-o-n,l,r)),e.l=a,[l,i]}function BBe(e,t,r){var a=e.l+t,n=r.biff==2?1:2,i,o=e.read_shift(n);if(o==65535)return[[],xl(e,t-2)];var l=HN(e,o,r);return t!==o+n&&(i=QN(e,t-o-n,l,r)),e.l=a,[l,i]}function TBe(e,t,r,a){var n=e.l+t,i=HN(e,a,r),o;return n!==e.l&&(o=QN(e,n-e.l,i,r)),[i,o]}function IBe(e,t,r){var a=e.l+t,n,i=e.read_shift(2),o=HN(e,i,r);return i==65535?[[],xl(e,t-2)]:(t!==i+2&&(n=QN(e,a-i-2,o,r)),[o,n])}function OBe(e){var t;if(Ch(e,e.l+6)!==65535)return[cl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function FBe(e){if(e==null){var t=Et(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Hg(e);return Hg(0)}function rT(e,t,r){var a=e.l+t,n=_A(e);r.biff==2&&++e.l;var i=OBe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=BBe(e,a-e.l,r);return{cell:n,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function DBe(e,t,r,a,n){var i=Vg(t,r,n),o=FBe(e.v),l=Et(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Et(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=io([i,o,l,u]);return f}function U_(e,t,r){var a=e.read_shift(4),n=HN(e,a,r),i=e.read_shift(4),o=i>0?QN(e,i,n,r):null;return[n,o]}var PBe=U_,Q_=U_,RBe=U_,LBe=U_,MBe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},hne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},UBe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function wV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function QBe(e){var t="of:="+e.replace(F8,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function aT(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function HBe(e){return e.replace(/\./,"!")}var ew={},ob={},tw=typeof Map<"u";function R8(e,t,r){var a=0,n=e.length;if(r){if(tw?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=tw?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<n;++a)if(e[a].t===t)return e.Count++,a;return e[n]={t},e.Count++,e.Unique++,r&&(tw?(r.has(t)||r.set(t,[]),r.get(t).push(n)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(n))),n}function H_(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(il=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=zw(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=wk(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Cg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function hp(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],n=60,i=e.length;if(a==null&&r.ssf){for(;n<392;++n)if(r.ssf[n]==null){Fh(t.z,n),r.ssf[n]=t.z,r.revssf[t.z]=a=n;break}}for(n=0;n!=i;++n)if(e[n].numFmtId===a)return n;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function mne(e,t,r,a,n,i){try{a.cellNF&&(e.z=Dr[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=qn(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(Dr[t]==null&&Fh(Mje[t]||"General",t),e.t==="e")e.w=e.w||d0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Pw(e.v);else if(e.t==="d"){var o=Mi(e.v);(o|0)===o?e.w=o.toString(10):e.w=Pw(o)}else{if(e.v===void 0)return"";e.w=Ug(e.v,ob)}else e.t==="d"?e.w=od(t,Mi(e.v),ob):e.w=od(t,e.v,ob)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=yk(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=yk(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function zBe(e,t,r){if(e&&e["!ref"]){var a=Pa(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function VBe(e,t){var r=Pa(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Zr(r))}var $Be=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,GBe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,qBe=/<(?:\w:)?hyperlink [^>]*>/mg,KBe=/"(\w*:\w*)"/,WBe=/<(?:\w:)?col\b[^>]*[\/]?>/g,XBe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,YBe=/<(?:\w:)?pageMargins[^>]*\/>/g,pne=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,JBe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ZBe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function eTe(e,t,r,a,n,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(GBe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(pne);h?L8(h[0],l,n,r):(h=u.match(JBe))&&rTe(h[0],h[1]||"",l,n,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(KBe);g&&VBe(l,g[1])}var x=u.match(ZBe);x&&x[1]&&mTe(x[1],n);var v=[];if(t.cellStyles){var y=u.match(WBe);y&&uTe(v,y)}f&&xTe(f[1],l,t,c,i,o);var N=d.match(XBe);N&&(l["!autofilter"]=fTe(N[0]));var C=[],T=d.match($Be);if(T)for(m=0;m!=T.length;++m)C[m]=Pa(T[m].slice(T[m].indexOf('"')+1));var _=d.match(qBe);_&&oTe(l,_,a);var O=d.match(YBe);if(O&&(l["!margins"]=lTe(Vr(O[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Zr(c)),t.sheetRows>0&&l["!ref"]){var j=Pa(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Zr(j))}return v.length>0&&(l["!cols"]=v),C.length>0&&(l["!merges"]=C),l}function tTe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Zr(e[r])+'"/>';return t+"</mergeCells>"}function L8(e,t,r,a){var n=Vr(e);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=Fa(kn(n.codeName)))}function rTe(e,t,r,a,n){L8(e.slice(0,e.indexOf(">")),r,a,n)}function aTe(e,t,r,a,n){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=cA(vn(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+qt("outlinePr",null,u)}!i&&!l||(n[n.length]=qt("sheetPr",l,o))}var nTe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sTe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function iTe(e){var t={sheet:1};return nTe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),sTe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=T8(e.password).toString(16).toUpperCase()),qt("sheetProtection",null,t)}function oTe(e,t,r){for(var a=Array.isArray(e),n=0;n!=t.length;++n){var i=Vr(kn(t[n]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Fa(i.location))):(i.Target="#"+Fa(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Pa(i.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Ur({c:u,r:c});a?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function lTe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function cTe(e){return Cg(e),qt("pageMargins",null,e)}function uTe(e,t){for(var r=!1,a=0;a!=t.length;++a){var n=Vr(t[a],!0);n.hidden&&(n.hidden=$n(n.hidden));var i=parseInt(n.min,10)-1,o=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,I8(n.width)),Zm(n);i<=o;)e[i++]=Kn(n)}}function dTe(e,t){for(var r=["<cols>"],a,n=0;n!=t.length;++n)(a=t[n])&&(r[r.length]=qt("col",null,H_(n,a)));return r[r.length]="</cols>",r.join("")}function fTe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function ATe(e,t,r,a){var n=typeof e.ref=="string"?e.ref:Zr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=wc(n);o.s.r==o.e.r&&(o.e.r=wc(t["!ref"]).e.r,n=Zr(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+n;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+n}),qt("autoFilter",null,{ref:n})}var hTe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function mTe(e,t){t.Views||(t.Views=[{}]),(e.match(hTe)||[]).forEach(function(r,a){var n=Vr(r);t.Views[a]||(t.Views[a]={}),+n.zoomScale&&(t.Views[a].zoom=+n.zoomScale),$n(n.rightToLeft)&&(t.Views[a].RTL=!0)})}function pTe(e,t,r,a){var n={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),qt("sheetViews",qt("sheetView",null,n),{})}function gTe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var n="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=d0[e.v];break;case"d":a&&a.cellDates?n=qn(e.v,-1).toISOString():(e=Kn(e),e.t="n",n=""+(e.v=Mi(qn(e.v)))),typeof e.z>"u"&&(e.z=Dr[14]);break;default:n=e.v;break}var l=_o("v",vn(n)),c={r:t},u=hp(a.cellXfs,e,a);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=_o("v",""+R8(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=qt("f",vn(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),qt("c",l,c)}var xTe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=Rw("v"),o=Rw("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],N=0,C=0,T=0,_="",O,j,S=0,B=0,L,D,k=0,R=0,U=Array.isArray(m.CellXf),H,Q=[],V=[],G=Array.isArray(u),J=[],W={},Z=!1,M=!!d.sheetStubs,F=c.split(t),X=0,Y=F.length;X!=Y;++X){x=F[X].trim();var ae=x.length;if(ae!==0){var le=0;e:for(g=0;g<ae;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(j=Vr(x.slice(le,g),!0),S=j.r!=null?parseInt(j.r,10):S+1,B=-1,d.sheetRows&&d.sheetRows<S)continue;W={},Z=!1,j.ht&&(Z=!0,W.hpt=parseFloat(j.ht),W.hpx=Mb(W.hpt)),j.hidden=="1"&&(Z=!0,W.hidden=!0),j.outlineLevel!=null&&(Z=!0,W.level=+j.outlineLevel),Z&&(J[S-1]=W)}break;case"<":le=g;break}if(le>=g)break;if(j=Vr(x.slice(le,g),!0),S=j.r!=null?parseInt(j.r,10):S+1,B=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(W={},Z=!1,j.ht&&(Z=!0,W.hpt=parseFloat(j.ht),W.hpx=Mb(W.hpt)),j.hidden=="1"&&(Z=!0,W.hidden=!0),j.outlineLevel!=null&&(Z=!0,W.level=+j.outlineLevel),Z&&(J[S-1]=W)),v=x.slice(g).split(e);for(var ie=0;ie!=v.length&&v[ie].trim().charAt(0)=="<";++ie);for(v=v.slice(ie),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),N=g,C=0,T=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(N=0,_=y[1],C=0;C!=_.length&&!((T=_.charCodeAt(C)-64)<1||T>26);++C)N=26*N+T;--N,B=N}else++B;for(C=0;C!=x.length&&x.charCodeAt(C)!==62;++C);if(++C,j=Vr(x.slice(0,C),!0),j.r||(j.r=Ur({r:S-1,c:B})),_=x.slice(C),O={t:""},(y=_.match(i))!=null&&y[1]!==""&&(O.v=Fa(y[1])),d.cellFormula){if((y=_.match(o))!=null&&y[1]!==""){if(O.f=Fa(kn(y[1])).replace(/\r\n/g,`
`),d.xlfn||(O.f=xV(O.f)),y[0].indexOf('t="array"')>-1)O.F=(_.match(n)||[])[1],O.F.indexOf(":")>-1&&Q.push([Pa(O.F),O.F]);else if(y[0].indexOf('t="shared"')>-1){D=Vr(y[0]);var ne=Fa(kn(y[1]));d.xlfn||(ne=xV(ne)),V[parseInt(D.si,10)]=[D,ne,j.r]}}else(y=_.match(/<f[^>]*\/>/))&&(D=Vr(y[0]),V[D.si]&&(O.f=h3e(V[D.si][1],V[D.si][2],j.r)));var oe=fs(j.r);for(C=0;C<Q.length;++C)oe.r>=Q[C][0].s.r&&oe.r<=Q[C][0].e.r&&oe.c>=Q[C][0].s.c&&oe.c<=Q[C][0].e.c&&(O.F=Q[C][1])}if(j.t==null&&O.v===void 0)if(O.f||O.F)O.v=0,O.t="n";else if(M)O.t="z";else continue;else O.t=j.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),O.t){case"n":if(O.v==""||O.v==null){if(!M)continue;O.t="z"}else O.v=parseFloat(O.v);break;case"s":if(typeof O.v>"u"){if(!M)continue;O.t="z"}else L=ew[parseInt(O.v,10)],O.v=L.t,O.r=L.r,d.cellHTML&&(O.h=L.h);break;case"str":O.t="s",O.v=O.v!=null?kn(O.v):"",d.cellHTML&&(O.h=p8(O.v));break;case"inlineStr":y=_.match(a),O.t="s",y!=null&&(L=B8(y[1]))?(O.v=L.t,d.cellHTML&&(O.h=L.h)):O.v="";break;case"b":O.v=$n(O.v);break;case"d":d.cellDates?O.v=qn(O.v,1):(O.v=Mi(qn(O.v,1)),O.t="n");break;case"e":(!d||d.cellText!==!1)&&(O.w=O.v),O.v=xae[O.v];break}if(k=R=0,H=null,U&&j.s!==void 0&&(H=m.CellXf[j.s],H!=null&&(H.numFmtId!=null&&(k=H.numFmtId),d.cellStyles&&H.fillId!=null&&(R=H.fillId))),mne(O,k,R,d,h,m),d.cellDates&&U&&O.t=="n"&&j1(Dr[k])&&(O.t="d",O.v=L_(O.v)),j.cm&&d.xlmeta){var we=(d.xlmeta.Cell||[])[+j.cm-1];we&&we.type=="XLDAPR"&&(O.D=!0)}if(G){var K=fs(j.r);u[K.r]||(u[K.r]=[]),u[K.r][K.c]=O}else u[j.r]=O}}}}J.length>0&&(u["!rows"]=J)}}();function vTe(e,t,r,a){var n=[],i=[],o=Pa(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=ds(h);for(f=o.s.r;f<=o.e.r;++f){for(i=[],u=ni(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var N=g?(e[f]||[])[h]:e[c];N!==void 0&&(l=gTe(N,c,e,t))!=null&&i.push(l)}(i.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=Vw(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),n[n.length]=qt("row",i.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=Vw(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),n[n.length]=qt("row","",x));return n.join("")}function gne(e,t,r,a){var n=[oi,qt("worksheet",null,{xmlns:sx[0],"xmlns:r":Pi.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=Pa(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Zr(d)}a||(a={}),c["!comments"]=[];var f=[];aTe(c,r,e,t,n),n[n.length]=qt("dimension",null,{ref:u}),n[n.length]=pTe(c,t,e,r),t.sheetFormat&&(n[n.length]=qt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=dTe(c,c["!cols"])),n[o=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=vTe(c,t),l.length>0&&(n[n.length]=l)),n.length>o+1&&(n[n.length]="</sheetData>",n[o]=n[o].replace("/>",">")),c["!protect"]&&(n[n.length]=iTe(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=ATe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=tTe(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=gn(a,-1,vn(x[1].Target).replace(/#.*$/,""),ga.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=vn(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=vn(x[1].Tooltip)),n[n.length]=qt("hyperlink",null,m))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=cTe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(n[n.length]=_o("ignoredErrors",qt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=gn(a,-1,"../drawings/drawing"+(e+1)+".xml",ga.DRAW),n[n.length]=qt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=gn(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ga.VML),n[n.length]=qt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function bTe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}function yTe(e,t,r){var a=Et(145),n=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;n.hpx?i=Vw(n.hpx)*20:n.hpt&&(i=n.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;n.level&&(o|=n.level),n.hidden&&(o|=16),(n.hpx||n.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,h))}var x=a.l;return a.l=c,a.write_shift(4,l),a.l=x,a.length>a.l?a.slice(0,a.l):a}function wTe(e,t,r,a){var n=yTe(a,r,t);(n.length>17||(t["!rows"]||[])[a])&&Ut(e,0,n)}var NTe=cx,CTe=_1;function ETe(){}function jTe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=_5e(e),r}function kTe(e,t,r){r==null&&(r=Et(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var n=1;n<3;++n)r.write_shift(1,0);return xk({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Aae(e,r),r.slice(0,r.l)}function STe(e){var t=ud(e);return[t]}function _Te(e,t,r){return r==null&&(r=Et(8)),ix(t,r)}function BTe(e){var t=ox(e);return[t]}function TTe(e,t,r){return r==null&&(r=Et(4)),lx(t,r)}function ITe(e){var t=ud(e),r=e.read_shift(1);return[t,r,"b"]}function OTe(e,t,r){return r==null&&(r=Et(9)),ix(t,r),r.write_shift(1,e.v?1:0),r}function FTe(e){var t=ox(e),r=e.read_shift(1);return[t,r,"b"]}function DTe(e,t,r){return r==null&&(r=Et(5)),lx(t,r),r.write_shift(1,e.v?1:0),r}function PTe(e){var t=ud(e),r=e.read_shift(1);return[t,r,"e"]}function RTe(e,t,r){return r==null&&(r=Et(9)),ix(t,r),r.write_shift(1,e.v),r}function LTe(e){var t=ox(e),r=e.read_shift(1);return[t,r,"e"]}function MTe(e,t,r){return r==null&&(r=Et(8)),lx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function UTe(e){var t=ud(e),r=e.read_shift(4);return[t,r,"s"]}function QTe(e,t,r){return r==null&&(r=Et(12)),ix(t,r),r.write_shift(4,t.v),r}function HTe(e){var t=ox(e),r=e.read_shift(4);return[t,r,"s"]}function zTe(e,t,r){return r==null&&(r=Et(8)),lx(t,r),r.write_shift(4,t.v),r}function VTe(e){var t=ud(e),r=cl(e);return[t,r,"n"]}function $Te(e,t,r){return r==null&&(r=Et(16)),ix(t,r),Hg(e.v,r),r}function xne(e){var t=ox(e),r=cl(e);return[t,r,"n"]}function GTe(e,t,r){return r==null&&(r=Et(12)),lx(t,r),Hg(e.v,r),r}function qTe(e){var t=ud(e),r=E8(e);return[t,r,"n"]}function KTe(e,t,r){return r==null&&(r=Et(12)),ix(t,r),hae(e.v,r),r}function WTe(e){var t=ox(e),r=E8(e);return[t,r,"n"]}function XTe(e,t,r){return r==null&&(r=Et(8)),lx(t,r),hae(e.v,r),r}function YTe(e){var t=ud(e),r=w8(e);return[t,r,"is"]}function JTe(e){var t=ud(e),r=ml(e);return[t,r,"str"]}function ZTe(e,t,r){return r==null&&(r=Et(12+4*e.v.length)),ix(t,r),oo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function eIe(e){var t=ox(e),r=ml(e);return[t,r,"str"]}function tIe(e,t,r){return r==null&&(r=Et(8+4*e.v.length)),lx(t,r),oo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function rIe(e,t,r){var a=e.l+t,n=ud(e);n.r=r["!row"];var i=e.read_shift(1),o=[n,i,"b"];if(r.cellFormula){e.l+=2;var l=Q_(e,a-e.l,r);o[3]=al(l,null,n,r.supbooks,r)}else e.l=a;return o}function aIe(e,t,r){var a=e.l+t,n=ud(e);n.r=r["!row"];var i=e.read_shift(1),o=[n,i,"e"];if(r.cellFormula){e.l+=2;var l=Q_(e,a-e.l,r);o[3]=al(l,null,n,r.supbooks,r)}else e.l=a;return o}function nIe(e,t,r){var a=e.l+t,n=ud(e);n.r=r["!row"];var i=cl(e),o=[n,i,"n"];if(r.cellFormula){e.l+=2;var l=Q_(e,a-e.l,r);o[3]=al(l,null,n,r.supbooks,r)}else e.l=a;return o}function sIe(e,t,r){var a=e.l+t,n=ud(e);n.r=r["!row"];var i=ml(e),o=[n,i,"str"];if(r.cellFormula){e.l+=2;var l=Q_(e,a-e.l,r);o[3]=al(l,null,n,r.supbooks,r)}else e.l=a;return o}var iIe=cx,oIe=_1;function lIe(e,t){return t==null&&(t=Et(4)),t.write_shift(4,e),t}function cIe(e,t){var r=e.l+t,a=cx(e),n=N8(e),i=ml(e),o=ml(e),l=ml(e);e.l=r;var c={rfx:a,relId:n,loc:i,display:l};return o&&(c.Tooltip=o),c}function uIe(e,t){var r=Et(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));_1({s:fs(e[0]),e:fs(e[0])},r),C8("rId"+t,r);var a=e[1].Target.indexOf("#"),n=a==-1?"":e[1].Target.slice(a+1);return oo(n||"",r),oo(e[1].Tooltip||"",r),oo("",r),r.slice(0,r.l)}function dIe(){}function fIe(e,t,r){var a=e.l+t,n=mae(e),i=e.read_shift(1),o=[n];if(o[2]=i,r.cellFormula){var l=PBe(e,a-e.l,r);o[1]=l}else e.l=a;return o}function AIe(e,t,r){var a=e.l+t,n=cx(e),i=[n];if(r.cellFormula){var o=LBe(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function hIe(e,t,r){r==null&&(r=Et(18));var a=H_(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var n=0;return t.hidden&&(n|=1),typeof a.width=="number"&&(n|=2),t.level&&(n|=t.level<<8),r.write_shift(2,n),r}var vne=["left","right","top","bottom","header","footer"];function mIe(e){var t={};return vne.forEach(function(r){t[r]=cl(e)}),t}function pIe(e,t){return t==null&&(t=Et(48)),Cg(e),vne.forEach(function(r){Hg(e[r],t)}),t}function gIe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function xIe(e,t,r){r==null&&(r=Et(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function vIe(e){var t=Et(24);return t.write_shift(4,4),t.write_shift(4,1),_1(e,t),t}function bIe(e,t){return t==null&&(t=Et(66)),t.write_shift(2,e.password?T8(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function yIe(){}function wIe(){}function NIe(e,t,r,a,n,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,N,C,T,_,O=[];l.biff=12,l["!row"]=0;var j=0,S=!1,B=[],L={},D=l.supbooks||n.supbooks||[[]];if(D.sharedf=L,D.arrayf=B,D.SheetNames=n.SheetNames||n.Sheets.map(function(G){return G.name}),!l.supbooks&&(l.supbooks=D,n.Names))for(var k=0;k<n.Names.length;++k)D[0][k+1]=n.Names[k];var R=[],U=[],H=!1;$w[16]={n:"BrtShortReal",f:xne};var Q;if(u0(e,function(J,W,Z){if(!h)switch(Z){case 148:u=J;break;case 0:m=J,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),T=ni(v=m.r),l["!row"]=m.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=Mb(J.hpt)),U[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:J[2]},J[2]){case"n":g.v=J[1];break;case"s":C=ew[J[1]],g.v=C.t,g.r=C.r;break;case"b":g.v=!!J[1];break;case"e":g.v=J[1],l.cellText!==!1&&(g.w=d0[g.v]);break;case"str":g.t="s",g.v=J[1];break;case"is":g.t="s",g.v=J[1].t;break}if((x=o.CellXf[J[0].iStyleRef])&&mne(g,x.numFmtId,null,l,i,o),y=J[0].c==-1?y+1:J[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[ds(y)+T]=g,l.cellFormula){for(S=!1,j=0;j<B.length;++j){var M=B[j];m.r>=M[0].s.r&&m.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(g.F=Zr(M[0]),S=!0)}!S&&J.length>3&&(g.f=J[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&j1(Dr[x.numFmtId])){var F=lg(g.v);F&&(g.t="d",g.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=J[0].c==-1?y+1:J[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[ds(y)+T]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 176:O.push(J);break;case 49:Q=((l.xlmeta||{}).Cell||[])[J-1];break;case 494:var X=a["!id"][J.relId];for(X?(J.Target=X.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=X):J.relId==""&&(J.Target="#"+J.loc),v=J.rfx.s.r;v<=J.rfx.e.r;++v)for(y=J.rfx.s.c;y<=J.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=J):(N=Ur({c:y,r:v}),c[N]||(c[N]={t:"z",v:void 0}),c[N].l=J);break;case 426:if(!l.cellFormula)break;B.push(J),_=l.dense?c[v][y]:c[ds(y)+T],_.f=al(J[1],d,{r:m.r,c:y},D,l),_.F=Zr(J[0]);break;case 427:if(!l.cellFormula)break;L[Ur(J[0].s)]=J[1],_=l.dense?c[v][y]:c[ds(y)+T],_.f=al(J[1],d,{r:m.r,c:y},D,l);break;case 60:if(!l.cellStyles)break;for(;J.e>=J.s;)R[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},H||(H=!0,I8(J.w/256)),Zm(R[J.e+1]);break;case 161:c["!autofilter"]={ref:Zr(J)};break;case 476:c["!margins"]=J;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),J.name&&(n.Sheets[r].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),J.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!W.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Z.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Zr(u||d)),l.sheetRows&&c["!ref"]){var V=Pa(c["!ref"]);l.sheetRows<=+V.e.r&&(V.e.r=l.sheetRows-1,V.e.r>d.e.r&&(V.e.r=d.e.r),V.e.r<V.s.r&&(V.s.r=V.e.r),V.e.c>d.e.c&&(V.e.c=d.e.c),V.e.c<V.s.c&&(V.s.c=V.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Zr(V))}return O.length>0&&(c["!merges"]=O),R.length>0&&(c["!cols"]=R),U.length>0&&(c["!rows"]=U),c}function CIe(e,t,r,a,n,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Kn(t),t.z=t.z||Dr[14],t.v=Mi(qn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=hp(n.cellXfs,t,n),t.l&&i["!links"].push([Ur(c),t.l]),t.c&&i["!comments"].push([Ur(c),t.c]),t.t){case"s":case"str":return n.bookSST?(l=R8(n.Strings,t.v,n.revStrings),c.t="s",c.v=l,o?Ut(e,18,zTe(t,c)):Ut(e,7,QTe(t,c))):(c.t="str",o?Ut(e,17,tIe(t,c)):Ut(e,6,ZTe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Ut(e,13,XTe(t,c)):Ut(e,2,KTe(t,c)):o?Ut(e,16,GTe(t,c)):Ut(e,5,$Te(t,c)),!0;case"b":return c.t="b",o?Ut(e,15,DTe(t,c)):Ut(e,4,OTe(t,c)),!0;case"e":return c.t="e",o?Ut(e,14,MTe(t,c)):Ut(e,3,RTe(t,c)),!0}return o?Ut(e,12,TTe(t,c)):Ut(e,1,_Te(t,c)),!0}function EIe(e,t,r,a){var n=Pa(t["!ref"]||"A1"),i,o="",l=[];Ut(e,145);var c=Array.isArray(t),u=n.e.r;t["!rows"]&&(u=Math.max(n.e.r,t["!rows"].length-1));for(var d=n.s.r;d<=u;++d){o=ni(d),wTe(e,t,n,d);var f=!1;if(d<=n.e.r)for(var h=n.s.c;h<=n.e.c;++h){d===n.s.r&&(l[h]=ds(h)),i=l[h]+o;var m=c?(t[d]||[])[h]:t[i];if(!m){f=!1;continue}f=CIe(e,m,d,h,a,t,f)}}Ut(e,146)}function jIe(e,t){!t||!t["!merges"]||(Ut(e,177,lIe(t["!merges"].length)),t["!merges"].forEach(function(r){Ut(e,176,oIe(r))}),Ut(e,178))}function kIe(e,t){!t||!t["!cols"]||(Ut(e,390),t["!cols"].forEach(function(r,a){r&&Ut(e,60,hIe(a,r))}),Ut(e,391))}function SIe(e,t){!t||!t["!ref"]||(Ut(e,648),Ut(e,649,vIe(Pa(t["!ref"]))),Ut(e,650))}function _Ie(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var n=gn(r,-1,a[1].Target.replace(/#.*$/,""),ga.HLINK);Ut(e,494,uIe(a,n))}}),delete t["!links"]}function BIe(e,t,r,a){if(t["!comments"].length>0){var n=gn(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ga.VML);Ut(e,551,C8("rId"+n)),t["!legacy"]=n}}function TIe(e,t,r,a){if(t["!autofilter"]){var n=t["!autofilter"],i=typeof n.ref=="string"?n.ref:Zr(n.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=wc(i);l.s.r==l.e.r&&(l.e.r=wc(t["!ref"]).e.r,i=Zr(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Ut(e,161,_1(Pa(i))),Ut(e,162)}}function IIe(e,t,r){Ut(e,133),Ut(e,137,xIe(t,r)),Ut(e,138),Ut(e,134)}function OIe(e,t){t["!protect"]&&Ut(e,535,bIe(t["!protect"]))}function FIe(e,t,r,a){var n=bc(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Pa(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ut(n,129),(r.vbaraw||o["!outline"])&&Ut(n,147,kTe(l,o["!outline"])),Ut(n,148,CTe(c)),IIe(n,o,r.Workbook),kIe(n,o),EIe(n,o,e,t),OIe(n,o),TIe(n,o,r,e),jIe(n,o),_Ie(n,o,a),o["!margins"]&&Ut(n,476,pIe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&SIe(n,o),BIe(n,o,e,a),Ut(n,130),n.end()}function DIe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var n=Fa((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,n,a]}function PIe(e,t,r,a,n,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=DIe(f);d.s.r=d.s.c=0,d.e.c=l,u=ds(l),h[0].forEach(function(m,g){o[u+ni(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Zr(d)),o}function RIe(e,t,r,a,n){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(pne);return l&&L8(l[0],i,n,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function LIe(e,t){e.l+=10;var r=ml(e);return{name:r}}function MIe(e,t,r,a,n){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return u0(e,function(c,u,d){switch(d){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var M8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],UIe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],QIe=[],HIe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function NV(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],n=0;n!=t.length;++n){var i=t[n];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=$n(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function CV(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=$n(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function bne(e){CV(e.WBProps,M8),CV(e.CalcPr,HIe),NV(e.WBView,UIe),NV(e.Sheets,QIe),ob.date1904=$n(e.WBProps.date1904)}function zIe(e){return!e.Workbook||!e.Workbook.WBProps?"false":$n(e.Workbook.WBProps.date1904)?"true":"false"}var VIe="][*?/\\".split("");function yne(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return VIe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function $Ie(e,t,r){e.forEach(function(a,n){yne(a);for(var i=0;i<n;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[n]&&t[n].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function GIe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];$Ie(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)zBe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var qIe=/<\w+:workbook/;function KIe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",i={},o=0;if(e.replace(bl,function(c,u){var d=Vr(c);switch(SA(d[0])){case"<?xml":break;case"<workbook":c.match(qIe)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[n];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":M8.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=$n(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=kn(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Fa(kn(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=kn(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),$n(d.hidden||"0")&&(i.Hidden=!0),o=u+c.length;break;case"</definedName>":i.Ref=Fa(kn(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),sx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return bne(r),r}function wne(e){var t=[oi];t[t.length]=qt("workbook",null,{xmlns:sx[0],"xmlns:r":Pi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(M8.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=qt("workbookPr",null,a);var n=e.Workbook&&e.Workbook.Sheets||[],i=0;if(n&&n[0]&&n[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!n[i]||!n[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:vn(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),n[i])switch(n[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=qt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=qt("definedName",vn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function WIe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=uF(e),r.name=ml(e),r}function XIe(e,t){return t||(t=Et(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),C8(e.strRelID,t),oo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function YIe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?ml(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function JIe(e,t){t||(t=Et(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Aae(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function ZIe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function e6e(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),i=B5e(e),o=RBe(e,0,r),l=N8(e);e.l=a;var c={Name:i,Ptg:o};return n<268435455&&(c.Sheet=n),l&&(c.Comment=l),c}function t6e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],$w[16]={n:"BrtFRTArchID$",f:ZIe},u0(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=al(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(d),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!u.T){if(!n||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),bne(r),r.Names=i,r.supbooks=o,r}function r6e(e,t){Ut(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,n={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ut(e,156,XIe(n))}Ut(e,144)}function a6e(e,t){t||(t=Et(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return oo("SheetJS",t),oo(dk.version,t),oo(dk.version,t),oo("7262",t),t.length>t.l?t.slice(0,t.l):t}function n6e(e,t){t||(t=Et(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function s6e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,n=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&n==-1?n=a:r[a].Hidden==1&&i==-1&&(i=a);i>n||(Ut(e,135),Ut(e,158,n6e(n)),Ut(e,136))}}function i6e(e,t){var r=bc();return Ut(r,131),Ut(r,128,a6e()),Ut(r,153,JIe(e.Workbook&&e.Workbook.WBProps||null)),s6e(r,e),r6e(r,e),Ut(r,132),r.end()}function o6e(e,t,r){return t.slice(-4)===".bin"?t6e(e,r):KIe(e,r)}function l6e(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?NIe(e,a,r,n,i,o,l):eTe(e,a,r,n,i,o,l)}function c6e(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?MIe(e,a,r,n,i):RIe(e,a,r,n,i)}function u6e(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?f3e():A3e()}function d6e(e,t,r,a,n,i,o,l){return t.slice(-4)===".bin"?u3e():d3e()}function f6e(e,t,r,a){return t.slice(-4)===".bin"?o4e(e,r,a):W_e(e,r,a)}function A6e(e,t,r){return rne(e,r)}function h6e(e,t,r){return t.slice(-4)===".bin"?h_e(e,r):d_e(e,r)}function m6e(e,t,r){return t.slice(-4)===".bin"?s3e(e,r):X4e(e,r)}function p6e(e,t,r){return t.slice(-4)===".bin"?q4e(e):$4e(e)}function g6e(e,t,r,a){return r.slice(-4)===".bin"?K4e(e,t,r,a):void 0}function x6e(e,t,r){return t.slice(-4)===".bin"?H4e(e,t,r):V4e(e,t,r)}function v6e(e,t,r){return(t.slice(-4)===".bin"?i6e:wne)(e)}function b6e(e,t,r,a,n){return(t.slice(-4)===".bin"?FIe:gne)(e,r,a,n)}function y6e(e,t,r){return(t.slice(-4)===".bin"?g4e:ene)(e,r)}function w6e(e,t,r){return(t.slice(-4)===".bin"?g_e:Gae)(e,r)}function N6e(e,t,r){return(t.slice(-4)===".bin"?i3e:sne)(e)}function C6e(e){return(e.slice(-4)===".bin"?z4e:ane)()}var Nne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Cne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Pd(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=e.match(Nne),i,o,l,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(Cne),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function E6e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(Nne),n,i,o,l;if(a)for(l=0;l!=a.length;++l)n=a[l].match(Cne),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?o="xmlns"+n[1].slice(6):o=n[1].slice(i+1),r[o]=n[2].slice(1,n[2].length-1));return r}var rw;function j6e(e,t){var r=rw[e]||Fa(e);return r==="General"?Ug(t):od(r,t)}function k6e(e,t,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=$n(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=qn(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Fa(t)]=n}function S6e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||d0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Pw(e.v):e.w=Ug(e.v):e.w=j6e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=rw[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&j1(a)){var n=lg(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function _6e(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=Q_e[a.Pattern]||a.Pattern)}e[t.ID]=t}function B6e(e,t,r,a,n,i,o,l,c,u){var d="General",f=a.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(d=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=$n(e);break;case"String":a.t="s",a.r=Qz(Fa(e)),a.v=e.indexOf("<")>-1?Fa(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(qn(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Fa(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=xae[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=Qz(t||e));break}if(S6e(a,d,u),u.cellFormula!==!1)if(a.Formula){var x=Fa(a.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),a.f=ib(x,n),delete a.Formula,a.ArrayRange=="RC"?a.F=ib("RC:RC",n):a.ArrayRange&&(a.F=ib(a.ArrayRange,n),c.push([Pa(a.F),a.F]))}else for(g=0;g<c.length;++g)n.r>=c[g][0].s.r&&n.r<=c[g][0].e.r&&n.c>=c[g][0].s.c&&n.c<=c[g][0].e.c&&(a.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),a.s=h),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function T6e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function nT(e,t){var r=t||{};k1();var a=N2(g8(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=kn(a));var n=a.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var o=Kn(r);return o.type="string",Lb.to_workbook(a,o)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(he){n.indexOf("<"+he)>=0&&(i=!0)}),i)return pOe(a,r);rw={"General Number":"General","General Date":Dr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dr[15],"Short Date":Dr[14],"Long Time":Dr[19],"Medium Time":Dr[18],"Short Time":Dr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dr[2],Standard:Dr[4],Percent:Dr[10],Scientific:Dr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=Pd('<Data ss:Type="String">'),y=0,N=0,C=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},_={},O={},j="",S=0,B=[],L={},D={},k=0,R=[],U=[],H={},Q=[],V,G=!1,J=[],W=[],Z={},M=0,F=0,X={Sheets:[],WBProps:{date1904:!1}},Y={};Mw.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";l=Mw.exec(a);)switch(l[3]=(ae=l[3]).toLowerCase()){case"data":if(ae=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?B6e(a.slice(y,l.index),j,v,c[c.length-1][0]=="comment"?H:g,{c:N,r:C},_,Q[N],x,J,r):(j="",v=Pd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(U.length>0&&(g.c=U),(!r.sheetRows||r.sheetRows>C)&&g.v!==void 0&&(r.dense?(h[C]||(h[C]=[]),h[C][N]=g):h[ds(N)+ni(C)]=g),g.HRef&&(g.l={Target:Fa(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(M=N+(parseInt(g.MergeAcross,10)|0),F=C+(parseInt(g.MergeDown,10)|0),B.push({s:{c:N,r:C},e:{c:M,r:F}})),!r.sheetStubs)g.MergeAcross?N=M+1:++N;else if(g.MergeAcross||g.MergeDown){for(var le=N;le<=M;++le)for(var ie=C;ie<=F;++ie)(le>N||ie>C)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][le]={t:"z"}):h[ds(le)+ni(ie)]={t:"z"});N=M+1}else++N;else g=E6e(l[0]),g.Index&&(N=+g.Index-1),N<T.s.c&&(T.s.c=N),N>T.e.c&&(T.e.c=N),l[0].slice(-2)==="/>"&&++N,U=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(C<T.s.r&&(T.s.r=C),C>T.e.r&&(T.e.r=C),l[0].slice(-2)==="/>"&&(x=Pd(l[0]),x.Index&&(C=+x.Index-1)),N=0,++C):(x=Pd(l[0]),x.Index&&(C=+x.Index-1),Z={},(x.AutoFitHeight=="0"||x.Height)&&(Z.hpx=parseInt(x.Height,10),Z.hpt=Vw(Z.hpx),W[C]=Z),x.Hidden=="1"&&(Z.hidden=!0,W[C]=Z));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(h["!ref"]=Zr(T),r.sheetRows&&r.sheetRows<=T.e.r&&(h["!fullref"]=h["!ref"],T.e.r=r.sheetRows-1,h["!ref"]=Zr(T))),B.length&&(h["!merges"]=B),Q.length>0&&(h["!cols"]=Q),W.length>0&&(h["!rows"]=W),d[m]=h}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=N=0,c.push([l[3],!1]),u=Pd(l[0]),m=Fa(u.Name),h=r.dense?[]:{},B=[],J=[],W=[],Y={name:m,Hidden:0},X.Sheets.push(Y);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Q=[],G=!1}break;case"style":l[1]==="/"?_6e(_,O,r):O=Pd(l[0]);break;case"numberformat":O.nf=Fa(Pd(l[0]).Format||"General"),rw[O.nf]&&(O.nf=rw[O.nf]);for(var ne=0;ne!=392&&Dr[ne]!=O.nf;++ne);if(ne==392){for(ne=57;ne!=392;++ne)if(Dr[ne]==null){Fh(O.nf,ne);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(V=Pd(l[0]),V.Hidden&&(V.hidden=!0,delete V.Hidden),V.Width&&(V.wpx=parseInt(V.Width,10)),!G&&V.wpx>10){G=!0,il=Jae;for(var oe=0;oe<Q.length;++oe)Q[oe]&&Zm(Q[oe])}G&&Zm(V),Q[V.Index-1||Q.length]=V;for(var we=0;we<+V.Span;++we)Q[Q.length]=Kn(V);break;case"namedrange":if(l[1]==="/")break;X.Names||(X.Names=[]);var K=Vr(l[0]),Ee={Name:K.Name,Ref:ib(K.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(Ee.Sheet=X.Sheets.length-1),X.Names.push(Ee);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=a.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;O.Interior=Pd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?tke(L,ae,a.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));T6e(H),U.push(H)}else c.push([l[3],!1]),u=Pd(l[0]),H={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var _e=Pd(l[0]);h["!autofilter"]={ref:ib(_e.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return _V(a,r);var Ce=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ce=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ce=!1}break;case"excelworkbook":switch(l[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ce=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Ce=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(k,l.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else k=l.index+l[0].length;break;case"header":h["!margins"]||Cg(h["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(h["!margins"].header=+Vr(l[0]).Margin);break;case"footer":h["!margins"]||Cg(h["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(h["!margins"].footer=+Vr(l[0]).Margin);break;case"pagemargins":var de=Vr(l[0]);h["!margins"]||Cg(h["!margins"]={},"xlml"),isNaN(+de.Top)||(h["!margins"].top=+de.Top),isNaN(+de.Left)||(h["!margins"].left=+de.Left),isNaN(+de.Right)||(h["!margins"].right=+de.Right),isNaN(+de.Bottom)||(h["!margins"].bottom=+de.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ce=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ce=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ce=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ce=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ce=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ce=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ce=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ce=!1}break;case"smarttags":break;default:Ce=!1;break}if(Ce||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?k6e(D,ae,R,a.slice(k,l.index)):(R=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var xe={};return!r.bookSheets&&!r.bookProps&&(xe.Sheets=d),xe.SheetNames=f,xe.Workbook=X,xe.SSF=Kn(Dr),xe.Props=L,xe.Custprops=D,xe}function gF(e,t){switch(Q8(t=t||{}),t.type||"base64"){case"base64":return nT(cu(e),t);case"binary":case"buffer":case"file":return nT(e,t);case"array":return nT(fp(e),t)}}function I6e(e,t){var r=[];return e.Props&&r.push(rke(e.Props,t)),e.Custprops&&r.push(ake(e.Props,e.Custprops)),r.join("")}function O6e(){return""}function F6e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,n){var i=[];i.push(qt("NumberFormat",null,{"ss:Format":vn(Dr[a.numFmtId])}));var o={"ss:ID":"s"+(21+n)};r.push(qt("Style",i.join(""),o))}),qt("Styles",r.join(""))}function Ene(e){return qt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+D8(e.Ref,{r:0,c:0})})}function D6e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var n=t[a];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||r.push(Ene(n)))}return qt("Names",r.join(""))}function P6e(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var n=a.Workbook.Names,i=[],o=0;o<n.length;++o){var l=n[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(Ene(l)))}return i.join("")}function R6e(e,t,r,a){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push(qt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push(qt("Footer",null,{"x:Margin":e["!margins"].footer})),n.push(qt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)n.push(qt("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&n.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(_o("ProtectContents","True")),e["!protect"].objects&&n.push(_o("ProtectObjects","True")),e["!protect"].scenarios&&n.push(_o("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?n.push(_o("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&n.push(_o("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&n.push("<"+o[1]+"/>")})),n.length==0?"":qt("WorksheetOptions",n.join(""),{xmlns:Yc.x})}function L6e(e){return e.map(function(t){var r=s5e(t.t||""),a=qt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return qt("Comment",a,{"ss:Author":t.a})}).join("")}function M6e(e,t,r,a,n,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+vn(D8(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=fs(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=vn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=vn(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=d0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Dr[14]);break;case"s":f="String",h=n5e(e.v||"");break}var m=hp(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=L6e(e.c)),qt("Cell",x,l)}function U6e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Mb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Q6e(e,t,r,a){if(!e["!ref"])return"";var n=Pa(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){Zm(v);var N=!!v.width,C=H_(y,v),T={"ss:Index":y+1};N&&(T["ss:Width"]=Hw(C.width)),v.hidden&&(T["ss:Hidden"]="1"),l.push(qt("Column",null,T))});for(var c=Array.isArray(e),u=n.s.r;u<=n.e.r;++u){for(var d=[U6e(u,(e["!rows"]||[])[u])],f=n.s.c;f<=n.e.c;++f){var h=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>u)&&!(i[o].e.c<f)&&!(i[o].e.r<u)){(i[o].s.c!=f||i[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=Ur(m),x=c?(e[u]||[])[f]:e[g];d.push(M6e(x,g,e,t,r,a,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function H6e(e,t,r){var a=[],n=r.SheetNames[e],i=r.Sheets[n],o=i?P6e(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?Q6e(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(R6e(i,t,e,r)),a.join("")}function z6e(e,t){t||(t={}),e.SSF||(e.SSF=Kn(Dr)),e.SSF&&(k1(),D_(e.SSF),t.revssf=R_(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],hp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(I6e(e,t)),r.push(O6e()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(qt("Worksheet",H6e(a,t,e),{"ss:Name":vn(e.SheetNames[a])}));return r[2]=F6e(e,t),r[3]=D6e(e),oi+qt("Workbook",r.join(""),{xmlns:Yc.ss,"xmlns:o":Yc.o,"xmlns:x":Yc.x,"xmlns:ss":Yc.ss,"xmlns:dt":Yc.dt,"xmlns:html":Yc.html})}function V6e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=D5e(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=P5e(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var $6e=[60,1084,2066,2165,2175];function G6e(e,t,r,a,n){var i=a,o=[],l=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Ch(r,r.l),u=xF[c],d=0;u!=null&&$6e.indexOf(c)>-1;)i=Ch(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+i),o.push(l),r.l+=4+i,u=xF[c=Ch(r,r.l)];var f=io(o);So(f,0);var h=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(h),h+=o[m].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,n)}function qf(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Dr[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||d0[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Pw(e.v):e.w=Ug(e.v):e.w=od(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&j1(Dr[a]||String(a))){var n=lg(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function QE(e,t,r){return{v:e,ixfe:t,t:r}}function q6e(e,t){var r={opts:{}},a={},n=t.dense?[]:{},i={},o={},l=null,c=[],u="",d={},f,h="",m,g,x,v,y={},N=[],C,T,_=[],O=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},B=function(bt){return bt<8?yg[bt]:bt<64&&O[bt-8]||yg[bt]},L=function(bt,ut,ze){var Tt=ut.XF.data;if(!(!Tt||!Tt.patternType||!ze||!ze.cellStyles)){ut.s={},ut.s.patternType=Tt.patternType;var ir;(ir=Qw(B(Tt.icvFore)))&&(ut.s.fgColor={rgb:ir}),(ir=Qw(B(Tt.icvBack)))&&(ut.s.bgColor={rgb:ir})}},D=function(bt,ut,ze){if(!(Z>1)&&!(ze.sheetRows&&bt.r>=ze.sheetRows)){if(ze.cellStyles&&ut.XF&&ut.XF.data&&L(bt,ut,ze),delete ut.ixfe,delete ut.XF,f=bt,h=Ur(bt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),bt.r<o.s.r&&(o.s.r=bt.r),bt.c<o.s.c&&(o.s.c=bt.c),bt.r+1>o.e.r&&(o.e.r=bt.r+1),bt.c+1>o.e.c&&(o.e.c=bt.c+1),ze.cellFormula&&ut.f){for(var Tt=0;Tt<N.length;++Tt)if(!(N[Tt][0].s.c>bt.c||N[Tt][0].s.r>bt.r)&&!(N[Tt][0].e.c<bt.c||N[Tt][0].e.r<bt.r)){ut.F=Zr(N[Tt][0]),(N[Tt][0].s.c!=bt.c||N[Tt][0].s.r!=bt.r)&&delete ut.f,ut.f&&(ut.f=""+al(N[Tt][1],o,bt,J,k));break}}ze.dense?(n[bt.r]||(n[bt.r]=[]),n[bt.r][bt.c]=ut):n[h]=ut}},k={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var R,U=[],H=[],Q=[],V=[],G=!1,J=[];J.SheetNames=k.snames,J.sharedf=k.sharedf,J.arrayf=k.arrayf,J.names=[],J.XTI=[];var W=0,Z=0,M=0,F=[],X=[],Y;k.codepage=1200,Gd(1200);for(var ae=!1;e.l<e.length-1;){var le=e.l,ie=e.read_shift(2);if(ie===0&&W===10)break;var ne=e.l===e.length?0:e.read_shift(2),oe=xF[ie];if(oe&&oe.f){if(t.bookSheets&&W===133&&ie!==133)break;if(W=ie,oe.r===2||oe.r==12){var we=e.read_shift(2);if(ne-=2,!k.enc&&we!==ie&&((we&255)<<8|we>>8)!==ie)throw new Error("rt mismatch: "+we+"!="+ie);oe.r==12&&(e.l+=10,ne-=10)}var K={};if(ie===10?K=oe.f(e,ne,k):K=G6e(ie,oe,e,ne,k),Z==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(ie){case 34:r.opts.Date1904=j.WBProps.date1904=K;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=K,!t.password)throw new Error("File is password-protected");if(K.valid==null)throw new Error("Encryption scheme unsupported");if(!K.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=K;break;case 66:var Ee=Number(K);switch(Ee){case 21010:Ee=1200;break;case 32768:Ee=1e4;break;case 32769:Ee=1252;break}Gd(k.codepage=Ee),ae=!0;break;case 317:k.rrtabid=K;break;case 25:k.winlocked=K;break;case 439:r.opts.RefreshAll=K;break;case 12:r.opts.CalcCount=K;break;case 16:r.opts.CalcDelta=K;break;case 17:r.opts.CalcIter=K;break;case 13:r.opts.CalcMode=K;break;case 14:r.opts.CalcPrecision=K;break;case 95:r.opts.CalcSaveRecalc=K;break;case 15:k.CalcRefMode=K;break;case 2211:r.opts.FullCalc=K;break;case 129:K.fDialog&&(n["!type"]="dialog"),K.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),K.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:_.push(K);break;case 430:J.push([K]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(K);break;case 24:case 536:Y={Name:K.Name,Ref:al(K.rgce,o,null,J,k)},K.itab>0&&(Y.Sheet=K.itab-1),J.names.push(Y),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(K),K.Name=="_xlnm._FilterDatabase"&&K.itab>0&&K.rgce&&K.rgce[0]&&K.rgce[0][0]&&K.rgce[0][0][0]=="PtgArea3d"&&(X[K.itab-1]={ref:Zr(K.rgce[0][0][1][2])});break;case 22:k.ExternCount=K;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(K),J.XTI=J.XTI.concat(K);break;case 2196:if(k.biff<8)break;Y!=null&&(Y.Comment=K[1]);break;case 18:n["!protect"]=K;break;case 19:K!==0&&k.WTF&&console.error("Password verifier: "+K);break;case 133:i[K.pos]=K,k.snames.push(K.name);break;case 10:{if(--Z)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,n["!ref"]=Zr(o),t.sheetRows&&t.sheetRows<=o.e.r){var _e=o.e.r;o.e.r=t.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=Zr(o),o.e.r=_e}o.e.r++,o.e.c++}U.length>0&&(n["!merges"]=U),H.length>0&&(n["!objects"]=H),Q.length>0&&(n["!cols"]=Q),V.length>0&&(n["!rows"]=V),j.Sheets.push(S)}u===""?d=n:a[u]=n,n=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[K.BIFFVer]||8),k.biffguess=K.BIFFVer==0,K.BIFFVer==0&&K.dt==4096&&(k.biff=5,ae=!0,Gd(k.codepage=28591)),k.biff==8&&K.BIFFVer==0&&K.dt==16&&(k.biff=2),Z++)break;if(n=t.dense?[]:{},k.biff<8&&!ae&&(ae=!0,Gd(k.codepage=t.codepage||1252)),k.biff<5||K.BIFFVer==0&&K.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Ce={pos:e.l-ne,name:u};i[Ce.pos]=Ce,k.snames.push(u)}else u=(i[le]||{name:""}).name;K.dt==32&&(n["!type"]="chart"),K.dt==64&&(n["!type"]="macro"),U=[],H=[],k.arrayf=N=[],Q=[],V=[],G=!1,S={Hidden:(i[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(t.dense?(n[K.r]||[])[K.c]:n[Ur({c:K.c,r:K.r})])&&++K.c,C={ixfe:K.ixfe,XF:_[K.ixfe]||{},v:K.val,t:"n"},M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:K.c,r:K.r},C,t);break;case 5:case 517:C={ixfe:K.ixfe,XF:_[K.ixfe],v:K.val,t:K.t},M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:K.c,r:K.r},C,t);break;case 638:C={ixfe:K.ixfe,XF:_[K.ixfe],v:K.rknum,t:"n"},M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:K.c,r:K.r},C,t);break;case 189:for(var de=K.c;de<=K.C;++de){var xe=K.rkrec[de-K.c][0];C={ixfe:xe,XF:_[xe],v:K.rkrec[de-K.c][1],t:"n"},M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:de,r:K.r},C,t)}break;case 6:case 518:case 1030:{if(K.val=="String"){l=K;break}if(C=QE(K.val,K.cell.ixfe,K.tt),C.XF=_[C.ixfe],t.cellFormula){var he=K.formula;if(he&&he[0]&&he[0][0]&&he[0][0][0]=="PtgExp"){var ye=he[0][0][1][0],ce=he[0][0][1][1],Ae=Ur({r:ye,c:ce});y[Ae]?C.f=""+al(K.formula,o,K.cell,J,k):C.F=((t.dense?(n[ye]||[])[ce]:n[Ae])||{}).F}else C.f=""+al(K.formula,o,K.cell,J,k)}M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D(K.cell,C,t),l=K}break;case 7:case 519:if(l)l.val=K,C=QE(K,l.cell.ixfe,"s"),C.XF=_[C.ixfe],t.cellFormula&&(C.f=""+al(l.formula,o,l.cell,J,k)),M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D(l.cell,C,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(K);var Ne=Ur(K[0].s);if(m=t.dense?(n[K[0].s.r]||[])[K[0].s.c]:n[Ne],t.cellFormula&&m){if(!l||!Ne||!m)break;m.f=""+al(K[1],o,K[0],J,k),m.F=Zr(K[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[Ur(l.cell)]=K[0],m=t.dense?(n[l.cell.r]||[])[l.cell.c]:n[Ur(l.cell)],(m||{}).f=""+al(K[0],o,f,J,k)}}break;case 253:C=QE(c[K.isst].t,K.ixfe,"s"),c[K.isst].h&&(C.h=c[K.isst].h),C.XF=_[C.ixfe],M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:K.c,r:K.r},C,t);break;case 513:t.sheetStubs&&(C={ixfe:K.ixfe,XF:_[K.ixfe],t:"z"},M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:K.c,r:K.r},C,t));break;case 190:if(t.sheetStubs)for(var Pe=K.c;Pe<=K.C;++Pe){var Qe=K.ixfe[Pe-K.c];C={ixfe:Qe,XF:_[Qe],t:"z"},M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:Pe,r:K.r},C,t)}break;case 214:case 516:case 4:C=QE(K.val,K.ixfe,"s"),C.XF=_[C.ixfe],M>0&&(C.z=F[C.ixfe>>8&63]),qf(C,t,r.opts.Date1904),D({c:K.c,r:K.r},C,t);break;case 0:case 512:Z===1&&(o=K);break;case 252:c=K;break;case 1054:if(k.biff==4){F[M++]=K[1];for(var $e=0;$e<M+163&&Dr[$e]!=K[1];++$e);$e>=163&&Fh(K[1],M+163)}else Fh(K[1],K[0]);break;case 30:{F[M++]=K;for(var et=0;et<M+163&&Dr[et]!=K;++et);et>=163&&Fh(K,M+163)}break;case 229:U=U.concat(K);break;case 93:H[K.cmo[0]]=k.lastobj=K;break;case 438:k.lastobj.TxO=K;break;case 127:k.lastobj.ImData=K;break;case 440:for(v=K[0].s.r;v<=K[0].e.r;++v)for(x=K[0].s.c;x<=K[0].e.c;++x)m=t.dense?(n[v]||[])[x]:n[Ur({c:x,r:v})],m&&(m.l=K[1]);break;case 2048:for(v=K[0].s.r;v<=K[0].e.r;++v)for(x=K[0].s.c;x<=K[0].e.c;++x)m=t.dense?(n[v]||[])[x]:n[Ur({c:x,r:v})],m&&m.l&&(m.l.Tooltip=K[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;m=t.dense?(n[K[0].r]||[])[K[0].c]:n[Ur(K[0])];var Ke=H[K[2]];m||(t.dense?(n[K[0].r]||(n[K[0].r]=[]),m=n[K[0].r][K[0].c]={t:"z"}):m=n[Ur(K[0])]={t:"z"},o.e.r=Math.max(o.e.r,K[0].r),o.s.r=Math.min(o.s.r,K[0].r),o.e.c=Math.max(o.e.c,K[0].c),o.s.c=Math.min(o.s.c,K[0].c)),m.c||(m.c=[]),g={a:K[1],t:Ke.TxO.t},m.c.push(g)}break;case 2173:F4e(_[K.ixfe],K.ext);break;case 125:{if(!k.cellStyles)break;for(;K.e>=K.s;)Q[K.e--]={width:K.w/256,level:K.level||0,hidden:!!(K.flags&1)},G||(G=!0,I8(K.w/256)),Zm(Q[K.e+1])}break;case 520:{var Ge={};K.level!=null&&(V[K.r]=Ge,Ge.level=K.level),K.hidden&&(V[K.r]=Ge,Ge.hidden=!0),K.hpt&&(V[K.r]=Ge,Ge.hpt=K.hpt,Ge.hpx=Mb(K.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||Cg(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=K;break;case 161:n["!margins"]||Cg(n["!margins"]={}),n["!margins"].header=K.header,n["!margins"].footer=K.footer;break;case 574:K.RTL&&(j.Views[0].RTL=!0);break;case 146:O=K;break;case 2198:R=K;break;case 140:T=K;break;case 442:u?S.CodeName=K||S.name:j.WBProps.CodeName=K||"ThisWorkbook";break}}else oe||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=ne}return r.SheetNames=Ls(i).sort(function(nt,bt){return Number(nt)-Number(bt)}).map(function(nt){return i[nt].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(nt,bt){r.Sheets[r.SheetNames[bt]]["!autofilter"]=nt}),r.Strings=c,r.SSF=Kn(Dr),k.enc&&(r.Encryption=k.enc),R&&(r.Themes=R),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),J.names.length>0&&(j.Names=J.names),r.Workbook=j,r}var aw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function K6e(e,t,r){var a=Er.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=sV(a,dF,aw.DSI);for(var i in n)t[i]=n[i]}catch(u){if(r.WTF)throw u}var o=Er.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=sV(o,fF,aw.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Cae(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function W6e(e,t){var r=[],a=[],n=[],i=0,o,l=Dz(dF,"n"),c=Dz(fF,"n");if(e.Props)for(o=Ls(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:n).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Ls(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:n).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<n.length;++i)Tae.indexOf(n[i][0])>-1||Nae.indexOf(n[i][0])>-1||n[i][1]!=null&&u.push(n[i]);a.length&&Er.utils.cfb_add(t,"/SummaryInformation",iV(a,aw.SI,c,fF)),(r.length||u.length)&&Er.utils.cfb_add(t,"/DocumentSummaryInformation",iV(r,aw.DSI,l,dF,u.length?u:null,aw.UDI))}function jne(e,t){t||(t={}),Q8(t),l8(),t.codepage&&o8(t.codepage);var r,a;if(e.FullPaths){if(Er.find(e,"/encryption"))throw new Error("File is password-protected");r=Er.find(e,"!CompObj"),a=Er.find(e,"/Workbook")||Er.find(e,"/Book")}else{switch(t.type){case"base64":e=ru(cu(e));break;case"binary":e=ru(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}So(e,0),a={content:e}}var n,i;if(r&&V6e(r),t.bookProps&&!t.bookSheets)n={};else{var o=da?"buffer":"array";if(a&&a.content)n=q6e(a.content,t);else if((i=Er.find(e,"PerfectOffice_MAIN"))&&i.content)n=Ng.to_workbook(i.content,(t.type=o,t));else if((i=Er.find(e,"NativeContent_MAIN"))&&i.content)n=Ng.to_workbook(i.content,(t.type=o,t));else throw(i=Er.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Er.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=l3e(e))}var l={};return e.FullPaths&&K6e(e,l,t),n.Props=n.Custprops=l,t.bookFiles&&(n.cfb=e),n}function X6e(e,t){var r=t||{},a=Er.utils.cfb_new({root:"R"}),n="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":n="/Workbook",r.biff=8;break;case"biff5":n="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Er.utils.cfb_add(a,n,kne(e,r)),r.biff==8&&(e.Props||e.Custprops)&&W6e(e,a),r.biff==8&&e.vbaraw&&c3e(a,Er.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var $w={0:{f:bTe},1:{f:STe},2:{f:qTe},3:{f:PTe},4:{f:ITe},5:{f:VTe},6:{f:JTe},7:{f:UTe},8:{f:sIe},9:{f:nIe},10:{f:rIe},11:{f:aIe},12:{f:BTe},13:{f:WTe},14:{f:LTe},15:{f:FTe},16:{f:xne},17:{f:eIe},18:{f:HTe},19:{f:w8},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:e6e},40:{},42:{},43:{f:J_e},44:{f:X_e},45:{f:t4e},46:{f:a4e},47:{f:r4e},48:{},49:{f:N5e},50:{},51:{f:R4e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Hae},62:{f:YTe},63:{f:G4e},64:{f:yIe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:gIe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:jTe},148:{f:NTe,p:16},151:{f:dIe},152:{},153:{f:YIe},154:{},155:{},156:{f:WIe},157:{},158:{},159:{T:1,f:A_e},160:{T:-1},161:{T:1,f:cx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:iIe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:D4e},336:{T:-1},337:{f:U4e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:uF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Qae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:fIe},427:{f:AIe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:mIe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:ETe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:cIe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:uF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:a3e},633:{T:1},634:{T:-1},635:{T:1,f:t3e},636:{T:-1},637:{f:k5e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:LIe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:wIe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},xF={6:{f:rT},10:{f:J0},12:{f:vi},13:{f:vi},14:{f:Xs},15:{f:Xs},16:{f:cl},17:{f:Xs},18:{f:Xs},19:{f:vi},20:{f:fV},21:{f:fV},23:{f:Qae},24:{f:hV},25:{f:Xs},26:{},27:{},28:{f:wSe},29:{},34:{f:Xs},35:{f:AV},38:{f:cl},39:{f:cl},40:{f:cl},41:{f:cl},42:{f:Xs},43:{f:Xs},47:{f:F_e},49:{f:Wke},51:{f:vi},60:{},61:{f:Vke},64:{f:Xs},65:{f:Kke},66:{f:vi},77:{},80:{},81:{},82:{},85:{f:vi},89:{},90:{},91:{},92:{f:Oke},93:{f:ESe},94:{},95:{f:Xs},96:{},97:{},99:{f:Xs},125:{f:Hae},128:{f:uSe},129:{f:Dke},130:{f:vi},131:{f:Xs},132:{f:Xs},133:{f:Pke},134:{},140:{f:OSe},141:{f:vi},144:{},146:{f:PSe},151:{},152:{},153:{},154:{},155:{},156:{f:vi},157:{},158:{},160:{f:zSe},161:{f:MSe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:iSe},190:{f:oSe},193:{f:J0},197:{},198:{},199:{},200:{},201:{},202:{f:Xs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:vi},220:{},221:{f:Xs},222:{},224:{f:cSe},225:{f:Ike},226:{f:J0},227:{},229:{f:NSe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Lke},253:{f:Yke},255:{f:Uke},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Iae},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Xs},353:{f:J0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:mSe},431:{f:Xs},432:{},433:{},434:{},437:{},438:{f:SSe},439:{f:Xs},440:{f:_Se},441:{},442:{f:MN},443:{},444:{f:vi},445:{},446:{},448:{f:J0},449:{f:zke,r:2},450:{f:J0},512:{f:cV},513:{f:HSe},515:{f:ASe},516:{f:Zke},517:{f:dV},519:{f:VSe},520:{f:Qke},523:{},545:{f:mV},549:{f:lV},566:{},574:{f:Gke},638:{f:sSe},659:{},1048:{},1054:{f:tSe},1084:{},1212:{f:vSe},2048:{f:TSe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:LE},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:J0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:RSe,r:12},2173:{f:O4e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Xs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:xSe,r:12},2197:{},2198:{f:k4e,r:12},2199:{},2200:{},2201:{},2202:{f:bSe,r:12},2203:{f:J0},2204:{},2205:{},2206:{},2207:{},2211:{f:Hke},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:vi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:USe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:DSe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:cV},1:{},2:{f:WSe},3:{f:qSe},4:{f:GSe},5:{f:dV},7:{f:YSe},8:{},9:{f:LE},11:{},22:{f:vi},30:{f:aSe},31:{},32:{},33:{f:mV},36:{},37:{f:lV},50:{f:JSe},62:{},52:{},67:{},68:{f:vi},69:{},86:{},126:{},127:{f:$Se},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ZSe},223:{},234:{},354:{},421:{},518:{f:rT},521:{f:LE},536:{f:hV},547:{f:AV},561:{},579:{},1030:{f:rT},1033:{f:LE},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Wt(e,t,r,a){var n=t;if(!isNaN(n)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,n),o.write_shift(2,i),i>0&&v8(r)&&e.push(r)}}function Y6e(e,t,r,a){var n=(r||[]).length||0;if(n<=8224)return Wt(e,t,r,n);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<n;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function zN(e,t,r){return e||(e=Et(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function J6e(e,t,r,a){var n=Et(9);return zN(n,e,t),Oae(r,a||"b",n),n}function Z6e(e,t,r){var a=Et(8+2*r.length);return zN(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function eOe(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var n=t.t=="d"?Mi(qn(t.v)):t.v;n==(n|0)&&n>=0&&n<65536?Wt(e,2,XSe(r,a,n)):Wt(e,3,KSe(r,a,n));return;case"b":case"e":Wt(e,5,J6e(r,a,t.v,t.t));return;case"s":case"str":Wt(e,4,Z6e(r,a,(t.v||"").slice(0,255)));return}Wt(e,1,zN(null,r,a))}function tOe(e,t,r,a){var n=Array.isArray(t),i=Pa(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=Zr(i)}for(var u=i.s.r;u<=i.e.r;++u){l=ni(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=ds(d)),o=c[d]+l;var f=n?(t[u]||[])[d]:t[o];f&&eOe(e,f,u,d)}}}function rOe(e,t){for(var r=t||{},a=bc(),n=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(n=i);if(n==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Wt(a,r.biff==4?1033:r.biff==3?521:9,_8(e,16,r)),tOe(a,e.Sheets[e.SheetNames[n]],n,r),Wt(a,10),a.end()}function aOe(e,t,r){Wt(e,49,Xke({sz:12,name:"Arial"},r))}function nOe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&Wt(e,1054,rSe(n,t[n],r))})}function sOe(e,t){var r=Et(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Wt(e,2151,r),r=Et(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Lae(Pa(t["!ref"]||"A1"),r),r.write_shift(4,4),Wt(e,2152,r)}function iOe(e,t){for(var r=0;r<16;++r)Wt(e,224,uV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Wt(e,224,uV(a,0,t))})}function oOe(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Wt(e,440,BSe(a)),a[1].Tooltip&&Wt(e,2048,ISe(a))}delete t["!links"]}function lOe(e,t){if(t){var r=0;t.forEach(function(a,n){++r<=256&&a&&Wt(e,125,LSe(H_(n,a),n))})}}function cOe(e,t,r,a,n){var i=16+hp(n.cellXfs,t,n);if(t.v==null&&!t.bf){Wt(e,513,Vg(r,a,i));return}if(t.bf)Wt(e,6,DBe(t,r,a,n,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Mi(qn(t.v)):t.v;Wt(e,515,hSe(r,a,o,i));break;case"b":case"e":Wt(e,517,fSe(r,a,t.v,i,n,t.t));break;case"s":case"str":if(n.bookSST){var l=R8(n.Strings,t.v,n.revStrings);Wt(e,253,Jke(r,a,l,i))}else Wt(e,516,eSe(r,a,(t.v||"").slice(0,255),i,n));break;default:Wt(e,513,Vg(r,a,i))}}function uOe(e,t,r){var a=bc(),n=r.SheetNames[e],i=r.Sheets[n]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",h=[],m=Pa(i["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Wt(a,2057,_8(r,16,t)),Wt(a,13,Xu(1)),Wt(a,12,Xu(100)),Wt(a,15,Bl(!0)),Wt(a,17,Bl(!1)),Wt(a,16,Hg(.001)),Wt(a,95,Bl(!0)),Wt(a,42,Bl(!1)),Wt(a,43,Bl(!1)),Wt(a,130,Xu(1)),Wt(a,128,dSe()),Wt(a,131,Bl(!1)),Wt(a,132,Bl(!1)),u&&lOe(a,i["!cols"]),Wt(a,512,nSe(m,t)),u&&(i["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=ni(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=ds(v)),d=h[v]+f;var y=c?(i[x]||[])[v]:i[d];y&&(cOe(a,y,x,v,t),u&&y.l&&i["!links"].push([d,y.l]))}}var N=l.CodeName||l.name||n;return u&&Wt(a,574,qke((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&Wt(a,229,CSe(i["!merges"])),u&&oOe(a,i),Wt(a,442,Fae(N)),u&&sOe(a,i),Wt(a,10),a.end()}function dOe(e,t,r){var a=bc(),n=(e||{}).Workbook||{},i=n.Sheets||[],o=n.WBProps||{},l=r.biff==8,c=r.biff==5;if(Wt(a,2057,_8(e,5,r)),r.bookType=="xla"&&Wt(a,135),Wt(a,225,l?Xu(1200):null),Wt(a,193,fke(2)),c&&Wt(a,191),c&&Wt(a,192),Wt(a,226),Wt(a,92,Fke("SheetJS",r)),Wt(a,66,Xu(l?1200:1252)),l&&Wt(a,353,Xu(0)),l&&Wt(a,448),Wt(a,317,QSe(e.SheetNames.length)),l&&e.vbaraw&&Wt(a,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Wt(a,442,Fae(u))}Wt(a,156,Xu(17)),Wt(a,25,Bl(!1)),Wt(a,18,Bl(!1)),Wt(a,19,Xu(0)),l&&Wt(a,431,Bl(!1)),l&&Wt(a,444,Xu(0)),Wt(a,61,$ke()),Wt(a,64,Bl(!1)),Wt(a,141,Xu(0)),Wt(a,34,Bl(zIe(e)=="true")),Wt(a,14,Bl(!0)),l&&Wt(a,439,Bl(!1)),Wt(a,218,Xu(0)),aOe(a,e,r),nOe(a,e.SSF,r),iOe(a,r),l&&Wt(a,352,Bl(!1));var d=a.end(),f=bc();l&&Wt(f,140,FSe()),l&&r.Strings&&Y6e(f,252,Mke(r.Strings)),Wt(f,10);var h=f.end(),m=bc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=i[x]||{};Wt(m,133,Rke({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var N=m.end();if(g!=N.length)throw new Error("BS8 "+g+" != "+N.length);var C=[];return d.length&&C.push(d),N.length&&C.push(N),h.length&&C.push(h),io(C)}function fOe(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Kn(Dr)),e&&e.SSF&&(k1(),D_(e.SSF),r.revssf=R_(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,H8(r),r.cellXfs=[],hp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)a[a.length]=uOe(n,r,e);return a.unshift(dOe(e,a,r)),io(a)}function kne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var n=wc(a["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return fOe(e,t);case 4:case 3:case 2:return rOe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function EV(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=n.index,l=i&&i.index||e.length,c=Xje(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var N=y[l].trim();if(N.match(/<t[dh]/i)){for(var C=N,T=0;C.charAt(0)=="<"&&(T=C.indexOf(">"))>-1;)C=C.slice(T+1);for(var _=0;_<g.length;++_){var O=g[_];O.s.c==d&&O.s.r<u&&u<=O.e.r&&(d=O.e.c+1,_=-1)}var j=Vr(N.slice(0,N.indexOf(">")));h=j.colspan?+j.colspan:1,((f=+j.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var S=j.t||j["data-t"]||"";if(!C.length){d+=h;continue}if(C=Yre(C),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!C.length){d+=h;continue}var B={t:"s",v:C};r.raw||!C.trim().length||S=="s"||(C==="TRUE"?B={t:"b",v:!0}:C==="FALSE"?B={t:"b",v:!1}:isNaN(ef(C))?isNaN(Rb(C).getDate())||(B={t:"d",v:qn(C)},r.cellDates||(B={t:"n",v:Mi(B.v)}),B.z=r.dateNF||Dr[14]):B={t:"n",v:ef(C)}),r.dense?(a[u]||(a[u]=[]),a[u][d]=B):a[Ur({r:u,c:d})]=B,d+=h}}}}return a["!ref"]=Zr(m),g.length&&(a["!merges"]=g),a}function AOe(e,t,r,a){for(var n=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<n.length;++u)if(!(n[u].s.r>r||n[u].s.c>o)&&!(n[u].e.r<r||n[u].e.c<o)){if(n[u].s.r<r||n[u].s.c<o){l=-1;break}l=n[u].e.r-n[u].s.r+1,c=n[u].e.c-n[u].s.c+1;break}if(!(l<0)){var d=Ur({r,c:o}),f=a.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||p8(f.w||(qh(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),a.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(a.id||"sjs")+"-"+d,i.push(qt("td",h,m))}}var g="<tr>";return g+i.join("")+"</tr>"}var hOe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',mOe="</body></html>";function pOe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ap(EV(r[0],t),t);var a=$8();return r.forEach(function(n,i){G8(a,EV(n,t),"Sheet"+(i+1))}),a}function gOe(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Sne(e,t){var r=t||{},a=r.header!=null?r.header:hOe,n=r.footer!=null?r.footer:mOe,i=[a],o=wc(e["!ref"]);r.dense=Array.isArray(e),i.push(gOe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(AOe(e,o,l,r));return i.push("</table>"+n),i.join("")}function _ne(e,t,r){var a=r||{},n=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var o=typeof a.origin=="string"?fs(a.origin):a.origin;n=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:n,c:i}};if(e["!ref"]){var d=wc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),n==-1&&(u.e.r=n=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,N=0,C=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var T=l[g];if(jV(T)){if(a.display)continue;m[x]={hidden:!0}}var _=T.children;for(v=y=0;v<_.length;++v){var O=_[v];if(!(a.display&&jV(O))){var j=O.hasAttribute("data-v")?O.getAttribute("data-v"):O.hasAttribute("v")?O.getAttribute("v"):Yre(O.innerHTML),S=O.getAttribute("data-z")||O.getAttribute("z");for(h=0;h<f.length;++h){var B=f[h];B.s.c==y+i&&B.s.r<x+n&&x+n<=B.e.r&&(y=B.e.c+1-i,h=-1)}C=+O.getAttribute("colspan")||1,((N=+O.getAttribute("rowspan")||1)>1||C>1)&&f.push({s:{r:x+n,c:y+i},e:{r:x+n+(N||1)-1,c:y+i+(C||1)-1}});var L={t:"s",v:j},D=O.getAttribute("data-t")||O.getAttribute("t")||"";j!=null&&(j.length==0?L.t=D||"z":a.raw||j.trim().length==0||D=="s"||(j==="TRUE"?L={t:"b",v:!0}:j==="FALSE"?L={t:"b",v:!1}:isNaN(ef(j))?isNaN(Rb(j).getDate())||(L={t:"d",v:qn(j)},a.cellDates||(L={t:"n",v:Mi(L.v)}),L.z=a.dateNF||Dr[14]):L={t:"n",v:ef(j)})),L.z===void 0&&S!=null&&(L.z=S);var k="",R=O.getElementsByTagName("A");if(R&&R.length)for(var U=0;U<R.length&&!(R[U].hasAttribute("href")&&(k=R[U].getAttribute("href"),k.charAt(0)!="#"));++U);k&&k.charAt(0)!="#"&&(L.l={Target:k}),a.dense?(e[x+n]||(e[x+n]=[]),e[x+n][y+i]=L):e[Ur({c:y+i,r:x+n})]=L,u.e.c<y+i&&(u.e.c=y+i),y+=C}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+n),e["!ref"]=Zr(u),x>=c&&(e["!fullref"]=Zr((u.e.r=l.length-g+x-1+n,u))),e}function Bne(e,t){var r=t||{},a=r.dense?[]:{};return _ne(a,e,t)}function xOe(e,t){return Ap(Bne(e,t),t)}function jV(e){var t="",r=vOe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function vOe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function bOe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Fa(t.replace(/<[^>]*>/g,""));return[r]}var kV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Tne(e,t){var r=t||{},a=g8(e),n=[],i,o,l={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},N="",C=0,T=[],_=-1,O=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,B={},L=[],D={},k=0,R=0,U=[],H=1,Q=1,V=[],G={Names:[]},J={},W=["",""],Z=[],M={},F="",X=0,Y=!1,ae=!1,le=0;for(Mw.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=Mw.exec(a);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?g["!ref"]=Zr(j):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(g["!fullref"]=g["!ref"],j.e.r=r.sheetRows-1,g["!ref"]=Zr(j)),L.length&&(g["!merges"]=L),U.length&&(g["!rows"]=U),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,ae=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Vr(x[0],!1),_=O=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,g=r.dense?[]:{},L=[],U=[],ae=!0);break;case"table-row-group":x[1]==="/"?--S:++S;break;case"table-row":case"行":if(x[1]==="/"){_+=H,H=1;break}if(f=Vr(x[0],!1),f.行号?_=f.行号-1:_==-1&&(_=0),H=+f["number-rows-repeated"]||1,H<10)for(le=0;le<H;++le)S>0&&(U[_+le]={level:S});O=-1;break;case"covered-table-cell":x[1]!=="/"&&++O,r.sheetStubs&&(r.dense?(g[_]||(g[_]=[]),g[_][O]={t:"z"}):g[Ur({r:_,c:O})]={t:"z"}),N="",T=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++O,y=Vr(x[0],!1),Q=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=wV(Fa(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Fa(y["string-value"]||""),r.dense?(g[_]||(g[_]=[]),g[_][O]=v):g[Ur({r:_,c:O})]=v),O+=Q-1;else if(x[1]!=="/"){++O,N="",C=0,T=[],Q=1;var ie=H?_+H-1:_;if(O>j.e.c&&(j.e.c=O),O<j.s.c&&(j.s.c=O),_<j.s.r&&(j.s.r=_),ie>j.e.r&&(j.e.r=ie),y=Vr(x[0],!1),Z=[],M={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Fa(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(k=parseInt(y["number-matrix-rows-spanned"],10)||0,R=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:_,c:O},e:{r:_+k-1,c:O+R-1}},v.F=Zr(D),V.push([D,v.F])),y.formula)v.f=wV(y.formula);else for(le=0;le<V.length;++le)_>=V[le][0].s.r&&_<=V[le][0].e.r&&O>=V[le][0].s.c&&O<=V[le][0].e.c&&(v.F=V[le][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(k=parseInt(y["number-rows-spanned"],10)||0,R=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:_,c:O},e:{r:_+k-1,c:O+R-1}},L.push(D)),y["number-columns-repeated"]&&(Q=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=$n(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=qn(y["date-value"]),r.cellDates||(v.t="n",v.v=Mi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=qje(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=L_(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(N=Fa(y["string-value"]),T=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Y=!1,v.t==="s"&&(v.v=N||"",T.length&&(v.R=T),Y=C==0),J.Target&&(v.l=J),Z.length>0&&(v.c=Z,Z=[]),N&&r.cellText!==!1&&(v.w=N),Y&&(v.t="z",delete v.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=_))for(var ne=0;ne<H;++ne){if(Q=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[_+ne]||(g[_+ne]=[]),g[_+ne][O]=ne==0?v:Kn(v);--Q>0;)g[_+ne][O+Q]=Kn(v);else for(g[Ur({r:_+ne,c:O})]=v;--Q>0;)g[Ur({r:_+ne,c:O+Q})]=Kn(v);j.e.c<=O&&(j.e.c=O)}Q=parseInt(y["number-columns-repeated"]||"1",10),O+=Q-1,Q=0,v={},N="",T=[]}J={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i;M.t=N,T.length&&(M.R=T),M.a=F,Z.push(M)}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);F="",X=0,N="",C=0,T=[];break;case"creator":x[1]==="/"?F=a.slice(X,x.index):X=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);N="",C=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[l.name]=c,(i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Vr(x[0],!1),n.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":o=Vr(x[0],!1),c+=kV[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":o=Vr(x[0],!1),c+=kV[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=Vr(x[0],!1),W=aT(o["cell-range-address"]);var oe={Name:o.name,Ref:W[0]+"!"+W[1]};ae&&(oe.Sheet=m.length),G.Names.push(oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var we=bOe(a.slice(C,x.index));N=(N.length>0?N+`
`:"")+we[0]}else Vr(x[0],!1),C=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{W=aT(Vr(x[0])["target-range-address"]),h[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(J=Vr(x[0],!1),!J.href)break;J.Target=Fa(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(W=aT(J.Target.slice(1)),J.Target="#"+W[0]+"!"+W[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var K={Sheets:h,SheetNames:m,Workbook:G};return r.bookSheets&&delete K.Sheets,K}function SV(e,t){t=t||{},Ku(e,"META-INF/manifest.xml")&&q5e(xi(e,"META-INF/manifest.xml"),t);var r=au(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=Tne(kn(r),t);return Ku(e,"meta.xml")&&(a.Props=yae(xi(e,"meta.xml"))),a}function _V(e,t){return Tne(e,t)}var yOe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Lw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return oi+t}}(),BV=function(){var e=function(i){return vn(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+vn(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=wc(i["!ref"]||"A1"),h=i["!merges"]||[],m=0,g=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=i["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,N={},C="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),N["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,N["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var T=Ur({r:u,c:d}),_=g?(i[u]||[])[d]:i[T];if(_&&_.f&&(N["table:formula"]=vn(QBe(_.f)),_.F&&_.F.slice(0,T.length)==T)){var O=wc(_.F);N["table:number-matrix-columns-spanned"]=O.e.c-O.s.c+1,N["table:number-matrix-rows-spanned"]=O.e.r-O.s.r+1}if(!_){c.push(t);continue}switch(_.t){case"b":C=_.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=_.v?"true":"false";break;case"n":C=_.w||String(_.v||0),N["office:value-type"]="float",N["office:value"]=_.v||0;break;case"s":case"str":C=_.v==null?"":_.v,N["office:value-type"]="string";break;case"d":C=_.w||qn(_.v).toISOString(),N["office:value-type"]="date",N["office:date-value"]=qn(_.v).toISOString(),N["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(C);if(_.l&&_.l.Target){var S=_.l.Target;S=S.charAt(0)=="#"?"#"+HBe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),j=qt("text:a",j,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+qt("table:table-cell",qt("text:p",j,{}),N)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Zm(f),f.ods=l;var h=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[oi],u=Lw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Lw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(bae().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),n(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Ine(e,t){if(t.bookType=="fods")return BV(e,t);var r=A8(),a="",n=[],i=[];return a="mimetype",na(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",na(r,a,BV(e,t)),n.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",na(r,a,yOe(e,t)),n.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",na(r,a,oi+bae()),n.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",na(r,a,X5e(i)),n.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",na(r,a,K5e(n)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function $g(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function vF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):kn(fp(e))}function wOe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):ru(cA(e))}function NOe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function tp(e){var t=e.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(n){r.set(n,a),a+=n.length}),r}function TV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function COe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,n=t+13;n>=t;--n)a=a*256+e[n];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function EOe(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,n=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;n>=1;++i,n/=256)e[t+i]=n&255;e[t+15]|=r>=0?0:128}function Gw(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function pn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ps(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Va(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],n=Gw(e,r),i=n&7;n=Math.floor(n/8);var o=0,l;if(n==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Gw(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(a))}var u={data:l,type:i};t[n]==null?t[n]=[u]:t[n].push(u)}return t}function wo(e){var t=[];return e.forEach(function(r,a){r.forEach(function(n){n.data&&(t.push(pn(a*8+n.type)),n.type==2&&t.push(pn(n.data.length)),t.push(n.data))})}),tp(t)}function U8(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function $u(e){for(var t,r=[],a=[0];a[0]<e.length;){var n=Gw(e,a),i=Va(e.slice(a[0],a[0]+n));a[0]+=n;var o={id:Ps(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Va(l.data),u=Ps(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=Ps(i[3][0].data)>>>0>0),r.push(o)}return r}function Yx(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:pn(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:pn(+!!r.merge),type:0}]);var n=[];r.messages.forEach(function(o){n.push(o.data),o.meta[3]=[{type:0,data:pn(o.data.length)}],a[2].push({data:wo(o.meta),type:2})});var i=wo(a);t.push(pn(i.length)),t.push(i),n.forEach(function(o){return t.push(o)})}),tp(t)}function jOe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Gw(t,r),n=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}n.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[tp(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(n.push(n[0].slice(-c)),u-=c;u>=n[n.length-1].length;)n.push(n[n.length-1]),u-=n[n.length-1].length;n.push(n[0].slice(-c,-c+u))}}var d=tp(n);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function Gu(e){for(var t=[],r=0;r<e.length;){var a=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(jOe(a,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return tp(t)}function Jx(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),n=new Uint8Array(4);t.push(n);var i=pn(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,n[0]=0,n[1]=o&255,n[2]=o>>8&255,n[3]=o>>16&255,r+=a}return tp(t)}function kOe(e,t,r,a){var n=$g(e),i=n.getUint32(4,!0),o=(a>1?12:8)+TV(i&(a>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);i&512&&(l=n.getUint32(o,!0),o+=4),o+=TV(i&(a>1?12288:4096))*4,i&16&&(c=n.getUint32(o,!0),o+=4),i&32&&(u=n.getFloat64(o,!0),o+=8),i&64&&(d.setTime(d.getTime()+n.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function SOe(e,t,r){var a=$g(e),n=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);n&1&&(c=COe(e,i),i+=16),n&2&&(u=a.getFloat64(i,!0),i+=8),n&4&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8),n&8&&(l=a.getUint32(i,!0),i+=4),n&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return f}function sT(e,t){var r=new Uint8Array(32),a=$g(r),n=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,EOe(r,n,e.v),i|=1,n+=16;break;case"b":r[1]=6,a.setFloat64(n,e.v?1:0,!0),i|=2,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(n,t.indexOf(e.v),!0),i|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,n)}function iT(e,t){var r=new Uint8Array(32),a=$g(r),n=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(n,e.v,!0),i|=32,n+=8;break;case"b":r[2]=6,a.setFloat64(n,e.v?1:0,!0),i|=32,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(n,t.indexOf(e.v),!0),i|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,n)}function _Oe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return kOe(e,t,r,e[0]);case 5:return SOe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function rl(e){var t=Va(e);return Gw(t[1][0].data)}function IV(e,t){var r=Va(t.data),a=Ps(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(o){var l=Va(o.data),c=Ps(l[1][0].data)>>>0;switch(a){case 1:i[c]=vF(l[3][0].data);break;case 8:{var u=e[rl(l[9][0].data)][0],d=Va(u.data),f=e[rl(d[1][0].data)][0],h=Ps(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Va(f.data);i[c]=m[3].map(function(g){return vF(g.data)}).join("")}break}}),i}function BOe(e,t){var r,a,n,i,o,l,c,u,d,f,h,m,g,x,v=Va(e),y=Ps(v[1][0].data)>>>0,N=Ps(v[2][0].data)>>>0,C=((a=(r=v[8])==null?void 0:r[0])==null?void 0:a.data)&&Ps(v[8][0].data)>0||!1,T,_;if((i=(n=v[7])==null?void 0:n[0])!=null&&i.data&&t!=0)T=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,_=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,_=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var O=C?4:1,j=$g(T),S=[],B=0;B<T.length/2;++B){var L=j.getUint16(B*2,!0);L<65535&&S.push([B,L])}if(S.length!=N)throw"Expected ".concat(N," cells, found ").concat(S.length);var D=[];for(B=0;B<S.length-1;++B)D[S[B][0]]=_.subarray(S[B][1]*O,S[B+1][1]*O);return S.length>=1&&(D[S[S.length-1][0]]=_.subarray(S[S.length-1][1]*O)),{R:y,cells:D}}function TOe(e,t){var r,a=Va(t.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?Ps(a[7][0].data)>>>0>0?1:0:-1,i=U8(a[5],function(o){return BOe(o,n)});return{nrows:Ps(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function IOe(e,t,r){var a,n=Va(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ps(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(Ps(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=Zr(i);var o=Va(n[4][0].data),l=IV(e,e[rl(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?IV(e,e[rl(o[17][0].data)][0]):[],u=Va(o[3][0].data),d=0;u[1].forEach(function(f){var h=Va(f.data),m=e[rl(h[2][0].data)][0],g=Ps(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=TOe(e,m);x.data.forEach(function(v,y){v.forEach(function(N,C){var T=Ur({r:d+y,c:C}),_=_Oe(N,l,c);_&&(r[T]=_)})}),d+=x.nrows})}function OOe(e,t){var r=Va(t.data),a={"!ref":"A1"},n=e[rl(r[2][0].data)],i=Ps(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return IOe(e,n[0],a),a}function FOe(e,t){var r,a=Va(t.data),n={name:(r=a[1])!=null&&r[0]?vF(a[1][0].data):"",sheets:[]},i=U8(a[2],rl);return i.forEach(function(o){e[o].forEach(function(l){var c=Ps(l.meta[1][0].data);c==6e3&&n.sheets.push(OOe(e,l))})}),n}function DOe(e,t){var r=$8(),a=Va(t.data),n=U8(a[1],rl);if(n.forEach(function(i){e[i].forEach(function(o){var l=Ps(o.meta[1][0].data);if(l==2){var c=FOe(e,o);c.sheets.forEach(function(u,d){G8(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function oT(e){var t,r,a,n,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Gu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=$u(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((n=(a=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&Ps(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(u){var d=Ps(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return DOe(i,l)}function POe(e,t,r){var a,n,i,o;if(!((a=e[6])!=null&&a[0])||!((n=e[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Ps(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=$g(e[7][0].data),d=0,f=[],h=$g(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=sT({t:"s",v:t[x]},r),y=iT({t:"s",v:t[x]},r);break;case"number":v=sT({t:"n",v:t[x]},r),y=iT({t:"n",v:t[x]},r);break;case"boolean":v=sT({t:"b",v:t[x]},r),y=iT({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=pn(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=tp(f),e[3][0].data=tp(g),c}function ROe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=wc(r["!ref"]);a.s.r=a.s.c=0;var n=!1;a.e.c>9&&(n=!0,a.e.c=9),a.e.r>49&&(n=!0,a.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(Zr(a)));var i=Nk(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(F){return F.forEach(function(X){typeof X=="string"&&o.push(X)})});var l={},c=[],u=Er.read(t.numbers,{type:"base64"});u.FileIndex.map(function(F,X){return[F,u.FullPaths[X]]}).forEach(function(F){var X=F[0],Y=F[1];if(X.type==2&&X.name.match(/\.iwa/)){var ae=X.content,le=Gu(ae),ie=$u(le);ie.forEach(function(ne){c.push(ne.id),l[ne.id]={deps:[],location:Y,type:Ps(ne.messages[0].meta[1][0].data)}})}}),c.sort(function(F,X){return F-X});var d=c.filter(function(F){return F>1}).map(function(F){return[F,pn(F)]});u.FileIndex.map(function(F,X){return[F,u.FullPaths[X]]}).forEach(function(F){var X=F[0];if(F[1],!!X.name.match(/\.iwa/)){var Y=$u(Gu(X.content));Y.forEach(function(ae){ae.messages.forEach(function(le){d.forEach(function(ie){ae.messages.some(function(ne){return Ps(ne.meta[1][0].data)!=11006&&NOe(ne.data,ie[1])})&&l[ie[0]].deps.push(ae.id)})})})}});for(var f=Er.find(u,l[1].location),h=$u(Gu(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=rl(Va(m.messages[0].data)[1][0].data);for(f=Er.find(u,l[v].location),h=$u(Gu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=rl(Va(m.messages[0].data)[2][0].data),f=Er.find(u,l[v].location),h=$u(Gu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=rl(Va(m.messages[0].data)[2][0].data),f=Er.find(u,l[v].location),h=$u(Gu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=Va(m.messages[0].data);{y[6][0].data=pn(a.e.r+1),y[7][0].data=pn(a.e.c+1);var N=rl(y[46][0].data),C=Er.find(u,l[N].location),T=$u(Gu(C.content));{for(var _=0;_<T.length&&T[_].id!=N;++_);if(T[_].id!=N)throw"Bad ColumnRowUIDMapArchive";var O=Va(T[_].messages[0].data);O[1]=[],O[2]=[],O[3]=[];for(var j=0;j<=a.e.c;++j){var S=[];S[1]=S[2]=[{type:0,data:pn(j+420690)}],O[1].push({type:2,data:wo(S)}),O[2].push({type:0,data:pn(j)}),O[3].push({type:0,data:pn(j)})}O[4]=[],O[5]=[],O[6]=[];for(var B=0;B<=a.e.r;++B)S=[],S[1]=S[2]=[{type:0,data:pn(B+726270)}],O[4].push({type:2,data:wo(S)}),O[5].push({type:0,data:pn(B)}),O[6].push({type:0,data:pn(B)});T[_].messages[0].data=wo(O)}C.content=Jx(Yx(T)),C.size=C.content.length,delete y[46];var L=Va(y[4][0].data);{L[7][0].data=pn(a.e.r+1);var D=Va(L[1][0].data),k=rl(D[2][0].data);C=Er.find(u,l[k].location),T=$u(Gu(C.content));{if(T[0].id!=k)throw"Bad HeaderStorageBucket";var R=Va(T[0].messages[0].data);for(B=0;B<i.length;++B){var U=Va(R[2][0].data);U[1][0].data=pn(B),U[4][0].data=pn(i[B].length),R[2][B]={type:R[2][0].type,data:wo(U)}}T[0].messages[0].data=wo(R)}C.content=Jx(Yx(T)),C.size=C.content.length;var H=rl(L[2][0].data);C=Er.find(u,l[H].location),T=$u(Gu(C.content));{if(T[0].id!=H)throw"Bad HeaderStorageBucket";for(R=Va(T[0].messages[0].data),j=0;j<=a.e.c;++j)U=Va(R[2][0].data),U[1][0].data=pn(j),U[4][0].data=pn(a.e.r+1),R[2][j]={type:R[2][0].type,data:wo(U)};T[0].messages[0].data=wo(R)}C.content=Jx(Yx(T)),C.size=C.content.length;var Q=rl(L[4][0].data);(function(){for(var F=Er.find(u,l[Q].location),X=$u(Gu(F.content)),Y,ae=0;ae<X.length;++ae){var le=X[ae];le.id==Q&&(Y=le)}var ie=Va(Y.messages[0].data);{ie[3]=[];var ne=[];o.forEach(function(K,Ee){ne[1]=[{type:0,data:pn(Ee)}],ne[2]=[{type:0,data:pn(1)}],ne[3]=[{type:2,data:wOe(K)}],ie[3].push({type:2,data:wo(ne)})})}Y.messages[0].data=wo(ie);var oe=Yx(X),we=Jx(oe);F.content=we,F.size=F.content.length})();var V=Va(L[3][0].data);{var G=V[1][0];delete V[2];var J=Va(G.data);{var W=rl(J[2][0].data);(function(){for(var F=Er.find(u,l[W].location),X=$u(Gu(F.content)),Y,ae=0;ae<X.length;++ae){var le=X[ae];le.id==W&&(Y=le)}var ie=Va(Y.messages[0].data);{delete ie[6],delete V[7];var ne=new Uint8Array(ie[5][0].data);ie[5]=[];for(var oe=0,we=0;we<=a.e.r;++we){var K=Va(ne);oe+=POe(K,i[we],o),K[1][0].data=pn(we),ie[5].push({data:wo(K),type:2})}ie[1]=[{type:0,data:pn(a.e.c+1)}],ie[2]=[{type:0,data:pn(a.e.r+1)}],ie[3]=[{type:0,data:pn(oe)}],ie[4]=[{type:0,data:pn(a.e.r+1)}]}Y.messages[0].data=wo(ie);var Ee=Yx(X),_e=Jx(Ee);F.content=_e,F.size=F.content.length})()}G.data=wo(J)}L[3][0].data=wo(V)}y[4][0].data=wo(L)}m.messages[0].data=wo(y);var Z=Yx(h),M=Jx(Z);return f.content=M,f.size=f.content.length,u}function One(e){return function(r){for(var a=0;a!=e.length;++a){var n=e[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function Q8(e){One([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function H8(e){One([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function LOe(e){return ga.WS.indexOf(e)>-1?"sheet":e==ga.CS?"chart":e==ga.DS?"dialog":e==ga.MS?"macro":e&&e.length?e:"sheet"}function MOe(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,LOe(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function UOe(e,t,r,a,n,i,o,l,c,u,d,f){try{i[a]=Z2(au(e,r,!0),t);var h=xi(e,t),m;switch(l){case"sheet":m=l6e(h,t,n,c,i[a],u,d,f);break;case"chart":if(m=c6e(h,t,n,c,i[a],u,d,f),!m||!m["!drawel"])break;var g=E2(m["!drawel"].Target,t),x=Uw(g),v=W4e(au(e,g,!0),Z2(au(e,x,!0),g)),y=E2(v,g),N=Uw(y);m=PIe(au(e,y,!0),y,c,Z2(au(e,N,!0),y),u,m);break;case"macro":m=u6e(h,t,n,c,i[a],u,d,f);break;case"dialog":m=d6e(h,t,n,c,i[a],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=m;var C=[];i&&i[a]&&Ls(i[a]).forEach(function(T){var _="";if(i[a][T].Type==ga.CMNT){_=E2(i[a][T].Target,t);var O=m6e(xi(e,_,!0),_,c);if(!O||!O.length)return;gV(m,O,!1)}i[a][T].Type==ga.TCMNT&&(_=E2(i[a][T].Target,t),C=C.concat(Y4e(xi(e,_,!0),c)))}),C&&C.length&&gV(m,C,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function Mu(e){return e.charAt(0)=="/"?e.slice(1):e}function QOe(e,t){if(k1(),t=t||{},Q8(t),Ku(e,"META-INF/manifest.xml")||Ku(e,"objectdata.xml"))return SV(e,t);if(Ku(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof oT<"u"){if(e.FileIndex)return oT(e);var r=Er.utils.cfb_new();return Lz(e).forEach(function(U){na(r,U,Jje(e,U))}),oT(r)}throw new Error("Unsupported NUMBERS file")}if(!Ku(e,"[Content_Types].xml"))throw Ku(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ku(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=Lz(e),n=$5e(au(e,"[Content_Types].xml")),i=!1,o,l;if(n.workbooks.length===0&&(l="xl/workbook.xml",xi(e,l,!0)&&n.workbooks.push(l)),n.workbooks.length===0){if(l="xl/workbook.bin",!xi(e,l,!0))throw new Error("Could not find workbook");n.workbooks.push(l),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(ew=[],n.sst)try{ew=h6e(xi(e,Mu(n.sst)),n.sst,t)}catch(U){if(t.WTF)throw U}t.cellStyles&&n.themes.length&&(c=A6e(au(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],t)),n.style&&(u=f6e(xi(e,Mu(n.style)),n.style,c,t))}n.links.map(function(U){try{var H=Z2(au(e,Uw(Mu(U))),U);return g6e(xi(e,Mu(U)),H,U,t)}catch{}});var d=o6e(xi(e,Mu(n.workbooks[0])),n.workbooks[0],t),f={},h="";n.coreprops.length&&(h=xi(e,Mu(n.coreprops[0]),!0),h&&(f=yae(h)),n.extprops.length!==0&&(h=xi(e,Mu(n.extprops[0]),!0),h&&J5e(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&n.custprops.length!==0&&(h=au(e,Mu(n.custprops[0]),!0),h&&(m=eke(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(H){return H.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&n.calcchain&&(x=p6e(xi(e,Mu(n.calcchain)),n.calcchain));var v=0,y={},N,C;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var _=0;_!=T.length;++_)f.SheetNames[_]=T[_].name}var O=i?"bin":"xml",j=n.workbooks[0].lastIndexOf("/"),S=(n.workbooks[0].slice(0,j+1)+"_rels/"+n.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");Ku(e,S)||(S="xl/_rels/workbook."+O+".rels");var B=Z2(au(e,S,!0),S.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(t.xlmeta=x6e(xi(e,Mu(n.metadata[0])),n.metadata[0],t)),(n.people||[]).length>=1&&(t.people=Z4e(xi(e,Mu(n.people[0])),t)),B&&(B=MOe(B,d.Sheets));var L=xi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var D="sheet";if(B&&B[v]?(N="xl/"+B[v][1].replace(/[\/]?xl\//,""),Ku(e,N)||(N=B[v][1]),Ku(e,N)||(N=S.replace(/_rels\/.*$/,"")+B[v][1]),D=B[v][2]):(N="xl/worksheets/sheet"+(v+1-L)+"."+O,N=N.replace(/sheet0\./,"sheet.")),C=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,R=0;R!=t.sheets.length;++R)typeof t.sheets[R]=="number"&&t.sheets[R]==v&&(k=1),typeof t.sheets[R]=="string"&&t.sheets[R].toLowerCase()==f.SheetNames[v].toLowerCase()&&(k=1);if(!k)continue e}}UOe(e,N,C,f.SheetNames[v],v,y,o,D,t,d,c,u)}return g={Directory:n,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:ew,Styles:u,Themes:c,SSF:Kn(Dr)},t&&t.bookFiles&&(e.files?(g.keys=a,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(U,H){U=U.replace(/^Root Entry[\/]/,""),g.keys.push(U),g.files[U]=e.FileIndex[H]}))),t&&t.bookVBA&&(n.vba.length>0?g.vbaraw=xi(e,Mu(n.vba[0]),!0):n.defaults&&n.defaults.bin===o3e&&(g.vbaraw=xi(e,"xl/vbaProject.bin",!0))),g}function HOe(e,t){var r=t||{},a="Workbook",n=Er.find(e,a);try{if(a="/!DataSpaces/Version",n=Er.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(x_e(n.content),a="/!DataSpaces/DataSpaceMap",n=Er.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=b_e(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=Er.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=y_e(n.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=Er.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);N_e(n.content)}catch{}if(a="/EncryptionInfo",n=Er.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=C_e(n.content);if(a="/EncryptedPackage",n=Er.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],n.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function zOe(e,t){return t.bookType=="ods"?Ine(e,t):t.bookType=="numbers"?ROe(e,t):t.bookType=="xlsb"?VOe(e,t):$Oe(e,t)}function VOe(e,t){Pv=1024,e&&!e.SSF&&(e.SSF=Kn(Dr)),e&&e.SSF&&(k1(),D_(e.SSF),t.revssf=R_(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,tw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=ine.indexOf(t.bookType)>-1,n=k8();H8(t=t||{});var i=A8(),o="",l=0;if(t.cellXfs=[],hp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",na(i,o,wae(e.Props,t)),n.coreprops.push(o),gn(t.rels,2,o,ga.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,na(i,o,Eae(e.Props)),n.extprops.push(o),gn(t.rels,3,o,ga.EXT_PROPS),e.Custprops!==e.Props&&Ls(e.Custprops||{}).length>0&&(o="docProps/custom.xml",na(i,o,jae(e.Custprops)),n.custprops.push(o),gn(t.rels,4,o,ga.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,na(i,o,b6e(l-1,o,t,e,d)),n.sheets.push(o),gn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ga.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,na(i,x,N6e(m,x)),n.comments.push(x),gn(d,-1,"../comments"+l+"."+r,ga.CMNT),g=!0),f["!legacy"]&&g&&na(i,"xl/drawings/vmlDrawing"+l+".vml",nne(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&na(i,Uw(o),sb(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,na(i,o,w6e(t.Strings,o,t)),n.strs.push(o),gn(t.wbrels,-1,"sharedStrings."+r,ga.SST)),o="xl/workbook."+r,na(i,o,v6e(e,o)),n.workbooks.push(o),gn(t.rels,1,o,ga.WB),o="xl/theme/theme1.xml",na(i,o,O8(e.Themes,t)),n.themes.push(o),gn(t.wbrels,-1,"theme/theme1.xml",ga.THEME),o="xl/styles."+r,na(i,o,y6e(e,o,t)),n.styles.push(o),gn(t.wbrels,-1,"styles."+r,ga.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",na(i,o,e.vbaraw),n.vba.push(o),gn(t.wbrels,-1,"vbaProject.bin",ga.VBA)),o="xl/metadata."+r,na(i,o,C6e(o)),n.metadata.push(o),gn(t.wbrels,-1,"metadata."+r,ga.XLMETA),na(i,"[Content_Types].xml",vae(n,t)),na(i,"_rels/.rels",sb(t.rels)),na(i,"xl/_rels/workbook."+r+".rels",sb(t.wbrels)),delete t.revssf,delete t.ssf,i}function $Oe(e,t){Pv=1024,e&&!e.SSF&&(e.SSF=Kn(Dr)),e&&e.SSF&&(k1(),D_(e.SSF),t.revssf=R_(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,tw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=ine.indexOf(t.bookType)>-1,n=k8();H8(t=t||{});var i=A8(),o="",l=0;if(t.cellXfs=[],hp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",na(i,o,wae(e.Props,t)),n.coreprops.push(o),gn(t.rels,2,o,ga.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,na(i,o,Eae(e.Props)),n.extprops.push(o),gn(t.rels,3,o,ga.EXT_PROPS),e.Custprops!==e.Props&&Ls(e.Custprops||{}).length>0&&(o="docProps/custom.xml",na(i,o,jae(e.Custprops)),n.custprops.push(o),gn(t.rels,4,o,ga.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,na(i,o,gne(l-1,t,e,f)),n.sheets.push(o),gn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ga.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(N){N[1].forEach(function(C){C.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,na(i,v,J4e(g,d,t)),n.threadedcomments.push(v),gn(f,-1,"../threadedComments/threadedComment"+l+"."+r,ga.TCMNT)),v="xl/comments"+l+"."+r,na(i,v,sne(g)),n.comments.push(v),gn(f,-1,"../comments"+l+"."+r,ga.CMNT),x=!0}h["!legacy"]&&x&&na(i,"xl/drawings/vmlDrawing"+l+".vml",nne(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&na(i,Uw(o),sb(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,na(i,o,Gae(t.Strings,t)),n.strs.push(o),gn(t.wbrels,-1,"sharedStrings."+r,ga.SST)),o="xl/workbook."+r,na(i,o,wne(e)),n.workbooks.push(o),gn(t.rels,1,o,ga.WB),o="xl/theme/theme1.xml",na(i,o,O8(e.Themes,t)),n.themes.push(o),gn(t.wbrels,-1,"theme/theme1.xml",ga.THEME),o="xl/styles."+r,na(i,o,ene(e,t)),n.styles.push(o),gn(t.wbrels,-1,"styles."+r,ga.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",na(i,o,e.vbaraw),n.vba.push(o),gn(t.wbrels,-1,"vbaProject.bin",ga.VBA)),o="xl/metadata."+r,na(i,o,ane()),n.metadata.push(o),gn(t.wbrels,-1,"metadata."+r,ga.XLMETA),d.length>1&&(o="xl/persons/person.xml",na(i,o,e3e(d)),n.people.push(o),gn(t.wbrels,-1,"persons/person.xml",ga.PEOPLE)),na(i,"[Content_Types].xml",vae(n,t)),na(i,"_rels/.rels",sb(t.rels)),na(i,"xl/_rels/workbook."+r+".rels",sb(t.wbrels)),delete t.revssf,delete t.ssf,i}function z8(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=cu(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function GOe(e,t){return Er.find(e,"EncryptedPackage")?HOe(e,t):jne(e,t)}function qOe(e,t){var r,a=e,n=t||{};return n.type||(n.type=da&&Buffer.isBuffer(e)?"buffer":"base64"),r=Kre(a,n),QOe(r,n)}function Fne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return gF(e.slice(r),t);default:break e}return Lb.to_workbook(e,t)}function KOe(e,t){var r="",a=z8(e,t);switch(t.type){case"base64":r=cu(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Qg(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=kn(r)),t.type="binary",Fne(r,t)}function WOe(e,t){var r=e;return t.type=="base64"&&(r=cu(r)),r=Fw.utils.decode(1200,r.slice(2),"str"),t.type="binary",Fne(r,t)}function XOe(e){return e.match(/[^\x00-\x7F]/)?cA(e):e}function lT(e,t,r,a){return a?(r.type="string",Lb.to_workbook(e,r)):Lb.to_workbook(t,r)}function Ub(e,t){l8();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Ub(new Uint8Array(e),(r=Kn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),ob={},r.dateNF&&(ob.dateNF=r.dateNF),r.type||(r.type=da&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=da?"buffer":"binary",a=Vje(e),typeof Uint8Array<"u"&&!da&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=XOe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Kn(r),r.type="array",Ub(c8(a),r)}switch((n=z8(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return GOe(Er.read(a,r),r);break;case 9:if(n[1]<=8)return jne(a,r);break;case 60:return gF(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return t_e(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return Vae.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?qOe(a,r):lT(e,a,r,i);case 239:return n[3]===60?gF(a,r):lT(e,a,r,i);case 255:if(n[1]===254)return WOe(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return Ng.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Ng.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return pF.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return Yae.to_workbook(a,r);break;case 10:case 13:case 32:return KOe(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return e_e.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?pF.to_workbook(a,r):lT(e,a,r,i)}function Dne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return PN(t.file,Er.write(e,{type:da?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Er.write(e,t)}function YOe(e,t){var r=Kn(t||{}),a=zOe(e,r);return JOe(a,r)}function JOe(e,t){var r={},a=da?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var n=e.FullPaths?Er.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof n=="string"){if(t.type=="binary"||t.type=="base64")return n;n=new Uint8Array(F_(n))}return t.password&&typeof encrypt_agile<"u"?Dne(encrypt_agile(n,t.password),t):t.type==="file"?PN(t.file,n):t.type=="string"?kn(n):n}function ZOe(e,t){var r=t||{},a=X6e(e,r);return Dne(a,r)}function Yf(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return Dw(cA(a));case"binary":return cA(a);case"string":return e;case"file":return PN(t.file,a,"utf8");case"buffer":return da?c0(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):Yf(a,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function eFe(e,t){switch(t.type){case"base64":return Dw(e);case"binary":return e;case"string":return e;case"file":return PN(t.file,e,"binary");case"buffer":return da?c0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function HE(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?Dw(r):t.type=="string"?kn(r):r;case"file":return PN(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Pne(e,t){l8(),GIe(e);var r=Kn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=Pne(e,r);return r.type="array",F_(a)}var n=0;if(r.sheet&&(typeof r.sheet=="number"?n=r.sheet:n=e.SheetNames.indexOf(r.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Yf(z6e(e,r),r);case"slk":case"sylk":return Yf(zae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"htm":case"html":return Yf(Sne(e.Sheets[e.SheetNames[n]],r),r);case"txt":return eFe(Rne(e.Sheets[e.SheetNames[n]],r),r);case"csv":return Yf(V8(e.Sheets[e.SheetNames[n]],r),r,"\uFEFF");case"dif":return Yf(Vae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"dbf":return HE(pF.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"prn":return Yf(Lb.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"rtf":return Yf(Yae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"eth":return Yf($ae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"fods":return Yf(Ine(e,r),r);case"wk1":return HE(Ng.sheet_to_wk1(e.Sheets[e.SheetNames[n]],r),r);case"wk3":return HE(Ng.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),HE(kne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),ZOe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return YOe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function tFe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function B1(e,t,r){var a={};return a.type="file",a.file=t,tFe(a),Pne(e,a)}function rFe(e,t,r,a,n,i,o,l){var c=ni(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[a[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;i[m]!=null&&(h[i[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[i[m]]=null;else if(u!==void 0)h[i[m]]=u;else if(d&&x===null)h[i[m]]=null;else continue;else h[i[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:qh(g,x,l);x!=null&&(f=!1)}}return{row:h,isempty:f}}function Nk(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof d){case"string":c=Pa(d);break;case"number":c=Pa(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(n=0);var f=ni(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,N=0,C={};v&&!e[y]&&(e[y]=[]);var T=u.skipHidden&&e["!cols"]||[],_=u.skipHidden&&e["!rows"]||[];for(N=c.s.c;N<=c.e.c;++N)if(!(T[N]||{}).hidden)switch(h[N]=ds(N),r=v?e[y][N]:e[h[N]+f],a){case 1:i[N]=N-c.s.c;break;case 2:i[N]=h[N];break;case 3:i[N]=u.header[N-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=qh(r,null,u),x=C[o]||0,!x)C[o]=1;else{do l=o+"_"+x++;while(C[l]);C[o]=x,C[l]=1}i[N]=l}for(y=c.s.r+n;y<=c.e.r;++y)if(!(_[y]||{}).hidden){var O=rFe(e,c,y,h,a,i,v,u);(O.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=O.row)}return m.length=g,m}var OV=/"/g;function aFe(e,t,r,a,n,i,o,l){for(var c=!0,u=[],d="",f=ni(r),h=t.s.c;h<=t.e.c;++h)if(a[h]){var m=l.dense?(e[r]||[])[h]:e[a[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:qh(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===n||x===i||x===34||l.forceQuotes){d='"'+d.replace(OV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(OV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function V8(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var n=Pa(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var h=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],g=n.s.c;g<=n.e.c;++g)(h[g]||{}).hidden||(f[g]=ds(g));for(var x=0,v=n.s.r;v<=n.e.r;++v)(m[v]||{}).hidden||(d=aFe(e,n,v,f,o,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),(d||a.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete a.dense,r.join("")}function Rne(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=V8(e,t);return r}function nFe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var n=Pa(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=n.s.c;l<=n.e.c;++l)o[l]=ds(l);for(var d=n.s.r;d<=n.e.r;++d)for(i=ni(d),l=n.s.c;l<=n.e.c;++l)if(t=o[l]+i,r=u?(e[d]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function Lne(e,t,r){var a=r||{},n=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?fs(a.origin):a.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+n}};if(i["!ref"]){var f=Pa(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+n)}else o==-1&&(o=0,d.e.r=t.length-1+n);var h=a.header||[],m=0;t.forEach(function(x,v){Ls(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var N=x[y],C="z",T="",_=Ur({c:l+m,r:o+v+n});u=qw(i,_),N&&typeof N=="object"&&!(N instanceof Date)?i[_]=N:(typeof N=="number"?C="n":typeof N=="boolean"?C="b":typeof N=="string"?C="s":N instanceof Date?(C="d",a.cellDates||(C="n",N=Mi(N)),T=a.dateNF||Dr[14]):N===null&&a.nullError&&(C="e",N=0),u?(u.t=C,u.v=N,delete u.w,delete u.R,T&&(u.z=T)):i[_]=u={t:C,v:N},T&&(u.z=T))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=ni(o);if(n)for(m=0;m<h.length;++m)i[ds(m+l)+g]={t:"s",v:h[m]};return i["!ref"]=Zr(d),i}function sFe(e,t){return Lne(null,e,t)}function qw(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=fs(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?qw(e,Ur(t)):qw(e,Ur({r:t,c:r||0}))}function iFe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function $8(){return{SheetNames:[],Sheets:{}}}function G8(e,t,r,a){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var o=i&&i[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=o+n)!=-1;++n);}if(yne(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function oFe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=iFe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function lFe(e,t){return e.z=t,e}function Mne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function cFe(e,t,r){return Mne(e,"#"+t,r)}function uFe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function dFe(e,t,r,a){for(var n=typeof t!="string"?t:Pa(t),i=typeof t=="string"?t:Zr(t),o=n.s.r;o<=n.e.r;++o)for(var l=n.s.c;l<=n.e.c;++l){var c=qw(e,o,l);c.t="n",c.F=i,delete c.v,o==n.s.r&&l==n.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Os={encode_col:ds,encode_row:ni,encode_cell:Ur,encode_range:Zr,decode_col:y8,decode_row:b8,split_cell:w5e,decode_cell:fs,decode_range:wc,format_cell:qh,sheet_add_aoa:fae,sheet_add_json:Lne,sheet_add_dom:_ne,aoa_to_sheet:S1,json_to_sheet:sFe,table_to_sheet:Bne,table_to_book:xOe,sheet_to_csv:V8,sheet_to_txt:Rne,sheet_to_json:Nk,sheet_to_html:Sne,sheet_to_formulae:nFe,sheet_to_row_object_array:Nk,sheet_get_cell:qw,book_new:$8,book_append_sheet:G8,book_set_sheet_visibility:oFe,cell_set_number_format:lFe,cell_set_hyperlink:Mne,cell_set_internal_link:cFe,cell_add_comment:uFe,sheet_set_array_formula:dFe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function fFe({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const a=Os.book_new(),n=Os.json_to_sheet(e);Os.book_append_sheet(a,n,r),B1(a,`${t}.xlsx`)}catch(a){console.error("Error exporting to Excel:",a),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const AFe=Array.from({length:Bs.length},(e,t)=>t+1),FV={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},hFe=e=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null);w.useEffect(()=>e?cje(e,f=>{r(f),n(!1)}):void 0,[e]);const l=w.useCallback(async d=>{try{return o(null),await oje(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=w.useCallback(async d=>{try{o(null),await lje(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=w.useCallback(async d=>{try{return o(null),d.trim()?await dje(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:a,error:i,save:l,remove:c,search:u}},mFe=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0);w.useEffect(()=>uje(o=>{t(o),a(!1)}),[]);const n=w.useMemo(()=>e.map(i=>i.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:n,loading:r}},Zx=({label:e,icon:t,children:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),s.jsxs("div",{className:"relative",children:[t&&s.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),pFe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",gFe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",xFe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",Z0=({title:e,value:t,icon:r})=>s.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),s.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),vFe=({data:e,title:t,period:r})=>{const a=Math.max(1,...e.map(i=>i.value)),n=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(fl,{className:"h-5 w-5 text-slate-400"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el período seleccionado","."]}):s.jsx("div",{className:"grid gap-3",children:e.map((i,o)=>s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:i.label}),s.jsx("span",{children:i.value})]}),s.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:s.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${n[o%n.length]}`,style:{width:`${i.value/a*100}%`}})})]},i.label))})]})},cT=({title:e,data:t,icon:r})=>{const a=Math.max(1,...t.map(i=>i.value)),n=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):s.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((i,o)=>s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:i.label}),s.jsx("span",{children:i.value})]}),s.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:s.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${n[o%n.length]}`,style:{width:`${i.value/a*100}%`}})})]},i.label))})]})},bFe=({reemplazos:e,period:t})=>{const r=w.useMemo(()=>{if(t==="month"){const n=new Date,i=n.getMonth(),o=n.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===i&&c.getFullYear()===o})}return e},[e,t]),a=w.useMemo(()=>{const n=r.length,i=r.filter(u=>u.resultado==="Hora realizada").length,o=n-i,l=n>0?i/n*100:0,c=u=>Object.entries(r.reduce((d,f)=>{const h=f[u];return h&&(d[h]=(d[h]||0)+1),d},{})).map(([d,f])=>({label:d,value:f})).sort((d,f)=>f.value-d.value);return{totalReemplazos:n,horasRealizadas:i,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(u=>u.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(u=>u.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(u=>u.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(u=>u.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return a?s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(Z0,{title:"Total Reemplazos",value:a.totalReemplazos,icon:s.jsx(wwe,{className:"h-6 w-6"})}),s.jsx(Z0,{title:"Horas Realizadas",value:a.horasRealizadas,icon:s.jsx(cn,{className:"h-6 w-6"})}),s.jsx(Z0,{title:"Horas Cubiertas",value:a.horasCubiertas,icon:s.jsx(v2,{className:"h-6 w-6"})}),s.jsx(Z0,{title:"Efectividad",value:`${a.porcentajeRealizadas.toFixed(1)}%`,icon:s.jsx(_Ce,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(Z0,{title:"Profesores ausentes (únicos)",value:a.setAusentes.size,icon:s.jsx(mz,{className:"h-6 w-6"})}),s.jsx(Z0,{title:"Reemplazantes (únicos)",value:a.setReemplazan.size,icon:s.jsx(ck,{className:"h-6 w-6"})}),s.jsx(Z0,{title:"Cursos (únicos)",value:a.setCursos.size,icon:s.jsx(Ei,{className:"h-6 w-6"})}),s.jsx(Z0,{title:"Asignaturas ausentes (únicas)",value:a.setAsigAusentes.size,icon:s.jsx(Ds,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(cT,{title:`Profesores con más ausencias (${t==="month"?"mes":"total"})`,data:a.ausenciasPorProfesor,icon:s.jsx(mz,{className:"h-5 w-5 text-slate-400"})}),s.jsx(cT,{title:`Profesores que más reemplazan (${t==="month"?"mes":"total"})`,data:a.reemplazosPorProfesor,icon:s.jsx(ck,{className:"h-5 w-5 text-slate-400"})})]}),s.jsx("div",{className:"grid gap-4",children:s.jsx(cT,{title:`Asignaturas con más ausencias (${t==="month"?"mes":"total"})`,data:a.ausenciasPorAsignatura,icon:s.jsx(Ds,{className:"h-5 w-5 text-slate-400"})})})]}):s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[s.jsx(Di,{className:"h-5 w-5 animate-spin"}),"Calculando estadísticas…"]})})},yFe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:a,remove:n,search:i,loading:o,error:l}=hFe(t),{profesorNames:c,loading:u}=mFe(),[d,f]=w.useState(FV),[h,m]=w.useState(""),[g,x]=w.useState([]),[v,y]=w.useState(null),[N,C]=w.useState(!1),[T,_]=w.useState(!1),[O,j]=w.useState("month"),[S,B]=w.useState(null);w.useEffect(()=>{(async()=>{if(!h.trim()){x(r);return}_(!0);try{const J=await i(h);x(J)}finally{_(!1)}})()},[r,h,i]);const L=w.useMemo(()=>{let G=[...g];return S!==null&&G.sort((J,W)=>{const Z=S.key,M=J[Z],F=W[Z];if(M==null)return 1;if(F==null)return-1;let X=0;if(Z==="bloquesAfectados"){const Y=M,ae=F;Y.length<ae.length?X=-1:Y.length>ae.length&&(X=1)}else{const Y=String(M),ae=String(F);X=Y.localeCompare(ae,"es",{numeric:!0})}return S.direction==="ascending"?X:-X}),G},[g,S]),D=G=>{let J="ascending";S&&S.key===G&&S.direction==="ascending"&&(J="descending"),B({key:G,direction:J})},k=w.useCallback(G=>{const{name:J,value:W}=G.target;f(Z=>({...Z,[J]:W}))},[]),R=w.useCallback(G=>{f(J=>{const Z=J.bloquesAfectados.includes(G)?J.bloquesAfectados.filter(M=>M!==G):[...J.bloquesAfectados,G].sort((M,F)=>M-F);return{...J,bloquesAfectados:Z}})},[]),U=w.useCallback(async G=>{G.preventDefault(),y(null),C(!0);const{docenteAusente:J,asignaturaAusente:W,curso:Z,diaAusencia:M,bloquesAfectados:F,docenteReemplazante:X,asignaturaReemplazante:Y}=d;if(!J||!W||!Z||!M||!X||!Y||F.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),C(!1);return}if(J===X){y("El docente ausente y el reemplazante no pueden ser la misma persona."),C(!1);return}try{const ae=W.trim().toLowerCase()===Y.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",le={...d,resultado:ae};await a(le),f(FV);const ie=document.createElement("div");ie.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",ie.textContent=ae==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(ie),setTimeout(()=>{document.body.contains(ie)&&document.body.removeChild(ie)},2500)}catch(ae){console.error(ae),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{C(!1)}},[d,a]),H=w.useCallback(async G=>{if(window.confirm("¿Eliminar este registro?"))try{await n(G)}catch(J){console.error(J),alert("No se pudo eliminar. Intente nuevamente.")}},[n]),Q=w.useMemo(()=>{const G=O==="month"?r.filter(W=>{if(!W.diaAusencia)return!1;const Z=new Date(W.diaAusencia+"T00:00:00"),M=new Date;return Z.getMonth()===M.getMonth()&&Z.getFullYear()===M.getFullYear()}):r,J={};for(const W of G){const Z=W.curso||"Sin curso";J[Z]=(J[Z]||0)+1}return Object.entries(J).sort(([W],[Z])=>W.localeCompare(Z,"es")).map(([W,Z])=>({label:W,value:Z}))},[r,O]),V="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?s.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas"}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",O==="month"?"Mes Actual":"Total"]})]}),s.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[s.jsx("button",{onClick:()=>j("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${O==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),s.jsx("button",{onClick:()=>j("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${O==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),s.jsx(bFe,{reemplazos:r,period:O})]}),s.jsx(vFe,{data:Q,title:`Reemplazos / Inasistencias por curso (${O==="month"?"mes":"total"})`,period:O}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?s.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[s.jsx(Di,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):s.jsxs("form",{onSubmit:U,className:"space-y-8",children:[s.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ei,{className:"h-5 w-5 text-slate-400"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),s.jsx(Zx,{label:"Nombre",icon:s.jsx(Ym,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:k,className:V,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(G=>s.jsx("option",{value:G,children:G},G))]})}),s.jsx(Zx,{label:"Asignatura",icon:s.jsx(Ds,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:k,className:V,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),ln.map(G=>s.jsx("option",{value:G,children:G},G))]})}),s.jsx(Zx,{label:"Curso",icon:s.jsx(Ei,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"curso",value:d.curso,onChange:k,className:V,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(G=>s.jsx("option",{value:G,children:G},G))]})}),s.jsx(Zx,{label:"Día de ausencia",icon:s.jsx(Io,{className:"h-5 w-5"}),children:s.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:k,className:V,required:!0,disabled:N})}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx(Ac,{className:"h-5 w-5 text-slate-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:AFe.map(G=>{const J=d.bloquesAfectados.includes(G);return s.jsx("button",{type:"button",onClick:()=>R(G),disabled:N,className:`${pFe} ${J?gFe:xFe}`,"aria-pressed":J,children:G},G)})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ei,{className:"h-5 w-5 text-slate-400"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),s.jsx(Zx,{label:"Nombre",icon:s.jsx(Ym,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:k,className:V,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(G=>s.jsx("option",{value:G,children:G},G))]})}),s.jsx(Zx,{label:"Asignatura",icon:s.jsx(Ds,{className:"h-5 w-5"}),children:s.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:k,className:V,required:!0,disabled:N,children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),ln.map(G=>s.jsx("option",{value:G,children:G},G))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&s.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[s.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),s.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[s.jsx(cn,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&s.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:N||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:N?s.jsxs(s.Fragment,{children:[s.jsx(Di,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):s.jsxs(s.Fragment,{children:[s.jsx(gl,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",L.length," de ",r.length," registros."]})]}),s.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:T?s.jsx(Di,{className:"h-5 w-5 animate-spin"}):s.jsx(C1,{className:"h-5 w-5"})}),s.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:G=>m(G.target.value),className:V+" pl-10",disabled:T})]}),s.jsxs("button",{onClick:()=>fFe({data:L.map(G=>({Fecha:G.diaAusencia,Curso:G.curso,"Docente Ausente":G.docenteAusente,"Asignatura Ausente":G.asignaturaAusente,"Docente Reemplazante":G.docenteReemplazante,"Asignatura Reemplazante":G.asignaturaReemplazante,"Bloques Afectados":G.bloquesAfectados.join(", "),Resultado:G.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:L.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[s.jsx(kNe,{className:"h-4 w-4"}),s.jsx("span",{children:"Excel"})]})]})]}),o?s.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[s.jsx(Di,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(G=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:s.jsxs("button",{onClick:()=>D(G.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[G.label,s.jsx(xwe,{className:"h-3 w-3"})]})},G.key)),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:L.length>0?L.map(G=>s.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(G.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:G.curso}),s.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[G.docenteAusente,s.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:G.asignaturaAusente})]}),s.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[G.docenteReemplazante,s.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:G.asignaturaReemplazante})]}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:G.bloquesAfectados.join(", ")}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${G.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[s.jsx(cn,{className:"h-4 w-4"}),G.resultado]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsx("button",{onClick:()=>H(G.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:N,children:s.jsx(Da,{className:"h-4 w-4"})})})]},G.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),L.length>0&&!h&&s.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",L.length," registros"]})]})]})]})},wFe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=pt(Ar,"reemplazos"),r=_t(t,Gt("fecha","desc"));return ar(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar reemplazos:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},NFe=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=pt(Ar,"acompanamientos"),r=_t(t,Gt("fecha","desc"));return ar(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar acompañamientos:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},CFe=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=pt(Ar,"calendar_events"),r=_t(t,Gt("date","asc"));return ar(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar eventos del calendario:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Kf=({title:e,value:t,description:r,isLoading:a=!1})=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),a?s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Vp=({title:e,data:t,colorClass:r,valueFormatter:a=i=>String(i),isLoading:n=!1})=>{const i=w.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=w.useMemo(()=>Math.max(...i,1),[i]);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),n?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):s.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),s.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a(l.value)})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},EFe=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null);return w.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=wFe(v=>{t(v),h()}),g=NFe(v=>{a(v),h()}),x=CFe(v=>{i(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:n,loading:o,error:c}},jFe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:a,loading:n,error:i}=EFe(),[o,l]=w.useState(W2);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:a.length,loading:n,error:i,currentUser:e==null?void 0:e.profile}),w.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):W2)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(W2)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),s.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[s.jsx("p",{children:s.jsx("strong",{children:"Debug Info:"})}),s.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),s.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),s.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),i)return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),s.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:i}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=w.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(_=>_.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(_,O)=>_.reduce((j,S)=>{const B=S[O];return typeof B=="string"&&(j[B]=(j[B]||0)+1),j},{}),N=y(t,"docenteAusente"),C=y(t,"docenteReemplazante"),T=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(N).map(([_,O])=>({label:_,value:O})),reemplazosPorDocente:Object.entries(C).map(([_,O])=>({label:_,value:O})),inasistenciasPorCurso:Object.entries(T).map(([_,O])=>({label:_,value:O})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=w.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(O=>{O.criteria.forEach(j=>{g.set(j.name,O.domain)})});let x=0,v=0;const y={},N={};r.forEach(O=>{y[O.docente]||(y[O.docente]={total:0,count:0}),Object.entries(O.rubricaResultados).forEach(([j,S])=>{x+=S,v++,y[O.docente].total+=S,y[O.docente].count++;const B=g.get(j);B&&(N[B]||(N[B]={total:0,count:0}),N[B].total+=S,N[B].count++)})});const C=v>0?(x/v).toFixed(2):"N/A",T=Object.entries(y).map(([O,j])=>({label:O,value:j.count>0?(j.total/j.count).toFixed(2):0})),_=Object.entries(N).map(([O,j])=>({label:O,value:j.count>0?(j.total/j.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:C,desempenoPorDocente:T,desempenoPorDominio:_}},[r,o]),d=w.useMemo(()=>{const m={[sa.EVALUACION]:0,[sa.ACTO]:0,[sa.ACTIVIDAD_FOCALIZADA]:0,[sa.SALIDA_PEDAGOGICA]:0};for(const x of a)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:ab[x].label,value:v}));return{totalEvaluaciones:m[sa.EVALUACION],totalActos:m[sa.ACTO],totalActividadesFocalizadas:m[sa.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[sa.SALIDA_PEDAGOGICA],distribucionEventos:g}},[a]);return n?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&a.length===0?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[s.jsx("span",{className:"text-6xl mb-4",children:"📊"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),s.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[s.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),s.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),s.jsx("p",{children:"• Calendario Académico"})]})]}):s.jsxs("div",{className:"space-y-12 animate-fade-in",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),s.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),s.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Kf,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:n}),s.jsx(Kf,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:n}),s.jsx(Kf,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:n}),s.jsx(Kf,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(Vp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:n}),s.jsx(Vp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:n}),s.jsx(Vp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:n}),s.jsx(Vp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:n})]})]}),r.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Kf,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:n}),s.jsx(Kf,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(Vp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:n}),s.jsx(Vp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:n})]})]}),a.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Kf,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:n}),s.jsx(Kf,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:n}),s.jsx(Kf,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:n}),s.jsx(Kf,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(Vp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:n}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),n?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[a.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return s.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&s.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),s.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=ab[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=ab[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),a.filter(m=>new Date(m.date)>=new Date).length===0&&s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+a.length}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),s.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[s.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),s.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},bF="carga_horaria_asignaciones",Une="usuarios",kFe=e=>{const t=e.data();return{id:e.id,...t}},SFe=e=>{const t=_t(pt(ot,Une),rr("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),Gt("nombreCompleto","asc"));return ar(t,a=>{const n=a.docs.map(i=>{const o=i.data();return{id:i.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(n)},a=>{console.error("Error al suscribirse a los docentes:",a),e([])})},_Fe=async e=>{try{return(await Yr(pt(ot,Une),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:qa()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},BFe=e=>{const t=_t(pt(ot,bF),Gt("docenteNombre","asc"));return ar(t,a=>{const n=a.docs.map(i=>kFe(i));e(n)},a=>{console.error("Error al suscribirse a las asignaciones:",a),e([])})},TFe=async(e,t=!1)=>{try{if(t){const n=(await _r(pt(ot,bF))).docs.map(i=>Ja(i.ref));await Promise.all(n),console.log(`Se eliminaron ${n.length} asignaciones existentes`)}const r=e.map(a=>Yr(pt(ot,bF),{...a,createdAt:qa(),updatedAt:qa()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},Ck=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},j2=e=>{const t=Ck(e);return e-t},s5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),Qne=(e,t)=>{const r=Ck(e.horasContrato),a=j2(e.horasContrato),n=t.filter(m=>m.docenteId===e.id),i=n.reduce((m,g)=>m+s5(g.horasPorCurso),0),o=n.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=i+o,c=0,u=r-l,d=a-c,f=[],h=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>a&&f.push(`Excede horas no lectivas: ${c}/${a}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:a,sumCursos:i,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:h,errors:f}},IFe=(e,t)=>{const r=Qne(e,t),a=[];return r.errors.forEach(n=>{a.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${n}`})}),r.warnings.forEach(n=>{a.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${n}`})}),a},OFe=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},Hne="horarios_generados",FFe=async e=>{try{const t=$t(ot,Hne,"global");await ii(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},zne=e=>{const t=$t(ot,Hne,"global");return ar(t,a=>{a.exists()?e(a.data().data||{}):e({})},a=>{console.error("Error al suscribirse a los horarios:",a),e({})})};var DV;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(DV||(DV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PV;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(PV||(PV={}));var RV;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(RV||(RV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=["user","model","function","system"];var MV;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(MV||(MV={}));var UV;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(UV||(UV={}));var QV;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(QV||(QV={}));var HV;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(HV||(HV={}));var nw;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(nw||(nw={}));var zV;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(zV||(zV={}));var VV;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(VV||(VV={}));var $V;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})($V||($V={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ev extends ul{constructor(t,r){super(t),this.response=r}}class Vne extends ul{constructor(t,r,a,n){super(t),this.status=r,this.statusText=a,this.errorDetails=n}}class Dm extends ul{}class $ne extends ul{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DFe="https://generativelanguage.googleapis.com",PFe="v1beta",RFe="0.24.1",LFe="genai-js";var Gg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Gg||(Gg={}));class MFe{constructor(t,r,a,n,i){this.model=t,this.task=r,this.apiKey=a,this.stream=n,this.requestOptions=i}toString(){var t,r;const a=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||PFe;let i=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||DFe}/${a}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function UFe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${LFe}/${RFe}`),t.join(" ")}async function QFe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",UFe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let a=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(n){throw new Dm(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${n.message}`)}for(const[n,i]of a.entries()){if(n==="x-goog-api-key")throw new Dm(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new Dm(`Header name ${n} can only be set using the apiClient field`);r.append(n,i)}}return r}async function HFe(e,t,r,a,n,i){const o=new MFe(e,t,r,a,i);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},GFe(i)),{method:"POST",headers:await QFe(o),body:n})}}async function VN(e,t,r,a,n,i={},o=fetch){const{url:l,fetchOptions:c}=await HFe(e,t,r,a,n,i);return zFe(l,c,o)}async function zFe(e,t,r=fetch){let a;try{a=await r(e,t)}catch(n){VFe(n,e)}return a.ok||await $Fe(a,e),a}function VFe(e,t){let r=e;throw r.name==="AbortError"?(r=new $ne(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Vne||e instanceof Dm||(r=new ul(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function $Fe(e,t){let r="",a;try{const n=await e.json();r=n.error.message,n.error.details&&(r+=` ${JSON.stringify(n.error.details)}`,a=n.error.details)}catch{}throw new Vne(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,a)}function GFe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),i5(e.candidates[0]))throw new ev(`${um(e)}`,e);return qFe(e)}else if(e.promptFeedback)throw new ev(`Text not available. ${um(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),i5(e.candidates[0]))throw new ev(`${um(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),GV(e)[0]}else if(e.promptFeedback)throw new ev(`Function call not available. ${um(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),i5(e.candidates[0]))throw new ev(`${um(e)}`,e);return GV(e)}else if(e.promptFeedback)throw new ev(`Function call not available. ${um(e)}`,e)},e}function qFe(e){var t,r,a,n;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)o.text&&i.push(o.text),o.executableCode&&i.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&i.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function GV(e){var t,r,a,n;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)o.functionCall&&i.push(o.functionCall);if(i.length>0)return i}const KFe=[nw.RECITATION,nw.SAFETY,nw.LANGUAGE];function i5(e){return!!e.finishReason&&KFe.includes(e.finishReason)}function um(e){var t,r,a;let n="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)n+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){const i=e.candidates[0];i5(i)&&(n+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(n+=`: ${i.finishMessage}`))}return n}function Kw(e){return this instanceof Kw?(this.v=e,this):new Kw(e)}function WFe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(e,t||[]),n,i=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(h){a[h]&&(n[h]=function(m){return new Promise(function(g,x){i.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(a[h](m))}catch(g){f(i[0][3],g)}}function c(h){h.value instanceof Kw?Promise.resolve(h.value.v).then(u,d):f(i[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,m){h(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function XFe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=ZFe(t),[a,n]=r.tee();return{stream:JFe(a),response:YFe(n)}}async function YFe(e){const t=[],r=e.getReader();for(;;){const{done:a,value:n}=await r.read();if(a)return q8(eDe(t));t.push(n)}}function JFe(e){return WFe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:a,done:n}=yield Kw(r.read());if(n)break;yield yield Kw(q8(a))}})}function ZFe(e){const t=e.getReader();return new ReadableStream({start(a){let n="";return i();function i(){return t.read().then(({value:o,done:l})=>{if(l){if(n.trim()){a.error(new ul("Failed to parse stream"));return}a.close();return}n+=o;let c=n.match(qV),u;for(;c;){try{u=JSON.parse(c[1])}catch{a.error(new ul(`Error parsing JSON response: "${c[1]}"`));return}a.enqueue(u),n=n.substring(c[0].length),c=n.match(qV)}return i()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new $ne("Request aborted when reading from the stream"):l=new ul("Error reading from the stream"),l})}}})}function eDe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const a of e){if(a.candidates){let n=0;for(const i of a.candidates)if(r.candidates||(r.candidates=[]),r.candidates[n]||(r.candidates[n]={index:n}),r.candidates[n].citationMetadata=i.citationMetadata,r.candidates[n].groundingMetadata=i.groundingMetadata,r.candidates[n].finishReason=i.finishReason,r.candidates[n].finishMessage=i.finishMessage,r.candidates[n].safetyRatings=i.safetyRatings,i.content&&i.content.parts){r.candidates[n].content||(r.candidates[n].content={role:i.content.role||"user",parts:[]});const o={};for(const l of i.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[n].content.parts.push(o)}n++}a.usageMetadata&&(r.usageMetadata=a.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gne(e,t,r,a){const n=await VN(t,Gg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),a);return XFe(n)}async function qne(e,t,r,a){const i=await(await VN(t,Gg.GENERATE_CONTENT,e,!1,JSON.stringify(r),a)).json();return{response:q8(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kne(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Ww(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return tDe(t)}function tDe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let a=!1,n=!1;for(const i of e)"functionResponse"in i?(r.parts.push(i),n=!0):(t.parts.push(i),a=!0);if(a&&n)throw new ul("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!n)throw new ul("No content is provided for sending chat message.");return a?t:r}function rDe(e,t){var r;let a={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const n=e.generateContentRequest!=null;if(e.contents){if(n)throw new Dm("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(n)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{const i=Ww(e);a.contents=[i]}return{generateContentRequest:a}}function KV(e){let t;return e.contents?t=e:t={contents:[Ww(e)]},e.systemInstruction&&(t.systemInstruction=Kne(e.systemInstruction)),t}function aDe(e){return typeof e=="string"||Array.isArray(e)?{content:Ww(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],nDe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function sDe(e){let t=!1;for(const r of e){const{role:a,parts:n}=r;if(!t&&a!=="user")throw new ul(`First content should be with role 'user', got ${a}`);if(!LV.includes(a))throw new ul(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(LV)}`);if(!Array.isArray(n))throw new ul("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new ul("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of n)for(const c of WV)c in l&&(i[c]+=1);const o=nDe[a];for(const l of WV)if(!o.includes(l)&&i[l]>0)throw new ul(`Content with role '${a}' can't contain '${l}' part`);t=!0}}function XV(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const a of r.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="SILENT_ERROR";class iDe{constructor(t,r,a,n={}){this.model=r,this.params=a,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,a!=null&&a.history&&(sDe(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var a,n,i,o,l,c;await this._sendPromise;const u=Ww(t),d={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>qne(this._apiKey,this.model,d,f)).then(m=>{var g;if(XV(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=um(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var a,n,i,o,l,c;await this._sendPromise;const u=Ww(t),d={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=Gne(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(YV)}).then(m=>m.response).then(m=>{if(XV(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=um(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==YV&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oDe(e,t,r,a){return(await VN(t,Gg.COUNT_TOKENS,e,!1,JSON.stringify(r),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lDe(e,t,r,a){return(await VN(t,Gg.EMBED_CONTENT,e,!1,JSON.stringify(r),a)).json()}async function cDe(e,t,r,a){const n=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await VN(t,Gg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(t,r,a={}){this.apiKey=t,this._requestOptions=a,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Kne(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var a;const n=KV(t),i=Object.assign(Object.assign({},this._requestOptions),r);return qne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),i)}async generateContentStream(t,r={}){var a;const n=KV(t),i=Object.assign(Object.assign({},this._requestOptions),r);return Gne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),i)}startChat(t){var r;return new iDe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const a=rDe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),r);return oDe(this.apiKey,this.model,a,n)}async embedContent(t,r={}){const a=aDe(t),n=Object.assign(Object.assign({},this._requestOptions),r);return lDe(this.apiKey,this.model,a,n)}async batchEmbedContents(t,r={}){const a=Object.assign(Object.assign({},this._requestOptions),r);return cDe(this.apiKey,this.model,t,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new ul("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new JV(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,a){if(!t.name)throw new Dm("Cached content must contain a `name` field.");if(!t.model)throw new Dm("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const o of n)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new Dm(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const i=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new JV(this.apiKey,i,a)}}const uDe=[{model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],Wne=()=>(console.warn("No se encontró la API key de Gemini"),null);async function dDe(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function Xw(){const e=Wne();if(!e)return null;for(const t of uDe){const r=await dDe(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function Xne(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function fDe(e){const t=[...e];for(let r=t.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[t[r],t[a]]=[t[a],t[r]]}return t}async function ADe(e,t=3){var a;const r=await Xw();if(!r)return uT(e,t);try{const n=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,o=(await r.generateContent(n)).response.text(),l=Xne(o);return(a=l==null?void 0:l.preguntas)!=null&&a.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),uT(e,t))}catch(n){return console.error("Error al generar preguntas:",n),uT(e,t)}}async function hDe(e,t=30){var a;const r=await Xw();if(!r)return dT(e);try{const n=e.filter(u=>u&&u.trim());if(n.length===0)return[];const i=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${n.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(i)).response.text(),c=Xne(l);return(a=c==null?void 0:c.keywords)!=null&&a.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),dT(e))}catch(n){return console.error("Error al analizar respuestas:",n),dT(e)}}function uT(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((a,n)=>({enunciado:`Pregunta ${n+1} sobre ${e}`,opciones:fDe(r).slice(0,4)}))}function dT(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},a=e.join(" ").toLowerCase().split(/\W+/).filter(n=>n.length>3&&!t.has(n));for(const n of a)r[n]=(r[n]||0)+1;return Object.entries(r).sort(([,n],[,i])=>i-n).slice(0,20).map(([n,i])=>({keyword:n,score:Math.min(1,i/a.length)}))}async function mDe(){const e=Wne();if(!e)return null;const t={model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),Xw()}}async function K8(e,t=2,r=!0,a="General"){var d,f;const n=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generación con IA. Prompt: "${n}"`),console.log(`Configuración: maxRetries=${t}, useProModel=${r}`);try{const m=await lc(Sw,"callGeminiGeneric")({prompt:e,module:a});if((d=m==null?void 0:m.data)!=null&&d.success&&typeof m.data.response=="string"&&m.data.response.length>0)return console.log("Respuesta obtenida vía Cloud Function (genérica)."),m.data.response;const x=await lc(Sw,"callGeminiAI")({prompt:e,module:a});if((f=x==null?void 0:x.data)!=null&&f.success&&typeof x.data.response=="string"&&x.data.response.length>0)return console.log("Respuesta obtenida vía Cloud Function (secreto en backend)."),x.data.response}catch(h){const m=(h==null?void 0:h.message)||String(h);console.warn("Fallo llamada a Cloud Function callGeminiAI, intentando otras rutas:",m)}let i;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),i=await mDe(),i||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),i=await Xw())):i=await Xw(),!i)throw console.warn("IA en cliente no disponible (sin API key en frontend o sin conectividad). Usar fallback."),new Error("IA_NOT_AVAILABLE")}catch(h){throw console.warn("Inicialización de IA fallida, continuando con fallback:",h),new Error("IA_NOT_AVAILABLE")}let o=0,l,c="",u=0;for(;o<=t;){try{console.log(`Intento ${o+1}/${t+1} de generación con IA`);const h=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser válido y parseable.`,m=await i.generateContent(h);if(m!=null&&m.response&&typeof m.response.text=="function"){const g=m.response.text();if(g&&g.length>100){if(console.log(`Respuesta generada exitosamente (${g.length} caracteres)`),g.includes("{")&&g.includes("}")||g.includes("[")&&g.includes("]"))return console.log("La respuesta contiene estructuras JSON"),g;if(console.warn("La respuesta no parece contener JSON válido"),g.length>u&&(c=g,u=g.length),o===t)return console.log("Usando la mejor respuesta disponible en el último intento"),c}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(m){const g=typeof m=="string"?m:JSON.stringify(m);return console.warn("Formato de respuesta inesperado, usando fallback a string"),g}else console.warn("No se recibió respuesta válida del modelo")}catch(h){console.error(`Error en intento ${o+1}:`,h),l=h,h.message&&(h.message.includes("token")||h.message.includes("length")||h.message.includes("limit"))&&(console.log("Error relacionado con límites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(o++,o<=t){const h=Math.min(1e3*Math.pow(2,o),8e3);console.log(`Esperando ${h}ms antes de reintentar...`),await new Promise(m=>setTimeout(m,h))}}if(c)return console.log("Devolviendo la mejor respuesta disponible después de agotar reintentos"),c;throw console.error(`Todos los intentos de generación fallaron después de ${t+1} intentos`),l||new Error("No se pudo generar contenido después de múltiples intentos. Por favor, intente nuevamente.")}const jk=e=>{const[t,r]=e.split(":").map(Number);return t*60+r},pDe=e=>e==="Viernes",ZV=(e,t)=>{if(!pDe(e))return!0;const r=Bs.find(a=>a.bloque===t);return!!r&&jk(r.fin)<=jk("13:00")},k2=e=>{const t=(e||"").toLowerCase();return["mecánica","mecanica","taller","máquinas","maquinas","automotriz","electromecánica","electromecanica","metal","soldadura","tp"].some(r=>t.includes(r))},ag=e=>{const t=(e||"").toLowerCase();return["lenguaje","matem","historia","inglés","ingles","ciencias","biología","biologia","química","quimica","física","fisica","ed. física","educación física","ciudadanía","ciudadania"].some(r=>t.includes(r))},yF=e=>{const t=(e||"").toLowerCase();return["taller","práctica","practica","laboratorio","mecánica","mecanica","electr","maquin","tp"].some(r=>t.includes(r))},wF=e=>{const t=Bs.find(r=>r.bloque===e);return t?jk(t.inicio)>=jk("13:40"):!1};function W8(){const e={};for(const t of yA){e[t]={};for(const r of Bs){const a=String(r.bloque);e[t][a]={}}}return e}function Yne(e){const t=[];for(const r of Object.keys(e)){const a=e[r];for(const n of Object.keys(a)){const i=a[n],o=new Map;for(const l of Object.keys(i)){const c=i[l];if(c!=null&&c.profesor){const u=o.get(c.profesor)||[];u.push(l),o.set(c.profesor,u)}}for(const[l,c]of o.entries())c.length>1&&t.push(`Tope docente ${l} el ${r} bloque ${n} en cursos: ${c.join(", ")}`)}}return t}function gDe(e,t){const r=W8();for(const a of e){if(!r[a.dia])continue;const n=String(a.bloque);r[a.dia][n]&&t.includes(a.curso)&&(r[a.dia][n][a.curso]={asignatura:a.asignatura,profesor:a.docente})}return r}function xDe(e,t,r){var d,f,h,m;const a=W8(),n=e.map(g=>({...g})),i={},o={},l=(g,x)=>`${g}|${x}`;for(const g of t)i[g]={};n.sort((g,x)=>x.horas-g.horas);const c=(g,x)=>Bs.map(v=>v.bloque).filter(v=>!!a[x][String(v)][g]);for(const g of n){let x=g.horas;e:for(;x>0;){let v=!1;const y=[...yA].sort((N,C)=>{const T=c(g.curso,N).length;return c(g.curso,C).length-T});for(const N of y)if(!(r.terceroSoloPlanGeneral&&typeof g.curso=="string"&&g.curso.trim().startsWith("3º")&&!ag(g.asignatura)))for(let C=0;C<Bs.length;C++){const _=Bs[C].bloque;if(!ZV(N,_)||r.practicasPM&&yF(g.asignatura)&&!wF(_))continue;const O=l(N,_),j=(d=i[g.curso])==null?void 0:d[O],S=(f=o[g.docente])==null?void 0:f[O],B=a[N][String(_)][g.curso];if(!j&&!S&&!B){const L=k2(g.asignatura),D=ag(g.asignatura),k=Math.max(1,Math.min(10,r.maxConsecutivasMecanica??10)),R=Math.max(1,Math.min(3,r.maxConsecutivasPlanGeneral??3)),U=Q=>{const V=J=>Q==="mec"?k2(J):ag(J);let G=0;for(let J=C-1;J>=0;J--){const W=Bs[J].bloque,Z=a[N][String(W)][g.curso];if(!Z)break;if(V(Z.asignatura))G++;else break}for(let J=C+1;J<Bs.length;J++){const W=Bs[J].bloque,Z=a[N][String(W)][g.curso];if(!Z)break;if(V(Z.asignatura))G++;else break}return G};if(L&&U("mec")+1>k||D&&U("pg")+1>R)continue;if(a[N][String(_)][g.curso]={asignatura:g.asignatura,profesor:g.docente},i[g.curso][O]=!0,o[g.docente]=o[g.docente]||{},o[g.docente][O]=!0,x--,v=!0,x===0)break e;const H=Bs[C+1];if(H&&ZV(N,H.bloque)){const Q=l(N,H.bloque),V=a[N][String(H.bloque)][g.curso],G=(h=o[g.docente])==null?void 0:h[Q],J=()=>{if(r.practicasPM&&yF(g.asignatura)&&!wF(H.bloque))return!1;const W=k2(g.asignatura),Z=ag(g.asignatura),M=F=>{const X=ae=>F==="mec"?k2(ae):ag(ae);let Y=1;for(let ae=C-1;ae>=0;ae--){const le=Bs[ae].bloque,ie=a[N][String(le)][g.curso];if(!ie)break;if(X(ie.asignatura))Y++;else break}return Y++,Y};return!(W&&M("mec")>(r.maxConsecutivasMecanica??10)||Z&&M("pg")>(r.maxConsecutivasPlanGeneral??3))};if(x>0&&!((m=i[g.curso])!=null&&m[Q])&&!G&&!V&&J()&&(a[N][String(H.bloque)][g.curso]={asignatura:g.asignatura,profesor:g.docente},i[g.curso][Q]=!0,o[g.docente][Q]=!0,x--,x===0))break e}}}if(!v)break}}const u=[];for(const g of n){let x=0;for(const y of yA)for(const N of Bs){const C=a[y][String(N.bloque)][g.curso];C&&C.asignatura===g.asignatura&&C.profesor===g.docente&&x++}const v=g.horas-x;v>0&&u.push(`No se pudieron ubicar ${v} bloque(s) para ${g.asignatura} (${g.curso}) con ${g.docente}`)}for(const g of t)for(const x of yA){const v=Bs.map(y=>y.bloque).filter(y=>!!a[x][String(y)][g]);if(v.length>0){const y=Math.min(...v),N=Math.max(...v);for(let C=y;C<=N;C++)if(!a[x][String(C)][g]){u.push(`Ventana detectada en ${g} el ${x} entre bloques ${y}–${N}`);break}}}return u.push(...Yne(a)),{horarios:a,conflictos:u,fuente:"fallback"}}async function vDe(e,t,r,a){var o,l;const n={maxConsecutivasMecanica:(a==null?void 0:a.maxConsecutivasMecanica)??10,maxConsecutivasPlanGeneral:(a==null?void 0:a.maxConsecutivasPlanGeneral)??3,practicasPM:(a==null?void 0:a.practicasPM)??!1,terceroSoloPlanGeneral:(a==null?void 0:a.terceroSoloPlanGeneral)??!1},i=[];for(const c of e){const u=c.docenteNombre||((o=t.find(d=>d.id===c.docenteId))==null?void 0:o.nombre)||"Docente";for(const[d,f]of Object.entries(c.horasPorCurso||{})){const h=typeof f=="number"?f:0;h>0&&d&&i.push({curso:d,asignatura:c.asignaturaOModulo||"Asignatura",docente:u,horas:h})}}if(i.length===0)return{horarios:W8(),conflictos:[],fuente:"fallback"};try{const c={dias:yA,bloques:Bs,cursos:r,demanda:i},u=`Genera un horario semanal sin topes de profesor entre cursos.
Reglas:
- Un docente no puede estar en más de un curso en el mismo día y bloque.
- Cada item de demanda representa cuántos bloques deben ubicarse.
- Usa solamente los días y bloques provistos.
- Distribuye equilibradamente a lo largo de la semana evitando ventanas (huecos) y procurando no dejar días completamente vacíos por curso.
- El día Viernes no se pueden asignar bloques que terminen después de las 13:00.
 - Máximo de bloques consecutivos de asignaturas de mecánica: ${n.maxConsecutivasMecanica}.
 - Máximo de bloques consecutivos de asignaturas de plan general: ${n.maxConsecutivasPlanGeneral}.
 - ${n.practicasPM?"Las asignaturas prácticas (taller/práctica/laboratorio/TP) deben ubicarse en horario PM (desde 13:40).":"Preferir, si es posible, las asignaturas prácticas en PM, pero no obligatorio."}
 - ${n.terceroSoloPlanGeneral?"Para cursos de 3º medio (3ºA, 3ºB, etc.), solo ubicar asignaturas de plan general.":"Sin restricción especial para 3º medio."}

Entrada JSON:
${JSON.stringify(c,null,2)}

Devuelve SOLO JSON válido con el formato:
{
	"sesiones": [
		{ "curso": "1ºA", "dia": "Lunes", "bloque": 1, "asignatura": "Matemática", "docente": "Nombre" }
	]
}`,d=await K8(u,2,!0,"Horarios"),f=typeof window<"u"&&typeof localStorage<"u"&&localStorage.getItem("DEBUG_HORARIO_AI")==="1";if(f)try{localStorage.setItem("HORARIO_AI_RAW",typeof d=="string"?d:String(d)),console.debug("[HORARIO_AI] RAW respuesta IA guardada en localStorage.HORARIO_AI_RAW")}catch{}const m=(y=>{let N=(y==null?void 0:y.trim())||"";const C=N.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(C&&C[1]&&(N=C[1].trim()),!(N.startsWith("{")&&N.endsWith("}"))){const U=N.indexOf("{"),H=N.lastIndexOf("}");U!==-1&&H!==-1&&H>U&&(N=N.slice(U,H+1))}if(N=N.replace(/[“”]/g,'"').replace(/[‘’]/g,"'").replace(/\/(\/[^\n]*\n)/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/,\s*([}\]])/g,"$1"),f)try{localStorage.setItem("HORARIO_AI_JSON_CANDIDATE",N),console.debug("[HORARIO_AI] JSON candidato guardado en localStorage.HORARIO_AI_JSON_CANDIDATE")}catch{}const T=JSON.parse(N),_=U=>U.normalize("NFD").replace(/[\u0300-\u036f]/g,""),O=U=>{if(!U||typeof U!="string")return null;const H=_(U.toLowerCase().trim());return{lunes:"Lunes",martes:"Martes",miercoles:"Miércoles",jueves:"Jueves",viernes:"Viernes",monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",lun:"Lunes",mar:"Martes",mie:"Miércoles",mier:"Miércoles",jue:"Jueves",vie:"Viernes"}[H]||null},j=U=>_(U.toLowerCase().replace(/[º°]/g,"").replace(/\s+/g,"")),S=new Map;(Array.isArray(r)?r:[]).forEach(U=>S.set(j(String(U)),String(U)));const B=U=>{if(!U||typeof U!="string")return null;let H=U.trim();H=H.replace("°","º"),H=H.replace(/º\s+/g,"º"),H=H.replace(/\s+/g,H.includes("º")?"":" ");const Q=j(H);if(S.has(Q))return S.get(Q);const V=H.match(/(\d{1,2})\s*º?\s*([A-Za-z])/);if(V){const G=`${V[1]}º${V[2].toUpperCase()}`,J=j(G);if(S.has(J))return S.get(J)}return H},L=new Set(Bs.map(U=>U.bloque)),D=new Set(Array.isArray(r)?r:[]),R=(U=>{if(!U)return[];let H=[];Array.isArray(U)?H=U:Array.isArray(U.sesiones)?H=U.sesiones:U.horario&&Array.isArray(U.horario.sesiones)?H=U.horario.sesiones:U.schedule&&Array.isArray(U.schedule.sessions)?H=U.schedule.sessions:Array.isArray(U.clases)?H=U.clases:Array.isArray(U.asignaciones)?H=U.asignaciones:Array.isArray(U.data)?H=U.data:Array.isArray(U.output)?H=U.output:Array.isArray(U.result)&&(H=U.result);const Q=[],V=G=>{if(!G||typeof G!="object")return;const J=B(G.curso||G.cursoId||G.course||G.class||G.grupo),W=O(G.dia||G.día||G.day||G.weekday);let Z=G.bloque??G.block??G.slot??G.periodo??G.period;if(typeof Z=="string"){const X=Z.match(/(\d{1,2})/);X&&(Z=parseInt(X[1],10))}const M=(G.asignatura||G.materia||G.subject||G.asig||"").toString(),F=(G.docente||G.profesor||G.teacher||G.profe||"").toString();!J||!W||!Z||!L.has(Z)||D.size&&!D.has(J)||Q.push({curso:J,dia:W,bloque:Z,asignatura:M,docente:F})};if(H.length>0)for(const G of H)V(G);else{if(U.horario&&typeof U.horario=="object")for(const G of Object.keys(U.horario)){const J=O(G);if(!J)continue;const W=U.horario[G];if(!(!W||typeof W!="object"))for(const Z of Object.keys(W)){let M=Z;if(typeof M=="string"){const X=M.match(/(\d{1,2})/);X&&(M=parseInt(X[1],10))}if(!L.has(M))continue;const F=W[Z];if(Array.isArray(F))for(const X of F)V({...X||{},dia:J,bloque:M});else if(F&&typeof F=="object")for(const X of Object.keys(F)){const Y=B(X),ae=F[X];ae&&typeof ae=="object"&&V({curso:Y,dia:J,bloque:M,asignatura:ae.asignatura,docente:ae.docente||ae.profesor||ae.teacher})}}}for(const G of Object.keys(U)){const J=U[G];if(Array.isArray(J))for(const W of J)V(W)}}return Q})(T);if(f)try{localStorage.setItem("HORARIO_AI_SESIONES_COUNT",String(R.length))}catch{}return{sesiones:R}})(d);if(!((l=m==null?void 0:m.sesiones)!=null&&l.length))throw new Error("Respuesta IA sin sesiones");const g=gDe(m.sesiones,r),x=Yne(g),v=[];for(const y of r)for(const N of yA){let C=0,T=0;for(const _ of Bs){const O=g[N][String(_.bloque)][y];O&&(k2(O.asignatura)?C++:C=0,ag(O.asignatura)?T++:T=0,C>(n.maxConsecutivasMecanica??10)&&v.push(`Exceso mecánica consecutiva en ${y} ${N}`),T>(n.maxConsecutivasPlanGeneral??3)&&v.push(`Exceso plan general consecutiva en ${y} ${N}`),n.practicasPM&&yF(O.asignatura)&&!wF(_.bloque)&&v.push(`Práctica fuera de PM en ${y} ${N} bloque ${_.bloque}`),n.terceroSoloPlanGeneral&&y.trim().startsWith("3º")&&!ag(O.asignatura)&&v.push(`3º medio con asignatura no plan general en ${y} ${N} bloque ${_.bloque}`))}}return{horarios:g,conflictos:[...x,...v],fuente:"IA"}}catch(c){return c instanceof Error&&c.message==="IA_NOT_AVAILABLE"?console.warn("IA no disponible. Generando horario con algoritmo fallback."):console.warn("Falla IA en generación de horario, usando fallback:",c),xDe(i,r,n)}}const bDe=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,yDe=()=>{w.useEffect(()=>{const he=document.createElement("style");return he.innerHTML=bDe,document.head.appendChild(he),()=>{document.head.removeChild(he)}},[]);const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=w.useState(!1),[c,u]=w.useState("docentes"),[d,f]=w.useState([]),[h,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,C]=w.useState([]),[T,_]=w.useState(null),[O,j]=w.useState(on[0]||""),[S,B]=w.useState(!1),[L,D]=w.useState({maxConsecutivasMecanica:10,maxConsecutivasPlanGeneral:3,practicasPM:!1,terceroSoloPlanGeneral:!1}),[k,R]=w.useState(!1),[U,H]=w.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[Q,V]=w.useState("");w.useEffect(()=>SFe(ye=>t(ye)),[]),w.useEffect(()=>BFe(ye=>{const ce=ye.map(Ae=>{let Ne=Ae.funcionesLectivas||[];!Ne.length&&Ae.funcionesNoLectivas&&Ae.funcionesNoLectivas.length?Ne=Ae.funcionesNoLectivas:!Ne.length&&Ae.otraFuncion&&(Ne=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ae.otraFuncion,horas:parseInt(Ae.otraFuncion)||0}]);const{funcionesNoLectivas:Pe,otraFuncion:Qe,...$e}=Ae;return{...$e,funcionesLectivas:Ne}});a(ce)}),[]),w.useEffect(()=>zne(ye=>{x(ye&&Object.keys(ye).length>0?ye:null)}),[]);const G=w.useMemo(()=>{const he={};return e.forEach(ye=>{const ce=r.filter(Ae=>Ae.docenteId===ye.id);he[ye.id]=Qne(ye,ce)}),he},[e,r]);w.useEffect(()=>{const he=[];e.forEach(ye=>he.push(...IFe(ye,r))),f(he)},[e,r]);const J=w.useMemo(()=>Q?e.filter(he=>{var ye;return he.nombre.toLowerCase().includes(Q.toLowerCase())||((ye=he.email)==null?void 0:ye.toLowerCase().includes(Q.toLowerCase()))}):e,[e,Q]),W=w.useMemo(()=>r.filter(ye=>{const ce=e.find(Ae=>Ae.id===ye.docenteId);return!(!ce||n.busqueda&&!ce.nombre.toLowerCase().includes(n.busqueda.toLowerCase())||n.asignatura&&ye.asignaturaOModulo!==n.asignatura||n.departamento&&ce.departamento!==n.departamento||n.curso&&!Object.keys(ye.horasPorCurso).includes(n.curso))}).sort((ye,ce)=>ye.docenteId!==ce.docenteId?ye.docenteId.localeCompare(ce.docenteId):(ye.asignaturaOModulo||"").localeCompare(ce.asignaturaOModulo||"")),[r,e,n]),Z=async()=>{try{if(m(!0),!U.nombre||!U.email){alert("El nombre y email son obligatorios"),m(!1);return}await _Fe(U),R(!1),H({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(he){console.error(he),alert("Error al crear docente")}finally{m(!1)}},M=w.useCallback(()=>{if(e.length===0)return;const he={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:ln[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};a(ye=>[...ye,he])},[e]),F=w.useCallback((he,ye)=>{const ce=r.filter(Pe=>Pe.docenteId===he).map(Pe=>Pe.asignaturaOModulo);let Ae=ln[0];for(const Pe of ln)if(!ce.includes(Pe)){Ae=Pe;break}const Ne={id:`asig_${Date.now()}`,docenteId:he,docenteNombre:ye,asignaturaOModulo:Ae,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};a(Pe=>[...Pe,Ne])},[r]),X=w.useCallback(he=>a(ye=>ye.filter(ce=>ce.id!==he)),[]),Y=w.useCallback(he=>{a(ye=>ye.map(ce=>{if(ce.id!==he)return ce;const Ae={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...ce,funcionesLectivas:[...ce.funcionesLectivas||[],Ae]}}))},[]),ae=w.useCallback((he,ye,ce,Ae)=>{a(Ne=>Ne.map(Pe=>{if(Pe.id!==he)return Pe;const Qe=(Pe.funcionesLectivas||[]).map($e=>$e.id===ye?{...$e,[ce]:Ae}:$e);return{...Pe,funcionesLectivas:Qe}}))},[]),le=w.useCallback((he,ye)=>{a(ce=>ce.map(Ae=>{if(Ae.id!==he)return Ae;const Ne=(Ae.funcionesLectivas||[]).filter(Pe=>Pe.id!==ye);return{...Ae,funcionesLectivas:Ne}}))},[]),ie=w.useCallback((he,ye,ce)=>{a(Ae=>Ae.map(Ne=>{if(Ne.id!==he)return Ne;const Pe={...Ne,[ye]:ce};if(ye==="docenteId"){const Qe=e.find($e=>$e.id===ce);Qe&&(Pe.docenteNombre=Qe.nombre)}return ye==="horasPorCurso"&&(Pe.horasXAsig=s5(ce)),Pe}))},[e]),ne=w.useCallback((he,ye,ce)=>{a(Ae=>Ae.map(Ne=>{if(Ne.id!==he)return Ne;const Pe={...Ne.horasPorCurso};return ce===0?delete Pe[ye]:Pe[ye]=ce,{...Ne,horasPorCurso:Pe,horasXAsig:s5(Pe)}}))},[]),oe=w.useCallback(he=>{m(!0);const ye=new FileReader;ye.onload=ce=>{var Ae;try{const Ne=new Uint8Array((Ae=ce.target)==null?void 0:Ae.result),Pe=Ub(Ne,{type:"array"}),Qe=Pe.Sheets["Docentes 2025"]||Pe.Sheets[Pe.SheetNames[0]],$e=Os.sheet_to_json(Qe,{header:1});let et=-1;for(let nt=0;nt<$e.length;nt++){const bt=$e[nt];if(bt&&bt.some(ut=>typeof ut=="string"&&(ut.includes("Docente")||ut.includes("ASIGNATURA")||on.some(ze=>ut.includes(ze.replace("º","")))))){et=nt;break}}if(et===-1){alert("No se encontró la fila de encabezado en el archivo");return}const Ke=$e[et],Ge=[];for(let nt=et+1;nt<$e.length;nt++){const bt=$e[nt];if(!bt||bt.length===0)continue;const ut=bt[Ke.indexOf("Docente")]||"";if(!ut)continue;const ze=e.find($r=>$r.nombre.toLowerCase().includes(ut.toLowerCase()));if(!ze)continue;const Tt={};Ke.forEach(($r,br)=>{if(typeof $r=="string"){const Sn=OFe($r.trim());if(on.includes(Sn)){const Pr=parseInt(bt[br])||0;Pr>0&&(Tt[Sn]=Pr)}}});let ir=[];const Kt=bt[Ke.indexOf("FUNCIONES LECTIVAS")]||bt[Ke.indexOf("FUNCIONES NO LECTIVAS")]||bt[Ke.indexOf("OTRA FUNCIÓN")]||"";typeof Kt=="string"&&Kt.includes(":")?ir=Kt.split(",").map($r=>{const[br,Sn]=$r.split(":").map(Pr=>Pr.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:br,horas:parseInt(Sn)||0}}):Kt&&(ir=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Kt,horas:0}]);const Cr={id:`import_${Date.now()}_${nt}`,docenteId:ze.id,docenteNombre:ze.nombre,asignaturaOModulo:bt[Ke.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:ir,horasPorCurso:Tt,horasXAsig:s5(Tt)};Ge.push(Cr)}a(Ge),alert(`Se importaron ${Ge.length} asignaciones exitosamente`)}catch(Ne){console.error("Error al importar:",Ne),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},ye.readAsArrayBuffer(he)},[e]),we=w.useCallback(()=>{const he=r.map(Ae=>{const Ne=e.find(et=>et.id===Ae.docenteId),Pe=G[Ae.docenteId];let Qe="";Ae.funcionesLectivas&&Ae.funcionesLectivas.length>0?Qe=Ae.funcionesLectivas.map(et=>`${et.nombre}: ${et.horas}h`).join(", "):Ae.funcionesNoLectivas&&Ae.funcionesNoLectivas.length>0?Qe=Ae.funcionesNoLectivas.map(et=>`${et.nombre}: ${et.horas}h`).join(", "):Ae.otraFuncion&&(Qe=Ae.otraFuncion);const $e={Docente:Ae.docenteNombre,"ASIGNATURA O MÓDULO":Ae.asignaturaOModulo||"","FUNCIONES LECTIVAS":Qe,"HORAS X ASIG.":Ae.horasXAsig||0};return on.forEach(et=>$e[et]=Ae.horasPorCurso[et]||0),Pe&&($e["HORAS LECTIVAS (HA)"]=Pe.HA,$e["HORAS NO LECTIVAS (HB)"]=Pe.HB,$e["HORAS CONTRATO"]=(Ne==null?void 0:Ne.horasContrato)||0),$e}),ye=Os.json_to_sheet(he),ce=Os.book_new();Os.book_append_sheet(ce,ye,"Horarios"),B1(ce,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,G]),K=w.useCallback(async()=>{try{m(!0);const he=on,ye=await vDe(r,e,he,L);y(ye.horarios),C(ye.conflictos||[]),_(ye.fuente),!O&&he.length&&j(he[0])}catch(he){console.error("Error al generar horario:",he),alert("No se pudo generar el horario.")}finally{m(!1)}},[r,e,O,L]),Ee=w.useCallback(async()=>{if(!v){alert("No hay un horario generado para guardar.");return}try{m(!0),await FFe(v),alert("Horario guardado exitosamente"),x(v)}catch(he){console.error("Error al guardar horario:",he),alert("Error al guardar el horario")}finally{m(!1)}},[v]),_e=w.useCallback(()=>{y(null),C([]),_(null)},[]),Ce=w.useCallback(async()=>{if(d.filter(ye=>ye.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const ye=[],ce=[];r.forEach(Ne=>{let Pe=Ne.funcionesLectivas||[];Ne.funcionesNoLectivas&&Ne.funcionesNoLectivas.length>0&&Pe.length===0?Pe=Ne.funcionesNoLectivas.map(Ge=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ge.nombre,horas:Ge.horas})):Ne.otraFuncion&&Pe.length===0&&(Pe=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ne.otraFuncion,horas:parseInt(Ne.otraFuncion)||0}]);const{funcionesNoLectivas:Qe,otraFuncion:$e,...et}=Ne,Ke={...et,funcionesLectivas:Pe};if(Ne.id.startsWith("asig_")||Ne.id.startsWith("import_")){const{id:Ge,...nt}=Ke;ce.push(nt)}else ye.push(Ke)});const Ae=[...ye.map(({id:Ne,...Pe})=>Pe),...ce];await TFe(Ae,!0),alert("Horarios guardados exitosamente")}catch(ye){console.error("Error al guardar horarios:",ye),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),de=he=>{const ye=G[he];return ye?ye.errors.length>0?"red":ye.warnings.length>0?"yellow":"green":"gray"},xe=()=>k?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[s.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx(ck,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),s.jsx("button",{onClick:()=>R(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:s.jsx(Oo,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:U.nombre,onChange:he=>H({...U,nombre:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"email",value:U.email,onChange:he=>H({...U,email:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:U.departamento,onChange:he=>H({...U,departamento:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:U.horasContrato,onChange:he=>H({...U,horasContrato:parseInt(he.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:U.perfil,onChange:he=>H({...U,perfil:he.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[s.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),s.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),s.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),s.jsx("button",{onClick:Z,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!U.nombre||!U.email,children:h?s.jsxs(s.Fragment,{children:[s.jsx(Di,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Guardando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(pre,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar"})]})})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gre,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:["Los campos marcados con ",s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[s.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),s.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),s.jsx("div",{className:"relative z-10",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[s.jsx(Io,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),s.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),s.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[s.jsx(eb,{className:"w-4 h-4"}),s.jsx("span",{children:"Ver estadísticas"})]}),s.jsxs("button",{onClick:Ce,disabled:d.some(he=>he.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[s.jsx(gl,{className:"w-4 h-4"}),s.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),s.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[s.jsx(FN,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[s.jsx("div",{className:"flex-1 md:max-w-xs",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(C1,{className:"text-gray-400 w-4 h-4"})}),s.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:Q,onChange:he=>V(he.target.value)})]})}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(wm,{className:"text-gray-400 w-4 h-4"})}),s.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:n.curso,onChange:he=>i(ye=>({...ye,curso:he.target.value})),children:[s.jsx("option",{value:"",children:"Todos los cursos"}),on.map(he=>s.jsx("option",{value:he,children:he},he))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ds,{className:"text-gray-400 w-4 h-4"})}),s.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:n.asignatura,onChange:he=>i(ye=>({...ye,asignatura:he.target.value})),children:[s.jsx("option",{value:"",children:"Todas las asignaturas"}),ln.map(he=>s.jsx("option",{value:he,children:he},he))]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[s.jsxs("button",{onClick:()=>R(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(ck,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),s.jsxs("button",{onClick:M,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(Li,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),s.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[s.jsx(E1,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),s.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:he=>{var ye;return((ye=he.target.files)==null?void 0:ye[0])&&oe(he.target.files[0])}})]}),s.jsxs("button",{onClick:we,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(S_,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),s.jsxs("button",{onClick:()=>B(!0),disabled:h||r.length===0,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-cyan-500 to-sky-600 hover:from-cyan-600 hover:to-sky-700 text-white rounded-lg transition-all duration-200 shadow-sm group disabled:opacity-50",title:"Generar horario semanal automáticamente (IA)",children:[h?s.jsx(Di,{className:"w-5 h-5 animate-spin"}):s.jsx(bA,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Generar horario (IA)"})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[s.jsx(fl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),s.jsxs("button",{onClick:Ce,disabled:d.some(he=>he.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?s.jsx(Di,{className:"w-5 h-5 animate-spin"}):s.jsx(gl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&s.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vc,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),s.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[s.jsx(nA,{className:"w-3 h-3"})," ",d.filter(he=>he.tipo==="error").length," Errores"]}),s.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[s.jsx(Db,{className:"w-3 h-3"})," ",d.filter(he=>he.tipo==="warning").length," Advertencias"]})]})]}),s.jsx("div",{className:"p-5",children:s.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((he,ye)=>s.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${he.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[he.tipo==="error"?s.jsx(nA,{className:"w-5 h-5 shrink-0"}):s.jsx(Db,{className:"w-5 h-5 shrink-0"}),s.jsx("span",{className:"text-sm",children:he.mensaje})]},ye))})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ob,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full min-w-[1000px]",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),s.jsx("span",{children:"Estado"})]})}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Ei,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Docente"})]})}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Ds,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Asignatura"})]})}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(hz,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Func. Lectivas"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[s.jsx(Ac,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Hrs"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:on.length,children:s.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[s.jsx(wm,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Cursos"}),s.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[s.jsx(eb,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"HA/HB"})]})}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:s.jsx("div",{className:"flex items-center justify-center gap-1.5",children:s.jsx("span",{children:"Acciones"})})})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:W.map((he,ye)=>{const ce=G[he.docenteId],Ae=de(he.docenteId),Ne=ye===0||W[ye-1].docenteId!==he.docenteId,Pe=ye===W.length-1||W[ye+1].docenteId!==he.docenteId,Qe=W.filter(Ke=>Ke.docenteId===he.docenteId),$e=Qe.length>1;let et="hover:bg-gray-50 dark:hover:bg-gray-750 ";return $e&&(Ne?et+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":et+="bg-blue-50 dark:bg-blue-900/10 ",Pe&&(et+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),s.jsxs("tr",{className:et,children:[s.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${Ae==="green"?"bg-green-500":Ae==="yellow"?"bg-yellow-500":Ae==="red"?"bg-red-500":"bg-gray-500"}`}),$e&&Ne&&s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:Qe.length})]})}),s.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!$e||Ne?s.jsxs("div",{children:[s.jsx("select",{value:he.docenteId,onChange:Ke=>ie(he.id,"docenteId",Ke.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${$e?"font-medium":""}`,children:(J.length>0?J:e).map(Ke=>s.jsx("option",{value:Ke.id,children:Ke.nombre},Ke.id))}),$e&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[Qe.length," asig."]})]}):s.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),s.jsxs("td",{className:"px-1 py-2",children:[s.jsxs("select",{value:he.asignaturaOModulo||"",onChange:Ke=>ie(he.id,"asignaturaOModulo",Ke.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${$e?"border-blue-300 dark:border-blue-700":""}`,children:[s.jsx("option",{value:"",children:"Seleccionar..."}),ln.map(Ke=>s.jsx("option",{value:Ke,children:Ke},Ke))]}),$e&&!Ne&&s.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),s.jsx("td",{className:"px-1 py-2",children:s.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(he.funcionesLectivas||[]).map(Ke=>s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("input",{type:"text",value:Ke.nombre,onChange:Ge=>ae(he.id,Ke.id,"nombre",Ge.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),s.jsx("input",{type:"number",value:Ke.horas,onChange:Ge=>ae(he.id,Ke.id,"horas",parseInt(Ge.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),s.jsx("button",{onClick:()=>le(he.id,Ke.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:s.jsx(Da,{className:"w-3 h-3"})})]},Ke.id)),!he.funcionesLectivas&&s.jsx("div",{className:"flex gap-1 items-center",children:s.jsx("input",{type:"text",value:he.otraFuncion||"",onChange:Ke=>ie(he.id,"otraFuncion",Ke.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),s.jsxs("button",{onClick:()=>Y(he.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[s.jsx(Li,{className:"w-3 h-3"})," ",s.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),s.jsx("td",{className:"px-1 py-2 text-center",children:s.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:he.horasXAsig||0})}),s.jsx("td",{className:"px-1 py-2",children:s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:on.map(Ke=>s.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ke}),s.jsx("input",{type:"number",min:0,value:he.horasPorCurso[Ke]||"",onChange:Ge=>ne(he.id,Ke,parseInt(Ge.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},Ke))})}),s.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:ce&&s.jsxs("div",{className:"space-y-0",children:[s.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",ce.HA," (",ce.restantesHA>=0?"+":"",ce.restantesHA,")"]}),s.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",ce.HB," (",ce.restantesHB>=0?"+":"",ce.restantesHB,")"]})]})}),s.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("button",{onClick:()=>F(he.docenteId,he.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:s.jsx(Li,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>X(he.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:s.jsx(Da,{className:"w-3.5 h-3.5"})})]})})]},he.id)})})]})})]}),o&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Oo,{})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("nav",{className:"flex -mb-px px-6",children:[s.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),s.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),s.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),s.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),s.jsx("div",{className:"grid gap-4",children:e.map(he=>{const ye=G[he.id],ce=r.filter(Ae=>Ae.docenteId===he.id);return s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:he.nombre}),s.jsx("div",{className:`w-3 h-3 rounded-full ${de(he.id)==="green"?"bg-green-500":de(he.id)==="yellow"?"bg-yellow-500":de(he.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),ye&&s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[he.horasContrato,"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),s.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[ye.sumCursos,"/",ye.HA]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),s.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[ye.sumFunciones,"/",ye.HB]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),s.jsx("span",{className:"ml-1 font-medium",children:ce.length})]})]}),ce.length>0&&s.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[s.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ce.map(Ae=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:Ae.asignaturaOModulo||"Sin asignatura"}),s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[Ae.horasXAsig||0,"h"]})]},Ae.id))})]}),s.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[s.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:on.filter(Ae=>ce.some(Ne=>Ne.horasPorCurso[Ae])).map(Ae=>{const Ne=ce.reduce((Pe,Qe)=>Pe+(Qe.horasPorCurso[Ae]||0),0);return s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:Ae}),s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[Ne,"h"]})]},Ae)})})]})]}),ce.some(Ae=>(Ae.funcionesLectivas||[]).length>0)&&s.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[s.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ce.flatMap(Ae=>(Ae.funcionesLectivas||[]).map(Ne=>({id:`${Ae.id}_${Ne.id}`,nombre:Ne.nombre,horas:Ne.horas}))).map(Ae=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:Ae.nombre||"Sin nombre"}),s.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[Ae.horas,"h"]})]},Ae.id))})]})]})]},he.id)})})]}),c==="cursos"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),s.jsx("div",{className:"grid gap-4",children:on.filter(he=>r.some(ye=>ye.horasPorCurso[he])).map(he=>{const ye=r.filter(Ne=>Ne.horasPorCurso[he]),ce=[];ye.forEach(Ne=>{const Pe=ce.findIndex(Qe=>Qe.id===Ne.docenteId);Pe===-1?ce.push({id:Ne.docenteId,nombre:Ne.docenteNombre,asignaciones:[Ne]}):ce[Pe].asignaciones.push(Ne)});const Ae=ye.reduce((Ne,Pe)=>Ne+(Pe.horasPorCurso[he]||0),0);return s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:he}),s.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",Ae,"h"]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),s.jsx("div",{className:"grid gap-2",children:ce.map(Ne=>s.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:Ne.nombre}),s.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[Ne.asignaciones.reduce((Pe,Qe)=>Pe+(Qe.horasPorCurso[he]||0),0),"h"]})]}),s.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:Ne.asignaciones.filter(Pe=>Pe.horasPorCurso[he]).map(Pe=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:Pe.asignaturaOModulo||"Sin asignatura"}),s.jsxs("span",{children:[Pe.horasPorCurso[he],"h"]})]},Pe.id))})]},Ne.id))})]})]},he)})})]}),c==="funciones"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const he=[];return r.forEach(ye=>{(ye.funcionesLectivas||[]).forEach(ce=>{if(!ce.nombre)return;const Ae=he.find(Ne=>Ne.nombre===ce.nombre);if(!Ae)he.push({nombre:ce.nombre,docentes:[{id:ye.docenteId,nombre:ye.docenteNombre,horas:ce.horas}],totalHoras:ce.horas});else{const Ne=Ae.docentes.find(Pe=>Pe.id===ye.docenteId);Ne?Ne.horas+=ce.horas:Ae.docentes.push({id:ye.docenteId,nombre:ye.docenteNombre,horas:ce.horas}),Ae.totalHoras+=ce.horas}})}),he.sort((ye,ce)=>ce.totalHoras-ye.totalHoras),he.length===0?s.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):s.jsx("div",{className:"grid gap-4",children:he.map((ye,ce)=>s.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:ye.nombre}),s.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",ye.totalHoras,"h"]})]}),s.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),s.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ye.docentes.sort((Ae,Ne)=>Ne.horas-Ae.horas).map(Ae=>s.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsx("span",{children:Ae.nombre}),s.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[Ae.horas,"h"]})]},Ae.id))})]},ce))})})()]}),c==="totales"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[s.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let he=0;return r.forEach(ye=>{ye.horasPorCurso&&Object.values(ye.horasPorCurso).forEach(ce=>typeof ce=="number"&&(he+=ce)),(ye.funcionesLectivas||[]).forEach(ce=>typeof ce.horas=="number"&&(he+=ce.horas))}),he})()}),s.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),s.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),s.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[s.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let he=0;return e.forEach(ye=>{const ce=typeof ye.horasContrato=="number"?ye.horasContrato:0;he+=j2(ce)}),he})()}),s.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),s.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),s.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[s.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((ye,ce)=>{const Ae=typeof ce.horasContrato=="number"?ce.horasContrato:0;return ye+Ae},0)}),s.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),s.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let he=0,ye=0;r.forEach(Pe=>{Pe.horasPorCurso&&Object.values(Pe.horasPorCurso).forEach(Qe=>typeof Qe=="number"&&(he+=Qe)),(Pe.funcionesLectivas||[]).forEach(Qe=>typeof Qe.horas=="number"&&(he+=Qe.horas))}),e.forEach(Pe=>{const Qe=typeof Pe.horasContrato=="number"?Pe.horasContrato:0;ye+=j2(Qe)});const ce=he+ye,Ae=ce>0?Math.round(he/ce*100):0,Ne=ce>0?Math.round(ye/ce*100):0;return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),s.jsxs("span",{className:"font-bold",children:[Ae,"%"]})]}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${Ae}%`}})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),s.jsxs("span",{className:"font-bold",children:[Ne,"%"]})]}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${Ne}%`}})})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[s.jsx("p",{children:s.jsx("strong",{children:"Distribución Objetivo:"})}),s.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),s.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),s.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),s.jsx("div",{className:"mt-2",children:Math.abs(Ae-65)<=5?s.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):s.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),s.jsxs("ul",{className:"space-y-3 text-sm",children:[s.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),s.jsx("span",{className:"font-semibold",children:e.length})]}),s.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),s.jsx("span",{className:"font-semibold",children:r.length})]}),s.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),s.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((he,ye)=>he+(typeof ye.horasContrato=="number"?ye.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),s.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((he,ye)=>s.jsxs("li",{className:"flex items-center gap-1",children:[he.tipo==="error"?"❌":"⚠️",s.jsx("span",{children:he.mensaje})]},ye)),d.length>5&&s.jsxs("li",{className:"italic",children:["Y ",d.length-5," más..."]})]})})]})]})]})]})]})]})]})}),s.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Io,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Generación de Horario Semanal"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"relative",children:s.jsx("select",{className:"pl-3 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm",value:O,onChange:he=>j(he.target.value),children:on.map(he=>s.jsx("option",{value:he,children:he},he))})}),v&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:Ee,disabled:h,className:"px-3 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-lg transition-all duration-200 shadow-sm",children:"Guardar horario"}),s.jsx("button",{onClick:_e,disabled:h,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 text-sm rounded-lg transition-all duration-200",children:"Descartar"})]})]})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[T&&s.jsxs("div",{className:`px-4 py-3 rounded-lg text-sm ${T==="IA"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300"}`,children:["Fuente: ",T==="IA"?"Generado por IA":"Generado por algoritmo (fallback)"]}),N.length>0&&s.jsxs("div",{className:"px-4 py-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 text-sm",children:[s.jsxs("div",{className:"font-medium mb-1",children:["Conflictos detectados (",N.length,"):"]}),s.jsx("ul",{className:"list-disc ml-5 space-y-1",children:N.map((he,ye)=>s.jsx("li",{children:he},ye))})]}),v||g?s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full min-w-[800px] border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:"Bloque"}),yA.map(he=>s.jsx("th",{className:"px-3 py-2 text-center text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:he},he))]})}),s.jsx("tbody",{children:(()=>{const he=ce=>{const[Ae,Ne]=ce.split(":").map(Number);return Ae*60+Ne},ye=[];for(let ce=0;ce<Bs.length;ce++){const Ae=Bs[ce];ye.push({type:"block",label:`Bloque ${Ae.bloque}`,start:Ae.inicio,end:Ae.fin,bloque:Ae.bloque});const Ne=Bs[ce+1];if(Ne&&he(Ne.inicio)-he(Ae.fin)>0){const Qe=Ae.fin==="13:00"&&Ne.inicio==="13:40";ye.push({type:"break",label:Qe?"Almuerzo":"Recreo",start:Ae.fin,end:Ne.inicio})}}return ye.map((ce,Ae)=>{if(ce.type==="break")return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[s.jsxs("td",{className:`px-3 py-2 text-sm font-medium whitespace-nowrap ${ce.label==="Almuerzo"?"text-amber-700":"text-slate-600"}`,children:[ce.label," ",ce.start&&ce.end?`(${ce.start} – ${ce.end})`:""]}),yA.map(Pe=>s.jsx("td",{className:`px-3 py-2 align-top ${ce.label==="Almuerzo"?"bg-amber-50 dark:bg-amber-900/20":"bg-slate-50 dark:bg-slate-800/50"}`},`${Pe}_break_${Ae}`))]},`break_${Ae}`);const Ne=Bs.find(Pe=>Pe.bloque===ce.bloque);return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[s.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300 whitespace-nowrap",children:[ce.bloque,". ",ce.start," - ",ce.end]}),yA.map(Pe=>{var et,Ke,Ge;const Qe=(Ge=(Ke=(et=v||g)==null?void 0:et[Pe])==null?void 0:Ke[String(ce.bloque)])==null?void 0:Ge[O],$e=Pe==="Viernes"&&Ne&&Ne.fin>"13:00";return s.jsx("td",{className:`px-3 py-2 align-top ${$e?"bg-red-50 dark:bg-red-900/20":""}`,title:$e?"No permitido (Viernes > 13:00)":"",children:Qe&&(Qe.asignatura||Qe.profesor)?s.jsxs("div",{className:`p-2 rounded border ${$e?"border-red-300 dark:border-red-700 bg-red-50/60 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750"}`,children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:Qe.asignatura}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:Qe.profesor})]}):s.jsx("div",{className:`h-10 rounded ${$e?"bg-red-50/60 dark:bg-red-900/10 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-dashed border-gray-200 dark:border-gray-700"}`})},`${Pe}_${ce.bloque}`)})]},`block_${ce.bloque}`)})})()})]})}):s.jsx("div",{className:"px-4 py-3 rounded-lg bg-gray-50 dark:bg-gray-750 text-gray-600 dark:text-gray-300 text-sm",children:'Aún no hay un horario guardado ni generado. Usa "Generar horario (IA)" para crear una propuesta.'})]})]}),s.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[s.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(eb,{className:"w-5 h-5"}),s.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),s.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:s.jsx(wm,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",Ck(44),"h, 30h → ",Ck(30),"h)"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:s.jsx(Ob,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:s.jsx(hz,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),s.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",j2(44),"h, 30h → ",j2(30),"h)"]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[s.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),s.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[s.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),s.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),s.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),s.jsx(xe,{}),S&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-scaleIn",children:[s.jsxs("div",{className:"p-5 bg-gradient-to-r from-cyan-500 to-sky-600 text-white flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Reglas para generar horario"}),s.jsx("button",{onClick:()=>B(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",children:s.jsx(Oo,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Máximo de horas de mecánica juntas"}),s.jsx("select",{value:L.maxConsecutivasMecanica,onChange:he=>D(ye=>({...ye,maxConsecutivasMecanica:parseInt(he.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:Array.from({length:10},(he,ye)=>ye+1).map(he=>s.jsx("option",{value:he,children:he},he))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Máximo de horas de plan general juntas"}),s.jsx("select",{value:L.maxConsecutivasPlanGeneral,onChange:he=>D(ye=>({...ye,maxConsecutivasPlanGeneral:parseInt(he.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[1,2,3].map(he=>s.jsx("option",{value:he,children:he},he))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Asignaturas prácticas en horario P.M."}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ubica taller/práctica/laboratorio en bloques desde 13:40"})]}),s.jsx("input",{type:"checkbox",checked:!!L.practicasPM,onChange:he=>D(ye=>({...ye,practicasPM:he.target.checked})),className:"w-5 h-5"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"3º medio sólo horas de plan general"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Para cursos 3º*, restringe a asignaturas de plan general"})]}),s.jsx("input",{type:"checkbox",checked:!!L.terceroSoloPlanGeneral,onChange:he=>D(ye=>({...ye,terceroSoloPlanGeneral:he.target.checked})),className:"w-5 h-5"})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"Cancelar"}),s.jsxs("button",{onClick:async()=>{B(!1),await K()},className:"px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-700 text-white flex items-center gap-2",children:[s.jsx(bA,{className:"w-4 h-4"})," Generar con estas reglas"]})]})]})}),h&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),s.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),s.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),s.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},z_="acciones_pedagogicas",wDe=(e,t)=>{var n,i,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((i=(n=t.creadoTs)==null?void 0:n.toMillis)==null?void 0:i.call(n))??Date.now()};const r=t,a=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:a,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function NDe(){const e=[];try{const t=_t(pt(ot,z_),Gt("creadoTs","desc"));(await _r(t)).docs.forEach(a=>e.push(wDe(a.id,a.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function CDe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:lr.now()};await Yr(pt(ot,z_),t)}async function EDe(e,t){const r=$t(pt(ot,z_),e),a={...t};a.area&&!a.dimension&&(a.dimension=a.area,delete a.area),a.enlaceDocumento&&(a.enlaces=[String(a.enlaceDocumento)],delete a.enlaceDocumento),Array.isArray(a.indicadores)===!1&&typeof a.indicadores=="string"&&(a.indicadores=String(a.indicadores).split(",").map(n=>n.trim()).filter(Boolean)),await Ui(r,a)}async function jDe(e){const t=$t(pt(ot,z_),e);await Ja(t)}function Jne(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Jne(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function fa(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Jne(e))&&(a&&(a+=" "),a+=t);return a}var fT={},AT={},e$;function kDe(){return e$||(e$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(AT)),AT}var hT={},t$;function Zne(){return t$||(t$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(hT)),hT}var mT={},r$;function ese(){return r$||(r$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;return typeof r=="string"||typeof r=="symbol"?r:Object.is((a=r==null?void 0:r.valueOf)==null?void 0:a.call(r),-0)?"-0":String(r)}e.toKey=t}(mT)),mT}var pT={},a$;function X8(){return a$||(a$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],n=r.length;if(n===0)return a;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(a.push(""),i++);i<n;){const u=r[i];l?u==="\\"&&i+1<n?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,a.push(o),o=""):o+=u:u==="["?(c=!0,o&&(a.push(o),o="")):u==="."?o&&(a.push(o),o=""):o+=u,i++}return o&&a.push(o),a}e.toPath=t}(pT)),pT}var n$;function Y8(){return n$||(n$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kDe(),r=Zne(),a=ese(),n=X8();function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,n.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i}(fT)),fT}var gT,s$;function SDe(){return s$||(s$=1,gT=Y8().get),gT}var _De=SDe();const rp=Ml(_De);var xT={exports:{}},an={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i$;function BDe(){if(i$)return an;i$=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,n=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function C(_){if(typeof _=="object"&&_!==null){var O=_.$$typeof;switch(O){case t:switch(_=_.type,_){case c:case u:case a:case i:case n:case f:return _;default:switch(_=_&&_.$$typeof,_){case l:case d:case g:case m:case o:return _;default:return O}}case r:return O}}}function T(_){return C(_)===u}return an.AsyncMode=c,an.ConcurrentMode=u,an.ContextConsumer=l,an.ContextProvider=o,an.Element=t,an.ForwardRef=d,an.Fragment=a,an.Lazy=g,an.Memo=m,an.Portal=r,an.Profiler=i,an.StrictMode=n,an.Suspense=f,an.isAsyncMode=function(_){return T(_)||C(_)===c},an.isConcurrentMode=T,an.isContextConsumer=function(_){return C(_)===l},an.isContextProvider=function(_){return C(_)===o},an.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},an.isForwardRef=function(_){return C(_)===d},an.isFragment=function(_){return C(_)===a},an.isLazy=function(_){return C(_)===g},an.isMemo=function(_){return C(_)===m},an.isPortal=function(_){return C(_)===r},an.isProfiler=function(_){return C(_)===i},an.isStrictMode=function(_){return C(_)===n},an.isSuspense=function(_){return C(_)===f},an.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===a||_===u||_===i||_===n||_===f||_===h||typeof _=="object"&&_!==null&&(_.$$typeof===g||_.$$typeof===m||_.$$typeof===o||_.$$typeof===l||_.$$typeof===d||_.$$typeof===v||_.$$typeof===y||_.$$typeof===N||_.$$typeof===x)},an.typeOf=C,an}var o$;function TDe(){return o$||(o$=1,xT.exports=BDe()),xT.exports}var IDe=TDe(),lo=e=>e===0?0:e>0?1:-1,uu=e=>typeof e=="number"&&e!=+e,cg=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,dr=e=>(typeof e=="number"||e instanceof Number)&&!uu(e),jA=e=>dr(e)||typeof e=="string",ODe=0,Yw=e=>{var t=++ODe;return"".concat(e||"").concat(t)},Ll=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dr(t)&&typeof t!="string")return a;var i;if(cg(t)){if(r==null)return a;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return uu(i)&&(i=a),n&&r!=null&&i>r&&(i=r),i},tse=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},Rv=(e,t)=>dr(e)&&dr(t)?r=>e+r*(t-e):()=>t;function tv(e,t,r){return dr(e)&&dr(t)?e+r*(t-e):t}function FDe(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):rp(a,t))===r)}var Rs=e=>e===null||typeof e>"u",$N=e=>Rs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),DDe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function J8(e){if(typeof e!="string")return!1;var t=DDe;return t.includes(e)}var PDe=["viewBox","children"],l$=["points","pathLength"],vT={svg:PDe,polygon:l$,polyline:l$},Z8=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(n=>{J8(n)&&(a[n]=i=>r[n](r,i))}),a},RDe=(e,t,r)=>a=>(e(t,r,a),null),dx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(n=>{var i=e[n];J8(n)&&typeof i=="function"&&(a||(a={}),a[n]=RDe(i,t,r))}),a},LDe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function rse(e){if(typeof e!="string")return!1;var t=LDe;return t.includes(e)}function yl(e){var t=Object.entries(e).filter(r=>{var[a]=r;return rse(a)});return Object.fromEntries(t)}var c$=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",u$=null,bT=null,ase=e=>{if(e===u$&&Array.isArray(bT))return bT;var t=[];return w.Children.forEach(e,r=>{Rs(r)||(IDe.isFragment(r)?t=t.concat(ase(r.props.children)):t.push(r))}),bT=t,u$=e,t};function GN(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(n=>c$(n)):a=[c$(t)],ase(e).forEach(n=>{var i=rp(n,"type.displayName")||rp(n,"type.name");a.indexOf(i)!==-1&&r.push(n)}),r}var MDe=(e,t,r,a)=>{var n;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(n=a&&(vT==null?void 0:vT[a]))!==null&&n!==void 0?n:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!a&&i.includes(t)||rse(t)),c=!!r&&J8(t);return o||l||c},$a=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(w.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var n={};return Object.keys(a).forEach(i=>{var o;MDe((o=a)===null||o===void 0?void 0:o[i],i,t,r)&&(n[i]=a[i])}),n},UDe=["children","width","height","viewBox","className","style","title","desc"];function NF(){return NF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},NF.apply(null,arguments)}function QDe(e,t){if(e==null)return{};var r,a,n=HDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function HDe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var eL=w.forwardRef((e,t)=>{var{children:r,width:a,height:n,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=QDe(e,UDe),f=i||{width:a,height:n,x:0,y:0},h=fa("recharts-surface",o);return w.createElement("svg",NF({},$a(d,!0,"svg"),{className:h,width:a,height:n,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,u),r)}),zDe=["children","className"];function CF(){return CF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},CF.apply(null,arguments)}function VDe(e,t){if(e==null)return{};var r,a,n=$De(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $De(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hs=w.forwardRef((e,t)=>{var{children:r,className:a}=e,n=VDe(e,zDe),i=fa("recharts-layer",a);return w.createElement("g",CF({className:i},$a(n,!0),{ref:t}),r)}),tL=mZ(),nse=w.createContext(null),GDe=()=>w.useContext(nse);function Un(e){return function(){return e}}const sse=Math.cos,kk=Math.sin,ff=Math.sqrt,Sk=Math.PI,V_=2*Sk,EF=Math.PI,jF=2*EF,Xp=1e-6,qDe=jF-Xp;function ise(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function KDe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ise;const r=10**t;return function(a){this._+=a[0];for(let n=1,i=a.length;n<i;++n)this._+=Math.round(arguments[n]*r)/r+a[n]}}class WDe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ise:KDe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,n){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+n}`}bezierCurveTo(t,r,a,n,i,o){this._append`C${+t},${+r},${+a},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,n,i){if(t=+t,r=+r,a=+a,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,u=n-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Xp)if(!(Math.abs(f*c-u*d)>Xp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=a-o,g=n-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),N=Math.sqrt(h),C=i*Math.tan((EF-Math.acos((x+h-v)/(2*y*N)))/2),T=C/N,_=C/y;Math.abs(T-1)>Xp&&this._append`L${t+T*d},${r+T*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+_*c},${this._y1=r+_*u}`}}arc(t,r,a,n,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(n),c=a*Math.sin(n),u=t+l,d=r+c,f=1^o,h=o?n-i:i-n;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xp||Math.abs(this._y1-d)>Xp)&&this._append`L${u},${d}`,a&&(h<0&&(h=h%jF+jF),h>qDe?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=u},${this._y1=d}`:h>Xp&&this._append`A${a},${a},0,${+(h>=EF)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+n}h${-a}Z`}toString(){return this._}}function rL(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new WDe(t)}function aL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ose(e){this._context=e}ose.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $_(e){return new ose(e)}function lse(e){return e[0]}function cse(e){return e[1]}function use(e,t){var r=Un(!0),a=null,n=$_,i=null,o=rL(l);e=typeof e=="function"?e:e===void 0?lse:Un(e),t=typeof t=="function"?t:t===void 0?cse:Un(t);function l(c){var u,d=(c=aL(c)).length,f,h=!1,m;for(a==null&&(i=n(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Un(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Un(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Un(!!c),l):r},l.curve=function(c){return arguments.length?(n=c,a!=null&&(i=n(a)),l):n},l.context=function(c){return arguments.length?(c==null?a=i=null:i=n(a=c),l):a},l}function zE(e,t,r){var a=null,n=Un(!0),i=null,o=$_,l=null,c=rL(u);e=typeof e=="function"?e:e===void 0?lse:Un(+e),t=typeof t=="function"?t:Un(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?cse:Un(+r);function u(f){var h,m,g,x=(f=aL(f)).length,v,y=!1,N,C=new Array(x),T=new Array(x);for(i==null&&(l=o(N=c())),h=0;h<=x;++h){if(!(h<x&&n(v=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(C[g],T[g]);l.lineEnd(),l.areaEnd()}y&&(C[h]=+e(v,h,f),T[h]=+t(v,h,f),l.point(a?+a(v,h,f):C[h],r?+r(v,h,f):T[h]))}if(N)return l=null,N+""||null}function d(){return use().defined(n).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Un(+f),a=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Un(+f),u):e},u.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Un(+f),u):a},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Un(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Un(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Un(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Un(!!f),u):n},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class dse{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function XDe(e){return new dse(e,!0)}function YDe(e){return new dse(e,!1)}const nL={draw(e,t){const r=ff(t/Sk);e.moveTo(r,0),e.arc(0,0,r,0,V_)}},JDe={draw(e,t){const r=ff(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},fse=ff(1/3),ZDe=fse*2,ePe={draw(e,t){const r=ff(t/ZDe),a=r*fse;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},tPe={draw(e,t){const r=ff(t),a=-r/2;e.rect(a,a,r,r)}},rPe=.8908130915292852,Ase=kk(Sk/10)/kk(7*Sk/10),aPe=kk(V_/10)*Ase,nPe=-sse(V_/10)*Ase,sPe={draw(e,t){const r=ff(t*rPe),a=aPe*r,n=nPe*r;e.moveTo(0,-r),e.lineTo(a,n);for(let i=1;i<5;++i){const o=V_*i/5,l=sse(o),c=kk(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*n,c*a+l*n)}e.closePath()}},yT=ff(3),iPe={draw(e,t){const r=-ff(t/(yT*3));e.moveTo(0,r*2),e.lineTo(-yT*r,-r),e.lineTo(yT*r,-r),e.closePath()}},Uu=-.5,Qu=ff(3)/2,kF=1/ff(12),oPe=(kF/2+1)*3,lPe={draw(e,t){const r=ff(t/oPe),a=r/2,n=r*kF,i=a,o=r*kF+r,l=-i,c=o;e.moveTo(a,n),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Uu*a-Qu*n,Qu*a+Uu*n),e.lineTo(Uu*i-Qu*o,Qu*i+Uu*o),e.lineTo(Uu*l-Qu*c,Qu*l+Uu*c),e.lineTo(Uu*a+Qu*n,Uu*n-Qu*a),e.lineTo(Uu*i+Qu*o,Uu*o-Qu*i),e.lineTo(Uu*l+Qu*c,Uu*c-Qu*l),e.closePath()}};function cPe(e,t){let r=null,a=rL(n);e=typeof e=="function"?e:Un(e||nL),t=typeof t=="function"?t:Un(t===void 0?64:+t);function n(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:Un(i),n):e},n.size=function(i){return arguments.length?(t=typeof i=="function"?i:Un(+i),n):t},n.context=function(i){return arguments.length?(r=i??null,n):r},n}function _k(){}function Bk(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function hse(e){this._context=e}hse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uPe(e){return new hse(e)}function mse(e){this._context=e}mse.prototype={areaStart:_k,areaEnd:_k,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Bk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dPe(e){return new mse(e)}function pse(e){this._context=e}pse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Bk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fPe(e){return new pse(e)}function gse(e){this._context=e}gse.prototype={areaStart:_k,areaEnd:_k,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function APe(e){return new gse(e)}function d$(e){return e<0?-1:1}function f$(e,t,r){var a=e._x1-e._x0,n=t-e._x1,i=(e._y1-e._y0)/(a||n<0&&-0),o=(r-e._y1)/(n||a<0&&-0),l=(i*n+o*a)/(a+n);return(d$(i)+d$(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function A$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function wT(e,t,r){var a=e._x0,n=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,n+l*t,i-l,o-l*r,i,o)}function Tk(e){this._context=e}Tk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wT(this,this._t0,A$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wT(this,A$(this,r=f$(this,e,t)),r);break;default:wT(this,this._t0,r=f$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function xse(e){this._context=new vse(e)}(xse.prototype=Object.create(Tk.prototype)).point=function(e,t){Tk.prototype.point.call(this,t,e)};function vse(e){this._context=e}vse.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,n,i){this._context.bezierCurveTo(t,e,a,r,i,n)}};function hPe(e){return new Tk(e)}function mPe(e){return new xse(e)}function bse(e){this._context=e}bse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=h$(e),n=h$(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],n[0][i],a[1][i],n[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function h$(e){var t,r=e.length-1,a,n=new Array(r),i=new Array(r),o=new Array(r);for(n[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=n[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(n[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)n[t]=(o[t]-n[t+1])/i[t];for(i[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-n[t+1];return[n,i]}function pPe(e){return new bse(e)}function G_(e,t){this._context=e,this._t=t}G_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function gPe(e){return new G_(e,.5)}function xPe(e){return new G_(e,0)}function vPe(e){return new G_(e,1)}function Qb(e,t){if((o=e.length)>1)for(var r=1,a,n,i=e[t[0]],o,l=i.length;r<o;++r)for(n=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}function SF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function bPe(e,t){return e[t]}function yPe(e){const t=[];return t.key=e,t}function wPe(){var e=Un([]),t=SF,r=Qb,a=bPe;function n(i){var o=Array.from(e.apply(this,arguments),yPe),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(f,o[l].key,u,i)]).data=f;for(l=0,d=aL(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Un(Array.from(i)),n):e},n.value=function(i){return arguments.length?(a=typeof i=="function"?i:Un(+i),n):a},n.order=function(i){return arguments.length?(t=i==null?SF:typeof i=="function"?i:Un(Array.from(i)),n):t},n.offset=function(i){return arguments.length?(r=i??Qb,n):r},n}function NPe(e,t){if((a=e.length)>0){for(var r,a,n=0,i=e[0].length,o;n<i;++n){for(o=r=0;r<a;++r)o+=e[r][n][1]||0;if(o)for(r=0;r<a;++r)e[r][n][1]/=o}Qb(e,t)}}function CPe(e,t){if((n=e.length)>0){for(var r=0,a=e[t[0]],n,i=a.length;r<i;++r){for(var o=0,l=0;o<n;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Qb(e,t)}}function EPe(e,t){if(!(!((o=e.length)>0)||!((i=(n=e[t[0]]).length)>0))){for(var r=0,a=1,n,i,o;a<i;++a){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[a][1]||0,h=d[a-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[a][1]||0,y=x[a-1][1]||0;m+=v-y}c+=f,u+=m*f}n[a-1][1]+=n[a-1][0]=r,c&&(r-=u/c)}n[a-1][1]+=n[a-1][0]=r,Qb(e,t)}}var jPe=["type","size","sizeType"];function _F(){return _F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_F.apply(null,arguments)}function m$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function p$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m$(Object(r),!0).forEach(function(a){kPe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kPe(e,t,r){return(t=SPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SPe(e){var t=_Pe(e,"string");return typeof t=="symbol"?t:t+""}function _Pe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BPe(e,t){if(e==null)return{};var r,a,n=TPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TPe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var yse={symbolCircle:nL,symbolCross:JDe,symbolDiamond:ePe,symbolSquare:tPe,symbolStar:sPe,symbolTriangle:iPe,symbolWye:lPe},IPe=Math.PI/180,OPe=e=>{var t="symbol".concat($N(e));return yse[t]||nL},FPe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*IPe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},DPe=(e,t)=>{yse["symbol".concat($N(e))]=t},sL=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,n=BPe(e,jPe),i=p$(p$({},n),{},{type:t,size:r,sizeType:a}),o=()=>{var f=OPe(t),h=cPe().type(f).size(FPe(r,a,t));return h()},{className:l,cx:c,cy:u}=i,d=$a(i,!0);return c===+c&&u===+u&&r===+r?w.createElement("path",_F({},d,{className:fa("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};sL.registerSymbol=DPe;function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},BF.apply(null,arguments)}function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function PPe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(a){iL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iL(e,t,r){return(t=RPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RPe(e){var t=LPe(e,"string");return typeof t=="symbol"?t:t+""}function LPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hu=32;class oL extends w.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,n=Hu/2,i=Hu/6,o=Hu/3,l=t.inactive?a:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:Hu,y2:n,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(Hu,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Hu/8,"h").concat(Hu,"v").concat(Hu*3/4,"h").concat(-Hu,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var u=PPe({},t);return delete u.legendIcon,w.cloneElement(t.legendIcon,u)}return w.createElement(sL,{fill:l,cx:n,cy:n,size:Hu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:n,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:Hu,height:Hu},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||n,m=fa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?i:d.color,x=h?h(d.value,d,f):d.value;return w.createElement("li",BF({className:m,style:c,key:"legend-item-".concat(f)},dx(this.props,d,f)),w.createElement(eL,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}iL(oL,"displayName","Legend");iL(oL,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var NT={},CT={},x$;function MPe(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const n=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=a(o);n.has(l)||n.set(l,o)}return Array.from(n.values())}e.uniqBy=t}(CT)),CT}var ET={},v$;function q_(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(ET)),ET}var jT={},kT={},ST={},b$;function UPe(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(ST)),ST}var y$;function lL(){return y$||(y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UPe();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(kT)),kT}var _T={},w$;function QPe(){return w$||(w$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(_T)),_T}var N$;function HPe(){return N$||(N$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lL(),r=QPe();function a(n){return r.isObjectLike(n)&&t.isArrayLike(n)}e.isArrayLikeObject=a}(jT)),jT}var BT={},TT={},C$;function zPe(){return C$||(C$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y8();function r(a){return function(n){return t.get(n,a)}}e.property=r}(TT)),TT}var IT={},OT={},FT={},DT={},E$;function wse(){return E$||(E$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(DT)),DT}var PT={},j$;function Nse(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(PT)),PT}var RT={},k$;function cL(){return k$||(k$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(RT)),RT}var S$;function VPe(){return S$||(S$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uL(),r=wse(),a=Nse(),n=cL();function i(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function g(x,v,y,N,C,T){const _=m(x,v,y,N,C,T);return _!==void 0?!!_:o(x,v,g,T)},new Map)}function o(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,g);case"function":return Object.keys(h).length>0?o(f,{...h},m,g):n.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:n.eq(f,h)}}function l(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!a.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let N=!1;for(let C=0;C<f.length;C++){if(x.has(C))continue;const T=f[C];let _=!1;if(m(T,y,v,f,h,g)&&(_=!0),_){x.add(C),N=!0;break}}if(!N)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=i,e.isSetMatch=d}(FT)),FT}var _$;function uL(){return _$||(_$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VPe();function r(a,n){return t.isMatchWith(a,n,()=>{})}e.isMatch=r}(OT)),OT}var LT={},MT={},UT={},B$;function Cse(){return B$||(B$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(UT)),UT}var QT={},T$;function dL(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(QT)),QT}var HT={},I$;function fL(){return I$||(I$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",N="[object Uint16Array]",C="[object Uint32Array]",T="[object BigUint64Array]",_="[object Int8Array]",O="[object Int16Array]",j="[object Int32Array]",S="[object BigInt64Array]",B="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=T,e.booleanTag=n,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=O,e.int32ArrayTag=j,e.int8ArrayTag=_,e.mapTag=c,e.numberTag=a,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=C,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(HT)),HT}var zT={},O$;function $Pe(){return O$||(O$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(zT)),zT}var F$;function Ese(){return F$||(F$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cse(),r=dL(),a=fL(),n=Nse(),i=$Pe();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(n.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,N]of d)v.set(y,l(N,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],N=Object.getOwnPropertyDescriptor(d,y);(N==null||N.writable)&&(d[y]=l(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(MT)),MT}var D$;function GPe(){return D$||(D$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ese();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(LT)),LT}var P$;function qPe(){return P$||(P$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uL(),r=GPe();function a(n){return n=r.cloneDeep(n),i=>t.isMatch(i,n)}e.matches=a}(IT)),IT}var VT={},$T={},GT={},R$;function KPe(){return R$||(R$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ese(),r=fL();function a(n,i){return t.cloneDeepWith(n,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new n.constructor(n==null?void 0:n.valueOf());return t.copyProperties(f,n),f}case r.argumentsTag:{const f={};return t.copyProperties(f,n),f.length=n.length,f[Symbol.iterator]=n[Symbol.iterator],f}default:return}})}e.cloneDeepWith=a}(GT)),GT}var L$;function WPe(){return L$||(L$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KPe();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}($T)),$T}var qT={},KT={},M$;function jse(){return M$||(M$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,n=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<n;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(KT)),KT}var WT={},U$;function XPe(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dL();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}(WT)),WT}var Q$;function YPe(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zne(),r=jse(),a=XPe(),n=X8();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=n.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||a.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i}(qT)),qT}var H$;function JPe(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uL(),r=ese(),a=WPe(),n=Y8(),i=YPe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=a.cloneDeep(c),function(u){const d=n.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(VT)),VT}var z$;function AL(){return z$||(z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q_(),r=zPe(),a=qPe(),n=JPe();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(BT)),BT}var V$;function ZPe(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MPe(),r=q_(),a=HPe(),n=AL();function i(o,l=r.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),n.iteratee(l)):[]}e.uniqBy=i}(NT)),NT}var XT,$$;function eRe(){return $$||($$=1,XT=ZPe().uniqBy),XT}var tRe=eRe();const G$=Ml(tRe);function kse(e,t,r){return t===!0?G$(e,r):typeof t=="function"?G$(e,t):e}var YT={exports:{}},JT={},ZT={exports:{}},eI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q$;function rRe(){if(q$)return eI;q$=1;var e=c1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,n=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,h){var m=h(),g=a({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return i(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),n(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return eI.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,eI}var K$;function aRe(){return K$||(K$=1,ZT.exports=rRe()),ZT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W$;function nRe(){if(W$)return JT;W$=1;var e=c1(),t=aRe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var a=typeof Object.is=="function"?Object.is:r,n=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return JT.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=i(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(O){if(!N){if(N=!0,C=O,O=h(O),m!==void 0&&x.hasValue){var j=x.value;if(m(j,O))return T=j}return T=O}if(j=T,a(C,O))return j;var S=h(O);return m!==void 0&&m(j,S)?(C=O,j):(C=O,T=S)}var N=!1,C,T,_=f===void 0?null:f;return[function(){return y(d())},_===null?void 0:function(){return y(_())}]},[d,f,h,m]);var v=n(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},JT}var X$;function sRe(){return X$||(X$=1,YT.exports=nRe()),YT.exports}var Sse=sRe();const iRe=Ml(Sse);var hL=w.createContext(null),oRe=e=>e,Xn=()=>{var e=w.useContext(hL);return e?e.store.dispatch:oRe},o5=()=>{},lRe=()=>o5,cRe=(e,t)=>e===t;function sr(e){var t=w.useContext(hL);return Sse.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:lRe,t?t.store.getState:o5,t?t.store.getState:o5,t?e:o5,cRe)}function uRe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function dRe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function fRe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var Y$=e=>Array.isArray(e)?e:[e];function ARe(e){const t=Array.isArray(e[0])?e[0]:e;return fRe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function hRe(e,t){const r=[],{length:a}=e;for(let n=0;n<a;n++)r.push(e[n].apply(null,t));return r}var mRe=class{constructor(e){this.value=e}deref(){return this.value}},pRe=typeof WeakRef<"u"?WeakRef:mRe,gRe=0,J$=1;function VE(){return{s:gRe,v:void 0,o:null,p:null}}function _se(e,t={}){let r=VE();const{resultEqualityCheck:a}=t;let n,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=VE(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=VE(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===J$)d=l.v;else if(d=e.apply(null,arguments),i++,a){const h=((f=n==null?void 0:n.deref)==null?void 0:f.call(n))??n;h!=null&&a(h,d)&&(d=h,i!==0&&i--),n=typeof d=="object"&&d!==null||typeof d=="function"?new pRe(d):d}return u.s=J$,u.v=d,d}return o.clearCache=()=>{r=VE(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function xRe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...n)=>{let i=0,o=0,l,c={},u=n.pop();typeof u=="object"&&(c=u,u=n.pop()),uRe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=_se,argsMemoizeOptions:g=[]}=d,x=Y$(h),v=Y$(g),y=ARe(n),N=f(function(){return i++,u.apply(null,arguments)},...x),C=m(function(){o++;const _=hRe(y,arguments);return l=N.apply(null,_),l},...v);return Object.assign(C,{resultFunc:u,memoizedResultFunc:N,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(a,{withTypes:()=>a}),a}var gt=xRe(_se),vRe=Object.assign((e,t=gt)=>{dRe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>vRe}),tI={},rI={},aI={},Z$;function bRe(){return Z$||(Z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,n,i)=>{if(a!==n){const o=t(a),l=t(n);if(o===l&&o===0){if(a<n)return i==="desc"?1:-1;if(a>n)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(aI)),aI}var nI={},sI={},eG;function Bse(){return eG||(eG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(sI)),sI}var tG;function yRe(){return tG||(tG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bse(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=n}(nI)),nI}var rG;function wRe(){return rG||(rG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bRe(),r=yRe(),a=X8();function n(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:a.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=n}(rI)),rI}var iI={},aG;function NRe(){return aG||(aG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const n=[],i=Math.floor(a),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):n.push(d)}};return o(r,0),n}e.flatten=t}(iI)),iI}var oI={},nG;function Tse(){return nG||(nG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jse(),r=lL(),a=wse(),n=cL();function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?n.eq(c[l],o):!1}e.isIterateeCall=i}(oI)),oI}var sG;function CRe(){return sG||(sG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wRe(),r=NRe(),a=Tse();function n(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=n}(tI)),tI}var lI,iG;function ERe(){return iG||(iG=1,lI=CRe().sortBy),lI}var jRe=ERe();const K_=Ml(jRe);var Ise=e=>e.legend.settings,kRe=e=>e.legend.size,SRe=e=>e.legend.payload,_Re=gt([SRe,Ise],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?K_(a,r):a});function BRe(){return sr(_Re)}var $E=1;function Ose(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),a=w.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>$E||Math.abs(o.left-t.left)>$E||Math.abs(o.top-t.top)>$E||Math.abs(o.width-t.width)>$E)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function No(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var TRe=typeof Symbol=="function"&&Symbol.observable||"@@observable",oG=TRe,cI=()=>Math.random().toString(36).substring(7).split("").join("."),IRe={INIT:`@@redux/INIT${cI()}`,REPLACE:`@@redux/REPLACE${cI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cI()}`},Ik=IRe;function mL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Fse(e,t,r){if(typeof e!="function")throw new Error(No(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(No(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(No(1));return r(Fse)(e,t)}let a=e,n=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(No(3));return n}function f(v){if(typeof v!="function")throw new Error(No(4));if(c)throw new Error(No(5));let y=!0;u();const N=l++;return o.set(N,v),function(){if(y){if(c)throw new Error(No(6));y=!1,u(),o.delete(N),i=null}}}function h(v){if(!mL(v))throw new Error(No(7));if(typeof v.type>"u")throw new Error(No(8));if(typeof v.type!="string")throw new Error(No(17));if(c)throw new Error(No(9));try{c=!0,n=a(n,v)}finally{c=!1}return(i=o).forEach(N=>{N()}),v}function m(v){if(typeof v!="function")throw new Error(No(10));a=v,h({type:Ik.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(No(11));function N(){const T=y;T.next&&T.next(d())}return N(),{unsubscribe:v(N)}},[oG](){return this}}}return h({type:Ik.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[oG]:g}}function ORe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ik.INIT})>"u")throw new Error(No(12));if(typeof r(void 0,{type:Ik.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(No(13))})}function Dse(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let n;try{ORe(r)}catch(i){n=i}return function(o={},l){if(n)throw n;let c=!1;const u={};for(let d=0;d<a.length;d++){const f=a[d],h=r[f],m=o[f],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(No(14));u[f]=g,c=c||g!==m}return c=c||a.length!==Object.keys(o).length,c?u:o}}function Ok(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function FRe(...e){return t=>(r,a)=>{const n=t(r,a);let i=()=>{throw new Error(No(15))};const o={getState:n.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=Ok(...l)(n.dispatch),{...n,dispatch:i}}}function Pse(e){return mL(e)&&"type"in e&&typeof e.type=="string"}var Rse=Symbol.for("immer-nothing"),lG=Symbol.for("immer-draftable"),du=Symbol.for("immer-state");function Hd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Hb=Object.getPrototypeOf;function qg(e){return!!e&&!!e[du]}function Kh(e){var t;return e?Lse(e)||Array.isArray(e)||!!e[lG]||!!((t=e.constructor)!=null&&t[lG])||X_(e)||Y_(e):!1}var DRe=Object.prototype.constructor.toString();function Lse(e){if(!e||typeof e!="object")return!1;const t=Hb(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===DRe}function Fk(e,t){W_(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function W_(e){const t=e[du];return t?t.type_:Array.isArray(e)?1:X_(e)?2:Y_(e)?3:0}function TF(e,t){return W_(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Mse(e,t,r){const a=W_(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function PRe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function X_(e){return e instanceof Map}function Y_(e){return e instanceof Set}function Yp(e){return e.copy_||e.base_}function IF(e,t){if(X_(e))return new Map(e);if(Y_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Lse(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[du];let n=Reflect.ownKeys(a);for(let i=0;i<n.length;i++){const o=n[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Hb(e),a)}else{const a=Hb(e);if(a!==null&&r)return{...e};const n=Object.create(a);return Object.assign(n,e)}}function pL(e,t=!1){return J_(e)||qg(e)||!Kh(e)||(W_(e)>1&&(e.set=e.add=e.clear=e.delete=RRe),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>pL(a,!0))),e}function RRe(){Hd(2)}function J_(e){return Object.isFrozen(e)}var LRe={};function Kg(e){const t=LRe[e];return t||Hd(0,e),t}var Jw;function Use(){return Jw}function MRe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cG(e,t){t&&(Kg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function OF(e){FF(e),e.drafts_.forEach(URe),e.drafts_=null}function FF(e){e===Jw&&(Jw=e.parent_)}function uG(e){return Jw=MRe(Jw,e)}function URe(e){const t=e[du];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function dG(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[du].modified_&&(OF(t),Hd(4)),Kh(e)&&(e=Dk(t,e),t.parent_||Pk(t,e)),t.patches_&&Kg("Patches").generateReplacementPatches_(r[du].base_,e,t.patches_,t.inversePatches_)):e=Dk(t,r,[]),OF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Rse?e:void 0}function Dk(e,t,r){if(J_(t))return t;const a=t[du];if(!a)return Fk(t,(n,i)=>fG(e,a,t,n,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Pk(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const n=a.copy_;let i=n,o=!1;a.type_===3&&(i=new Set(n),n.clear(),o=!0),Fk(i,(l,c)=>fG(e,a,n,l,c,r,o)),Pk(e,n,!1),r&&e.patches_&&Kg("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function fG(e,t,r,a,n,i,o){if(qg(n)){const l=i&&t&&t.type_!==3&&!TF(t.assigned_,a)?i.concat(a):void 0,c=Dk(e,n,l);if(Mse(r,a,c),qg(c))e.canAutoFreeze_=!1;else return}else o&&r.add(n);if(Kh(n)&&!J_(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Dk(e,n),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&Pk(e,n)}}function Pk(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pL(t,r)}function QRe(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:Use(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,i=gL;r&&(n=[a],i=Zw);const{revoke:o,proxy:l}=Proxy.revocable(n,i);return a.draft_=l,a.revoke_=o,l}var gL={get(e,t){if(t===du)return e;const r=Yp(e);if(!TF(r,t))return HRe(e,r,t);const a=r[t];return e.finalized_||!Kh(a)?a:a===uI(e.base_,t)?(dI(e),e.copy_[t]=PF(a,e)):a},has(e,t){return t in Yp(e)},ownKeys(e){return Reflect.ownKeys(Yp(e))},set(e,t,r){const a=Qse(Yp(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const n=uI(Yp(e),t),i=n==null?void 0:n[du];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(PRe(r,n)&&(r!==void 0||TF(e.base_,t)))return!0;dI(e),DF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return uI(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,dI(e),DF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Yp(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Hd(11)},getPrototypeOf(e){return Hb(e.base_)},setPrototypeOf(){Hd(12)}},Zw={};Fk(gL,(e,t)=>{Zw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Zw.deleteProperty=function(e,t){return Zw.set.call(this,e,t,void 0)};Zw.set=function(e,t,r){return gL.set.call(this,e[0],t,r,e[0])};function uI(e,t){const r=e[du];return(r?Yp(r):e)[t]}function HRe(e,t,r){var n;const a=Qse(t,r);return a?"value"in a?a.value:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function Qse(e,t){if(!(t in e))return;let r=Hb(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Hb(r)}}function DF(e){e.modified_||(e.modified_=!0,e.parent_&&DF(e.parent_))}function dI(e){e.copy_||(e.copy_=IF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zRe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Hd(6),a!==void 0&&typeof a!="function"&&Hd(7);let n;if(Kh(t)){const i=uG(this),o=PF(t,void 0);let l=!0;try{n=r(o),l=!1}finally{l?OF(i):FF(i)}return cG(i,a),dG(n,i)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===Rse&&(n=void 0),this.autoFreeze_&&pL(n,!0),a){const i=[],o=[];Kg("Patches").generateReplacementPatches_(t,n,i,o),a(i,o)}return n}else Hd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,n;return[this.produce(t,r,(o,l)=>{a=o,n=l}),a,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Kh(e)||Hd(8),qg(e)&&(e=Ph(e));const t=uG(this),r=PF(e,void 0);return r[du].isManual_=!0,FF(t),r}finishDraft(e,t){const r=e&&e[du];(!r||!r.isManual_)&&Hd(9);const{scope_:a}=r;return cG(a,t),dG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const a=Kg("Patches").applyPatches_;return qg(e)?a(e,t):this.produce(e,n=>a(n,t))}};function PF(e,t){const r=X_(e)?Kg("MapSet").proxyMap_(e,t):Y_(e)?Kg("MapSet").proxySet_(e,t):QRe(e,t);return(t?t.scope_:Use()).drafts_.push(r),r}function Ph(e){return qg(e)||Hd(10,e),Hse(e)}function Hse(e){if(!Kh(e)||J_(e))return e;const t=e[du];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=IF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=IF(e,!0);return Fk(r,(a,n)=>{Mse(r,a,Hse(n))}),t&&(t.finalized_=!1),r}var fu=new zRe,zse=fu.produce;fu.produceWithPatches.bind(fu);fu.setAutoFreeze.bind(fu);fu.setUseStrictShallowCopy.bind(fu);fu.applyPatches.bind(fu);fu.createDraft.bind(fu);fu.finishDraft.bind(fu);function Vse(e){return({dispatch:r,getState:a})=>n=>i=>typeof i=="function"?i(r,a,e):n(i)}var VRe=Vse(),$Re=Vse,GRe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ok:Ok.apply(null,arguments)};function ld(e,t){function r(...a){if(t){let n=t(...a);if(!n)throw new Error(ou(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>Pse(a)&&a.type===e,r}var $se=class S2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,S2.prototype)}static get[Symbol.species](){return S2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new S2(...t[0].concat(this)):new S2(...t.concat(this))}};function AG(e){return Kh(e)?zse(e,()=>{}):e}function GE(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function qRe(e){return typeof e=="boolean"}var KRe=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let o=new $se;return r&&(qRe(r)?o.push(VRe):o.push($Re(r.extraArgument))),o},WRe="RTK_autoBatch",hG=e=>t=>{setTimeout(t,e)},XRe=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let n=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hG(10):e.type==="callback"?e.queueNotification:hG(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const f=()=>n&&d(),h=a.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return n=!((f=d==null?void 0:d.meta)!=null&&f[WRe]),i=!n,i&&(o||(o=!0,c(u))),a.dispatch(d)}finally{n=!0}}})},YRe=e=>function(r){const{autoBatch:a=!0}=r??{};let n=new $se(e);return a&&n.push(XRe(typeof a=="object"?a:void 0)),n};function JRe(e){const t=KRe(),{reducer:r=void 0,middleware:a,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(mL(r))l=Dse(r);else throw new Error(ou(1));let c;typeof a=="function"?c=a(t):c=t();let u=Ok;n&&(u=GRe({trace:!1,...typeof n=="object"&&n}));const d=FRe(...c),f=YRe(d);let h=typeof o=="function"?o(f):f();const m=u(...h);return Fse(l,i,m)}function Gse(e){const t={},r=[];let a;const n={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(ou(28));if(l in t)throw new Error(ou(29));return t[l]=o,n},addMatcher(i,o){return r.push({matcher:i,reducer:o}),n},addDefaultCase(i){return a=i,n}};return e(n),[t,r,a]}function ZRe(e){return typeof e=="function"}function e8e(e,t){let[r,a,n]=Gse(t),i;if(ZRe(e))i=()=>AG(e());else{const l=AG(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[n]),u.reduce((d,f)=>{if(f)if(qg(d)){const m=f(d,c);return m===void 0?d:m}else{if(Kh(d))return zse(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=i,o}var t8e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",r8e=(e=21)=>{let t="",r=e;for(;r--;)t+=t8e[Math.random()*64|0];return t},a8e=Symbol.for("rtk-slice-createasyncthunk");function n8e(e,t){return`${e}/${t}`}function s8e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[a8e];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(ou(11));const l=(typeof n.reducers=="function"?n.reducers(o8e()):n.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,_){const O=typeof T=="string"?T:T.type;if(!O)throw new Error(ou(12));if(O in u.sliceCaseReducersByType)throw new Error(ou(13));return u.sliceCaseReducersByType[O]=_,d},addMatcher(T,_){return u.sliceMatchers.push({matcher:T,reducer:_}),d},exposeAction(T,_){return u.actionCreators[T]=_,d},exposeCaseReducer(T,_){return u.sliceCaseReducersByName[T]=_,d}};c.forEach(T=>{const _=l[T],O={reducerName:T,type:n8e(i,T),createNotation:typeof n.reducers=="function"};c8e(_)?d8e(O,_,d,t):l8e(O,_,d)});function f(){const[T={},_=[],O=void 0]=typeof n.extraReducers=="function"?Gse(n.extraReducers):[n.extraReducers],j={...T,...u.sliceCaseReducersByType};return e8e(n.initialState,S=>{for(let B in j)S.addCase(B,j[B]);for(let B of u.sliceMatchers)S.addMatcher(B.matcher,B.reducer);for(let B of _)S.addMatcher(B.matcher,B.reducer);O&&S.addDefaultCase(O)})}const h=T=>T,m=new Map,g=new WeakMap;let x;function v(T,_){return x||(x=f()),x(T,_)}function y(){return x||(x=f()),x.getInitialState()}function N(T,_=!1){function O(S){let B=S[T];return typeof B>"u"&&_&&(B=GE(g,O,y)),B}function j(S=h){const B=GE(m,_,()=>new WeakMap);return GE(B,S,()=>{const L={};for(const[D,k]of Object.entries(n.selectors??{}))L[D]=i8e(k,S,()=>GE(g,S,y),_);return L})}return{reducerPath:T,getSelectors:j,get selectors(){return j(O)},selectSlice:O}}const C={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...N(o),injectInto(T,{reducerPath:_,...O}={}){const j=_??o;return T.inject({reducerPath:j,reducer:v},O),{...C,...N(j,!0)}}};return C}}function i8e(e,t,r,a){function n(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return n.unwrapped=e,n}var mu=s8e();function o8e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function l8e({type:e,reducerName:t,createNotation:r},a,n){let i,o;if("reducer"in a){if(r&&!u8e(a))throw new Error(ou(17));i=a.reducer,o=a.prepare}else i=a;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?ld(e,o):ld(e))}function c8e(e){return e._reducerDefinitionType==="asyncThunk"}function u8e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function d8e({type:e,reducerName:t},r,a,n){if(!n)throw new Error(ou(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=n(e,i,d);a.exposeAction(t,f),o&&a.addCase(f.fulfilled,o),l&&a.addCase(f.pending,l),c&&a.addCase(f.rejected,c),u&&a.addMatcher(f.settled,u),a.exposeCaseReducer(t,{fulfilled:o||qE,pending:l||qE,rejected:c||qE,settled:u||qE})}function qE(){}var f8e="task",qse="listener",Kse="completed",xL="cancelled",A8e=`task-${xL}`,h8e=`task-${Kse}`,RF=`${qse}-${xL}`,m8e=`${qse}-${Kse}`,Z_=class{constructor(e){yB(this,"name","TaskAbortError");yB(this,"message");this.code=e,this.message=`${f8e} ${xL} (reason: ${e})`}},vL=(e,t)=>{if(typeof e!="function")throw new TypeError(ou(32))},Rk=()=>{},Wse=(e,t=Rk)=>(e.catch(t),e),Xse=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Eg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},jg=e=>{if(e.aborted){const{reason:t}=e;throw new Z_(t)}};function Yse(e,t){let r=Rk;return new Promise((a,n)=>{const i=()=>n(new Z_(e.reason));if(e.aborted){i();return}r=Xse(e,i),t.finally(()=>r()).then(a,n)}).finally(()=>{r=Rk})}var p8e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Z_?"cancelled":"rejected",error:r}}finally{t==null||t()}},Lk=e=>t=>Wse(Yse(e,t).then(r=>(jg(e),r))),Jse=e=>{const t=Lk(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:lb}=Object,mG={},e4="listenerMiddleware",g8e=(e,t)=>{const r=a=>Xse(e,()=>Eg(a,e.reason));return(a,n)=>{vL(a);const i=new AbortController;r(i);const o=p8e(async()=>{jg(e),jg(i.signal);const l=await a({pause:Lk(i.signal),delay:Jse(i.signal),signal:i.signal});return jg(i.signal),l},()=>Eg(i,h8e));return n!=null&&n.autoJoin&&t.push(o.catch(Rk)),{result:Lk(e)(o),cancel(){Eg(i,A8e)}}}},x8e=(e,t)=>{const r=async(a,n)=>{jg(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:a,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];n!=null&&l.push(new Promise(c=>setTimeout(c,n,null)));try{const c=await Yse(t,Promise.race(l));return jg(t),c}finally{i()}};return(a,n)=>Wse(r(a,n))},Zse=e=>{let{type:t,actionCreator:r,matcher:a,predicate:n,effect:i}=e;if(t)n=ld(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error(ou(21));return vL(i),{predicate:n,type:t,effect:i}},eie=lb(e=>{const{type:t,predicate:r,effect:a}=Zse(e);return{id:r8e(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ou(22))}}},{withTypes:()=>eie}),pG=(e,t)=>{const{type:r,effect:a,predicate:n}=Zse(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===n)&&i.effect===a)},LF=e=>{e.pending.forEach(t=>{Eg(t,RF)})},v8e=e=>()=>{e.forEach(LF),e.clear()},gG=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},tie=lb(ld(`${e4}/add`),{withTypes:()=>tie}),b8e=ld(`${e4}/removeAll`),rie=lb(ld(`${e4}/remove`),{withTypes:()=>rie}),y8e=(...e)=>{console.error(`${e4}/error`,...e)},qN=(e={})=>{const t=new Map,{extra:r,onError:a=y8e}=e;vL(a);const n=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&LF(d)}),i=d=>{const f=pG(t,d)??eie(d);return n(f)};lb(i,{withTypes:()=>i});const o=d=>{const f=pG(t,d);return f&&(f.unsubscribe(),d.cancelActive&&LF(f)),!!f};lb(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const g=new AbortController,x=x8e(i,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,lb({},h,{getOriginalState:m,condition:(y,N)=>x(y,N).then(Boolean),take:x,delay:Jse(g.signal),pause:Lk(g.signal),extra:r,signal:g.signal,fork:g8e(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,N,C)=>{y!==g&&(Eg(y,RF),C.delete(y))})},cancel:()=>{Eg(g,RF),d.pending.delete(g)},throwIfCancelled:()=>{jg(g.signal)}})))}catch(y){y instanceof Z_||gG(a,y,{raisedBy:"effect"})}finally{await Promise.all(v),Eg(g,m8e),d.pending.delete(g)}},c=v8e(t);return{middleware:d=>f=>h=>{if(!Pse(h))return f(h);if(tie.match(h))return i(h.payload);if(b8e.match(h)){c();return}if(rie.match(h))return o(h.payload);let m=d.getState();const g=()=>{if(m===mG)throw new Error(ou(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const N of y){let C=!1;try{C=N.predicate(h,v,m)}catch(T){C=!1,gG(a,T,{raisedBy:"predicate"})}C&&l(N,h,d,g)}}}finally{m=mG}return x},startListening:i,stopListening:o,clearListeners:c}};function ou(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var w8e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},aie=mu({name:"chartLayout",initialState:w8e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:N8e,setLayout:C8e,setChartSize:E8e,setScale:j8e}=aie.actions,k8e=aie.reducer;function xG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function vG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xG(Object(r),!0).forEach(function(a){S8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function S8e(e,t,r){return(t=_8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _8e(e){var t=B8e(e,"string");return typeof t=="symbol"?t:t+""}function B8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mk=Math.PI/180,T8e=e=>e*180/Math.PI,Ya=(e,t,r,a)=>({x:e+Math.cos(-Mk*a)*r,y:t+Math.sin(-Mk*a)*r}),nie=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},I8e=(e,t)=>{var{x:r,y:a}=e,{x:n,y:i}=t;return Math.sqrt((r-n)**2+(a-i)**2)},O8e=(e,t)=>{var{x:r,y:a}=e,{cx:n,cy:i}=t,o=I8e({x:r,y:a},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-n)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:T8e(c),angleInRadian:c}},F8e=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),n=Math.floor(r/360),i=Math.min(a,n);return{startAngle:t-i*360,endAngle:r-i*360}},D8e=(e,t)=>{var{startAngle:r,endAngle:a}=t,n=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(n,i);return e+o*360},P8e=(e,t)=>{var{x:r,y:a}=e,{radius:n,angle:i}=O8e({x:r,y:a},t),{innerRadius:o,outerRadius:l}=t;if(n<o||n>l||n===0)return null;var{startAngle:c,endAngle:u}=F8e(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?vG(vG({},t),{},{radius:n,angle:D8e(d,t)}):null},sie=e=>!w.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function iie(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bG(Object(r),!0).forEach(function(a){R8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function R8e(e,t,r){return(t=L8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L8e(e){var t=M8e(e,"string");return typeof t=="symbol"?t:t+""}function M8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t,r){return Rs(e)||Rs(t)?r:jA(t)?rp(e,t,r):typeof t=="function"?t(e):r}var U8e=(e,t,r,a,n)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(lo(d-u)!==lo(f-d)){var m=[];if(lo(f-d)===lo(n[1]-n[0])){h=f;var g=d+n[1]-n[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+n[1]-n[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),N=Math.max(u,f);if(e>(y+d)/2&&e<=(N+d)/2){({index:o}=r[c]);break}}}else if(t){for(var C=0;C<l;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<l-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===l-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:o}=t[C]);break}}return o},Q8e=(e,t,r)=>{if(t&&r){var{width:a,height:n}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&dr(e[i]))return Yu(Yu({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&dr(e[o]))return Yu(Yu({},e),{},{[o]:e[o]+(n||0)})}return e},mp=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",oie=(e,t,r,a)=>{if(a)return e.map(l=>l.coordinate);var n,i,o=e.map(l=>(l.coordinate===t&&(n=!0),l.coordinate===r&&(i=!0),l.coordinate));return n||o.push(t),i||o.push(r),o},lie=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:n,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=n==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&i&&i.length>=2?lo(i[0]-i[1])*2*x:x,f||h){var v=(f||h||[]).map((y,N)=>{var C=a?a.indexOf(y):y;return{coordinate:o(C)+x,value:y,offset:x,index:N}});return v.filter(y=>!uu(y.coordinate))}return c&&u?u.map((y,N)=>({coordinate:o(y)+x,value:y,index:N,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,N)=>({coordinate:o(y)+x,value:y,offset:x,index:N})):o.domain().map((y,N)=>({coordinate:o(y)+x,value:a?a[y]:y,index:N,offset:x}))},yG=1e-4,H8e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),n=Math.min(a[0],a[1])-yG,i=Math.max(a[0],a[1])+yG,o=e(t[0]),l=e(t[r-1]);(o<n||o>i||l<n||l>i)&&e.domain([t[0],t[r-1]])}},z8e=(e,t)=>{if(!t||t.length!==2||!dr(t[0])||!dr(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!dr(e[0])||e[0]<r)&&(n[0]=r),(!dr(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<r&&(n[1]=r),n},V8e=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,i=0,o=0;o<t;++o){var l=uu(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=n,e[o][r][1]=n+l,n=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},$8e=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,i=0;i<t;++i){var o=uu(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=n,e[i][r][1]=n+o,n=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},G8e={sign:V8e,expand:NPe,none:Qb,silhouette:CPe,wiggle:EPe,positive:$8e},q8e=(e,t,r)=>{var a=G8e[r],n=wPe().keys(t).value((i,o)=>+Hn(i,o,0)).order(SF).offset(a);return n(e)};function K8e(e){return e==null?void 0:String(e)}var wG=e=>{var{axis:t,ticks:r,offset:a,bandSize:n,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+a:null;var l=Hn(i,t.dataKey,t.scale.domain()[o]);return Rs(l)?null:t.scale(l)-n/2+a},W8e=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return a<=0&&n>=0?0:n<0?n:a}return r[0]},X8e=e=>{var t=e.flat(2).filter(dr);return[Math.min(...t),Math.max(...t)]},Y8e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],J8e=(e,t,r)=>{if(e!=null)return Y8e(Object.keys(e).reduce((a,n)=>{var i=e[n],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=iie(u,t,r),f=X8e(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},NG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eN=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var n=K_(t,d=>d.coordinate),i=1/0,o=1,l=n.length;o<l;o++){var c=n[o],u=n[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function EG(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:n,name:i}=e;return Yu(Yu({},t),{},{dataKey:r,payload:a,value:n,name:i})}function T1(e,t){if(e)return String(e);if(typeof t=="string")return t}function Z8e(e,t,r,a,n){if(r==="horizontal"||r==="vertical"){var i=e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height;return i?{x:e,y:t}:null}return a?P8e({x:e,y:t},a):null}var eLe=(e,t,r,a)=>{var n=t.find(u=>u&&u.index===r);if(n){if(e==="horizontal")return{x:n.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:n.coordinate};if(e==="centric"){var i=n.coordinate,{radius:o}=a;return Yu(Yu(Yu({},a),Ya(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=n.coordinate,{angle:c}=a;return Yu(Yu(Yu({},a),Ya(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},tLe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,f0=e=>e.layout.width,A0=e=>e.layout.height,rLe=e=>e.layout.scale,cie=e=>e.layout.margin,bL=gt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),yL=gt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),uie="data-recharts-item-index",die="data-recharts-item-data-key",t4=60;function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(a){aLe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aLe(e,t,r){return(t=nLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nLe(e){var t=sLe(e,"string");return typeof t=="symbol"?t:t+""}function sLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iLe=e=>e.brush.height,Qi=gt([f0,A0,cie,iLe,bL,yL,Ise,kRe],(e,t,r,a,n,i,o,l)=>{var c=i.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:t4;return em(em({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=n.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?em(em({},g),{},{[v]:rp(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=em(em({},u),c),f=d.bottom;d.bottom+=a,d=Q8e(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return em(em({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),oLe=gt(Qi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),fie=gt(f0,A0,(e,t)=>({x:0,y:0,width:e,height:t})),lLe=w.createContext(null),Cc=()=>w.useContext(lLe)!=null,r4=e=>e.brush,a4=gt([r4,Qi,cie],(e,t,r)=>({height:e.height,x:dr(e.x)?e.x:t.left,y:dr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:dr(e.width)?e.width:t.width})),wL=()=>{var e,t=Cc(),r=sr(oLe),a=sr(a4),n=(e=sr(r4))===null||e===void 0?void 0:e.padding;return!t||!a||!n?r:{width:a.width-n.left-n.right,height:a.height-n.top-n.bottom,x:n.left,y:n.top}},cLe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Aie=()=>{var e;return(e=sr(Qi))!==null&&e!==void 0?e:cLe},NL=()=>sr(f0),CL=()=>sr(A0),uLe={top:0,right:0,bottom:0,left:0},dLe=()=>{var e;return(e=sr(t=>t.layout.margin))!==null&&e!==void 0?e:uLe},Ea=e=>e.layout.layoutType,EL=()=>sr(Ea),fLe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hie=mu({name:"legend",initialState:fLe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Ph(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:kG,setLegendSettings:ALe,addLegendPayload:mie,removeLegendPayload:pie}=hie.actions,hLe=hie.reducer,mLe=["contextPayload"];function MF(){return MF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},MF.apply(null,arguments)}function SG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function zb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SG(Object(r),!0).forEach(function(a){jL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jL(e,t,r){return(t=pLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pLe(e){var t=gLe(e,"string");return typeof t=="symbol"?t:t+""}function gLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xLe(e,t){if(e==null)return{};var r,a,n=vLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vLe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function bLe(e){return e.value}function yLe(e){var{contextPayload:t}=e,r=xLe(e,mLe),a=kse(t,e.payloadUniqBy,bLe),n=zb(zb({},r),{},{payload:a});return w.isValidElement(e.content)?w.cloneElement(e.content,n):typeof e.content=="function"?w.createElement(e.content,n):w.createElement(oL,n)}function wLe(e,t,r,a,n,i){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((a||0)-i.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((n||0)-i.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),zb(zb({},u),d)}function NLe(e){var t=Xn();return w.useEffect(()=>{t(ALe(e))},[t,e]),null}function CLe(e){var t=Xn();return w.useEffect(()=>(t(kG(e)),()=>{t(kG({width:0,height:0}))}),[t,e]),null}function ELe(e){var t=BRe(),r=GDe(),a=dLe(),{width:n,height:i,wrapperStyle:o,portal:l}=e,[c,u]=Ose([t]),d=NL(),f=CL(),h=d-(a.left||0)-(a.right||0),m=fx.getWidthOrHeight(e.layout,i,n,h),g=l?o:zb(zb({position:"absolute",width:(m==null?void 0:m.width)||n||"auto",height:(m==null?void 0:m.height)||i||"auto"},wLe(o,e,a,d,f,c)),o),x=l??r;if(x==null)return null;var v=w.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},w.createElement(NLe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(CLe,{width:c.width,height:c.height}),w.createElement(yLe,MF({},e,m,{margin:a,chartWidth:d,chartHeight:f,contextPayload:t})));return tL.createPortal(v,x)}class fx extends w.PureComponent{static getWidthOrHeight(t,r,a,n){return t==="vertical"&&dr(r)?{height:r}:t==="horizontal"?{width:a||n}:null}render(){return w.createElement(ELe,this.props)}}jL(fx,"displayName","Legend");jL(fx,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},UF.apply(null,arguments)}function _G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function fI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_G(Object(r),!0).forEach(function(a){jLe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jLe(e,t,r){return(t=kLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kLe(e){var t=SLe(e,"string");return typeof t=="symbol"?t:t+""}function SLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Le(e){return Array.isArray(e)&&jA(e[0])&&jA(e[1])?e.join(" ~ "):e}var BLe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:n={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var _={padding:0,margin:0},O=(l?K_(i,l):i).map((j,S)=>{if(j.type==="none")return null;var B=j.formatter||o||_Le,{value:L,name:D}=j,k=L,R=D;if(B){var U=B(L,D,j,S,i);if(Array.isArray(U))[k,R]=U;else if(U!=null)k=U;else return null}var H=fI({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},a);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:H},jA(R)?w.createElement("span",{className:"recharts-tooltip-item-name"},R):null,jA(R)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},k),w.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:_},O)}return null},g=fI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=fI({margin:0},n),v=!Rs(d),y=v?d:"",N=fa("recharts-default-tooltip",c),C=fa("recharts-tooltip-label",u);v&&f&&i!==void 0&&i!==null&&(y=f(d,i));var T=h?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",UF({className:N,style:g},T),w.createElement("p",{className:C,style:x},w.isValidElement(y)?y:"".concat(y)),m())},My="recharts-tooltip-wrapper",TLe={visibility:"hidden"};function ILe(e){var{coordinate:t,translateX:r,translateY:a}=e;return fa(My,{["".concat(My,"-right")]:dr(r)&&t&&dr(t.x)&&r>=t.x,["".concat(My,"-left")]:dr(r)&&t&&dr(t.x)&&r<t.x,["".concat(My,"-bottom")]:dr(a)&&t&&dr(t.y)&&a>=t.y,["".concat(My,"-top")]:dr(a)&&t&&dr(t.y)&&a<t.y})}function BG(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&dr(i[a]))return i[a];var d=r[a]-l-(n>0?n:0),f=r[a]+n;if(t[a])return o[a]?d:f;var h=c[a];if(h==null)return 0;if(o[a]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function OLe(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function FLe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=BG({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=BG({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=OLe({translateX:d,translateY:f,useTranslate3d:l})):u=TLe,{cssProperties:u,cssClasses:ILe({translateX:d,translateY:f,coordinate:r})}}function TG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TG(Object(r),!0).forEach(function(a){QF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QF(e,t,r){return(t=DLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DLe(e){var t=PLe(e,"string");return typeof t=="symbol"?t:t+""}function PLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RLe extends w.PureComponent{constructor(){super(...arguments),QF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),QF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:n,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:N,cssProperties:C}=FLe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),T=y?{}:KE(KE({transition:c&&t?"transform ".concat(a,"ms ").concat(n):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),_=KE(KE({},T),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:_,ref:v},i)}}var LLe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ax={isSsr:LLe()},gie=()=>sr(e=>e.rootProps.accessibilityLayer);function Au(e){return Number.isFinite(e)}function Vb(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function HF(){return HF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},HF.apply(null,arguments)}function IG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function OG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IG(Object(r),!0).forEach(function(a){MLe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MLe(e,t,r){return(t=ULe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ULe(e){var t=QLe(e,"string");return typeof t=="symbol"?t:t+""}function QLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FG={curveBasisClosed:dPe,curveBasisOpen:fPe,curveBasis:uPe,curveBumpX:XDe,curveBumpY:YDe,curveLinearClosed:APe,curveLinear:$_,curveMonotoneX:hPe,curveMonotoneY:mPe,curveNatural:pPe,curveStep:gPe,curveStepAfter:vPe,curveStepBefore:xPe},WE=e=>Au(e.x)&&Au(e.y),Uy=e=>e.x,Qy=e=>e.y,HLe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($N(e));return(r==="curveMonotone"||r==="curveBump")&&t?FG["".concat(r).concat(t==="vertical"?"Y":"X")]:FG[r]||$_},zLe=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:n,connectNulls:i=!1}=e,o=HLe(t,n),l=i?r.filter(WE):r,c;if(Array.isArray(a)){var u=i?a.filter(f=>WE(f)):a,d=l.map((f,h)=>OG(OG({},f),{},{base:u[h]}));return n==="vertical"?c=zE().y(Qy).x1(Uy).x0(f=>f.base.x):c=zE().x(Uy).y1(Qy).y0(f=>f.base.y),c.defined(WE).curve(o),c(d)}return n==="vertical"&&dr(a)?c=zE().y(Qy).x1(Uy).x0(a):dr(a)?c=zE().x(Uy).y1(Qy).y0(a):c=use().x(Uy).y(Qy),c.defined(WE).curve(o),c(l)},xie=e=>{var{className:t,points:r,path:a,pathRef:n}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?zLe(e):a;return w.createElement("path",HF({},yl(e),Z8(e),{className:fa("recharts-curve",t),d:i===null?void 0:i,ref:n}))},VLe=["x","y","top","left","width","height","className"];function zF(){return zF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zF.apply(null,arguments)}function DG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function $Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DG(Object(r),!0).forEach(function(a){GLe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function GLe(e,t,r){return(t=qLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qLe(e){var t=KLe(e,"string");return typeof t=="symbol"?t:t+""}function KLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WLe(e,t){if(e==null)return{};var r,a,n=XLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XLe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var YLe=(e,t,r,a,n,i)=>"M".concat(e,",").concat(n,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),JLe=e=>{var{x:t=0,y:r=0,top:a=0,left:n=0,width:i=0,height:o=0,className:l}=e,c=WLe(e,VLe),u=$Le({x:t,y:r,top:a,left:n,width:i,height:o},c);return!dr(t)||!dr(r)||!dr(i)||!dr(o)||!dr(a)||!dr(n)?null:w.createElement("path",zF({},$a(u,!0),{className:fa("recharts-cross",l),d:YLe(t,r,i,o,a,n)}))};function ZLe(e,t,r,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-n:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-n,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function PG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function eMe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PG(Object(r),!0).forEach(function(a){tMe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tMe(e,t,r){return(t=rMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rMe(e){var t=aMe(e,"string");return typeof t=="symbol"?t:t+""}function aMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dd(e,t){var r=eMe({},e),a=t,n=Object.keys(t),i=n.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),r);return i}var AI={},hI={},mI={},RG;function nMe(){return RG||(RG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(mI)),mI}var LG;function sMe(){return LG||(LG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nMe(),r=Cse(),a=dL(),n=fL(),i=cL();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=a.getTag(u),g=a.getTag(d);if(m===n.argumentsTag&&(m=n.objectTag),g===n.argumentsTag&&(g=n.objectTag),m!==g)return!1;switch(m){case n.stringTag:return u.toString()===d.toString();case n.numberTag:{const y=u.valueOf(),N=d.valueOf();return i.eq(y,N)}case n.booleanTag:case n.dateTag:case n.symbolTag:return Object.is(u.valueOf(),d.valueOf());case n.regexpTag:return u.source===d.source&&u.flags===d.flags;case n.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case n.mapTag:{if(u.size!==d.size)return!1;for(const[y,N]of u.entries())if(!d.has(y)||!l(N,d.get(y),y,u,d,f,h))return!1;return!0}case n.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),N=Array.from(d.values());for(let C=0;C<y.length;C++){const T=y[C],_=N.findIndex(O=>l(T,O,void 0,u,d,f,h));if(_===-1)return!1;N.splice(_,1)}return!0}case n.arrayTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:case n.bigUint64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.bigInt64ArrayTag:case n.float32ArrayTag:case n.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,h))return!1;return!0}case n.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case n.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case n.errorTag:return u.name===d.name&&u.message===d.message;case n.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const N=[...Object.keys(u),...r.getSymbols(u)],C=[...Object.keys(d),...r.getSymbols(d)];if(N.length!==C.length)return!1;for(let T=0;T<N.length;T++){const _=N[T],O=u[_];if(!Object.hasOwn(d,_))return!1;const j=d[_];if(!l(O,j,_,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(hI)),hI}var pI={},MG;function iMe(){return MG||(MG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(pI)),pI}var UG;function oMe(){return UG||(UG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sMe(),r=iMe();function a(n,i){return t.isEqualWith(n,i,r.noop)}e.isEqual=a}(AI)),AI}var gI,QG;function lMe(){return QG||(QG=1,gI=oMe().isEqual),gI}var cMe=lMe();const uMe=Ml(cMe);var Uk=1e-4,vie=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bie=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),HG=(e,t)=>r=>{var a=vie(e,t);return bie(a,r)},dMe=(e,t)=>r=>{var a=vie(e,t),n=[...a.map((i,o)=>i*o).slice(1),0];return bie(n,r)},zG=function(){for(var t,r,a,n,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,r,n]=[0,0,1,1];break;case"ease":[t,a,r,n]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,n]=[.42,0,1,1];break;case"ease-out":[t,a,r,n]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,n]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,r,n]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,a,r,n]=o);var u=HG(t,r),d=HG(a,n),f=dMe(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var N=u(v)-x,C=f(v);if(Math.abs(N-x)<Uk||C<Uk)return d(v);v=h(v-N/C)}return d(v)};return m.isStepper=!1,m},fMe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:n=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*a,f=c+(u-d)*n/1e3,h=c*n/1e3+o;return Math.abs(h-l)<Uk&&Math.abs(f)<Uk?[l,0]:[h,f]};return i.isStepper=!0,i.dt=n,i},yie=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return zG(e);case"spring":return fMe();default:if(e.split("(")[0]==="cubic-bezier")return zG(e)}return typeof e=="function"?e:null};function VG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function $G(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VG(Object(r),!0).forEach(function(a){AMe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AMe(e,t,r){return(t=hMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hMe(e){var t=mMe(e,"string");return typeof t=="symbol"?t:t+""}function mMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pMe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gMe=(e,t,r)=>e.map(a=>"".concat(pMe(a)," ").concat(t,"ms ").concat(r)).join(","),xMe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(n=>a.includes(n))),tN=(e,t)=>Object.keys(t).reduce((r,a)=>$G($G({},r),{},{[a]:e(a,t[a])}),{});function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(a){vMe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vMe(e,t,r){return(t=bMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bMe(e){var t=yMe(e,"string");return typeof t=="symbol"?t:t+""}function yMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qk=(e,t,r)=>e+(t-e)*r,VF=e=>{var{from:t,to:r}=e;return t!==r},wie=(e,t,r)=>{var a=tN((n,i)=>{if(VF(i)){var[o,l]=e(i.from,i.to,i.velocity);return ko(ko({},i),{},{from:o,velocity:l})}return i},t);return r<1?tN((n,i)=>VF(i)?ko(ko({},i),{},{velocity:Qk(i.velocity,a[n].velocity,r),from:Qk(i.from,a[n].from,r)}):i,t):wie(e,a,r-1)};function wMe(e,t,r,a,n,i){var o,l=a.reduce((h,m)=>ko(ko({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>tN((h,m)=>m.from,l),u=()=>!Object.values(l).filter(VF).length,d=null,f=h=>{o||(o=h);var m=h-o,g=m/r.dt;l=wie(r,l,g),n(ko(ko(ko({},e),t),c())),o=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function NMe(e,t,r,a,n,i,o){var l=null,c=n.reduce((f,h)=>ko(ko({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/a,m=tN((x,v)=>Qk(...v,r(h)),c);if(i(ko(ko(ko({},e),t),m)),h<1)l=o.setTimeout(d);else{var g=tN((x,v)=>Qk(...v,r(1)),c);i(ko(ko(ko({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Nie=(e,t,r,a,n,i)=>{var o=xMe(e,t);return r.isStepper===!0?wMe(e,t,r,o,n,i):NMe(e,t,r,a,o,n,i)};function CMe(e){var t,r=()=>null,a=!1,n=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){n=e.setTimeout(i.bind(null,u),c);return}i(c),n=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,n&&(n(),n=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class EMe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),n=null,i=o=>{o-a>=r?t(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function jMe(){return CMe(new EMe)}var kMe=w.createContext(jMe);function Cie(e,t){var r=w.useContext(kMe);return w.useMemo(()=>t??r(e),[e,t,r])}var SMe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function $F(){return $F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$F.apply(null,arguments)}function _Me(e,t){if(e==null)return{};var r,a,n=BMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BMe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function qG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qG(Object(r),!0).forEach(function(a){ug(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ug(e,t,r){return(t=TMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TMe(e){var t=IMe(e,"string");return typeof t=="symbol"?t:t+""}function IMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kL extends w.PureComponent{constructor(t,r){super(t,r),ug(this,"mounted",!1),ug(this,"manager",void 0),ug(this,"stopJSAnimation",null),ug(this,"unSubscribe",null);var{isActive:a,attributeName:n,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:n?{[n]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:n,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!r){var u={style:n?{[n]:o}:o};this.state&&c&&(n&&c[n]!==o||!n&&c!==o)&&this.setState(u);return}if(!(uMe(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?l:t.to;if(this.state&&c){var h={style:n?{[n]:f}:f};(n&&c[n]!==f||!n&&c!==f)&&this.setState(h)}this.runAnimation(tm(tm({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:n,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Nie(r,a,yie(i),n,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,n,l])}runAnimation(t){var{begin:r,duration:a,attributeName:n,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=n?{[n]:i}:i,f=gMe(Object.keys(d),a,o);this.manager.start([l,r,tm(tm({},d),{},{transition:f}),a,c])}render(){var t=this.props,{children:r,begin:a,duration:n,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=_Me(t,SMe),v=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||n<=0)return r;var N=C=>{var{style:T={},className:_}=C.props,O=w.cloneElement(C,tm(tm({},x),{},{style:tm(tm({},T),y),className:_}));return O};return v===1?N(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,C=>N(C)))}}ug(kL,"displayName","Animate");ug(kL,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Hk(e){var t,r=Cie((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return w.createElement(kL,$F({},e,{animationManager:r}))}function zk(){return zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zk.apply(null,arguments)}var KG=(e,t,r,a,n)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),o=a>=0?1:-1,l=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0,u;if(i>0&&n instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=n[f]>i?i:n[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+a-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+a)),u+="L ".concat(e+l*d[3],",").concat(t+a),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*d[3])),u+="Z"}else if(i>0&&n===+n&&n>0){var m=Math.min(i,n);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+a-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+a,`
            L `).concat(e+l*m,",").concat(t+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return u},OMe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Eie=e=>{var t=dd(e,OMe),r=w.useRef(null),[a,n]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&n(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=fa("recharts-rectangle",d);return x?w.createElement(Hk,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:h,animationEasing:f,isActive:x},y=>{var{width:N,height:C,x:T,y:_}=y;return w.createElement(Hk,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},w.createElement("path",zk({},$a(t,!0),{className:v,d:KG(T,_,N,C,u),ref:r})))}):w.createElement("path",zk({},$a(t,!0),{className:v,d:KG(i,o,l,c,u)}))};function jie(e){var{cx:t,cy:r,radius:a,startAngle:n,endAngle:i}=e,o=Ya(t,r,a,n),l=Ya(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:n,endAngle:i}}function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},GF.apply(null,arguments)}var FMe=(e,t)=>{var r=lo(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},XE=e=>{var{cx:t,cy:r,radius:a,angle:n,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+a,d=Math.asin(l/u)/Mk,f=c?n:n+i*d,h=Ya(t,r,u,f),m=Ya(t,r,a,f),g=c?n-i*d:n,x=Ya(t,r,u*Math.cos(d*Mk),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},kie=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:i,endAngle:o}=e,l=FMe(i,o),c=i+l,u=Ya(t,r,n,i),d=Ya(t,r,n,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var h=Ya(t,r,a,i),m=Ya(t,r,a,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},DMe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=lo(u-c),{circleTangency:f,lineTangency:h,theta:m}=XE({cx:t,cy:r,radius:n,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=XE({cx:t,cy:r,radius:n,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):kie({cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:c,endAngle:u});var N="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var{circleTangency:C,lineTangency:T,theta:_}=XE({cx:t,cy:r,radius:a,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:O,lineTangency:j,theta:S}=XE({cx:t,cy:r,radius:a,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),B=l?Math.abs(c-u):Math.abs(c-u)-_-S;if(B<0&&i===0)return"".concat(N,"L").concat(t,",").concat(r,"Z");N+="L".concat(j.x,",").concat(j.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else N+="L".concat(t,",").concat(r,"Z");return N},PMe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sie=e=>{var t=dd(e,PMe),{cx:r,cy:a,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<n||u===d)return null;var h=fa("recharts-sector",f),m=i-n,g=Ll(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=DMe({cx:r,cy:a,innerRadius:n,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=kie({cx:r,cy:a,innerRadius:n,outerRadius:i,startAngle:u,endAngle:d}),w.createElement("path",GF({},$a(t,!0),{className:h,d:x}))};function RMe(e,t,r){var a,n,i,o;if(e==="horizontal")a=t.x,i=a,n=r.top,o=r.top+r.height;else if(e==="vertical")n=t.y,o=n,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Ya(l,c,u,f),m=Ya(l,c,d,f);a=h.x,n=h.y,i=m.x,o=m.y}else return jie(t);return[{x:a,y:n},{x:i,y:o}]}var xI={},vI={},bI={},WG;function LMe(){return WG||(WG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bse();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(bI)),bI}var XG;function MMe(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LMe();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(vI)),vI}var YG;function UMe(){return YG||(YG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tse(),r=MMe();function a(n,i,o){o&&typeof o!="number"&&t.isIterateeCall(n,i,o)&&(i=o=void 0),n=r.toFinite(n),i===void 0?(i=n,n=0):i=r.toFinite(i),o=o===void 0?n<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-n)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=n,n+=o;return c}e.range=a}(xI)),xI}var yI,JG;function QMe(){return JG||(JG=1,yI=UMe().range),yI}var HMe=QMe();const _ie=Ml(HMe);function Pm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zMe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SL(e){let t,r,a;e.length!==2?(t=Pm,r=(l,c)=>Pm(e(l),c),a=(l,c)=>e(l)-c):(t=e===Pm||e===zMe?e:VMe,r=e,a=e);function n(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=n(l,c,u,d-1);return f>u&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:n,center:o,right:i}}function VMe(){return 0}function Bie(e){return e===null?NaN:+e}function*$Me(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const GMe=SL(Pm),KN=GMe.right;SL(Bie).center;class ZG extends Map{constructor(t,r=WMe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,n]of t)this.set(a,n)}get(t){return super.get(eq(this,t))}has(t){return super.has(eq(this,t))}set(t,r){return super.set(qMe(this,t),r)}delete(t){return super.delete(KMe(this,t))}}function eq({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function qMe({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function KMe({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function WMe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XMe(e=Pm){if(e===Pm)return Tie;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function Tie(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YMe=Math.sqrt(50),JMe=Math.sqrt(10),ZMe=Math.sqrt(2);function Vk(e,t,r){const a=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(a)),i=a/Math.pow(10,n),o=i>=YMe?10:i>=JMe?5:i>=ZMe?2:1;let l,c,u;return n<0?(u=Math.pow(10,-n)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,n)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Vk(e,t,r*2):[l,c,u]}function qF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[n,i,o]=a?Vk(t,e,r):Vk(e,t,r);if(!(i>=n))return[];const l=i-n+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(n+u)/-o;else for(let u=0;u<l;++u)c[u]=(n+u)*o;return c}function KF(e,t,r){return t=+t,e=+e,r=+r,Vk(e,t,r)[2]}function WF(e,t,r){t=+t,e=+e,r=+r;const a=t<e,n=a?KF(t,e,r):KF(e,t,r);return(a?-1:1)*(n<0?1/-n:n)}function tq(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function rq(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function Iie(e,t,r=0,a=1/0,n){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(n=n===void 0?Tie:XMe(n);a>r;){if(a-r>600){const c=a-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(a,Math.floor(t+(c-u)*f/c+h));Iie(e,t,m,g,n)}const i=e[t];let o=r,l=a;for(Hy(e,r,t),n(e[a],i)>0&&Hy(e,r,a);o<l;){for(Hy(e,o,l),++o,--l;n(e[o],i)<0;)++o;for(;n(e[l],i)>0;)--l}n(e[r],i)===0?Hy(e,r,l):(++l,Hy(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Hy(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function e7e(e,t,r){if(e=Float64Array.from($Me(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return rq(e);if(t>=1)return tq(e);var a,n=(a-1)*t,i=Math.floor(n),o=tq(Iie(e,i).subarray(0,i+1)),l=rq(e.subarray(i+1));return o+(l-o)*(n-i)}}function t7e(e,t,r=Bie){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,n=(a-1)*t,i=Math.floor(n),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(n-i)}}function r7e(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(n);++a<n;)i[a]=e+a*r;return i}function fd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function h0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const XF=Symbol("implicit");function n4(){var e=new ZG,t=[],r=[],a=XF;function n(i){let o=e.get(i);if(o===void 0){if(a!==XF)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return n.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ZG;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return n},n.range=function(i){return arguments.length?(r=Array.from(i),n):r.slice()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return n4(t,r).unknown(a)},fd.apply(n,arguments),n}function _L(){var e=n4().unknown(void 0),t=e.domain,r=e.range,a=0,n=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=n<a,g=m?n:a,x=m?a:n;i=(x-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(x-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=r7e(h).map(function(y){return g+i*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([a,n]=h,a=+a,n=+n,f()):[a,n]},e.rangeRound=function(h){return[a,n]=h,a=+a,n=+n,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return _L(t(),[a,n]).round(l).paddingInner(c).paddingOuter(u).align(d)},fd.apply(f(),arguments)}function Oie(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Oie(t())},e}function a7e(){return Oie(_L.apply(null,arguments).paddingInner(1))}function BL(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Fie(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function WN(){}var rN=.7,$k=1/rN,cb="\\s*([+-]?\\d+)\\s*",aN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",n7e=/^#([0-9a-f]{3,8})$/,s7e=new RegExp(`^rgb\\(${cb},${cb},${cb}\\)$`),i7e=new RegExp(`^rgb\\(${wA},${wA},${wA}\\)$`),o7e=new RegExp(`^rgba\\(${cb},${cb},${cb},${aN}\\)$`),l7e=new RegExp(`^rgba\\(${wA},${wA},${wA},${aN}\\)$`),c7e=new RegExp(`^hsl\\(${aN},${wA},${wA}\\)$`),u7e=new RegExp(`^hsla\\(${aN},${wA},${wA},${aN}\\)$`),aq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};BL(WN,Wg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nq,formatHex:nq,formatHex8:d7e,formatHsl:f7e,formatRgb:sq,toString:sq});function nq(){return this.rgb().formatHex()}function d7e(){return this.rgb().formatHex8()}function f7e(){return Die(this).formatHsl()}function sq(){return this.rgb().formatRgb()}function Wg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=n7e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iq(t):r===3?new gc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?YE(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?YE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=s7e.exec(e))?new gc(t[1],t[2],t[3],1):(t=i7e.exec(e))?new gc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=o7e.exec(e))?YE(t[1],t[2],t[3],t[4]):(t=l7e.exec(e))?YE(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=c7e.exec(e))?cq(t[1],t[2]/100,t[3]/100,1):(t=u7e.exec(e))?cq(t[1],t[2]/100,t[3]/100,t[4]):aq.hasOwnProperty(e)?iq(aq[e]):e==="transparent"?new gc(NaN,NaN,NaN,0):null}function iq(e){return new gc(e>>16&255,e>>8&255,e&255,1)}function YE(e,t,r,a){return a<=0&&(e=t=r=NaN),new gc(e,t,r,a)}function A7e(e){return e instanceof WN||(e=Wg(e)),e?(e=e.rgb(),new gc(e.r,e.g,e.b,e.opacity)):new gc}function YF(e,t,r,a){return arguments.length===1?A7e(e):new gc(e,t,r,a??1)}function gc(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}BL(gc,YF,Fie(WN,{brighter(e){return e=e==null?$k:Math.pow($k,e),new gc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rN:Math.pow(rN,e),new gc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gc(kg(this.r),kg(this.g),kg(this.b),Gk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oq,formatHex:oq,formatHex8:h7e,formatRgb:lq,toString:lq}));function oq(){return`#${dg(this.r)}${dg(this.g)}${dg(this.b)}`}function h7e(){return`#${dg(this.r)}${dg(this.g)}${dg(this.b)}${dg((isNaN(this.opacity)?1:this.opacity)*255)}`}function lq(){const e=Gk(this.opacity);return`${e===1?"rgb(":"rgba("}${kg(this.r)}, ${kg(this.g)}, ${kg(this.b)}${e===1?")":`, ${e})`}`}function Gk(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dg(e){return e=kg(e),(e<16?"0":"")+e.toString(16)}function cq(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new zd(e,t,r,a)}function Die(e){if(e instanceof zd)return new zd(e.h,e.s,e.l,e.opacity);if(e instanceof WN||(e=Wg(e)),!e)return new zd;if(e instanceof zd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,n=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-n,c=(i+n)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+n:2-i-n,o*=60):l=c>0&&c<1?0:o,new zd(o,l,c,e.opacity)}function m7e(e,t,r,a){return arguments.length===1?Die(e):new zd(e,t,r,a??1)}function zd(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}BL(zd,m7e,Fie(WN,{brighter(e){return e=e==null?$k:Math.pow($k,e),new zd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rN:Math.pow(rN,e),new zd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,n=2*r-a;return new gc(wI(e>=240?e-240:e+120,n,a),wI(e,n,a),wI(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new zd(uq(this.h),JE(this.s),JE(this.l),Gk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gk(this.opacity);return`${e===1?"hsl(":"hsla("}${uq(this.h)}, ${JE(this.s)*100}%, ${JE(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uq(e){return e=(e||0)%360,e<0?e+360:e}function JE(e){return Math.max(0,Math.min(1,e||0))}function wI(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const TL=e=>()=>e;function p7e(e,t){return function(r){return e+r*t}}function g7e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function x7e(e){return(e=+e)==1?Pie:function(t,r){return r-t?g7e(t,r,e):TL(isNaN(t)?r:t)}}function Pie(e,t){var r=t-e;return r?p7e(e,r):TL(isNaN(e)?t:e)}const qk=function e(t){var r=x7e(t);function a(n,i){var o=r((n=YF(n)).r,(i=YF(i)).r),l=r(n.g,i.g),c=r(n.b,i.b),u=Pie(n.opacity,i.opacity);return function(d){return n.r=o(d),n.g=l(d),n.b=c(d),n.opacity=u(d),n+""}}return a.gamma=e,a}(1);function v7e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),n;return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function b7e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function y7e(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,n=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)n[o]=I1(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=n[o](l);return i}}function w7e(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Qd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function N7e(e,t){var r={},a={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=I1(e[n],t[n]):a[n]=t[n];return function(i){for(n in r)a[n]=r[n](i);return a}}var JF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NI=new RegExp(JF.source,"g");function C7e(e){return function(){return e}}function E7e(e){return function(t){return e(t)+""}}function Rie(e,t){var r=JF.lastIndex=NI.lastIndex=0,a,n,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=JF.exec(e))&&(n=NI.exec(t));)(i=n.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,c.push({i:o,x:Qd(a,n)})),r=NI.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?E7e(c[0].x):C7e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function I1(e,t){var r=typeof t,a;return t==null||r==="boolean"?TL(t):(r==="number"?Qd:r==="string"?(a=Wg(t))?(t=a,qk):Rie:t instanceof Wg?qk:t instanceof Date?w7e:b7e(t)?v7e:Array.isArray(t)?y7e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?N7e:Qd)(e,t)}function IL(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var dq=180/Math.PI,ZF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lie(e,t,r,a,n,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*a)&&(r-=e*c,a-=t*c),(l=Math.sqrt(r*r+a*a))&&(r/=l,a/=l,c/=l),e*a<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:n,translateY:i,rotate:Math.atan2(t,e)*dq,skewX:Math.atan(c)*dq,scaleX:o,scaleY:l}}var ZE;function j7e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ZF:Lie(t.a,t.b,t.c,t.d,t.e,t.f)}function k7e(e){return e==null||(ZE||(ZE=document.createElementNS("http://www.w3.org/2000/svg","g")),ZE.setAttribute("transform",e),!(e=ZE.transform.baseVal.consolidate()))?ZF:(e=e.matrix,Lie(e.a,e.b,e.c,e.d,e.e,e.f))}function Mie(e,t,r,a){function n(u){return u.length?u.pop()+" ":""}function i(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Qd(u,f)},{i:x-2,x:Qd(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function o(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(n(f)+"rotate(",null,a)-2,x:Qd(u,d)})):d&&f.push(n(f)+"rotate("+d+a)}function l(u,d,f,h){u!==d?h.push({i:f.push(n(f)+"skewX(",null,a)-2,x:Qd(u,d)}):d&&f.push(n(f)+"skewX("+d+a)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(n(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Qd(u,f)},{i:x-2,x:Qd(d,h)})}else(f!==1||h!==1)&&m.push(n(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,h),o(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var S7e=Mie(j7e,"px, ","px)","deg)"),_7e=Mie(k7e,", ",")",")"),B7e=1e-12;function fq(e){return((e=Math.exp(e))+1/e)/2}function T7e(e){return((e=Math.exp(e))-1/e)/2}function I7e(e){return((e=Math.exp(2*e))-1)/(e+1)}const O7e=function e(t,r,a){function n(i,o){var l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],h=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<B7e)y=Math.log(h/u)/t,v=function(j){return[l+j*m,c+j*g,u*Math.exp(t*j*y)]};else{var N=Math.sqrt(x),C=(h*h-u*u+a*x)/(2*u*r*N),T=(h*h-u*u-a*x)/(2*h*r*N),_=Math.log(Math.sqrt(C*C+1)-C),O=Math.log(Math.sqrt(T*T+1)-T);y=(O-_)/t,v=function(j){var S=j*y,B=fq(_),L=u/(r*N)*(B*I7e(t*S+_)-T7e(_));return[l+L*m,c+L*g,u*B/fq(t*S+_)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return n.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},n}(Math.SQRT2,2,4);function F7e(e,t){t===void 0&&(t=e,e=I1);for(var r=0,a=t.length-1,n=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(n,n=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function D7e(e){return function(){return e}}function Kk(e){return+e}var Aq=[0,1];function Ol(e){return e}function eD(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:D7e(isNaN(t)?NaN:.5)}function P7e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function R7e(e,t,r){var a=e[0],n=e[1],i=t[0],o=t[1];return n<a?(a=eD(n,a),i=r(o,i)):(a=eD(a,n),i=r(i,o)),function(l){return i(a(l))}}function L7e(e,t,r){var a=Math.min(e.length,t.length)-1,n=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)n[o]=eD(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=KN(e,l,1,a)-1;return i[c](n[c](l))}}function XN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function s4(){var e=Aq,t=Aq,r=I1,a,n,i,o=Ol,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Ol&&(o=P7e(e[0],e[h-1])),l=h>2?L7e:R7e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(a),t,r)))(a(o(h)))}return f.invert=function(h){return o(n((u||(u=l(t,e.map(a),Qd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Kk),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=IL,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Ol,d()):o!==Ol},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return a=h,n=m,d()}}function OL(){return s4()(Ol,Ol)}function M7e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Wk(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function $b(e){return e=Wk(Math.abs(e)),e?e[1]:NaN}function U7e(e,t){return function(r,a){for(var n=r.length,i=[],o=0,l=e[0],c=0;n>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(n-=l,n+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Q7e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var H7e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nN(e){if(!(t=H7e.exec(e)))throw new Error("invalid format: "+e);var t;return new FL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nN.prototype=FL.prototype;function FL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z7e(e){e:for(var t=e.length,r=1,a=-1,n;r<t;++r)switch(e[r]){case".":a=n=r;break;case"0":a===0&&(a=r),n=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(n+1):e}var Uie;function V7e(e,t){var r=Wk(e,t);if(!r)return e+"";var a=r[0],n=r[1],i=n-(Uie=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Wk(e,Math.max(0,t+i-1))[0]}function hq(e,t){var r=Wk(e,t);if(!r)return e+"";var a=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}const mq={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:M7e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hq(e*100,t),r:hq,s:V7e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pq(e){return e}var gq=Array.prototype.map,xq=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $7e(e){var t=e.grouping===void 0||e.thousands===void 0?pq:U7e(gq.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?pq:Q7e(gq.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=nN(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,N=f.comma,C=f.precision,T=f.trim,_=f.type;_==="n"?(N=!0,_="g"):mq[_]||(C===void 0&&(C=12),T=!0,_="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var O=x==="$"?r:x==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",j=x==="$"?a:/[%p]/.test(_)?o:"",S=mq[_],B=/[defgprs%]/.test(_);C=C===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function L(D){var k=O,R=j,U,H,Q;if(_==="c")R=S(D)+R,D="";else{D=+D;var V=D<0||1/D<0;if(D=isNaN(D)?c:S(Math.abs(D),C),T&&(D=z7e(D)),V&&+D==0&&g!=="+"&&(V=!1),k=(V?g==="("?g:l:g==="-"||g==="("?"":g)+k,R=(_==="s"?xq[8+Uie/3]:"")+R+(V&&g==="("?")":""),B){for(U=-1,H=D.length;++U<H;)if(Q=D.charCodeAt(U),48>Q||Q>57){R=(Q===46?n+D.slice(U+1):D.slice(U))+R,D=D.slice(0,U);break}}}N&&!v&&(D=t(D,1/0));var G=k.length+D.length+R.length,J=G<y?new Array(y-G+1).join(h):"";switch(N&&v&&(D=t(J+D,J.length?y-R.length:1/0),J=""),m){case"<":D=k+D+R+J;break;case"=":D=k+J+D+R;break;case"^":D=J.slice(0,G=J.length>>1)+k+D+R+J.slice(G);break;default:D=J+k+D+R;break}return i(D)}return L.toString=function(){return f+""},L}function d(f,h){var m=u((f=nN(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor($b(h)/3)))*3,x=Math.pow(10,-g),v=xq[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var ej,DL,Qie;G7e({thousands:",",grouping:[3],currency:["$",""]});function G7e(e){return ej=$7e(e),DL=ej.format,Qie=ej.formatPrefix,ej}function q7e(e){return Math.max(0,-$b(Math.abs(e)))}function K7e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($b(t)/3)))*3-$b(Math.abs(e)))}function W7e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$b(t)-$b(e))+1}function Hie(e,t,r,a){var n=WF(e,t,r),i;switch(a=nN(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=K7e(n,o))&&(a.precision=i),Qie(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=W7e(n,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=q7e(n))&&(a.precision=i-(a.type==="%")*2);break}}return DL(a)}function pp(e){var t=e.domain;return e.ticks=function(r){var a=t();return qF(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var n=t();return Hie(n[0],n[n.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),n=0,i=a.length-1,o=a[n],l=a[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=n,n=i,i=u);d-- >0;){if(u=KF(o,l,r),u===c)return a[n]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function zie(){var e=OL();return e.copy=function(){return XN(e,zie())},fd.apply(e,arguments),pp(e)}function Vie(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Kk),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return Vie(e).unknown(t)},e=arguments.length?Array.from(e,Kk):[0,1],pp(r)}function $ie(e,t){e=e.slice();var r=0,a=e.length-1,n=e[r],i=e[a],o;return i<n&&(o=r,r=a,a=o,o=n,n=i,i=o),e[r]=t.floor(n),e[a]=t.ceil(i),e}function vq(e){return Math.log(e)}function bq(e){return Math.exp(e)}function X7e(e){return-Math.log(-e)}function Y7e(e){return-Math.exp(-e)}function J7e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Z7e(e){return e===10?J7e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eUe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yq(e){return(t,r)=>-e(-t,r)}function PL(e){const t=e(vq,bq),r=t.domain;let a=10,n,i;function o(){return n=eUe(a),i=Z7e(a),r()[0]<0?(n=yq(n),i=yq(i),e(X7e,Y7e)):e(vq,bq),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=n(u),m=n(d),g,x;const v=l==null?10:+l;let y=[];if(!(a%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<a;++g)if(x=h<0?g/i(-h):g*i(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=a-1;g>=1;--g)if(x=h>0?g/i(-h):g*i(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=qF(u,d,v))}else y=qF(h,m,Math.min(m-h,v)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=nN(c)).precision==null&&(c.trim=!0),c=DL(c)),l===1/0)return c;const u=Math.max(1,a*l/t.ticks().length);return d=>{let f=d/i(Math.round(n(d)));return f*a<a-.5&&(f*=a),f<=u?c(d):""}},t.nice=()=>r($ie(r(),{floor:l=>i(Math.floor(n(l))),ceil:l=>i(Math.ceil(n(l)))})),t}function Gie(){const e=PL(s4()).domain([1,10]);return e.copy=()=>XN(e,Gie()).base(e.base()),fd.apply(e,arguments),e}function wq(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Nq(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function RL(e){var t=1,r=e(wq(t),Nq(t));return r.constant=function(a){return arguments.length?e(wq(t=+a),Nq(t)):t},pp(r)}function qie(){var e=RL(s4());return e.copy=function(){return XN(e,qie()).constant(e.constant())},fd.apply(e,arguments)}function Cq(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tUe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rUe(e){return e<0?-e*e:e*e}function LL(e){var t=e(Ol,Ol),r=1;function a(){return r===1?e(Ol,Ol):r===.5?e(tUe,rUe):e(Cq(r),Cq(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,a()):r},pp(t)}function ML(){var e=LL(s4());return e.copy=function(){return XN(e,ML()).exponent(e.exponent())},fd.apply(e,arguments),e}function aUe(){return ML.apply(null,arguments).exponent(.5)}function Eq(e){return Math.sign(e)*e*e}function nUe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Kie(){var e=OL(),t=[0,1],r=!1,a;function n(i){var o=nUe(e(i));return isNaN(o)?a:r?Math.round(o):o}return n.invert=function(i){return e.invert(Eq(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((t=Array.from(i,Kk)).map(Eq)),n):t.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(r=!!i,n):r},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return Kie(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},fd.apply(n,arguments),pp(n)}function Wie(){var e=[],t=[],r=[],a;function n(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=t7e(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[KN(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Pm),n()},i.range=function(o){return arguments.length?(t=Array.from(o),n()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return Wie().domain(e).range(t).unknown(a)},fd.apply(i,arguments)}function Xie(){var e=0,t=1,r=1,a=[.5],n=[0,1],i;function o(c){return c!=null&&c<=c?n[KN(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(n=Array.from(c)).length-1,l()):n.slice()},o.invertExtent=function(c){var u=n.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return Xie().domain([e,t]).range(n).unknown(i)},fd.apply(pp(o),arguments)}function Yie(){var e=[.5],t=[0,1],r,a=1;function n(i){return i!=null&&i<=i?t[KN(e,i,0,a)]:r}return n.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return Yie().domain(e).range(t).unknown(r)},fd.apply(n,arguments)}const CI=new Date,EI=new Date;function Hi(e,t,r,a){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),n.round=i=>{const o=n(i),l=n.ceil(i);return i-o<l-i?o:l},n.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,l)=>{const c=[];if(i=n.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},n.filter=i=>Hi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(n.count=(i,o)=>(CI.setTime(+i),EI.setTime(+o),e(CI),e(EI),Math.floor(r(CI,EI))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(a?o=>a(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const Xk=Hi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xk.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Xk);Xk.range;const Eh=1e3,td=Eh*60,jh=td*60,Wh=jh*24,UL=Wh*7,jq=Wh*30,jI=Wh*365,fg=Hi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Eh)},(e,t)=>(t-e)/Eh,e=>e.getUTCSeconds());fg.range;const QL=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Eh)},(e,t)=>{e.setTime(+e+t*td)},(e,t)=>(t-e)/td,e=>e.getMinutes());QL.range;const HL=Hi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*td)},(e,t)=>(t-e)/td,e=>e.getUTCMinutes());HL.range;const zL=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Eh-e.getMinutes()*td)},(e,t)=>{e.setTime(+e+t*jh)},(e,t)=>(t-e)/jh,e=>e.getHours());zL.range;const VL=Hi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jh)},(e,t)=>(t-e)/jh,e=>e.getUTCHours());VL.range;const YN=Hi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*td)/Wh,e=>e.getDate()-1);YN.range;const i4=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wh,e=>e.getUTCDate()-1);i4.range;const Jie=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wh,e=>Math.floor(e/Wh));Jie.range;function hx(e){return Hi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*td)/UL)}const o4=hx(0),Yk=hx(1),sUe=hx(2),iUe=hx(3),Gb=hx(4),oUe=hx(5),lUe=hx(6);o4.range;Yk.range;sUe.range;iUe.range;Gb.range;oUe.range;lUe.range;function mx(e){return Hi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/UL)}const l4=mx(0),Jk=mx(1),cUe=mx(2),uUe=mx(3),qb=mx(4),dUe=mx(5),fUe=mx(6);l4.range;Jk.range;cUe.range;uUe.range;qb.range;dUe.range;fUe.range;const $L=Hi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$L.range;const GL=Hi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());GL.range;const Xh=Hi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Xh.range;const Yh=Hi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Yh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Yh.range;function Zie(e,t,r,a,n,i){const o=[[fg,1,Eh],[fg,5,5*Eh],[fg,15,15*Eh],[fg,30,30*Eh],[i,1,td],[i,5,5*td],[i,15,15*td],[i,30,30*td],[n,1,jh],[n,3,3*jh],[n,6,6*jh],[n,12,12*jh],[a,1,Wh],[a,2,2*Wh],[r,1,UL],[t,1,jq],[t,3,3*jq],[e,1,jI]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=SL(([,,v])=>v).right(o,h);if(m===o.length)return e.every(WF(u/jI,d/jI,f));if(m===0)return Xk.every(Math.max(WF(u,d,f),1));const[g,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[AUe,hUe]=Zie(Yh,GL,l4,Jie,VL,HL),[mUe,pUe]=Zie(Xh,$L,o4,YN,zL,QL);function kI(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function SI(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function gUe(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Vy(n),d=$y(n),f=Vy(i),h=$y(i),m=Vy(o),g=$y(o),x=Vy(l),v=$y(l),y=Vy(c),N=$y(c),C={a:V,A:G,b:J,B:W,c:null,d:Iq,e:Iq,f:UUe,g:XUe,G:JUe,H:RUe,I:LUe,j:MUe,L:eoe,m:QUe,M:HUe,p:Z,q:M,Q:Dq,s:Pq,S:zUe,u:VUe,U:$Ue,V:GUe,w:qUe,W:KUe,x:null,X:null,y:WUe,Y:YUe,Z:ZUe,"%":Fq},T={a:F,A:X,b:Y,B:ae,c:null,d:Oq,e:Oq,f:a9e,g:A9e,G:m9e,H:e9e,I:t9e,j:r9e,L:roe,m:n9e,M:s9e,p:le,q:ie,Q:Dq,s:Pq,S:i9e,u:o9e,U:l9e,V:c9e,w:u9e,W:d9e,x:null,X:null,y:f9e,Y:h9e,Z:p9e,"%":Fq},_={a:L,A:D,b:k,B:R,c:U,d:Bq,e:Bq,f:OUe,g:_q,G:Sq,H:Tq,I:Tq,j:_Ue,L:IUe,m:SUe,M:BUe,p:B,q:kUe,Q:DUe,s:PUe,S:TUe,u:wUe,U:NUe,V:CUe,w:yUe,W:EUe,x:H,X:Q,y:_q,Y:Sq,Z:jUe,"%":FUe};C.x=O(r,C),C.X=O(a,C),C.c=O(t,C),T.x=O(r,T),T.X=O(a,T),T.c=O(t,T);function O(ne,oe){return function(we){var K=[],Ee=-1,_e=0,Ce=ne.length,de,xe,he;for(we instanceof Date||(we=new Date(+we));++Ee<Ce;)ne.charCodeAt(Ee)===37&&(K.push(ne.slice(_e,Ee)),(xe=kq[de=ne.charAt(++Ee)])!=null?de=ne.charAt(++Ee):xe=de==="e"?" ":"0",(he=oe[de])&&(de=he(we,xe)),K.push(de),_e=Ee+1);return K.push(ne.slice(_e,Ee)),K.join("")}}function j(ne,oe){return function(we){var K=zy(1900,void 0,1),Ee=S(K,ne,we+="",0),_e,Ce;if(Ee!=we.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(oe&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(_e=SI(zy(K.y,0,1)),Ce=_e.getUTCDay(),_e=Ce>4||Ce===0?Jk.ceil(_e):Jk(_e),_e=i4.offset(_e,(K.V-1)*7),K.y=_e.getUTCFullYear(),K.m=_e.getUTCMonth(),K.d=_e.getUTCDate()+(K.w+6)%7):(_e=kI(zy(K.y,0,1)),Ce=_e.getDay(),_e=Ce>4||Ce===0?Yk.ceil(_e):Yk(_e),_e=YN.offset(_e,(K.V-1)*7),K.y=_e.getFullYear(),K.m=_e.getMonth(),K.d=_e.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Ce="Z"in K?SI(zy(K.y,0,1)).getUTCDay():kI(zy(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Ce+5)%7:K.w+K.U*7-(Ce+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,SI(K)):kI(K)}}function S(ne,oe,we,K){for(var Ee=0,_e=oe.length,Ce=we.length,de,xe;Ee<_e;){if(K>=Ce)return-1;if(de=oe.charCodeAt(Ee++),de===37){if(de=oe.charAt(Ee++),xe=_[de in kq?oe.charAt(Ee++):de],!xe||(K=xe(ne,we,K))<0)return-1}else if(de!=we.charCodeAt(K++))return-1}return K}function B(ne,oe,we){var K=u.exec(oe.slice(we));return K?(ne.p=d.get(K[0].toLowerCase()),we+K[0].length):-1}function L(ne,oe,we){var K=m.exec(oe.slice(we));return K?(ne.w=g.get(K[0].toLowerCase()),we+K[0].length):-1}function D(ne,oe,we){var K=f.exec(oe.slice(we));return K?(ne.w=h.get(K[0].toLowerCase()),we+K[0].length):-1}function k(ne,oe,we){var K=y.exec(oe.slice(we));return K?(ne.m=N.get(K[0].toLowerCase()),we+K[0].length):-1}function R(ne,oe,we){var K=x.exec(oe.slice(we));return K?(ne.m=v.get(K[0].toLowerCase()),we+K[0].length):-1}function U(ne,oe,we){return S(ne,t,oe,we)}function H(ne,oe,we){return S(ne,r,oe,we)}function Q(ne,oe,we){return S(ne,a,oe,we)}function V(ne){return o[ne.getDay()]}function G(ne){return i[ne.getDay()]}function J(ne){return c[ne.getMonth()]}function W(ne){return l[ne.getMonth()]}function Z(ne){return n[+(ne.getHours()>=12)]}function M(ne){return 1+~~(ne.getMonth()/3)}function F(ne){return o[ne.getUTCDay()]}function X(ne){return i[ne.getUTCDay()]}function Y(ne){return c[ne.getUTCMonth()]}function ae(ne){return l[ne.getUTCMonth()]}function le(ne){return n[+(ne.getUTCHours()>=12)]}function ie(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var oe=O(ne+="",C);return oe.toString=function(){return ne},oe},parse:function(ne){var oe=j(ne+="",!1);return oe.toString=function(){return ne},oe},utcFormat:function(ne){var oe=O(ne+="",T);return oe.toString=function(){return ne},oe},utcParse:function(ne){var oe=j(ne+="",!0);return oe.toString=function(){return ne},oe}}}var kq={"-":"",_:" ",0:"0"},uo=/^\s*\d+/,xUe=/^%/,vUe=/[\\^$*+?|[\]().{}]/g;function Ka(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function bUe(e){return e.replace(vUe,"\\$&")}function Vy(e){return new RegExp("^(?:"+e.map(bUe).join("|")+")","i")}function $y(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yUe(e,t,r){var a=uo.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function wUe(e,t,r){var a=uo.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function NUe(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function CUe(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function EUe(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function Sq(e,t,r){var a=uo.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function _q(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function jUe(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function kUe(e,t,r){var a=uo.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function SUe(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function Bq(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function _Ue(e,t,r){var a=uo.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function Tq(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function BUe(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function TUe(e,t,r){var a=uo.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function IUe(e,t,r){var a=uo.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function OUe(e,t,r){var a=uo.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function FUe(e,t,r){var a=xUe.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function DUe(e,t,r){var a=uo.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function PUe(e,t,r){var a=uo.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function Iq(e,t){return Ka(e.getDate(),t,2)}function RUe(e,t){return Ka(e.getHours(),t,2)}function LUe(e,t){return Ka(e.getHours()%12||12,t,2)}function MUe(e,t){return Ka(1+YN.count(Xh(e),e),t,3)}function eoe(e,t){return Ka(e.getMilliseconds(),t,3)}function UUe(e,t){return eoe(e,t)+"000"}function QUe(e,t){return Ka(e.getMonth()+1,t,2)}function HUe(e,t){return Ka(e.getMinutes(),t,2)}function zUe(e,t){return Ka(e.getSeconds(),t,2)}function VUe(e){var t=e.getDay();return t===0?7:t}function $Ue(e,t){return Ka(o4.count(Xh(e)-1,e),t,2)}function toe(e){var t=e.getDay();return t>=4||t===0?Gb(e):Gb.ceil(e)}function GUe(e,t){return e=toe(e),Ka(Gb.count(Xh(e),e)+(Xh(e).getDay()===4),t,2)}function qUe(e){return e.getDay()}function KUe(e,t){return Ka(Yk.count(Xh(e)-1,e),t,2)}function WUe(e,t){return Ka(e.getFullYear()%100,t,2)}function XUe(e,t){return e=toe(e),Ka(e.getFullYear()%100,t,2)}function YUe(e,t){return Ka(e.getFullYear()%1e4,t,4)}function JUe(e,t){var r=e.getDay();return e=r>=4||r===0?Gb(e):Gb.ceil(e),Ka(e.getFullYear()%1e4,t,4)}function ZUe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ka(t/60|0,"0",2)+Ka(t%60,"0",2)}function Oq(e,t){return Ka(e.getUTCDate(),t,2)}function e9e(e,t){return Ka(e.getUTCHours(),t,2)}function t9e(e,t){return Ka(e.getUTCHours()%12||12,t,2)}function r9e(e,t){return Ka(1+i4.count(Yh(e),e),t,3)}function roe(e,t){return Ka(e.getUTCMilliseconds(),t,3)}function a9e(e,t){return roe(e,t)+"000"}function n9e(e,t){return Ka(e.getUTCMonth()+1,t,2)}function s9e(e,t){return Ka(e.getUTCMinutes(),t,2)}function i9e(e,t){return Ka(e.getUTCSeconds(),t,2)}function o9e(e){var t=e.getUTCDay();return t===0?7:t}function l9e(e,t){return Ka(l4.count(Yh(e)-1,e),t,2)}function aoe(e){var t=e.getUTCDay();return t>=4||t===0?qb(e):qb.ceil(e)}function c9e(e,t){return e=aoe(e),Ka(qb.count(Yh(e),e)+(Yh(e).getUTCDay()===4),t,2)}function u9e(e){return e.getUTCDay()}function d9e(e,t){return Ka(Jk.count(Yh(e)-1,e),t,2)}function f9e(e,t){return Ka(e.getUTCFullYear()%100,t,2)}function A9e(e,t){return e=aoe(e),Ka(e.getUTCFullYear()%100,t,2)}function h9e(e,t){return Ka(e.getUTCFullYear()%1e4,t,4)}function m9e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?qb(e):qb.ceil(e),Ka(e.getUTCFullYear()%1e4,t,4)}function p9e(){return"+0000"}function Fq(){return"%"}function Dq(e){return+e}function Pq(e){return Math.floor(+e/1e3)}var rv,noe,soe;g9e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function g9e(e){return rv=gUe(e),noe=rv.format,rv.parse,soe=rv.utcFormat,rv.utcParse,rv}function x9e(e){return new Date(e)}function v9e(e){return e instanceof Date?+e:+new Date(+e)}function qL(e,t,r,a,n,i,o,l,c,u){var d=OL(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),N=u("%b %d"),C=u("%B"),T=u("%Y");function _(O){return(c(O)<O?m:l(O)<O?g:o(O)<O?x:i(O)<O?v:a(O)<O?n(O)<O?y:N:r(O)<O?C:T)(O)}return d.invert=function(O){return new Date(f(O))},d.domain=function(O){return arguments.length?h(Array.from(O,v9e)):h().map(x9e)},d.ticks=function(O){var j=h();return e(j[0],j[j.length-1],O??10)},d.tickFormat=function(O,j){return j==null?_:u(j)},d.nice=function(O){var j=h();return(!O||typeof O.range!="function")&&(O=t(j[0],j[j.length-1],O??10)),O?h($ie(j,O)):d},d.copy=function(){return XN(d,qL(e,t,r,a,n,i,o,l,c,u))},d}function b9e(){return fd.apply(qL(mUe,pUe,Xh,$L,o4,YN,zL,QL,fg,noe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function y9e(){return fd.apply(qL(AUe,hUe,Yh,GL,l4,i4,VL,HL,fg,soe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function c4(){var e=0,t=1,r,a,n,i,o=Ol,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(n===0?.5:(f=(i(f)-r)*n,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),n=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(I1),u.rangeRound=d(IL),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),a=f(t),n=r===a?0:1/(a-r),u}}function gp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ioe(){var e=pp(c4()(Ol));return e.copy=function(){return gp(e,ioe())},h0.apply(e,arguments)}function ooe(){var e=PL(c4()).domain([1,10]);return e.copy=function(){return gp(e,ooe()).base(e.base())},h0.apply(e,arguments)}function loe(){var e=RL(c4());return e.copy=function(){return gp(e,loe()).constant(e.constant())},h0.apply(e,arguments)}function KL(){var e=LL(c4());return e.copy=function(){return gp(e,KL()).exponent(e.exponent())},h0.apply(e,arguments)}function w9e(){return KL.apply(null,arguments).exponent(.5)}function coe(){var e=[],t=Ol;function r(a){if(a!=null&&!isNaN(a=+a))return t((KN(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let n of a)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(Pm),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,n)=>t(n/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(n,i)=>e7e(e,i/a))},r.copy=function(){return coe(t).domain(e)},h0.apply(r,arguments)}function u4(){var e=0,t=.5,r=1,a=1,n,i,o,l,c,u=Ol,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-i)*(a*x<a*i?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,n=d(e=+e),i=d(t=+t),o=d(r=+r),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,N,C;return arguments.length?([y,N,C]=v,u=F7e(x,[y,N,C]),m):[u(0),u(.5),u(1)]}}return m.range=g(I1),m.rangeRound=g(IL),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,n=x(e),i=x(t),o=x(r),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,m}}function uoe(){var e=pp(u4()(Ol));return e.copy=function(){return gp(e,uoe())},h0.apply(e,arguments)}function doe(){var e=PL(u4()).domain([.1,1,10]);return e.copy=function(){return gp(e,doe()).base(e.base())},h0.apply(e,arguments)}function foe(){var e=RL(u4());return e.copy=function(){return gp(e,foe()).constant(e.constant())},h0.apply(e,arguments)}function WL(){var e=LL(u4());return e.copy=function(){return gp(e,WL()).exponent(e.exponent())},h0.apply(e,arguments)}function N9e(){return WL.apply(null,arguments).exponent(.5)}const _2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_L,scaleDiverging:uoe,scaleDivergingLog:doe,scaleDivergingPow:WL,scaleDivergingSqrt:N9e,scaleDivergingSymlog:foe,scaleIdentity:Vie,scaleImplicit:XF,scaleLinear:zie,scaleLog:Gie,scaleOrdinal:n4,scalePoint:a7e,scalePow:ML,scaleQuantile:Wie,scaleQuantize:Xie,scaleRadial:Kie,scaleSequential:ioe,scaleSequentialLog:ooe,scaleSequentialPow:KL,scaleSequentialQuantile:coe,scaleSequentialSqrt:w9e,scaleSequentialSymlog:loe,scaleSqrt:aUe,scaleSymlog:qie,scaleThreshold:Yie,scaleTime:b9e,scaleUtc:y9e,tickFormat:Hie},Symbol.toStringTag,{value:"Module"}));var xp=e=>e.chartData,d4=gt([xp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),XL=(e,t,r,a)=>a?d4(e):xp(e);function Kb(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Au(t)&&Au(r))return!0}return!1}function Rq(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function C9e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,n,i;if(Au(r))n=r;else if(typeof r=="function")return;if(Au(a))i=a;else if(typeof a=="function")return;var o=[n,i];if(Kb(o))return o}}function E9e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(Kb(a))return Rq(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[n,i]=e,o,l;if(n==="auto")t!=null&&(o=Math.min(...t));else if(dr(n))o=n;else if(typeof n=="function")try{t!=null&&(o=n(t==null?void 0:t[0]))}catch{}else if(typeof n=="string"&&NG.test(n)){var c=NG.exec(n);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(dr(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&CG.test(i)){var d=CG.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(Kb(h))return t==null?h:Rq(h,t,r)}}}var O1=1e9,j9e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JL,ns=!0,cd="[DecimalError] ",Sg=cd+"Invalid argument: ",YL=cd+"Exponent out of range: ",F1=Math.floor,Jp=Math.pow,k9e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nu,ao=1e7,Vn=7,Aoe=9007199254740991,Zk=F1(Aoe/Vn),fr={};fr.absoluteValue=fr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};fr.comparedTo=fr.cmp=function(e){var t,r,a,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,n=e.d.length,t=0,r=a<n?a:n;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===n?0:a>n^i.s<0?1:-1};fr.decimalPlaces=fr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Vn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};fr.dividedBy=fr.div=function(e){return Rh(this,new this.constructor(e))};fr.dividedToIntegerBy=fr.idiv=function(e){var t=this,r=t.constructor;return On(Rh(t,new r(e),0,1),r.precision)};fr.equals=fr.eq=function(e){return!this.cmp(e)};fr.exponent=function(){return ji(this)};fr.greaterThan=fr.gt=function(e){return this.cmp(e)>0};fr.greaterThanOrEqualTo=fr.gte=function(e){return this.cmp(e)>=0};fr.isInteger=fr.isint=function(){return this.e>this.d.length-2};fr.isNegative=fr.isneg=function(){return this.s<0};fr.isPositive=fr.ispos=function(){return this.s>0};fr.isZero=function(){return this.s===0};fr.lessThan=fr.lt=function(e){return this.cmp(e)<0};fr.lessThanOrEqualTo=fr.lte=function(e){return this.cmp(e)<1};fr.logarithm=fr.log=function(e){var t,r=this,a=r.constructor,n=a.precision,i=n+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(nu))throw Error(cd+"NaN");if(r.s<1)throw Error(cd+(r.s?"NaN":"-Infinity"));return r.eq(nu)?new a(0):(ns=!1,t=Rh(sN(r,i),sN(e,i),i),ns=!0,On(t,n))};fr.minus=fr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?poe(t,e):hoe(t,(e.s=-e.s,e))};fr.modulo=fr.mod=function(e){var t,r=this,a=r.constructor,n=a.precision;if(e=new a(e),!e.s)throw Error(cd+"NaN");return r.s?(ns=!1,t=Rh(r,e,0,1).times(e),ns=!0,r.minus(t)):On(new a(r),n)};fr.naturalExponential=fr.exp=function(){return moe(this)};fr.naturalLogarithm=fr.ln=function(){return sN(this)};fr.negated=fr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};fr.plus=fr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hoe(t,e):poe(t,(e.s=-e.s,e))};fr.precision=fr.sd=function(e){var t,r,a,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sg+e);if(t=ji(n)+1,a=n.d.length-1,r=a*Vn+1,a=n.d[a],a){for(;a%10==0;a/=10)r--;for(a=n.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};fr.squareRoot=fr.sqrt=function(){var e,t,r,a,n,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(cd+"NaN")}for(e=ji(l),ns=!1,n=Math.sqrt(+l),n==0||n==1/0?(t=uA(l.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=F1((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(n.toString()),r=c.precision,n=o=r+3;;)if(i=a,a=i.plus(Rh(l,i,o+2)).times(.5),uA(i.d).slice(0,o)===(t=uA(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),n==o&&t=="4999"){if(On(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return ns=!0,On(a,r)};fr.times=fr.mul=function(e){var t,r,a,n,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,n=c+a;n>a;)l=i[n]+m[a]*h[n-a-1]+t,i[n--]=l%ao|0,t=l/ao|0;i[n]=(i[n]+t)%ao|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ns?On(e,f.precision):e};fr.toDecimalPlaces=fr.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(kA(e,0,O1),t===void 0?t=a.rounding:kA(t,0,8),On(r,e+ji(r)+1,t))};fr.toExponential=function(e,t){var r,a=this,n=a.constructor;return e===void 0?r=Xg(a,!0):(kA(e,0,O1),t===void 0?t=n.rounding:kA(t,0,8),a=On(new n(a),e+1,t),r=Xg(a,!0,e+1)),r};fr.toFixed=function(e,t){var r,a,n=this,i=n.constructor;return e===void 0?Xg(n):(kA(e,0,O1),t===void 0?t=i.rounding:kA(t,0,8),a=On(new i(n),e+ji(n)+1,t),r=Xg(a.abs(),!1,e+ji(a)+1),n.isneg()&&!n.isZero()?"-"+r:r)};fr.toInteger=fr.toint=function(){var e=this,t=e.constructor;return On(new t(e),ji(e)+1,t.rounding)};fr.toNumber=function(){return+this};fr.toPower=fr.pow=function(e){var t,r,a,n,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(nu);if(l=new c(l),!l.s){if(e.s<1)throw Error(cd+"Infinity");return l}if(l.eq(nu))return l;if(a=c.precision,e.eq(nu))return On(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=Aoe){for(n=new c(nu),t=Math.ceil(a/Vn+4),ns=!1;r%2&&(n=n.times(l),Mq(n.d,t)),r=F1(r/2),r!==0;)l=l.times(l),Mq(l.d,t);return ns=!0,e.s<0?new c(nu).div(n):On(n,a)}}else if(i<0)throw Error(cd+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ns=!1,n=e.times(sN(l,a+u)),ns=!0,n=moe(n),n.s=i,n};fr.toPrecision=function(e,t){var r,a,n=this,i=n.constructor;return e===void 0?(r=ji(n),a=Xg(n,r<=i.toExpNeg||r>=i.toExpPos)):(kA(e,1,O1),t===void 0?t=i.rounding:kA(t,0,8),n=On(new i(n),e,t),r=ji(n),a=Xg(n,e<=r||r<=i.toExpNeg,e)),a};fr.toSignificantDigits=fr.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(kA(e,1,O1),t===void 0?t=a.rounding:kA(t,0,8)),On(new a(r),e,t)};fr.toString=fr.valueOf=fr.val=fr.toJSON=fr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ji(e),r=e.constructor;return Xg(e,t<=r.toExpNeg||t>=r.toExpPos)};function hoe(e,t){var r,a,n,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ns?On(t,f):t;if(c=e.d,u=t.d,o=e.e,n=t.e,c=c.slice(),i=o-n,i){for(i<0?(a=c,i=-i,l=u.length):(a=u,n=o,l=c.length),o=Math.ceil(f/Vn),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,a=u,u=c,c=a),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/ao|0,c[i]%=ao;for(r&&(c.unshift(r),++n),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=n,ns?On(t,f):t}function kA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Sg+e)}function uA(e){var t,r,a,n=e.length-1,i="",o=e[0];if(n>0){for(i+=o,t=1;t<n;t++)a=e[t]+"",r=Vn-a.length,r&&(i+=dm(r)),i+=a;o=e[t],a=o+"",r=Vn-a.length,r&&(i+=dm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Rh=function(){function e(a,n){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*n+o,a[l]=i%ao|0,o=i/ao|0;return o&&a.unshift(o),a}function t(a,n,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=n[l]){c=a[l]>n[l]?1:-1;break}return c}function r(a,n,i){for(var o=0;i--;)a[i]-=o,o=a[i]<n[i]?1:0,a[i]=o*ao+a[i]-n[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,n,i,o){var l,c,u,d,f,h,m,g,x,v,y,N,C,T,_,O,j,S,B=a.constructor,L=a.s==n.s?1:-1,D=a.d,k=n.d;if(!a.s)return new B(a);if(!n.s)throw Error(cd+"Division by zero");for(c=a.e-n.e,j=k.length,_=D.length,m=new B(L),g=m.d=[],u=0;k[u]==(D[u]||0);)++u;if(k[u]>(D[u]||0)&&--c,i==null?N=i=B.precision:o?N=i+(ji(a)-ji(n))+1:N=i,N<0)return new B(0);if(N=N/Vn+2|0,u=0,j==1)for(d=0,k=k[0],N++;(u<_||d)&&N--;u++)C=d*ao+(D[u]||0),g[u]=C/k|0,d=C%k|0;else{for(d=ao/(k[0]+1)|0,d>1&&(k=e(k,d),D=e(D,d),j=k.length,_=D.length),T=j,x=D.slice(0,j),v=x.length;v<j;)x[v++]=0;S=k.slice(),S.unshift(0),O=k[0],k[1]>=ao/2&&++O;do d=0,l=t(k,x,j,v),l<0?(y=x[0],j!=v&&(y=y*ao+(x[1]||0)),d=y/O|0,d>1?(d>=ao&&(d=ao-1),f=e(k,d),h=f.length,v=x.length,l=t(f,x,h,v),l==1&&(d--,r(f,j<h?S:k,h))):(d==0&&(l=d=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(k,x,j,v),l<1&&(d++,r(x,j<v?S:k,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=D[T]||0:(x=[D[T]],v=1);while((T++<_||x[0]!==void 0)&&N--)}return g[0]||g.shift(),m.e=c,On(m,o?i+ji(m)+1:i)}}();function moe(e,t){var r,a,n,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(ji(e)>16)throw Error(YL+ji(e));if(!e.s)return new d(nu);for(ns=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(Jp(2,u))/Math.LN10*2+5|0,l+=a,r=n=i=new d(nu),d.precision=l;;){if(n=On(n.times(e),l),r=r.times(++c),o=i.plus(Rh(n,r,l)),uA(o.d).slice(0,l)===uA(i.d).slice(0,l)){for(;u--;)i=On(i.times(i),l);return d.precision=f,t==null?(ns=!0,On(i,f)):i}i=o}}function ji(e){for(var t=e.e*Vn,r=e.d[0];r>=10;r/=10)t++;return t}function _I(e,t,r){if(t>e.LN10.sd())throw ns=!0,r&&(e.precision=r),Error(cd+"LN10 precision limit exceeded");return On(new e(e.LN10),t)}function dm(e){for(var t="";e--;)t+="0";return t}function sN(e,t){var r,a,n,i,o,l,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(cd+(m.s?"NaN":"-Infinity"));if(m.eq(nu))return new x(0);if(t==null?(ns=!1,u=v):u=t,m.eq(10))return t==null&&(ns=!0),_I(x,u);if(u+=h,x.precision=u,r=uA(g),a=r.charAt(0),i=ji(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)m=m.times(e),r=uA(m.d),a=r.charAt(0),f++;i=ji(m),a>1?(m=new x("0."+r),i++):m=new x(a+"."+r.slice(1))}else return c=_I(x,u+2,v).times(i+""),m=sN(new x(a+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(ns=!0,On(m,v)):m;for(l=o=m=Rh(m.minus(nu),m.plus(nu),u),d=On(m.times(m),u),n=3;;){if(o=On(o.times(d),u),c=l.plus(Rh(o,new x(n),u)),uA(c.d).slice(0,u)===uA(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(_I(x,u+2,v).times(i+""))),l=Rh(l,new x(f),u),x.precision=v,t==null?(ns=!0,On(l,v)):l;l=c,n+=2}}function Lq(e,t){var r,a,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(a,n),t){if(n-=a,r=r-a-1,e.e=F1(r/Vn),e.d=[],a=(r+1)%Vn,r<0&&(a+=Vn),a<n){for(a&&e.d.push(+t.slice(0,a)),n-=Vn;a<n;)e.d.push(+t.slice(a,a+=Vn));t=t.slice(a),a=Vn-t.length}else a-=n;for(;a--;)t+="0";if(e.d.push(+t),ns&&(e.e>Zk||e.e<-Zk))throw Error(YL+r)}else e.s=0,e.e=0,e.d=[0];return e}function On(e,t,r){var a,n,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=Vn,n=t,u=f[d=0];else{if(d=Math.ceil((a+1)/Vn),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;a%=Vn,n=a-Vn+o}if(r!==void 0&&(i=Jp(10,o-n-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?n>0?u/Jp(10,o-n):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ji(e),f.length=1,t=t-i-1,f[0]=Jp(10,(Vn-t%Vn)%Vn),e.e=F1(-t/Vn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=d,i=1,d--):(f.length=d+1,i=Jp(10,Vn-a),f[d]=n>0?(u/Jp(10,o-n)%Jp(10,n)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==ao&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=ao)break;f[d--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(ns&&(e.e>Zk||e.e<-Zk))throw Error(YL+ji(e));return e}function poe(e,t){var r,a,n,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ns?On(t,m):t;if(c=e.d,f=t.d,a=t.e,u=e.e,c=c.slice(),o=u-a,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,a=u,l=c.length),n=Math.max(Math.ceil(m/Vn),l)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=c.length,l=f.length,d=n<l,d&&(l=n),n=0;n<l;n++)if(c[n]!=f[n]){d=c[n]<f[n];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,n=f.length-l;n>0;--n)c[l++]=0;for(n=f.length;n>o;){if(c[--n]<f[n]){for(i=n;i&&c[--i]===0;)c[i]=ao-1;--c[i],c[n]+=ao}c[n]-=f[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,ns?On(t,m):t):new h(0)}function Xg(e,t,r){var a,n=ji(e),i=uA(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+dm(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+dm(-n-1)+i,r&&(a=r-o)>0&&(i+=dm(a))):n>=o?(i+=dm(n+1-o),r&&(a=r-n-1)>0&&(i=i+"."+dm(a))):((a=n+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(n+1===o&&(i+="."),i+=dm(a))),e.s<0?"-"+i:i}function Mq(e,t){if(e.length>t)return e.length=t,!0}function goe(e){var t,r,a;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Sg+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Lq(o,i.toString())}else if(typeof i!="string")throw Error(Sg+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,k9e.test(i))Lq(o,i);else throw Error(Sg+i)}if(n.prototype=fr,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=goe,n.config=n.set=S9e,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return n.config(e),n}function S9e(e){if(!e||typeof e!="object")throw Error(cd+"Object expected");var t,r,a,n=["precision",1,O1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((a=e[r=n[t]])!==void 0)if(F1(a)===a&&a>=n[t+1]&&a<=n[t+2])this[r]=a;else throw Error(Sg+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Sg+r+": "+a);return this}var JL=goe(j9e);nu=new JL(1);const xn=JL;var _9e=e=>e,xoe={},voe=e=>e===xoe,Uq=e=>function t(){return arguments.length===0||arguments.length===1&&voe(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},boe=(e,t)=>e===1?t:Uq(function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a.filter(o=>o!==xoe).length;return i>=e?t(...a):boe(e-i,Uq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=a.map(d=>voe(d)?l.shift():d);return t(...u,...l)}))}),f4=e=>boe(e.length,e),tD=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},B9e=f4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),T9e=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return _9e;var n=r.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},rD=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),yoe=e=>{var t=null,r=null;return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t&&n.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=n,r=e(...n)),r}};function woe(e){var t;return e===0?t=1:t=Math.floor(new xn(e).abs().log(10).toNumber())+1,t}function Noe(e,t,r){for(var a=new xn(e),n=0,i=[];a.lt(t)&&n<1e5;)i.push(a.toNumber()),a=a.add(r),n++;return i}f4((e,t,r)=>{var a=+e,n=+t;return a+r*(n-a)});f4((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});f4((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var Coe=e=>{var[t,r]=e,[a,n]=[t,r];return t>r&&([a,n]=[r,t]),[a,n]},Eoe=(e,t,r)=>{if(e.lte(0))return new xn(0);var a=woe(e.toNumber()),n=new xn(10).pow(a),i=e.div(n),o=a!==1?.05:.1,l=new xn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(n);return t?new xn(c.toNumber()):new xn(Math.ceil(c.toNumber()))},I9e=(e,t,r)=>{var a=new xn(1),n=new xn(e);if(!n.isint()&&r){var i=Math.abs(e);i<1?(a=new xn(10).pow(woe(e)-1),n=new xn(Math.floor(n.div(a).toNumber())).mul(a)):i>1&&(n=new xn(Math.floor(e)))}else e===0?n=new xn(Math.floor((t-1)/2)):r||(n=new xn(Math.floor(e)));var o=Math.floor((t-1)/2),l=T9e(B9e(c=>n.add(new xn(c-o).mul(a)).toNumber()),tD);return l(0,t)},joe=function(t,r,a,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new xn(0),tickMin:new xn(0),tickMax:new xn(0)};var o=Eoe(new xn(r).sub(t).div(a-1),n,i),l;t<=0&&r>=0?l=new xn(0):(l=new xn(t).add(r).div(2),l=l.sub(new xn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new xn(r).sub(l).div(o).toNumber()),d=c+u+1;return d>a?joe(t,r,a,n,i+1):(d<a&&(u=r>0?u+(a-d):u,c=r>0?c:c+(a-d)),{step:o,tickMin:l.sub(new xn(c).mul(o)),tickMax:l.add(new xn(u).mul(o))})};function O9e(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,l]=Coe([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...tD(0,a-1).map(()=>1/0)]:[...tD(0,a-1).map(()=>-1/0),l];return t>r?rD(c):c}if(o===l)return I9e(o,a,n);var{step:u,tickMin:d,tickMax:f}=joe(o,l,i,n,0),h=Noe(d,f.add(new xn(.1).mul(u)),u);return t>r?rD(h):h}function F9e(e,t){var[r,a]=e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Coe([r,a]);if(i===-1/0||o===1/0)return[r,a];if(i===o)return[i];var l=Math.max(t,2),c=Eoe(new xn(o).sub(i).div(l-1),n,0),u=[...Noe(new xn(i),new xn(o),c),o];return n===!1&&(u=u.map(d=>Math.round(d))),r>a?rD(u):u}var D9e=yoe(O9e),P9e=yoe(F9e),koe=e=>e.rootProps.maxBarSize,R9e=e=>e.rootProps.barGap,Soe=e=>e.rootProps.barCategoryGap,L9e=e=>e.rootProps.barSize,JN=e=>e.rootProps.stackOffset,ZL=e=>e.options.chartName,eM=e=>e.rootProps.syncId,_oe=e=>e.rootProps.syncMethod,tM=e=>e.options.eventEmitter,sA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},cc={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},A4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},M9e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:sA.angleAxisId,includeHidden:!1,name:void 0,reversed:sA.reversed,scale:sA.scale,tick:sA.tick,tickCount:void 0,ticks:void 0,type:sA.type,unit:void 0},U9e={allowDataOverflow:cc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:cc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:cc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:cc.scale,tick:cc.tick,tickCount:cc.tickCount,ticks:void 0,type:cc.type,unit:void 0},Q9e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:sA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sA.scale,tick:sA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},H9e={allowDataOverflow:cc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:cc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:cc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:cc.scale,tick:cc.tick,tickCount:cc.tickCount,ticks:void 0,type:"category",unit:void 0},D1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Q9e:M9e,ZN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?H9e:U9e,h4=e=>e.polarOptions,rM=gt([f0,A0,Qi],nie),Boe=gt([h4,rM],(e,t)=>{if(e!=null)return Ll(e.innerRadius,t,0)}),Toe=gt([h4,rM],(e,t)=>{if(e!=null)return Ll(e.outerRadius,t,t*.8)}),z9e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Ioe=gt([h4],z9e),V9e=gt([D1,Ioe],A4),Ooe=gt([rM,Boe,Toe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),$9e=gt([ZN,Ooe],A4),P1=gt([Ea,h4,Boe,Toe,f0,A0],(e,t,r,a,n,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Ll(o,n,n/2),cy:Ll(l,i,i/2),innerRadius:r,outerRadius:a,startAngle:c,endAngle:u,clockWise:!1}}}),Fn=(e,t)=>t,eC=(e,t,r)=>r;function aM(e){return e==null?void 0:e.id}var zi=e=>{var t=Ea(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},R1=e=>e.tooltip.settings.axisId,Vi=e=>{var t=zi(e),r=R1(e);return L1(e,t,r)};function Foe(e,t,r){var{chartData:a=[]}=t,n=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:a;if(!(c==null||c.length===0)){var u=aM(o);c.forEach((d,f)=>{var h=n==null?f:String(Hn(d,n,null)),m=Hn(d,o.dataKey,0),g;i.has(h)?g=i.get(h):g={},Object.assign(g,{[u]:m}),i.set(h,g)})}}),Array.from(i.values())}function m4(e){return e.stackId!=null&&e.dataKey!=null}function Qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(r),!0).forEach(function(a){G9e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function G9e(e,t,r){return(t=q9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q9e(e){var t=K9e(e,"string");return typeof t=="symbol"?t:t+""}function K9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aD=[0,"auto"],qc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},m0=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??qc},Kc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:aD,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:t4},vp=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Kc},W9e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},nM=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??W9e},li=(e,t,r)=>{switch(t){case"xAxis":return m0(e,r);case"yAxis":return vp(e,r);case"zAxis":return nM(e,r);case"angleAxis":return D1(e,r);case"radiusAxis":return ZN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},X9e=(e,t,r)=>{switch(t){case"xAxis":return m0(e,r);case"yAxis":return vp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},L1=(e,t,r)=>{switch(t){case"xAxis":return m0(e,r);case"yAxis":return vp(e,r);case"angleAxis":return D1(e,r);case"radiusAxis":return ZN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Doe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function sM(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var iM=e=>e.graphicalItems.cartesianItems,Y9e=gt([Fn,eC],sM),oM=(e,t,r)=>e.filter(r).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),tC=gt([iM,li,Y9e],oM),Poe=gt([tC],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(m4)),Roe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Loe=gt([tC],Roe),lM=e=>e.map(t=>t.data).filter(Boolean).flat(1),J9e=gt([tC],lM),cM=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:n}=t;return e.length>0?e:r.slice(a,n+1)},uM=gt([J9e,XL],cM),dM=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Hn(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(n=>({value:Hn(n,a)}))):e.map(a=>({value:a})),p4=gt([uM,li,tC],dM);function Moe(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function px(e){return e.filter(t=>jA(t)||t instanceof Date).map(Number).filter(t=>uu(t)===!1)}function Z9e(e,t,r){return!r||typeof t!="number"||uu(t)?[]:r.length?px(r.flatMap(a=>{var n=Hn(e,a.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!Au(i)||!Au(o)))return[t-i,t+o]})):[]}var eQe=gt([Poe,XL,Vi],Foe),Uoe=(e,t,r)=>{var a={},n=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),a);return Object.fromEntries(Object.entries(n).map(i=>{var[o,l]=i,c=l.map(aM);return[o,{stackedData:q8e(e,c,r),graphicalItems:l}]}))},nD=gt([eQe,Poe,JN],Uoe),Qoe=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:n}=t;if(r!=="zAxis"){var i=J8e(e,a,n);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},tQe=gt([nD,xp,Fn],Qoe),Hoe=(e,t,r,a,n)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var l,c,u=(l=a[o.id])===null||l===void 0?void 0:l.filter(f=>Moe(n,f)),d=Hn(i,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:Z9e(i,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Hn(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),g4=e=>e.errorBars,zoe=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>Moe(r,a));gt([Loe,g4,Fn],zoe);var rQe=gt([uM,li,Loe,g4,Fn],Hoe);function aQe(e){var{value:t}=e;if(jA(t)||t instanceof Date)return t}var Hq=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=px(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nQe=(e,t,r)=>{var a=e.map(aQe).filter(n=>n!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&tse(a))?_ie(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},fM=e=>{var t;if(e==null||!("domain"in e))return aD;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=px(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:aD},tS=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},Voe=e=>e.referenceElements.dots,M1=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),sQe=gt([Voe,Fn,eC],M1),$oe=e=>e.referenceElements.areas,iQe=gt([$oe,Fn,eC],M1),Goe=e=>e.referenceElements.lines,oQe=gt([Goe,Fn,eC],M1),qoe=(e,t)=>{var r=px(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lQe=gt(sQe,Fn,qoe),Koe=(e,t)=>{var r=px(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},cQe=gt([iQe,Fn],Koe),Woe=(e,t)=>{var r=px(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},uQe=gt(oQe,Fn,Woe),dQe=gt(lQe,uQe,cQe,(e,t,r)=>tS(e,r,t)),Xoe=gt([li],fM),AM=(e,t,r,a,n,i,o)=>{var l=C9e(t,e.allowDataOverflow);if(l!=null)return l;var c=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",u=c?tS(r,n,Hq(a)):tS(n,Hq(a));return E9e(t,u,e.allowDataOverflow)},fQe=gt([li,Xoe,tQe,rQe,dQe,Ea,Fn],AM),AQe=[0,1],hM=(e,t,r,a,n,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=mp(t,i);return u&&l==null?_ie(0,r.length):c==="category"?nQe(a,e,u):n==="expand"?AQe:o}},mM=gt([li,Ea,uM,p4,JN,Fn,fQe],hM),Yoe=(e,t,r,a,n)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&n==="radiusAxis"?"band":t==="radial"&&n==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat($N(i));return l in _2?l:"point"}}},bp=gt([li,Ea,Doe,ZL,Fn],Yoe);function hQe(e){if(e!=null){if(e in _2)return _2[e]();var t="scale".concat($N(e));if(t in _2)return _2[t]()}}function x4(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var n=hQe(t);if(n!=null){var i=n.domain(r).range(a);return H8e(i),i}}}var pM=(e,t,r)=>{var a=fM(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Kb(e))return D9e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Kb(e))return P9e(e,t.tickCount,t.allowDecimals)}},gM=gt([mM,L1,bp],pM),xM=(e,t,r,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Kb(t)&&Array.isArray(r)&&r.length>0){var n=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(n,i),Math.max(o,l)]}return t},mQe=gt([li,mM,gM,Fn],xM),pQe=gt(p4,li,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(px(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var n=a[a.length-1]-a[0];if(n===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];r=Math.min(r,o)}return r/n}}),Joe=gt(pQe,Ea,Soe,Qi,(e,t,r,a)=>a,(e,t,r,a,n)=>{if(!Au(e))return 0;var i=t==="vertical"?a.height:a.width;if(n==="gap")return e*i/2;if(n==="no-gap"){var o=Ll(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),gQe=(e,t)=>{var r=m0(e,t);return r==null||typeof r.padding!="string"?0:Joe(e,"xAxis",t,r.padding)},xQe=(e,t)=>{var r=vp(e,t);return r==null||typeof r.padding!="string"?0:Joe(e,"yAxis",t,r.padding)},vQe=gt(m0,gQe,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:t,right:t}:{left:((r=n.left)!==null&&r!==void 0?r:0)+t,right:((a=n.right)!==null&&a!==void 0?a:0)+t}}),bQe=gt(vp,xQe,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:t,bottom:t}:{top:((r=n.top)!==null&&r!==void 0?r:0)+t,bottom:((a=n.bottom)!==null&&a!==void 0?a:0)+t}}),yQe=gt([Qi,vQe,a4,r4,(e,t,r)=>r],(e,t,r,a,n)=>{var{padding:i}=a;return n?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),wQe=gt([Qi,Ea,bQe,a4,r4,(e,t,r)=>r],(e,t,r,a,n,i)=>{var{padding:o}=n;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),rC=(e,t,r,a)=>{var n;switch(t){case"xAxis":return yQe(e,r,a);case"yAxis":return wQe(e,r,a);case"zAxis":return(n=nM(e,r))===null||n===void 0?void 0:n.range;case"angleAxis":return Ioe(e);case"radiusAxis":return Ooe(e,r);default:return}},Zoe=gt([li,rC],A4),U1=gt([li,bp,mQe,Zoe],x4);gt([tC,g4,Fn],zoe);function ele(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var v4=(e,t)=>t,b4=(e,t,r)=>r,NQe=gt(bL,v4,b4,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(ele)),CQe=gt(yL,v4,b4,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(ele)),tle=(e,t)=>({width:e.width,height:t.height}),EQe=(e,t)=>{var r=typeof t.width=="number"?t.width:t4;return{width:r,height:e.height}},rle=gt(Qi,m0,tle),jQe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},kQe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},SQe=gt(A0,Qi,NQe,v4,b4,(e,t,r,a,n)=>{var i={},o;return r.forEach(l=>{var c=tle(t,l);o==null&&(o=jQe(t,a,e));var u=a==="top"&&!n||a==="bottom"&&n;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),_Qe=gt(f0,Qi,CQe,v4,b4,(e,t,r,a,n)=>{var i={},o;return r.forEach(l=>{var c=EQe(t,l);o==null&&(o=kQe(t,a,e));var u=a==="left"&&!n||a==="right"&&n;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),BQe=(e,t)=>{var r=Qi(e),a=m0(e,t);if(a!=null){var n=SQe(e,a.orientation,a.mirror),i=n[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},TQe=(e,t)=>{var r=Qi(e),a=vp(e,t);if(a!=null){var n=_Qe(e,a.orientation,a.mirror),i=n[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},ale=gt(Qi,vp,(e,t)=>{var r=typeof t.width=="number"?t.width:t4;return{width:r,height:e.height}}),zq=(e,t,r)=>{switch(t){case"xAxis":return rle(e,r).width;case"yAxis":return ale(e,r).height;default:return}},nle=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=r,l=mp(e,a),c=t.map(u=>u.value);if(o&&l&&i==="category"&&n&&tse(c))return c}},aC=gt([Ea,p4,li,Fn],nle),vM=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:n,scale:i}=r,o=mp(e,a);if(o&&(n==="number"||i!=="auto"))return t.map(l=>l.value)}},bM=gt([Ea,p4,L1,Fn],vM),Vq=gt([Ea,X9e,bp,U1,aC,bM,rC,gM,Fn],(e,t,r,a,n,i,o,l,c)=>{if(t==null)return null;var u=mp(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:n,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:a}}),sle=(e,t,r,a,n,i,o,l,c)=>{if(!(t==null||a==null)){var u=mp(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,g=d==="category"&&a.bandwidth?a.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?lo(i[0]-i[1])*2*g:g;var x=f||n;if(x){var v=x.map((y,N)=>{var C=o?o.indexOf(y):y;return{index:N,coordinate:a(C)+g,value:y,offset:g}});return v.filter(y=>!uu(y.coordinate))}return u&&l?l.map((y,N)=>({coordinate:a(y)+g,value:y,index:N,offset:g})):a.ticks?a.ticks(h).map(y=>({coordinate:a(y)+g,value:y,offset:g})):a.domain().map((y,N)=>({coordinate:a(y)+g,value:o?o[y]:y,index:N,offset:g}))}},ile=gt([Ea,L1,bp,U1,gM,rC,aC,bM,Fn],sle),ole=(e,t,r,a,n,i,o)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var l=mp(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(a==null?void 0:a.length)>=2?lo(a[0]-a[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:n?n[d]:d,index:f,offset:u}))}},Wb=gt([Ea,L1,U1,rC,aC,bM,Fn],ole),Xb=gt(li,U1,(e,t)=>{if(!(e==null||t==null))return eS(eS({},e),{},{scale:t})}),IQe=gt([li,bp,mM,Zoe],x4);gt((e,t,r)=>nM(e,r),IQe,(e,t)=>{if(!(e==null||t==null))return eS(eS({},e),{},{scale:t})});var OQe=gt([Ea,bL,yL],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),lle=e=>e.options.defaultTooltipEventType,cle=e=>e.options.validateTooltipEventTypes;function ule(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function yM(e,t){var r=lle(e),a=cle(e);return ule(t,r,a)}function FQe(e){return sr(t=>yM(t,e))}var dle=(e,t)=>{var r,a=Number(t);if(!(uu(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},DQe=e=>e.tooltip.settings,xm={active:!1,index:null,dataKey:void 0,coordinate:void 0},PQe={itemInteraction:{click:xm,hover:xm},axisInteraction:{click:xm,hover:xm},keyboardInteraction:xm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},fle=mu({name:"tooltip",initialState:PQe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Ph(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:RQe,removeTooltipEntrySettings:LQe,setTooltipSettingsState:MQe,setActiveMouseOverItemIndex:Ale,mouseLeaveItem:UQe,mouseLeaveChart:hle,setActiveClickItemIndex:QQe,setMouseOverAxisIndex:mle,setMouseClickAxisIndex:HQe,setSyncInteraction:sD,setKeyboardInteraction:iD}=fle.actions,zQe=fle.reducer;function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function tj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$q(Object(r),!0).forEach(function(a){VQe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VQe(e,t,r){return(t=$Qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Qe(e){var t=GQe(e,"string");return typeof t=="symbol"?t:t+""}function GQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qQe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function KQe(e){return e.index!=null}var ple=(e,t,r,a)=>{if(t==null)return xm;var n=qQe(e,t,r);if(n==null)return xm;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(KQe(n)){if(i)return tj(tj({},n),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return tj(tj({},xm),{},{coordinate:n.coordinate})},wM=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var a=Number(r);if(!Au(a))return r;var n=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(n,Math.min(a,i)))},gle=(e,t,r,a,n,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=n==null?void 0:n[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:d.coordinate}}}},xle=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return r==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},nC=e=>e.options.tooltipPayloadSearcher,Q1=e=>e.tooltip;function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function qq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(a){WQe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WQe(e,t,r){return(t=XQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XQe(e){var t=YQe(e,"string");return typeof t=="symbol"?t:t+""}function YQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JQe(e,t){return e??t}var vle=(e,t,r,a,n,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=JQe(x,l),N=Array.isArray(y)?iie(y,u,d):y,C=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:a==null?void 0:a.dataKey,T=v==null?void 0:v.nameKey,_;if(a!=null&&a.dataKey&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?_=FDe(N,a.dataKey,n):_=i(N,t,c,T),Array.isArray(_))_.forEach(j=>{var S=qq(qq({},v),{},{name:j.name,unit:j.unit,color:void 0,fill:void 0});h.push(EG({tooltipEntrySettings:S,dataKey:j.dataKey,payload:j.payload,value:Hn(j.payload,j.dataKey),name:j.name}))});else{var O;h.push(EG({tooltipEntrySettings:v,dataKey:C,payload:_,value:Hn(_,C),name:(O=Hn(_,T))!==null&&O!==void 0?O:v==null?void 0:v.name}))}return h},f)}},NM=gt([Vi,Ea,Doe,ZL,zi],Yoe),ZQe=gt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),eHe=gt([zi,R1],sM),sC=gt([ZQe,Vi,eHe],oM),tHe=gt([sC],e=>e.filter(m4)),rHe=gt([sC],lM),H1=gt([rHe,xp],cM),aHe=gt([tHe,xp,Vi],Foe),CM=gt([H1,Vi,sC],dM),nHe=gt([Vi],fM),sHe=gt([sC],e=>e.filter(m4)),iHe=gt([aHe,sHe,JN],Uoe),oHe=gt([iHe,xp,zi],Qoe),lHe=gt([sC],Roe),cHe=gt([H1,Vi,lHe,g4,zi],Hoe),uHe=gt([Voe,zi,R1],M1),dHe=gt([uHe,zi],qoe),fHe=gt([$oe,zi,R1],M1),AHe=gt([fHe,zi],Koe),hHe=gt([Goe,zi,R1],M1),mHe=gt([hHe,zi],Woe),pHe=gt([dHe,mHe,AHe],tS),gHe=gt([Vi,nHe,oHe,cHe,pHe,Ea,zi],AM),ble=gt([Vi,Ea,H1,CM,JN,zi,gHe],hM),xHe=gt([ble,Vi,NM],pM),vHe=gt([Vi,ble,xHe,zi],xM),yle=e=>{var t=zi(e),r=R1(e),a=!1;return rC(e,t,r,a)},wle=gt([Vi,yle],A4),Nle=gt([Vi,NM,vHe,wle],x4),bHe=gt([Ea,CM,Vi,zi],nle),yHe=gt([Ea,CM,Vi,zi],vM),wHe=(e,t,r,a,n,i,o,l)=>{if(t){var{type:c}=t,u=mp(e,l);if(a){var d=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,f=c==="category"&&a.bandwidth?a.bandwidth()/d:0;return f=l==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?lo(n[0]-n[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:a(h)+f,value:h,index:m,offset:f})):a.domain().map((h,m)=>({coordinate:a(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},p0=gt([Ea,Vi,NM,Nle,yle,bHe,yHe,zi],wHe),EM=gt([lle,cle,DQe],(e,t,r)=>ule(r.shared,e,t)),Cle=e=>e.tooltip.settings.trigger,jM=e=>e.tooltip.settings.defaultIndex,y4=gt([Q1,EM,Cle,jM],ple),ap=gt([y4,H1],wM),Ele=gt([p0,ap],dle),jle=gt([y4],e=>{if(e)return e.dataKey}),kle=gt([Q1,EM,Cle,jM],xle),NHe=gt([f0,A0,Ea,Qi,p0,jM,kle,nC],gle),CHe=gt([y4,NHe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),EHe=gt([y4],e=>e.active),jHe=gt([kle,ap,xp,Vi,Ele,nC,EM],vle),kHe=gt([jHe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Wq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kq(Object(r),!0).forEach(function(a){SHe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function SHe(e,t,r){return(t=_He(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _He(e){var t=BHe(e,"string");return typeof t=="symbol"?t:t+""}function BHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var THe=()=>sr(Vi),IHe=()=>{var e=THe(),t=sr(p0),r=sr(Nle);return eN(Wq(Wq({},e),{},{scale:r}),t)},OHe=()=>sr(ZL),kM=(e,t)=>t,Sle=(e,t,r)=>r,SM=(e,t,r,a)=>a,FHe=gt(p0,e=>K_(e,t=>t.coordinate)),_M=gt([Q1,kM,Sle,SM],ple),_le=gt([_M,H1],wM),DHe=(e,t,r)=>{if(t!=null){var a=Q1(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},Ble=gt([Q1,kM,Sle,SM],xle),rS=gt([f0,A0,Ea,Qi,p0,SM,Ble,nC],gle),PHe=gt([_M,rS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Tle=gt(p0,_le,dle),RHe=gt([Ble,_le,xp,Vi,Tle,nC,kM],vle),LHe=gt([_M],e=>({isActive:e.active,activeIndex:e.index})),MHe=(e,t,r,a,n,i,o,l)=>{if(!(!e||!t||!a||!n||!i)){var c=Z8e(e.chartX,e.chartY,t,r,l);if(c){var u=tLe(c,t),d=U8e(u,o,i,a,n),f=eLe(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function oD(){return oD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},oD.apply(null,arguments)}function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function rj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(a){UHe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UHe(e,t,r){return(t=QHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QHe(e){var t=HHe(e,"string");return typeof t=="symbol"?t:t+""}function HHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zHe(e){var{coordinate:t,payload:r,index:a,offset:n,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=a;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=JLe;else if(u==="BarChart")m=ZLe(o,d,n,i),g=Eie;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:N,endAngle:C}=jie(d);m={cx:x,cy:v,startAngle:N,endAngle:C,innerRadius:y,outerRadius:y},g=Sie}else m={points:RMe(o,d,n)},g=xie;var T=typeof l=="object"&&"className"in l?l.className:void 0,_=rj(rj(rj(rj({stroke:"#ccc",pointerEvents:"none"},n),m),$a(l,!1)),{},{payload:f,payloadIndex:h,className:fa("recharts-tooltip-cursor",T)});return w.isValidElement(l)?w.cloneElement(l,_):w.createElement(g,_)}function VHe(e){var t=IHe(),r=Aie(),a=EL(),n=OHe();return w.createElement(zHe,oD({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:n}))}var Ile=w.createContext(null),$He=()=>w.useContext(Ile),BI={exports:{}},Yq;function GHe(){return Yq||(Yq=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function n(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new n(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,N,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(C=1,N=new Array(y-1);C<y;C++)N[C-1]=arguments[C];v.fn.apply(v.context,N)}else{var T=v.length,_;for(C=0;C<T;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),y){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,d);break;case 3:v[C].fn.call(v[C].context,d,f);break;case 4:v[C].fn.call(v[C].context,d,f,h);break;default:if(!N)for(_=1,N=new Array(y-1);_<y;_++)N[_-1]=arguments[_];v[C].fn.apply(v[C].context,N)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(BI)),BI.exports}var qHe=GHe();const KHe=Ml(qHe);var iN=new KHe,lD="recharts.syncEvent.tooltip",Jq="recharts.syncEvent.brush";function BM(e,t){if(t){var r=Number.parseInt(t,10);if(!uu(r))return e==null?void 0:e[r]}}var WHe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Ole=mu({name:"options",initialState:WHe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),XHe=Ole.reducer,{createEventEmitter:YHe}=Ole.actions;function JHe(e){return e.tooltip.syncInteraction}var ZHe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Fle=mu({name:"chartData",initialState:ZHe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:Zq,setDataStartEndIndexes:eze,setComputedData:Txt}=Fle.actions,tze=Fle.reducer,Dle=()=>{};function rze(){var e=sr(eM),t=sr(tM),r=Xn(),a=sr(_oe),n=sr(p0),i=EL(),o=wL(),l=sr(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return Dle;var c=(u,d,f)=>{if(t!==f&&e===u){if(a==="index"){r(d);return}if(n!=null){var h;if(typeof a=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=a(n,m);h=n[g]}else a==="value"&&(h=n.find(O=>String(O.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(sD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,N=Math.min(v,o.x+o.width),C=Math.min(y,o.y+o.height),T={x:i==="horizontal"?h.coordinate:N,y:i==="horizontal"?C:h.coordinate},_=sD({active:d.payload.active,coordinate:T,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(_)}}};return iN.on(lD,c),()=>{iN.off(lD,c)}},[l,r,t,e,a,n,i,o])}function aze(){var e=sr(eM),t=sr(tM),r=Xn();w.useEffect(()=>{if(e==null)return Dle;var a=(n,i,o)=>{t!==o&&e===n&&r(eze(i))};return iN.on(Jq,a),()=>{iN.off(Jq,a)}},[r,t,e])}function nze(){var e=Xn();w.useEffect(()=>{e(YHe())},[e]),rze(),aze()}function sze(e,t,r,a,n,i){var o=sr(h=>DHe(h,e,t)),l=sr(tM),c=sr(eM),u=sr(_oe),d=sr(JHe),f=d==null?void 0:d.active;w.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=sD({active:i,coordinate:r,dataKey:o,index:n,label:typeof a=="number"?String(a):a});iN.emit(lD,c,h,l)}},[f,r,o,n,a,l,c,u,i])}function eK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function tK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eK(Object(r),!0).forEach(function(a){ize(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ize(e,t,r){return(t=oze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oze(e){var t=lze(e,"string");return typeof t=="symbol"?t:t+""}function lze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cze(e){return e.dataKey}function uze(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(BLe,t)}var rK=[],dze={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ax.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function hc(e){var t=dd(e,dze),{active:r,allowEscapeViewBox:a,animationDuration:n,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:N,portal:C,axisId:T}=t,_=Xn(),O=typeof N=="number"?String(N):N;w.useEffect(()=>{_(MQe({shared:v,trigger:y,axisId:T,active:r,defaultIndex:O}))},[_,v,y,T,r,O]);var j=wL(),S=gie(),B=FQe(v),{activeIndex:L,isActive:D}=sr(Y=>LHe(Y,B,y,O)),k=sr(Y=>RHe(Y,B,y,O)),R=sr(Y=>Tle(Y,B,y,O)),U=sr(Y=>PHe(Y,B,y,O)),H=k,Q=$He(),V=r??D,[G,J]=Ose([H,V]),W=B==="axis"?R:void 0;sze(B,y,U,W,L,V);var Z=C??Q;if(Z==null)return null;var M=H??rK;V||(M=rK),l&&M.length&&(M=kse(H.filter(Y=>Y.value!=null&&(Y.hide!==!0||t.includeHidden)),d,cze));var F=M.length>0,X=w.createElement(RLe,{allowEscapeViewBox:a,animationDuration:n,animationEasing:i,isAnimationActive:c,active:V,coordinate:U,hasPayload:F,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:j,wrapperStyle:g,lastBoundingBox:G,innerRef:J,hasPortalFromProps:!!C},uze(o,tK(tK({},t),{},{payload:M,label:W,active:V,coordinate:U,accessibilityLayer:S})));return w.createElement(w.Fragment,null,tL.createPortal(X,Z),V&&w.createElement(VHe,{cursor:x,tooltipEventType:B,coordinate:U,payload:H,index:L}))}var TI={},II={},OI={},aK;function fze(){return aK||(aK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:n,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},a)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...N){if(n!=null&&n.aborted)return;o=this,l=N;const C=h==null;m(),c&&C&&d()};return y.schedule=m,y.cancel=x,y.flush=v,n==null||n.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(OI)),OI}var nK;function Aze(){return nK||(nK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fze();function r(a,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=a.apply(this,x),f=null},n,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=a.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(II)),II}var sK;function hze(){return sK||(sK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aze();function r(a,n=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,n,{leading:o,maxWait:n,trailing:l})}e.throttle=r}(TI)),TI}var FI,iK;function mze(){return iK||(iK=1,FI=hze().throttle),FI}var pze=mze();const gze=Ml(pze);var sw=function(t,r){for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i]};function oK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function DI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oK(Object(r),!0).forEach(function(a){xze(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xze(e,t,r){return(t=vze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vze(e){var t=bze(e,"string");return typeof t=="symbol"?t:t+""}function bze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mc=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:n="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=w.useRef(null),v=w.useRef();v.current=m,w.useImperativeHandle(t,()=>x.current);var[y,N]=w.useState({containerWidth:a.width,containerHeight:a.height}),C=w.useCallback((_,O)=>{N(j=>{var S=Math.round(_),B=Math.round(O);return j.containerWidth===S&&j.containerHeight===B?j:{containerWidth:S,containerHeight:B}})},[]);w.useEffect(()=>{var _=B=>{var L,{width:D,height:k}=B[0].contentRect;C(D,k),(L=v.current)===null||L===void 0||L.call(v,D,k)};d>0&&(_=gze(_,d,{trailing:!0,leading:!1}));var O=new ResizeObserver(_),{width:j,height:S}=x.current.getBoundingClientRect();return C(j,S),O.observe(x.current),()=>{O.disconnect()}},[C,d]);var T=w.useMemo(()=>{var{containerWidth:_,containerHeight:O}=y;if(_<0||O<0)return null;sw(cg(n)||cg(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,i),sw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var j=cg(n)?_:n,S=cg(i)?O:i;return r&&r>0&&(j?S=j/r:S&&(j=S*r),c&&S>c&&(S=c)),sw(j>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,S,n,i,o,l,r),w.Children.map(u,B=>w.cloneElement(B,{width:j,height:S,style:DI({width:j,height:S},B.props.style)}))},[r,u,i,c,l,o,y,n]);return w.createElement("div",{id:f?"".concat(f):void 0,className:fa("recharts-responsive-container",h),style:DI(DI({},g),{},{width:n,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))}),Jh=e=>null;Jh.displayName="Cell";function yze(e,t,r){return(t=wze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wze(e){var t=Nze(e,"string");return typeof t=="symbol"?t:t+""}function Nze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Cze{constructor(t){yze(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function lK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Eze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lK(Object(r),!0).forEach(function(a){jze(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jze(e,t,r){return(t=kze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kze(e){var t=Sze(e,"string");return typeof t=="symbol"?t:t+""}function Sze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ze={cacheSize:2e3,enableCache:!0},Ple=Eze({},_ze),cK=new Cze(Ple.cacheSize),Bze={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uK="recharts_measurement_span";function Tze(e,t){var r=t.fontSize||"",a=t.fontFamily||"",n=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(l)}var dK=(e,t)=>{try{var r=document.getElementById(uK);r||(r=document.createElement("span"),r.setAttribute("id",uK),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Bze,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},iw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ax.isSsr)return{width:0,height:0};if(!Ple.enableCache)return dK(t,r);var a=Tze(t,r),n=cK.get(a);if(n)return n;var i=dK(t,r);return cK.set(a,i),i},fK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ize=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Oze=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Rle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Fze=Object.keys(Rle),Lv="NaN";function Dze(e,t){return e*Rle[t]}class nc{static parse(t){var r,[,a,n]=(r=Oze.exec(t))!==null&&r!==void 0?r:[];return new nc(parseFloat(a),n??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,uu(t)&&(this.unit=""),r!==""&&!Ize.test(r)&&(this.num=NaN,this.unit=""),Fze.includes(r)&&(this.num=Dze(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new nc(NaN,""):new nc(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new nc(NaN,""):new nc(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nc(NaN,""):new nc(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nc(NaN,""):new nc(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return uu(this.num)}}function Lle(e){if(e.includes(Lv))return Lv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,n,i]=(r=fK.exec(t))!==null&&r!==void 0?r:[],o=nc.parse(a??""),l=nc.parse(i??""),c=n==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Lv;t=t.replace(fK,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=AK.exec(t))!==null&&u!==void 0?u:[],m=nc.parse(d??""),g=nc.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return Lv;t=t.replace(AK,x.toString())}return t}var hK=/\(([^()]*)\)/;function Pze(e){for(var t=e,r;(r=hK.exec(t))!=null;){var[,a]=r;t=t.replace(hK,Lle(a))}return t}function Rze(e){var t=e.replace(/\s+/g,"");return t=Pze(t),t=Lle(t),t}function Lze(e){try{return Rze(e)}catch{return Lv}}function PI(e){var t=Lze(e.slice(5,-1));return t===Lv?"":t}var Mze=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Uze=["dx","dy","angle","className","breakAll"];function cD(){return cD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},cD.apply(null,arguments)}function mK(e,t){if(e==null)return{};var r,a,n=Qze(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qze(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Mle=/[ \f\n\r\t\v\u2028\u2029]+/,Ule=e=>{var{children:t,breakAll:r,style:a}=e;try{var n=[];Rs(t)||(r?n=t.toString().split(""):n=t.toString().split(Mle));var i=n.map(l=>({word:l,width:iw(l,a).width})),o=r?0:iw(" ",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Hze=(e,t,r,a,n)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=dr(i),d=o,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((k,R)=>{var{word:U,width:H}=R,Q=k[k.length-1];if(Q&&(a==null||n||Q.width+H+r<Number(a)))Q.words.push(U),Q.width+=H+r;else{var V={words:[U],width:H};k.push(V)}return k},[])},h=f(t),m=L=>L.reduce((D,k)=>D.width>k.width?D:k);if(!u||n)return h;var g=h.length>i||m(h).width>Number(a);if(!g)return h;for(var x="…",v=L=>{var D=d.slice(0,L),k=Ule({breakAll:c,style:l,children:D+x}).wordsWithComputedWidth,R=f(k),U=R.length>i||m(R).width>Number(a);return[U,R]},y=0,N=d.length-1,C=0,T;y<=N&&C<=d.length-1;){var _=Math.floor((y+N)/2),O=_-1,[j,S]=v(O),[B]=v(_);if(!j&&!B&&(y=_+1),j&&B&&(N=_-1),!j&&B){T=S;break}C++}return T||h},pK=e=>{var t=Rs(e)?[]:e.toString().split(Mle);return[{words:t}]},zze=e=>{var{width:t,scaleToFit:r,children:a,style:n,breakAll:i,maxLines:o}=e;if((t||r)&&!Ax.isSsr){var l,c,u=Ule({breakAll:i,children:a,style:n});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return pK(a);return Hze({breakAll:i,children:a,maxLines:o,style:n},l,c,t,r)}return pK(a)},gK="#808080",z1=w.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:n="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=gK}=e,d=mK(e,Mze),f=w.useMemo(()=>zze({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=mK(d,Uze);if(!jA(r)||!jA(a))return null;var N=r+(dr(h)?h:0),C=a+(dr(m)?m:0),T;switch(c){case"start":T=PI("calc(".concat(i,")"));break;case"middle":T=PI("calc(".concat((f.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:T=PI("calc(".concat(f.length-1," * -").concat(n,")"));break}var _=[];if(o){var O=f[0].width,{width:j}=d;_.push("scale(".concat(dr(j)?j/O:1,")"))}return g&&_.push("rotate(".concat(g,", ").concat(N,", ").concat(C,")")),_.length&&(y.transform=_.join(" ")),w.createElement("text",cD({},$a(y,!0),{ref:t,x:N,y:C,className:fa("recharts-text",x),textAnchor:l,fill:u.includes("url")?gK:u}),f.map((S,B)=>{var L=S.words.join(v?"":" ");return w.createElement("tspan",{x:N,dy:B===0?T:n,key:"".concat(L,"-").concat(B)},L)}))});z1.displayName="Text";var Vze=["offset"],$ze=["labelRef"];function xK(e,t){if(e==null)return{};var r,a,n=Gze(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gze(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function vK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vK(Object(r),!0).forEach(function(a){qze(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qze(e,t,r){return(t=Kze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kze(e){var t=Wze(e,"string");return typeof t=="symbol"?t:t+""}function Wze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vh.apply(null,arguments)}var Xze=e=>{var{value:t,formatter:r}=e,a=Rs(e.children)?t:e.children;return typeof r=="function"?r(a):a},TM=e=>e!=null&&typeof e=="function",Yze=(e,t)=>{var r=lo(t-e),a=Math.min(Math.abs(t-e),360);return r*a},Jze=(e,t,r,a)=>{var{position:n,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=a,g=(u+d)/2,x=Yze(f,h),v=x>=0?1:-1,y,N;n==="insideStart"?(y=f+v*i,N=m):n==="insideEnd"?(y=h-v*i,N=!m):n==="end"&&(y=h+v*i,N=m),N=x<=0?N:!N;var C=Ya(l,c,g,y),T=Ya(l,c,g,y+(N?1:-1)*359),_="M".concat(C.x,",").concat(C.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(T.x,",").concat(T.y),O=Rs(e.id)?Yw("recharts-radial-line-"):e.id;return w.createElement("text",vh({},r,{dominantBaseline:"central",className:fa("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:O,d:_})),w.createElement("textPath",{xlinkHref:"#".concat(O)},t))},Zze=(e,t,r)=>{var{cx:a,cy:n,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=Ya(a,n,o+t,u);return{x:d,y:f,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"end"};var h=(i+o)/2,{x:m,y:g}=Ya(a,n,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},eVe=(e,t)=>{var{parentViewBox:r,offset:a,position:n}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*a,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*a,x=m>0?"end":"start",v=m>0?"start":"end";if(n==="top"){var y={x:i+l/2,y:o-u*a,textAnchor:"middle",verticalAnchor:f};return js(js({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(n==="bottom"){var N={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return js(js({},N),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(n==="left"){var C={x:i-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return js(js({},C),r?{width:Math.max(C.x-r.x,0),height:c}:{})}if(n==="right"){var T={x:i+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return js(js({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:c}:{})}var _=r?{width:l,height:c}:{};return n==="insideLeft"?js({x:i+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},_):n==="insideRight"?js({x:i+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},_):n==="insideTop"?js({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},_):n==="insideBottom"?js({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},_):n==="insideTopLeft"?js({x:i+g,y:o+d,textAnchor:v,verticalAnchor:h},_):n==="insideTopRight"?js({x:i+l-g,y:o+d,textAnchor:x,verticalAnchor:h},_):n==="insideBottomLeft"?js({x:i+g,y:o+c-d,textAnchor:v,verticalAnchor:f},_):n==="insideBottomRight"?js({x:i+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},_):n&&typeof n=="object"&&(dr(n.x)||cg(n.x))&&(dr(n.y)||cg(n.y))?js({x:i+Ll(n.x,l),y:o+Ll(n.y,c),textAnchor:"end",verticalAnchor:"end"},_):js({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},_)},tVe=e=>"cx"in e&&dr(e.cx);function dc(e){var{offset:t=5}=e,r=xK(e,Vze),a=js({offset:t},r),{viewBox:n,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=a,h=sr(P1),m=wL(),g=i==="center"?m:h??m,x=n||g;if(!x||Rs(o)&&Rs(l)&&!w.isValidElement(c)&&typeof c!="function")return null;var v=js(js({},a),{},{viewBox:x});if(w.isValidElement(c)){var{labelRef:y}=v,N=xK(v,$ze);return w.cloneElement(c,N)}var C;if(typeof c=="function"){if(C=w.createElement(c,v),w.isValidElement(C))return C}else C=Xze(a);var T=tVe(x),_=$a(a,!0);if(T&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Jze(a,C,_,x);var O=T?Zze(x,a.offset,a.position):eVe(a,x);return w.createElement(z1,vh({ref:f,className:fa("recharts-label",u)},_,O,{breakAll:d}),C)}dc.displayName="Label";var Qle=e=>{var{cx:t,cy:r,angle:a,startAngle:n,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(dr(g)&&dr(x)){if(dr(d)&&dr(f))return{x:d,y:f,width:g,height:x};if(dr(h)&&dr(m))return{x:h,y:m,width:g,height:x}}if(dr(d)&&dr(f))return{x:d,y:f,width:0,height:0};if(dr(t)&&dr(r))return{cx:t,cy:r,startAngle:n||a||0,endAngle:i||a||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},rVe=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?w.createElement(dc,vh({key:"label-implicit"},a)):jA(e)?w.createElement(dc,vh({key:"label-implicit",value:e},a)):w.isValidElement(e)?e.type===dc?w.cloneElement(e,js({key:"label-implicit"},a)):w.createElement(dc,vh({key:"label-implicit",content:e},a)):TM(e)?w.createElement(dc,vh({key:"label-implicit",content:e},a)):e&&typeof e=="object"?w.createElement(dc,vh({},e,{key:"label-implicit"},a)):null},aVe=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:n,labelRef:i}=t,o=Qle(t),l=GN(n,dc).map((u,d)=>w.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!a)return l;var c=rVe(t.label,r||o,i);return[c,...l]};dc.parseViewBox=Qle;dc.renderCallByParent=aVe;var RI={},LI={},bK;function nVe(){return bK||(bK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(LI)),LI}var MI={},yK;function sVe(){return yK||(yK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(MI)),MI}var wK;function iVe(){return wK||(wK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nVe(),r=sVe(),a=lL();function n(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=n}(RI)),RI}var UI,NK;function oVe(){return NK||(NK=1,UI=iVe().last),UI}var lVe=oVe();const Hle=Ml(lVe);var cVe=["valueAccessor"],uVe=["data","dataKey","clockWise","id","textBreakAll"];function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},aS.apply(null,arguments)}function CK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function EK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CK(Object(r),!0).forEach(function(a){dVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dVe(e,t,r){return(t=fVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fVe(e){var t=AVe(e,"string");return typeof t=="symbol"?t:t+""}function AVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jK(e,t){if(e==null)return{};var r,a,n=hVe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hVe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var mVe=e=>Array.isArray(e.value)?Hle(e.value):e.value;function Rm(e){var{valueAccessor:t=mVe}=e,r=jK(e,cVe),{data:a,dataKey:n,clockWise:i,id:o,textBreakAll:l}=r,c=jK(r,uVe);return!a||!a.length?null:w.createElement(hs,{className:"recharts-label-list"},a.map((u,d)=>{var f=Rs(n)?t(u,d):Hn(u&&u.payload,n),h=Rs(o)?{}:{id:"".concat(o,"-").concat(d)};return w.createElement(dc,aS({},$a(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:dc.parseViewBox(Rs(i)?u:EK(EK({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}Rm.displayName="LabelList";function pVe(e,t){return e?e===!0?w.createElement(Rm,{key:"labelList-implicit",data:t}):w.isValidElement(e)||TM(e)?w.createElement(Rm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(Rm,aS({data:t},e,{key:"labelList-implicit"})):null:null}function gVe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,n=GN(a,Rm).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return n;var i=pVe(e.label,t);return[i,...n]}Rm.renderCallByParent=gVe;var xVe=["points","className","baseLinePoints","connectNulls"];function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mv.apply(null,arguments)}function vVe(e,t){if(e==null)return{};var r,a,n=bVe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bVe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var kK=e=>e&&e.x===+e.x&&e.y===+e.y,yVe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(a=>{kK(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),kK(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ow=(e,t)=>{var r=yVe(e);t&&(r=[r.reduce((n,i)=>[...n,...i],[])]);var a=r.map(n=>n.reduce((i,o,l)=>"".concat(i).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(a,"Z"):a},wVe=(e,t,r)=>{var a=ow(e,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ow(t.reverse(),r).slice(1))},zle=e=>{var{points:t,className:r,baseLinePoints:a,connectNulls:n}=e,i=vVe(e,xVe);if(!t||!t.length)return null;var o=fa("recharts-polygon",r);if(a&&a.length){var l=i.stroke&&i.stroke!=="none",c=wVe(t,a,n);return w.createElement("g",{className:o},w.createElement("path",Mv({},$a(i,!0),{fill:c.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:c})),l?w.createElement("path",Mv({},$a(i,!0),{fill:"none",d:ow(t,n)})):null,l?w.createElement("path",Mv({},$a(i,!0),{fill:"none",d:ow(a,n)})):null)}var u=ow(t,n);return w.createElement("path",Mv({},$a(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",className:o,d:u}))};function uD(){return uD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uD.apply(null,arguments)}var IM=e=>{var{cx:t,cy:r,r:a,className:n}=e,i=fa("recharts-dot",n);return t===+t&&r===+r&&a===+a?w.createElement("circle",uD({},yl(e),Z8(e),{className:i,cx:t,cy:r,r:a})):null},OM=e=>e.graphicalItems.polarItems,NVe=gt([Fn,eC],sM),FM=gt([OM,li,NVe],oM),CVe=gt([FM],lM),DM=gt([CVe,d4],cM),Vle=gt([DM,li,FM],dM),EVe=gt([DM,li,FM],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(n=>{var i,o=Hn(a,(i=t.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Hn(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),SK=()=>{},jVe=gt([li,Xoe,SK,EVe,SK,Ea,Fn],AM),$le=gt([li,Ea,DM,Vle,JN,Fn,jVe],hM),Gle=gt([$le,li,bp],pM),kVe=gt([li,$le,Gle,Fn],xM),PM=(e,t,r)=>{switch(t){case"angleAxis":return D1(e,r);case"radiusAxis":return ZN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RM=(e,t,r)=>{switch(t){case"angleAxis":return V9e(e,r);case"radiusAxis":return $9e(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},V1=gt([PM,bp,kVe,RM],x4),qle=gt([Ea,Vle,L1,Fn],vM),$1=gt([Ea,PM,bp,V1,Gle,RM,aC,qle,Fn],sle);gt([Ea,PM,V1,RM,aC,qle,Fn],ole);var SVe=(e,t)=>$1(e,"angleAxis",t,!1),_Ve=gt([SVe],e=>{if(e)return e.map(t=>t.coordinate)}),BVe=(e,t)=>$1(e,"radiusAxis",t,!1),TVe=gt([BVe],e=>{if(e)return e.map(t=>t.coordinate)}),IVe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function OVe(e,t){if(e==null)return{};var r,a,n=FVe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FVe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zh.apply(null,arguments)}function _K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Yb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_K(Object(r),!0).forEach(function(a){DVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_K(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function DVe(e,t,r){return(t=PVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PVe(e){var t=RVe(e,"string");return typeof t=="symbol"?t:t+""}function RVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LVe=(e,t,r,a)=>{var n="";return a.forEach((i,o)=>{var l=Ya(t,r,e,i);o?n+="L ".concat(l.x,",").concat(l.y):n+="M ".concat(l.x,",").concat(l.y)}),n+="Z",n},MVe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,polarAngles:i,radialLines:o}=e;if(!i||!i.length||!o)return null;var l=Yb({stroke:"#ccc"},yl(e));return w.createElement("g",{className:"recharts-polar-grid-angle"},i.map(c=>{var u=Ya(t,r,a,c),d=Ya(t,r,n,c);return w.createElement("line",Zh({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},UVe=e=>{var{cx:t,cy:r,radius:a,index:n}=e,i=Yb(Yb({stroke:"#ccc"},yl(e)),{},{fill:"none"});return w.createElement("circle",Zh({},i,{className:fa("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(n),cx:t,cy:r,r:a}))},QVe=e=>{var{radius:t,index:r}=e,a=Yb(Yb({stroke:"#ccc"},yl(e)),{},{fill:"none"});return w.createElement("path",Zh({},a,{className:fa("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:LVe(t,e.cx,e.cy,e.polarAngles)}))},HVe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:w.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((a,n)=>{var i=n;return r==="circle"?w.createElement(UVe,Zh({key:i},e,{radius:a,index:n})):w.createElement(QVe,Zh({key:i},e,{radius:a,index:n}))}))},Kle=e=>{var t,r,a,n,i,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=OVe(e,IVe),N=sr(P1),C=Yb({cx:(t=(r=N==null?void 0:N.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(a=(n=N==null?void 0:N.cy)!==null&&n!==void 0?n:g)!==null&&a!==void 0?a:0,innerRadius:(i=(o=N==null?void 0:N.innerRadius)!==null&&o!==void 0?o:x)!==null&&i!==void 0?i:0,outerRadius:(l=(c=N==null?void 0:N.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:T,polarRadius:_,cx:O,cy:j,innerRadius:S,outerRadius:B}=C,L=sr(U=>_Ve(U,f)),D=sr(U=>TVe(U,h)),k=Array.isArray(T)?T:L,R=Array.isArray(_)?_:D;return B<=0||k==null||R==null?null:w.createElement("g",{className:"recharts-polar-grid"},w.createElement(MVe,Zh({cx:O,cy:j,innerRadius:S,outerRadius:B,gridType:u,radialLines:d},C,{polarAngles:k,polarRadius:R})),w.createElement(HVe,Zh({cx:O,cy:j,innerRadius:S,outerRadius:B,gridType:u,radialLines:d},C,{polarAngles:k,polarRadius:R})))};Kle.displayName="PolarGrid";var QI={},HI={},BK;function zVe(){return BK||(BK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){if(r.length===0)return;let n=r[0],i=a(n);for(let o=1;o<r.length;o++){const l=r[o],c=a(l);c>i&&(i=c,n=l)}return n}e.maxBy=t}(HI)),HI}var TK;function VVe(){return TK||(TK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zVe(),r=q_(),a=AL();function n(i,o){if(i!=null)return t.maxBy(Array.from(i),a.iteratee(o??r.identity))}e.maxBy=n}(QI)),QI}var zI,IK;function $Ve(){return IK||(IK=1,zI=VVe().maxBy),zI}var GVe=$Ve();const qVe=Ml(GVe);var VI={},$I={},OK;function KVe(){return OK||(OK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){if(r.length===0)return;let n=r[0],i=a(n);for(let o=1;o<r.length;o++){const l=r[o],c=a(l);c<i&&(i=c,n=l)}return n}e.minBy=t}($I)),$I}var FK;function WVe(){return FK||(FK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KVe(),r=q_(),a=AL();function n(i,o){if(i!=null)return t.minBy(Array.from(i),a.iteratee(o??r.identity))}e.minBy=n}(VI)),VI}var GI,DK;function XVe(){return DK||(DK=1,GI=WVe().minBy),GI}var YVe=XVe();const JVe=Ml(YVe);var ZVe={radiusAxis:{},angleAxis:{}},Wle=mu({name:"polarAxis",initialState:ZVe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:e$e,removeRadiusAxis:t$e,addAngleAxis:r$e,removeAngleAxis:a$e}=Wle.actions,n$e=Wle.reducer,s$e=["cx","cy","angle","axisLine"],i$e=["angle","tickFormatter","stroke","tick"];function oN(){return oN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},oN.apply(null,arguments)}function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function dA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(a){w4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function w4(e,t,r){return(t=o$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o$e(e){var t=l$e(e,"string");return typeof t=="symbol"?t:t+""}function l$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xle(e,t){if(e==null)return{};var r,a,n=c$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function c$e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Yle="radiusAxis";function u$e(e){var t=Xn();return w.useEffect(()=>(t(e$e(e)),()=>{t(t$e(e))})),null}var d$e=(e,t,r,a)=>{var{coordinate:n}=e;return Ya(r,a,n,t)},f$e=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},A$e=(e,t,r,a)=>{var n=qVe(a,o=>o.coordinate||0),i=JVe(a,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:i.coordinate||0,outerRadius:n.coordinate||0}},h$e=(e,t)=>{var{cx:r,cy:a,angle:n,axisLine:i}=e,o=Xle(e,s$e),l=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=Ya(r,a,l[0],n),u=Ya(r,a,l[1],n),d=dA(dA(dA({},yl(o)),{},{fill:"none"},$a(i,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return w.createElement("line",oN({className:"recharts-polar-radius-axis-line"},d))},m$e=(e,t,r)=>{var a;return w.isValidElement(e)?a=w.cloneElement(e,t):typeof e=="function"?a=e(t):a=w.createElement(z1,oN({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),a},p$e=(e,t)=>{var{angle:r,tickFormatter:a,stroke:n,tick:i}=e,o=Xle(e,i$e),l=f$e(e.orientation),c=yl(o),u=$a(i,!1),d=t.map((f,h)=>{var m=d$e(f,e.angle,e.cx,e.cy),g=dA(dA(dA(dA({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:n},u),{},{index:h},m),{},{payload:f});return w.createElement(hs,oN({className:fa("recharts-polar-radius-axis-tick",sie(i)),key:"tick-".concat(f.coordinate)},dx(e,f,h)),m$e(i,g,a?a(f.value,h):f.value))});return w.createElement(hs,{className:"recharts-polar-radius-axis-ticks"},d)},g$e=e=>{var{radiusAxisId:t}=e,r=sr(P1),a=sr(c=>V1(c,"radiusAxis",t)),n=sr(c=>$1(c,"radiusAxis",t,!1));if(r==null||!n||!n.length)return null;var i=dA(dA(dA({},e),{},{scale:a},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=i;return w.createElement(hs,{className:fa("recharts-polar-radius-axis",Yle,i.className)},l&&h$e(i,n),o&&p$e(i,n),dc.renderCallByParent(i,A$e(i.angle,i.cx,i.cy,n)))};class N4 extends w.PureComponent{render(){return w.createElement(w.Fragment,null,w.createElement(u$e,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),w.createElement(g$e,this.props))}}w4(N4,"displayName","PolarRadiusAxis");w4(N4,"axisType",Yle);w4(N4,"defaultProps",cc);var x$e=["children"];function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},e0.apply(null,arguments)}function RK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function iA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RK(Object(r),!0).forEach(function(a){C4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function C4(e,t,r){return(t=v$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v$e(e){var t=b$e(e,"string");return typeof t=="symbol"?t:t+""}function b$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y$e(e,t){if(e==null)return{};var r,a,n=w$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function w$e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var N$e=Math.PI/180,LK=1e-5,Jle="angleAxis";function C$e(e){var t=Xn(),r=w.useMemo(()=>{var{children:i}=e,o=y$e(e,x$e);return o},[e]),a=sr(i=>D1(i,r.id)),n=r===a;return w.useEffect(()=>(t(r$e(r)),()=>{t(a$e(r))}),[t,r]),n?e.children:null}var E$e=(e,t)=>{var{cx:r,cy:a,radius:n,orientation:i,tickSize:o}=t,l=o||8,c=Ya(r,a,n,e.coordinate),u=Ya(r,a,n+(i==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},j$e=(e,t)=>{var r=Math.cos(-e.coordinate*N$e);return r>LK?t==="outer"?"start":"end":r<-LK?t==="outer"?"end":"start":"middle"},k$e=e=>{var{cx:t,cy:r,radius:a,axisLineType:n,axisLine:i,ticks:o}=e;if(!i)return null;var l=iA(iA({},yl(e)),{},{fill:"none"},$a(i,!1));if(n==="circle")return w.createElement(IM,e0({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:a}));var c=o.map(u=>Ya(t,r,a,u.coordinate));return w.createElement(zle,e0({className:"recharts-polar-angle-axis-line"},l,{points:c}))},S$e=e=>{var{tick:t,tickProps:r,value:a}=e;return t?w.isValidElement(t)?w.cloneElement(t,r):typeof t=="function"?t(r):w.createElement(z1,e0({},r,{className:"recharts-polar-angle-axis-tick-value"}),a):null},_$e=e=>{var{tick:t,tickLine:r,tickFormatter:a,stroke:n,ticks:i}=e,o=yl(e),l=$a(t,!1),c=iA(iA({},o),{},{fill:"none"},$a(r,!1)),u=i.map((d,f)=>{var h=E$e(d,e),m=j$e(d,e.orientation),g=iA(iA(iA({},o),{},{textAnchor:m,stroke:"none",fill:n},l),{},{index:f,payload:d,x:h.x2,y:h.y2});return w.createElement(hs,e0({className:fa("recharts-polar-angle-axis-tick",sie(t)),key:"tick-".concat(d.coordinate)},dx(e,d,f)),r&&w.createElement("line",e0({className:"recharts-polar-angle-axis-tick-line"},c,h)),w.createElement(S$e,{tick:t,tickProps:g,value:a?a(d.value,f):d.value}))});return w.createElement(hs,{className:"recharts-polar-angle-axis-ticks"},u)},B$e=e=>{var{angleAxisId:t}=e,r=sr(P1),a=sr(l=>V1(l,"angleAxis",t)),n=Cc(),i=sr(l=>$1(l,"angleAxis",t,n));if(r==null||!i||!i.length)return null;var o=iA(iA(iA({},e),{},{scale:a},r),{},{radius:r.outerRadius});return w.createElement(hs,{className:fa("recharts-polar-angle-axis",Jle,o.className)},w.createElement(k$e,e0({},o,{ticks:i})),w.createElement(_$e,e0({},o,{ticks:i})))};class E4 extends w.PureComponent{render(){return this.props.radius<=0?null:w.createElement(C$e,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},w.createElement(B$e,this.props))}}C4(E4,"displayName","PolarAngleAxis");C4(E4,"axisType",Jle);C4(E4,"defaultProps",sA);function MK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function UK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MK(Object(r),!0).forEach(function(a){T$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function T$e(e,t,r){return(t=I$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I$e(e){var t=O$e(e,"string");return typeof t=="symbol"?t:t+""}function O$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F$e=(e,t)=>t,LM=gt([OM,F$e],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),D$e=[],MM=(e,t,r)=>(r==null?void 0:r.length)===0?D$e:r,Zle=gt([d4,LM,MM],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=a,(!n||!n.length)&&r!=null&&(n=r.map(i=>UK(UK({},t.presentationProps),i.props))),n!=null)return n}}),P$e=gt([Zle,LM,MM],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,n)=>{var i,o=Hn(a,t.nameKey,t.name),l;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:T1(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),R$e=gt([Zle,LM,MM,Qi],(e,t,r,a)=>{if(!(t==null||e==null))return BGe({offset:a,pieSettings:t,displayedData:e,cells:r})}),qI={},QK;function L$e(){return QK||(QK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(qI)),qI}var KI,HK;function M$e(){return HK||(HK=1,KI=L$e().isPlainObject),KI}var U$e=M$e();const Q$e=Ml(U$e);function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nS.apply(null,arguments)}var zK=(e,t,r,a,n)=>{var i=r-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+n),o+="L ".concat(e+r-i/2-a,",").concat(t+n),o+="L ".concat(e,",").concat(t," Z"),o},H$e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},z$e=e=>{var t=dd(e,H$e),r=w.useRef(),[a,n]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&n(v)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=fa("recharts-trapezoid",d);return g?w.createElement(Hk,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:i,y:o},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:N,height:C,x:T,y:_}=v;return w.createElement(Hk,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},w.createElement("path",nS({},$a(t,!0),{className:x,d:zK(T,_,y,N,C),ref:r})))}):w.createElement("g",null,w.createElement("path",nS({},$a(t,!0),{className:x,d:zK(i,o,l,c,u)})))},V$e=["option","shapeType","propTransformer","activeClassName","isActive"];function $$e(e,t){if(e==null)return{};var r,a,n=G$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function G$e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function VK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function sS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VK(Object(r),!0).forEach(function(a){q$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function q$e(e,t,r){return(t=K$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K$e(e){var t=W$e(e,"string");return typeof t=="symbol"?t:t+""}function W$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X$e(e,t){return sS(sS({},t),e)}function Y$e(e,t){return e==="symbols"}function $K(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(Eie,r);case"trapezoid":return w.createElement(z$e,r);case"sector":return w.createElement(Sie,r);case"symbols":if(Y$e(t))return w.createElement(sL,r);break;default:return null}}function J$e(e){return w.isValidElement(e)?e.props:e}function ece(e){var{option:t,shapeType:r,propTransformer:a=X$e,activeClassName:n="recharts-active-shape",isActive:i}=e,o=$$e(e,V$e),l;if(w.isValidElement(t))l=w.cloneElement(t,sS(sS({},o),J$e(t)));else if(typeof t=="function")l=t(o);else if(Q$e(t)&&typeof t!="boolean"){var c=a(t,o);l=w.createElement($K,{shapeType:r,elementProps:c})}else{var u=o;l=w.createElement($K,{shapeType:r,elementProps:u})}return i?w.createElement(hs,{className:n},l):l}var UM=(e,t)=>{var r=Xn();return(a,n)=>i=>{e==null||e(a,n,i),r(Ale({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},QM=e=>{var t=Xn();return(r,a)=>n=>{e==null||e(r,a,n),t(UQe())}},HM=(e,t)=>{var r=Xn();return(a,n)=>i=>{e==null||e(a,n,i),r(QQe({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function zM(e){var{fn:t,args:r}=e,a=Xn(),n=Cc();return w.useEffect(()=>{if(!n){var i=t(r);return a(RQe(i)),()=>{a(LQe(i))}}},[t,r,a,n]),null}var tce=()=>{};function Z$e(e){var{legendPayload:t}=e,r=Xn(),a=Cc();return w.useEffect(()=>a?tce:(r(mie(t)),()=>{r(pie(t))}),[r,a,t]),null}function rce(e){var{legendPayload:t}=e,r=Xn(),a=sr(Ea);return w.useEffect(()=>a!=="centric"&&a!=="radial"?tce:(r(mie(t)),()=>{r(pie(t))}),[r,a,t]),null}function VM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(Yw(t)),a=w.useRef(e);return a.current!==e&&(r.current=Yw(t),a.current=e),r.current}var WI,eGe=()=>{var[e]=w.useState(()=>Yw("uid-"));return e},tGe=(WI=dme.useId)!==null&&WI!==void 0?WI:eGe;function rGe(e,t){var r=tGe();return t||(e?"".concat(e,"-").concat(r):r)}var aGe=w.createContext(void 0),$M=e=>{var{id:t,type:r,children:a}=e,n=rGe("recharts-".concat(r),t);return w.createElement(aGe.Provider,{value:n},a(n))},nGe={cartesianItems:[],polarItems:[]},ace=mu({name:"graphicalItems",initialState:nGe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,n=Ph(e).cartesianItems.indexOf(r);n>-1&&(e.cartesianItems[n]=a)},removeCartesianGraphicalItem(e,t){var r=Ph(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Ph(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:sGe,replaceCartesianGraphicalItem:iGe,removeCartesianGraphicalItem:oGe,addPolarGraphicalItem:lGe,removePolarGraphicalItem:cGe}=ace.actions,uGe=ace.reducer;function dGe(e){var t=Xn(),r=w.useRef(null);return w.useEffect(()=>{r.current===null?t(sGe(e)):r.current!==e&&t(iGe({prev:r.current,next:e})),r.current=e},[t,e]),w.useEffect(()=>()=>{r.current&&(t(oGe(r.current)),r.current=null)},[t]),null}function nce(e){var t=Xn();return w.useEffect(()=>(t(lGe(e)),()=>{t(cGe(e))}),[t,e]),null}function fGe(){}var AGe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},GK={t:0},XI={t:1};function GM(e){var t=dd(e,AGe),{isActive:r,canBegin:a,duration:n,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=Cie("JavascriptAnimate",t.animationManager),[f,h]=w.useState(r?GK:XI),m=w.useRef(null);return w.useEffect(()=>{r||h(XI)},[r]),w.useEffect(()=>{if(!r||!a)return fGe;var g=Nie(GK,XI,yie(i),n,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,n,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,a,n,i,o,c,l,d]),u(f.t)}var hGe=["onMouseEnter","onClick","onMouseLeave"],mGe=["id"],pGe=["id"];function qM(e,t){if(e==null)return{};var r,a,n=gGe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function qK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qK(Object(r),!0).forEach(function(a){xGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xGe(e,t,r){return(t=vGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vGe(e){var t=bGe(e,"string");return typeof t=="symbol"?t:t+""}function bGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t0(){return t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t0.apply(null,arguments)}function yGe(e){var t=w.useMemo(()=>GN(e.children,Jh),[e.children]),r=sr(a=>P$e(a,e.id,t));return r==null?null:w.createElement(rce,{legendPayload:r})}function wGe(e){var{dataKey:t,nameKey:r,sectors:a,stroke:n,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:a==null?void 0:a.map(d=>d.tooltipPayload),positions:a==null?void 0:a.map(d=>d.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:T1(l,t),hide:c,type:u,color:o,unit:""}}}var NGe=(e,t)=>e>t?"start":e<t?"end":"middle",CGe=(e,t,r)=>typeof t=="function"?t(e):Ll(t,r,r*.8),EGe=(e,t,r)=>{var{top:a,left:n,width:i,height:o}=t,l=nie(i,o),c=n+Ll(e.cx,i,i/2),u=a+Ll(e.cy,o,o/2),d=Ll(e.innerRadius,l,0),f=CGe(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},jGe=(e,t)=>{var r=lo(t-e),a=Math.min(Math.abs(t-e),360);return r*a},kGe=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=fa("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(xie,t0({},t,{type:"linear",className:r}))},SGe=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),w.isValidElement(a)))return a;var n=fa("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(z1,t0({},t,{alignmentBaseline:"middle",className:n}),a)};function _Ge(e){var{sectors:t,props:r,showLabels:a}=e,{label:n,labelLine:i,dataKey:o}=r;if(!a||!n||!t)return null;var l=yl(r),c=$a(n,!1),u=$a(i,!1),d=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=Ya(h.cx,h.cy,h.outerRadius+d,g),v=Is(Is(Is(Is({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:NGe(x.x,h.cx)},x),y=Is(Is(Is(Is({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[Ya(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return w.createElement(hs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},i&&kGe(i,y),SGe(n,v,Hn(h,o)))});return w.createElement(hs,{className:"recharts-pie-labels"},f)}function sce(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:n,showLabels:i}=e,o=sr(ap),{onMouseEnter:l,onClick:c,onMouseLeave:u}=n,d=qM(n,hGe),f=UM(l,n.dataKey),h=QM(u),m=HM(c,n.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?a:null,N=v?r:y,C=Is(Is({},g),{},{stroke:g.stroke,tabIndex:-1,[uie]:x,[die]:n.dataKey});return w.createElement(hs,t0({tabIndex:-1,className:"recharts-pie-sector"},dx(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),w.createElement(ece,t0({option:N,isActive:v,shapeType:"sector"},C)))}),w.createElement(_Ge,{sectors:t,props:n,showLabels:i}))}function BGe(e){var t,{pieSettings:r,displayedData:a,cells:n,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=jGe(l,c),g=Math.abs(m),x=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=a.filter(O=>Hn(O,u,0)!==0).length,y=(g>=360?v:v-1)*x,N=g-v*h-y,C=a.reduce((O,j)=>{var S=Hn(j,u,0);return O+(dr(S)?S:0)},0),T;if(C>0){var _;T=a.map((O,j)=>{var S=Hn(O,u,0),B=Hn(O,d,j),L=EGe(r,i,O),D=(dr(S)?S:0)/C,k,R=Is(Is({},O),n&&n[j]&&n[j].props);j?k=_.endAngle+lo(m)*x*(S!==0?1:0):k=l;var U=k+lo(m)*((S!==0?h:0)+D*N),H=(k+U)/2,Q=(L.innerRadius+L.outerRadius)/2,V=[{name:B,value:S,payload:R,dataKey:u,type:f}],G=Ya(L.cx,L.cy,Q,H);return _=Is(Is(Is(Is({},r.presentationProps),{},{percent:D,cornerRadius:o,name:B,tooltipPayload:V,midAngle:H,middleRadius:Q,tooltipPosition:G},R),L),{},{value:Hn(O,u),startAngle:k,endAngle:U,payload:R,paddingAngle:lo(m)*x}),_})}return T}function TGe(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=VM(t,"recharts-pie-"),m=r.current,[g,x]=w.useState(!0),v=w.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=w.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return w.createElement(GM,{begin:i,duration:o,isActive:n,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},N=>{var C=[],T=a&&a[0],_=T.startAngle;return a.forEach((O,j)=>{var S=m&&m[j],B=j>0?rp(O,"paddingAngle",0):0;if(S){var L=Rv(S.endAngle-S.startAngle,O.endAngle-O.startAngle),D=Is(Is({},O),{},{startAngle:_+B,endAngle:_+L(N)+B});C.push(D),_=D.endAngle}else{var{endAngle:k,startAngle:R}=O,U=Rv(0,k-R),H=U(N),Q=Is(Is({},O),{},{startAngle:_+B,endAngle:_+H+B});C.push(Q),_=Q.endAngle}}),r.current=C,w.createElement(hs,null,w.createElement(sce,{sectors:C,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function IGe(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:n}=e,i=w.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?w.createElement(TGe,{props:e,previousSectorsRef:i}):w.createElement(sce,{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function OGe(e){var{hide:t,className:r,rootTabIndex:a}=e,n=fa("recharts-pie",r);return t?null:w.createElement(hs,{tabIndex:a,className:n},w.createElement(IGe,e))}var FGe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ax.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function DGe(e){var{id:t}=e,r=qM(e,mGe),a=w.useMemo(()=>GN(e.children,Jh),[e.children]),n=sr(i=>R$e(i,t,a));return w.createElement(w.Fragment,null,w.createElement(zM,{fn:wGe,args:Is(Is({},e),{},{sectors:n})}),w.createElement(OGe,t0({},r,{sectors:n})))}function iC(e){var t=dd(e,FGe),{id:r}=t,a=qM(t,pGe),n=yl(a);return w.createElement($M,{id:r,type:"pie"},i=>w.createElement(w.Fragment,null,w.createElement(nce,{type:"pie",id:i,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n}),w.createElement(yGe,t0({},a,{id:i})),w.createElement(DGe,t0({},a,{id:i})),a.children))}iC.displayName="Pie";var PGe=gt([Qi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),RGe=gt([PGe,f0,A0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),ice=()=>sr(RGe),LGe=()=>sr(kHe);function KK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function WK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(r),!0).forEach(function(a){MGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MGe(e,t,r){return(t=UGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UGe(e){var t=QGe(e,"string");return typeof t=="symbol"?t:t+""}function QGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HGe=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:n,dataKey:i}=e;if(n===!1||t.x==null||t.y==null)return null;var o=WK(WK({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},$a(n,!1)),Z8(n)),l;return w.isValidElement(n)?l=w.cloneElement(n,o):typeof n=="function"?l=n(o):l=w.createElement(IM,o),w.createElement(hs,{className:"recharts-active-dot"},l)};function zGe(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:n}=e,i=sr(ap),o=LGe();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Rs(l)?null:HGe({point:l,childIndex:Number(i),mainColor:r,dataKey:n,activeDot:a})}function XK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function iS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XK(Object(r),!0).forEach(function(a){VGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VGe(e,t,r){return(t=$Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ge(e){var t=GGe(e,"string");return typeof t=="symbol"?t:t+""}function GGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oce=(e,t)=>V1(e,"radiusAxis",t),qGe=gt([oce],e=>{if(e!=null)return{scale:e}}),KGe=gt([ZN,oce],(e,t)=>{if(!(e==null||t==null))return iS(iS({},e),{},{scale:t})}),WGe=(e,t,r,a)=>$1(e,"radiusAxis",t,a),lce=(e,t,r)=>D1(e,r),cce=(e,t,r)=>V1(e,"angleAxis",r),XGe=gt([lce,cce],(e,t)=>{if(!(e==null||t==null))return iS(iS({},e),{},{scale:t})}),YGe=(e,t,r,a)=>$1(e,"angleAxis",r,a),JGe=gt([lce,cce,P1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),ZGe=(e,t,r,a,n)=>n,eqe=gt([Ea,KGe,WGe,XGe,YGe],(e,t,r,a,n)=>mp(e,"radiusAxis")?eN(t,r,!1):eN(a,n,!1)),tqe=gt([OM,ZGe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),rqe=gt([qGe,JGe,d4,tqe,eqe],(e,t,r,a,n)=>{var{chartData:i,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||i==null||n==null||a==null)){var c=i.slice(o,l+1);return dqe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:a,bandSize:n})}}),aqe=["id"];function nqe(e,t){if(e==null)return{};var r,a,n=sqe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function YK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Fl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YK(Object(r),!0).forEach(function(a){KM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KM(e,t,r){return(t=iqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iqe(e){var t=oqe(e,"string");return typeof t=="symbol"?t:t+""}function oqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jb(){return Jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jb.apply(null,arguments)}function WM(e,t){return e&&e!=="none"?e:t}var lqe=e=>{var{dataKey:t,name:r,stroke:a,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:WM(a,n),value:T1(r,t),payload:e}]};function cqe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:i,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,nameKey:void 0,dataKey:t,name:T1(i,t),hide:o,type:l,color:WM(r,n),unit:""}}}function uqe(e,t){var r;return w.isValidElement(e)?r=w.cloneElement(e,t):typeof e=="function"?r=e(t):r=w.createElement(IM,Jb({},t,{className:fa("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function dqe(e){var{radiusAxis:t,angleAxis:r,displayedData:a,dataKey:n,bandSize:i}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?i??0:0;a.forEach((h,m)=>{var g=Hn(h,r.dataKey,m),x=Hn(h,n),v=r.scale(g)+d,y=Array.isArray(x)?Hle(x):x,N=Rs(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(Fl(Fl({},Ya(o,l,N,v)),{},{name:g,value:x,cx:o,cy:l,radius:N,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Rs(m)?void 0:t.scale(m);f.push(Fl(Fl({},h),{},{radius:g},Ya(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function fqe(e){var{points:t,props:r}=e,{dot:a,dataKey:n}=r;if(!a)return null;var{id:i}=r,o=nqe(r,aqe),l=yl(o),c=$a(a,!0),u=t.map((d,f)=>{var h=Fl(Fl(Fl({key:"dot-".concat(f),r:3},l),c),{},{dataKey:n,cx:d.x,cy:d.y,index:f,payload:d});return uqe(a,h)});return w.createElement(hs,{className:"recharts-radar-dots"},u)}function uce(e){var{points:t,props:r,showLabels:a}=e;if(t==null)return null;var{shape:n,isRange:i,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return w.isValidElement(n)?d=w.cloneElement(n,Fl(Fl({},r),{},{points:t})):typeof n=="function"?d=n(Fl(Fl({},r),{},{points:t})):d=w.createElement(zle,Jb({},$a(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:i?o:null,connectNulls:l})),w.createElement(hs,{className:"recharts-radar-polygon"},d,w.createElement(fqe,{props:r,points:t}),a&&Rm.renderCallByParent(r,t))}function Aqe(e){var{props:t,previousPointsRef:r}=e,{points:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=VM(t,"recharts-radar-"),[h,m]=w.useState(!0),g=w.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=w.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return w.createElement(GM,{begin:i,duration:o,isActive:n,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/a.length,N=v===1?a:a.map((C,T)=>{var _=d&&d[Math.floor(T*y)];if(_){var O=Rv(_.x,C.x),j=Rv(_.y,C.y);return Fl(Fl({},C),{},{x:O(v),y:j(v)})}var S=Rv(C.cx,C.x),B=Rv(C.cy,C.y);return Fl(Fl({},C),{},{x:S(v),y:B(v)})});return v>0&&(r.current=N),w.createElement(uce,{points:N,props:t,showLabels:!h})})}function hqe(e){var{points:t,isAnimationActive:r,isRange:a}=e,n=w.useRef(void 0),i=n.current;return r&&t&&t.length&&!a&&(!i||i!==t)?w.createElement(Aqe,{props:e,previousPointsRef:n}):w.createElement(uce,{points:t,props:e,showLabels:!0})}var mqe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ax.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class pqe extends w.PureComponent{render(){var{hide:t,className:r,points:a}=this.props;if(t)return null;var n=fa("recharts-radar",r);return w.createElement(w.Fragment,null,w.createElement(hs,{className:n},w.createElement(hqe,this.props)),w.createElement(zGe,{points:a,mainColor:WM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function gqe(e){var t=Cc(),r=sr(a=>rqe(a,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return w.createElement(pqe,Jb({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class XM extends w.PureComponent{render(){return w.createElement($M,{id:this.props.id,type:"radar"},t=>w.createElement(w.Fragment,null,w.createElement(nce,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),w.createElement(rce,{legendPayload:lqe(this.props)}),w.createElement(zM,{fn:cqe,args:this.props}),w.createElement(gqe,Jb({},this.props,{id:t}))))}}KM(XM,"displayName","Radar");KM(XM,"defaultProps",mqe);var xqe="Invariant failed";function vqe(e,t){throw new Error(xqe)}var bqe=["x","y"];function dD(){return dD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dD.apply(null,arguments)}function JK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Gy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JK(Object(r),!0).forEach(function(a){yqe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yqe(e,t,r){return(t=wqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wqe(e){var t=Nqe(e,"string");return typeof t=="symbol"?t:t+""}function Nqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cqe(e,t){if(e==null)return{};var r,a,n=Eqe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Eqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function jqe(e,t){var{x:r,y:a}=e,n=Cqe(e,bqe),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),u="".concat(t.height||n.height),d=parseInt(u,10),f="".concat(t.width||n.width),h=parseInt(f,10);return Gy(Gy(Gy(Gy(Gy({},t),n),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function dce(e){return w.createElement(ece,dD({shapeType:"rectangle",propTransformer:jqe,activeClassName:"recharts-active-bar"},e))}var kqe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,n)=>{if(dr(t))return t;var i=dr(a)||Rs(a);return i?t(a,n):(i||vqe(),r)}},Sqe={},fce=mu({name:"errorBars",initialState:Sqe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(n=>n.dataKey!==a.dataKey||n.direction!==a.direction))}}}),{addErrorBar:Ixt,removeErrorBar:Oxt}=fce.actions,_qe=fce.reducer,Bqe=["children"];function Tqe(e,t){if(e==null)return{};var r,a,n=Iqe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Iqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Oqe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Fqe=w.createContext(Oqe);function Dqe(e){var{children:t}=e,r=Tqe(e,Bqe);return w.createElement(Fqe.Provider,{value:r},t)}function Ace(e,t){var r,a,n=sr(u=>m0(u,e)),i=sr(u=>vp(u,t)),o=(r=n==null?void 0:n.allowDataOverflow)!==null&&r!==void 0?r:qc.allowDataOverflow,l=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:Kc.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Pqe(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,n=ice(),{needClipX:i,needClipY:o,needClip:l}=Ace(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=n;return w.createElement("clipPath",{id:"clipPath-".concat(a)},w.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var Rqe=["onMouseEnter","onMouseLeave","onClick"],Lqe=["value","background","tooltipPosition"],Mqe=["id"],Uqe=["onMouseEnter","onClick","onMouseLeave"];function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zb.apply(null,arguments)}function ZK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZK(Object(r),!0).forEach(function(a){Qqe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qqe(e,t,r){return(t=Hqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hqe(e){var t=zqe(e,"string");return typeof t=="symbol"?t:t+""}function zqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oS(e,t){if(e==null)return{};var r,a,n=Vqe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var $qe=e=>{var{dataKey:t,name:r,fill:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:T1(r,t),payload:e}]};function Gqe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:T1(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function qqe(e){var t=sr(ap),{data:r,dataKey:a,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=oS(i,Rqe),d=UM(o,a),f=QM(l),h=HM(c,a);if(!n||r==null)return null;var m=$a(n,!1);return w.createElement(w.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:N}=g,C=oS(g,Lqe);if(!y)return null;var T=d(g,x),_=f(g,x),O=h(g,x),j=ol(ol(ol(ol(ol({option:n,isActive:String(x)===t},C),{},{fill:"#eee"},y),m),dx(u,g,x)),{},{onMouseEnter:T,onMouseLeave:_,onClick:O,dataKey:a,index:x,className:"recharts-bar-background-rectangle"});return w.createElement(dce,Zb({key:"background-bar-".concat(x)},j))}))}function hce(e){var{data:t,props:r,showLabels:a}=e,n=yl(r),{id:i}=n,o=oS(n,Mqe),{shape:l,dataKey:c,activeBar:u}=r,d=sr(ap),f=sr(jle),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=oS(r,Uqe),v=UM(h,c),y=QM(g),N=HM(m,c);return t?w.createElement(w.Fragment,null,t.map((C,T)=>{var _=u&&String(T)===d&&(f==null||c===f),O=_?u:l,j=ol(ol(ol({},o),C),{},{isActive:_,option:O,index:T,dataKey:c});return w.createElement(hs,Zb({className:"recharts-bar-rectangle"},dx(x,C,T),{onMouseEnter:v(C,T),onMouseLeave:y(C,T),onClick:N(C,T),key:"rectangle-".concat(C==null?void 0:C.x,"-").concat(C==null?void 0:C.y,"-").concat(C==null?void 0:C.value,"-").concat(T)}),w.createElement(dce,j))}),a&&Rm.renderCallByParent(r,t)):null}function Kqe(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=VM(t,"recharts-bar-"),[m,g]=w.useState(!1),x=w.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=w.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return w.createElement(GM,{begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var N=y===1?a:a==null?void 0:a.map((C,T)=>{var _=f&&f[T];if(_)return ol(ol({},C),{},{x:tv(_.x,C.x,y),y:tv(_.y,C.y,y),width:tv(_.width,C.width,y),height:tv(_.height,C.height,y)});if(n==="horizontal"){var O=tv(0,C.height,y);return ol(ol({},C),{},{y:C.y+C.height-O,height:O})}var j=tv(0,C.width,y);return ol(ol({},C),{},{width:j})});return y>0&&(r.current=N??null),N==null?null:w.createElement(hs,null,w.createElement(hce,{props:t,data:N,showLabels:!m}))})}function Wqe(e){var{data:t,isAnimationActive:r}=e,a=w.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?w.createElement(Kqe,{previousRectanglesRef:a,props:e}):w.createElement(hce,{props:e,data:t,showLabels:!0})}var mce=0,Xqe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Hn(e,t)}};class Yqe extends w.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:n,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=fa("recharts-bar",n),f=u;return w.createElement(hs,{className:d,id:u},l&&w.createElement("defs",null,w.createElement(Pqe,{clipPathId:f,xAxisId:i,yAxisId:o})),w.createElement(hs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},w.createElement(qqe,{data:r,dataKey:a,background:c,allOtherBarProps:this.props}),w.createElement(Wqe,this.props)),this.props.children)}}var Jqe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ax.isSsr,legendType:"rect",minPointSize:mce,xAxisId:0,yAxisId:0};function Zqe(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Ace(t,r),h=EL(),m=Cc(),g=GN(e.children,Jh),x=sr(N=>jKe(N,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,w.createElement(Dqe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:Xqe,errorBarOffset:v},w.createElement(Yqe,Zb({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function eKe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:n,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=W8e({numericAxis:g});return f.map((y,N)=>{var C,T,_,O,j,S;d?C=z8e(d[N],x):(C=Hn(y,r),Array.isArray(C)||(C=[v,C]));var B=kqe(a,mce)(C[1],N);if(t==="horizontal"){var L,[D,k]=[l.scale(C[0]),l.scale(C[1])];T=wG({axis:o,ticks:c,bandSize:i,offset:n.offset,entry:y,index:N}),_=(L=k??D)!==null&&L!==void 0?L:void 0,O=n.size;var R=D-k;if(j=uu(R)?0:R,S={x:T,y:h.top,width:O,height:h.height},Math.abs(B)>0&&Math.abs(j)<Math.abs(B)){var U=lo(j||B)*(Math.abs(B)-Math.abs(j));_-=U,j+=U}}else{var[H,Q]=[o.scale(C[0]),o.scale(C[1])];if(T=H,_=wG({axis:l,ticks:u,bandSize:i,offset:n.offset,entry:y,index:N}),O=Q-H,j=n.size,S={x:h.left,y:_,width:h.width,height:j},Math.abs(B)>0&&Math.abs(O)<Math.abs(B)){var V=lo(O||B)*(Math.abs(B)-Math.abs(O));O+=V}}if(T==null||_==null||O==null||j==null)return null;var G=ol(ol({},y),{},{x:T,y:_,width:O,height:j,value:d?C:C[1],payload:y,background:S,tooltipPosition:{x:T+O/2,y:_+j/2}},m&&m[N]&&m[N].props);return G}).filter(Boolean)}function fA(e){var t=dd(e,Jqe),r=Cc();return w.createElement($M,{id:t.id,type:"bar"},a=>w.createElement(w.Fragment,null,w.createElement(Z$e,{legendPayload:$qe(t)}),w.createElement(zM,{fn:Gqe,args:t}),w.createElement(dGe,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:K8e(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),w.createElement(Zqe,Zb({},t,{id:a}))))}fA.displayName="Bar";function eW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function aj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eW(Object(r),!0).forEach(function(a){tKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tKe(e,t,r){return(t=rKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rKe(e){var t=aKe(e,"string");return typeof t=="symbol"?t:t+""}function aKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nKe=(e,t)=>t,sKe=(e,t,r)=>r,iKe=(e,t,r,a)=>a,oKe=(e,t,r,a,n)=>n,oC=gt([iM,oKe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),lKe=gt([oC],e=>e==null?void 0:e.maxBarSize),cKe=(e,t,r,a,n,i)=>i,tW=(e,t,r)=>{var a=r??e;if(!Rs(a))return Ll(a,t,0)},uKe=gt([Ea,iM,nKe,sKe,iKe],(e,t,r,a,n)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),dKe=(e,t,r,a)=>{var n=Ea(e);return n==="horizontal"?nD(e,"yAxis",r,a):nD(e,"xAxis",t,a)},fKe=(e,t,r)=>{var a=Ea(e);return a==="horizontal"?zq(e,"xAxis",t):zq(e,"yAxis",r)},AKe=(e,t,r)=>{var a={},n=e.filter(m4),i=e.filter(u=>u.stackId==null),o=n.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),a),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=tW(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=tW(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},hKe=gt([uKe,L9e,fKe],AKe),mKe=(e,t,r,a,n)=>{var i,o,l=oC(e,t,r,a,n);if(l!=null){var c=Ea(e),u=koe(e),{maxBarSize:d}=l,f=Rs(d)?u:d,h,m;return c==="horizontal"?(h=Xb(e,"xAxis",t,a),m=Wb(e,"xAxis",t,a)):(h=Xb(e,"yAxis",r,a),m=Wb(e,"yAxis",r,a)),(i=(o=eN(h,m,!0))!==null&&o!==void 0?o:f)!==null&&i!==void 0?i:0}},pce=(e,t,r,a)=>{var n=Ea(e),i,o;return n==="horizontal"?(i=Xb(e,"xAxis",t,a),o=Wb(e,"xAxis",t,a)):(i=Xb(e,"yAxis",r,a),o=Wb(e,"yAxis",r,a)),eN(i,o)};function pKe(e,t,r,a,n){var i=a.length;if(!(i<1)){var o=Ll(e,r,0,!0),l,c=[];if(Au(a[0].barSize)){var u=!1,d=r/i,f=a.reduce((y,N)=>y+(N.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=a.reduce((y,N)=>{var C,T={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(C=N.barSize)!==null&&C!==void 0?C:0}},_=[...y,T];return m=_[_.length-1].position,_},c)}else{var g=Ll(t,r,0,!0);r-2*g-(i-1)*o<=0&&(o=0);var x=(r-2*g-(i-1)*o)/i;x>1&&(x>>=0);var v=Au(n)?Math.min(x,n):x;l=a.reduce((y,N,C)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:g+(x+o)*C+(x-v)/2,size:v}}],c)}return l}}var gKe=(e,t,r,a,n,i,o)=>{var l=Rs(o)?t:o,c=pKe(r,a,n!==i?n:i,e,l);return n!==i&&c!=null&&(c=c.map(u=>aj(aj({},u),{},{position:aj(aj({},u.position),{},{offset:u.position.offset-n/2})}))),c},xKe=gt([hKe,koe,R9e,Soe,mKe,pce,lKe],gKe),vKe=(e,t,r,a)=>Xb(e,"xAxis",t,a),bKe=(e,t,r,a)=>Xb(e,"yAxis",r,a),yKe=(e,t,r,a)=>Wb(e,"xAxis",t,a),wKe=(e,t,r,a)=>Wb(e,"yAxis",r,a),NKe=gt([xKe,oC],(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),CKe=(e,t)=>{var r=aM(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var n=e[a];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===r)}}}},EKe=gt([dKe,oC],CKe),jKe=gt([Qi,vKe,bKe,yKe,wKe,NKe,Ea,XL,pce,EKe,oC,cKe],(e,t,r,a,n,i,o,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||a==null||n==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return eKe({layout:o,barSettings:d,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,stackedData:u,displayedData:v,offset:e,cells:f})}}),gce=e=>{var{chartData:t}=e,r=Xn(),a=Cc();return w.useEffect(()=>a?()=>{}:(r(Zq(t)),()=>{r(Zq(void 0))}),[t,r,a]),null},rW={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xce=mu({name:"brush",initialState:rW,reducers:{setBrushSettings(e,t){return t.payload==null?rW:t.payload}}}),{setBrushSettings:Fxt}=xce.actions,kKe=xce.reducer;function SKe(e,t,r){return(t=_Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ke(e){var t=BKe(e,"string");return typeof t=="symbol"?t:t+""}function BKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YM{static create(t){return new YM(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],n=r[r.length-1];return a<=n?t>=a&&t<=n:t>=n&&t<=a}}SKe(YM,"EPS",1e-4);function TKe(e){return(e%180+180)%180}var IKe=function(t){var{width:r,height:a}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=TKe(n),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},OKe={dots:[],areas:[],lines:[]},vce=mu({name:"referenceElements",initialState:OKe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ph(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ph(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ph(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Dxt,removeDot:Pxt,addArea:Rxt,removeArea:Lxt,addLine:Mxt,removeLine:Uxt}=vce.actions,FKe=vce.reducer,DKe=w.createContext(void 0),PKe=e=>{var{children:t}=e,[r]=w.useState("".concat(Yw("recharts"),"-clip")),a=ice();if(a==null)return null;var{x:n,y:i,width:o,height:l}=a;return w.createElement(DKe.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:n,y:i,height:l,width:o}))),t)};function YI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function bce(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],n=0;n<e.length;n+=t)a.push(e[n]);return a}function RKe(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return IKe(a,r)}function LKe(e,t,r){var a=r==="width",{x:n,y:i,width:o,height:l}=e;return t===1?{start:a?n:i,end:a?n+o:i+l}:{start:a?n+o:i+l,end:a?n:i}}function lS(e,t,r,a,n){if(e*t<e*a||e*t>e*n)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-n)<=0}function MKe(e,t){return bce(e,t+1)}function UKe(e,t,r,a,n){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=a==null?void 0:a[c];if(g===void 0)return{v:bce(a,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),N=g.coordinate,C=c===0||lS(e,N,y,d,l);C||(c=0,d=o,u+=1),C&&(d=N+e*(y()/2+n),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function aW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aW(Object(r),!0).forEach(function(a){QKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QKe(e,t,r){return(t=HKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HKe(e){var t=zKe(e,"string");return typeof t=="symbol"?t:t+""}function zKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VKe(e,t,r,a,n){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(h){var m=i[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===o-1){var v=e*(m.coordinate+e*x()/2-c);i[h]=m=el(el({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=el(el({},m),{},{tickCoord:m.coordinate});var y=lS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+n),i[h]=el(el({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function $Ke(e,t,r,a,n,i){var o=(a||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=a[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=el(el({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=lS(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+n),o[l-1]=el(el({},d),{},{isShow:!0}))}for(var g=i?l-1:l,x=function(N){var C=o[N],T,_=()=>(T===void 0&&(T=r(C,N)),T);if(N===0){var O=e*(C.coordinate-e*_()/2-c);o[N]=C=el(el({},C),{},{tickCoord:O<0?C.coordinate-O*e:C.coordinate})}else o[N]=C=el(el({},C),{},{tickCoord:C.coordinate});var j=lS(e,C.tickCoord,_,c,u);j&&(c=C.tickCoord+e*(_()/2+n),o[N]=el(el({},C),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function JM(e,t,r){var{tick:a,ticks:n,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!n||!n.length||!a)return[];if(dr(c)||Ax.isSsr){var h;return(h=MKe(n,dr(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?iw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(C,T)=>{var _=typeof u=="function"?u(C.value,T):C.value;return g==="width"?RKe(iw(_,{fontSize:t,letterSpacing:r}),x,f):iw(_,{fontSize:t,letterSpacing:r})[g]},y=n.length>=2?lo(n[1].coordinate-n[0].coordinate):1,N=LKe(i,y,g);return c==="equidistantPreserveStart"?UKe(y,N,v,n,o):(c==="preserveStart"||c==="preserveStartEnd"?m=$Ke(y,N,v,n,o,c==="preserveStartEnd"):m=VKe(y,N,v,n,o),m.filter(C=>C.isShow))}var GKe=["viewBox"],qKe=["viewBox"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Uv.apply(null,arguments)}function nW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nW(Object(r),!0).forEach(function(a){ZM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sW(e,t){if(e==null)return{};var r,a,n=KKe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function KKe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function ZM(e,t,r){return(t=WKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WKe(e){var t=XKe(e,"string");return typeof t=="symbol"?t:t+""}function XKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yp extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,n=sW(t,GKe),i=this.props,{viewBox:o}=i,l=sW(i,qKe);return!YI(a,o)||!YI(n,l)||!YI(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:n,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||l,N=dr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=a+ +!c*i,h=m-v*y,x=h-v*u,g=N;break;case"left":h=m=t.coordinate,f=r+ +!c*n,d=f-v*y,g=d-v*u,x=N;break;case"right":h=m=t.coordinate,f=r+ +c*n,d=f+v*y,g=d+v*u,x=N;break;default:d=f=t.coordinate,m=a+ +c*i,h=m+v*y,x=h+v*u,g=N;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:n,orientation:i,mirror:o,axisLine:l}=this.props,c=Oi(Oi(Oi({},$a(this.props,!1)),$a(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=Oi(Oi({},c),{},{x1:t,y1:r+u*n,x2:t+a,y2:r+u*n})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=Oi(Oi({},c),{},{x1:t+d*a,y1:r,x2:t+d*a,y2:r+n})}return w.createElement("line",Uv({},c,{className:fa("recharts-cartesian-axis-line",rp(l,"className"))}))}static renderTickItem(t,r,a){var n,i=fa(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))n=w.cloneElement(t,Oi(Oi({},r),{},{className:i}));else if(typeof t=="function")n=t(Oi(Oi({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fa(o,t.className)),n=w.createElement(z1,Uv({},r,{className:o}),a)}return n}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:i,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=JM(Oi(Oi({},this.props),{},{ticks:a}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=yl(this.props),g=$a(o,!1),x=Oi(Oi({},m),{},{fill:"none"},$a(n,!1)),v=d.map((y,N)=>{var{line:C,tick:T}=this.getTickLineCoord(y),_=Oi(Oi(Oi(Oi({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:i},g),T),{},{index:N,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return w.createElement(hs,Uv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},dx(this.props,y,N)),n&&w.createElement("line",Uv({},x,C,{className:fa("recharts-cartesian-axis-tick-line",rp(n,"className"))})),o&&yp.renderTickItem(o,_,"".concat(typeof l=="function"?l(y.value,N):y.value).concat(c||"")))});return v.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:a,className:n,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:w.createElement(hs,{className:fa("recharts-cartesian-axis",n),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),dc.renderCallByParent(this.props))}}ZM(yp,"displayName","CartesianAxis");ZM(yp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var YKe=["x1","y1","x2","y2","key"],JKe=["offset"],ZKe=["xAxisId","yAxisId"],eWe=["xAxisId","yAxisId"];function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(a){tWe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tWe(e,t,r){return(t=rWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rWe(e){var t=aWe(e,"string");return typeof t=="symbol"?t:t+""}function aWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ag.apply(null,arguments)}function cS(e,t){if(e==null)return{};var r,a,n=nWe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var sWe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:n,width:i,height:o,ry:l}=e;return w.createElement("rect",{x:a,y:n,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function yce(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:n,x2:i,y2:o,key:l}=t,c=cS(t,YKe),u=yl(c),{offset:d}=u,f=cS(u,JKe);r=w.createElement("line",Ag({},f,{x1:a,y1:n,x2:i,y2:o,fill:"none",key:l}))}return r}function iWe(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=cS(e,ZKe),c=n.map((u,d)=>{var f=ll(ll({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return yce(a,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function oWe(e){var{y:t,height:r,vertical:a=!0,verticalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=cS(e,eWe),c=n.map((u,d)=>{var f=ll(ll({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return yce(a,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function lWe(e){var{horizontalFill:t,fillOpacity:r,x:a,y:n,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+n-n)).sort((f,h)=>f-h);n!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?n+o-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return w.createElement("rect",{key:"react-".concat(h),y:f,x:a,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function cWe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:n,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+n-n)).sort((f,h)=>f-h);n!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?n+o-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return w.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var uWe=(e,t)=>{var{xAxis:r,width:a,height:n,offset:i}=e;return oie(JM(ll(ll(ll({},yp.defaultProps),r),{},{ticks:lie(r),viewBox:{x:0,y:0,width:a,height:n}})),i.left,i.left+i.width,t)},dWe=(e,t)=>{var{yAxis:r,width:a,height:n,offset:i}=e;return oie(JM(ll(ll(ll({},yp.defaultProps),r),{},{ticks:lie(r),viewBox:{x:0,y:0,width:a,height:n}})),i.top,i.top+i.height,t)},fWe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function kh(e){var t=NL(),r=CL(),a=Aie(),n=ll(ll({},dd(e,fWe)),{},{x:dr(e.x)?e.x:a.left,y:dr(e.y)?e.y:a.top,width:dr(e.width)?e.width:a.width,height:dr(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=n,g=Cc(),x=sr(B=>Vq(B,"xAxis",i,g)),v=sr(B=>Vq(B,"yAxis",o,g));if(!dr(u)||u<=0||!dr(d)||d<=0||!dr(l)||l!==+l||!dr(c)||c!==+c)return null;var y=n.verticalCoordinatesGenerator||uWe,N=n.horizontalCoordinatesGenerator||dWe,{horizontalPoints:C,verticalPoints:T}=n;if((!C||!C.length)&&typeof N=="function"){var _=h&&h.length,O=N({yAxis:v?ll(ll({},v),{},{ticks:_?h:v.ticks}):void 0,width:t,height:r,offset:a},_?!0:f);sw(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(C=O)}if((!T||!T.length)&&typeof y=="function"){var j=m&&m.length,S=y({xAxis:x?ll(ll({},x),{},{ticks:j?m:x.ticks}):void 0,width:t,height:r,offset:a},j?!0:f);sw(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(T=S)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(sWe,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),w.createElement(lWe,Ag({},n,{horizontalPoints:C})),w.createElement(cWe,Ag({},n,{verticalPoints:T})),w.createElement(iWe,Ag({},n,{offset:a,horizontalPoints:C,xAxis:x,yAxis:v})),w.createElement(oWe,Ag({},n,{offset:a,verticalPoints:T,xAxis:x,yAxis:v})))}kh.displayName="CartesianGrid";function oW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function lW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oW(Object(r),!0).forEach(function(a){AWe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AWe(e,t,r){return(t=hWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hWe(e){var t=mWe(e,"string");return typeof t=="symbol"?t:t+""}function mWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pWe={xAxis:{},yAxis:{},zAxis:{}},wce=mu({name:"cartesianAxis",initialState:pWe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=lW(lW({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:gWe,removeXAxis:xWe,addYAxis:vWe,removeYAxis:bWe,addZAxis:Qxt,removeZAxis:Hxt,updateYAxisWidth:yWe}=wce.actions,wWe=wce.reducer,NWe=["children"],CWe=["dangerouslySetInnerHTML","ticks"];function Nce(e,t,r){return(t=EWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EWe(e){var t=jWe(e,"string");return typeof t=="symbol"?t:t+""}function jWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fD(){return fD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fD.apply(null,arguments)}function Cce(e,t){if(e==null)return{};var r,a,n=kWe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function SWe(e){var t=Xn(),r=w.useMemo(()=>{var{children:i}=e,o=Cce(e,NWe);return o},[e]),a=sr(i=>m0(i,r.id)),n=r===a;return w.useEffect(()=>(t(gWe(r)),()=>{t(xWe(r))}),[r,t]),n?e.children:null}var _We=e=>{var{xAxisId:t,className:r}=e,a=sr(fie),n=Cc(),i="xAxis",o=sr(m=>U1(m,i,t,n)),l=sr(m=>ile(m,i,t,n)),c=sr(m=>rle(m,t)),u=sr(m=>BQe(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Cce(e,CWe);return w.createElement(yp,fD({},h,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:fa("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:l}))},BWe=e=>{var t,r,a,n,i;return w.createElement(SWe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},w.createElement(_We,e))};class Kd extends w.Component{render(){return w.createElement(BWe,this.props)}}Nce(Kd,"displayName","XAxis");Nce(Kd,"defaultProps",{allowDataOverflow:qc.allowDataOverflow,allowDecimals:qc.allowDecimals,allowDuplicatedCategory:qc.allowDuplicatedCategory,height:qc.height,hide:!1,mirror:qc.mirror,orientation:qc.orientation,padding:qc.padding,reversed:qc.reversed,scale:qc.scale,tickCount:qc.tickCount,type:qc.type,xAxisId:0});var TWe=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:n=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=n+i,u=o+c+l+(r?a:0);return Math.round(u)}return 0},IWe=["dangerouslySetInnerHTML","ticks"];function Ece(e,t,r){return(t=OWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OWe(e){var t=FWe(e,"string");return typeof t=="symbol"?t:t+""}function FWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AD(){return AD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},AD.apply(null,arguments)}function DWe(e,t){if(e==null)return{};var r,a,n=PWe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function RWe(e){var t=Xn();return w.useEffect(()=>(t(vWe(e)),()=>{t(bWe(e))}),[e,t]),null}var LWe=e=>{var t,{yAxisId:r,className:a,width:n,label:i}=e,o=w.useRef(null),l=w.useRef(null),c=sr(fie),u=Cc(),d=Xn(),f="yAxis",h=sr(C=>U1(C,f,r,u)),m=sr(C=>ale(C,r)),g=sr(C=>TQe(C,r)),x=sr(C=>ile(C,f,r,u));if(w.useLayoutEffect(()=>{var C;if(!(n!=="auto"||!m||TM(i)||w.isValidElement(i))){var T=o.current,_=T==null||(C=T.tickRefs)===null||C===void 0?void 0:C.current,{tickSize:O,tickMargin:j}=T.props,S=TWe({ticks:_,label:l.current,labelGapWithTick:5,tickSize:O,tickMargin:j});Math.round(m.width)!==Math.round(S)&&d(yWe({id:r,width:S}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,i,r,n]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,N=DWe(e,IWe);return w.createElement(yp,AD({},N,{ref:o,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:fa("recharts-".concat(f," ").concat(f),a),viewBox:c,ticks:x}))},MWe=e=>{var t,r,a,n,i;return w.createElement(w.Fragment,null,w.createElement(RWe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),w.createElement(LWe,e))},UWe={allowDataOverflow:Kc.allowDataOverflow,allowDecimals:Kc.allowDecimals,allowDuplicatedCategory:Kc.allowDuplicatedCategory,hide:!1,mirror:Kc.mirror,orientation:Kc.orientation,padding:Kc.padding,reversed:Kc.reversed,scale:Kc.scale,tickCount:Kc.tickCount,type:Kc.type,width:Kc.width,yAxisId:0};class Wd extends w.Component{render(){return w.createElement(MWe,this.props)}}Ece(Wd,"displayName","YAxis");Ece(Wd,"defaultProps",UWe);var JI={exports:{}},ZI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cW;function QWe(){if(cW)return ZI;cW=1;var e=c1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return ZI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=n(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(_){if(!y){if(y=!0,N=_,_=f(_),h!==void 0&&g.hasValue){var O=g.value;if(h(O,_))return C=O}return C=_}if(O=C,r(N,_))return O;var j=f(_);return h!==void 0&&h(O,j)?(N=_,O):(N=_,C=j)}var y=!1,N,C,T=d===void 0?null:d;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,d,f,h]);var x=a(c,m[0],m[1]);return i(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},ZI}var uW;function HWe(){return uW||(uW=1,JI.exports=QWe()),JI.exports}HWe();function zWe(e){e()}function VWe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zWe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const n=t={callback:r,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!a||e===null||(a=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var dW={notify(){},get:()=>[]};function $We(e,t){let r,a=dW,n=0,i=!1;function o(x){d();const v=a.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){a.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){n++,r||(r=e.subscribe(c),a=VWe())}function f(){n--,r&&n===0&&(r(),r=void 0,a.clear(),a=dW)}function h(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>a};return g}var GWe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qWe=GWe(),KWe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WWe=KWe(),XWe=()=>qWe||WWe?w.useLayoutEffect:w.useEffect,YWe=XWe(),e6=Symbol.for("react-redux-context"),t6=typeof globalThis<"u"?globalThis:{};function JWe(){if(!w.createContext)return{};const e=t6[e6]??(t6[e6]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var ZWe=JWe();function eXe(e){const{children:t,context:r,serverState:a,store:n}=e,i=w.useMemo(()=>{const c=$We(n);return{store:n,subscription:c,getServerState:a?()=>a:void 0}},[n,a]),o=w.useMemo(()=>n.getState(),[n]);YWe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||ZWe;return w.createElement(l.Provider,{value:i},t)}var tXe=eXe,rXe=(e,t)=>t,e7=gt([rXe,Ea,P1,zi,wle,p0,FHe,Qi],MHe),t7=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},jce=ld("mouseClick"),kce=qN();kce.startListening({actionCreator:jce,effect:(e,t)=>{var r=e.payload,a=e7(t.getState(),t7(r));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(HQe({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var hD=ld("mouseMove"),Sce=qN();Sce.startListening({actionCreator:hD,effect:(e,t)=>{var r=e.payload,a=t.getState(),n=yM(a,a.tooltip.settings.shared),i=e7(a,t7(r));n==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(mle({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(hle()))}});function aXe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var fW={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},_ce=mu({name:"rootProps",initialState:fW,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:fW.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),nXe=_ce.reducer,{updateOptions:sXe}=_ce.actions,Bce=mu({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:iXe}=Bce.actions,oXe=Bce.reducer,Tce=ld("keyDown"),Ice=ld("focus"),r7=qN();r7.startListening({actionCreator:Tce,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(wM(n,H1(r))),l=p0(r);if(i==="Enter"){var c=rS(r,"axis","hover",String(n.index));t.dispatch(iD({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}));return}var u=OQe(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=rS(r,"axis","hover",String(h));t.dispatch(iD({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});r7.startListening({actionCreator:Ice,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&n.index==null){var i="0",o=rS(r,"axis","hover",String(i));t.dispatch(iD({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var qu=ld("externalEvent"),Oce=qN();Oce.startListening({actionCreator:qu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:CHe(r),activeDataKey:jle(r),activeIndex:ap(r),activeLabel:Ele(r),activeTooltipIndex:ap(r),isTooltipActive:EHe(r)};e.payload.handler(a,e.payload.reactEvent)}}});var lXe=gt([Q1],e=>e.tooltipItemPayloads),cXe=gt([lXe,nC,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var n=e.find(l=>l.settings.dataKey===a);if(n!=null){var{positions:i}=n;if(i!=null){var o=t(i,r);return o}}}),Fce=ld("touchMove"),Dce=qN();Dce.startListening({actionCreator:Fce,effect:(e,t)=>{var r=e.payload,a=t.getState(),n=yM(a,a.tooltip.settings.shared);if(n==="axis"){var i=e7(a,t7({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(mle({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(uie),d=(o=c.getAttribute(die))!==null&&o!==void 0?o:void 0,f=cXe(t.getState(),u,d);t.dispatch(Ale({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var uXe=Dse({brush:kKe,cartesianAxis:wWe,chartData:tze,errorBars:_qe,graphicalItems:uGe,layout:k8e,legend:hLe,options:XHe,polarAxis:n$e,polarOptions:oXe,referenceElements:FKe,rootProps:nXe,tooltip:zQe}),dXe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return JRe({reducer:uXe,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([kce.middleware,Sce.middleware,r7.middleware,Oce.middleware,Dce.middleware]),devTools:{serialize:{replacer:aXe},name:"recharts-".concat(r)}})};function Pce(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,n=Cc(),i=w.useRef(null);if(n)return r;i.current==null&&(i.current=dXe(t,a));var o=hL;return w.createElement(tXe,{context:o,store:i.current},r)}function Rce(e){var{layout:t,width:r,height:a,margin:n}=e,i=Xn(),o=Cc();return w.useEffect(()=>{o||(i(C8e(t)),i(E8e({width:r,height:a})),i(N8e(n)))},[i,o,t,r,a,n]),null}function Lce(e){var t=Xn();return w.useEffect(()=>{t(sXe(e))},[t,e]),null}var fXe=["children"];function AXe(e,t){if(e==null)return{};var r,a,n=hXe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hXe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uS.apply(null,arguments)}var mXe={width:"100%",height:"100%"},pXe=w.forwardRef((e,t)=>{var r=NL(),a=CL(),n=gie();if(!Vb(r)||!Vb(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=n?0:void 0,typeof o.role=="string"?d=o.role:d=n?"application":void 0,w.createElement(eL,uS({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:a,style:mXe,ref:t}),i)}),gXe=e=>{var{children:t}=e,r=sr(a4);if(!r)return null;var{width:a,height:n,y:i,x:o}=r;return w.createElement(eL,{width:a,height:n,x:o,y:i},t)},AW=w.forwardRef((e,t)=>{var{children:r}=e,a=AXe(e,fXe),n=Cc();return n?w.createElement(gXe,null,r):w.createElement(pXe,uS({ref:t},a),r)});function xXe(){var e=Xn(),[t,r]=w.useState(null),a=sr(rLe);return w.useEffect(()=>{if(t!=null){var n=t.getBoundingClientRect(),i=n.width/t.offsetWidth;Au(i)&&i!==a&&e(j8e(i))}},[t,e,a]),r}function hW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function vXe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hW(Object(r),!0).forEach(function(a){bXe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hW(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bXe(e,t,r){return(t=yXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yXe(e){var t=wXe(e,"string");return typeof t=="symbol"?t:t+""}function wXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NXe=w.forwardRef((e,t)=>{var{children:r,className:a,height:n,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,N=Xn(),[C,T]=w.useState(null),[_,O]=w.useState(null);nze();var j=xXe(),S=w.useCallback(M=>{j(M),typeof t=="function"&&t(M),T(M),O(M)},[j,t,T,O]),B=w.useCallback(M=>{N(jce(M)),N(qu({handler:i,reactEvent:M}))},[N,i]),L=w.useCallback(M=>{N(hD(M)),N(qu({handler:u,reactEvent:M}))},[N,u]),D=w.useCallback(M=>{N(hle()),N(qu({handler:d,reactEvent:M}))},[N,d]),k=w.useCallback(M=>{N(hD(M)),N(qu({handler:f,reactEvent:M}))},[N,f]),R=w.useCallback(()=>{N(Ice())},[N]),U=w.useCallback(M=>{N(Tce(M.key))},[N]),H=w.useCallback(M=>{N(qu({handler:o,reactEvent:M}))},[N,o]),Q=w.useCallback(M=>{N(qu({handler:l,reactEvent:M}))},[N,l]),V=w.useCallback(M=>{N(qu({handler:c,reactEvent:M}))},[N,c]),G=w.useCallback(M=>{N(qu({handler:h,reactEvent:M}))},[N,h]),J=w.useCallback(M=>{N(qu({handler:x,reactEvent:M}))},[N,x]),W=w.useCallback(M=>{N(Fce(M)),N(qu({handler:g,reactEvent:M}))},[N,g]),Z=w.useCallback(M=>{N(qu({handler:m,reactEvent:M}))},[N,m]);return w.createElement(Ile.Provider,{value:C},w.createElement(nse.Provider,{value:_},w.createElement("div",{className:fa("recharts-wrapper",a),style:vXe({position:"relative",cursor:"default",width:y,height:n},v),onClick:B,onContextMenu:H,onDoubleClick:Q,onFocus:R,onKeyDown:U,onMouseDown:V,onMouseEnter:L,onMouseLeave:D,onMouseMove:k,onMouseUp:G,onTouchEnd:Z,onTouchMove:W,onTouchStart:J,ref:S},r)))}),CXe=["children","className","width","height","style","compact","title","desc"];function EXe(e,t){if(e==null)return{};var r,a,n=jXe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jXe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Mce=w.forwardRef((e,t)=>{var{children:r,className:a,width:n,height:i,style:o,compact:l,title:c,desc:u}=e,d=EXe(e,CXe),f=yl(d);return l?w.createElement(AW,{otherAttributes:f,title:c,desc:u},r):w.createElement(NXe,{className:a,style:o,width:n,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(AW,{otherAttributes:f,title:c,desc:u,ref:t},w.createElement(PKe,null,r)))}),kXe=["width","height"];function mD(){return mD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mD.apply(null,arguments)}function SXe(e,t){if(e==null)return{};var r,a,n=_Xe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _Xe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var BXe={top:5,right:5,bottom:5,left:5},TXe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:BXe,reverseStackOrder:!1,syncMethod:"index"},IXe=w.forwardRef(function(t,r){var a,n=dd(t.categoricalChartProps,TXe),{width:i,height:o}=n,l=SXe(n,kXe);if(!Vb(i)||!Vb(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(Pce,{preloadedState:{options:m},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:c},w.createElement(gce,{chartData:h.data}),w.createElement(Rce,{width:i,height:o,layout:n.layout,margin:n.margin}),w.createElement(Lce,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),w.createElement(Mce,mD({},l,{width:i,height:o,ref:r})))}),OXe=["axis","item"],Sh=w.forwardRef((e,t)=>w.createElement(IXe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:OXe,tooltipPayloadSearcher:BM,categoricalChartProps:e,ref:t}));function FXe(e){var t=Xn();return w.useEffect(()=>{t(iXe(e))},[t,e]),null}var DXe=["width","height","layout"];function pD(){return pD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pD.apply(null,arguments)}function PXe(e,t){if(e==null)return{};var r,a,n=RXe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function RXe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var LXe={top:5,right:5,bottom:5,left:5},MXe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LXe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Uce=w.forwardRef(function(t,r){var a,n=dd(t.categoricalChartProps,MXe),{width:i,height:o,layout:l}=n,c=PXe(n,DXe);if(!Vb(i)||!Vb(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(Pce,{preloadedState:{options:m},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:u},w.createElement(gce,{chartData:n.data}),w.createElement(Rce,{width:i,height:o,layout:l,margin:n.margin}),w.createElement(Lce,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),w.createElement(FXe,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),w.createElement(Mce,pD({width:i,height:o},c,{ref:r})))}),UXe=["item"],QXe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},j4=w.forwardRef((e,t)=>{var r=dd(e,QXe);return w.createElement(Uce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:UXe,tooltipPayloadSearcher:BM,categoricalChartProps:r,ref:t})}),HXe=["axis"],zXe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},VXe=w.forwardRef((e,t)=>{var r=dd(e,zXe);return w.createElement(Uce,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HXe,tooltipPayloadSearcher:BM,categoricalChartProps:r,ref:t})});const rm=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],mW={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},qy="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",yo="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",zc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",r6="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",a6="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",n6="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",nj="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",$Xe="from-sky-500 to-indigo-500",GXe="from-emerald-500 to-lime-500",qXe="from-amber-500 to-rose-500",KXe="from-fuchsia-500 to-purple-600",s6={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:vc,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:vre,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:cn,dot:"bg-emerald-500"}},WXe=e=>{const t=s6[e].icon;return s.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${s6[e].badge}`,children:[s.jsx("span",{className:`h-2 w-2 rounded-full ${s6[e].dot}`}),s.jsx(t,{className:"h-4 w-4"})," ",e]})},XXe=()=>{var J,W;const[e,t]=w.useState("registro"),[r,a]=w.useState([]),[n,i]=w.useState(mW),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState(!1),[h,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState(""),[N,C]=w.useState(""),T=w.useMemo(()=>xh[n.dimension]??[],[n.dimension]),_=w.useCallback(async()=>{f(!0);try{const Z=await NDe();a(Z)}catch(Z){console.error(Z),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);w.useEffect(()=>{_()},[_]);const O=Z=>{const{name:M,value:F}=Z.target;i(X=>({...X,[M]:F}))},j=Z=>{const M=Z.split(",").map(F=>F.trim()).filter(Boolean);i(F=>({...F,indicadores:M}))},S=Z=>{const M=Z.split(",").map(F=>F.trim()).filter(Boolean);i(F=>({...F,enlaces:M}))},B=()=>{i(mW),l(null),u(null)},L=async Z=>{if(Z.preventDefault(),!n.responsable||!n.dimension||!n.subdimension||!n.descripcion||!n.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{o?await EDe(o,n):await CDe(n),await _(),B(),t("seguimiento")}catch(M){console.error(M),u("Error al guardar la acción.")}},D=Z=>{l(Z.id),i({...Z,enlaces:Z.enlaces??[],indicadores:Z.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},k=async Z=>{confirm("¿Eliminar esta acción?")&&(await jDe(Z),await _())},R=w.useMemo(()=>r.filter(Z=>{const M=!h||Z.responsable.toLowerCase().includes(h.toLowerCase())||Z.descripcion.toLowerCase().includes(h.toLowerCase())||Z.subdimension.toLowerCase().includes(h.toLowerCase()),F=!g||Z.dimension===g,X=!v||Z.subdimension===v,Y=!N||Z.estado===N;return M&&F&&X&&Y}),[r,h,g,v,N]),U=w.useMemo(()=>{const Z=new Map;return r.forEach(M=>Z.set(M.dimension,(Z.get(M.dimension)??0)+1)),Array.from(Z.entries()).map(([M,F])=>({name:M,value:F}))},[r]),H=w.useMemo(()=>{const Z=new Map;return r.forEach(M=>Z.set(M.estado,(Z.get(M.estado)??0)+1)),Array.from(Z.entries()).map(([M,F])=>({name:M,value:F}))},[r]),Q=w.useMemo(()=>{const Z=r.map(M=>M.avance??0);return Z.length?Math.round(Z.reduce((M,F)=>M+F,0)/Z.length):0},[r]),V=w.useMemo(()=>{const Z=new Map;return r.forEach(M=>Z.set(M.subdimension,(Z.get(M.subdimension)??0)+1)),Array.from(Z.entries()).map(([M,F])=>({name:M,value:F})).sort((M,F)=>F.value-M.value).slice(0,6)},[r]),G=()=>{const Z=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],M=r.map(le=>[le.id,le.fechaRegistro,le.responsable,le.dimension,le.subdimension,le.descripcion.replace(/\n/g," "),le.objetivos??"",(le.indicadores??[]).join("|"),le.cobertura??"",le.fechaInicio??"",le.fechaCumplimiento,le.estado,le.avance??0,(le.enlaces??[]).join("|")]),F=[Z.join(","),...M.map(le=>le.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),X=new Blob([F],{type:"text/csv;charset=utf-8"}),Y=URL.createObjectURL(X),ae=document.createElement("a");ae.href=Y,ae.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ae.click(),URL.revokeObjectURL(Y)};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),s.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[s.jsx(vg,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(CCe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[s.jsx(iF,{className:"h-4 w-4"})," Refrescar"]}),s.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[s.jsx(of,{className:"h-4 w-4"})," CSV"]})]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("button",{onClick:()=>t("registro"),className:`${r6} ${e==="registro"?a6:n6}`,children:[s.jsx(Gh,{className:"h-4 w-4"})," Registro"]}),s.jsxs("button",{onClick:()=>t("seguimiento"),className:`${r6} ${e==="seguimiento"?a6:n6}`,children:[s.jsx(rb,{className:"h-4 w-4"})," Seguimiento"]}),s.jsxs("button",{onClick:()=>t("dashboard"),className:`${r6} ${e==="dashboard"?a6:n6}`,children:[s.jsx($we,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&s.jsx("div",{className:qy,children:s.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&s.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[s.jsx(vc,{className:"h-5 w-5"}),s.jsx("span",{children:c})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Fecha de Registro"}),s.jsxs("div",{className:"relative",children:[s.jsx(Io,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),s.jsx("input",{type:"date",name:"fechaRegistro",value:n.fechaRegistro,onChange:O,className:yo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Responsable"}),s.jsxs("div",{className:"relative",children:[s.jsx(Pb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),s.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:n.responsable,onChange:O,className:yo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Cobertura (niveles/cursos)"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),s.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:n.cobertura??"",onChange:O,className:yo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Dimensión PME"}),s.jsxs("div",{className:"relative",children:[s.jsx(aCe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),s.jsxs("select",{name:"dimension",value:n.dimension,onChange:O,className:yo+" pl-10",children:[s.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(xh).map(Z=>s.jsx("option",{value:Z,children:Z},Z))]})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:zc,children:"Subdimensión"}),s.jsxs("div",{className:"relative",children:[s.jsx(FN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),s.jsxs("select",{name:"subdimension",value:n.subdimension,onChange:O,className:yo+" pl-10",disabled:!n.dimension,children:[s.jsx("option",{value:"",children:n.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),T.map(Z=>s.jsx("option",{value:Z,children:Z},Z))]})]})]}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:zc,children:"Descripción de la Acción"}),s.jsxs("div",{className:"relative",children:[s.jsx(Pl,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),s.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:O,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:yo+" pl-10"})]})]}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:zc,children:"Objetivos (opcional)"}),s.jsx("textarea",{name:"objetivos",value:n.objetivos??"",onChange:O,rows:2,placeholder:"Propósitos pedagógicos",className:yo})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Indicadores (separados por coma)"}),s.jsx("input",{type:"text",value:(n.indicadores??[]).join(", "),onChange:Z=>j(Z.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:yo})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Fecha de Inicio"}),s.jsxs("div",{className:"relative",children:[s.jsx(Io,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),s.jsx("input",{type:"date",name:"fechaInicio",value:n.fechaInicio??"",onChange:O,className:yo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Fecha de Cumplimiento"}),s.jsxs("div",{className:"relative",children:[s.jsx(Io,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),s.jsx("input",{type:"date",name:"fechaCumplimiento",value:n.fechaCumplimiento,onChange:O,className:yo+" pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Estado"}),s.jsx("select",{name:"estado",value:n.estado,onChange:O,className:yo,children:xz.map(Z=>s.jsx("option",{value:Z,children:Z},Z))})]}),s.jsxs("div",{children:[s.jsx("label",{className:zc,children:"Avance (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx(sk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),s.jsx("input",{type:"number",min:0,max:100,name:"avance",value:n.avance??0,onChange:O,className:yo+" pl-10"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:zc,children:"Enlaces de evidencia (separados por coma)"}),s.jsxs("div",{className:"relative",children:[s.jsx(dz,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),s.jsx("input",{type:"text",value:(n.enlaces??[]).join(", "),onChange:Z=>S(Z.target.value),placeholder:"https://..., https://...",className:yo+" pl-10"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&s.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?s.jsx(gl,{className:"h-4 w-4"}):s.jsx(Li,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&s.jsx("div",{className:qy,children:s.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"relative md:col-span-2",children:[s.jsx(C1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),s.jsx("input",{className:yo+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:Z=>m(Z.target.value)})]}),s.jsxs("select",{value:g,onChange:Z=>{x(Z.target.value),y("")},className:yo,children:[s.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(xh).map(Z=>s.jsx("option",{value:Z,children:Z},Z))]}),s.jsxs("select",{value:v,onChange:Z=>y(Z.target.value),className:yo,children:[s.jsx("option",{value:"",children:"Todas las subdimensiones"}),(xh[g]??Object.values(xh).flat()).map(Z=>s.jsx("option",{value:Z,children:Z},Z))]}),s.jsxs("select",{value:N,onChange:Z=>C(Z.target.value),className:yo,children:[s.jsx("option",{value:"",children:"Todos los estados"}),xz.map(Z=>s.jsx("option",{value:Z,children:Z},Z))]})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[s.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[R.map(Z=>{var M,F;return s.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[s.jsx("td",{className:"px-4 py-4 align-top text-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((F=(M=Z.responsable)==null?void 0:M.slice(0,1))==null?void 0:F.toUpperCase())||"?"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Z.responsable}),s.jsx("div",{className:"text-xs text-slate-500",children:Z.cobertura})]})]})}),s.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[s.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:Z.dimension}),s.jsx("div",{className:"text-xs text-slate-500",children:Z.subdimension})]}),s.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[s.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:Z.descripcion}),Z.enlaces&&Z.enlaces.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Z.enlaces.map((X,Y)=>s.jsxs("a",{href:X,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[s.jsx(dz,{className:"h-3.5 w-3.5"})," Evidencia ",Y+1]},Y))})]}),s.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[s.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",Z.fechaRegistro||"-"]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",Z.fechaInicio||"-"]}),s.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",Z.fechaCumplimiento]})]}),s.jsx("td",{className:"px-4 py-4 align-top text-center",children:WXe(Z.estado)}),s.jsxs("td",{className:"px-4 py-4 align-top",children:[s.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(Z.avance??0,0),100)}%`}})}),s.jsxs("div",{className:"text-xs text-center mt-1",children:[Z.avance??0,"%"]})]}),s.jsx("td",{className:"px-4 py-4 align-top text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[s.jsx("button",{onClick:()=>D(Z),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:s.jsx(B_,{className:"h-5 w-5 text-amber-600"})}),s.jsx("button",{onClick:()=>k(Z.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:s.jsx(Da,{className:"h-5 w-5 text-rose-600"})})]})})]},Z.id)}),R.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:`${nj} ${$Xe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fl,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),s.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),s.jsx("div",{className:`${nj} ${GXe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(cn,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),s.jsx("div",{className:"text-2xl font-black",children:((J=H.find(Z=>Z.name==="Cumplida"))==null?void 0:J.value)??0})]})]})}),s.jsx("div",{className:`${nj} ${qXe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(vre,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),s.jsx("div",{className:"text-2xl font-black",children:((W=H.find(Z=>Z.name==="En Proceso"))==null?void 0:W.value)??0})]})]})}),s.jsx("div",{className:`${nj} ${KXe}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(sk,{className:"h-10 w-10 opacity-90"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),s.jsxs("div",{className:"text-2xl font-black",children:[Q,"%"]})]})]})})]}),s.jsxs("div",{className:qy+" p-5",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),s.jsx("div",{className:"h-64",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:U,children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"name",hide:!0}),s.jsx(Wd,{allowDecimals:!1}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",children:U.map((Z,M)=>s.jsx(Jh,{fill:rm[M%rm.length]},M))})]})})}),s.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:U.map((Z,M)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:rm[M%rm.length]}}),s.jsx("span",{className:"flex-1",children:Z.name}),s.jsx("span",{className:"font-semibold",children:Z.value})]},M))})]}),s.jsxs("div",{className:qy+" p-5",children:[s.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),s.jsx("div",{className:"h-64",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(j4,{children:[s.jsx(iC,{data:H,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:H.map((Z,M)=>s.jsx(Jh,{fill:rm[M%rm.length]},M))}),s.jsx(fx,{}),s.jsx(hc,{})]})})})]}),s.jsxs("div",{className:qy+" p-5",children:[s.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),s.jsxs("ul",{className:"space-y-2",children:[V.map((Z,M)=>s.jsxs("li",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:rm[M%rm.length]}}),Z.name]}),s.jsx("span",{className:"font-semibold",children:Z.value})]},M)),V.length===0&&s.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},YXe="modulepreload",JXe=function(e){return"/"+e},pW={},ai=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(r.map(u=>{if(u=JXe(u),u in pW)return;pW[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":YXe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},k4="presentacionesDidacticas",ZXe=async(e,t)=>{const r=$t(pt(Ar,k4)),a={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await ii(r,a),r.id},gW=async(e,t)=>{const r=$t(Ar,k4,e);await Ui(r,t)},eYe=async e=>{await Ja($t(Ar,k4,e))},tYe=(e,t)=>{const r=_t(pt(Ar,k4),rr("userId","==",e),Gt("fechaCreacion","desc"));return ar(r,a=>{const n=a.docs.map(i=>i.data());t(n)})},rYe=async e=>{let t=null;try{const r=jn.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const a=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",a.length);const n=lc(Sw,"generateSlides"),i={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await ZXe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",i);const o=await n(i);console.log("Respuesta de función:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await gW(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await gW(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(a){console.error("Error al actualizar el estado de la presentación:",a)}throw r}},i6=async()=>{var t,r,a,n;const e=jn.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const i=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(i){if(console.error("Error al verificar autorización de Google Slides:",i),(t=i.message)!=null&&t.includes("cors")||(r=i.message)!=null&&r.includes("blocked")||(a=i.message)!=null&&a.includes("CORS")||(n=i.message)!=null&&n.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const o=_t(pt(Ar,"userTokens"),rr("userId","==",e.uid)),l=await _r(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(o){return console.error("Error en verificación alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${i.message||"Error desconocido"}`}}},aYe=()=>{const[e,t]=w.useState(!1),[r,a]=w.useState(null),n=async()=>{t(!0);try{const o=await lc(Sw,"testGemini")();a(o.data)}catch(i){console.error("Error calling testGemini:",i),a({success:!1,error:i.message||"Error desconocido",type:"client_error"})}t(!1)};return s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🧪 Prueba de Gemini AI"}),s.jsx("button",{onClick:n,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&s.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),s.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?s.jsx("div",{className:"mt-2 text-green-600",children:"✅ Gemini AI está funcionando correctamente"}):s.jsxs("div",{className:"mt-2 text-red-600",children:["❌ Problema detectado: ",r.error]})]})]})},nYe=({estilo:e,tema:t="Ejemplo de Presentación"})=>{const a=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🎨",descripcion:"Dinámico y colorido, con énfasis en elementos gráficos e infografías",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones gráficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"📚",descripcion:"Formal y riguroso, con énfasis en conceptos teóricos",ejemplo:["Estructura académica formal","Referencias y citas bibliográficas","Énfasis en conceptos teóricos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🤝",descripcion:"Participativo y colaborativo, con múltiples actividades",ejemplo:["Preguntas y actividades prácticas","Espacios para participación","Dinámicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💼",descripcion:"Corporativo y práctico, enfocado en aplicaciones reales",ejemplo:["Diseño corporativo y estructurado","Casos de estudio prácticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💡",descripcion:"Innovador y atractivo, estimula la imaginación",ejemplo:["Diseño creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"⚪",descripcion:"Simple y esencial, centrado en lo más importante",ejemplo:["Diseño muy simplificado","Amplio espacio en blanco","Solo información esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return s.jsxs("div",{className:`p-4 rounded-lg ${a.colores.fondo} transition-all`,children:[s.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:a.descripcion}),s.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[s.jsxs("div",{className:`p-4 ${a.colores.fondoDiapo} border-b border-gray-200`,children:[s.jsx("h4",{className:`${a.fuentes.titulo} ${a.colores.titulo} text-lg font-bold mb-2`,children:t}),s.jsxs("div",{className:`${a.fuentes.texto} ${a.colores.texto} text-sm space-y-2`,children:[s.jsx("p",{children:"Diapositiva de título con subtítulo"}),s.jsx("div",{className:`w-2/3 h-2 ${a.colores.acento} rounded mt-2`})]})]}),s.jsxs("div",{className:`p-4 ${a.colores.fondoDiapo}`,children:[s.jsx("h4",{className:`${a.fuentes.titulo} ${a.colores.titulo} text-md font-bold mb-2`,children:"Características principales"}),s.jsx("ul",{className:`${a.fuentes.texto} ${a.colores.texto} text-xs space-y-1 list-disc pl-4`,children:a.ejemplo.map((n,i)=>s.jsx("li",{children:n},i))}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx("span",{className:"text-lg",children:a.iconos})})]})]})]})},sYe=({userId:e,planificaciones:t})=>{const[r,a]=w.useState("presentaciones"),[n,i]=w.useState(null),[o,l]=w.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=w.useState(!1),[d,f]=w.useState([]),[h,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});w.useEffect(()=>e?tYe(e,R=>{f(R)}):void 0,[e]),w.useEffect(()=>{const k=async()=>{if(e)try{C(V=>({...V,checking:!0}));const Q=await i6();C({isAuthorized:Q.isAuthorized,message:Q.message,checking:!1})}catch(Q){C({isAuthorized:!1,message:`Error: ${Q.message||"No se pudo verificar la autorización"}`,checking:!1})}};k();const R=setTimeout(()=>{C(Q=>Q.checking?{isAuthorized:!1,message:"Timeout al verificar autorización",checking:!1}:Q)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const Q=setTimeout(()=>{k()},2e3);return()=>{clearTimeout(Q),clearTimeout(R)}}return()=>clearTimeout(R)},[e]),w.useEffect(()=>{const k=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!N.isAuthorized)try{C(Q=>({...Q,checking:!0}));const H=await i6();C({isAuthorized:H.isAuthorized,message:H.message,checking:!1})}catch(H){C({isAuthorized:!1,message:`Error: ${H.message||"No se pudo verificar la autorización"}`,checking:!1})}};return window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)},[N.isAuthorized]),w.useEffect(()=>{n&&("nombreUnidad"in n?l(k=>({...k,tema:n.nombreUnidad})):"nombreClase"in n&&l(k=>({...k,tema:n.nombreClase})))},[n]);const T=()=>{var k;if(!n)return[];if("lecciones"in n){const R=[];return(k=n.lecciones)==null||k.forEach(U=>{U.objetivosAprendizaje&&!R.includes(U.objetivosAprendizaje)&&R.push(U.objetivosAprendizaje)}),R}else if(n.detalleLeccionOrigen)return[n.detalleLeccionOrigen.objetivosAprendizaje];return[]},_=k=>{const{name:R,value:U,type:H}=k.target;if(H==="checkbox"){const Q=k.target.checked;l(V=>({...V,[R]:Q}))}else l(Q=>({...Q,[R]:U}))},O=k=>{const R=Array.from(k.target.selectedOptions,U=>U.value);l(U=>({...U,objetivosAprendizaje:R}))},j=async k=>{if(k.preventDefault(),!n){y("Debes seleccionar una planificación");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const R={planificacionId:n.id,tema:o.tema,curso:n.nivel,asignatura:n.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",R);const U=await rYe({...R,userId:e});console.log("Resultado de la función:",U),U&&U.url&&console.log("Presentación generada:",U.url)}catch(R){console.error("Error al generar presentación:",R);const U=(R==null?void 0:R.message)||"Error desconocido",H=(R==null?void 0:R.code)||"unknown";y(`Error (${H}): ${U}`)}finally{x(!1)}},S=async k=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{m(!0),await eYe(k)}catch(R){console.error("Error al eliminar presentación:",R),y("Error al eliminar la presentación")}finally{m(!1)}},B=()=>s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),s.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(n==null?void 0:n.id)||"",onChange:k=>{const R=t.find(U=>U.id===k.target.value);i(R||null)},required:!0,children:[s.jsx("option",{value:"",children:"Seleccione una planificación"}),s.jsx("optgroup",{label:"Unidades",children:t.filter(k=>k.tipo==="Unidad").map(k=>s.jsxs("option",{value:k.id,children:[k.tipo==="Unidad"?k.nombreUnidad:""," - ",k.asignatura," (",k.nivel,")"]},k.id))}),s.jsx("optgroup",{label:"Clases",children:t.filter(k=>k.tipo==="Clase").map(k=>s.jsxs("option",{value:k.id,children:[k.tipo==="Clase"?k.nombreClase:""," - ",k.asignatura," (",k.nivel,")"]},k.id))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),s.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),s.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:O,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:T().map((k,R)=>s.jsx("option",{value:k,children:k},R))}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),s.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:_,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentación"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"sobrio"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"🎭"})}),s.jsx("span",{className:"font-medium",children:"Sobrio"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"visual"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"🎨"})}),s.jsx("span",{className:"font-medium",children:"Visual"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y gráfico"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"academico"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"📚"})}),s.jsx("span",{className:"font-medium",children:"Académico"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"interactivo"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"🤝"})}),s.jsx("span",{className:"font-medium",children:"Interactivo"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinámico"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"profesional"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"💼"})}),s.jsx("span",{className:"font-medium",children:"Profesional"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y práctico"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"creativo"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"💡"})}),s.jsx("span",{className:"font-medium",children:"Creativo"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),s.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"minimalista"})),children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:s.jsx("span",{className:"text-2xl",children:"⚪"})}),s.jsx("span",{className:"font-medium",children:"Minimalista"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),s.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[s.jsx(tb,{className:"w-4 h-4"}),s.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),s.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Oo,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx(nYe,{estilo:o.estilo,tema:o.tema||"Tema de la presentación"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Características del estilo ",o.estilo]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño elegante y profesional"}),s.jsx("li",{children:"Colores neutros y tipografía clásica"}),s.jsx("li",{children:"Énfasis en la claridad y simplicidad"}),s.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño colorido y dinámico"}),s.jsx("li",{children:"Mayor uso de gráficos e imágenes"}),s.jsx("li",{children:"Énfasis en elementos visuales e infografías"}),s.jsx("li",{children:"Ideal para mantener la atención visual"})]}),o.estilo==="academico"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño formal y riguroso"}),s.jsx("li",{children:"Espacio para citas y referencias"}),s.jsx("li",{children:"Énfasis en conceptos teóricos"}),s.jsx("li",{children:"Ideal para contenido académico complejo"})]}),o.estilo==="interactivo"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño participativo"}),s.jsx("li",{children:"Incluye actividades y preguntas"}),s.jsx("li",{children:"Énfasis en la participación activa"}),s.jsx("li",{children:"Ideal para clases dinámicas"})]}),o.estilo==="profesional"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño corporativo"}),s.jsx("li",{children:"Elementos de casos prácticos"}),s.jsx("li",{children:"Énfasis en aplicaciones reales"}),s.jsx("li",{children:"Ideal para formación profesional"})]}),o.estilo==="creativo"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño no convencional y llamativo"}),s.jsx("li",{children:"Elementos visuales originales"}),s.jsx("li",{children:"Énfasis en despertar la imaginación"}),s.jsx("li",{children:"Ideal para temas creativos o artísticos"})]}),o.estilo==="minimalista"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Diseño extremadamente simplificado"}),s.jsx("li",{children:"Amplio espacio en blanco"}),s.jsx("li",{children:"Énfasis en lo esencial"}),s.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),s.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:s.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:k=>l(R=>({...R,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:"🖼️ Incluir sugerencias para imágenes educativas"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:k=>l(R=>({...R,incluirActividades:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:"✏️ Incluir actividades y ejercicios prácticos"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:k=>l(R=>({...R,incluirEvaluacion:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:"📝 Incluir diapositiva de evaluación/reflexión"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:k=>l(R=>({...R,formatoPedagogico:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:"📚 Aplicar estructura pedagógica avanzada"})]})]}),s.jsxs("div",{className:"hidden",children:[s.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:k=>l(R=>({...R,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),s.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:_,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),s.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&s.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:g||!n,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?s.jsxs(s.Fragment,{children:[s.jsx(Di,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(sF,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),s.jsx("div",{className:"space-y-4",children:h?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Di,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?s.jsxs("div",{className:"text-center py-8 space-y-4",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),s.jsx("div",{className:"text-sm",children:N.checking?s.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[s.jsx(Di,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Verificando autorización..."})]}):s.jsxs("div",{className:`flex items-center justify-center gap-2 ${N.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[s.jsx("span",{children:N.isAuthorized?"✅":"⚠️"}),s.jsx("span",{children:N.message})]})}),!N.checking&&!N.isAuthorized&&s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:()=>{const k=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=k},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(xg,{className:"w-4 h-4"}),s.jsx("span",{children:"Autorizar Google Slides"})]})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:async()=>{try{C(R=>({...R,checking:!0}));const k=await i6();C({isAuthorized:k.isAuthorized,message:k.message,checking:!1})}catch(k){C({isAuthorized:!1,message:`Error: ${k.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:N.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${N.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[N.checking?s.jsx(Di,{className:"w-3 h-3 animate-spin"}):s.jsx("span",{children:"🔄"}),s.jsx("span",{children:"Verificar estado"})]})})]}):d.map(k=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.tema}),k.estado==="generando"?s.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[s.jsx(Di,{className:"w-3 h-3 animate-spin"}),"Generando"]}):k.estado==="error"?s.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[s.jsx(Oo,{className:"w-3 h-3"}),"Error"]}):s.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[s.jsx(cn,{className:"w-3 h-3"}),"Lista"]})]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[k.asignatura," - ",k.curso]}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Io,{className:"w-3 h-3"}),new Date(k.fechaCreacion).toLocaleDateString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx($B,{className:"w-3 h-3"}),k.numDiapositivas," diapositivas"]}),s.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${k.estilo==="sobrio"?"bg-slate-100 text-slate-700":k.estilo==="visual"?"bg-blue-100 text-blue-700":k.estilo==="academico"?"bg-amber-100 text-amber-700":k.estilo==="interactivo"?"bg-green-100 text-green-700":k.estilo==="profesional"?"bg-indigo-100 text-indigo-700":k.estilo==="creativo"?"bg-purple-100 text-purple-700":(k.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[k.estilo==="sobrio"&&"🎭",k.estilo==="visual"&&"🎨",k.estilo==="academico"&&"📚",k.estilo==="interactivo"&&"🤝",k.estilo==="profesional"&&"💼",k.estilo==="creativo"&&"💡",k.estilo==="minimalista"&&"⚪",k.estilo]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),s.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:k.objetivosAprendizaje.map((R,U)=>s.jsx("li",{className:"truncate",children:R.length>60?R.substring(0,57)+"...":R},U))})]}),k.mensajeError&&s.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:k.mensajeError}),s.jsxs("div",{className:"mt-3 flex justify-between",children:[k.estado==="completada"?s.jsxs(s.Fragment,{children:[s.jsxs("a",{href:k.esDemoMode||k.urlPresentacion.includes("example.com")?"#":k.urlPresentacion,onClick:R=>{(k.esDemoMode||k.urlPresentacion.includes("example.com"))&&(R.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${k.esDemoMode||k.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[s.jsx(xg,{className:"w-3 h-3"}),k.esDemoMode||k.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),k.esDemoMode&&k.urlAutorizacion&&s.jsxs("a",{href:k.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[s.jsx(xg,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):s.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),s.jsx("button",{onClick:()=>S(k.id),className:"text-red-500 hover:text-red-700",children:s.jsx(Da,{className:"w-4 h-4"})})]})]},k.id))})]})})]}),L=()=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[s.jsx(lz,{className:"w-16 h-16 mx-auto text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),D=()=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[s.jsx($B,{className:"w-16 h-16 mx-auto text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:s.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[s.jsxs("button",{onClick:()=>a("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(sF,{className:"w-4 h-4"}),s.jsx("span",{children:"Presentaciones"})]}),s.jsxs("button",{onClick:()=>a("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(lz,{className:"w-4 h-4"}),s.jsx("span",{children:"Guías"})]}),s.jsxs("button",{onClick:()=>a("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx($B,{className:"w-4 h-4"}),s.jsx("span",{children:"Recursos"})]})]})}),s.jsx("div",{className:"mb-6",children:s.jsx(aYe,{})}),s.jsxs("div",{children:[r==="presentaciones"&&B(),r==="guias"&&L(),r==="recursos"&&D()]})]})},lC="planificaciones",Qce="actividades_calendario",a7=e=>{var r,a,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:n.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},Hce=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:lr.fromDate(new Date),fechaActualizacion:lr.fromDate(new Date)};return(await Yr(pt(ot,lC),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},zce=async(e,t,r)=>{try{const a=$t(ot,lC,e),n=await $h(a);if(!n.exists()||n.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Ui(a,{...t,fechaActualizacion:lr.fromDate(new Date)})}catch(a){throw console.error("Error al actualizar planificación:",a),new Error("No se pudo actualizar la planificación")}},Vce=async(e,t)=>{try{const r=$t(ot,lC,e),a=await $h(r);if(!a.exists()||a.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Ja(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},iYe=async e=>{try{const t=_t(pt(ot,lC),rr("userId","==",e),Gt("fechaCreacion","desc"));return(await _r(t)).docs.map(a7)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},$ce=(e,t)=>{const r=_t(pt(ot,lC),rr("userId","==",e),Gt("fechaCreacion","desc"));return ar(r,a=>{try{const n=a.docs.map(a7);console.log(`Recibiendo ${n.length} planificaciones del usuario ${e}`);const i=n.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificación ${o.id} tiene detallesLeccion inválidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(i)}catch(n){console.error("Error procesando datos de planificaciones:",n),t([])}},a=>{console.error("Error en suscripción a planificaciones:",a)})},Gce=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:lr.fromDate(new Date),fechaActualizacion:lr.fromDate(new Date)};return(await Yr(pt(ot,Qce),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},qce=(e,t)=>{const r=_t(pt(ot,Qce),rr("userId","==",e),Gt("fecha","desc"));return ar(r,a=>{const n=a.docs.map(a7);t(n)},a=>{console.error("Error en suscripción a actividades:",a)})},gD=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:Vce,getPlanificacionesByUser:iYe,saveActividad:Gce,savePlanificacion:Hce,subscribeToActividades:qce,subscribeToPlanificaciones:$ce,updatePlanificacion:zce},Symbol.toStringTag,{value:"Module"})),oYe=(e,t)=>{const[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,l]=w.useState(null),c=w.useCallback(async()=>{if(!e){console.warn("🛠️ cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),i(!1),l("No se pudo determinar la identidad del usuario"),a([]);return}try{console.log(`🛠️ Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await ai(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>gD);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(`🛠️ Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${v.id}`),{...v,detallesLeccion:[]}):v);a(x),i(!1)}catch(m){console.error("🛠️ Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),i(!1)}},[e]);w.useEffect(()=>{if(!e){console.log("🛠️ usePlanificaciones: userId nulo o vacío, no se cargarán planificaciones"),i(!1),l("ID de usuario no disponible"),a([]);return}console.log(`🛠️ usePlanificaciones: Cargando planificaciones para usuario ${e}`),i(!0),l(null);let m=null;try{m=$ce(e,x=>{if(console.log(`🛠️ usePlanificaciones: Recibidos ${x.length} documentos por suscripción`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${y.id}`),{...y,detallesLeccion:[]}):y);a(v),i(!1)})}catch(x){console.error("🛠️ Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{n&&r.length===0&&(console.log("🛠️ Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await Hce(m,e)}catch(g){throw l(g.message||"Error al guardar planificación"),g}},d=async(m,g)=>{try{l(null),await zce(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificación"),x}},f=async m=>{try{l(null),await Vce(m,e)}catch(g){throw l(g.message||"Error al eliminar planificación"),g}},h=w.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log("📊 Diagnóstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await ai(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>gD);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(`📊 Diagnóstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Inválidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:N}=await ai(async()=>{const{updateDoc:T,doc:_}=await Promise.resolve().then(()=>Tb);return{updateDoc:T,doc:_}},void 0),{db:C}=await ai(async()=>{const{db:T}=await Promise.resolve().then(()=>s8);return{db:T}},void 0);for(const T of v)await y(N(C,"planificaciones",T.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificación.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error("📊 Error en diagnóstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:n,error:o,save:u,update:d,remove:f,diagnosticarYReparar:h}},xD=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},lYe=e=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null);w.useEffect(()=>{if(!e){n(!1);return}n(!0);try{return qce(e,u=>{r(u),n(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),n(!1)}},[e]);const l=w.useCallback(async c=>{try{return o(null),await Gce(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:a,error:i,save:l}},cYe=({lesson:e,onClose:t,onSave:r,isLoading:a=!1})=>{const[n,i]=w.useState(e),o=c=>{i({...n,[c.target.name]:c.target.value})},l=async()=>{try{await r(n),t()}catch(c){console.error("Error al guardar lección:",c)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),s.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(n).map(([c,u])=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),s.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:a})]},c))}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[s.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:a,children:"Cancelar"}),s.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a,children:[a&&s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},uYe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:a=!1,onUpdatePlan:n})=>{var L,D,k;const[i,o]=w.useState(e.progreso??0),[l,c]=w.useState(!1),[u,d]=w.useState(((L=e.reflexionUnidad)==null?void 0:L.fortalezas)||""),[f,h]=w.useState(((D=e.reflexionUnidad)==null?void 0:D.mejoras)||""),[m,g]=w.useState(((k=e.reflexionUnidad)==null?void 0:k.debilidades)||""),x=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],v=(()=>{var U;const R=Object.fromEntries(x.map(H=>[H,""]));return(((U=e.reflexionUnidad)==null?void 0:U.ordenHabilidades)||[]).forEach((H,Q)=>{x.includes(H)&&(R[H]=Q+1)}),R})(),[y,N]=w.useState(v),[C,T]=w.useState(!1);w.useEffect(()=>{var U,H,Q,V;d(((U=e.reflexionUnidad)==null?void 0:U.fortalezas)||""),h(((H=e.reflexionUnidad)==null?void 0:H.mejoras)||""),g(((Q=e.reflexionUnidad)==null?void 0:Q.debilidades)||"");const R=Object.fromEntries(x.map(G=>[G,""]));(((V=e.reflexionUnidad)==null?void 0:V.ordenHabilidades)||[]).forEach((G,J)=>{x.includes(G)&&(R[G]=J+1)}),N(R)},[e.id]);const _=()=>{const R=u.trim().length>0&&f.trim().length>0&&m.trim().length>0,H=Object.entries(y).filter(([,Q])=>Q!=="").sort((Q,V)=>Q[1]-V[1]).map(([Q])=>Q).length>=1;return R&&H},O=async R=>{const U=parseInt(R.target.value,10);if(U===100&&!_()){alert("Para marcar la unidad como 100% completada, primero debes completar y guardar la Reflexión Docente (fortalezas, mejoras, desafíos y priorización de habilidades).");return}o(U),c(!0);try{e.id&&n&&(await n(e.id,{progreso:U}),console.log("✅ Progreso actualizado exitosamente"))}catch(H){console.error("❌ Error completo:",H),alert(`Error al guardar el avance: ${H.message}`),o(e.progreso??0)}finally{c(!1)}},j=(R,U)=>{N(H=>{const Q={...H};if(U!==""){const V=Object.keys(Q).find(G=>G!==R&&Q[G]===U);V&&(Q[V]="")}return Q[R]=U,Q})},S=()=>Object.entries(y).filter(([,R])=>R!=="").sort((R,U)=>R[1]-U[1]).map(([R])=>R),B=async()=>{if(!(!n||!e.id)){if(!_()){alert("La Reflexión Docente es obligatoria: completa Fortalezas, Mejoras, Desafíos y prioriza al menos una habilidad de Bloom.");return}T(!0);try{const R=S();await n(e.id,{reflexionUnidad:{fortalezas:u.trim(),mejoras:f.trim(),debilidades:m.trim(),ordenHabilidades:R}})}catch(R){console.error("❌ Error al guardar reflexión:",R),alert(`Error al guardar la reflexión: ${R.message}`)}finally{T(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"range",min:0,max:100,value:i,onChange:O,disabled:l||a}),s.jsxs("span",{className:"font-bold w-12",children:[i,"%"]}),l&&s.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),s.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((R,U)=>s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[s.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",U+1,": ",R.actividades]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo:"})," ",R.objetivosAprendizaje]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Contenidos:"})," ",R.contenidosConceptuales]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Habilidad (Bloom):"})," ",R.habilidadesBloom]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Perfil de Egreso:"})," ",R.perfilEgreso]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Interdisciplinariedad:"})," ",R.asignaturasInterdisciplinariedad]})]}),s.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:s.jsxs("p",{className:"font-medium",children:[s.jsx("strong",{children:"Actividades sugeridas:"})," ",R.actividades]})}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{onClick:()=>t(U,R),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:a,children:"Editar"}),s.jsx("button",{onClick:()=>r(R,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:a,children:"Usar para Plan de Clase"})]})]},U))}),s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-3",children:"Reflexión Docente"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:'Obligatoria. Se usa en el módulo "Seguimiento Curricular" para análisis y visualización.'}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Fortalezas ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:u,onChange:R=>d(R.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Mejoras ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:f,onChange:R=>h(R.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Desafíos ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:m,onChange:R=>g(R.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Habilidades Bloom priorizadas (1 = mayor prioridad) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(R=>s.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[s.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:R}),s.jsxs("select",{value:y[R]===""?"":String(y[R]),onChange:U=>j(R,U.target.value===""?"":parseInt(U.target.value,10)),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"—"}),[1,2,3,4,5,6].map(U=>s.jsx("option",{value:U,children:U},U))]})]},R))}),s.jsx("div",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:"Selecciona números sin repetir. Solo se guardan las habilidades con número asignado."})]})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("button",{onClick:B,disabled:C||a,className:"inline-flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-md disabled:opacity-50",children:[C?s.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin inline-block"}):s.jsx(gl,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar reflexión"})]})})]})]})},dYe=({plan:e,onBack:t,onSave:r,onDelete:a,isLoading:n=!1})=>{const[i,o]=w.useState(e),[l,c]=w.useState(!1);w.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const h=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON válido:",y)}return String(v)},m=h(e.momentosClase.inicio),g=h(e.momentosClase.desarrollo),x=h(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...i};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualización")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}},f=h=>{if(console.log("Formateando contenido:",typeof h,h!=null&&h.substring?h.substring(0,50):h),typeof h=="string")try{h.trim().startsWith("{")&&(h=JSON.parse(h),console.log("Contenido parseado a objeto:",h))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof h=="object"&&h!==null)try{let m="";if(h.actividades&&Array.isArray(h.actividades)){m=`${h.tiempo?"TIEMPO: "+h.tiempo+`

`:""}`,m+=`${h.objetivo?`OBJETIVO:
`+h.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,h.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripción"}

`;let y="";x.tipo&&(y+=`• Tipo: ${x.tipo}
`),x.recursos&&(y+=`• Recursos: ${x.recursos}
`),x.evaluacion&&(y+=`• Evaluación: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(h).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=`• ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof h[x]=="object"?JSON.stringify(h[x]):h[x]}
`)}),g&&(m+=`
INFORMACIÓN ADICIONAL:
${g}`),m}else{if(typeof h=="string")try{const y=JSON.parse(h);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(h,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+="• "+y.trim().substring(1)+`
`;else if(y.includes(":")){const N=y.split(":");if(N.length>=2){const C=N[0].trim(),T=N.slice(1).join(":").trim();["tiempo","duración","objetivo","actividad","tipo","recursos","evaluación"].includes(C.toLowerCase())?v+=`${C.toUpperCase()}: ${T}
`:v+=`${C}: ${T}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(h)}return String(h)};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),s.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||l,children:"← Volver"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),s.jsx("textarea",{name:"momentosClase.inicio",value:f(i.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activación de conocimientos previos, motivación y presentación del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:n||l})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),s.jsx("textarea",{name:"momentosClase.desarrollo",value:f(i.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didáctica, estrategias de enseñanza, actividades prácticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:n||l})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),s.jsx("textarea",{name:"momentosClase.cierre",value:f(i.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, síntesis, metacognición, evaluación formativa y retroalimentación...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:n||l})]})]}),s.jsx("div",{className:"text-right mt-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:()=>a(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:n||l,children:"🗑️ Eliminar Plan"}),s.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n||l,children:[l&&s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},fYe=({userId:e})=>{const{actividades:t,save:r}=lYe(e),[a,n]=w.useState("list"),[i,o]=w.useState(null),[l,c]=w.useState(!1),[u,d]=w.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=w.useState(f);w.useEffect(()=>{a==="summary"&&i&&g()},[a,i,e]);const g=async()=>{if(i)try{d(!1)}catch(O){console.error("Error al verificar evento en calendario:",O)}},x=O=>{const{name:j,value:S}=O.target;m(B=>({...B,[j]:S}))},v=(O,j,S)=>{m(B=>({...B,tareas:B.tareas.map(L=>L.id===O?{...L,[j]:S}:L)}))},y=()=>{m(O=>({...O,tareas:[...O.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},N=O=>{m(j=>({...j,tareas:j.tareas.filter(S=>S.id!==O)}))},C=async O=>{O.preventDefault(),c(!0);const j=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{xD("Planificación - Actividad Calendario");const S=jn.currentUser,B=S?await S.getIdToken():null;if(!B)throw new Error("No se pudo obtener el token de autenticación");const L=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`},body:JSON.stringify({prompt:j,formData:h})});let D="No generado";L.ok?D=(await L.json()).objetivo||D:(console.error("Error al generar objetivo con IA:",await L.text()),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él."));const k={...h,objetivo:D},R=await r(k),U={...k,id:R};o(U),n("summary")}catch(S){console.error("Error al guardar actividad:",S),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},T=O=>{console.log("Agregando al calendario:",O),d(!0)},_="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return a==="form"?s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:_,required:!0,disabled:l}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:_,required:!0,disabled:l}),s.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:_,required:!0,disabled:l})]}),s.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:_,required:!0,disabled:l}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:_,required:!0,disabled:l}),s.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:_,required:!0,disabled:l})]}),s.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:_,disabled:l})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),s.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),s.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((O,j)=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[s.jsx("button",{type:"button",onClick:()=>N(O.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),s.jsx("textarea",{value:O.descripcion,onChange:S=>v(O.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${j+1}`,rows:2,className:_,required:!0,disabled:l}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsx("input",{value:O.responsable,onChange:S=>v(O.id,"responsable",S.target.value),placeholder:"Responsable",className:_,required:!0,disabled:l}),s.jsx("input",{value:O.recursos,onChange:S=>v(O.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:_,disabled:l})]})]},O.id))})]}),s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[s.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),s.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>n("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):a==="summary"&&i?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[s.jsx("span",{className:"text-2xl",children:"✓"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),s.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),s.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),s.jsx("span",{children:i.nombre})]}),s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),s.jsx("span",{children:new Date(`${i.fecha}T${i.hora}`).toLocaleString("es-CL")})]}),s.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),s.jsx("p",{children:i.descripcion})]}),s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),s.jsx("span",{children:i.ubicacion})]}),s.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[s.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),s.jsx("span",{children:i.participantes})]}),s.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),s.jsx("p",{children:i.recursosGenerales})]}),s.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[s.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),s.jsx("p",{children:i.objetivo})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[s.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),s.jsx("button",{onClick:()=>T(i),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),s.jsx("button",{onClick:()=>{n("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),s.jsx("button",{onClick:()=>{n("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),s.jsx("div",{className:"space-y-3",children:t.length>0?t.map(O=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:O.nombre}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(O.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",O.ubicacion]})]},O.id)):s.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},AYe=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log("🔑 PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log("🔑 ID de usuario válido:",r);const{planificaciones:a,save:n,update:i,remove:o,loading:l,diagnosticarYReparar:c}=oYe(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=w.useState(u),[h,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState("unidad"),[T,_]=w.useState(null),[O,j]=w.useState(null),S=(ae,le)=>{h&&j({planId:h.id,lessonIndex:ae,lessonData:le})},B=ae=>{m(ae),f({asignatura:ae.asignatura,nivel:ae.nivel,nombreUnidad:ae.nombreUnidad,contenidos:ae.contenidos,cantidadClases:ae.cantidadClases,observaciones:ae.observaciones,ideasParaUnidad:ae.ideasParaUnidad})},L=async ae=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta planificación?"))try{await o(ae),(h==null?void 0:h.id)===ae&&m(null)}catch(le){console.error("Error al eliminar planificación:",le),alert("No se pudo eliminar la planificación.")}},D=async ae=>{if(window.confirm("¿Estás seguro de que quieres eliminar este plan de clase?"))try{await o(ae),_(null)}catch(le){console.error("Error al eliminar plan de clase:",le),alert("No se pudo eliminar el plan de clase.")}},k=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),R=w.useMemo(()=>{const ae=e.cursos||[],le=new Set;return ae.forEach(ie=>{ie.startsWith("1º")?le.add("1º Medio"):ie.startsWith("2º")?le.add("2º Medio"):ie.startsWith("3º")?le.add("3º Medio"):ie.startsWith("4º")&&le.add("4º Medio")}),Array.from(le)},[e.cursos]);w.useEffect(()=>{f(ae=>({...ae,asignatura:k[0]||"",nivel:R[0]||""}))},[k,R]);const U=ae=>{const{name:le,value:ie}=ae.target;f(ne=>({...ne,[le]:le==="cantidadClases"?parseInt(ie,10):ie}))},H=()=>{const{asignatura:ae,nivel:le,nombreUnidad:ie,contenidos:ne,cantidadClases:oe,observaciones:we,ideasParaUnidad:K}=d;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${ae} en ${le}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${ae}
    - Nivel: ${le}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${ne}"
    - Cantidad de clases para la unidad: ${oe}
    - Ideas y perspectiva del docente para la unidad: "${K||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${we||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${ae} en ${le}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${oe} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},Q=async ae=>{ae.preventDefault(),x(!0),y(null);try{xD("Planificación - Unidad");const le=H(),ie=jn.currentUser,ne=ie?await ie.getIdToken():null;if(!ne)throw new Error("No se pudo obtener el token de autenticación");const oe=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({prompt:le,unidadFormData:d})});if(!oe.ok){const Ee=await oe.text();throw console.error("Error response from backend:",Ee),new Error(`Error al generar la unidad con IA: ${oe.statusText}`)}const we=await oe.json(),K={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:we.objetivosAprendizaje,indicadoresEvaluacion:we.indicadoresEvaluacion,detallesLeccion:we.detallesLeccion};if(h)await i(h.id,K),m({...K,id:h.id});else{const Ee=await n(K);m({...K,id:Ee})}}catch(le){console.error("Error al generar planificación con IA",le),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},V=async(ae,le)=>{x(!0),y(null);const ie=()=>`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${le.asignatura}
    - Nivel: ${le.nivel}
    - Objetivo de la clase: ${ae.objetivosAprendizaje}
    - Contenidos: ${ae.contenidosConceptuales}
    - Actividades sugeridas: ${ae.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{xD("Planificación - Utilizar Clase");const ne=ie(),oe=jn.currentUser,we=oe?await oe.getIdToken():null;if(!we)throw new Error("No se pudo obtener el token de autenticación");const K=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${we}`},body:JSON.stringify({prompt:ne,unitPlan:le,lessonDetail:ae,currentUser:e})});if(!K.ok){const Ce=await K.text();throw console.error("Error response from backend:",Ce),new Error(`Error al generar el plan de clase con IA: ${K.statusText}`)}const Ee=await K.json(),_e={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:le.asignatura,nivel:le.nivel,contenidos:ae.contenidosConceptuales,observaciones:"",nombreClase:ae.actividades,duracionClase:80,momentosClase:Ee,detalleLeccionOrigen:ae};await n(_e),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),C("clase")}catch(ne){console.error("Error al generar plan de clase con IA",ne),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},G=async ae=>{if(O)try{const{planId:le,lessonIndex:ie}=O,ne=a.find(K=>K.id===le&&K.tipo==="Unidad");if(!ne)return;const oe=[...ne.detallesLeccion];oe[ie]=ae;const we={...ne,detallesLeccion:oe};await i(le,we),m(we),j(null)}catch(le){console.error("Error al actualizar lección:",le),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=async()=>{try{console.log("🔄 Recargando planificaciones manualmente...");const{getPlanificacionesByUser:ae}=await ai(async()=>{const{getPlanificacionesByUser:ie}=await Promise.resolve().then(()=>gD);return{getPlanificacionesByUser:ie}},void 0);if(!t){console.warn("🔄 No hay userId para recargar planificaciones");return}const le=await ae(t);console.log(`🔄 Obtenidas ${le.length} planificaciones frescas`),alert(`Se han encontrado ${le.length} planificaciones en la base de datos. Recargue la página para ver los cambios.`),window.location.reload()}catch(ae){console.error("🔄 Error recargando planificaciones:",ae),alert("Hubo un error al recargar las planificaciones. Intente recargar la página manualmente.")}},[Z,M]=w.useState({visible:!1,ejecutando:!1,resultado:null}),F=async()=>{M(le=>({...le,ejecutando:!0,resultado:null}));const ae=await c();M(le=>({...le,ejecutando:!1,resultado:ae}))},X=()=>{var ae;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>M(le=>({...le,visible:!le.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnóstico"}),s.jsxs("button",{onClick:W,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[s.jsx(iF,{className:"w-4 h-4"}),s.jsx("span",{children:"Recargar"})]})]})]}),Z.visible&&s.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnóstico"}),s.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentará resolver problemas con las planificaciones que no aparecen en el historial."}),Z.resultado&&s.jsx("div",{className:`p-3 mb-3 rounded-md ${Z.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":Z.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:Z.resultado.message}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:F,disabled:Z.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:Z.ejecutando?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx("span",{children:"Ejecutar diagnóstico"})}),((ae=Z.resultado)==null?void 0:ae.status)==="repaired"&&s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar página"})]})]}),l?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):s.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:d.asignatura,onChange:U,className:J,required:!0,disabled:g,children:k.map(le=>s.jsx("option",{value:le,children:le},le))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),s.jsx("select",{name:"nivel",value:d.nivel,onChange:U,className:J,required:!0,disabled:g,children:R.map(le=>s.jsx("option",{value:le,children:le},le))})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),s.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:U,className:J,placeholder:"Ej: Introducción a la Programación",required:!0,disabled:g})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),s.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:U,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. Sé lo más específico posible.",className:J,required:!0,disabled:g})]}),s.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[s.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),s.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:U,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:J,disabled:g})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),s.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:U,className:J,min:"1",max:"20",disabled:g})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),s.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:U,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:J,disabled:g})]})]}),s.jsx("div",{className:"pt-4 text-right",children:s.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?s.jsx(iF,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(vg,{className:"w-5 h-5"}),s.jsx("span",{children:h?"Regenerar Plan":"Generar con IA"})]})})}),v&&s.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),h&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),s.jsx(uYe,{plan:h,onEditLesson:S,onUseLesson:V,onUpdatePlan:i,isLoading:g})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):s.jsxs("div",{className:"space-y-4",children:[console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",a.length),console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de unidades:",a.filter(le=>le.tipo==="Unidad").length),a.length>0?a.filter(le=>le.tipo==="Unidad").map(le=>s.jsx("div",{className:`p-5 border rounded-xl transition-all ${(h==null?void 0:h.id)===le.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:le.nombreUnidad}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(le.fechaCreacion).toLocaleString("es-CL")]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",le.contenidos]}),s.jsx("div",{className:"mt-2 flex items-center gap-2",children:le.reflexionUnidad&&le.reflexionUnidad.fortalezas&&le.reflexionUnidad.mejoras&&le.reflexionUnidad.debilidades?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Reflexión completa"}):s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Reflexión pendiente"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>B(le),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[s.jsx(_Ne,{className:"w-4 h-4"}),s.jsx("span",{children:"Editar"})]}),s.jsxs("button",{onClick:()=>L(le.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[s.jsx(Da,{className:"w-4 h-4"}),s.jsx("span",{children:"Eliminar"})]})]})]})},le.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},Y=()=>{const ae=a.filter(le=>le.tipo==="Clase").sort((le,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(le.fechaCreacion).getTime());return T?s.jsx(dYe,{plan:T,onBack:()=>_(null),onDelete:D,onSave:async le=>{try{await i(le.id,le),_(le)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(jwe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):s.jsx("div",{className:"space-y-4",children:ae.length>0?ae.map(le=>s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:le.nombreClase}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(le.fechaCreacion).toLocaleString("es-CL")]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",le.contenidos]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{onClick:()=>_(le),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},le.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return w.useEffect(()=>{if((async()=>{try{if(console.log("📊 Diagnóstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn("📊 Sin userId, no se pueden obtener planificaciones");return}const{collection:le,query:ie,where:ne,getDocs:oe}=await ai(async()=>{const{collection:_e,query:Ce,where:de,getDocs:xe}=await Promise.resolve().then(()=>Tb);return{collection:_e,query:Ce,where:de,getDocs:xe}},void 0),{db:we}=await ai(async()=>{const{db:_e}=await Promise.resolve().then(()=>s8);return{db:_e}},void 0),K=ie(le(we,"planificaciones"),ne("userId","==",t)),Ee=await oe(K);if(console.log(`📊 Documentos en Firestore: ${Ee.docs.length}`),Ee.docs.length>0){console.log("📊 Primer documento:",Ee.docs[0].data());const _e=Ee.docs.filter(de=>de.data().tipo==="Unidad");console.log(`📊 Documentos de tipo Unidad: ${_e.length}`);const Ce=_e.filter(de=>Array.isArray(de.data().detallesLeccion)&&de.data().detallesLeccion!==void 0);if(console.log(`📊 Unidades con detallesLeccion válidos: ${Ce.length}`),_e.length>Ce.length){console.log(`📊 Intentando corregir ${_e.length-Ce.length} unidades inválidas...`);for(const de of _e){const xe=de.data();if(!Array.isArray(xe.detallesLeccion)||xe.detallesLeccion===void 0)try{console.log(`📊 Corrigiendo documento ${de.id}...`);const{doc:he,updateDoc:ye}=await ai(async()=>{const{doc:ce,updateDoc:Ae}=await Promise.resolve().then(()=>Tb);return{doc:ce,updateDoc:Ae}},void 0);await ye(he(we,"planificaciones",de.id),{detallesLeccion:[]}),console.log(`📊 Documento ${de.id} corregido con éxito`)}catch(he){console.error(`📊 Error al corregir documento ${de.id}:`,he)}}}}console.log("📊 Diagnóstico de planificaciones - Finalizado")}catch(le){console.error("📊 Error en diagnóstico de planificaciones:",le)}})(),!l){console.log(`🔍 Verificando ${a.length} planificaciones recibidas...`),console.log("🔍 Tipos de planificaciones:",a.map(ie=>ie.tipo));const le=a.filter(ie=>ie.tipo==="Unidad"&&(!Array.isArray(ie.detallesLeccion)||ie.detallesLeccion===void 0));le.length>0&&(console.warn(`🔍 Encontradas ${le.length} unidades con formato inválido`),le.forEach(async ie=>{try{await i(ie.id,{...ie,detallesLeccion:[]}),console.log(`🔍 Reparada planificación ${ie.id}`)}catch(ne){console.error(`🔍 Error al reparar planificación ${ie.id}:`,ne)}}))}},[t,a,l,i]),e?r?s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx(bre,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:s.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[s.jsxs("button",{onClick:()=>C("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(Ds,{className:"w-4 h-4"}),s.jsx("span",{children:"Unidad"})]}),s.jsxs("button",{onClick:()=>C("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(uEe,{className:"w-4 h-4"}),s.jsx("span",{children:"Clase"})]}),s.jsxs("button",{onClick:()=>C("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(Io,{className:"w-4 h-4"}),s.jsx("span",{children:"Actividades Calendario"})]}),s.jsxs("button",{onClick:()=>C("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[s.jsx(sF,{className:"w-4 h-4"}),s.jsx("span",{children:"Mis Materiales"})]})]})}),N==="unidad"&&X(),N==="clase"&&Y(),N==="calendario"&&s.jsx(fYe,{userId:t}),N==="materiales"&&s.jsx(sYe,{userId:t,planificaciones:a}),O&&s.jsx(cYe,{lesson:O.lessonData,onClose:()=>j(null),onSave:G,isLoading:g})]}):s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificación de usuario"}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:s.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),s.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),s.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[s.jsx("li",{children:"La sesión no se ha inicializado correctamente"}),s.jsx("li",{children:"Su cuenta no tiene asignado un ID válido"}),s.jsx("li",{children:"Hay un problema en la sincronización con la base de datos"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicación"})})]}):s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),s.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},S4="events",hYe=async()=>{try{const e=_t(pt(Ar,S4),Gt("date","asc"));return(await _r(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},mYe=async e=>{try{return{id:(await Yr(pt(Ar,S4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},pYe=async(e,t)=>{try{const r=$t(Ar,S4,e);await Ui(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},gYe=async e=>{try{const t=$t(Ar,S4,e);await Ja(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},xYe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],xW={[sa.EVALUACION]:s.jsx(Ds,{className:"h-4 w-4"}),[sa.ACTO]:s.jsx(wre,{className:"h-4 w-4"}),[sa.ACTIVIDAD_FOCALIZADA]:s.jsx(Fb,{className:"h-4 w-4"}),[sa.SALIDA_PEDAGOGICA]:s.jsx(HCe,{className:"h-4 w-4"})},vYe=e=>{switch(e.type){case sa.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case sa.ACTO:return`Acto: ${e.ubicacion}`;case sa.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case sa.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},bYe=({isOpen:e,onClose:t,onSave:r,onDelete:a,event:n,date:i,isLoading:o})=>{const[l,c]=w.useState({});w.useEffect(()=>{c(n||{type:sa.EVALUACION,subtype:tg.PRUEBA_PARCIAL,asignatura:ln[0],curso:on[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[n,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(N=>({...N,[v]:y}))},f=x=>{c(v=>{if(v.type===sa.SALIDA_PEDAGOGICA){const y=v.cursos||[],N=y.includes(x)?y.filter(C=>C!==x):[...y,x];return{...v,cursos:N.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case sa.EVALUACION:{const N={date:i,type:sa.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===tg.RUBRICA||l.subtype===tg.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(N.enlace=l.enlace.trim()),v=N;break}case sa.ACTO:v={date:i,type:sa.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case sa.ACTIVIDAD_FOCALIZADA:v={date:i,type:sa.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case sa.SALIDA_PEDAGOGICA:v={date:i,type:sa.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${i}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case sa.EVALUACION:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),s.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:HEe.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:ln.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),s.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:on.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),s.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===tg.RUBRICA||l.subtype===tg.PAUTA_COTEJO)&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),s.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case sa.ACTO:case sa.ACTIVIDAD_FOCALIZADA:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),s.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),s.jsxs("div",{className:"relative",children:[s.jsx(Tw,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),s.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ac,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),s.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case sa.SALIDA_PEDAGOGICA:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),s.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),s.jsxs("div",{className:"relative",children:[s.jsx(Tw,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),s.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),s.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:on.map(x=>s.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),s.jsx("span",{children:x})]},x))})]})]});default:return null}};return s.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:s.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:n?"Editar Evento":"Agregar Evento"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),s.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:s.jsx(Oo,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),s.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(sa).map(x=>s.jsx("option",{value:x,children:x},x))})]}),g()]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[s.jsx("div",{children:n&&a&&s.jsxs("button",{type:"button",onClick:a,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[s.jsx(Da,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[s.jsx(Oo,{className:"h-4 w-4"}),"Cancelar"]}),s.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[s.jsx(gl,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},yYe=({profile:e})=>{const[t,r]=w.useState(new Date),[a,n]=w.useState([]),[i,o]=w.useState(!1),[l,c]=w.useState(null),[u,d]=w.useState(!1),[f,h]=w.useState(Object.values(sa)),[m,g]=w.useState(!1),[x,v]=w.useState(null),[y,N]=w.useState(null),C=w.useCallback(async()=>{o(!0);try{const D=await hYe();n(D),c(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);w.useEffect(()=>{C()},[C]);const T=w.useMemo(()=>{const D=t.getFullYear(),k=t.getMonth(),R=new Date(D,k,1).getDay(),U=new Date(D,k+1,0).getDate(),H=[];let Q=1;for(let V=0;V<6;V++){const G=[];for(let J=0;J<7;J++)V===0&&J<R||Q>U?G.push(null):(G.push(new Date(D,k,Q)),Q++);if(H.push(G),Q>U)break}return H},[t]),_=D=>{h(k=>k.includes(D)?k.filter(R=>R!==D):[...k,D])},O=()=>{f.length===Object.values(sa).length?h([]):h(Object.values(sa))},j=D=>{e!==Mt.ESTUDIANTE&&(v(D.toISOString().split("T")[0]),N(null),g(!0))},S=(D,k)=>{k.stopPropagation(),e!==Mt.ESTUDIANTE&&(v(D.date),N(D),g(!0))},B=async D=>{d(!0);try{y?await pYe(y.id,D):await mYe(D),await C(),g(!1)}catch(k){console.error("Error al guardar evento:",k);const R=k instanceof Error?k.message:"Error desconocido";c(`Error al guardar el evento: ${R}`)}finally{d(!1)}},L=async()=>{if(y){d(!0);try{await gYe(y.id),await C(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const k=D instanceof Error?D.message:"Error desconocido";c(`No se pudo eliminar el evento: ${k}`)}finally{d(!1)}}};return s.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[s.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),s.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),s.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:i&&s.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&s.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!i&&a.length===0&&s.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[s.jsx(ZNe,{className:"h-5 w-5 mt-0.5"}),s.jsx("p",{children:"No hay eventos registrados en la nube."})]}),s.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[s.jsx(FN,{className:"h-4 w-4"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s.jsx("button",{onClick:O,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(sa).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(sa).map(D=>s.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${ab[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[s.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>_(D),className:"hidden"}),s.jsx("span",{className:"shrink-0",children:xW[D]}),s.jsx("span",{children:ab[D].label})]},D))]})]}),s.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[s.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:s.jsx(Bw,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:s.jsx(k_,{className:"h-5 w-5"})})]}),s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),s.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:xYe.map(D=>s.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),s.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:T.flat().map((D,k)=>{const R=D&&D.toDateString()===new Date().toDateString(),U=D==null?void 0:D.toISOString().split("T")[0],H=U?a.filter(Q=>Q.date===U&&f.includes(Q.type)):[];return s.jsx("div",{onClick:()=>D&&j(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Mt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:`self-end text-sm font-semibold ${R?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:H.map(Q=>s.jsxs("div",{onClick:V=>S(Q,V),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${ab[Q.type].color}`,children:[s.jsx("span",{className:"shrink-0",children:xW[Q.type]}),s.jsx("span",{className:"truncate",children:vYe(Q)})]},Q.id))}),e!==Mt.ESTUDIANTE&&s.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:s.jsx(Li,{className:"h-4 w-4"})})]})},k)})})]}),m&&s.jsx(bYe,{isOpen:m,onClose:()=>g(!1),onSave:B,onDelete:L,event:y,date:x,isLoading:u})]})},_4="anuncios",wYe=async e=>{try{const t=pt(Ar,_4);let r=[];if((e==null?void 0:e.profile)==="ESTUDIANTE"){const a=[_t(t,rr("destinatarios.tipo","==","Todos"),Gt("fechaPublicacion","desc")),...e!=null&&e.curso?[_t(t,rr("destinatarios.tipo","==","Cursos"),rr("destinatarios.cursos","array-contains",e.curso),Gt("fechaPublicacion","desc"))]:[]];for(const o of a){const l=await _r(o);r.push(...l.docs)}const n=new Map;return r.forEach(o=>n.set(o.id,o)),Array.from(n.values()).map(o=>({id:o.id,...o.data()}))}else{const a=_t(t,Gt("fechaPublicacion","desc"));return(await _r(a)).docs.map(i=>({id:i.id,...i.data()}))}}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},NYe=async e=>{try{return{id:(await Yr(pt(Ar,_4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},CYe=async(e,t)=>{try{const r=$t(Ar,_4,e);await Ui(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},EYe=async e=>{try{const t=$t(Ar,_4,e);await Ja(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},vW=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],jYe=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=w.useState({tipo:"Todos",cursos:[]}),f=w.useCallback(async()=>{n(!0);try{const j=await wYe({profile:e.profile,curso:e.curso});r(j),o(null)}catch(j){console.error("Error al cargar anuncios desde Firestore",j),o("No se pudieron cargar los anuncios desde la nube.")}finally{n(!1)}},[]);w.useEffect(()=>{f()},[f]);const h=j=>{const{name:S,value:B}=j.target;c(L=>({...L,[S]:B}))},m=j=>{d({tipo:j,cursos:j==="Cursos"?[]:void 0})},g=j=>{d(S=>{var L;if(S.tipo!=="Cursos")return S;const B=(L=S.cursos)!=null&&L.includes(j)?S.cursos.filter(D=>D!==j):[...S.cursos||[],j];return{...S,cursos:B}})},x=async j=>{if(j.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await NYe(S),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),o("Error al publicar el anuncio en la nube.")}},v=async j=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await EYe(j),await f()}catch(S){console.error("Error al eliminar anuncio:",S),o("No se pudo eliminar el anuncio en la nube.")}},y=async j=>{try{const S=t.find(B=>B.id===j);S&&(await CYe(j,{destacado:!S.destacado}),await f())}catch(S){console.error("Error al actualizar anuncio:",S),o("No se pudo actualizar el estado del anuncio en la nube.")}},N=w.useMemo(()=>[...t].sort((j,S)=>j.destacado&&!S.destacado?-1:!j.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(j.fechaPublicacion).getTime()),[t]),C=w.useMemo(()=>{const j=e.profile,S=e.curso;return N.filter(B=>{if(j===Mt.SUBDIRECCION)return!0;if(!B.destinatarios)return j!==Mt.ESTUDIANTE;const{tipo:L,cursos:D}=B.destinatarios;return L==="Todos"||L==="Profesores"&&j===Mt.PROFESORADO||L==="Coordinación TP"&&j===Mt.COORDINACION_TP?!0:L==="Cursos"?j===Mt.ESTUDIANTE?D==null?void 0:D.includes(S||""):!0:!1})},[N,e]),T=j=>e.profile===Mt.ESTUDIANTE?!1:e.profile===Mt.SUBDIRECCION||e.profile===j.profileCreador,_=()=>e.profile===Mt.SUBDIRECCION||e.profile===Mt.PROFESORADO,O="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),a&&s.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),i&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),e.profile!==Mt.ESTUDIANTE?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),s.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:O})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),s.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:O})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),s.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(j=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"destinatarioTipo",value:j,checked:u.tipo===j,onChange:()=>m(j),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),s.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j.replace("Coordinación TP","Coord. TP")})]},j))})]}),u.tipo==="Cursos"&&s.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:on.map(j=>{var S;return s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(j),onChange:()=>g(j),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:j})]},j)})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),s.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:O})]}),s.jsx("div",{className:"pt-2 text-right",children:s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!a&&C.length===0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!a&&C.length>0&&C.map((j,S)=>{const B=vW[S%vW.length];return s.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[j.destacado&&s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:s.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),s.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:j.titulo}),s.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:j.mensaje}),j.adjunto&&s.jsx("div",{className:"font-sans text-sm mb-4",children:s.jsxs("a",{href:j.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),s.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:j.autor}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(j.fechaPublicacion).toLocaleString("es-CL")})]}),s.jsxs("div",{className:"flex items-center",children:[_()&&s.jsx("button",{onClick:()=>y(j.id),title:j.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx("span",{className:`text-xl transition-opacity ${j.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),T(j)&&s.jsx("button",{onClick:()=>v(j.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},j.id)})})]})},Kce="api_logs",kYe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:lr.fromDate(new Date)};await Yr(pt(ot,Kce),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},SYe=e=>{const t=_t(pt(ot,Kce),Gt("timestamp","desc"));return ar(t,a=>{const n=a.docs.map(i=>{var l,c;const o=i.data();return{id:i.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(n)},a=>{console.error("Error al suscribirse a los logs de API:",a),e([])})},B4=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}kYe(e,t)},n7="actas_de_reunion",_Ye=e=>{var r,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion}},BYe=e=>{const t=_t(pt(ot,n7),Gt("fechaCreacion","desc"));return ar(t,a=>{const n=a.docs.map(i=>_Ye(i));e(n)},a=>{console.error("Error al suscribirse a las actas:",a),e([])})},TYe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:lr.fromDate(new Date(e.fechaCreacion))};return(await Yr(pt(ot,n7),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},IYe=async e=>{try{const t=$t(ot,n7,e);await Ja(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},Wce=window.SpeechRecognition||window.webkitSpeechRecognition,bW=!!Wce,OYe=({isListening:e})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),FYe=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState({tipoReunion:qB[0],asistentes:"",textoReunion:""}),[l,c]=w.useState(!1),[u,d]=w.useState(!1),[f,h]=w.useState(!0),[m,g]=w.useState(null),x=w.useRef(null);w.useEffect(()=>{h(!0);const j=BYe(S=>{r(S),!a&&S.length>0&&n(S[0]),h(!1)});return()=>j()},[a]);const v=j=>{const{name:S,value:B}=j.target;o(L=>({...L,[S]:B}))},y=w.useCallback(()=>{var j;if(!bW){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(j=x.current)==null||j.stop():(x.current=new Wce,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=S=>{let B="";for(let L=S.resultIndex;L<S.results.length;++L)S.results[L].isFinal&&(B+=S.results[L][0].transcript+". ");o(L=>({...L,textoReunion:L.textoReunion+B}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=S=>{console.error("Speech recognition error",S.error),g(`Error de reconocimiento: ${S.error}`),c(!1)},x.current.start())},[l]),N=async j=>{j.preventDefault();const{tipoReunion:S,asistentes:B,textoReunion:L}=i;if(!S||!B.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{B4("Generador de Actas");const D="",R=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro-latest"}),U=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,G=(await(await R.generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(G),W={fechaCreacion:new Date().toISOString(),...i,...J},Z=await TYe(W,e);o({tipoReunion:qB[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},C=async j=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await IYe(j),(a==null?void 0:a.id)===j&&n(t.length>1?t[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},T=j=>{n(j)},_=j=>j.temas||j.acuerdos||j.plazos||j.responsables?s.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),j.temas&&j.temas.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.temas.map((B,L)=>s.jsx("li",{children:B},L))})]}),j.acuerdos&&j.acuerdos.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.acuerdos.map((B,L)=>s.jsx("li",{children:B},L))})]}),j.plazos&&j.plazos.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.plazos.map((B,L)=>s.jsx("li",{children:B},L))})]}),j.responsables&&j.responsables.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),s.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:j.responsables.map((B,L)=>s.jsx("li",{children:B},L))})]})]}):null,O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?s.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[s.jsxs("div",{className:"md:col-span-1 space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",s.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),s.jsx("select",{name:"tipoReunion",value:i.tipoReunion,onChange:v,required:!0,className:O,children:qB.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),s.jsx("textarea",{name:"asistentes",value:i.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:O})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{name:"textoReunion",value:i.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:O}),bW&&s.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:s.jsx(OYe,{isListening:l})})]})]}),m&&s.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),s.jsx("div",{className:"pt-2 text-right",children:s.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),s.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(j=>s.jsxs("button",{onClick:()=>T(j),className:`w-full text-left p-3 rounded-lg border transition-colors ${(a==null?void 0:a.id)===j.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.tipoReunion}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(j.fechaCreacion).toLocaleDateString("es-CL")})]},j.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),s.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:a?s.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${a.tipoReunion}`}),s.jsx("button",{onClick:()=>C(a.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[s.jsx("strong",{children:"Fecha:"})," ",new Date(a.fechaCreacion).toLocaleString("es-CL")]}),s.jsx("h2",{children:"Asistentes"}),s.jsx("ul",{className:"list-disc pl-5",children:String(a.asistentes||"").split(",").map((j,S)=>j.trim()&&s.jsx("li",{children:j.trim()},S))}),_(a),s.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:s.jsx("p",{children:a.textoReunion})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},s7="evaluaciones_pruebas",i7="rubricas_estaticas",o7="rubricas_interactivas",DYe="usuarios",T4=e=>{var n,i,o;const t=e.data()||{},r=t.fechaCreacion,a=((o=(i=(n=r==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:i.toISOString)==null?void 0:o.call(i))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:a}},PYe=e=>{const t=_t(pt(ot,s7),Gt("fechaCreacion","desc"));return ar(t,a=>e(a.docs.map(n=>T4(n))),a=>{console.error("[subscribeToPruebas]",a),e([])})},RYe=async e=>{const{id:t,fechaCreacion:r,...a}=e,n=$t(ot,s7,t),i={...a,fechaCreacion:r?lr.fromDate(new Date(r)):qa()};await ii(n,i,{merge:!0})},LYe=async e=>{await Ja($t(ot,s7,e))},MYe=e=>{const t=_t(pt(ot,i7),Gt("fechaCreacion","desc"));return ar(t,r=>e(r.docs.map(a=>T4(a))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},vD=async e=>{const{id:t,fechaCreacion:r,...a}=e,n=$t(ot,i7,t),i={...a,fechaCreacion:r?lr.fromDate(new Date(r)):qa()};await ii(n,i,{merge:!0})},UYe=async e=>{await Ja($t(ot,i7,e))},QYe=e=>{const t=_t(pt(ot,o7),Gt("curso","asc"));return ar(t,r=>e(r.docs.map(a=>T4(a))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},HYe=async e=>{const t={...e,fechaCreacion:qa()};return(await Yr(pt(ot,o7),t)).id},zYe=async(e,t)=>{const r=$t(ot,o7,e);await ii(r,t,{merge:!0})},VYe=e=>{const t=_t(pt(ot,DYe),Gt("nombreCompleto","asc"));return ar(t,r=>e(r.docs.map(a=>T4(a))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},l7=()=>{const[e,t]=w.useState(null),[r,a]=w.useState(!0);return w.useEffect(()=>{const n=XZ(Ow,async i=>{if(console.log("[useAuth] FirebaseUser:",i),i&&i.email)try{const o=await Are(i.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:i.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);a(!1)});return()=>n()},[]),{currentUser:e,loading:r}};function bn(e){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(e)}var dl=Uint8Array,iu=Uint16Array,c7=Int32Array,I4=new dl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),O4=new dl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bD=new dl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xce=function(e,t){for(var r=new iu(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var n=new c7(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},Yce=Xce(I4,2),Jce=Yce.b,yD=Yce.r;Jce[28]=258,yD[258]=28;var Zce=Xce(O4,0),$Ye=Zce.b,yW=Zce.r,wD=new iu(32768);for(var Gn=0;Gn<32768;++Gn){var am=(Gn&43690)>>1|(Gn&21845)<<1;am=(am&52428)>>2|(am&13107)<<2,am=(am&61680)>>4|(am&3855)<<4,wD[Gn]=((am&65280)>>8|(am&255)<<8)>>1}var NA=function(e,t,r){for(var a=e.length,n=0,i=new iu(t);n<a;++n)e[n]&&++i[e[n]-1];var o=new iu(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(r){l=new iu(1<<t);var c=15-t;for(n=0;n<a;++n)if(e[n])for(var u=n<<4|e[n],d=t-e[n],f=o[e[n]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[wD[f]>>c]=u}else for(l=new iu(a),n=0;n<a;++n)e[n]&&(l[n]=wD[o[e[n]-1]++]>>15-e[n]);return l},np=new dl(288);for(var Gn=0;Gn<144;++Gn)np[Gn]=8;for(var Gn=144;Gn<256;++Gn)np[Gn]=9;for(var Gn=256;Gn<280;++Gn)np[Gn]=7;for(var Gn=280;Gn<288;++Gn)np[Gn]=8;var lN=new dl(32);for(var Gn=0;Gn<32;++Gn)lN[Gn]=5;var GYe=NA(np,9,0),qYe=NA(np,9,1),KYe=NA(lN,5,0),WYe=NA(lN,5,1),o6=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Rd=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},l6=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},u7=function(e){return(e+7)/8|0},eue=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new dl(e.subarray(t,r))},XYe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ud=function(e,t,r){var a=new Error(t||XYe[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Ud),!r)throw a;return a},YYe=function(e,t,r,a){var n=e.length,i=0;if(!n||t.f&&!t.l)return r||new dl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new dl(n*3));var u=function(we){var K=r.length;if(we>K){var Ee=new dl(Math.max(K*2,we));Ee.set(r),r=Ee}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=n*8;do{if(!m){d=Rd(e,f,1);var N=Rd(e,f+1,3);if(f+=3,N)if(N==1)m=qYe,g=WYe,x=9,v=5;else if(N==2){var O=Rd(e,f,31)+257,j=Rd(e,f+10,15)+4,S=O+Rd(e,f+5,31)+1;f+=14;for(var B=new dl(S),L=new dl(19),D=0;D<j;++D)L[bD[D]]=Rd(e,f+D*3,7);f+=j*3;for(var k=o6(L),R=(1<<k)-1,U=NA(L,k,1),D=0;D<S;){var H=U[Rd(e,f,R)];f+=H&15;var C=H>>4;if(C<16)B[D++]=C;else{var Q=0,V=0;for(C==16?(V=3+Rd(e,f,3),f+=2,Q=B[D-1]):C==17?(V=3+Rd(e,f,7),f+=3):C==18&&(V=11+Rd(e,f,127),f+=7);V--;)B[D++]=Q}}var G=B.subarray(0,O),J=B.subarray(O);x=o6(G),v=o6(J),m=NA(G,x,1),g=NA(J,v,1)}else Ud(1);else{var C=u7(f)+4,T=e[C-4]|e[C-3]<<8,_=C+T;if(_>n){c&&Ud(0);break}l&&u(h+T),r.set(e.subarray(C,_),h),t.b=h+=T,t.p=f=_*8,t.f=d;continue}if(f>y){c&&Ud(0);break}}l&&u(h+131072);for(var W=(1<<x)-1,Z=(1<<v)-1,M=f;;M=f){var Q=m[l6(e,f)&W],F=Q>>4;if(f+=Q&15,f>y){c&&Ud(0);break}if(Q||Ud(2),F<256)r[h++]=F;else if(F==256){M=f,m=null;break}else{var X=F-254;if(F>264){var D=F-257,Y=I4[D];X=Rd(e,f,(1<<Y)-1)+Jce[D],f+=Y}var ae=g[l6(e,f)&Z],le=ae>>4;ae||Ud(3),f+=ae&15;var J=$Ye[le];if(le>3){var Y=O4[le];J+=l6(e,f)&(1<<Y)-1,f+=Y}if(f>y){c&&Ud(0);break}l&&u(h+131072);var ie=h+X;if(h<J){var ne=i-J,oe=Math.min(J,ie);for(ne+h<0&&Ud(3);h<oe;++h)r[h]=a[ne+h]}for(;h<ie;++h)r[h]=r[h-J]}}t.l=m,t.p=M,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&o?eue(r,0,h):r.subarray(0,h)},ch=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},Ky=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},c6=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var n=r.length,i=r.slice();if(!n)return{t:rue,l:0};if(n==1){var o=new dl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(_,O){return _.f-O.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=n-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=i[0].s,a=1;a<n;++a)i[a].s>h&&(h=i[a].s);var m=new iu(h+1),g=ND(r[d-1],m,0);if(g>t){var a=0,x=0,v=g-t,y=1<<v;for(i.sort(function(O,j){return m[j.s]-m[O.s]||O.f-j.f});a<n;++a){var N=i[a].s;if(m[N]>t)x+=y-(1<<g-m[N]),m[N]=t;else break}for(x>>=v;x>0;){var C=i[a].s;m[C]<t?x-=1<<t-m[C]++-1:++a}for(;a>=0&&x;--a){var T=i[a].s;m[T]==t&&(--m[T],++x)}g=t}return{t:new dl(m),l:g}},ND=function(e,t,r){return e.s==-1?Math.max(ND(e.l,t,r+1),ND(e.r,t,r+1)):t[e.s]=r},wW=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new iu(++t),a=0,n=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=e[l]}return{c:r.subarray(0,a),n:t}},Wy=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},tue=function(e,t,r){var a=r.length,n=u7(t+2);e[n]=a&255,e[n+1]=a>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var i=0;i<a;++i)e[n+i+4]=r[i];return(n+4+a)*8},NW=function(e,t,r,a,n,i,o,l,c,u,d){ch(t,d++,r),++n[256];for(var f=c6(n,15),h=f.t,m=f.l,g=c6(i,15),x=g.t,v=g.l,y=wW(h),N=y.c,C=y.n,T=wW(x),_=T.c,O=T.n,j=new iu(19),S=0;S<N.length;++S)++j[N[S]&31];for(var S=0;S<_.length;++S)++j[_[S]&31];for(var B=c6(j,7),L=B.t,D=B.l,k=19;k>4&&!L[bD[k-1]];--k);var R=u+5<<3,U=Wy(n,np)+Wy(i,lN)+o,H=Wy(n,h)+Wy(i,x)+o+14+3*k+Wy(j,L)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&R<=U&&R<=H)return tue(t,d,e.subarray(c,c+u));var Q,V,G,J;if(ch(t,d,1+(H<U)),d+=2,H<U){Q=NA(h,m,0),V=h,G=NA(x,v,0),J=x;var W=NA(L,D,0);ch(t,d,C-257),ch(t,d+5,O-1),ch(t,d+10,k-4),d+=14;for(var S=0;S<k;++S)ch(t,d+3*S,L[bD[S]]);d+=3*k;for(var Z=[N,_],M=0;M<2;++M)for(var F=Z[M],S=0;S<F.length;++S){var X=F[S]&31;ch(t,d,W[X]),d+=L[X],X>15&&(ch(t,d,F[S]>>5&127),d+=F[S]>>12)}}else Q=GYe,V=np,G=KYe,J=lN;for(var S=0;S<l;++S){var Y=a[S];if(Y>255){var X=Y>>18&31;Ky(t,d,Q[X+257]),d+=V[X+257],X>7&&(ch(t,d,Y>>23&31),d+=I4[X]);var ae=Y&31;Ky(t,d,G[ae]),d+=J[ae],ae>3&&(Ky(t,d,Y>>5&8191),d+=O4[ae])}else Ky(t,d,Q[Y]),d+=V[Y]}return Ky(t,d,Q[256]),d+V[256]},JYe=new c7([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rue=new dl(0),ZYe=function(e,t,r,a,n,i){var o=i.z||e.length,l=new dl(a+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(a,l.length-n),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=JYe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=i.p||new iu(32768),v=i.h||new iu(g+1),y=Math.ceil(r/3),N=2*y,C=function(_e){return(e[_e]^e[_e+1]<<y^e[_e+2]<<N)&g},T=new c7(25e3),_=new iu(288),O=new iu(32),j=0,S=0,B=i.i||0,L=0,D=i.w||0,k=0;B+2<o;++B){var R=C(B),U=B&32767,H=v[R];if(x[U]=H,v[R]=U,D<=B){var Q=o-B;if((j>7e3||L>24576)&&(Q>423||!u)){d=NW(e,c,0,T,_,O,S,L,k,B-k,d),L=j=S=0,k=B;for(var V=0;V<286;++V)_[V]=0;for(var V=0;V<30;++V)O[V]=0}var G=2,J=0,W=m,Z=U-H&32767;if(Q>2&&R==C(B-Z))for(var M=Math.min(h,Q)-1,F=Math.min(32767,B),X=Math.min(258,Q);Z<=F&&--W&&U!=H;){if(e[B+G]==e[B+G-Z]){for(var Y=0;Y<X&&e[B+Y]==e[B+Y-Z];++Y);if(Y>G){if(G=Y,J=Z,Y>M)break;for(var ae=Math.min(Z,Y-2),le=0,V=0;V<ae;++V){var ie=B-Z+V&32767,ne=x[ie],oe=ie-ne&32767;oe>le&&(le=oe,H=ie)}}}U=H,H=x[U],Z+=U-H&32767}if(J){T[L++]=268435456|yD[G]<<18|yW[J];var we=yD[G]&31,K=yW[J]&31;S+=I4[we]+O4[K],++_[257+we],++O[K],D=B+G,++j}else T[L++]=e[B],++_[e[B]]}}for(B=Math.max(B,D);B<o;++B)T[L++]=e[B],++_[e[B]];d=NW(e,c,u,T,_,O,S,L,k,B-k,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=v,i.p=x,i.i=B,i.w=D)}else{for(var B=i.w||0;B<o+u;B+=65535){var Ee=B+65535;Ee>=o&&(c[d/8|0]=u,Ee=o),d=tue(c,d+1,e.subarray(B,Ee))}i.i=o}return eue(l,0,a+u7(d)+n)},aue=function(){var e=1,t=0;return{p:function(r){for(var a=e,n=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=a+=r[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}e=a,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},eJe=function(e,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new dl(i.length+e.length);o.set(i),o.set(e,i.length),e=o,n.w=i.length}return ZYe(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,n)},nue=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},tJe=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=aue();n.p(t.dictionary),nue(e,2,n.d())}},rJe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ud(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ud(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function CD(e,t){t||(t={});var r=aue();r.p(e);var a=eJe(e,t,t.dictionary?6:2,4);return tJe(a,t),nue(a,a.length-4,r.d()),a}function aJe(e,t){return YYe(e.subarray(rJe(e),-4),{i:2},t,t)}var nJe=typeof TextDecoder<"u"&&new TextDecoder,sJe=0;try{nJe.decode(rue,{stream:!0}),sJe=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function u6(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var Tn={log:u6,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):u6.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):u6(e))}};function d6(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Zp(a.response,t,r)},a.onerror=function(){Tn.error("could not download file")},a.send()}function CW(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function sj(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var lw,ED,Zp=Mr.saveAs||((typeof window>"u"?"undefined":bn(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=Mr.URL||Mr.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?CW(n.href)?d6(e,t,r):sj(n,n.target="_blank"):sj(n)):(n.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){sj(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(CW(e))d6(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){sj(a)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:bn(i)!=="object"&&(Tn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return d6(e,t,r);var n=e.type==="application/octet-stream",i=/constructor/i.test(Mr.HTMLElement)||Mr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":bn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=d:location=d,a=null},l.readAsDataURL(e)}else{var c=Mr.URL||Mr.webkitURL,u=c.createObjectURL(e);a?a.location=u:location.href=u,a=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function sue(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,o=n.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function f6(e,t){var r=e[0],a=e[1],n=e[2],i=e[3];r=Ko(r,a,n,i,t[0],7,-680876936),i=Ko(i,r,a,n,t[1],12,-389564586),n=Ko(n,i,r,a,t[2],17,606105819),a=Ko(a,n,i,r,t[3],22,-1044525330),r=Ko(r,a,n,i,t[4],7,-176418897),i=Ko(i,r,a,n,t[5],12,1200080426),n=Ko(n,i,r,a,t[6],17,-1473231341),a=Ko(a,n,i,r,t[7],22,-45705983),r=Ko(r,a,n,i,t[8],7,1770035416),i=Ko(i,r,a,n,t[9],12,-1958414417),n=Ko(n,i,r,a,t[10],17,-42063),a=Ko(a,n,i,r,t[11],22,-1990404162),r=Ko(r,a,n,i,t[12],7,1804603682),i=Ko(i,r,a,n,t[13],12,-40341101),n=Ko(n,i,r,a,t[14],17,-1502002290),r=Wo(r,a=Ko(a,n,i,r,t[15],22,1236535329),n,i,t[1],5,-165796510),i=Wo(i,r,a,n,t[6],9,-1069501632),n=Wo(n,i,r,a,t[11],14,643717713),a=Wo(a,n,i,r,t[0],20,-373897302),r=Wo(r,a,n,i,t[5],5,-701558691),i=Wo(i,r,a,n,t[10],9,38016083),n=Wo(n,i,r,a,t[15],14,-660478335),a=Wo(a,n,i,r,t[4],20,-405537848),r=Wo(r,a,n,i,t[9],5,568446438),i=Wo(i,r,a,n,t[14],9,-1019803690),n=Wo(n,i,r,a,t[3],14,-187363961),a=Wo(a,n,i,r,t[8],20,1163531501),r=Wo(r,a,n,i,t[13],5,-1444681467),i=Wo(i,r,a,n,t[2],9,-51403784),n=Wo(n,i,r,a,t[7],14,1735328473),r=Xo(r,a=Wo(a,n,i,r,t[12],20,-1926607734),n,i,t[5],4,-378558),i=Xo(i,r,a,n,t[8],11,-2022574463),n=Xo(n,i,r,a,t[11],16,1839030562),a=Xo(a,n,i,r,t[14],23,-35309556),r=Xo(r,a,n,i,t[1],4,-1530992060),i=Xo(i,r,a,n,t[4],11,1272893353),n=Xo(n,i,r,a,t[7],16,-155497632),a=Xo(a,n,i,r,t[10],23,-1094730640),r=Xo(r,a,n,i,t[13],4,681279174),i=Xo(i,r,a,n,t[0],11,-358537222),n=Xo(n,i,r,a,t[3],16,-722521979),a=Xo(a,n,i,r,t[6],23,76029189),r=Xo(r,a,n,i,t[9],4,-640364487),i=Xo(i,r,a,n,t[12],11,-421815835),n=Xo(n,i,r,a,t[15],16,530742520),r=Yo(r,a=Xo(a,n,i,r,t[2],23,-995338651),n,i,t[0],6,-198630844),i=Yo(i,r,a,n,t[7],10,1126891415),n=Yo(n,i,r,a,t[14],15,-1416354905),a=Yo(a,n,i,r,t[5],21,-57434055),r=Yo(r,a,n,i,t[12],6,1700485571),i=Yo(i,r,a,n,t[3],10,-1894986606),n=Yo(n,i,r,a,t[10],15,-1051523),a=Yo(a,n,i,r,t[1],21,-2054922799),r=Yo(r,a,n,i,t[8],6,1873313359),i=Yo(i,r,a,n,t[15],10,-30611744),n=Yo(n,i,r,a,t[6],15,-1560198380),a=Yo(a,n,i,r,t[13],21,1309151649),r=Yo(r,a,n,i,t[4],6,-145523070),i=Yo(i,r,a,n,t[11],10,-1120210379),n=Yo(n,i,r,a,t[2],15,718787259),a=Yo(a,n,i,r,t[9],21,-343485551),e[0]=Em(r,e[0]),e[1]=Em(a,e[1]),e[2]=Em(n,e[2]),e[3]=Em(i,e[3])}function F4(e,t,r,a,n,i){return t=Em(Em(t,e),Em(a,i)),Em(t<<n|t>>>32-n,r)}function Ko(e,t,r,a,n,i,o){return F4(t&r|~t&a,e,t,n,i,o)}function Wo(e,t,r,a,n,i,o){return F4(t&a|r&~a,e,t,n,i,o)}function Xo(e,t,r,a,n,i,o){return F4(t^r^a,e,t,n,i,o)}function Yo(e,t,r,a,n,i,o){return F4(r^(t|~a),e,t,n,i,o)}function iue(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)f6(a,iJe(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(f6(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,f6(a,n),a}function iJe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}lw=Mr.atob.bind(Mr),ED=Mr.btoa.bind(Mr);var EW="0123456789abcdef".split("");function oJe(e){for(var t="",r=0;r<4;r++)t+=EW[e>>8*r+4&15]+EW[e>>8*r&15];return t}function lJe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function jD(e){return iue(e).map(lJe).join("")}var cJe=function(e){for(var t=0;t<e.length;t++)e[t]=oJe(e[t]);return e.join("")}(iue("hello"))!="5d41402abc4b2a76b9719d911017c592";function Em(e,t){if(cJe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function kD(e,t){var r,a,n,i;if(e!==r){for(var o=(n=e,i=1+(256/e.length>>0),new Array(i+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,a=l}else l=a;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var jW={print:4,modify:8,copy:16,"annot-forms":32};function Bv(e,t,r,a){this.v=1,this.r=2;var n=192;e.forEach(function(l){if(jW.perm!==void 0)throw new Error("Invalid permission: "+l);n+=jW[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=jD(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=kD(this.encryptionKey,this.padding)}function Tv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var n=e.charCodeAt(a);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=e[a]}return t}function kW(e){if(bn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!n],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){Mr.console&&Tn.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function dS(e){if(!(this instanceof dS))return new dS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function oue(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ng(e,t,r,a,n){if(!(this instanceof ng))return new ng(e,t,r,a,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,oue.call(this,a,n)}function Qv(e,t,r,a,n){if(!(this instanceof Qv))return new Qv(e,t,r,a,n);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,oue.call(this,a,n)}function gr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",d=null;bn(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,n=e.format||n,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=kW;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(te){g=te};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(te){return v[te]};n=n||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},C=N.COMPAT;function T(){this.saveGraphicsState(),de(new er(ut,0,0,-ut,0,Ki()*ut).toString()+" cm"),this.setFontSize(this.getFontSize()/ut),u="n",C=N.ADVANCED}function _(){this.restoreGraphicsState(),u="S",C=N.COMPAT}var O=m.__private__.combineFontStyleAndFontWeight=function(te,be){if(te=="bold"&&be=="normal"||te=="bold"&&be==400||te=="normal"&&be=="italic"||te=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(te=be==400||be==="normal"?te==="italic"?"italic":"normal":be!=700&&be!=="bold"||te!=="normal"?(be==700?"bold":be)+""+te:"bold"),te};m.advancedAPI=function(te){var be=C===N.COMPAT;return be&&T.call(this),typeof te!="function"||(te(this),be&&_.call(this)),this},m.compatAPI=function(te){var be=C===N.ADVANCED;return be&&_.call(this),typeof te!="function"||(te(this),be&&T.call(this)),this},m.isAdvancedAPI=function(){return C===N.ADVANCED};var j,S=function(te){if(C!==N.ADVANCED)throw new Error(te+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=m.roundToPrecision=m.__private__.roundToPrecision=function(te,be){var Ve=t||be;if(isNaN(te)||isNaN(Ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return te.toFixed(Ve).replace(/0+$/,"")};j=m.hpf=m.__private__.hpf=typeof c=="number"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,c)}:c==="smart"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,te>-1&&te<1?16:5)}:function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,16)};var L=m.f2=m.__private__.f2=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f2");return B(te,2)},D=m.__private__.f3=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f3");return B(te,3)},k=m.scale=m.__private__.scale=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.scale");return C===N.COMPAT?te*ut:C===N.ADVANCED?te:void 0},R=function(te){return C===N.COMPAT?Ki()-te:C===N.ADVANCED?te:void 0},U=function(te){return k(R(te))};m.__private__.setPrecision=m.setPrecision=function(te){typeof parseInt(te,10)=="number"&&(t=parseInt(te,10))};var H,Q="00000000000000000000000000000000",V=m.__private__.getFileId=function(){return Q},G=m.__private__.setFileId=function(te){return Q=te!==void 0&&/^[a-fA-F0-9]{32}$/.test(te)?te.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(fn=new Bv(d.userPermissions,d.userPassword,d.ownerPassword,Q)),Q};m.setFileId=function(te){return G(te),this},m.getFileId=function(){return V()};var J=m.__private__.convertDateToPDFDate=function(te){var be=te.getTimezoneOffset(),Ve=be<0?"+":"-",Xe=Math.floor(Math.abs(be/60)),st=Math.abs(be%60),Ct=[Ve,X(Xe),"'",X(st),"'"].join("");return["D:",te.getFullYear(),X(te.getMonth()+1),X(te.getDate()),X(te.getHours()),X(te.getMinutes()),X(te.getSeconds()),Ct].join("")},W=m.__private__.convertPDFDateToDate=function(te){var be=parseInt(te.substr(2,4),10),Ve=parseInt(te.substr(6,2),10)-1,Xe=parseInt(te.substr(8,2),10),st=parseInt(te.substr(10,2),10),Ct=parseInt(te.substr(12,2),10),Qt=parseInt(te.substr(14,2),10);return new Date(be,Ve,Xe,st,Ct,Qt,0)},Z=m.__private__.setCreationDate=function(te){var be;if(te===void 0&&(te=new Date),te instanceof Date)be=J(te);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(te))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=te}return H=be},M=m.__private__.getCreationDate=function(te){var be=H;return te==="jsDate"&&(be=W(H)),be};m.setCreationDate=function(te){return Z(te),this},m.getCreationDate=function(te){return M(te)};var F,X=m.__private__.padd2=function(te){return("0"+parseInt(te)).slice(-2)},Y=m.__private__.padd2Hex=function(te){return("00"+(te=te.toString())).substr(te.length)},ae=0,le=[],ie=[],ne=0,oe=[],we=[],K=!1,Ee=ie,_e=function(){ae=0,ne=0,ie=[],le=[],oe=[],De=en(),Le=en()};m.__private__.setCustomOutputDestination=function(te){K=!0,Ee=te};var Ce=function(te){K||(Ee=te)};m.__private__.resetCustomOutputDestination=function(){K=!1,Ee=ie};var de=m.__private__.out=function(te){return te=te.toString(),ne+=te.length+1,Ee.push(te),Ee},xe=m.__private__.write=function(te){return de(arguments.length===1?te.toString():Array.prototype.join.call(arguments," "))},he=m.__private__.getArrayBuffer=function(te){for(var be=te.length,Ve=new ArrayBuffer(be),Xe=new Uint8Array(Ve);be--;)Xe[be]=te.charCodeAt(be);return Ve},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ye};var ce=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(te){return ce=C===N.ADVANCED?te/ut:te,this};var Ae,Ne=m.__private__.getFontSize=m.getFontSize=function(){return C===N.COMPAT?ce:ce*ut},Pe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(te){return Pe=te,this},m.__private__.getR2L=m.getR2L=function(){return Pe};var Qe,$e=m.__private__.setZoomMode=function(te){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(te))Ae=te;else if(isNaN(te)){if(be.indexOf(te)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+te+'" is not recognized.');Ae=te}else Ae=parseInt(te,10)};m.__private__.getZoomMode=function(){return Ae};var et,Ke=m.__private__.setPageMode=function(te){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(te)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+te+'" is not recognized.');Qe=te};m.__private__.getPageMode=function(){return Qe};var Ge=m.__private__.setLayoutMode=function(te){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(te)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+te+'" is not recognized.');et=te};m.__private__.getLayoutMode=function(){return et},m.__private__.setDisplayMode=m.setDisplayMode=function(te,be,Ve){return $e(te),Ge(be),Ke(Ve),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(te){if(Object.keys(nt).indexOf(te)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[te]},m.__private__.getDocumentProperties=function(){return nt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(te){for(var be in nt)nt.hasOwnProperty(be)&&te[be]&&(nt[be]=te[be]);return this},m.__private__.setDocumentProperty=function(te,be){if(Object.keys(nt).indexOf(te)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[te]=be};var bt,ut,ze,Tt,ir,Kt={},Cr={},$r=[],br={},Sn={},Pr={},Ra={},Dn=null,Rr=0,pr=[],Jr=new kW(m),gs=e.hotfixes||[],Za={},Pn={},Us=[],er=function te(be,Ve,Xe,st,Ct,Qt){if(!(this instanceof te))return new te(be,Ve,Xe,st,Ct,Qt);isNaN(be)&&(be=1),isNaN(Ve)&&(Ve=0),isNaN(Xe)&&(Xe=0),isNaN(st)&&(st=1),isNaN(Ct)&&(Ct=0),isNaN(Qt)&&(Qt=0),this._matrix=[be,Ve,Xe,st,Ct,Qt]};Object.defineProperty(er.prototype,"sx",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(er.prototype,"shy",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(er.prototype,"shx",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(er.prototype,"sy",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(er.prototype,"tx",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(er.prototype,"ty",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(er.prototype,"a",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(er.prototype,"b",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(er.prototype,"c",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(er.prototype,"d",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(er.prototype,"e",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(er.prototype,"f",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(er.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(er.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(er.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(er.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),er.prototype.join=function(te){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(te)},er.prototype.multiply=function(te){var be=te.sx*this.sx+te.shy*this.shx,Ve=te.sx*this.shy+te.shy*this.sy,Xe=te.shx*this.sx+te.sy*this.shx,st=te.shx*this.shy+te.sy*this.sy,Ct=te.tx*this.sx+te.ty*this.shx+this.tx,Qt=te.tx*this.shy+te.ty*this.sy+this.ty;return new er(be,Ve,Xe,st,Ct,Qt)},er.prototype.decompose=function(){var te=this.sx,be=this.shy,Ve=this.shx,Xe=this.sy,st=this.tx,Ct=this.ty,Qt=Math.sqrt(te*te+be*be),Jt=(te/=Qt)*Ve+(be/=Qt)*Xe;Ve-=te*Jt,Xe-=be*Jt;var P=Math.sqrt(Ve*Ve+Xe*Xe);return Jt/=P,te*(Xe/=P)<be*(Ve/=P)&&(te=-te,be=-be,Jt=-Jt,Qt=-Qt),{scale:new er(Qt,0,0,P,0,0),translate:new er(1,0,0,1,st,Ct),rotate:new er(te,be,-be,te,0,0),skew:new er(1,0,Jt,1,0,0)}},er.prototype.toString=function(te){return this.join(" ")},er.prototype.inversed=function(){var te=this.sx,be=this.shy,Ve=this.shx,Xe=this.sy,st=this.tx,Ct=this.ty,Qt=1/(te*Xe-be*Ve),Jt=Xe*Qt,P=-be*Qt,se=-Ve*Qt,fe=te*Qt;return new er(Jt,P,se,fe,-Jt*st-se*Ct,-P*st-fe*Ct)},er.prototype.applyToPoint=function(te){var be=te.x*this.sx+te.y*this.shx+this.tx,Ve=te.x*this.shy+te.y*this.sy+this.ty;return new gd(be,Ve)},er.prototype.applyToRectangle=function(te){var be=this.applyToPoint(te),Ve=this.applyToPoint(new gd(te.x+te.w,te.y+te.h));return new wf(be.x,be.y,Ve.x-be.x,Ve.y-be.y)},er.prototype.clone=function(){var te=this.sx,be=this.shy,Ve=this.shx,Xe=this.sy,st=this.tx,Ct=this.ty;return new er(te,be,Ve,Xe,st,Ct)},m.Matrix=er;var xa=m.matrixMult=function(te,be){return be.multiply(te)},la=new er(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=la;var Ia=function(te,be){if(!Sn[te]){var Ve=(be instanceof ng?"Sh":"P")+(Object.keys(br).length+1).toString(10);be.id=Ve,Sn[te]=Ve,br[Ve]=be,Jr.publish("addPattern",be)}};m.ShadingPattern=ng,m.TilingPattern=Qv,m.addShadingPattern=function(te,be){return S("addShadingPattern()"),Ia(te,be),this},m.beginTilingPattern=function(te){S("beginTilingPattern()"),Eu(te.boundingBox[0],te.boundingBox[1],te.boundingBox[2]-te.boundingBox[0],te.boundingBox[3]-te.boundingBox[1],te.matrix)},m.endTilingPattern=function(te,be){S("endTilingPattern()"),be.stream=we[F].join(`
`),Ia(te,be),Jr.publish("endTilingPattern",be),Us.pop().restore()};var Wa=m.__private__.newObject=function(){var te=en();return je(te,!0),te},en=m.__private__.newObjectDeferred=function(){return ae++,le[ae]=function(){return ne},ae},je=function(te,be){return be=typeof be=="boolean"&&be,le[te]=ne,be&&de(te+" 0 obj"),te},Ue=m.__private__.newAdditionalObject=function(){var te={objId:en(),content:""};return oe.push(te),te},De=en(),Le=en(),ge=m.__private__.decodeColorString=function(te){var be=te.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var Ve=parseFloat(be[0]);be=[Ve,Ve,Ve,"r"]}for(var Xe="#",st=0;st<3;st++)Xe+=("0"+Math.floor(255*parseFloat(be[st])).toString(16)).slice(-2);return Xe},me=m.__private__.encodeColorString=function(te){var be;typeof te=="string"&&(te={ch1:te});var Ve=te.ch1,Xe=te.ch2,st=te.ch3,Ct=te.ch4,Qt=te.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ve=="string"&&Ve.charAt(0)!=="#"){var Jt=new sue(Ve);if(Jt.ok)Ve=Jt.toHex();else if(!/^\d*\.?\d*$/.test(Ve))throw new Error('Invalid color "'+Ve+'" passed to jsPDF.encodeColorString.')}if(typeof Ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ve)&&(Ve="#"+Ve[1]+Ve[1]+Ve[2]+Ve[2]+Ve[3]+Ve[3]),typeof Ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ve)){var P=parseInt(Ve.substr(1),16);Ve=P>>16&255,Xe=P>>8&255,st=255&P}if(Xe===void 0||Ct===void 0&&Ve===Xe&&Xe===st)if(typeof Ve=="string")be=Ve+" "+Qt[0];else switch(te.precision){case 2:be=L(Ve/255)+" "+Qt[0];break;case 3:default:be=D(Ve/255)+" "+Qt[0]}else if(Ct===void 0||bn(Ct)==="object"){if(Ct&&!isNaN(Ct.a)&&Ct.a===0)return be=["1.","1.","1.",Qt[1]].join(" ");if(typeof Ve=="string")be=[Ve,Xe,st,Qt[1]].join(" ");else switch(te.precision){case 2:be=[L(Ve/255),L(Xe/255),L(st/255),Qt[1]].join(" ");break;default:case 3:be=[D(Ve/255),D(Xe/255),D(st/255),Qt[1]].join(" ")}}else if(typeof Ve=="string")be=[Ve,Xe,st,Ct,Qt[2]].join(" ");else switch(te.precision){case 2:be=[L(Ve),L(Xe),L(st),L(Ct),Qt[2]].join(" ");break;case 3:default:be=[D(Ve),D(Xe),D(st),D(Ct),Qt[2]].join(" ")}return be},Oe=m.__private__.getFilters=function(){return o},He=m.__private__.putStream=function(te){var be=(te=te||{}).data||"",Ve=te.filters||Oe(),Xe=te.alreadyAppliedFilters||[],st=te.addLength1||!1,Ct=be.length,Qt=te.objectId,Jt=function(Tr){return Tr};if(d!==null&&Qt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Jt=fn.encryptor(Qt,0));var P={};Ve===!0&&(Ve=["FlateEncode"]);var se=te.additionalKeyValues||[],fe=(P=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters(be,Ve):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(Xe)?Xe.join(" "):Xe.toString());if(P.data.length!==0&&(se.push({key:"Length",value:P.data.length}),st===!0&&se.push({key:"Length1",value:Ct})),fe.length!=0)if(fe.split("/").length-1==1)se.push({key:"Filter",value:fe});else{se.push({key:"Filter",value:"["+fe+"]"});for(var Te=0;Te<se.length;Te+=1)if(se[Te].key==="DecodeParms"){for(var at=[],ht=0;ht<P.reverseChain.split("/").length-1;ht+=1)at.push("null");at.push(se[Te].value),se[Te].value="["+at.join(" ")+"]"}}de("<<");for(var Ht=0;Ht<se.length;Ht++)de("/"+se[Ht].key+" "+se[Ht].value);de(">>"),P.data.length!==0&&(de("stream"),de(Jt(P.data)),de("endstream"))},Re=m.__private__.putPage=function(te){var be=te.number,Ve=te.data,Xe=te.objId,st=te.contentsObjId;je(Xe,!0),de("<</Type /Page"),de("/Parent "+te.rootDictionaryObjId+" 0 R"),de("/Resources "+te.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(j(te.mediaBox.bottomLeftX))+" "+parseFloat(j(te.mediaBox.bottomLeftY))+" "+j(te.mediaBox.topRightX)+" "+j(te.mediaBox.topRightY)+"]"),te.cropBox!==null&&de("/CropBox ["+j(te.cropBox.bottomLeftX)+" "+j(te.cropBox.bottomLeftY)+" "+j(te.cropBox.topRightX)+" "+j(te.cropBox.topRightY)+"]"),te.bleedBox!==null&&de("/BleedBox ["+j(te.bleedBox.bottomLeftX)+" "+j(te.bleedBox.bottomLeftY)+" "+j(te.bleedBox.topRightX)+" "+j(te.bleedBox.topRightY)+"]"),te.trimBox!==null&&de("/TrimBox ["+j(te.trimBox.bottomLeftX)+" "+j(te.trimBox.bottomLeftY)+" "+j(te.trimBox.topRightX)+" "+j(te.trimBox.topRightY)+"]"),te.artBox!==null&&de("/ArtBox ["+j(te.artBox.bottomLeftX)+" "+j(te.artBox.bottomLeftY)+" "+j(te.artBox.topRightX)+" "+j(te.artBox.topRightY)+"]"),typeof te.userUnit=="number"&&te.userUnit!==1&&de("/UserUnit "+te.userUnit),Jr.publish("putPage",{objId:Xe,pageContext:pr[be],pageNumber:be,page:Ve}),de("/Contents "+st+" 0 R"),de(">>"),de("endobj");var Ct=Ve.join(`
`);return C===N.ADVANCED&&(Ct+=`
Q`),je(st,!0),He({data:Ct,filters:Oe(),objectId:st}),de("endobj"),Xe},We=m.__private__.putPages=function(){var te,be,Ve=[];for(te=1;te<=Rr;te++)pr[te].objId=en(),pr[te].contentsObjId=en();for(te=1;te<=Rr;te++)Ve.push(Re({number:te,data:we[te],objId:pr[te].objId,contentsObjId:pr[te].contentsObjId,mediaBox:pr[te].mediaBox,cropBox:pr[te].cropBox,bleedBox:pr[te].bleedBox,trimBox:pr[te].trimBox,artBox:pr[te].artBox,userUnit:pr[te].userUnit,rootDictionaryObjId:De,resourceDictionaryObjId:Le}));je(De,!0),de("<</Type /Pages");var Xe="/Kids [";for(be=0;be<Rr;be++)Xe+=Ve[be]+" 0 R ";de(Xe+"]"),de("/Count "+Rr),de(">>"),de("endobj"),Jr.publish("postPutPages")},Ye=function(te){Jr.publish("putFont",{font:te,out:de,newObject:Wa,putStream:He}),te.isAlreadyPutted!==!0&&(te.objectNumber=Wa(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Tv(te.postScriptName)),de("/Subtype /Type1"),typeof te.encoding=="string"&&de("/Encoding /"+te.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},wt=function(){for(var te in Kt)Kt.hasOwnProperty(te)&&(f===!1||f===!0&&h.hasOwnProperty(te))&&Ye(Kt[te])},Nt=function(te){te.objectNumber=Wa();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[j(te.x),j(te.y),j(te.x+te.width),j(te.y+te.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+te.matrix.toString()+"]"});var Ve=te.pages[1].join(`
`);He({data:Ve,additionalKeyValues:be,objectId:te.objectNumber}),de("endobj")},zt=function(){for(var te in Za)Za.hasOwnProperty(te)&&Nt(Za[te])},Ot=function(te,be){var Ve,Xe=[],st=1/(be-1);for(Ve=0;Ve<1;Ve+=st)Xe.push(Ve);if(Xe.push(1),te[0].offset!=0){var Ct={offset:0,color:te[0].color};te.unshift(Ct)}if(te[te.length-1].offset!=1){var Qt={offset:1,color:te[te.length-1].color};te.push(Qt)}for(var Jt="",P=0,se=0;se<Xe.length;se++){for(Ve=Xe[se];Ve>te[P+1].offset;)P++;var fe=te[P].offset,Te=(Ve-fe)/(te[P+1].offset-fe),at=te[P].color,ht=te[P+1].color;Jt+=Y(Math.round((1-Te)*at[0]+Te*ht[0]).toString(16))+Y(Math.round((1-Te)*at[1]+Te*ht[1]).toString(16))+Y(Math.round((1-Te)*at[2]+Te*ht[2]).toString(16))}return Jt.trim()},Vt=function(te,be){be||(be=21);var Ve=Wa(),Xe=Ot(te.colors,be),st=[];st.push({key:"FunctionType",value:"0"}),st.push({key:"Domain",value:"[0.0 1.0]"}),st.push({key:"Size",value:"["+be+"]"}),st.push({key:"BitsPerSample",value:"8"}),st.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He({data:Xe,additionalKeyValues:st,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ve}),de("endobj"),te.objectNumber=Wa(),de("<< /ShadingType "+te.type),de("/ColorSpace /DeviceRGB");var Ct="/Coords ["+j(parseFloat(te.coords[0]))+" "+j(parseFloat(te.coords[1]))+" ";te.type===2?Ct+=j(parseFloat(te.coords[2]))+" "+j(parseFloat(te.coords[3])):Ct+=j(parseFloat(te.coords[2]))+" "+j(parseFloat(te.coords[3]))+" "+j(parseFloat(te.coords[4]))+" "+j(parseFloat(te.coords[5])),de(Ct+="]"),te.matrix&&de("/Matrix ["+te.matrix.toString()+"]"),de("/Function "+Ve+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},jr=function(te,be){var Ve=en(),Xe=Wa();be.push({resourcesOid:Ve,objectOid:Xe}),te.objectNumber=Xe;var st=[];st.push({key:"Type",value:"/Pattern"}),st.push({key:"PatternType",value:"1"}),st.push({key:"PaintType",value:"1"}),st.push({key:"TilingType",value:"1"}),st.push({key:"BBox",value:"["+te.boundingBox.map(j).join(" ")+"]"}),st.push({key:"XStep",value:j(te.xStep)}),st.push({key:"YStep",value:j(te.yStep)}),st.push({key:"Resources",value:Ve+" 0 R"}),te.matrix&&st.push({key:"Matrix",value:"["+te.matrix.toString()+"]"}),He({data:te.stream,additionalKeyValues:st,objectId:te.objectNumber}),de("endobj")},ea=function(te){var be;for(be in br)br.hasOwnProperty(be)&&(br[be]instanceof ng?Vt(br[be]):br[be]instanceof Qv&&jr(br[be],te))},ta=function(te){for(var be in te.objectNumber=Wa(),de("<<"),te)switch(be){case"opacity":de("/ca "+L(te[be]));break;case"stroke-opacity":de("/CA "+L(te[be]))}de(">>"),de("endobj")},ia=function(){var te;for(te in Pr)Pr.hasOwnProperty(te)&&ta(Pr[te])},xs=function(){for(var te in de("/XObject <<"),Za)Za.hasOwnProperty(te)&&Za[te].objectNumber>=0&&de("/"+te+" "+Za[te].objectNumber+" 0 R");Jr.publish("putXobjectDict"),de(">>")},Fo=function(){fn.oid=Wa(),de("<<"),de("/Filter /Standard"),de("/V "+fn.v),de("/R "+fn.r),de("/U <"+fn.toHexString(fn.U)+">"),de("/O <"+fn.toHexString(fn.O)+">"),de("/P "+fn.P),de(">>"),de("endobj")},vs=function(){for(var te in de("/Font <<"),Kt)Kt.hasOwnProperty(te)&&(f===!1||f===!0&&h.hasOwnProperty(te))&&de("/"+te+" "+Kt[te].objectNumber+" 0 R");de(">>")},ci=function(){if(Object.keys(br).length>0){for(var te in de("/Shading <<"),br)br.hasOwnProperty(te)&&br[te]instanceof ng&&br[te].objectNumber>=0&&de("/"+te+" "+br[te].objectNumber+" 0 R");Jr.publish("putShadingPatternDict"),de(">>")}},Qs=function(te){if(Object.keys(br).length>0){for(var be in de("/Pattern <<"),br)br.hasOwnProperty(be)&&br[be]instanceof m.TilingPattern&&br[be].objectNumber>=0&&br[be].objectNumber<te&&de("/"+be+" "+br[be].objectNumber+" 0 R");Jr.publish("putTilingPatternDict"),de(">>")}},ki=function(){if(Object.keys(Pr).length>0){var te;for(te in de("/ExtGState <<"),Pr)Pr.hasOwnProperty(te)&&Pr[te].objectNumber>=0&&de("/"+te+" "+Pr[te].objectNumber+" 0 R");Jr.publish("putGStateDict"),de(">>")}},yn=function(te){je(te.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),vs(),ci(),Qs(te.objectOid),ki(),xs(),de(">>"),de("endobj")},ui=function(){var te=[];wt(),ia(),zt(),ea(te),Jr.publish("putResources"),te.forEach(yn),yn({resourcesOid:Le,objectOid:Number.MAX_SAFE_INTEGER}),Jr.publish("postPutResources")},gf=function(){Jr.publish("putAdditionalObjects");for(var te=0;te<oe.length;te++){var be=oe[te];je(be.objId,!0),de(be.content),de("endobj")}Jr.publish("postPutAdditionalObjects")},g0=function(te){Cr[te.fontName]=Cr[te.fontName]||{},Cr[te.fontName][te.fontStyle]=te.id},pu=function(te,be,Ve,Xe,st){var Ct={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:te,fontName:be,fontStyle:Ve,encoding:Xe,isStandardFont:st||!1,metadata:{}};return Jr.publish("addFont",{font:Ct,instance:this}),Kt[Ct.id]=Ct,g0(Ct),Ct.id},FA=function(te){for(var be=0,Ve=ye.length;be<Ve;be++){var Xe=pu.call(this,te[be][0],te[be][1],te[be][2],ye[be][3],!0);f===!1&&(h[Xe]=!0);var st=te[be][0].split("-");g0({id:Xe,fontName:st[0],fontStyle:st[1]||""})}Jr.publish("addFonts",{fonts:Kt,dictionary:Cr})},Si=function(te){return te.foo=function(){try{return te.apply(this,arguments)}catch(Xe){var be=Xe.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var Ve="Error in function "+be.split(`
`)[0].split("<")[0]+": "+Xe.message;if(!Mr.console)throw new Error(Ve);Mr.console.error(Ve,Xe),Mr.alert&&alert(Ve)}},te.foo.bar=te,te.foo},xf=function(te,be){var Ve,Xe,st,Ct,Qt,Jt,P,se,fe;if(st=(be=be||{}).sourceEncoding||"Unicode",Qt=be.outputEncoding,(be.autoencode||Qt)&&Kt[bt].metadata&&Kt[bt].metadata[st]&&Kt[bt].metadata[st].encoding&&(Ct=Kt[bt].metadata[st].encoding,!Qt&&Kt[bt].encoding&&(Qt=Kt[bt].encoding),!Qt&&Ct.codePages&&(Qt=Ct.codePages[0]),typeof Qt=="string"&&(Qt=Ct[Qt]),Qt)){for(P=!1,Jt=[],Ve=0,Xe=te.length;Ve<Xe;Ve++)(se=Qt[te.charCodeAt(Ve)])?Jt.push(String.fromCharCode(se)):Jt.push(te[Ve]),Jt[Ve].charCodeAt(0)>>8&&(P=!0);te=Jt.join("")}for(Ve=te.length;P===void 0&&Ve!==0;)te.charCodeAt(Ve-1)>>8&&(P=!0),Ve--;if(!P)return te;for(Jt=be.noBOM?[]:[254,255],Ve=0,Xe=te.length;Ve<Xe;Ve++){if((fe=(se=te.charCodeAt(Ve))>>8)>>8)throw new Error("Character at position "+Ve+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(fe),Jt.push(se-(fe<<8))}return String.fromCharCode.apply(void 0,Jt)},ja=m.__private__.pdfEscape=m.pdfEscape=function(te,be){return xf(te,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_i=m.__private__.beginPage=function(te){we[++Rr]=[],pr[Rr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(te[0]),topRightY:Number(te[1])}},Ql(Rr),Ce(we[F])},gu=function(te,be){var Ve,Xe,st;switch(r=be||r,typeof te=="string"&&(Ve=y(te.toLowerCase()),Array.isArray(Ve)&&(Xe=Ve[0],st=Ve[1])),Array.isArray(te)&&(Xe=te[0]*ut,st=te[1]*ut),isNaN(Xe)&&(Xe=n[0],st=n[1]),(Xe>14400||st>14400)&&(Tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Xe=Math.min(14400,Xe),st=Math.min(14400,st)),n=[Xe,st],r.substr(0,1)){case"l":st>Xe&&(n=[st,Xe]);break;case"p":Xe>st&&(n=[st,Xe])}_i(n),LA(yu),de(Bi),MA!==0&&de(MA+" J"),pd!==0&&de(pd+" j"),Jr.publish("addPage",{pageNumber:Rr})},xu=function(te){te>0&&te<=Rr&&(we.splice(te,1),pr.splice(te,1),Rr--,F>Rr&&(F=Rr),this.setPage(F))},Ql=function(te){te>0&&te<=Rr&&(F=te)},La=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return we.length-1},vu=function(te,be,Ve){var Xe,st=void 0;return Ve=Ve||{},te=te!==void 0?te:Kt[bt].fontName,be=be!==void 0?be:Kt[bt].fontStyle,Xe=te.toLowerCase(),Cr[Xe]!==void 0&&Cr[Xe][be]!==void 0?st=Cr[Xe][be]:Cr[te]!==void 0&&Cr[te][be]!==void 0?st=Cr[te][be]:Ve.disableWarning===!1&&Tn.warn("Unable to look up font label for font '"+te+"', '"+be+"'. Refer to getFontList() for available fonts."),st||Ve.noFallback||(st=Cr.times[be])==null&&(st=Cr.times.normal),st},Do=m.__private__.putInfo=function(){var te=Wa(),be=function(Xe){return Xe};for(var Ve in d!==null&&(be=fn.encryptor(te,0)),de("<<"),de("/Producer ("+ja(be("jsPDF "+gr.version))+")"),nt)nt.hasOwnProperty(Ve)&&nt[Ve]&&de("/"+Ve.substr(0,1).toUpperCase()+Ve.substr(1)+" ("+ja(be(nt[Ve]))+")");de("/CreationDate ("+ja(be(H))+")"),de(">>"),de("endobj")},jc=m.__private__.putCatalog=function(te){var be=(te=te||{}).rootDictionaryObjId||De;switch(Wa(),de("<<"),de("/Type /Catalog"),de("/Pages "+be+" 0 R"),Ae||(Ae="fullwidth"),Ae){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ve=""+Ae;Ve.substr(Ve.length-1)==="%"&&(Ae=parseInt(Ae)/100),typeof Ae=="number"&&de("/OpenAction [3 0 R /XYZ null null "+L(Ae)+"]")}switch(et||(et="continuous"),et){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}Qe&&de("/PageMode /"+Qe),Jr.publish("putCatalog"),de(">>"),de("endobj")},x0=m.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ae+1)),de("/Root "+ae+" 0 R"),de("/Info "+(ae-1)+" 0 R"),d!==null&&de("/Encrypt "+fn.oid+" 0 R"),de("/ID [ <"+Q+"> <"+Q+"> ]"),de(">>")},DA=m.__private__.putHeader=function(){de("%PDF-"+g),de("%ºß¬à")},PA=m.__private__.putXRef=function(){var te="0000000000";de("xref"),de("0 "+(ae+1)),de("0000000000 65535 f ");for(var be=1;be<=ae;be++)typeof le[be]=="function"?de((te+le[be]()).slice(-10)+" 00000 n "):le[be]!==void 0?de((te+le[be]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},kc=m.__private__.buildDocument=function(){_e(),Ce(ie),Jr.publish("buildDocument"),DA(),We(),gf(),ui(),d!==null&&Fo(),Do(),jc();var te=ne;return PA(),x0(),de("startxref"),de(""+te),de("%%EOF"),Ce(we[F]),ie.join(`
`)},vf=m.__private__.getBlob=function(te){return new Blob([he(te)],{type:"application/pdf"})},Sc=m.output=m.__private__.output=Si(function(te,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",te){case void 0:return kc();case"save":m.save(be.filename);break;case"arraybuffer":return he(kc());case"blob":return vf(kc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(vf(kc()))||void 0;Tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ve="",Xe=kc();try{Ve=ED(Xe)}catch{Ve=ED(unescape(encodeURIComponent(Xe)))}return"data:application/pdf;filename="+be.filename+";base64,"+Ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var st="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(st=be.pdfObjectUrl,Ct="");var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+st+'"'+Ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",Jt=Mr.open();return Jt!==null&&Jt.document.write(Qt),Jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var P='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',se=Mr.open();if(se!==null){se.document.write(P);var fe=this;se.document.documentElement.querySelector("#pdfViewer").onload=function(){se.document.title=be.filename,se.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(fe.output("bloburl"))}}return se}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',at=Mr.open();if(at!==null&&(at.document.write(Te),at.document.title=be.filename),at||typeof safari>"u")return at;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",be);default:return null}}),Hl=function(te){return Array.isArray(gs)===!0&&gs.indexOf(te)>-1};switch(a){case"pt":ut=1;break;case"mm":ut=72/25.4;break;case"cm":ut=72/2.54;break;case"in":ut=72;break;case"px":ut=Hl("px_scaling")==1?.75:96/72;break;case"pc":case"em":ut=12;break;case"ex":ut=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);ut=a}var fn=null;Z(),G();var _c=function(te){return d!==null?fn.encryptor(te,0):function(be){return be}},zl=m.__private__.getPageInfo=m.getPageInfo=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pr[te].objId,pageNumber:te,pageContext:pr[te]}},Br=m.__private__.getPageInfoByObjId=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in pr)if(pr[be].objId===te)break;return zl(be)},Vl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:pr[F].objId,pageNumber:F,pageContext:pr[F]}};m.addPage=function(){return gu.apply(this,arguments),this},m.setPage=function(){return Ql.apply(this,arguments),Ce.call(this,we[F]),this},m.insertPage=function(te){return this.addPage(),this.movePage(F,te),this},m.movePage=function(te,be){var Ve,Xe;if(te>be){Ve=we[te],Xe=pr[te];for(var st=te;st>be;st--)we[st]=we[st-1],pr[st]=pr[st-1];we[be]=Ve,pr[be]=Xe,this.setPage(be)}else if(te<be){Ve=we[te],Xe=pr[te];for(var Ct=te;Ct<be;Ct++)we[Ct]=we[Ct+1],pr[Ct]=pr[Ct+1];we[be]=Ve,pr[be]=Xe,this.setPage(be)}return this},m.deletePage=function(){return xu.apply(this,arguments),this},m.__private__.text=m.text=function(te,be,Ve,Xe,st){var Ct,Qt,Jt,P,se,fe,Te,at,ht,Ht=(Xe=Xe||{}).scope||this;if(typeof te=="number"&&typeof be=="number"&&(typeof Ve=="string"||Array.isArray(Ve))){var Tr=Ve;Ve=be,be=te,te=Tr}if(arguments[3]instanceof er?(S("The transform parameter of text() with a Matrix value"),ht=st):(Jt=arguments[4],P=arguments[5],bn(Te=arguments[3])==="object"&&Te!==null||(typeof Jt=="string"&&(P=Jt,Jt=null),typeof Te=="string"&&(P=Te,Te=null),typeof Te=="number"&&(Jt=Te,Te=null),Xe={flags:Te,angle:Jt,align:P})),isNaN(be)||isNaN(Ve)||te==null)throw new Error("Invalid arguments passed to jsPDF.text");if(te.length===0)return Ht;var ha="",Gr=!1,Ma=typeof Xe.lineHeightFactor=="number"?Xe.lineHeightFactor:Aa,tn=Ht.internal.scaleFactor;function Kl(ca){return ca=ca.split("	").join(Array(Xe.TabLen||9).join(" ")),ja(ca,Te)}function ss(ca){for(var ua,wn=ca.concat(),is=[],Xl=wn.length;Xl--;)typeof(ua=wn.shift())=="string"?is.push(ua):Array.isArray(ca)&&(ua.length===1||ua[1]===void 0&&ua[2]===void 0)?is.push(ua[0]):is.push([ua[0],ua[1],ua[2]]);return is}function Mo(ca,ua){var wn;if(typeof ca=="string")wn=ua(ca)[0];else if(Array.isArray(ca)){for(var is,Xl,Of=ca.concat(),Ff=[],wd=Of.length;wd--;)typeof(is=Of.shift())=="string"?Ff.push(ua(is)[0]):Array.isArray(is)&&typeof is[0]=="string"&&(Xl=ua(is[0],is[1],is[2]),Ff.push([Xl[0],Xl[1],Xl[2]]));wn=Ff}return wn}var ku=!1,Cf=!0;if(typeof te=="string")ku=!0;else if(Array.isArray(te)){var w0=te.concat();Qt=[];for(var UA,Hs=w0.length;Hs--;)(typeof(UA=w0.shift())!="string"||Array.isArray(UA)&&typeof UA[0]!="string")&&(Cf=!1);ku=Cf}if(ku===!1)throw new Error('Type of text must be string or Array. "'+te+'" is not recognized.');typeof te=="string"&&(te=te.match(/[\r?\n]/)?te.split(/\r\n|\r|\n/g):[te]);var Ef=ce/Ht.internal.scaleFactor,QA=Ef*(Ma-1);switch(Xe.baseline){case"bottom":Ve-=QA;break;case"top":Ve+=Ef-QA;break;case"hanging":Ve+=Ef-2*QA;break;case"middle":Ve+=Ef/2-QA}if((fe=Xe.maxWidth||0)>0&&(typeof te=="string"?te=Ht.splitTextToSize(te,fe):Object.prototype.toString.call(te)==="[object Array]"&&(te=te.reduce(function(ca,ua){return ca.concat(Ht.splitTextToSize(ua,fe))},[]))),Ct={text:te,x:be,y:Ve,options:Xe,mutex:{pdfEscape:ja,activeFontKey:bt,fonts:Kt,activeFontSize:ce}},Jr.publish("preProcessText",Ct),te=Ct.text,Jt=(Xe=Ct.options).angle,!(ht instanceof er)&&Jt&&typeof Jt=="number"){Jt*=Math.PI/180,Xe.rotationDirection===0&&(Jt=-Jt),C===N.ADVANCED&&(Jt=-Jt);var HA=Math.cos(Jt),N0=Math.sin(Jt);ht=new er(HA,N0,-N0,HA,0,0)}else Jt&&Jt instanceof er&&(ht=Jt);C!==N.ADVANCED||ht||(ht=la),(se=Xe.charSpace||md)!==void 0&&(ha+=j(k(se))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(at=Xe.horizontalScale)!==void 0&&(ha+=j(100*at)+` Tz
`),Xe.lang;var Uo=-1,X1=Xe.renderingMode!==void 0?Xe.renderingMode:Xe.stroke,wp=Ht.internal.getCurrentPageInfo().pageContext;switch(X1){case 0:case!1:case"fill":Uo=0;break;case 1:case!0:case"stroke":Uo=1;break;case 2:case"fillThenStroke":Uo=2;break;case 3:case"invisible":Uo=3;break;case 4:case"fillAndAddForClipping":Uo=4;break;case 5:case"strokeAndAddPathForClipping":Uo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Uo=6;break;case 7:case"addToPathForClipping":Uo=7}var vx=wp.usedRenderingMode!==void 0?wp.usedRenderingMode:-1;Uo!==-1?ha+=Uo+` Tr
`:vx!==-1&&(ha+=`0 Tr
`),Uo!==-1&&(wp.usedRenderingMode=Uo),P=Xe.align||"left";var Wl,di=ce*Ma,jf=Ht.internal.pageSize.getWidth(),Np=Kt[bt];se=Xe.charSpace||md,fe=Xe.maxWidth||0,Te=Object.assign({autoencode:!0,noBOM:!0},Xe.flags);var bd=[],kf=function(ca){return Ht.getStringUnitWidth(ca,{font:Np,charSpace:se,fontSize:ce,doKerning:!1})*ce/tn};if(Object.prototype.toString.call(te)==="[object Array]"){var mo;Qt=ss(te),P!=="left"&&(Wl=Qt.map(kf));var Ti,Sf=0;if(P==="right"){be-=Wl[0],te=[],Hs=Qt.length;for(var Qo=0;Qo<Hs;Qo++)Qo===0?(Ti=qi(be),mo=ys(Ve)):(Ti=k(Sf-Wl[Qo]),mo=-di),te.push([Qt[Qo],Ti,mo]),Sf=Wl[Qo]}else if(P==="center"){be-=Wl[0]/2,te=[],Hs=Qt.length;for(var Oc=0;Oc<Hs;Oc++)Oc===0?(Ti=qi(be),mo=ys(Ve)):(Ti=k((Sf-Wl[Oc])/2),mo=-di),te.push([Qt[Oc],Ti,mo]),Sf=Wl[Oc]}else if(P==="left"){te=[],Hs=Qt.length;for(var Su=0;Su<Hs;Su++)te.push(Qt[Su])}else if(P==="justify"&&Np.encoding==="Identity-H"){te=[],Hs=Qt.length,fe=fe!==0?fe:jf;for(var Fc=0,Yn=0;Yn<Hs;Yn++)if(mo=Yn===0?ys(Ve):-di,Ti=Yn===0?qi(be):Fc,Yn<Hs-1){var Dc=k((fe-Wl[Yn])/(Qt[Yn].split(" ").length-1)),ws=Qt[Yn].split(" ");te.push([ws[0]+" ",Ti,mo]),Fc=0;for(var Ho=1;Ho<ws.length;Ho++){var zA=(kf(ws[Ho-1]+" "+ws[Ho])-kf(ws[Ho]))*tn+Dc;Ho==ws.length-1?te.push([ws[Ho],zA,0]):te.push([ws[Ho]+" ",zA,0]),Fc-=zA}}else te.push([Qt[Yn],Ti,mo]);te.push(["",Fc,0])}else{if(P!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(te=[],Hs=Qt.length,fe=fe!==0?fe:jf,Yn=0;Yn<Hs;Yn++)mo=Yn===0?ys(Ve):-di,Ti=Yn===0?qi(be):0,Yn<Hs-1?bd.push(j(k((fe-Wl[Yn])/(Qt[Yn].split(" ").length-1)))):bd.push(0),te.push([Qt[Yn],Ti,mo])}}var _u=typeof Xe.R2L=="boolean"?Xe.R2L:Pe;_u===!0&&(te=Mo(te,function(ca,ua,wn){return[ca.split("").reverse().join(""),ua,wn]})),Ct={text:te,x:be,y:Ve,options:Xe,mutex:{pdfEscape:ja,activeFontKey:bt,fonts:Kt,activeFontSize:ce}},Jr.publish("postProcessText",Ct),te=Ct.text,Gr=Ct.mutex.isHex||!1;var C0=Kt[bt].encoding;C0!=="WinAnsiEncoding"&&C0!=="StandardEncoding"||(te=Mo(te,function(ca,ua,wn){return[Kl(ca),ua,wn]})),Qt=ss(te),te=[];for(var _f,Bf,Tf,VA=0,E0=1,If=Array.isArray(Qt[0])?E0:VA,yd="",$A=function(ca,ua,wn){var is="";return wn instanceof er?(wn=typeof Xe.angle=="number"?xa(wn,new er(1,0,0,1,ca,ua)):xa(new er(1,0,0,1,ca,ua),wn),C===N.ADVANCED&&(wn=xa(new er(1,0,0,-1,0,0),wn)),is=wn.join(" ")+` Tm
`):is=j(ca)+" "+j(ua)+` Td
`,is},Jn=0;Jn<Qt.length;Jn++){switch(yd="",If){case E0:Tf=(Gr?"<":"(")+Qt[Jn][0]+(Gr?">":")"),_f=parseFloat(Qt[Jn][1]),Bf=parseFloat(Qt[Jn][2]);break;case VA:Tf=(Gr?"<":"(")+Qt[Jn]+(Gr?">":")"),_f=qi(be),Bf=ys(Ve)}bd!==void 0&&bd[Jn]!==void 0&&(yd=bd[Jn]+` Tw
`),Jn===0?te.push(yd+$A(_f,Bf,ht)+Tf):If===VA?te.push(yd+Tf):If===E0&&te.push(yd+$A(_f,Bf,ht)+Tf)}te=If===VA?te.join(` Tj
T* `):te.join(` Tj
`),te+=` Tj
`;var Nl=`BT
/`;return Nl+=bt+" "+ce+` Tf
`,Nl+=j(ce*Ma)+` TL
`,Nl+=Tc+`
`,Nl+=ha,Nl+=te,de(Nl+="ET"),h[bt]=!0,Ht};var v0=m.__private__.clip=m.clip=function(te){return de(te==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return v0("evenodd")},m.__private__.discardPath=m.discardPath=function(){return de("n"),this};var $i=m.__private__.isValidStyle=function(te){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(te)!==-1&&(be=!0),be};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(te){return $i(te)&&(u=te),this};var Po=m.__private__.getStyle=m.getStyle=function(te){var be=u;switch(te){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=te}return be},ho=m.close=function(){return de("h"),this};m.stroke=function(){return de("S"),this},m.fill=function(te){return $l("f",te),this},m.fillEvenOdd=function(te){return $l("f*",te),this},m.fillStroke=function(te){return $l("B",te),this},m.fillStrokeEvenOdd=function(te){return $l("B*",te),this};var $l=function(te,be){bn(be)==="object"?Bc(be,te):de(te)},Ro=function(te){te===null||C===N.ADVANCED&&te===void 0||(te=Po(te),de(te))};function bu(te,be,Ve,Xe,st){var Ct=new Qv(be||this.boundingBox,Ve||this.xStep,Xe||this.yStep,this.gState,st||this.matrix);Ct.stream=this.stream;var Qt=te+"$$"+this.cloneIndex+++"$$";return Ia(Qt,Ct),Ct}var Bc=function(te,be){var Ve=Sn[te.key],Xe=br[Ve];if(Xe instanceof ng)de("q"),de(RA(be)),Xe.gState&&m.setGState(Xe.gState),de(te.matrix.toString()+" cm"),de("/"+Ve+" sh"),de("Q");else if(Xe instanceof Qv){var st=new er(1,0,0,-1,0,Ki());te.matrix&&(st=st.multiply(te.matrix||la),Ve=bu.call(Xe,te.key,te.boundingBox,te.xStep,te.yStep,st).id),de("q"),de("/Pattern cs"),de("/"+Ve+" scn"),Xe.gState&&m.setGState(Xe.gState),de(be),de("Q")}},RA=function(te){switch(te){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Lo=m.moveTo=function(te,be){return de(j(k(te))+" "+j(U(be))+" m"),this},Gi=m.lineTo=function(te,be){return de(j(k(te))+" "+j(U(be))+" l"),this},Gl=m.curveTo=function(te,be,Ve,Xe,st,Ct){return de([j(k(te)),j(U(be)),j(k(Ve)),j(U(Xe)),j(k(st)),j(U(Ct)),"c"].join(" ")),this};m.__private__.line=m.line=function(te,be,Ve,Xe,st){if(isNaN(te)||isNaN(be)||isNaN(Ve)||isNaN(Xe)||!$i(st))throw new Error("Invalid arguments passed to jsPDF.line");return C===N.COMPAT?this.lines([[Ve-te,Xe-be]],te,be,[1,1],st||"S"):this.lines([[Ve-te,Xe-be]],te,be,[1,1]).stroke()},m.__private__.lines=m.lines=function(te,be,Ve,Xe,st,Ct){var Qt,Jt,P,se,fe,Te,at,ht,Ht,Tr,ha,Gr;if(typeof te=="number"&&(Gr=Ve,Ve=be,be=te,te=Gr),Xe=Xe||[1,1],Ct=Ct||!1,isNaN(be)||isNaN(Ve)||!Array.isArray(te)||!Array.isArray(Xe)||!$i(st)||typeof Ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lo(be,Ve),Qt=Xe[0],Jt=Xe[1],se=te.length,Tr=be,ha=Ve,P=0;P<se;P++)(fe=te[P]).length===2?(Tr=fe[0]*Qt+Tr,ha=fe[1]*Jt+ha,Gi(Tr,ha)):(Te=fe[0]*Qt+Tr,at=fe[1]*Jt+ha,ht=fe[2]*Qt+Tr,Ht=fe[3]*Jt+ha,Tr=fe[4]*Qt+Tr,ha=fe[5]*Jt+ha,Gl(Te,at,ht,Ht,Tr,ha));return Ct&&ho(),Ro(st),this},m.path=function(te){for(var be=0;be<te.length;be++){var Ve=te[be],Xe=Ve.c;switch(Ve.op){case"m":Lo(Xe[0],Xe[1]);break;case"l":Gi(Xe[0],Xe[1]);break;case"c":Gl.apply(this,Xe);break;case"h":ho()}}return this},m.__private__.rect=m.rect=function(te,be,Ve,Xe,st){if(isNaN(te)||isNaN(be)||isNaN(Ve)||isNaN(Xe)||!$i(st))throw new Error("Invalid arguments passed to jsPDF.rect");return C===N.COMPAT&&(Xe=-Xe),de([j(k(te)),j(U(be)),j(k(Ve)),j(k(Xe)),"re"].join(" ")),Ro(st),this},m.__private__.triangle=m.triangle=function(te,be,Ve,Xe,st,Ct,Qt){if(isNaN(te)||isNaN(be)||isNaN(Ve)||isNaN(Xe)||isNaN(st)||isNaN(Ct)||!$i(Qt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ve-te,Xe-be],[st-Ve,Ct-Xe],[te-st,be-Ct]],te,be,[1,1],Qt,!0),this},m.__private__.roundedRect=m.roundedRect=function(te,be,Ve,Xe,st,Ct,Qt){if(isNaN(te)||isNaN(be)||isNaN(Ve)||isNaN(Xe)||isNaN(st)||isNaN(Ct)||!$i(Qt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Jt=4/3*(Math.SQRT2-1);return st=Math.min(st,.5*Ve),Ct=Math.min(Ct,.5*Xe),this.lines([[Ve-2*st,0],[st*Jt,0,st,Ct-Ct*Jt,st,Ct],[0,Xe-2*Ct],[0,Ct*Jt,-st*Jt,Ct,-st,Ct],[2*st-Ve,0],[-st*Jt,0,-st,-Ct*Jt,-st,-Ct],[0,2*Ct-Xe],[0,-Ct*Jt,st*Jt,-Ct,st,-Ct]],te+st,be,[1,1],Qt,!0),this},m.__private__.ellipse=m.ellipse=function(te,be,Ve,Xe,st){if(isNaN(te)||isNaN(be)||isNaN(Ve)||isNaN(Xe)||!$i(st))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ct=4/3*(Math.SQRT2-1)*Ve,Qt=4/3*(Math.SQRT2-1)*Xe;return Lo(te+Ve,be),Gl(te+Ve,be-Qt,te+Ct,be-Xe,te,be-Xe),Gl(te-Ct,be-Xe,te-Ve,be-Qt,te-Ve,be),Gl(te-Ve,be+Qt,te-Ct,be+Xe,te,be+Xe),Gl(te+Ct,be+Xe,te+Ve,be+Qt,te+Ve,be),Ro(st),this},m.__private__.circle=m.circle=function(te,be,Ve,Xe){if(isNaN(te)||isNaN(be)||isNaN(Ve)||!$i(Xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(te,be,Ve,Ve,Xe)},m.setFont=function(te,be,Ve){return Ve&&(be=O(be,Ve)),bt=vu(te,be,{disableWarning:!1}),this};var bs=m.__private__.getFont=m.getFont=function(){return Kt[vu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var te,be,Ve={};for(te in Cr)if(Cr.hasOwnProperty(te))for(be in Ve[te]=[],Cr[te])Cr[te].hasOwnProperty(be)&&Ve[te].push(be);return Ve},m.addFont=function(te,be,Ve,Xe,st){var Ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ct.indexOf(arguments[3])!==-1?st=arguments[3]:arguments[3]&&Ct.indexOf(arguments[3])==-1&&(Ve=O(Ve,Xe)),st=st||"Identity-H",pu.call(this,te,be,Ve,st)};var Aa,yu=e.lineWidth||.200025,ql=m.__private__.getLineWidth=m.getLineWidth=function(){return yu},LA=m.__private__.setLineWidth=m.setLineWidth=function(te){return yu=te,de(j(k(te))+" w"),this};m.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(te,be){if(te=te||[],be=be||0,isNaN(be)||!Array.isArray(te))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return te=te.map(function(Ve){return j(k(Ve))}).join(" "),be=j(k(be)),de("["+te+"] "+be+" d"),this};var Ad=m.__private__.getLineHeight=m.getLineHeight=function(){return ce*Aa};m.__private__.getLineHeight=m.getLineHeight=function(){return ce*Aa};var hd=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(te){return typeof(te=te||1.15)=="number"&&(Aa=te),this},wl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Aa};hd(e.lineHeight);var qi=m.__private__.getHorizontalCoordinate=function(te){return k(te)},ys=m.__private__.getVerticalCoordinate=function(te){return C===N.ADVANCED?te:pr[F].mediaBox.topRightY-pr[F].mediaBox.bottomLeftY-k(te)},b0=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(te){return j(qi(te))},wu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(te){return j(ys(te))},Bi=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ge(Bi)},m.__private__.setStrokeColor=m.setDrawColor=function(te,be,Ve,Xe){return Bi=me({ch1:te,ch2:be,ch3:Ve,ch4:Xe,pdfColorType:"draw",precision:2}),de(Bi),this};var Nu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ge(Nu)},m.__private__.setFillColor=m.setFillColor=function(te,be,Ve,Xe){return Nu=me({ch1:te,ch2:be,ch3:Ve,ch4:Xe,pdfColorType:"fill",precision:2}),de(Nu),this};var Tc=e.textColor||"0 g",bf=m.__private__.getTextColor=m.getTextColor=function(){return ge(Tc)};m.__private__.setTextColor=m.setTextColor=function(te,be,Ve,Xe){return Tc=me({ch1:te,ch2:be,ch3:Ve,ch4:Xe,pdfColorType:"text",precision:3}),this};var md=e.charSpace,yf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(md||0)};m.__private__.setCharSpace=m.setCharSpace=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return md=te,this};var MA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(te){var be=m.CapJoinStyles[te];if(be===void 0)throw new Error("Line cap style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return MA=be,de(be+" J"),this};var pd=0;m.__private__.setLineJoin=m.setLineJoin=function(te){var be=m.CapJoinStyles[te];if(be===void 0)throw new Error("Line join style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pd=be,de(be+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(te){if(te=te||0,isNaN(te))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(j(k(te))+" M"),this},m.GState=dS,m.setGState=function(te){(te=typeof te=="string"?Pr[Ra[te]]:Cu(null,te)).equals(Dn)||(de("/"+te.id+" gs"),Dn=te)};var Cu=function(te,be){if(!te||!Ra[te]){var Ve=!1;for(var Xe in Pr)if(Pr.hasOwnProperty(Xe)&&Pr[Xe].equals(be)){Ve=!0;break}if(Ve)be=Pr[Xe];else{var st="GS"+(Object.keys(Pr).length+1).toString(10);Pr[st]=be,be.id=st}return te&&(Ra[te]=be.id),Jr.publish("addGState",be),be}};m.addGState=function(te,be){return Cu(te,be),this},m.saveGraphicsState=function(){return de("q"),$r.push({key:bt,size:ce,color:Tc}),this},m.restoreGraphicsState=function(){de("Q");var te=$r.pop();return bt=te.key,ce=te.size,Tc=te.color,Dn=null,this},m.setCurrentTransformationMatrix=function(te){return de(te.toString()+" cm"),this},m.comment=function(te){return de("#"+te),this};var gd=function(te,be){var Ve=te||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ve},set:function(Ct){isNaN(Ct)||(Ve=parseFloat(Ct))}});var Xe=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Xe},set:function(Ct){isNaN(Ct)||(Xe=parseFloat(Ct))}});var st="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return st},set:function(Ct){st=Ct.toString()}}),this},wf=function(te,be,Ve,Xe){gd.call(this,te,be),this.type="rect";var st=Ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return st},set:function(Qt){isNaN(Qt)||(st=parseFloat(Qt))}});var Ct=Xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ct},set:function(Qt){isNaN(Qt)||(Ct=parseFloat(Qt))}}),this},xd=function(){this.page=Rr,this.currentPage=F,this.pages=we.slice(0),this.pagesContext=pr.slice(0),this.x=ze,this.y=Tt,this.matrix=ir,this.width=ju(F),this.height=Ki(F),this.outputDestination=Ee,this.id="",this.objectNumber=-1};xd.prototype.restore=function(){Rr=this.page,F=this.currentPage,pr=this.pagesContext,we=this.pages,ze=this.x,Tt=this.y,ir=this.matrix,vd(F,this.width),Nf(F,this.height),Ee=this.outputDestination};var Eu=function(te,be,Ve,Xe,st){Us.push(new xd),Rr=F=0,we=[],ze=te,Tt=be,ir=st,_i([Ve,Xe])},y0=function(te){if(Pn[te])Us.pop().restore();else{var be=new xd,Ve="Xo"+(Object.keys(Za).length+1).toString(10);be.id=Ve,Pn[te]=Ve,Za[Ve]=be,Jr.publish("addFormObject",be),Us.pop().restore()}};for(var Ic in m.beginFormObject=function(te,be,Ve,Xe,st){return Eu(te,be,Ve,Xe,st),this},m.endFormObject=function(te){return y0(te),this},m.doFormObject=function(te,be){var Ve=Za[Pn[te]];return de("q"),de(be.toString()+" cm"),de("/"+Ve.id+" Do"),de("Q"),this},m.getFormObject=function(te){var be=Za[Pn[te]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},m.save=function(te,be){return te=te||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(Zp(vf(kc()),te),typeof Zp.unload=="function"&&Mr.setTimeout&&setTimeout(Zp.unload,911),this):new Promise(function(Ve,Xe){try{var st=Zp(vf(kc()),te);typeof Zp.unload=="function"&&Mr.setTimeout&&setTimeout(Zp.unload,911),Ve(st)}catch(Ct){Xe(Ct.message)}})},gr.API)gr.API.hasOwnProperty(Ic)&&(Ic==="events"&&gr.API.events.length?function(te,be){var Ve,Xe,st;for(st=be.length-1;st!==-1;st--)Ve=be[st][0],Xe=be[st][1],te.subscribe.apply(te,[Ve].concat(typeof Xe=="function"?[Xe]:Xe))}(Jr,gr.API.events):m[Ic]=gr.API[Ic]);var ju=m.getPageWidth=function(te){return(pr[te=te||F].mediaBox.topRightX-pr[te].mediaBox.bottomLeftX)/ut},vd=m.setPageWidth=function(te,be){pr[te].mediaBox.topRightX=be*ut+pr[te].mediaBox.bottomLeftX},Ki=m.getPageHeight=function(te){return(pr[te=te||F].mediaBox.topRightY-pr[te].mediaBox.bottomLeftY)/ut},Nf=m.setPageHeight=function(te,be){pr[te].mediaBox.topRightY=be*ut+pr[te].mediaBox.bottomLeftY};return m.internal={pdfEscape:ja,getStyle:Po,getFont:bs,getFontSize:Ne,getCharSpace:yf,getTextColor:bf,getLineHeight:Ad,getLineHeightFactor:wl,getLineWidth:ql,write:xe,getHorizontalCoordinate:qi,getVerticalCoordinate:ys,getCoordinateString:b0,getVerticalCoordinateString:wu,collections:{},newObject:Wa,newAdditionalObject:Ue,newObjectDeferred:en,newObjectDeferredBegin:je,getFilters:Oe,putStream:He,events:Jr,scaleFactor:ut,pageSize:{getWidth:function(){return ju(F)},setWidth:function(te){vd(F,te)},getHeight:function(){return Ki(F)},setHeight:function(te){Nf(F,te)}},encryptionOptions:d,encryption:fn,getEncryptor:_c,output:Sc,getNumberOfPages:La,pages:we,out:de,f2:L,f3:D,getPageInfo:zl,getPageInfoByObjId:Br,getCurrentPageInfo:Vl,getPDFVersion:x,Point:gd,Rectangle:wf,Matrix:er,hasHotfix:Hl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ju(F)},set:function(te){vd(F,te)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ki(F)},set:function(te){Nf(F,te)},enumerable:!0,configurable:!0}),FA.call(m,ye),bt="F1",gu(n,r),Jr.publish("initialized"),m}Bv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Bv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Bv.prototype.processOwnerPassword=function(e,t){return kD(jD(t).substr(0,5),e)},Bv.prototype.encryptor=function(e,t){var r=jD(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return kD(r,a)}},dS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||bn(e)!==bn(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},gr.API={events:[]},gr.version="2.5.2";var Ss=gr.API,d7=1,gx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},av=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wr=function(e){return e.toFixed(2)},nm=function(e){return e.toFixed(5)};Ss.__acroform__={};var Ec=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},SW=function(e){return e*d7},Jf=function(e){var t=new cue,r=mr.internal.getHeight(e)||0,a=mr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Wr(a)),Number(Wr(r))],t},uJe=Ss.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},dJe=Ss.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},fJe=Ss.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ei=Ss.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return fJe(e,t-1)},ti=Ss.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uJe(e,t-1)},ri=Ss.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return dJe(e,t-1)},AJe=Ss.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(n)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(n+o)||0,c.upperRight_Y=a(i)||0,[Number(Wr(c.lowerLeft_X)),Number(Wr(c.lowerLeft_Y)),Number(Wr(c.upperRight_X)),Number(Wr(c.upperRight_Y))]},hJe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=SD(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+Wr(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Jf(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},SD=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(D){return D.split(`
`)}):n.map(function(D){return[D]});var i=r,o=mr.internal.getHeight(e)||0;o=o<0?-o:o;var l=mr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(D,k,R){if(D+1<n.length){var U=k+" "+n[D+1][0];return ij(U,e,R).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=ij("3",e,i).height,h=e.multiline?o-i:(o-f)/2,m=h+=2,g=0,x=0,v=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+ij(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",N=0,C=0;C<n.length;C++)if(n.hasOwnProperty(C)){var T=!1;if(n[C].length!==1&&v!==n[C].length-1){if((f+2)*(N+2)+2>o)continue e;y+=n[C][v],T=!0,x=C,C--}else{y=(y+=n[C][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var _=parseInt(C),O=c(_,y,i),j=C>=n.length-1;if(O&&!j){y+=" ",v=0;continue}if(O||j){if(j)x=_;else if(e.multiline&&(f+2)*(N+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(N+2)+2>o)continue e;x=_}}for(var S="",B=g;B<=x;B++){var L=n[B];if(e.multiline){if(B===x){S+=L[v]+" ",v=(v+1)%L.length;continue}if(B===g){S+=L[L.length-1]+" ";continue}}S+=L[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=ij(S,e,i).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=Wr(u)+" "+Wr(m)+` Td
`,t+="("+gx(S)+`) Tj
`,t+=-Wr(u)+` 0 Td
`,m=-(i+2),d=0,g=T?x:x+1,N++,y=""}break}return a.text=t,a.fontSize=i,a},ij=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},mJe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},pJe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},gJe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,n=e[r];t.internal.newObjectDeferredBegin(n.objId,!0),bn(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete e[a]}},xJe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Af.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(mJe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");d7=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new uue,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&pJe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,n){var i=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=AJe(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=mr.createDefaultAppearanceStream(l),bn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=hJe(l);c.push({key:"AP",value:"<</N "+d+">>"}),n.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(n,l)),f+="/"+o+" "+g+" ",n.internal.acroformPlugin.xForms.indexOf(g)>=0||n.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(n,l)),f+="/"+o+" "+g,n.internal.acroformPlugin.xForms.indexOf(g)>=0||n.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}i&&gJe(n.internal.acroformPlugin.xForms,n)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},lue=Ss.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var n="[",i=0;i<e.length;i++)switch(i!==0&&(n+=" "),bn(e[i])){case"boolean":case"number":case"object":n+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),n+="("+gx(a(e[i].toString()))+")"):n+=e[i].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},A6=function(e,t,r){var a=function(n){return n};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+gx(a(e))+")"},AA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};AA.prototype.toString=function(){return this.objId+" 0 R"},AA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},AA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],n=this[a];n&&(Array.isArray(n)?e.push({key:a,value:lue(n,this.objId,this.scope)}):n instanceof AA?(n.scope=this.scope,e.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:a,value:n}))}return e};var cue=function(){AA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ec(cue,AA);var uue=function(){AA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+gx(r(e))+")"}},set:function(r){e=r}})};Ec(uue,AA);var Af=function e(){AA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ei(t,3)},set:function(y){y?this.F=ti(t,3):this.F=ri(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof fS)return;i="FieldObject"+e.FieldNum++}var y=function(N){return N};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+gx(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/d7:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof fS||this instanceof _g))return A6(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof no?h:A6(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof no?y:y.substr(0,1)==="("?av(y.substr(1,y.length-2)):av(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof no?av(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof no?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof no?m:A6(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof no?y:y.substr(0,1)==="("?av(y.substr(1,y.length-2)):av(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof no?av(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof no?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,1)},set:function(y){y?this.Ff=ti(this.Ff,1):this.Ff=ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,2)},set:function(y){y?this.Ff=ti(this.Ff,2):this.Ff=ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,3)},set:function(y){y?this.Ff=ti(this.Ff,3):this.Ff=ri(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Ec(Af,AA);var ub=function(){Af.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lue(t,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u}(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,18)},set:function(r){r?this.Ff=ti(this.Ff,18):this.Ff=ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ti(this.Ff,19):this.Ff=ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,20)},set:function(r){r?(this.Ff=ti(this.Ff,20),t.sort()):this.Ff=ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,22)},set:function(r){r?this.Ff=ti(this.Ff,22):this.Ff=ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,23)},set:function(r){r?this.Ff=ti(this.Ff,23):this.Ff=ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,27)},set:function(r){r?this.Ff=ti(this.Ff,27):this.Ff=ri(this.Ff,27)}}),this.hasAppearanceStream=!1};Ec(ub,Af);var db=function(){ub.call(this),this.fontName="helvetica",this.combo=!1};Ec(db,ub);var fb=function(){db.call(this),this.combo=!0};Ec(fb,db);var l5=function(){fb.call(this),this.edit=!0};Ec(l5,fb);var no=function(){Af.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,15)},set:function(r){r?this.Ff=ti(this.Ff,15):this.Ff=ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,16)},set:function(r){r?this.Ff=ti(this.Ff,16):this.Ff=ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,17)},set:function(r){r?this.Ff=ti(this.Ff,17):this.Ff=ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,26)},set:function(r){r?this.Ff=ti(this.Ff,26):this.Ff=ri(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+gx(r(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){bn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ec(no,Af);var c5=function(){no.call(this),this.pushButton=!0};Ec(c5,no);var Ab=function(){no.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ec(Ab,no);var fS=function(){var e,t;Af.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+gx(n(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){bn(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ec(fS,Af),Ab.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ab.prototype.createOption=function(e){var t=new fS;return t.Parent=this,t.optionName=e,this.Kids.push(t),vJe.call(this.scope,t),t};var u5=function(){no.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mr.CheckBox.createAppearanceStream()};Ec(u5,no);var _g=function(){Af.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,13)},set:function(t){t?this.Ff=ti(this.Ff,13):this.Ff=ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,21)},set:function(t){t?this.Ff=ti(this.Ff,21):this.Ff=ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,23)},set:function(t){t?this.Ff=ti(this.Ff,23):this.Ff=ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,24)},set:function(t){t?this.Ff=ti(this.Ff,24):this.Ff=ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,25)},set:function(t){t?this.Ff=ti(this.Ff,25):this.Ff=ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,26)},set:function(t){t?this.Ff=ti(this.Ff,26):this.Ff=ri(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ec(_g,Af);var d5=function(){_g.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ei(this.Ff,14)},set:function(e){e?this.Ff=ti(this.Ff,14):this.Ff=ri(this.Ff,14)}}),this.password=!0};Ec(d5,_g);var mr={CheckBox:{createAppearanceStream:function(){return{N:{On:mr.CheckBox.YesNormal},D:{On:mr.CheckBox.YesPushDown,Off:mr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Jf(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=SD(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Wr(mr.internal.getWidth(e))+" "+Wr(mr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Wr(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Jf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),n=[],i=mr.internal.getHeight(e),o=mr.internal.getWidth(e),l=SD(e,e.caption);return n.push("1 g"),n.push("0 0 "+Wr(o)+" "+Wr(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Wr(o-1)+" "+Wr(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Wr(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Jf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(mr.internal.getWidth(e))+" "+Wr(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Circle.YesNormal,t.D[e]=mr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Jf(e);t.scope=e.scope;var r=[],a=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=mr.internal.Bezier_C,i=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+nm(mr.internal.getWidth(e)/2)+" "+nm(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Jf(e);t.scope=e.scope;var r=[],a=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5)),o=Number((a*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nm(mr.internal.getWidth(e)/2)+" "+nm(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+nm(mr.internal.getWidth(e)/2)+" "+nm(mr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Jf(e);t.scope=e.scope;var r=[],a=mr.internal.getWidth(e)<=mr.internal.getHeight(e)?mr.internal.getWidth(e)/4:mr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nm(mr.internal.getWidth(e)/2)+" "+nm(mr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:mr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=mr.RadioButton.Cross.YesNormal,t.D[e]=mr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Jf(e);t.scope=e.scope;var r=[],a=mr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Wr(mr.internal.getWidth(e)-2)+" "+Wr(mr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Wr(a.x1.x)+" "+Wr(a.x1.y)+" m"),r.push(Wr(a.x2.x)+" "+Wr(a.x2.y)+" l"),r.push(Wr(a.x4.x)+" "+Wr(a.x4.y)+" m"),r.push(Wr(a.x3.x)+" "+Wr(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Jf(e);t.scope=e.scope;var r=mr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Wr(mr.internal.getWidth(e))+" "+Wr(mr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Wr(mr.internal.getWidth(e)-2)+" "+Wr(mr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Wr(r.x1.x)+" "+Wr(r.x1.y)+" m"),a.push(Wr(r.x2.x)+" "+Wr(r.x2.y)+" l"),a.push(Wr(r.x4.x)+" "+Wr(r.x4.y)+" m"),a.push(Wr(r.x3.x)+" "+Wr(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Jf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(mr.internal.getWidth(e))+" "+Wr(mr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};mr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=mr.internal.getWidth(e),r=mr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},mr.internal.getWidth=function(e){var t=0;return bn(e)==="object"&&(t=SW(e.Rect[2])),t},mr.internal.getHeight=function(e){var t=0;return bn(e)==="object"&&(t=SW(e.Rect[3])),t};var vJe=Ss.addField=function(e){if(xJe(this,e),!(e instanceof Af))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ss.AcroFormChoiceField=ub,Ss.AcroFormListBox=db,Ss.AcroFormComboBox=fb,Ss.AcroFormEditBox=l5,Ss.AcroFormButton=no,Ss.AcroFormPushButton=c5,Ss.AcroFormRadioButton=Ab,Ss.AcroFormCheckBox=u5,Ss.AcroFormTextField=_g,Ss.AcroFormPasswordField=d5,Ss.AcroFormAppearance=mr,Ss.AcroForm={ChoiceField:ub,ListBox:db,ComboBox:fb,EditBox:l5,Button:no,PushButton:c5,RadioButton:Ab,CheckBox:u5,TextField:_g,PasswordField:d5,Appearance:mr},gr.AcroForm={ChoiceField:ub,ListBox:db,ComboBox:fb,EditBox:l5,Button:no,PushButton:c5,RadioButton:Ab,CheckBox:u5,TextField:_g,PasswordField:d5,Appearance:mr};gr.AcroForm;function due(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(D,k){var R,U,H,Q,V,G=t;if((k=k||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(O(D))for(V in r)for(H=r[V],R=0;R<H.length;R+=1){for(Q=!0,U=0;U<H[R].length;U+=1)if(H[R][U]!==void 0&&H[R][U]!==D[U]){Q=!1;break}if(Q===!0){G=V;break}}else for(V in r)for(H=r[V],R=0;R<H.length;R+=1){for(Q=!0,U=0;U<H[R].length;U+=1)if(H[R][U]!==void 0&&H[R][U]!==D.charCodeAt(U)){Q=!1;break}if(Q===!0){G=V;break}}return G===t&&k!==t&&(G=k),G},n=function D(k){for(var R=this.internal.write,U=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:k.width}),Q.push({key:"Height",value:k.height}),k.colorSpace===v.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===v.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var V="",G=0,J=k.transparency.length;G<J;G++)V+=k.transparency[G]+" "+k.transparency[G]+" ";Q.push({key:"Mask",value:"["+V+"]"})}k.sMask!==void 0&&Q.push({key:"SMask",value:k.objectId+1+" 0 R"});var W=k.filter!==void 0?["/"+k.filter]:void 0;if(U({data:k.data,additionalKeyValues:Q,alreadyAppliedFilters:W,objectId:k.objectId}),R("endobj"),"sMask"in k&&k.sMask!==void 0){var Z="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,M={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:Z,data:k.sMask};"filter"in k&&(M.filter=k.filter),D.call(this,M)}if(k.colorSpace===v.INDEXED){var F=this.internal.newObject();U({data:S(new Uint8Array(k.palette)),objectId:F}),R("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var k in D)n.call(this,D[k])},o=function(){var D,k=this.internal.collections.addImage_images,R=this.internal.write;for(var U in k)R("/I"+(D=k[U]).index,D.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var D=this.internal.collections.addImage_images;return l.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return bn(D)==="object"&&D.nodeType===1},h=function(D,k){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var R=""+D.getAttribute("src");if(R.indexOf("data:image/")===0)return lw(unescape(R).split("base64,").pop());var U=e.loadFile(R,!0);if(U!==void 0)return U}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var H;switch(k){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;case"JPEG":case"JPG":default:H="image/jpeg"}return lw(D.toDataURL(H,1).split("base64,").pop())}},m=function(D){var k=this.internal.collections.addImage_images;if(k){for(var R in k)if(D===k[R].alias)return k[R]}},g=function(D,k,R){return D||k||(D=-96,k=-96),D<0&&(D=-1*R.width*72/D/this.internal.scaleFactor),k<0&&(k=-1*R.height*72/k/this.internal.scaleFactor),D===0&&(D=k*R.width/R.height),k===0&&(k=D*R.height/R.width),[D,k]},x=function(D,k,R,U,H,Q){var V=g.call(this,R,U,H),G=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,W=c.call(this);if(R=V[0],U=V[1],W[H.index]=H,Q){Q*=Math.PI/180;var Z=Math.cos(Q),M=Math.sin(Q),F=function(Y){return Y.toFixed(4)},X=[F(Z),F(M),F(-1*M),F(Z),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,G(D),J(k+U),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([G(R),"0","0",G(U),"0","0","cm"].join(" "))):this.internal.write([G(R),"0","0",G(U),G(D),J(k+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(D){var k,R,U=0;if(typeof D=="string")for(R=D.length,k=0;k<R;k++)U=(U<<5)-U+D.charCodeAt(k),U|=0;else if(O(D))for(R=D.byteLength/2,k=0;k<R;k++)U=(U<<5)-U+D[k],U|=0;return U},C=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var k=!0;return D.length===0&&(k=!1),D.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(k=!1),k},T=e.__addimage__.extractImageFromDataUrl=function(D){var k=(D=D||"").split("base64,"),R=null;if(k.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(U)&&(R={mimeType:U[1],charset:U[2],data:k[1]})}return R},_=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return _()&&D instanceof ArrayBuffer};var O=e.__addimage__.isArrayBufferView=function(D){return _()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},j=e.__addimage__.binaryStringToUint8Array=function(D){for(var k=D.length,R=new Uint8Array(k),U=0;U<k;U++)R[U]=D.charCodeAt(U);return R},S=e.__addimage__.arrayBufferToBinaryString=function(D){for(var k="",R=O(D)?D:new Uint8Array(D),U=0;U<R.length;U+=8192)k+=String.fromCharCode.apply(null,R.subarray(U,U+8192));return k};e.addImage=function(){var D,k,R,U,H,Q,V,G,J;if(typeof arguments[1]=="number"?(k=t,R=arguments[1],U=arguments[2],H=arguments[3],Q=arguments[4],V=arguments[5],G=arguments[6],J=arguments[7]):(k=arguments[1],R=arguments[2],U=arguments[3],H=arguments[4],Q=arguments[5],V=arguments[6],G=arguments[7],J=arguments[8]),bn(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var W=D;D=W.imageData,k=W.format||k||t,R=W.x||R||0,U=W.y||U||0,H=W.w||W.width||H,Q=W.h||W.height||Q,V=W.alias||V,G=W.compression||G,J=W.rotation||W.angle||J}var Z=this.internal.getFilters();if(G===void 0&&Z.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(R)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=B.call(this,D,k,V,G);return x.call(this,R,U,H,Q,M,J),this};var B=function(D,k,R,U){var H,Q,V;if(typeof D=="string"&&a(D)===t){D=unescape(D);var G=L(D,!1);(G!==""||(G=e.loadFile(D,!0))!==void 0)&&(D=G)}if(f(D)&&(D=h(D,k)),k=a(D,k),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((V=R)==null||V.length===0)&&(R=function(J){return typeof J=="string"||O(J)?N(J):O(J.data)?N(J.data):null}(D)),(H=m.call(this,R))||(_()&&(D instanceof Uint8Array||k==="RGBA"||(Q=D,D=j(D))),H=this["process"+k.toUpperCase()](D,u.call(this),R,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in e.image_compression?J:y.NONE}(U),Q)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},L=e.__addimage__.convertBase64ToBinaryString=function(D,k){var R;k=typeof k!="boolean"||k;var U,H="";if(typeof D=="string"){U=(R=T(D))!==null?R.data:D;try{H=lw(U)}catch(Q){if(k)throw C(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};e.getImageProperties=function(D){var k,R,U="";if(f(D)&&(D=h(D)),typeof D=="string"&&a(D)===t&&((U=L(D,!1))===""&&(U=e.loadFile(D)||""),D=U),R=a(D),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!_()||D instanceof Uint8Array||(D=j(D)),!(k=this["process"+R.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=R,k}})(gr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};gr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((a=u[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){a=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),N=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(y(a.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(y(N))+") >>",x.content=i;var C=x.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+C,a.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var T=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+m(g(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var _=this.annotations._nameMap[a.options.name];a.options.pageNumber=_.page,a.options.top=_.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var O=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+O+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,n,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(a),w:c(r+n),h:u(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,n,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,a,n,i),n+=.2*u,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,n-u,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(gr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&n.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,N="",C=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(C++,typeof(y=y[x.charCodeAt(v)])=="number"&&(N+=String.fromCharCode(y),y=r,C=0),v===x.length-1&&(y=r,N+=x.charAt(v-(C-1)),v-=C-1,C=0)):(y=r,N+=x.charAt(v-C),v-=C,C=0);return N};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&a[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?i(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,N=0,C="",T="",_="",O=(x=x||"").split("\\s+"),j=[];for(v=0;v<O.length;v+=1){for(j.push(""),y=0;y<O[v].length;y+=1)C=O[v][y],T=O[v][y-1],_=O[v][y+1],o(C)?(N=h(C,T,_),j[v]+=N!==-1?String.fromCharCode(t[C.charCodeAt(0)][N]):C):j[v]+=C;j[v]=f(j[v])}return j.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var N=0;for(y=[],N=0;N<v.length;N+=1)Array.isArray(v[N])?y.push([m(v[N][0]),v[N][1],v[N][2]]):y.push([m(v[N])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(gr.API),gr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(gr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){a.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,T){return C.concat(v.splitTextToSize(T,y))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(x=this.getStringUnitWidth(c[N],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(a.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],N=[],C=[],T={},_={},O=[],j=[],S=(h=h||{}).autoSize||!1,B=h.printHeaders!==!1,L=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),k=typeof h.padding=="number"?h.padding:3,R=h.headerBackgroundColor||"#c8c8c8",U=h.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=U,this.setFontSize(L),f==null)N=y=Object.keys(d[0]),C=y.map(function(){return"left"});else if(Array.isArray(f)&&bn(f[0])==="object")for(y=f.map(function(W){return W.name}),N=f.map(function(W){return W.prompt||W.name||""}),C=f.map(function(W){return W.align||"left"}),m=0;m<f.length;m+=1)_[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(N=y=f,C=y.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(T[v=y[m]]=d.map(function(W){return W[v]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=T[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)O.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[v]=Math.max.apply(null,O)+k+k,O=[]}if(B){var H={};for(m=0;m<y.length;m+=1)H[y[m]]={},H[y[m]].text=N[m],H[y[m]].align=C[m];var Q=l.call(this,H,_);j=y.map(function(W){return new i(c,u,_[W],Q,H[W].text,void 0,H[W].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var V=f.reduce(function(W,Z){return W[Z.name]=Z.align,W},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var G=l.call(this,d[m],_);for(x=0;x<y.length;x+=1){var J=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:J},this),o.call(this,new i(c,u,_[y[x]],G,J,m+2,V[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(gr.API);var fue={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Aue=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_D=due(Aue),hue=[100,200,300,400,500,600,700,800,900],bJe=due(hue);function BD(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return fue[i=i||"normal"]?i:"normal"}(e.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),n=function(i){return typeof _D[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,r,a].join(" ")}}}function _W(e,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(e[t[n]])return e[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(e[t[n]])return e[t[n]]}var yJe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},BW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function TW(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function wJe(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},yJe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(n[(i=BD(t[l])).family]&&(i.family=n[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+TW(i)+"' and default family '"+a+"'.");if(o=function(c,u){if(u[c])return u[c];var d=_D[c],f=d<=_D.normal?-1:1,h=_W(u,Aue,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(i.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=fue[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=bJe[c],f=_W(u,hue,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+TW(i)+"'.");return o}function IW(e){return e.trimLeft()}function NJe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function CJe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var oj,OW,FW,h6=["times"];(function(e){var t,r,a,n,i,o,l,c,u,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=M;Object.defineProperty(this,"pdf",{get:function(){return F}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Ce){X=!!Ce}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(Ce){Y=!!Ce}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Ce){isNaN(Ce)||(ae=Ce)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Ce){isNaN(Ce)||(le=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ce){var de;typeof Ce=="number"?de=[Ce,Ce,Ce,Ce]:((de=new Array(4))[0]=Ce[0],de[1]=Ce.length>=2?Ce[1]:de[0],de[2]=Ce.length>=3?Ce[2]:de[0],de[3]=Ce.length>=4?Ce[3]:de[1]),u.margin=de}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Ce){ie=Ce}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(Ce){ne=Ce}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(Ce){oe=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ce){Ce instanceof d&&(u=Ce)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ce){u.path=Ce}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Ce){we=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var de;de=h(Ce),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var de=h(Ce);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var K=null;function Ee(Ce,de){if(K===null){var xe=function(he){var ye=[];return Object.keys(he).forEach(function(ce){he[ce].forEach(function(Ae){var Ne=null;switch(Ae){case"bold":Ne={family:ce,weight:"bold"};break;case"italic":Ne={family:ce,style:"italic"};break;case"bolditalic":Ne={family:ce,weight:"bold",style:"italic"};break;case"":case"normal":Ne={family:ce}}Ne!==null&&(Ne.ref={name:ce,style:Ae},ye.push(Ne))})}),ye}(Ce.getFontList());K=function(he){for(var ye={},ce=0;ce<he.length;++ce){var Ae=BD(he[ce]),Ne=Ae.family,Pe=Ae.stretch,Qe=Ae.style,$e=Ae.weight;ye[Ne]=ye[Ne]||{},ye[Ne][Pe]=ye[Ne][Pe]||{},ye[Ne][Pe][Qe]=ye[Ne][Pe][Qe]||{},ye[Ne][Pe][Qe][$e]=Ae}return ye}(xe.concat(de))}return K}var _e=null;Object.defineProperty(this,"fontFaces",{get:function(){return _e},set:function(Ce){K=null,_e=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var de;if(this.ctx.font=Ce,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var xe=de[1],he=(de[2],de[3]),ye=de[4],ce=(de[5],de[6]),Ae=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(Ae==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:Ae==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var Ne=function(nt){var bt,ut,ze=[],Tt=nt.trim();if(Tt==="")return h6;if(Tt in BW)return[BW[Tt]];for(;Tt!=="";){switch(ut=null,bt=(Tt=IW(Tt)).charAt(0)){case'"':case"'":ut=NJe(Tt.substring(1),bt);break;default:ut=CJe(Tt)}if(ut===null||(ze.push(ut[0]),(Tt=IW(ut[1]))!==""&&Tt.charAt(0)!==","))return h6;Tt=Tt.replace(/^,/,"")}return ze}(ce);if(this.fontFaces){var Pe=wJe(Ee(this.pdf,this.fontFaces),Ne.map(function(nt){return{family:nt,stretch:"normal",weight:he,style:xe}}));this.pdf.setFont(Pe.ref.name,Pe.ref.style)}else{var Qe="";(he==="bold"||parseInt(he,10)>=700||xe==="bold")&&(Qe="bold"),xe==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var $e="",et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<Ne.length;Ke++){if(this.pdf.internal.getFont(Ne[Ke],Qe,{noFallback:!0,disableWarning:!0})!==void 0){$e=Ne[Ke];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Ne[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$e=Ne[Ke],Qe="bold";else if(this.pdf.internal.getFont(Ne[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$e=Ne[Ke],Qe="normal";break}}if($e===""){for(var Ge=0;Ge<Ne.length;Ge++)if(et[Ne[Ge]]){$e=et[Ne[Ge]];break}}$e=$e===""?"Times":$e,this.pdf.setFont($e,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};f.prototype.setLineDash=function(M){this.lineDash=M},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){T.call(this,"fill",!1)},f.prototype.stroke=function(){T.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(M,F){if(isNaN(M)||isNaN(F))throw Tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(M,F));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(M,F)},f.prototype.closePath=function(){var M=new o(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&bn(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){M=new o(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},f.prototype.lineTo=function(M,F){if(isNaN(M)||isNaN(F))throw Tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(M,F));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},f.prototype.quadraticCurveTo=function(M,F,X,Y){if(isNaN(X)||isNaN(Y)||isNaN(M)||isNaN(F))throw Tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new o(X,Y)),le=this.ctx.transform.applyToPoint(new o(M,F));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},f.prototype.bezierCurveTo=function(M,F,X,Y,ae,le){if(isNaN(ae)||isNaN(le)||isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y))throw Tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(ae,le)),ne=this.ctx.transform.applyToPoint(new o(M,F)),oe=this.ctx.transform.applyToPoint(new o(X,Y));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:oe.x,y2:oe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},f.prototype.arc=function(M,F,X,Y,ae,le){if(isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y)||isNaN(ae))throw Tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(M,F));M=ie.x,F=ie.y;var ne=this.ctx.transform.applyToPoint(new o(0,X)),oe=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(ne.x-oe.x,2)+Math.pow(ne.y-oe.y,2))}Math.abs(ae-Y)>=2*Math.PI&&(Y=0,ae=2*Math.PI),this.path.push({type:"arc",x:M,y:F,radius:X,startAngle:Y,endAngle:ae,counterclockwise:le})},f.prototype.arcTo=function(M,F,X,Y,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(M,F,X,Y){if(isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y))throw Tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,F),this.lineTo(M+X,F),this.lineTo(M+X,F+Y),this.lineTo(M,F+Y),this.lineTo(M,F),this.lineTo(M+X,F),this.lineTo(M,F)},f.prototype.fillRect=function(M,F,X,Y){if(isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y))throw Tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,F,X,Y),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(M,F,X,Y){if(isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y))throw Tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(M,F,X,Y),this.stroke())},f.prototype.clearRect=function(M,F,X,Y){if(isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y))throw Tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,F,X,Y))},f.prototype.save=function(M){M=typeof M!="boolean"||M;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},f.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(F),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(M){var F,X,Y,ae;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))F=0,X=0,Y=0,ae=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(le!==null)F=parseInt(le[1]),X=parseInt(le[2]),Y=parseInt(le[3]),ae=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)F=parseInt(le[1]),X=parseInt(le[2]),Y=parseInt(le[3]),ae=parseFloat(le[4]);else{if(ae=1,typeof M=="string"&&M.charAt(0)!=="#"){var ie=new sue(M);M=ie.ok?ie.toHex():"#000000"}M.length===4?(F=M.substring(1,2),F+=F,X=M.substring(2,3),X+=X,Y=M.substring(3,4),Y+=Y):(F=M.substring(1,3),X=M.substring(3,5),Y=M.substring(5,7)),F=parseInt(F,16),X=parseInt(X,16),Y=parseInt(Y,16)}}return{r:F,g:X,b:Y,a:ae,style:M}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(M,F,X,Y){if(isNaN(F)||isNaN(X)||typeof M!="string")throw Tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!m.call(this)){var ae=G(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;k.call(this,{text:M,x:F,y:X,scale:le,angle:ae,align:this.textAlign,maxWidth:Y})}},f.prototype.strokeText=function(M,F,X,Y){if(isNaN(F)||isNaN(X)||typeof M!="string")throw Tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){Y=isNaN(Y)?void 0:Y;var ae=G(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;k.call(this,{text:M,x:F,y:X,scale:le,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Y})}},f.prototype.measureText=function(M){if(typeof M!="string")throw Tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,X=this.pdf.internal.scaleFactor,Y=F.internal.getFontSize(),ae=F.getStringUnitWidth(M)*Y/F.internal.scaleFactor,le=function(ie){var ne=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new le({width:ae*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(M,F){if(isNaN(M)||isNaN(F))throw Tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(M,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(M){if(isNaN(M))throw Tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(M,F){if(isNaN(M)||isNaN(F))throw Tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,M,F);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(M,F,X,Y,ae,le){if(isNaN(M)||isNaN(F)||isNaN(X)||isNaN(Y)||isNaN(ae)||isNaN(le))throw Tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(M,F,X,Y,ae,le);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(M,F,X,Y,ae,le){M=isNaN(M)?1:M,F=isNaN(F)?0:F,X=isNaN(X)?0:X,Y=isNaN(Y)?1:Y,ae=isNaN(ae)?0:ae,le=isNaN(le)?0:le,this.ctx.transform=new c(M,F,X,Y,ae,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(M,F,X,Y,ae,le,ie,ne,oe){var we=this.pdf.getImageProperties(M),K=1,Ee=1,_e=1,Ce=1;Y!==void 0&&ne!==void 0&&(_e=ne/Y,Ce=oe/ae,K=we.width/Y*ne/Y,Ee=we.height/ae*oe/ae),le===void 0&&(le=F,ie=X,F=0,X=0),Y!==void 0&&ne===void 0&&(ne=Y,oe=ae),Y===void 0&&ne===void 0&&(ne=we.width,oe=we.height);for(var de,xe=this.ctx.transform.decompose(),he=G(xe.rotate.shx),ye=new c,ce=(ye=(ye=(ye=ye.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale)).applyToRectangle(new l(le-F*_e,ie-X*Ce,Y*K,ae*Ee)),Ae=v.call(this,ce),Ne=[],Pe=0;Pe<Ae.length;Pe+=1)Ne.indexOf(Ae[Pe])===-1&&Ne.push(Ae[Pe]);if(C(Ne),this.autoPaging)for(var Qe=Ne[0],$e=Ne[Ne.length-1],et=Qe;et<$e+1;et++){this.pdf.setPage(et);var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=et===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=et===1?0:nt+(et-2)*bt;if(this.ctx.clip_path.length!==0){var ze=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(de,this.posX+this.margin[3],-ut+Ge+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=ze}var Tt=JSON.parse(JSON.stringify(ce));Tt=N([Tt],this.posX+this.margin[3],-ut+Ge+this.ctx.prevPageLastElemOffset)[0];var ir=(et>Qe||et<$e)&&x.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,bt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,he),ir&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",ce.x,ce.y,ce.w,ce.h,null,null,he)};var v=function(M,F,X){var Y=[];F=F||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Y.push(Math.floor((M.y+ae)/X)+1);break;case"arc":Y.push(Math.floor((M.y+ae-M.radius)/X)+1),Y.push(Math.floor((M.y+ae+M.radius)/X)+1);break;case"qct":var le=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Y.push(Math.floor((le.y+ae)/X)+1),Y.push(Math.floor((le.y+le.h+ae)/X)+1);break;case"bct":var ie=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Y.push(Math.floor((ie.y+ae)/X)+1),Y.push(Math.floor((ie.y+ie.h+ae)/X)+1);break;case"rect":Y.push(Math.floor((M.y+ae)/X)+1),Y.push(Math.floor((M.y+M.h+ae)/X)+1)}for(var ne=0;ne<Y.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ne];)y.call(this);return Y},y=function(){var M=this.fillStyle,F=this.strokeStyle,X=this.font,Y=this.lineCap,ae=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=F,this.font=X,this.lineCap=Y,this.lineWidth=ae,this.lineJoin=le},N=function(M,F,X){for(var Y=0;Y<M.length;Y++)switch(M[Y].type){case"bct":M[Y].x2+=F,M[Y].y2+=X;case"qct":M[Y].x1+=F,M[Y].y1+=X;case"mt":case"lt":case"arc":default:M[Y].x+=F,M[Y].y+=X}return M},C=function(M){return M.sort(function(F,X){return F-X})},T=function(M,F){for(var X,Y,ae=this.fillStyle,le=this.strokeStyle,ie=this.lineCap,ne=this.lineWidth,oe=Math.abs(ne*this.ctx.transform.scaleX),we=this.lineJoin,K=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),_e=[],Ce=0;Ce<Ee.length;Ce++)if(Ee[Ce].x!==void 0)for(var de=v.call(this,Ee[Ce]),xe=0;xe<de.length;xe+=1)_e.indexOf(de[xe])===-1&&_e.push(de[xe]);for(var he=0;he<_e.length;he++)for(;this.pdf.internal.getNumberOfPages()<_e[he];)y.call(this);if(C(_e),this.autoPaging)for(var ye=_e[0],ce=_e[_e.length-1],Ae=ye;Ae<ce+1;Ae++){this.pdf.setPage(Ae),this.fillStyle=ae,this.strokeStyle=le,this.lineCap=ie,this.lineWidth=oe,this.lineJoin=we;var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=Ae===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Ae===1?0:Qe+(Ae-2)*$e;if(this.ctx.clip_path.length!==0){var Ke=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(X,this.posX+this.margin[3],-et+Pe+this.ctx.prevPageLastElemOffset),_.call(this,M,!0),this.path=Ke}if(Y=JSON.parse(JSON.stringify(K)),this.path=N(Y,this.posX+this.margin[3],-et+Pe+this.ctx.prevPageLastElemOffset),F===!1||Ae===0){var Ge=(Ae>ye||Ae<ce)&&x.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,$e,null).clip().discardPath()),_.call(this,M,F),Ge&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=oe,_.call(this,M,F),this.lineWidth=ne;this.path=K},_=function(M,F){if((M!=="stroke"||F||!g.call(this))&&(M==="stroke"||F||!m.call(this))){for(var X,Y,ae=[],le=this.path,ie=0;ie<le.length;ie++){var ne=le[ie];switch(ne.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ne,deltas:[],abs:[]});break;case"lt":var oe=ae.length;if(le[ie-1]&&!isNaN(le[ie-1].x)&&(X=[ne.x-le[ie-1].x,ne.y-le[ie-1].y],oe>0)){for(;oe>=0;oe--)if(ae[oe-1].close!==!0&&ae[oe-1].begin!==!0){ae[oe-1].deltas.push(X),ae[oe-1].abs.push(ne);break}}break;case"bct":X=[ne.x1-le[ie-1].x,ne.y1-le[ie-1].y,ne.x2-le[ie-1].x,ne.y2-le[ie-1].y,ne.x-le[ie-1].x,ne.y-le[ie-1].y],ae[ae.length-1].deltas.push(X);break;case"qct":var we=le[ie-1].x+2/3*(ne.x1-le[ie-1].x),K=le[ie-1].y+2/3*(ne.y1-le[ie-1].y),Ee=ne.x+2/3*(ne.x1-ne.x),_e=ne.y+2/3*(ne.y1-ne.y),Ce=ne.x,de=ne.y;X=[we-le[ie-1].x,K-le[ie-1].y,Ee-le[ie-1].x,_e-le[ie-1].y,Ce-le[ie-1].x,de-le[ie-1].y],ae[ae.length-1].deltas.push(X);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ne)}}Y=F?null:M==="stroke"?"stroke":"fill";for(var xe=!1,he=0;he<ae.length;he++)if(ae[he].arc)for(var ye=ae[he].abs,ce=0;ce<ye.length;ce++){var Ae=ye[ce];Ae.type==="arc"?S.call(this,Ae.x,Ae.y,Ae.radius,Ae.startAngle,Ae.endAngle,Ae.counterclockwise,void 0,F,!xe):R.call(this,Ae.x,Ae.y),xe=!0}else if(ae[he].close===!0)this.pdf.internal.out("h"),xe=!1;else if(ae[he].begin!==!0){var Ne=ae[he].start.x,Pe=ae[he].start.y;U.call(this,ae[he].deltas,Ne,Pe),xe=!0}Y&&B.call(this,Y),F&&L.call(this)}},O=function(M){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-X;case"top":return M+F-X;case"hanging":return M+F-2*X;case"middle":return M+F/2-X;case"ideographic":return M;case"alphabetic":default:return M}},j=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(F,X){this.colorStops.push([F,X])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(M,F,X,Y,ae,le,ie,ne,oe){for(var we=Q.call(this,X,Y,ae,le),K=0;K<we.length;K++){var Ee=we[K];K===0&&(oe?D.call(this,Ee.x1+M,Ee.y1+F):R.call(this,Ee.x1+M,Ee.y1+F)),H.call(this,M,F,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}ne?L.call(this):B.call(this,ie)},B=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(M,F){this.pdf.internal.out(r(M)+" "+a(F)+" m")},k=function(M){var F;switch(M.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var X=this.pdf.getTextDimensions(M.text),Y=O.call(this,M.y),ae=j.call(this,Y)-X.h,le=this.ctx.transform.applyToPoint(new o(M.x,Y)),ie=this.ctx.transform.decompose(),ne=new c;ne=(ne=(ne=ne.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var oe,we,K,Ee=this.ctx.transform.applyToRectangle(new l(M.x,Y,X.w,X.h)),_e=ne.applyToRectangle(new l(M.x,ae,X.w,X.h)),Ce=v.call(this,_e),de=[],xe=0;xe<Ce.length;xe+=1)de.indexOf(Ce[xe])===-1&&de.push(Ce[xe]);if(C(de),this.autoPaging)for(var he=de[0],ye=de[de.length-1],ce=he;ce<ye+1;ce++){this.pdf.setPage(ce);var Ae=ce===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[2],Qe=Pe-this.margin[0],$e=this.pdf.internal.pageSize.width-this.margin[1],et=$e-this.margin[3],Ke=ce===1?0:Ne+(ce-2)*Qe;if(this.ctx.clip_path.length!==0){var Ge=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(oe,this.posX+this.margin[3],-1*Ke+Ae),_.call(this,"fill",!0),this.path=Ge}var nt=N([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Ke+Ae+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*M.scale),K=this.lineWidth,this.lineWidth=K*M.scale);var bt=this.autoPaging!=="text";if(bt||nt.y+nt.h<=Pe){if(bt||nt.y>=Ae&&nt.x<=$e){var ut=bt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||$e-nt.x)[0],ze=N([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-Ke+Ae+this.ctx.prevPageLastElemOffset)[0],Tt=bt&&(ce>he||ce<ye)&&x.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,Qe,null).clip().discardPath()),this.pdf.text(ut,ze.x,ze.y,{angle:M.angle,align:F,renderingMode:M.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else nt.y<Pe&&(this.ctx.prevPageLastElemOffset+=Pe-nt.y);M.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=K)}else M.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*M.scale),K=this.lineWidth,this.lineWidth=K*M.scale),this.pdf.text(M.text,le.x+this.posX,le.y+this.posY,{angle:M.angle,align:F,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=K)},R=function(M,F,X,Y){X=X||0,Y=Y||0,this.pdf.internal.out(r(M+X)+" "+a(F+Y)+" l")},U=function(M,F,X){return this.pdf.lines(M,F,X,null,null)},H=function(M,F,X,Y,ae,le,ie,ne){this.pdf.internal.out([t(n(X+M)),t(i(Y+F)),t(n(ae+M)),t(i(le+F)),t(n(ie+M)),t(i(ne+F)),"c"].join(" "))},Q=function(M,F,X,Y){for(var ae=2*Math.PI,le=Math.PI/2;F>X;)F-=ae;var ie=Math.abs(X-F);ie<ae&&Y&&(ie=ae-ie);for(var ne=[],oe=Y?-1:1,we=F;ie>1e-5;){var K=we+oe*Math.min(ie,le);ne.push(V.call(this,M,we,K)),ie-=Math.abs(K-we),we=K}return ne},V=function(M,F,X){var Y=(X-F)/2,ae=M*Math.cos(Y),le=M*Math.sin(Y),ie=ae,ne=-le,oe=ie*ie+ne*ne,we=oe+ie*ae+ne*le,K=4/3*(Math.sqrt(2*oe*we)-we)/(ie*le-ne*ae),Ee=ie-K*ne,_e=ne+K*ie,Ce=Ee,de=-_e,xe=Y+F,he=Math.cos(xe),ye=Math.sin(xe);return{x1:M*Math.cos(F),y1:M*Math.sin(F),x2:Ee*he-_e*ye,y2:Ee*ye+_e*he,x3:Ce*he-de*ye,y3:Ce*ye+de*he,x4:M*Math.cos(X),y4:M*Math.sin(X)}},G=function(M){return 180*M/Math.PI},J=function(M,F,X,Y,ae,le){var ie=M+.5*(X-M),ne=F+.5*(Y-F),oe=ae+.5*(X-ae),we=le+.5*(Y-le),K=Math.min(M,ae,ie,oe),Ee=Math.max(M,ae,ie,oe),_e=Math.min(F,le,ne,we),Ce=Math.max(F,le,ne,we);return new l(K,_e,Ee-K,Ce-_e)},W=function(M,F,X,Y,ae,le,ie,ne){var oe,we,K,Ee,_e,Ce,de,xe,he,ye,ce,Ae,Ne,Pe,Qe=X-M,$e=Y-F,et=ae-X,Ke=le-Y,Ge=ie-ae,nt=ne-le;for(we=0;we<41;we++)he=(de=(K=M+(oe=we/40)*Qe)+oe*((_e=X+oe*et)-K))+oe*(_e+oe*(ae+oe*Ge-_e)-de),ye=(xe=(Ee=F+oe*$e)+oe*((Ce=Y+oe*Ke)-Ee))+oe*(Ce+oe*(le+oe*nt-Ce)-xe),we==0?(ce=he,Ae=ye,Ne=he,Pe=ye):(ce=Math.min(ce,he),Ae=Math.min(Ae,ye),Ne=Math.max(Ne,he),Pe=Math.max(Pe,ye));return new l(Math.round(ce),Math.round(Ae),Math.round(Ne-ce),Math.round(Pe-Ae))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,F,X=(M=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:F}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(gr.API),function(e){var t=function(i){var o,l,c,u,d,f,h,m,g,x;for(l=[],c=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(d=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var N=y;N>0;N--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(i[x](-2),i=i[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(i+=o="uuuuu"[x](i[h]%5||5))[h];d>u;u+=5)l=52200625*(i[g](u)-33)+614125*(i[g](u+1)-33)+7225*(i[g](u+2)-33)+85*(i[g](u+3)-33)+(i[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,N){for(var C=N;C>0;C--)y.pop()}(c,o[h]),f.fromCharCode.apply(f,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},n=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=CD(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=n(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(gr.API),function(e){e.loadFile=function(t,r,a){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(n,i,o)}catch{}return l}(t,r,a)},e.loadImageFile=e.loadFile}(gr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):ai(()=>Promise.resolve().then(()=>Npt),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):ai(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=bn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:n("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,gr.getPageSize=function(o,l,c){if(bn(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(BD):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(gr.API),gr.API.addJS=function(e){return FW=e,this.internal.events.subscribe("postPutResources",function(){oj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(oj+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+FW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){oj!==void 0&&OW!==void 0&&this.internal.out("/Names <</JavaScript "+oj+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,i){var o={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var u=0;u<a.children.length;u++)this.renderItems(a.children[u])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])}(gr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,n,i,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:a,alias:n}}return d}}(gr.API);var nv,lj,DW,PW,RW,EJe=function(){var e,t,r;function a(i){var o,l,c,u,d,f,h,m,g,x,v,y,N,C;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var T,_;for(_=[],T=0;T<4;++T)_.push(String.fromCharCode(this.data[this.pos++]));return _}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),i=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(N=0;0<=x?N<x:N>x;0<=x?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,N,C,T,_,O,j,S,B,L,D,k,R,U,H,Q,V,G,J,W=Math.ceil((u.width-f)/m),Z=Math.ceil((u.height-h)/g),M=u.width==W&&u.height==Z;for(k=o*W,L=M?l:new Uint8Array(k*Z),T=i.length,D=0,v=0;D<Z&&c<T;){switch(i[c++]){case 0:for(N=H=0;H<k;N=H+=1)L[v++]=i[c++];break;case 1:for(N=Q=0;Q<k;N=Q+=1)x=i[c++],C=N<o?0:L[v-o],L[v++]=(x+C)%256;break;case 2:for(N=V=0;V<k;N=V+=1)x=i[c++],y=(N-N%o)/o,R=D&&L[(D-1)*k+y*o+N%o],L[v++]=(R+x)%256;break;case 3:for(N=G=0;G<k;N=G+=1)x=i[c++],y=(N-N%o)/o,C=N<o?0:L[v-o],R=D&&L[(D-1)*k+y*o+N%o],L[v++]=(x+Math.floor((C+R)/2))%256;break;case 4:for(N=J=0;J<k;N=J+=1)x=i[c++],y=(N-N%o)/o,C=N<o?0:L[v-o],D===0?R=U=0:(R=L[(D-1)*k+y*o+N%o],U=y&&L[(D-1)*k+(y-1)*o+N%o]),_=C+R-U,O=Math.abs(_-C),S=Math.abs(_-R),B=Math.abs(_-U),j=O<=S&&O<=B?C:S<=B?R:U,L[v++]=(x+j)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var F=((h+D*g)*u.width+f)*o,X=D*k;for(N=0;N<W;N+=1){for(var Y=0;Y<o;Y+=1)l[F++]=L[X++];F+=(m-1)*o}}D++}}return i=aJe(i),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,u,d,f,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,i=0,o=f=0,h=l.length;f<h;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[i++])!=null?m:255;return u},a.prototype.copyToImageData=function(i,o){var l,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=i.data||i).length,f=x||o,d=h=0,c===1)for(;d<g;)m=x?4*o[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,h=m;else for(;d<g;)m=x?4*o[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,h=m},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var n=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),e=function(i){var o;if(n()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,u,d,f,h,m;if(this.animation){for(m=[],l=d=0,f=(h=this.animation.frames).length;d<f;l=++d)o=h[l],c=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(i,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,u,d,f,h=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(i,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(o,g.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jJe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,n=e[t++],i=n>>7,o=1<<(7&n)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=a;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,T=e[t++],_=T>>6&1,O=1<<(7&T)+1,j=l,S=c,B=!1;T>>7&&(B=!0,j=t,S=O,t+=3*O);var L=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:v,y,width:N,height:C,has_local_palette:B,palette_offset:j,palette_size:S,data_offset:L,data_length:t-L,transparent_index:h,interlaced:!!_,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,R){var U=this.frameInfo(k),H=U.width*U.height,Q=new Uint8Array(H);LW(e,U.data_offset,Q,H);var V=U.palette_offset,G=U.transparent_index;G===null&&(G=256);var J=U.width,W=r-J,Z=J,M=4*(U.y*r+U.x),F=4*((U.y+U.height)*r+U.x),X=M,Y=4*W;U.interlaced===!0&&(Y+=4*r*7);for(var ae=8,le=0,ie=Q.length;le<ie;++le){var ne=Q[le];if(Z===0&&(Z=J,(X+=Y)>=F&&(Y=4*W+4*r*(ae-1),X=M+(J+W)*(ae<<1),ae>>=1)),ne===G)X+=4;else{var oe=e[V+3*ne],we=e[V+3*ne+1],K=e[V+3*ne+2];R[X++]=K,R[X++]=we,R[X++]=oe,R[X++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(k,R){var U=this.frameInfo(k),H=U.width*U.height,Q=new Uint8Array(H);LW(e,U.data_offset,Q,H);var V=U.palette_offset,G=U.transparent_index;G===null&&(G=256);var J=U.width,W=r-J,Z=J,M=4*(U.y*r+U.x),F=4*((U.y+U.height)*r+U.x),X=M,Y=4*W;U.interlaced===!0&&(Y+=4*r*7);for(var ae=8,le=0,ie=Q.length;le<ie;++le){var ne=Q[le];if(Z===0&&(Z=J,(X+=Y)>=F&&(Y=4*W+4*r*(ae-1),X=M+(J+W)*(ae<<1),ae>>=1)),ne===G)X+=4;else{var oe=e[V+3*ne],we=e[V+3*ne+1],K=e[V+3*ne+2];R[X++]=oe,R[X++]=we,R[X++]=K,R[X++]=255}--Z}}}function LW(e,t,r,a){for(var n=e[t++],i=1<<n,o=i+1,l=o+1,c=n+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==i){if(v===o)break;for(var y=v<l?v:x,N=0,C=y;C>i;)C=g[C]>>8,++N;var T=C;if(h+N+(y!==v?1:0)>a)return void Tn.log("Warning, gif stream longer than expected.");r[h++]=T;var _=h+=N;for(y!==v&&(r[h++]=T),C=y;N--;)C=g[C],r[--_]=255&C,C>>=8;x!==null&&l<4096&&(g[l++]=x<<8|T,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=n+1))-1,x=null}return h!==a&&Tn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function m6(e){var t,r,a,n,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,N=new Array(64),C=new Array(64),T=new Array(64),_=new Array(256),O=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(M,F){for(var X=0,Y=0,ae=new Array,le=1;le<=16;le++){for(var ie=1;ie<=M[le];ie++)ae[F[Y]]=[],ae[F[Y]][0]=X,ae[F[Y]][1]=le,Y++,X++;X*=2}return ae}function V(M){for(var F=M[0],X=M[1]-1;X>=0;)F&1<<X&&(v|=1<<y),X--,--y<0&&(v==255?(G(255),G(0)):G(v),y=7,v=0)}function G(M){x.push(M)}function J(M){G(M>>8&255),G(255&M)}function W(M,F,X,Y,ae){for(var le,ie=ae[0],ne=ae[240],oe=function(ye,ce){var Ae,Ne,Pe,Qe,$e,et,Ke,Ge,nt,bt,ut=0;for(nt=0;nt<8;++nt){Ae=ye[ut],Ne=ye[ut+1],Pe=ye[ut+2],Qe=ye[ut+3],$e=ye[ut+4],et=ye[ut+5],Ke=ye[ut+6];var ze=Ae+(Ge=ye[ut+7]),Tt=Ae-Ge,ir=Ne+Ke,Kt=Ne-Ke,Cr=Pe+et,$r=Pe-et,br=Qe+$e,Sn=Qe-$e,Pr=ze+br,Ra=ze-br,Dn=ir+Cr,Rr=ir-Cr;ye[ut]=Pr+Dn,ye[ut+4]=Pr-Dn;var pr=.707106781*(Rr+Ra);ye[ut+2]=Ra+pr,ye[ut+6]=Ra-pr;var Jr=.382683433*((Pr=Sn+$r)-(Rr=Kt+Tt)),gs=.5411961*Pr+Jr,Za=1.306562965*Rr+Jr,Pn=.707106781*(Dn=$r+Kt),Us=Tt+Pn,er=Tt-Pn;ye[ut+5]=er+gs,ye[ut+3]=er-gs,ye[ut+1]=Us+Za,ye[ut+7]=Us-Za,ut+=8}for(ut=0,nt=0;nt<8;++nt){Ae=ye[ut],Ne=ye[ut+8],Pe=ye[ut+16],Qe=ye[ut+24],$e=ye[ut+32],et=ye[ut+40],Ke=ye[ut+48];var xa=Ae+(Ge=ye[ut+56]),la=Ae-Ge,Ia=Ne+Ke,Wa=Ne-Ke,en=Pe+et,je=Pe-et,Ue=Qe+$e,De=Qe-$e,Le=xa+Ue,ge=xa-Ue,me=Ia+en,Oe=Ia-en;ye[ut]=Le+me,ye[ut+32]=Le-me;var He=.707106781*(Oe+ge);ye[ut+16]=ge+He,ye[ut+48]=ge-He;var Re=.382683433*((Le=De+je)-(Oe=Wa+la)),We=.5411961*Le+Re,Ye=1.306562965*Oe+Re,wt=.707106781*(me=je+Wa),Nt=la+wt,zt=la-wt;ye[ut+40]=zt+We,ye[ut+24]=zt-We,ye[ut+8]=Nt+Ye,ye[ut+56]=Nt-Ye,ut++}for(nt=0;nt<64;++nt)bt=ye[nt]*ce[nt],m[nt]=bt>0?bt+.5|0:bt-.5|0;return m}(M,F),we=0;we<64;++we)g[j[we]]=oe[we];var K=g[0]-X;X=g[0],K==0?V(Y[0]):(V(Y[h[le=32767+K]]),V(f[le]));for(var Ee=63;Ee>0&&g[Ee]==0;)Ee--;if(Ee==0)return V(ie),X;for(var _e,Ce=1;Ce<=Ee;){for(var de=Ce;g[Ce]==0&&Ce<=Ee;)++Ce;var xe=Ce-de;if(xe>=16){_e=xe>>4;for(var he=1;he<=_e;++he)V(ne);xe&=15}le=32767+g[Ce],V(ae[(xe<<4)+h[le]]),V(f[le]),Ce++}return Ee!=63&&V(ie),X}function Z(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(F){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var ae=o((X[Y]*F+50)/100);ae=Math.min(Math.max(ae,1),255),l[j[Y]]=ae}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ne=o((le[ie]*F+50)/100);ne=Math.min(Math.max(ne,1),255),c[j[ie]]=ne}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,K=0;K<8;K++)for(var Ee=0;Ee<8;Ee++)u[we]=1/(l[j[we]]*oe[K]*oe[Ee]*8),d[we]=1/(c[j[we]]*oe[K]*oe[Ee]*8),we++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,F){F&&Z(F),x=new Array,v=0,y=7,J(65496),J(65504),J(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),J(1),J(1),G(0),G(0),function(){J(65499),J(132),G(0);for(var Ne=0;Ne<64;Ne++)G(l[Ne]);G(1);for(var Pe=0;Pe<64;Pe++)G(c[Pe])}(),function(Ne,Pe){J(65472),J(17),G(8),J(Pe),J(Ne),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(M.width,M.height),function(){J(65476),J(418),G(0);for(var Ne=0;Ne<16;Ne++)G(S[Ne+1]);for(var Pe=0;Pe<=11;Pe++)G(B[Pe]);G(16);for(var Qe=0;Qe<16;Qe++)G(L[Qe+1]);for(var $e=0;$e<=161;$e++)G(D[$e]);G(1);for(var et=0;et<16;et++)G(k[et+1]);for(var Ke=0;Ke<=11;Ke++)G(R[Ke]);G(17);for(var Ge=0;Ge<16;Ge++)G(U[Ge+1]);for(var nt=0;nt<=161;nt++)G(H[nt])}(),J(65498),J(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var X=0,Y=0,ae=0;v=0,y=7,this.encode.displayName="_encode_";for(var le,ie,ne,oe,we,K,Ee,_e,Ce,de=M.data,xe=M.width,he=M.height,ye=4*xe,ce=0;ce<he;){for(le=0;le<ye;){for(we=ye*ce+le,Ee=-1,_e=0,Ce=0;Ce<64;Ce++)K=we+(_e=Ce>>3)*ye+(Ee=4*(7&Ce)),ce+_e>=he&&(K-=ye*(ce+1+_e-he)),le+Ee>=ye&&(K-=le+Ee-ye+4),ie=de[K++],ne=de[K++],oe=de[K++],N[Ce]=(O[ie]+O[ne+256>>0]+O[oe+512>>0]>>16)-128,C[Ce]=(O[ie+768>>0]+O[ne+1024>>0]+O[oe+1280>>0]>>16)-128,T[Ce]=(O[ie+1280>>0]+O[ne+1536>>0]+O[oe+1792>>0]>>16)-128;X=W(N,u,X,t,a),Y=W(C,d,Y,r,n),ae=W(T,d,ae,r,n),le+=32}ce+=8}if(y>=0){var Ae=[];Ae[1]=y+1,Ae[0]=(1<<y+1)-1,V(Ae)}return J(65497),new Uint8Array(x)},e=e||50,function(){for(var M=String.fromCharCode,F=0;F<256;F++)_[F]=M(F)}(),t=Q(S,B),r=Q(k,R),a=Q(L,D),n=Q(U,H),function(){for(var M=1,F=2,X=1;X<=15;X++){for(var Y=M;Y<F;Y++)h[32767+Y]=X,f[32767+Y]=[],f[32767+Y][1]=X,f[32767+Y][0]=Y;for(var ae=-(F-1);ae<=-M;ae++)h[32767+ae]=X,f[32767+ae]=[],f[32767+ae][1]=X,f[32767+ae][0]=F-1+ae;M<<=1,F<<=1}}(),function(){for(var M=0;M<256;M++)O[M]=19595*M,O[M+256>>0]=38470*M,O[M+512>>0]=7471*M+32768,O[M+768>>0]=-11059*M,O[M+1024>>0]=-21709*M,O[M+1280>>0]=32768*M+8421375,O[M+1536>>0]=-27439*M,O[M+1792>>0]=-5329*M}(),Z(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ld(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MW(e){function t(S){if(!S)throw Error("assert :P")}function r(S,B,L){for(var D=0;4>D;D++)if(S[B+D]!=L.charCodeAt(D))return!0;return!1}function a(S,B,L,D,k){for(var R=0;R<k;R++)S[B+R]=L[D+R]}function n(S,B,L,D){for(var k=0;k<D;k++)S[B+k]=L}function i(S){return new Int32Array(S)}function o(S,B){for(var L=[],D=0;D<S;D++)L.push(new B);return L}function l(S,B){var L=[];return function D(k,R,U){for(var H=U[R],Q=0;Q<H&&(k.push(U.length>R+1?[]:new B),!(U.length<R+1));Q++)D(k[Q],R+1,U)}(L,0,S),L}var c=function(){var S=this;function B(I,q){for(var re=1<<q-1>>>0;I&re;)re>>>=1;return re?(I&re-1)+re:I}function L(I,q,re,ue,ve){t(!(ue%re));do I[q+(ue-=re)]=ve;while(0<ue)}function D(I,q,re,ue,ve){if(t(2328>=ve),512>=ve)var ke=i(512);else if((ke=i(ve))==null)return 0;return function(Se,Be,Fe,Me,Je,At){var dt,it,Dt=Be,yt=1<<Fe,Ze=i(16),rt=i(16);for(t(Je!=0),t(Me!=null),t(Se!=null),t(0<Fe),it=0;it<Je;++it){if(15<Me[it])return 0;++Ze[Me[it]]}if(Ze[0]==Je)return 0;for(rt[1]=0,dt=1;15>dt;++dt){if(Ze[dt]>1<<dt)return 0;rt[dt+1]=rt[dt]+Ze[dt]}for(it=0;it<Je;++it)dt=Me[it],0<Me[it]&&(At[rt[dt]++]=it);if(rt[15]==1)return(Me=new k).g=0,Me.value=At[0],L(Se,Dt,1,yt,Me),yt;var St,Pt=-1,It=yt-1,tr=0,Yt=1,xr=1,Zt=1<<Fe;for(it=0,dt=1,Je=2;dt<=Fe;++dt,Je<<=1){if(Yt+=xr<<=1,0>(xr-=Ze[dt]))return 0;for(;0<Ze[dt];--Ze[dt])(Me=new k).g=dt,Me.value=At[it++],L(Se,Dt+tr,Je,Zt,Me),tr=B(tr,dt)}for(dt=Fe+1,Je=2;15>=dt;++dt,Je<<=1){if(Yt+=xr<<=1,0>(xr-=Ze[dt]))return 0;for(;0<Ze[dt];--Ze[dt]){if(Me=new k,(tr&It)!=Pt){for(Dt+=Zt,St=1<<(Pt=dt)-Fe;15>Pt&&!(0>=(St-=Ze[Pt]));)++Pt,St<<=1;yt+=Zt=1<<(St=Pt-Fe),Se[Be+(Pt=tr&It)].g=St+Fe,Se[Be+Pt].value=Dt-Be-Pt}Me.g=dt-Fe,Me.value=At[it++],L(Se,Dt+(tr>>Fe),Je,Zt,Me),tr=B(tr,dt)}}return Yt!=2*rt[15]-1?0:yt}(I,q,re,ue,ve,ke)}function k(){this.value=this.g=0}function R(){this.value=this.g=0}function U(){this.G=o(5,k),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Hs,R)}function H(I,q,re,ue){t(I!=null),t(q!=null),t(2147483648>ue),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=q,I.pa=re,I.Jd=q,I.Yc=re+ue,I.Zc=4<=ue?re+ue-4+1:re,le(I)}function Q(I,q){for(var re=0;0<q--;)re|=ne(I,128)<<q;return re}function V(I,q){var re=Q(I,q);return ie(I)?-re:re}function G(I,q,re,ue){var ve,ke=0;for(t(I!=null),t(q!=null),t(4294967288>ue),I.Sb=ue,I.Ra=0,I.u=0,I.h=0,4<ue&&(ue=4),ve=0;ve<ue;++ve)ke+=q[re+ve]<<8*ve;I.Ra=ke,I.bb=ue,I.oa=q,I.pa=re}function J(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<HA-8>>>0,++I.bb,I.u-=8;X(I)&&(I.h=1,I.u=0)}function W(I,q){if(t(0<=q),!I.h&&q<=QA){var re=F(I)&Ef[q];return I.u+=q,J(I),re}return I.h=1,I.u=0}function Z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(I){return I.Ra>>>(I.u&HA-1)>>>0}function X(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>HA}function Y(I,q){I.u=q,I.h=X(I)}function ae(I){I.u>=N0&&(t(I.u>=N0),J(I))}function le(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ie(I){return Q(I,1)}function ne(I,q){var re=I.Ca;0>I.b&&le(I);var ue=I.b,ve=re*q>>>8,ke=(I.I>>>ue>ve)+0;for(ke?(re-=ve,I.I-=ve+1<<ue>>>0):re=ve+1,ue=re,ve=0;256<=ue;)ve+=8,ue>>=8;return ue=7^ve+Uo[ue],I.b-=ue,I.Ca=(re<<ue)-1,ke}function oe(I,q,re){I[q+0]=re>>24&255,I[q+1]=re>>16&255,I[q+2]=re>>8&255,I[q+3]=re>>0&255}function we(I,q){return I[q+0]<<0|I[q+1]<<8}function K(I,q){return we(I,q)|I[q+2]<<16}function Ee(I,q){return we(I,q)|we(I,q+2)<<16}function _e(I,q){var re=1<<q;return t(I!=null),t(0<q),I.X=i(re),I.X==null?0:(I.Mb=32-q,I.Xa=q,1)}function Ce(I,q){t(I!=null),t(q!=null),t(I.Xa==q.Xa),a(q.X,0,I.X,0,1<<q.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function xe(I,q,re,ue){t(re!=null),t(ue!=null);var ve=re[0],ke=ue[0];return ve==0&&(ve=(I*ke+q/2)/q),ke==0&&(ke=(q*ve+I/2)/I),0>=ve||0>=ke?0:(re[0]=ve,ue[0]=ke,1)}function he(I,q){return I+(1<<q)-1>>>q}function ye(I,q){return((4278255360&I)+(4278255360&q)>>>0&4278255360)+((16711935&I)+(16711935&q)>>>0&16711935)>>>0}function ce(I,q){S[q]=function(re,ue,ve,ke,Se,Be,Fe){var Me;for(Me=0;Me<Se;++Me){var Je=S[I](Be[Fe+Me-1],ve,ke+Me);Be[Fe+Me]=ye(re[ue+Me],Je)}}}function Ae(){this.ud=this.hd=this.jd=0}function Ne(I,q){return((4278124286&(I^q))>>>1)+(I&q)>>>0}function Pe(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function Qe(I,q){return Pe(I+(I-q+.5>>1))}function $e(I,q,re){return Math.abs(q-re)-Math.abs(I-re)}function et(I,q,re,ue,ve,ke,Se){for(ue=ke[Se-1],re=0;re<ve;++re)ke[Se+re]=ue=ye(I[q+re],ue)}function Ke(I,q,re,ue,ve){var ke;for(ke=0;ke<re;++ke){var Se=I[q+ke],Be=Se>>8&255,Fe=16711935&(Fe=(Fe=16711935&Se)+((Be<<16)+Be));ue[ve+ke]=(4278255360&Se)+Fe>>>0}}function Ge(I,q){q.jd=I>>0&255,q.hd=I>>8&255,q.ud=I>>16&255}function nt(I,q,re,ue,ve,ke){var Se;for(Se=0;Se<ue;++Se){var Be=q[re+Se],Fe=Be>>>8,Me=Be,Je=255&(Je=(Je=Be>>>16)+((I.jd<<24>>24)*(Fe<<24>>24)>>>5));Me=255&(Me=(Me=Me+((I.hd<<24>>24)*(Fe<<24>>24)>>>5))+((I.ud<<24>>24)*(Je<<24>>24)>>>5)),ve[ke+Se]=(4278255360&Be)+(Je<<16)+Me}}function bt(I,q,re,ue,ve){S[q]=function(ke,Se,Be,Fe,Me,Je,At,dt,it){for(Fe=At;Fe<dt;++Fe)for(At=0;At<it;++At)Me[Je++]=ve(Be[ue(ke[Se++])])},S[I]=function(ke,Se,Be,Fe,Me,Je,At){var dt=8>>ke.b,it=ke.Ea,Dt=ke.K[0],yt=ke.w;if(8>dt)for(ke=(1<<ke.b)-1,yt=(1<<dt)-1;Se<Be;++Se){var Ze,rt=0;for(Ze=0;Ze<it;++Ze)Ze&ke||(rt=ue(Fe[Me++])),Je[At++]=ve(Dt[rt&yt]),rt>>=dt}else S["VP8LMapColor"+re](Fe,Me,Dt,yt,Je,At,Se,Be,it)}}function ut(I,q,re,ue,ve){for(re=q+re;q<re;){var ke=I[q++];ue[ve++]=ke>>16&255,ue[ve++]=ke>>8&255,ue[ve++]=ke>>0&255}}function ze(I,q,re,ue,ve){for(re=q+re;q<re;){var ke=I[q++];ue[ve++]=ke>>16&255,ue[ve++]=ke>>8&255,ue[ve++]=ke>>0&255,ue[ve++]=ke>>24&255}}function Tt(I,q,re,ue,ve){for(re=q+re;q<re;){var ke=(Se=I[q++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;ue[ve++]=ke,ue[ve++]=Se}}function ir(I,q,re,ue,ve){for(re=q+re;q<re;){var ke=(Se=I[q++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;ue[ve++]=ke,ue[ve++]=Se}}function Kt(I,q,re,ue,ve){for(re=q+re;q<re;){var ke=I[q++];ue[ve++]=ke>>0&255,ue[ve++]=ke>>8&255,ue[ve++]=ke>>16&255}}function Cr(I,q,re,ue,ve,ke){if(ke==0)for(re=q+re;q<re;)oe(ue,((ke=I[q++])[0]>>24|ke[1]>>8&65280|ke[2]<<8&16711680|ke[3]<<24)>>>0),ve+=32;else a(ue,ve,I,q,re)}function $r(I,q){S[q][0]=S[I+"0"],S[q][1]=S[I+"1"],S[q][2]=S[I+"2"],S[q][3]=S[I+"3"],S[q][4]=S[I+"4"],S[q][5]=S[I+"5"],S[q][6]=S[I+"6"],S[q][7]=S[I+"7"],S[q][8]=S[I+"8"],S[q][9]=S[I+"9"],S[q][10]=S[I+"10"],S[q][11]=S[I+"11"],S[q][12]=S[I+"12"],S[q][13]=S[I+"13"],S[q][14]=S[I+"0"],S[q][15]=S[I+"0"]}function br(I){return I==Ep||I==Df||I==Cd||I==k0}function Sn(){this.eb=[],this.size=this.A=this.fb=0}function Pr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ra(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sn,this.f.kb=new Pr,this.sd=null}function Dn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Jr(I,q){var re=I.T,ue=q.ba.f.RGBA,ve=ue.eb,ke=ue.fb+I.ka*ue.A,Se=Ai[q.ba.S],Be=I.y,Fe=I.O,Me=I.f,Je=I.N,At=I.ea,dt=I.W,it=q.cc,Dt=q.dc,yt=q.Mc,Ze=q.Nc,rt=I.ka,St=I.ka+I.T,Pt=I.U,It=Pt+1>>1;for(rt==0?Se(Be,Fe,null,null,Me,Je,At,dt,Me,Je,At,dt,ve,ke,null,null,Pt):(Se(q.ec,q.fc,Be,Fe,it,Dt,yt,Ze,Me,Je,At,dt,ve,ke-ue.A,ve,ke,Pt),++re);rt+2<St;rt+=2)it=Me,Dt=Je,yt=At,Ze=dt,Je+=I.Rc,dt+=I.Rc,ke+=2*ue.A,Se(Be,(Fe+=2*I.fa)-I.fa,Be,Fe,it,Dt,yt,Ze,Me,Je,At,dt,ve,ke-ue.A,ve,ke,Pt);return Fe+=I.fa,I.j+St<I.o?(a(q.ec,q.fc,Be,Fe,Pt),a(q.cc,q.dc,Me,Je,It),a(q.Mc,q.Nc,At,dt,It),re--):1&St||Se(Be,Fe,null,null,Me,Je,At,dt,Me,Je,At,dt,ve,ke+ue.A,null,null,Pt),re}function gs(I,q,re){var ue=I.F,ve=[I.J];if(ue!=null){var ke=I.U,Se=q.ba.S,Be=Se==qA||Se==Cd;q=q.ba.f.RGBA;var Fe=[0],Me=I.ka;Fe[0]=I.T,I.Kb&&(Me==0?--Fe[0]:(--Me,ve[0]-=I.width),I.j+I.ka+I.T==I.o&&(Fe[0]=I.o-I.j-Me));var Je=q.eb;Me=q.fb+Me*q.A,I=ua(ue,ve[0],I.width,ke,Fe,Je,Me+(Be?0:3),q.A),t(re==Fe),I&&br(Se)&&Nl(Je,Me,Be,ke,Fe,q.A)}return 0}function Za(I){var q=I.ma,re=q.ba.S,ue=11>re,ve=re==j0||re==Cp||re==qA||re==Nd||re==12||br(re);if(q.memory=null,q.Ib=null,q.Jb=null,q.Nd=null,!Cf(q.Oa,I,ve?11:12))return 0;if(ve&&br(re)&&Qt(),I.da)alert("todo:use_scaling");else{if(ue){if(q.Ib=pr,I.Kb){if(re=I.U+1>>1,q.memory=i(I.U+2*re),q.memory==null)return 0;q.ec=q.memory,q.fc=0,q.cc=q.ec,q.dc=q.fc+I.U,q.Mc=q.cc,q.Nc=q.dc+re,q.Ib=Jr,Qt()}}else alert("todo:EmitYUV");ve&&(q.Jb=gs,ue&&st())}if(ue&&!yC){for(I=0;256>I;++I)g3[I]=89858*(I-128)+Vs>>Fu,Sp[I]=-22014*(I-128)+Vs,J1[I]=-45773*(I-128),$s[I]=113618*(I-128)+Vs>>Fu;for(I=Lf;I<jx;++I)q=76283*(I-16)+Vs>>Fu,_p[I-Lf]=Ma(q,255),Z1[I-Lf]=Ma(q+8>>4,15);yC=1}return 1}function Pn(I){var q=I.ma,re=I.U,ue=I.T;return t(!(1&I.ka)),0>=re||0>=ue?0:(re=q.Ib(I,q),q.Jb!=null&&q.Jb(I,q,re),q.Dc+=re,1)}function Us(I){I.ma.memory=null}function er(I,q,re,ue){return W(I,8)!=47?0:(q[0]=W(I,14)+1,re[0]=W(I,14)+1,ue[0]=W(I,1),W(I,3)!=0?0:!I.h)}function xa(I,q){if(4>I)return I+1;var re=I-2>>1;return(2+(1&I)<<re)+W(q,re)+1}function la(I,q){return 120<q?q-120:1<=(re=((re=jd[q-1])>>4)*I+(8-(15&re)))?re:1;var re}function Ia(I,q,re){var ue=F(re),ve=I[q+=255&ue].g-8;return 0<ve&&(Y(re,re.u+8),ue=F(re),q+=I[q].value,q+=ue&(1<<ve)-1),Y(re,re.u+I[q].g),I[q].value}function Wa(I,q,re){return re.g+=I.g,re.value+=I.value<<q>>>0,t(8>=re.g),I.g}function en(I,q,re){var ue=I.xc;return t((q=ue==0?0:I.vc[I.md*(re>>ue)+(q>>ue)])<I.Wb),I.Ya[q]}function je(I,q,re,ue){var ve=I.ab,ke=I.c*q,Se=I.C;q=Se+q;var Be=re,Fe=ue;for(ue=I.Ta,re=I.Ua;0<ve--;){var Me=I.gc[ve],Je=Se,At=q,dt=Be,it=Fe,Dt=(Fe=ue,Be=re,Me.Ea);switch(t(Je<At),t(At<=Me.nc),Me.hc){case 2:vx(dt,it,(At-Je)*Dt,Fe,Be);break;case 0:var yt=Je,Ze=At,rt=Fe,St=Be,Pt=(Zt=Me).Ea;yt==0&&(X1(dt,it,null,null,1,rt,St),et(dt,it+1,0,0,Pt-1,rt,St+1),it+=Pt,St+=Pt,++yt);for(var It=1<<Zt.b,tr=It-1,Yt=he(Pt,Zt.b),xr=Zt.K,Zt=Zt.w+(yt>>Zt.b)*Yt;yt<Ze;){var Sa=xr,Ua=Zt,oa=1;for(wp(dt,it,rt,St-Pt,1,rt,St);oa<Pt;){var ra=(oa&~tr)+It;ra>Pt&&(ra=Pt),(0,bd[Sa[Ua++]>>8&15])(dt,it+ +oa,rt,St+oa-Pt,ra-oa,rt,St+oa),oa=ra}it+=Pt,St+=Pt,++yt&tr||(Zt+=Yt)}At!=Me.nc&&a(Fe,Be-Dt,Fe,Be+(At-Je-1)*Dt,Dt);break;case 1:for(Dt=dt,Ze=it,Pt=(dt=Me.Ea)-(St=dt&~(rt=(it=1<<Me.b)-1)),yt=he(dt,Me.b),It=Me.K,Me=Me.w+(Je>>Me.b)*yt;Je<At;){for(tr=It,Yt=Me,xr=new Ae,Zt=Ze+St,Sa=Ze+dt;Ze<Zt;)Ge(tr[Yt++],xr),kf(xr,Dt,Ze,it,Fe,Be),Ze+=it,Be+=it;Ze<Sa&&(Ge(tr[Yt++],xr),kf(xr,Dt,Ze,Pt,Fe,Be),Ze+=Pt,Be+=Pt),++Je&rt||(Me+=yt)}break;case 3:if(dt==Fe&&it==Be&&0<Me.b){for(Ze=Fe,dt=Dt=Be+(At-Je)*Dt-(St=(At-Je)*he(Me.Ea,Me.b)),it=Fe,rt=Be,yt=[],St=(Pt=St)-1;0<=St;--St)yt[St]=it[rt+St];for(St=Pt-1;0<=St;--St)Ze[dt+St]=yt[St];Wl(Me,Je,At,Fe,Dt,Fe,Be)}else Wl(Me,Je,At,dt,it,Fe,Be)}Be=ue,Fe=re}Fe!=re&&a(ue,re,Be,Fe,ke)}function Ue(I,q){var re=I.V,ue=I.Ba+I.c*I.C,ve=q-I.C;if(t(q<=I.l.o),t(16>=ve),0<ve){var ke=I.l,Se=I.Ta,Be=I.Ua,Fe=ke.width;if(je(I,ve,re,ue),ve=Be=[Be],t((re=I.C)<(ue=q)),t(ke.v<ke.va),ue>ke.o&&(ue=ke.o),re<ke.j){var Me=ke.j-re;re=ke.j,ve[0]+=Me*Fe}if(re>=ue?re=0:(ve[0]+=4*ke.v,ke.ka=re-ke.j,ke.U=ke.va-ke.v,ke.T=ue-re,re=1),re){if(Be=Be[0],11>(re=I.ca).S){var Je=re.f.RGBA,At=(ue=re.S,ve=ke.U,ke=ke.T,Me=Je.eb,Je.A),dt=ke;for(Je=Je.fb+I.Ma*Je.A;0<dt--;){var it=Se,Dt=Be,yt=ve,Ze=Me,rt=Je;switch(ue){case Wi:mo(it,Dt,yt,Ze,rt);break;case j0:Ti(it,Dt,yt,Ze,rt);break;case Ep:Ti(it,Dt,yt,Ze,rt),Nl(Ze,rt,0,yt,1,0);break;case Bu:Oc(it,Dt,yt,Ze,rt);break;case Cp:Cr(it,Dt,yt,Ze,rt,1);break;case Df:Cr(it,Dt,yt,Ze,rt,1),Nl(Ze,rt,0,yt,1,0);break;case qA:Cr(it,Dt,yt,Ze,rt,0);break;case Cd:Cr(it,Dt,yt,Ze,rt,0),Nl(Ze,rt,1,yt,1,0);break;case Nd:Sf(it,Dt,yt,Ze,rt);break;case k0:Sf(it,Dt,yt,Ze,rt),ca(Ze,rt,yt,1,0);break;case yx:Qo(it,Dt,yt,Ze,rt);break;default:t(0)}Be+=Fe,Je+=At}I.Ma+=ke}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=re.height)}}I.C=q,t(I.C<=I.i)}function De(I){var q;if(0<I.ua)return 0;for(q=0;q<I.Wb;++q){var re=I.Ya[q].G,ue=I.Ya[q].H;if(0<re[1][ue[1]+0].g||0<re[2][ue[2]+0].g||0<re[3][ue[3]+0].g)return 0}return 1}function Le(I,q,re,ue,ve,ke){if(I.Z!=0){var Se=I.qd,Be=I.rd;for(t(Iu[I.Z]!=null);q<re;++q)Iu[I.Z](Se,Be,ue,ve,ue,ve,ke),Se=ue,Be=ve,ve+=ke;I.qd=Se,I.rd=Be}}function ge(I,q){var re=I.l.ma,ue=re.Z==0||re.Z==1?I.l.j:I.C;if(ue=I.C<ue?ue:I.C,t(q<=I.l.o),q>ue){var ve=I.l.width,ke=re.ca,Se=re.tb+ve*ue,Be=I.V,Fe=I.Ba+I.c*ue,Me=I.gc;t(I.ab==1),t(Me[0].hc==3),jf(Me[0],ue,q,Be,Fe,ke,Se),Le(re,ue,q,ke,Se,ve)}I.C=I.Ma=q}function me(I,q,re,ue,ve,ke,Se){var Be=I.$/ue,Fe=I.$%ue,Me=I.m,Je=I.s,At=re+I.$,dt=At;ve=re+ue*ve;var it=re+ue*ke,Dt=280+Je.ua,yt=I.Pb?Be:16777216,Ze=0<Je.ua?Je.Wa:null,rt=Je.wc,St=At<it?en(Je,Fe,Be):null;t(I.C<ke),t(it<=ve);var Pt=!1;e:for(;;){for(;Pt||At<it;){var It=0;if(Be>=yt){var tr=At-re;t((yt=I).Pb),yt.wd=yt.m,yt.xd=tr,0<yt.s.ua&&Ce(yt.s.Wa,yt.s.vb),yt=Be+xC}if(Fe&rt||(St=en(Je,Fe,Be)),t(St!=null),St.Qb&&(q[At]=St.qb,Pt=!0),!Pt)if(ae(Me),St.jc){It=Me,tr=q;var Yt=At,xr=St.pd[F(It)&Hs-1];t(St.jc),256>xr.g?(Y(It,It.u+xr.g),tr[Yt]=xr.value,It=0):(Y(It,It.u+xr.g-256),t(256<=xr.value),It=xr.value),It==0&&(Pt=!0)}else It=Ia(St.G[0],St.H[0],Me);if(Me.h)break;if(Pt||256>It){if(!Pt)if(St.nd)q[At]=(St.qb|It<<8)>>>0;else{if(ae(Me),Pt=Ia(St.G[1],St.H[1],Me),ae(Me),tr=Ia(St.G[2],St.H[2],Me),Yt=Ia(St.G[3],St.H[3],Me),Me.h)break;q[At]=(Yt<<24|Pt<<16|It<<8|tr)>>>0}if(Pt=!1,++At,++Fe>=ue&&(Fe=0,++Be,Se!=null&&Be<=ke&&!(Be%16)&&Se(I,Be),Ze!=null))for(;dt<At;)It=q[dt++],Ze.X[(506832829*It&4294967295)>>>Ze.Mb]=It}else if(280>It){if(It=xa(It-256,Me),tr=Ia(St.G[4],St.H[4],Me),ae(Me),tr=la(ue,tr=xa(tr,Me)),Me.h)break;if(At-re<tr||ve-At<It)break e;for(Yt=0;Yt<It;++Yt)q[At+Yt]=q[At+Yt-tr];for(At+=It,Fe+=It;Fe>=ue;)Fe-=ue,++Be,Se!=null&&Be<=ke&&!(Be%16)&&Se(I,Be);if(t(At<=ve),Fe&rt&&(St=en(Je,Fe,Be)),Ze!=null)for(;dt<At;)It=q[dt++],Ze.X[(506832829*It&4294967295)>>>Ze.Mb]=It}else{if(!(It<Dt))break e;for(Pt=It-280,t(Ze!=null);dt<At;)It=q[dt++],Ze.X[(506832829*It&4294967295)>>>Ze.Mb]=It;It=At,t(!(Pt>>>(tr=Ze).Xa)),q[It]=tr.X[Pt],Pt=!0}Pt||t(Me.h==X(Me))}if(I.Pb&&Me.h&&At<ve)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&Ce(I.s.vb,I.s.Wa);else{if(Me.h)break e;Se!=null&&Se(I,Be>ke?ke:Be),I.a=0,I.$=At-re}return 1}return I.a=3,0}function Oe(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var q=I.Wa;q!=null&&(q.X=null),I.vb=null,t(I!=null)}function He(){var I=new y0;return I==null?null:(I.a=0,I.xb=S0,$r("Predictor","VP8LPredictors"),$r("Predictor","VP8LPredictors_C"),$r("PredictorAdd","VP8LPredictorsAdd"),$r("PredictorAdd","VP8LPredictorsAdd_C"),vx=Ke,kf=nt,mo=ut,Ti=ze,Sf=Tt,Qo=ir,Oc=Kt,S.VP8LMapColor32b=di,S.VP8LMapColor8b=Np,I)}function Re(I,q,re,ue,ve){var ke=1,Se=[I],Be=[q],Fe=ue.m,Me=ue.s,Je=null,At=0;e:for(;;){if(re)for(;ke&&W(Fe,1);){var dt=Se,it=Be,Dt=ue,yt=1,Ze=Dt.m,rt=Dt.gc[Dt.ab],St=W(Ze,2);if(Dt.Oc&1<<St)ke=0;else{switch(Dt.Oc|=1<<St,rt.hc=St,rt.Ea=dt[0],rt.nc=it[0],rt.K=[null],++Dt.ab,t(4>=Dt.ab),St){case 0:case 1:rt.b=W(Ze,3)+2,yt=Re(he(rt.Ea,rt.b),he(rt.nc,rt.b),0,Dt,rt.K),rt.K=rt.K[0];break;case 3:var Pt,It=W(Ze,8)+1,tr=16<It?0:4<It?1:2<It?2:3;if(dt[0]=he(rt.Ea,tr),rt.b=tr,Pt=yt=Re(It,1,0,Dt,rt.K)){var Yt,xr=It,Zt=rt,Sa=1<<(8>>Zt.b),Ua=i(Sa);if(Ua==null)Pt=0;else{var oa=Zt.K[0],ra=Zt.w;for(Ua[0]=Zt.K[0][0],Yt=1;Yt<1*xr;++Yt)Ua[Yt]=ye(oa[ra+Yt],Ua[Yt-1]);for(;Yt<4*Sa;++Yt)Ua[Yt]=0;Zt.K[0]=null,Zt.K[0]=Ua,Pt=1}}yt=Pt;break;case 2:break;default:t(0)}ke=yt}}if(Se=Se[0],Be=Be[0],ke&&W(Fe,1)&&!(ke=1<=(At=W(Fe,4))&&11>=At)){ue.a=3;break e}var rn;if(rn=ke)t:{var Qa,qr,An,kr=ue,Lr=Se,ka=Be,_a=At,hi=re,Gs=kr.m,os=kr.s,ls=[null],Ns=1,Zl=0,Ha=WA[_a];r:for(;;){if(hi&&W(Gs,1)){var Cs=W(Gs,3)+2,Pc=he(Lr,Cs),Mf=he(ka,Cs),JA=Pc*Mf;if(!Re(Pc,Mf,0,kr,ls))break r;for(ls=ls[0],os.xc=Cs,Qa=0;Qa<JA;++Qa){var Uf=ls[Qa]>>8&65535;ls[Qa]=Uf,Uf>=Ns&&(Ns=Uf+1)}}if(Gs.h)break r;for(qr=0;5>qr;++qr){var Rn=Cl[qr];!qr&&0<_a&&(Rn+=1<<_a),Zl<Rn&&(Zl=Rn)}var Bp=o(Ns*Ha,k),kx=Ns,go=o(kx,U);if(go==null)var zn=null;else t(65536>=kx),zn=go;var ZA=i(Zl);if(zn==null||ZA==null||Bp==null){kr.a=1;break r}var Qf=Bp;for(Qa=An=0;Qa<Ns;++Qa){var zo=zn[Qa],Hf=zo.G,Vo=zo.H,Tp=0,B0=1,Sx=0;for(qr=0;5>qr;++qr){Rn=Cl[qr],Hf[qr]=Qf,Vo[qr]=An,!qr&&0<_a&&(Rn+=1<<_a);n:{var Ip,_x=Rn,Op=kr,T0=ZA,CC=Qf,EC=An,Fp=0,Bd=Op.m,v3=W(Bd,1);if(n(T0,0,0,_x),v3){var jC=W(Bd,1)+1,kC=W(Bd,1),ey=W(Bd,kC==0?1:8);T0[ey]=1,jC==2&&(T0[ey=W(Bd,8)]=1);var I0=1}else{var ty=i(19),ry=W(Bd,4)+4;if(19<ry){Op.a=3;var Dp=0;break n}for(Ip=0;Ip<ry;++Ip)ty[Ed[Ip]]=W(Bd,3);var Bx=void 0,O0=void 0,SC=Op,_C=ty,Td=_x,Pp=T0,Tx=0,Rc=SC.m,F0=8,ay=o(128,k);a:for(;D(ay,0,7,_C,19);){if(W(Rc,1)){var BC=2+2*W(Rc,3);if((Bx=2+W(Rc,BC))>Td)break a}else Bx=Td;for(O0=0;O0<Td&&Bx--;){ae(Rc);var ny=ay[0+(127&F(Rc))];Y(Rc,Rc.u+ny.g);var eh=ny.value;if(16>eh)Pp[O0++]=eh,eh!=0&&(F0=eh);else{var TC=eh==16,sy=eh-16,iy=Jl[sy],oy=W(Rc,wx[sy])+iy;if(O0+oy>Td)break a;for(var IC=TC?F0:0;0<oy--;)Pp[O0++]=IC}}Tx=1;break a}Tx||(SC.a=3),I0=Tx}(I0=I0&&!Bd.h)&&(Fp=D(CC,EC,8,T0,_x)),I0&&Fp!=0?Dp=Fp:(Op.a=3,Dp=0)}if(Dp==0)break r;if(B0&&KA[qr]==1&&(B0=Qf[An].g==0),Tp+=Qf[An].g,An+=Dp,3>=qr){var th,Ix=ZA[0];for(th=1;th<Rn;++th)ZA[th]>Ix&&(Ix=ZA[th]);Sx+=Ix}}if(zo.nd=B0,zo.Qb=0,B0&&(zo.qb=(Hf[3][Vo[3]+0].value<<24|Hf[1][Vo[1]+0].value<<16|Hf[2][Vo[2]+0].value)>>>0,Tp==0&&256>Hf[0][Vo[0]+0].value&&(zo.Qb=1,zo.qb+=Hf[0][Vo[0]+0].value<<8)),zo.jc=!zo.Qb&&6>Sx,zo.jc){var Rp,Id=zo;for(Rp=0;Rp<Hs;++Rp){var Du=Rp,Od=Id.pd[Du],Lp=Id.G[0][Id.H[0]+Du];256<=Lp.value?(Od.g=Lp.g+256,Od.value=Lp.value):(Od.g=0,Od.value=0,Du>>=Wa(Lp,8,Od),Du>>=Wa(Id.G[1][Id.H[1]+Du],16,Od),Du>>=Wa(Id.G[2][Id.H[2]+Du],0,Od),Wa(Id.G[3][Id.H[3]+Du],24,Od))}}}os.vc=ls,os.Wb=Ns,os.Ya=zn,os.yc=Bp,rn=1;break t}rn=0}if(!(ke=rn)){ue.a=3;break e}if(0<At){if(Me.ua=1<<At,!_e(Me.Wa,At)){ue.a=1,ke=0;break e}}else Me.ua=0;var Mp=ue,ly=Se,OC=Be,cy=Mp.s,uy=cy.xc;if(Mp.c=ly,Mp.i=OC,cy.md=he(ly,uy),cy.wc=uy==0?-1:(1<<uy)-1,re){ue.xb=bC;break e}if((Je=i(Se*Be))==null){ue.a=1,ke=0;break e}ke=(ke=me(ue,Je,0,Se,Be,Be,null))&&!Fe.h;break e}return ke?(ve!=null?ve[0]=Je:(t(Je==null),t(re)),ue.$=0,re||Oe(Me)):Oe(Me),ke}function We(I,q){var re=I.c*I.i,ue=re+q+16*q;return t(I.c<=q),I.V=i(ue),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+re+q,1)}function Ye(I,q){var re=I.C,ue=q-re,ve=I.V,ke=I.Ba+I.c*re;for(t(q<=I.l.o);0<ue;){var Se=16<ue?16:ue,Be=I.l.ma,Fe=I.l.width,Me=Fe*Se,Je=Be.ca,At=Be.tb+Fe*re,dt=I.Ta,it=I.Ua;je(I,Se,ve,ke),wn(dt,it,Je,At,Me),Le(Be,re,re+Se,Je,At,Fe),ue-=Se,ve+=Se*I.c,re+=Se}t(re==q),I.C=I.Ma=q}function wt(){this.ub=this.yd=this.td=this.Rb=0}function Nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ot(){this.Yb=function(){var I=[];return function q(re,ue,ve){for(var ke=ve[ue],Se=0;Se<ke&&(re.push(ve.length>ue+1?[]:0),!(ve.length<ue+1));Se++)q(re[Se],ue+1,ve)}(I,0,[3,11]),I}()}function Vt(){this.jb=i(3),this.Wc=l([4,8],Ot),this.Xc=l([4,17],Ot)}function jr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ea(){this.ld=this.La=this.dd=this.tc=0}function ta(){this.Na=this.la=0}function ia(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xs(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Fo(){this.uc=this.M=this.Nb=0,this.wa=Array(new ea),this.Y=0,this.ya=Array(new xs),this.aa=0,this.l=new Qs}function vs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ci(){this.cb=this.a=0,this.sc="",this.m=new Z,this.Od=new wt,this.Kc=new Nt,this.ed=new jr,this.Qa=new zt,this.Ic=this.$c=this.Aa=0,this.D=new Fo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Z),this.ia=0,this.pb=o(4,ia),this.Pa=new Vt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vs),this.Hd=0,this.rb=Array(new ta),this.sb=0,this.wa=Array(new ea),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xs),this.L=this.aa=0,this.gd=l([4,2],ea),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ki(){var I=new ci;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,zs||(zs=g0)),I}function yn(I,q,re){return I.a==0&&(I.a=q,I.sc=re,I.cb=0),0}function ui(I,q,re){return 3<=re&&I[q+0]==157&&I[q+1]==1&&I[q+2]==42}function gf(I,q){if(I==null)return 0;if(I.a=0,I.sc="OK",q==null)return yn(I,2,"null VP8Io passed to VP8GetHeaders()");var re=q.data,ue=q.w,ve=q.ha;if(4>ve)return yn(I,7,"Truncated header.");var ke=re[ue+0]|re[ue+1]<<8|re[ue+2]<<16,Se=I.Od;if(Se.Rb=!(1&ke),Se.td=ke>>1&7,Se.yd=ke>>4&1,Se.ub=ke>>5,3<Se.td)return yn(I,3,"Incorrect keyframe parameters.");if(!Se.yd)return yn(I,4,"Frame not displayable.");ue+=3,ve-=3;var Be=I.Kc;if(Se.Rb){if(7>ve)return yn(I,7,"cannot parse picture header");if(!ui(re,ue,ve))return yn(I,3,"Bad code word");Be.c=16383&(re[ue+4]<<8|re[ue+3]),Be.Td=re[ue+4]>>6,Be.i=16383&(re[ue+6]<<8|re[ue+5]),Be.Ud=re[ue+6]>>6,ue+=7,ve-=7,I.za=Be.c+15>>4,I.Ub=Be.i+15>>4,q.width=Be.c,q.height=Be.i,q.Da=0,q.j=0,q.v=0,q.va=q.width,q.o=q.height,q.da=0,q.ib=q.width,q.hb=q.height,q.U=q.width,q.T=q.height,n((ke=I.Pa).jb,0,255,ke.jb.length),t((ke=I.Qa)!=null),ke.Cb=0,ke.Bb=0,ke.Fb=1,n(ke.Zb,0,0,ke.Zb.length),n(ke.Lb,0,0,ke.Lb)}if(Se.ub>ve)return yn(I,7,"bad partition length");H(ke=I.m,re,ue,Se.ub),ue+=Se.ub,ve-=Se.ub,Se.Rb&&(Be.Ld=ie(ke),Be.Kd=ie(ke)),Be=I.Qa;var Fe,Me=I.Pa;if(t(ke!=null),t(Be!=null),Be.Cb=ie(ke),Be.Cb){if(Be.Bb=ie(ke),ie(ke)){for(Be.Fb=ie(ke),Fe=0;4>Fe;++Fe)Be.Zb[Fe]=ie(ke)?V(ke,7):0;for(Fe=0;4>Fe;++Fe)Be.Lb[Fe]=ie(ke)?V(ke,6):0}if(Be.Bb)for(Fe=0;3>Fe;++Fe)Me.jb[Fe]=ie(ke)?Q(ke,8):255}else Be.Bb=0;if(ke.Ka)return yn(I,3,"cannot parse segment header");if((Be=I.ed).zd=ie(ke),Be.Tb=Q(ke,6),Be.wb=Q(ke,3),Be.Pc=ie(ke),Be.Pc&&ie(ke)){for(Me=0;4>Me;++Me)ie(ke)&&(Be.vd[Me]=V(ke,6));for(Me=0;4>Me;++Me)ie(ke)&&(Be.od[Me]=V(ke,6))}if(I.L=Be.Tb==0?0:Be.zd?1:2,ke.Ka)return yn(I,3,"cannot parse filter header");var Je=ve;if(ve=Fe=ue,ue=Fe+Je,Be=Je,I.Xb=(1<<Q(I.m,2))-1,Je<3*(Me=I.Xb))re=7;else{for(Fe+=3*Me,Be-=3*Me,Je=0;Je<Me;++Je){var At=re[ve+0]|re[ve+1]<<8|re[ve+2]<<16;At>Be&&(At=Be),H(I.Jc[+Je],re,Fe,At),Fe+=At,Be-=At,ve+=3}H(I.Jc[+Me],re,Fe,Be),re=Fe<ue?0:5}if(re!=0)return yn(I,re,"cannot parse partitions");for(re=Q(Fe=I.m,7),ve=ie(Fe)?V(Fe,4):0,ue=ie(Fe)?V(Fe,4):0,Be=ie(Fe)?V(Fe,4):0,Me=ie(Fe)?V(Fe,4):0,Fe=ie(Fe)?V(Fe,4):0,Je=I.Qa,At=0;4>At;++At){if(Je.Cb){var dt=Je.Zb[At];Je.Fb||(dt+=re)}else{if(0<At){I.pb[At]=I.pb[0];continue}dt=re}var it=I.pb[At];it.Sc[0]=jp[Ma(dt+ve,127)],it.Sc[1]=kp[Ma(dt+0,127)],it.Eb[0]=2*jp[Ma(dt+ue,127)],it.Eb[1]=101581*kp[Ma(dt+Be,127)]>>16,8>it.Eb[1]&&(it.Eb[1]=8),it.Qc[0]=jp[Ma(dt+Me,117)],it.Qc[1]=kp[Ma(dt+Fe,127)],it.lc=dt+Fe}if(!Se.Rb)return yn(I,4,"Not a key frame.");for(ie(ke),Se=I.Pa,re=0;4>re;++re){for(ve=0;8>ve;++ve)for(ue=0;3>ue;++ue)for(Be=0;11>Be;++Be)Me=ne(ke,XA[re][ve][ue][Be])?Q(ke,8):Tu[re][ve][ue][Be],Se.Wc[re][ve].Yb[ue][Be]=Me;for(ve=0;17>ve;++ve)Se.Xc[re][ve]=Se.Wc[re][vC[ve]]}return I.kc=ie(ke),I.kc&&(I.Bd=Q(ke,8)),I.cb=1}function g0(I,q,re,ue,ve,ke,Se){var Be=q[ve].Yb[re];for(re=0;16>ve;++ve){if(!ne(I,Be[re+0]))return ve;for(;!ne(I,Be[re+1]);)if(Be=q[++ve].Yb[0],re=0,ve==16)return 16;var Fe=q[ve+1].Yb;if(ne(I,Be[re+2])){var Me=I,Je=0;if(ne(Me,(dt=Be)[(At=re)+3]))if(ne(Me,dt[At+6])){for(Be=0,At=2*(Je=ne(Me,dt[At+8]))+(dt=ne(Me,dt[At+9+Je])),Je=0,dt=Zn[At];dt[Be];++Be)Je+=Je+ne(Me,dt[Be]);Je+=3+(8<<At)}else ne(Me,dt[At+7])?(Je=7+2*ne(Me,165),Je+=ne(Me,145)):Je=5+ne(Me,159);else Je=ne(Me,dt[At+4])?3+ne(Me,dt[At+5]):2;Be=Fe[2]}else Je=1,Be=Fe[1];Fe=Se+Oa[ve],0>(Me=I).b&&le(Me);var At,dt=Me.b,it=(At=Me.Ca>>1)-(Me.I>>dt)>>31;--Me.b,Me.Ca+=it,Me.Ca|=1,Me.I-=(At+1&it)<<dt,ke[Fe]=((Je^it)-it)*ue[(0<ve)+0]}return 16}function pu(I){var q=I.rb[I.sb-1];q.la=0,q.Na=0,n(I.zc,0,0,I.zc.length),I.ja=0}function FA(I,q){if(I==null)return 0;if(q==null)return yn(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!gf(I,q))return 0;if(t(I.cb),q.ac==null||q.ac(q)){q.ob&&(I.L=0);var re=_d[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=q.v-re>>4,I.zb=q.j-re>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=q.o+15+re>>4,I.Hb=q.va+15+re>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var ue=I.ed;for(re=0;4>re;++re){var ve;if(I.Qa.Cb){var ke=I.Qa.Lb[re];I.Qa.Fb||(ke+=ue.Tb)}else ke=ue.Tb;for(ve=0;1>=ve;++ve){var Se=I.gd[re][ve],Be=ke;if(ue.Pc&&(Be+=ue.vd[0],ve&&(Be+=ue.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var Fe=Be;0<ue.wb&&(Fe=4<ue.wb?Fe>>2:Fe>>1)>9-ue.wb&&(Fe=9-ue.wb),1>Fe&&(Fe=1),Se.dd=Fe,Se.tc=2*Be+Fe,Se.ld=40<=Be?2:15<=Be?1:0}else Se.tc=0;Se.La=ve}}}re=0}else yn(I,6,"Frame setup failed"),re=I.a;if(re=re==0){if(re){I.$c=0,0<I.Aa||(I.Ic=wC);e:{re=I.Ic,ue=4*(Fe=I.za);var Me=32*Fe,Je=Fe+1,At=0<I.L?Fe*(0<I.Aa?2:1):0,dt=(I.Aa==2?2:1)*Fe;if((Se=ue+832+(ve=3*(16*re+_d[I.L])/2*Me)+(ke=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=Se)re=0;else{if(Se>I.Vb){if(I.Vb=0,I.Ec=i(Se),I.Fc=0,I.Ec==null){re=yn(I,1,"no memory during frame initialization.");break e}I.Vb=Se}Se=I.Ec,Be=I.Fc,I.Ac=Se,I.Bc=Be,Be+=ue,I.Gd=o(Me,vs),I.Hd=0,I.rb=o(Je+1,ta),I.sb=1,I.wa=At?o(At,ea):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Fe),t(!0),I.oc=Se,I.pc=Be,Be+=832,I.ya=o(dt,xs),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Fe),I.R=16*Fe,I.B=8*Fe,Fe=(Me=_d[I.L])*I.R,Me=Me/2*I.B,I.sa=Se,I.ta=Be+Fe,I.qa=I.sa,I.ra=I.ta+16*re*I.R+Me,I.Ha=I.qa,I.Ia=I.ra+8*re*I.B+Me,I.$c=0,Be+=ve,I.mb=ke?Se:null,I.nb=ke?Be:null,t(Be+ke<=I.Fc+I.Vb),pu(I),n(I.Ac,I.Bc,0,ue),re=1}}if(re){if(q.ka=0,q.y=I.sa,q.O=I.ta,q.f=I.qa,q.N=I.ra,q.ea=I.Ha,q.Vd=I.Ia,q.fa=I.R,q.Rc=I.B,q.F=null,q.J=0,!wd){for(re=-255;255>=re;++re)is[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)Xl[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)Of[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)Ff[255+re]=0>re?0:255<re?255:re;wd=1}Su=Do,Fc=xu,Dc=Ql,ws=La,Ho=vu,Yn=gu,zA=Nu,_u=Tc,C0=yf,_f=MA,Bf=bf,Tf=md,VA=pd,E0=Cu,If=wl,yd=qi,$A=ys,Jn=b0,po[0]=$i,po[1]=x0,po[2]=Vl,po[3]=v0,po[4]=Po,po[5]=$l,po[6]=ho,po[7]=Ro,po[8]=Bc,po[9]=bu,kd[0]=Hl,kd[1]=PA,kd[2]=kc,kd[3]=vf,kd[4]=fn,kd[5]=_c,kd[6]=zl,El[0]=Gl,El[1]=DA,El[2]=RA,El[3]=Lo,El[4]=Aa,El[5]=bs,El[6]=yu,re=1}else re=0}re&&(re=function(it,Dt){for(it.M=0;it.M<it.Va;++it.M){var yt,Ze=it.Jc[it.M&it.Xb],rt=it.m,St=it;for(yt=0;yt<St.za;++yt){var Pt=rt,It=St,tr=It.Ac,Yt=It.Bc+4*yt,xr=It.zc,Zt=It.ya[It.aa+yt];if(It.Qa.Bb?Zt.$b=ne(Pt,It.Pa.jb[0])?2+ne(Pt,It.Pa.jb[2]):ne(Pt,It.Pa.jb[1]):Zt.$b=0,It.kc&&(Zt.Ad=ne(Pt,It.Bd)),Zt.Za=!ne(Pt,145)+0,Zt.Za){var Sa=Zt.Ob,Ua=0;for(It=0;4>It;++It){var oa,ra=xr[0+It];for(oa=0;4>oa;++oa){ra=Y1[tr[Yt+oa]][ra];for(var rn=Pf[ne(Pt,ra[0])];0<rn;)rn=Pf[2*rn+ne(Pt,ra[rn])];ra=-rn,tr[Yt+oa]=ra}a(Sa,Ua,tr,Yt,4),Ua+=4,xr[0+It]=ra}}else ra=ne(Pt,156)?ne(Pt,128)?1:3:ne(Pt,163)?2:0,Zt.Ob[0]=ra,n(tr,Yt,ra,4),n(xr,0,ra,4);Zt.Dd=ne(Pt,142)?ne(Pt,114)?ne(Pt,183)?1:3:2:0}if(St.m.Ka)return yn(it,7,"Premature end-of-partition0 encountered.");for(;it.ja<it.za;++it.ja){if(St=Ze,Pt=(rt=it).rb[rt.sb-1],tr=rt.rb[rt.sb+rt.ja],yt=rt.ya[rt.aa+rt.ja],Yt=rt.kc?yt.Ad:0)Pt.la=tr.la=0,yt.Za||(Pt.Na=tr.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var Qa,qr;if(Pt=tr,tr=St,Yt=rt.Pa.Xc,xr=rt.ya[rt.aa+rt.ja],Zt=rt.pb[xr.$b],It=xr.ad,Sa=0,Ua=rt.rb[rt.sb-1],ra=oa=0,n(It,Sa,0,384),xr.Za)var An=0,kr=Yt[3];else{rn=i(16);var Lr=Pt.Na+Ua.Na;if(Lr=zs(tr,Yt[1],Lr,Zt.Eb,0,rn,0),Pt.Na=Ua.Na=(0<Lr)+0,1<Lr)Su(rn,0,It,Sa);else{var ka=rn[0]+3>>3;for(rn=0;256>rn;rn+=16)It[Sa+rn]=ka}An=1,kr=Yt[0]}var _a=15&Pt.la,hi=15&Ua.la;for(rn=0;4>rn;++rn){var Gs=1&hi;for(ka=qr=0;4>ka;++ka)_a=_a>>1|(Gs=(Lr=zs(tr,kr,Lr=Gs+(1&_a),Zt.Sc,An,It,Sa))>An)<<7,qr=qr<<2|(3<Lr?3:1<Lr?2:It[Sa+0]!=0),Sa+=16;_a>>=4,hi=hi>>1|Gs<<7,oa=(oa<<8|qr)>>>0}for(kr=_a,An=hi>>4,Qa=0;4>Qa;Qa+=2){for(qr=0,_a=Pt.la>>4+Qa,hi=Ua.la>>4+Qa,rn=0;2>rn;++rn){for(Gs=1&hi,ka=0;2>ka;++ka)Lr=Gs+(1&_a),_a=_a>>1|(Gs=0<(Lr=zs(tr,Yt[2],Lr,Zt.Qc,0,It,Sa)))<<3,qr=qr<<2|(3<Lr?3:1<Lr?2:It[Sa+0]!=0),Sa+=16;_a>>=2,hi=hi>>1|Gs<<5}ra|=qr<<4*Qa,kr|=_a<<4<<Qa,An|=(240&hi)<<Qa}Pt.la=kr,Ua.la=An,xr.Hc=oa,xr.Gc=ra,xr.ia=43690&ra?0:Zt.ia,Yt=!(oa|ra)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[yt.$b][yt.Za],rt.wa[rt.Y+rt.ja].La|=!Yt),St.Ka)return yn(it,7,"Premature end-of-file encountered.")}if(pu(it),rt=Dt,St=1,yt=(Ze=it).D,Pt=0<Ze.L&&Ze.M>=Ze.zb&&Ze.M<=Ze.Va,Ze.Aa==0)e:{if(yt.M=Ze.M,yt.uc=Pt,Mo(Ze,yt),St=1,yt=(qr=Ze.D).Nb,Pt=(ra=_d[Ze.L])*Ze.R,tr=ra/2*Ze.B,rn=16*yt*Ze.R,ka=8*yt*Ze.B,Yt=Ze.sa,xr=Ze.ta-Pt+rn,Zt=Ze.qa,It=Ze.ra-tr+ka,Sa=Ze.Ha,Ua=Ze.Ia-tr+ka,hi=(_a=qr.M)==0,oa=_a>=Ze.Va-1,Ze.Aa==2&&Mo(Ze,qr),qr.uc)for(Gs=(Lr=Ze).D.M,t(Lr.D.uc),qr=Lr.yb;qr<Lr.Hb;++qr){An=qr,kr=Gs;var os=(ls=(Rn=Lr).D).Nb;Qa=Rn.R;var ls=ls.wa[ls.Y+An],Ns=Rn.sa,Zl=Rn.ta+16*os*Qa+16*An,Ha=ls.dd,Cs=ls.tc;if(Cs!=0)if(t(3<=Cs),Rn.L==1)0<An&&yd(Ns,Zl,Qa,Cs+4),ls.La&&Jn(Ns,Zl,Qa,Cs),0<kr&&If(Ns,Zl,Qa,Cs+4),ls.La&&$A(Ns,Zl,Qa,Cs);else{var Pc=Rn.B,Mf=Rn.qa,JA=Rn.ra+8*os*Pc+8*An,Uf=Rn.Ha,Rn=Rn.Ia+8*os*Pc+8*An;os=ls.ld,0<An&&(_u(Ns,Zl,Qa,Cs+4,Ha,os),_f(Mf,JA,Uf,Rn,Pc,Cs+4,Ha,os)),ls.La&&(Tf(Ns,Zl,Qa,Cs,Ha,os),E0(Mf,JA,Uf,Rn,Pc,Cs,Ha,os)),0<kr&&(zA(Ns,Zl,Qa,Cs+4,Ha,os),C0(Mf,JA,Uf,Rn,Pc,Cs+4,Ha,os)),ls.La&&(Bf(Ns,Zl,Qa,Cs,Ha,os),VA(Mf,JA,Uf,Rn,Pc,Cs,Ha,os))}}if(Ze.ia&&alert("todo:DitherRow"),rt.put!=null){if(qr=16*_a,_a=16*(_a+1),hi?(rt.y=Ze.sa,rt.O=Ze.ta+rn,rt.f=Ze.qa,rt.N=Ze.ra+ka,rt.ea=Ze.Ha,rt.W=Ze.Ia+ka):(qr-=ra,rt.y=Yt,rt.O=xr,rt.f=Zt,rt.N=It,rt.ea=Sa,rt.W=Ua),oa||(_a-=ra),_a>rt.o&&(_a=rt.o),rt.F=null,rt.J=null,Ze.Fa!=null&&0<Ze.Fa.length&&qr<_a&&(rt.J=Nf(Ze,rt,qr,_a-qr),rt.F=Ze.mb,rt.F==null&&rt.F.length==0)){St=yn(Ze,3,"Could not decode alpha data.");break e}qr<rt.j&&(ra=rt.j-qr,qr=rt.j,t(!(1&ra)),rt.O+=Ze.R*ra,rt.N+=Ze.B*(ra>>1),rt.W+=Ze.B*(ra>>1),rt.F!=null&&(rt.J+=rt.width*ra)),qr<_a&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=qr-rt.j,rt.U=rt.va-rt.v,rt.T=_a-qr,St=rt.put(rt))}yt+1!=Ze.Ic||oa||(a(Ze.sa,Ze.ta-Pt,Yt,xr+16*Ze.R,Pt),a(Ze.qa,Ze.ra-tr,Zt,It+8*Ze.B,tr),a(Ze.Ha,Ze.Ia-tr,Sa,Ua+8*Ze.B,tr))}if(!St)return yn(it,6,"Output aborted.")}return 1}(I,q)),q.bc!=null&&q.bc(q),re&=1}return re?(I.cb=0,re):0}function Si(I,q,re,ue,ve){ve=I[q+re+32*ue]+(ve>>3),I[q+re+32*ue]=-256&ve?0>ve?0:255:ve}function xf(I,q,re,ue,ve,ke){Si(I,q,0,re,ue+ve),Si(I,q,1,re,ue+ke),Si(I,q,2,re,ue-ke),Si(I,q,3,re,ue-ve)}function ja(I){return(20091*I>>16)+I}function _i(I,q,re,ue){var ve,ke=0,Se=i(16);for(ve=0;4>ve;++ve){var Be=I[q+0]+I[q+8],Fe=I[q+0]-I[q+8],Me=(35468*I[q+4]>>16)-ja(I[q+12]),Je=ja(I[q+4])+(35468*I[q+12]>>16);Se[ke+0]=Be+Je,Se[ke+1]=Fe+Me,Se[ke+2]=Fe-Me,Se[ke+3]=Be-Je,ke+=4,q++}for(ve=ke=0;4>ve;++ve)Be=(I=Se[ke+0]+4)+Se[ke+8],Fe=I-Se[ke+8],Me=(35468*Se[ke+4]>>16)-ja(Se[ke+12]),Si(re,ue,0,0,Be+(Je=ja(Se[ke+4])+(35468*Se[ke+12]>>16))),Si(re,ue,1,0,Fe+Me),Si(re,ue,2,0,Fe-Me),Si(re,ue,3,0,Be-Je),ke++,ue+=32}function gu(I,q,re,ue){var ve=I[q+0]+4,ke=35468*I[q+4]>>16,Se=ja(I[q+4]),Be=35468*I[q+1]>>16;xf(re,ue,0,ve+Se,I=ja(I[q+1]),Be),xf(re,ue,1,ve+ke,I,Be),xf(re,ue,2,ve-ke,I,Be),xf(re,ue,3,ve-Se,I,Be)}function xu(I,q,re,ue,ve){_i(I,q,re,ue),ve&&_i(I,q+16,re,ue+4)}function Ql(I,q,re,ue){Fc(I,q+0,re,ue,1),Fc(I,q+32,re,ue+128,1)}function La(I,q,re,ue){var ve;for(I=I[q+0]+4,ve=0;4>ve;++ve)for(q=0;4>q;++q)Si(re,ue,q,ve,I)}function vu(I,q,re,ue){I[q+0]&&ws(I,q+0,re,ue),I[q+16]&&ws(I,q+16,re,ue+4),I[q+32]&&ws(I,q+32,re,ue+128),I[q+48]&&ws(I,q+48,re,ue+128+4)}function Do(I,q,re,ue){var ve,ke=i(16);for(ve=0;4>ve;++ve){var Se=I[q+0+ve]+I[q+12+ve],Be=I[q+4+ve]+I[q+8+ve],Fe=I[q+4+ve]-I[q+8+ve],Me=I[q+0+ve]-I[q+12+ve];ke[0+ve]=Se+Be,ke[8+ve]=Se-Be,ke[4+ve]=Me+Fe,ke[12+ve]=Me-Fe}for(ve=0;4>ve;++ve)Se=(I=ke[0+4*ve]+3)+ke[3+4*ve],Be=ke[1+4*ve]+ke[2+4*ve],Fe=ke[1+4*ve]-ke[2+4*ve],Me=I-ke[3+4*ve],re[ue+0]=Se+Be>>3,re[ue+16]=Me+Fe>>3,re[ue+32]=Se-Be>>3,re[ue+48]=Me-Fe>>3,ue+=64}function jc(I,q,re){var ue,ve=q-32,ke=fi,Se=255-I[ve-1];for(ue=0;ue<re;++ue){var Be,Fe=ke,Me=Se+I[q-1];for(Be=0;Be<re;++Be)I[q+Be]=Fe[Me+I[ve+Be]];q+=32}}function x0(I,q){jc(I,q,4)}function DA(I,q){jc(I,q,8)}function PA(I,q){jc(I,q,16)}function kc(I,q){var re;for(re=0;16>re;++re)a(I,q+32*re,I,q-32,16)}function vf(I,q){var re;for(re=16;0<re;--re)n(I,q,I[q-1],16),q+=32}function Sc(I,q,re){var ue;for(ue=0;16>ue;++ue)n(q,re+32*ue,I,16)}function Hl(I,q){var re,ue=16;for(re=0;16>re;++re)ue+=I[q-1+32*re]+I[q+re-32];Sc(ue>>5,I,q)}function fn(I,q){var re,ue=8;for(re=0;16>re;++re)ue+=I[q-1+32*re];Sc(ue>>4,I,q)}function _c(I,q){var re,ue=8;for(re=0;16>re;++re)ue+=I[q+re-32];Sc(ue>>4,I,q)}function zl(I,q){Sc(128,I,q)}function Br(I,q,re){return I+2*q+re+2>>2}function Vl(I,q){var re,ue=q-32;for(ue=new Uint8Array([Br(I[ue-1],I[ue+0],I[ue+1]),Br(I[ue+0],I[ue+1],I[ue+2]),Br(I[ue+1],I[ue+2],I[ue+3]),Br(I[ue+2],I[ue+3],I[ue+4])]),re=0;4>re;++re)a(I,q+32*re,ue,0,ue.length)}function v0(I,q){var re=I[q-1],ue=I[q-1+32],ve=I[q-1+64],ke=I[q-1+96];oe(I,q+0,16843009*Br(I[q-1-32],re,ue)),oe(I,q+32,16843009*Br(re,ue,ve)),oe(I,q+64,16843009*Br(ue,ve,ke)),oe(I,q+96,16843009*Br(ve,ke,ke))}function $i(I,q){var re,ue=4;for(re=0;4>re;++re)ue+=I[q+re-32]+I[q-1+32*re];for(ue>>=3,re=0;4>re;++re)n(I,q+32*re,ue,4)}function Po(I,q){var re=I[q-1+0],ue=I[q-1+32],ve=I[q-1+64],ke=I[q-1-32],Se=I[q+0-32],Be=I[q+1-32],Fe=I[q+2-32],Me=I[q+3-32];I[q+0+96]=Br(ue,ve,I[q-1+96]),I[q+1+96]=I[q+0+64]=Br(re,ue,ve),I[q+2+96]=I[q+1+64]=I[q+0+32]=Br(ke,re,ue),I[q+3+96]=I[q+2+64]=I[q+1+32]=I[q+0+0]=Br(Se,ke,re),I[q+3+64]=I[q+2+32]=I[q+1+0]=Br(Be,Se,ke),I[q+3+32]=I[q+2+0]=Br(Fe,Be,Se),I[q+3+0]=Br(Me,Fe,Be)}function ho(I,q){var re=I[q+1-32],ue=I[q+2-32],ve=I[q+3-32],ke=I[q+4-32],Se=I[q+5-32],Be=I[q+6-32],Fe=I[q+7-32];I[q+0+0]=Br(I[q+0-32],re,ue),I[q+1+0]=I[q+0+32]=Br(re,ue,ve),I[q+2+0]=I[q+1+32]=I[q+0+64]=Br(ue,ve,ke),I[q+3+0]=I[q+2+32]=I[q+1+64]=I[q+0+96]=Br(ve,ke,Se),I[q+3+32]=I[q+2+64]=I[q+1+96]=Br(ke,Se,Be),I[q+3+64]=I[q+2+96]=Br(Se,Be,Fe),I[q+3+96]=Br(Be,Fe,Fe)}function $l(I,q){var re=I[q-1+0],ue=I[q-1+32],ve=I[q-1+64],ke=I[q-1-32],Se=I[q+0-32],Be=I[q+1-32],Fe=I[q+2-32],Me=I[q+3-32];I[q+0+0]=I[q+1+64]=ke+Se+1>>1,I[q+1+0]=I[q+2+64]=Se+Be+1>>1,I[q+2+0]=I[q+3+64]=Be+Fe+1>>1,I[q+3+0]=Fe+Me+1>>1,I[q+0+96]=Br(ve,ue,re),I[q+0+64]=Br(ue,re,ke),I[q+0+32]=I[q+1+96]=Br(re,ke,Se),I[q+1+32]=I[q+2+96]=Br(ke,Se,Be),I[q+2+32]=I[q+3+96]=Br(Se,Be,Fe),I[q+3+32]=Br(Be,Fe,Me)}function Ro(I,q){var re=I[q+0-32],ue=I[q+1-32],ve=I[q+2-32],ke=I[q+3-32],Se=I[q+4-32],Be=I[q+5-32],Fe=I[q+6-32],Me=I[q+7-32];I[q+0+0]=re+ue+1>>1,I[q+1+0]=I[q+0+64]=ue+ve+1>>1,I[q+2+0]=I[q+1+64]=ve+ke+1>>1,I[q+3+0]=I[q+2+64]=ke+Se+1>>1,I[q+0+32]=Br(re,ue,ve),I[q+1+32]=I[q+0+96]=Br(ue,ve,ke),I[q+2+32]=I[q+1+96]=Br(ve,ke,Se),I[q+3+32]=I[q+2+96]=Br(ke,Se,Be),I[q+3+64]=Br(Se,Be,Fe),I[q+3+96]=Br(Be,Fe,Me)}function bu(I,q){var re=I[q-1+0],ue=I[q-1+32],ve=I[q-1+64],ke=I[q-1+96];I[q+0+0]=re+ue+1>>1,I[q+2+0]=I[q+0+32]=ue+ve+1>>1,I[q+2+32]=I[q+0+64]=ve+ke+1>>1,I[q+1+0]=Br(re,ue,ve),I[q+3+0]=I[q+1+32]=Br(ue,ve,ke),I[q+3+32]=I[q+1+64]=Br(ve,ke,ke),I[q+3+64]=I[q+2+64]=I[q+0+96]=I[q+1+96]=I[q+2+96]=I[q+3+96]=ke}function Bc(I,q){var re=I[q-1+0],ue=I[q-1+32],ve=I[q-1+64],ke=I[q-1+96],Se=I[q-1-32],Be=I[q+0-32],Fe=I[q+1-32],Me=I[q+2-32];I[q+0+0]=I[q+2+32]=re+Se+1>>1,I[q+0+32]=I[q+2+64]=ue+re+1>>1,I[q+0+64]=I[q+2+96]=ve+ue+1>>1,I[q+0+96]=ke+ve+1>>1,I[q+3+0]=Br(Be,Fe,Me),I[q+2+0]=Br(Se,Be,Fe),I[q+1+0]=I[q+3+32]=Br(re,Se,Be),I[q+1+32]=I[q+3+64]=Br(ue,re,Se),I[q+1+64]=I[q+3+96]=Br(ve,ue,re),I[q+1+96]=Br(ke,ve,ue)}function RA(I,q){var re;for(re=0;8>re;++re)a(I,q+32*re,I,q-32,8)}function Lo(I,q){var re;for(re=0;8>re;++re)n(I,q,I[q-1],8),q+=32}function Gi(I,q,re){var ue;for(ue=0;8>ue;++ue)n(q,re+32*ue,I,8)}function Gl(I,q){var re,ue=8;for(re=0;8>re;++re)ue+=I[q+re-32]+I[q-1+32*re];Gi(ue>>4,I,q)}function bs(I,q){var re,ue=4;for(re=0;8>re;++re)ue+=I[q+re-32];Gi(ue>>3,I,q)}function Aa(I,q){var re,ue=4;for(re=0;8>re;++re)ue+=I[q-1+32*re];Gi(ue>>3,I,q)}function yu(I,q){Gi(128,I,q)}function ql(I,q,re){var ue=I[q-re],ve=I[q+0],ke=3*(ve-ue)+bx[1020+I[q-2*re]-I[q+re]],Se=GA[112+(ke+4>>3)];I[q-re]=fi[255+ue+GA[112+(ke+3>>3)]],I[q+0]=fi[255+ve-Se]}function LA(I,q,re,ue){var ve=I[q+0],ke=I[q+re];return Yl[255+I[q-2*re]-I[q-re]]>ue||Yl[255+ke-ve]>ue}function Ad(I,q,re,ue){return 4*Yl[255+I[q-re]-I[q+0]]+Yl[255+I[q-2*re]-I[q+re]]<=ue}function hd(I,q,re,ue,ve){var ke=I[q-3*re],Se=I[q-2*re],Be=I[q-re],Fe=I[q+0],Me=I[q+re],Je=I[q+2*re],At=I[q+3*re];return 4*Yl[255+Be-Fe]+Yl[255+Se-Me]>ue?0:Yl[255+I[q-4*re]-ke]<=ve&&Yl[255+ke-Se]<=ve&&Yl[255+Se-Be]<=ve&&Yl[255+At-Je]<=ve&&Yl[255+Je-Me]<=ve&&Yl[255+Me-Fe]<=ve}function wl(I,q,re,ue){var ve=2*ue+1;for(ue=0;16>ue;++ue)Ad(I,q+ue,re,ve)&&ql(I,q+ue,re)}function qi(I,q,re,ue){var ve=2*ue+1;for(ue=0;16>ue;++ue)Ad(I,q+ue*re,1,ve)&&ql(I,q+ue*re,1)}function ys(I,q,re,ue){var ve;for(ve=3;0<ve;--ve)wl(I,q+=4*re,re,ue)}function b0(I,q,re,ue){var ve;for(ve=3;0<ve;--ve)qi(I,q+=4,re,ue)}function wu(I,q,re,ue,ve,ke,Se,Be){for(ke=2*ke+1;0<ve--;){if(hd(I,q,re,ke,Se))if(LA(I,q,re,Be))ql(I,q,re);else{var Fe=I,Me=q,Je=re,At=Fe[Me-2*Je],dt=Fe[Me-Je],it=Fe[Me+0],Dt=Fe[Me+Je],yt=Fe[Me+2*Je],Ze=27*(St=bx[1020+3*(it-dt)+bx[1020+At-Dt]])+63>>7,rt=18*St+63>>7,St=9*St+63>>7;Fe[Me-3*Je]=fi[255+Fe[Me-3*Je]+St],Fe[Me-2*Je]=fi[255+At+rt],Fe[Me-Je]=fi[255+dt+Ze],Fe[Me+0]=fi[255+it-Ze],Fe[Me+Je]=fi[255+Dt-rt],Fe[Me+2*Je]=fi[255+yt-St]}q+=ue}}function Bi(I,q,re,ue,ve,ke,Se,Be){for(ke=2*ke+1;0<ve--;){if(hd(I,q,re,ke,Se))if(LA(I,q,re,Be))ql(I,q,re);else{var Fe=I,Me=q,Je=re,At=Fe[Me-Je],dt=Fe[Me+0],it=Fe[Me+Je],Dt=GA[112+((yt=3*(dt-At))+4>>3)],yt=GA[112+(yt+3>>3)],Ze=Dt+1>>1;Fe[Me-2*Je]=fi[255+Fe[Me-2*Je]+Ze],Fe[Me-Je]=fi[255+At+yt],Fe[Me+0]=fi[255+dt-Dt],Fe[Me+Je]=fi[255+it-Ze]}q+=ue}}function Nu(I,q,re,ue,ve,ke){wu(I,q,re,1,16,ue,ve,ke)}function Tc(I,q,re,ue,ve,ke){wu(I,q,1,re,16,ue,ve,ke)}function bf(I,q,re,ue,ve,ke){var Se;for(Se=3;0<Se;--Se)Bi(I,q+=4*re,re,1,16,ue,ve,ke)}function md(I,q,re,ue,ve,ke){var Se;for(Se=3;0<Se;--Se)Bi(I,q+=4,1,re,16,ue,ve,ke)}function yf(I,q,re,ue,ve,ke,Se,Be){wu(I,q,ve,1,8,ke,Se,Be),wu(re,ue,ve,1,8,ke,Se,Be)}function MA(I,q,re,ue,ve,ke,Se,Be){wu(I,q,1,ve,8,ke,Se,Be),wu(re,ue,1,ve,8,ke,Se,Be)}function pd(I,q,re,ue,ve,ke,Se,Be){Bi(I,q+4*ve,ve,1,8,ke,Se,Be),Bi(re,ue+4*ve,ve,1,8,ke,Se,Be)}function Cu(I,q,re,ue,ve,ke,Se,Be){Bi(I,q+4,1,ve,8,ke,Se,Be),Bi(re,ue+4,1,ve,8,ke,Se,Be)}function gd(){this.ba=new Ra,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function xd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Eu(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new k}function y0(){this.xb=this.a=0,this.l=new Qs,this.ca=new Ra,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Eu,this.ab=0,this.gc=o(4,xd),this.Oc=0}function Ic(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ju(I,q,re,ue,ve,ke,Se){for(I=I==null?0:I[q+0],q=0;q<Se;++q)ve[ke+q]=I+re[ue+q]&255,I=ve[ke+q]}function vd(I,q,re,ue,ve,ke,Se){var Be;if(I==null)ju(null,null,re,ue,ve,ke,Se);else for(Be=0;Be<Se;++Be)ve[ke+Be]=I[q+Be]+re[ue+Be]&255}function Ki(I,q,re,ue,ve,ke,Se){if(I==null)ju(null,null,re,ue,ve,ke,Se);else{var Be,Fe=I[q+0],Me=Fe,Je=Fe;for(Be=0;Be<Se;++Be)Me=Je+(Fe=I[q+Be])-Me,Je=re[ue+Be]+(-256&Me?0>Me?0:255:Me)&255,Me=Fe,ve[ke+Be]=Je}}function Nf(I,q,re,ue){var ve=q.width,ke=q.o;if(t(I!=null&&q!=null),0>re||0>=ue||re+ue>ke)return null;if(!I.Cc){if(I.ga==null){var Se;if(I.ga=new Ic,(Se=I.ga==null)||(Se=q.width*q.o,t(I.Gb.length==0),I.Gb=i(Se),I.Uc=0,I.Gb==null?Se=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,Se=1),Se=!Se),!Se){Se=I.ga;var Be=I.Fa,Fe=I.P,Me=I.qc,Je=I.mb,At=I.nb,dt=Fe+1,it=Me-1,Dt=Se.l;if(t(Be!=null&&Je!=null&&q!=null),Iu[0]=null,Iu[1]=ju,Iu[2]=vd,Iu[3]=Ki,Se.ca=Je,Se.tb=At,Se.c=q.width,Se.i=q.height,t(0<Se.c&&0<Se.i),1>=Me)q=0;else if(Se.$a=Be[Fe+0]>>0&3,Se.Z=Be[Fe+0]>>2&3,Se.Lc=Be[Fe+0]>>4&3,Fe=Be[Fe+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Fe)q=0;else if(Dt.put=Pn,Dt.ac=Za,Dt.bc=Us,Dt.ma=Se,Dt.width=q.width,Dt.height=q.height,Dt.Da=q.Da,Dt.v=q.v,Dt.va=q.va,Dt.j=q.j,Dt.o=q.o,Se.$a)e:{t(Se.$a==1),q=He();t:for(;;){if(q==null){q=0;break e}if(t(Se!=null),Se.mc=q,q.c=Se.c,q.i=Se.i,q.l=Se.l,q.l.ma=Se,q.l.width=Se.c,q.l.height=Se.i,q.a=0,G(q.m,Be,dt,it),!Re(Se.c,Se.i,1,q,null)||(q.ab==1&&q.gc[0].hc==3&&De(q.s)?(Se.ic=1,Be=q.c*q.i,q.Ta=null,q.Ua=0,q.V=i(Be),q.Ba=0,q.V==null?(q.a=1,q=0):q=1):(Se.ic=0,q=We(q,Se.c)),!q))break t;q=1;break e}Se.mc=null,q=0}else q=it>=Se.c*Se.i;Se=!q}if(Se)return null;I.ga.Lc!=1?I.Ga=0:ue=ke-re}t(I.ga!=null),t(re+ue<=ke);e:{if(q=(Be=I.ga).c,ke=Be.l.o,Be.$a==0){if(dt=I.rc,it=I.Vc,Dt=I.Fa,Fe=I.P+1+re*q,Me=I.mb,Je=I.nb+re*q,t(Fe<=I.P+I.qc),Be.Z!=0)for(t(Iu[Be.Z]!=null),Se=0;Se<ue;++Se)Iu[Be.Z](dt,it,Dt,Fe,Me,Je,q),dt=Me,it=Je,Je+=q,Fe+=q;else for(Se=0;Se<ue;++Se)a(Me,Je,Dt,Fe,q),dt=Me,it=Je,Je+=q,Fe+=q;I.rc=dt,I.Vc=it}else{if(t(Be.mc!=null),q=re+ue,t((Se=Be.mc)!=null),t(q<=Se.i),Se.C>=q)q=1;else if(Be.ic||st(),Be.ic){Be=Se.V,dt=Se.Ba,it=Se.c;var yt=Se.i,Ze=(Dt=1,Fe=Se.$/it,Me=Se.$%it,Je=Se.m,At=Se.s,Se.$),rt=it*yt,St=it*q,Pt=At.wc,It=Ze<St?en(At,Me,Fe):null;t(Ze<=rt),t(q<=yt),t(De(At));t:for(;;){for(;!Je.h&&Ze<St;){if(Me&Pt||(It=en(At,Me,Fe)),t(It!=null),ae(Je),256>(yt=Ia(It.G[0],It.H[0],Je)))Be[dt+Ze]=yt,++Ze,++Me>=it&&(Me=0,++Fe<=q&&!(Fe%16)&&ge(Se,Fe));else{if(!(280>yt)){Dt=0;break t}yt=xa(yt-256,Je);var tr,Yt=Ia(It.G[4],It.H[4],Je);if(ae(Je),!(Ze>=(Yt=la(it,Yt=xa(Yt,Je)))&&rt-Ze>=yt)){Dt=0;break t}for(tr=0;tr<yt;++tr)Be[dt+Ze+tr]=Be[dt+Ze+tr-Yt];for(Ze+=yt,Me+=yt;Me>=it;)Me-=it,++Fe<=q&&!(Fe%16)&&ge(Se,Fe);Ze<St&&Me&Pt&&(It=en(At,Me,Fe))}t(Je.h==X(Je))}ge(Se,Fe>q?q:Fe);break t}!Dt||Je.h&&Ze<rt?(Dt=0,Se.a=Je.h?5:3):Se.$=Ze,q=Dt}else q=me(Se,Se.V,Se.Ba,Se.c,Se.i,q,Ye);if(!q){ue=0;break e}}re+ue>=ke&&(I.Cc=1),ue=1}if(!ue)return null;if(I.Cc&&((ue=I.ga)!=null&&(ue.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+re*ve}function te(I,q,re,ue,ve,ke){for(;0<ve--;){var Se,Be=I,Fe=q+(re?1:0),Me=I,Je=q+(re?0:3);for(Se=0;Se<ue;++Se){var At=Me[Je+4*Se];At!=255&&(At*=32897,Be[Fe+4*Se+0]=Be[Fe+4*Se+0]*At>>23,Be[Fe+4*Se+1]=Be[Fe+4*Se+1]*At>>23,Be[Fe+4*Se+2]=Be[Fe+4*Se+2]*At>>23)}q+=ke}}function be(I,q,re,ue,ve){for(;0<ue--;){var ke;for(ke=0;ke<re;++ke){var Se=I[q+2*ke+0],Be=15&(Me=I[q+2*ke+1]),Fe=4369*Be,Me=(240&Me|Me>>4)*Fe>>16;I[q+2*ke+0]=(240&Se|Se>>4)*Fe>>16&240|(15&Se|Se<<4)*Fe>>16>>4&15,I[q+2*ke+1]=240&Me|Be}q+=ve}}function Ve(I,q,re,ue,ve,ke,Se,Be){var Fe,Me,Je=255;for(Me=0;Me<ve;++Me){for(Fe=0;Fe<ue;++Fe){var At=I[q+Fe];ke[Se+4*Fe]=At,Je&=At}q+=re,Se+=Be}return Je!=255}function Xe(I,q,re,ue,ve){var ke;for(ke=0;ke<ve;++ke)re[ue+ke]=I[q+ke]>>8}function st(){Nl=te,ca=be,ua=Ve,wn=Xe}function Ct(I,q,re){S[I]=function(ue,ve,ke,Se,Be,Fe,Me,Je,At,dt,it,Dt,yt,Ze,rt,St,Pt){var It,tr=Pt-1>>1,Yt=Be[Fe+0]|Me[Je+0]<<16,xr=At[dt+0]|it[Dt+0]<<16;t(ue!=null);var Zt=3*Yt+xr+131074>>2;for(q(ue[ve+0],255&Zt,Zt>>16,yt,Ze),ke!=null&&(Zt=3*xr+Yt+131074>>2,q(ke[Se+0],255&Zt,Zt>>16,rt,St)),It=1;It<=tr;++It){var Sa=Be[Fe+It]|Me[Je+It]<<16,Ua=At[dt+It]|it[Dt+It]<<16,oa=Yt+Sa+xr+Ua+524296,ra=oa+2*(Sa+xr)>>3;Zt=ra+Yt>>1,Yt=(oa=oa+2*(Yt+Ua)>>3)+Sa>>1,q(ue[ve+2*It-1],255&Zt,Zt>>16,yt,Ze+(2*It-1)*re),q(ue[ve+2*It-0],255&Yt,Yt>>16,yt,Ze+(2*It-0)*re),ke!=null&&(Zt=oa+xr>>1,Yt=ra+Ua>>1,q(ke[Se+2*It-1],255&Zt,Zt>>16,rt,St+(2*It-1)*re),q(ke[Se+2*It+0],255&Yt,Yt>>16,rt,St+(2*It+0)*re)),Yt=Sa,xr=Ua}1&Pt||(Zt=3*Yt+xr+131074>>2,q(ue[ve+Pt-1],255&Zt,Zt>>16,yt,Ze+(Pt-1)*re),ke!=null&&(Zt=3*xr+Yt+131074>>2,q(ke[Se+Pt-1],255&Zt,Zt>>16,rt,St+(Pt-1)*re)))}}function Qt(){Ai[Wi]=Sd,Ai[j0]=Ou,Ai[Bu]=Rf,Ai[Cp]=Nx,Ai[qA]=Cx,Ai[Nd]=_0,Ai[yx]=Ex,Ai[Ep]=Ou,Ai[Df]=Nx,Ai[Cd]=Cx,Ai[k0]=_0}function Jt(I){return I&-16384?0>I?0:255:I>>p3}function P(I,q){return Jt((19077*I>>8)+(26149*q>>8)-14234)}function se(I,q,re){return Jt((19077*I>>8)-(6419*q>>8)-(13320*re>>8)+8708)}function fe(I,q){return Jt((19077*I>>8)+(33050*q>>8)-17685)}function Te(I,q,re,ue,ve){ue[ve+0]=P(I,re),ue[ve+1]=se(I,q,re),ue[ve+2]=fe(I,q)}function at(I,q,re,ue,ve){ue[ve+0]=fe(I,q),ue[ve+1]=se(I,q,re),ue[ve+2]=P(I,re)}function ht(I,q,re,ue,ve){var ke=se(I,q,re);q=ke<<3&224|fe(I,q)>>3,ue[ve+0]=248&P(I,re)|ke>>5,ue[ve+1]=q}function Ht(I,q,re,ue,ve){var ke=240&fe(I,q)|15;ue[ve+0]=240&P(I,re)|se(I,q,re)>>4,ue[ve+1]=ke}function Tr(I,q,re,ue,ve){ue[ve+0]=255,Te(I,q,re,ue,ve+1)}function ha(I,q,re,ue,ve){at(I,q,re,ue,ve),ue[ve+3]=255}function Gr(I,q,re,ue,ve){Te(I,q,re,ue,ve),ue[ve+3]=255}function Ma(I,q){return 0>I?0:I>q?q:I}function tn(I,q,re){S[I]=function(ue,ve,ke,Se,Be,Fe,Me,Je,At){for(var dt=Je+(-2&At)*re;Je!=dt;)q(ue[ve+0],ke[Se+0],Be[Fe+0],Me,Je),q(ue[ve+1],ke[Se+0],Be[Fe+0],Me,Je+re),ve+=2,++Se,++Fe,Je+=2*re;1&At&&q(ue[ve+0],ke[Se+0],Be[Fe+0],Me,Je)}}function Kl(I,q,re){return re==0?I==0?q==0?6:5:q==0?4:0:re}function ss(I,q,re,ue,ve){switch(I>>>30){case 3:Fc(q,re,ue,ve,0);break;case 2:Yn(q,re,ue,ve);break;case 1:ws(q,re,ue,ve)}}function Mo(I,q){var re,ue,ve=q.M,ke=q.Nb,Se=I.oc,Be=I.pc+40,Fe=I.oc,Me=I.pc+584,Je=I.oc,At=I.pc+600;for(re=0;16>re;++re)Se[Be+32*re-1]=129;for(re=0;8>re;++re)Fe[Me+32*re-1]=129,Je[At+32*re-1]=129;for(0<ve?Se[Be-1-32]=Fe[Me-1-32]=Je[At-1-32]=129:(n(Se,Be-32-1,127,21),n(Fe,Me-32-1,127,9),n(Je,At-32-1,127,9)),ue=0;ue<I.za;++ue){var dt=q.ya[q.aa+ue];if(0<ue){for(re=-1;16>re;++re)a(Se,Be+32*re-4,Se,Be+32*re+12,4);for(re=-1;8>re;++re)a(Fe,Me+32*re-4,Fe,Me+32*re+4,4),a(Je,At+32*re-4,Je,At+32*re+4,4)}var it=I.Gd,Dt=I.Hd+ue,yt=dt.ad,Ze=dt.Hc;if(0<ve&&(a(Se,Be-32,it[Dt].y,0,16),a(Fe,Me-32,it[Dt].f,0,8),a(Je,At-32,it[Dt].ea,0,8)),dt.Za){var rt=Se,St=Be-32+16;for(0<ve&&(ue>=I.za-1?n(rt,St,it[Dt].y[15],4):a(rt,St,it[Dt+1].y,0,4)),re=0;4>re;re++)rt[St+128+re]=rt[St+256+re]=rt[St+384+re]=rt[St+0+re];for(re=0;16>re;++re,Ze<<=2)rt=Se,St=Be+YA[re],po[dt.Ob[re]](rt,St),ss(Ze,yt,16*+re,rt,St)}else if(rt=Kl(ue,ve,dt.Ob[0]),kd[rt](Se,Be),Ze!=0)for(re=0;16>re;++re,Ze<<=2)ss(Ze,yt,16*+re,Se,Be+YA[re]);for(re=dt.Gc,rt=Kl(ue,ve,dt.Dd),El[rt](Fe,Me),El[rt](Je,At),Ze=yt,rt=Fe,St=Me,255&(dt=re>>0)&&(170&dt?Dc(Ze,256,rt,St):Ho(Ze,256,rt,St)),dt=Je,Ze=At,255&(re>>=8)&&(170&re?Dc(yt,320,dt,Ze):Ho(yt,320,dt,Ze)),ve<I.Ub-1&&(a(it[Dt].y,0,Se,Be+480,16),a(it[Dt].f,0,Fe,Me+224,8),a(it[Dt].ea,0,Je,At+224,8)),re=8*ke*I.B,it=I.sa,Dt=I.ta+16*ue+16*ke*I.R,yt=I.qa,dt=I.ra+8*ue+re,Ze=I.Ha,rt=I.Ia+8*ue+re,re=0;16>re;++re)a(it,Dt+re*I.R,Se,Be+32*re,16);for(re=0;8>re;++re)a(yt,dt+re*I.B,Fe,Me+32*re,8),a(Ze,rt+re*I.B,Je,At+32*re,8)}}function ku(I,q,re,ue,ve,ke,Se,Be,Fe){var Me=[0],Je=[0],At=0,dt=Fe!=null?Fe.kd:0,it=Fe??new wf;if(I==null||12>re)return 7;it.data=I,it.w=q,it.ha=re,q=[q],re=[re],it.gb=[it.gb];e:{var Dt=q,yt=re,Ze=it.gb;if(t(I!=null),t(yt!=null),t(Ze!=null),Ze[0]=0,12<=yt[0]&&!r(I,Dt[0],"RIFF")){if(r(I,Dt[0]+8,"WEBP")){Ze=3;break e}var rt=Ee(I,Dt[0]+4);if(12>rt||4294967286<rt){Ze=3;break e}if(dt&&rt>yt[0]-8){Ze=7;break e}Ze[0]=rt,Dt[0]+=12,yt[0]-=12}Ze=0}if(Ze!=0)return Ze;for(rt=0<it.gb[0],re=re[0];;){e:{var St=I;yt=q,Ze=re;var Pt=Me,It=Je,tr=Dt=[0];if((Zt=At=[At])[0]=0,8>Ze[0])Ze=7;else{if(!r(St,yt[0],"VP8X")){if(Ee(St,yt[0]+4)!=10){Ze=3;break e}if(18>Ze[0]){Ze=7;break e}var Yt=Ee(St,yt[0]+8),xr=1+K(St,yt[0]+12);if(2147483648<=xr*(St=1+K(St,yt[0]+15))){Ze=3;break e}tr!=null&&(tr[0]=Yt),Pt!=null&&(Pt[0]=xr),It!=null&&(It[0]=St),yt[0]+=18,Ze[0]-=18,Zt[0]=1}Ze=0}}if(At=At[0],Dt=Dt[0],Ze!=0)return Ze;if(yt=!!(2&Dt),!rt&&At)return 3;if(ke!=null&&(ke[0]=!!(16&Dt)),Se!=null&&(Se[0]=yt),Be!=null&&(Be[0]=0),Se=Me[0],Dt=Je[0],At&&yt&&Fe==null){Ze=0;break}if(4>re){Ze=7;break}if(rt&&At||!rt&&!At&&!r(I,q[0],"ALPH")){re=[re],it.na=[it.na],it.P=[it.P],it.Sa=[it.Sa];e:{Yt=I,Ze=q,rt=re;var Zt=it.gb;Pt=it.na,It=it.P,tr=it.Sa,xr=22,t(Yt!=null),t(rt!=null),St=Ze[0];var Sa=rt[0];for(t(Pt!=null),t(tr!=null),Pt[0]=null,It[0]=null,tr[0]=0;;){if(Ze[0]=St,rt[0]=Sa,8>Sa){Ze=7;break e}var Ua=Ee(Yt,St+4);if(4294967286<Ua){Ze=3;break e}var oa=8+Ua+1&-2;if(xr+=oa,0<Zt&&xr>Zt){Ze=3;break e}if(!r(Yt,St,"VP8 ")||!r(Yt,St,"VP8L")){Ze=0;break e}if(Sa[0]<oa){Ze=7;break e}r(Yt,St,"ALPH")||(Pt[0]=Yt,It[0]=St+8,tr[0]=Ua),St+=oa,Sa-=oa}}if(re=re[0],it.na=it.na[0],it.P=it.P[0],it.Sa=it.Sa[0],Ze!=0)break}re=[re],it.Ja=[it.Ja],it.xa=[it.xa];e:if(Zt=I,Ze=q,rt=re,Pt=it.gb[0],It=it.Ja,tr=it.xa,Yt=Ze[0],St=!r(Zt,Yt,"VP8 "),xr=!r(Zt,Yt,"VP8L"),t(Zt!=null),t(rt!=null),t(It!=null),t(tr!=null),8>rt[0])Ze=7;else{if(St||xr){if(Zt=Ee(Zt,Yt+4),12<=Pt&&Zt>Pt-12){Ze=3;break e}if(dt&&Zt>rt[0]-8){Ze=7;break e}It[0]=Zt,Ze[0]+=8,rt[0]-=8,tr[0]=xr}else tr[0]=5<=rt[0]&&Zt[Yt+0]==47&&!(Zt[Yt+4]>>5),It[0]=rt[0];Ze=0}if(re=re[0],it.Ja=it.Ja[0],it.xa=it.xa[0],q=q[0],Ze!=0)break;if(4294967286<it.Ja)return 3;if(Be==null||yt||(Be[0]=it.xa?2:1),Se=[Se],Dt=[Dt],it.xa){if(5>re){Ze=7;break}Be=Se,dt=Dt,yt=ke,I==null||5>re?I=0:5<=re&&I[q+0]==47&&!(I[q+4]>>5)?(rt=[0],Zt=[0],Pt=[0],G(It=new M,I,q,re),er(It,rt,Zt,Pt)?(Be!=null&&(Be[0]=rt[0]),dt!=null&&(dt[0]=Zt[0]),yt!=null&&(yt[0]=Pt[0]),I=1):I=0):I=0}else{if(10>re){Ze=7;break}Be=Dt,I==null||10>re||!ui(I,q+3,re-3)?I=0:(dt=I[q+0]|I[q+1]<<8|I[q+2]<<16,yt=16383&(I[q+7]<<8|I[q+6]),I=16383&(I[q+9]<<8|I[q+8]),1&dt||3<(dt>>1&7)||!(dt>>4&1)||dt>>5>=it.Ja||!yt||!I?I=0:(Se&&(Se[0]=yt),Be&&(Be[0]=I),I=1))}if(!I||(Se=Se[0],Dt=Dt[0],At&&(Me[0]!=Se||Je[0]!=Dt)))return 3;Fe!=null&&(Fe[0]=it,Fe.offset=q-Fe.w,t(4294967286>q-Fe.w),t(Fe.offset==Fe.ha-re));break}return Ze==0||Ze==7&&At&&Fe==null?(ke!=null&&(ke[0]|=it.na!=null&&0<it.na.length),ue!=null&&(ue[0]=Se),ve!=null&&(ve[0]=Dt),0):Ze}function Cf(I,q,re){var ue=q.width,ve=q.height,ke=0,Se=0,Be=ue,Fe=ve;if(q.Da=I!=null&&0<I.Da,q.Da&&(Be=I.cd,Fe=I.bd,ke=I.v,Se=I.j,11>re||(ke&=-2,Se&=-2),0>ke||0>Se||0>=Be||0>=Fe||ke+Be>ue||Se+Fe>ve))return 0;if(q.v=ke,q.j=Se,q.va=ke+Be,q.o=Se+Fe,q.U=Be,q.T=Fe,q.da=I!=null&&0<I.da,q.da){if(!xe(Be,Fe,re=[I.ib],ke=[I.hb]))return 0;q.ib=re[0],q.hb=ke[0]}return q.ob=I!=null&&I.ob,q.Kb=I==null||!I.Sd,q.da&&(q.ob=q.ib<3*ue/4&&q.hb<3*ve/4,q.Kb=0),1}function w0(I){if(I==null)return 2;if(11>I.S){var q=I.f.RGBA;q.fb+=(I.height-1)*q.A,q.A=-q.A}else q=I.f.kb,I=I.height,q.O+=(I-1)*q.fa,q.fa=-q.fa,q.N+=(I-1>>1)*q.Ab,q.Ab=-q.Ab,q.W+=(I-1>>1)*q.Db,q.Db=-q.Db,q.F!=null&&(q.J+=(I-1)*q.lb,q.lb=-q.lb);return 0}function UA(I,q,re,ue){if(ue==null||0>=I||0>=q)return 2;if(re!=null){if(re.Da){var ve=re.cd,ke=re.bd,Se=-2&re.v,Be=-2&re.j;if(0>Se||0>Be||0>=ve||0>=ke||Se+ve>I||Be+ke>q)return 2;I=ve,q=ke}if(re.da){if(!xe(I,q,ve=[re.ib],ke=[re.hb]))return 2;I=ve[0],q=ke[0]}}ue.width=I,ue.height=q;e:{var Fe=ue.width,Me=ue.height;if(I=ue.S,0>=Fe||0>=Me||!(I>=Wi&&13>I))I=2;else{if(0>=ue.Rd&&ue.sd==null){Se=ke=ve=q=0;var Je=(Be=Fe*NC[I])*Me;if(11>I||(ke=(Me+1)/2*(q=(Fe+1)/2),I==12&&(Se=(ve=Fe)*Me)),(Me=i(Je+2*ke+Se))==null){I=1;break e}ue.sd=Me,11>I?((Fe=ue.f.RGBA).eb=Me,Fe.fb=0,Fe.A=Be,Fe.size=Je):((Fe=ue.f.kb).y=Me,Fe.O=0,Fe.fa=Be,Fe.Fd=Je,Fe.f=Me,Fe.N=0+Je,Fe.Ab=q,Fe.Cd=ke,Fe.ea=Me,Fe.W=0+Je+ke,Fe.Db=q,Fe.Ed=ke,I==12&&(Fe.F=Me,Fe.J=0+Je+2*ke),Fe.Tc=Se,Fe.lb=ve)}if(q=1,ve=ue.S,ke=ue.width,Se=ue.height,ve>=Wi&&13>ve)if(11>ve)I=ue.f.RGBA,q&=(Be=Math.abs(I.A))*(Se-1)+ke<=I.size,q&=Be>=ke*NC[ve],q&=I.eb!=null;else{I=ue.f.kb,Be=(ke+1)/2,Je=(Se+1)/2,Fe=Math.abs(I.fa),Me=Math.abs(I.Ab);var At=Math.abs(I.Db),dt=Math.abs(I.lb),it=dt*(Se-1)+ke;q&=Fe*(Se-1)+ke<=I.Fd,q&=Me*(Je-1)+Be<=I.Cd,q=(q&=At*(Je-1)+Be<=I.Ed)&Fe>=ke&Me>=Be&At>=Be,q&=I.y!=null,q&=I.f!=null,q&=I.ea!=null,ve==12&&(q&=dt>=ke,q&=it<=I.Tc,q&=I.F!=null)}else q=0;I=q?0:2}}return I!=0||re!=null&&re.fd&&(I=w0(ue)),I}var Hs=64,Ef=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],QA=24,HA=32,N0=8,Uo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ce("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(I){return I},S.Predictor2=function(I,q,re){return q[re+0]},S.Predictor3=function(I,q,re){return q[re+1]},S.Predictor4=function(I,q,re){return q[re-1]},S.Predictor5=function(I,q,re){return Ne(Ne(I,q[re+1]),q[re+0])},S.Predictor6=function(I,q,re){return Ne(I,q[re-1])},S.Predictor7=function(I,q,re){return Ne(I,q[re+0])},S.Predictor8=function(I,q,re){return Ne(q[re-1],q[re+0])},S.Predictor9=function(I,q,re){return Ne(q[re+0],q[re+1])},S.Predictor10=function(I,q,re){return Ne(Ne(I,q[re-1]),Ne(q[re+0],q[re+1]))},S.Predictor11=function(I,q,re){var ue=q[re+0];return 0>=$e(ue>>24&255,I>>24&255,(q=q[re-1])>>24&255)+$e(ue>>16&255,I>>16&255,q>>16&255)+$e(ue>>8&255,I>>8&255,q>>8&255)+$e(255&ue,255&I,255&q)?ue:I},S.Predictor12=function(I,q,re){var ue=q[re+0];return(Pe((I>>24&255)+(ue>>24&255)-((q=q[re-1])>>24&255))<<24|Pe((I>>16&255)+(ue>>16&255)-(q>>16&255))<<16|Pe((I>>8&255)+(ue>>8&255)-(q>>8&255))<<8|Pe((255&I)+(255&ue)-(255&q)))>>>0},S.Predictor13=function(I,q,re){var ue=q[re-1];return(Qe((I=Ne(I,q[re+0]))>>24&255,ue>>24&255)<<24|Qe(I>>16&255,ue>>16&255)<<16|Qe(I>>8&255,ue>>8&255)<<8|Qe(I>>0&255,ue>>0&255))>>>0};var X1=S.PredictorAdd0;S.PredictorAdd1=et,ce("Predictor2","PredictorAdd2"),ce("Predictor3","PredictorAdd3"),ce("Predictor4","PredictorAdd4"),ce("Predictor5","PredictorAdd5"),ce("Predictor6","PredictorAdd6"),ce("Predictor7","PredictorAdd7"),ce("Predictor8","PredictorAdd8"),ce("Predictor9","PredictorAdd9"),ce("Predictor10","PredictorAdd10"),ce("Predictor11","PredictorAdd11"),ce("Predictor12","PredictorAdd12"),ce("Predictor13","PredictorAdd13");var wp=S.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var vx,Wl=S.ColorIndexInverseTransform,di=S.MapARGB,jf=S.VP8LColorIndexInverseTransformAlpha,Np=S.MapAlpha,bd=S.VP8LPredictorsAdd=[];bd.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var kf,mo,Ti,Sf,Qo,Oc,Su,Fc,Yn,Dc,ws,Ho,zA,_u,C0,_f,Bf,Tf,VA,E0,If,yd,$A,Jn,Nl,ca,ua,wn,is=i(511),Xl=i(2041),Of=i(225),Ff=i(767),wd=0,bx=Xl,GA=Of,fi=Ff,Yl=is,Wi=0,j0=1,Bu=2,Cp=3,qA=4,Nd=5,yx=6,Ep=7,Df=8,Cd=9,k0=10,wx=[2,3,7],Jl=[3,3,11],Cl=[280,256,256,256,40],KA=[0,1,1,1,0],Ed=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],jd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],WA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],xC=8,jp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zs=null,Zn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Oa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Pf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Tu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Y1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],XA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],kd=[],po=[],El=[],bC=1,S0=2,Iu=[],Ai=[];Ct("UpsampleRgbLinePair",Te,3),Ct("UpsampleBgrLinePair",at,3),Ct("UpsampleRgbaLinePair",Gr,4),Ct("UpsampleBgraLinePair",ha,4),Ct("UpsampleArgbLinePair",Tr,4),Ct("UpsampleRgba4444LinePair",Ht,2),Ct("UpsampleRgb565LinePair",ht,2);var Sd=S.UpsampleRgbLinePair,Rf=S.UpsampleBgrLinePair,Ou=S.UpsampleRgbaLinePair,Nx=S.UpsampleBgraLinePair,Cx=S.UpsampleArgbLinePair,_0=S.UpsampleRgba4444LinePair,Ex=S.UpsampleRgb565LinePair,Fu=16,Vs=1<<Fu-1,Lf=-227,jx=482,p3=6,yC=0,g3=i(256),$s=i(256),J1=i(256),Sp=i(256),_p=i(jx-Lf),Z1=i(jx-Lf);tn("YuvToRgbRow",Te,3),tn("YuvToBgrRow",at,3),tn("YuvToRgbaRow",Gr,4),tn("YuvToBgraRow",ha,4),tn("YuvToArgbRow",Tr,4),tn("YuvToRgba4444Row",Ht,2),tn("YuvToRgb565Row",ht,2);var YA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_d=[0,2,8],x3=[8,7,6,4,4,2,2,2,1,1,1,1],wC=1;this.WebPDecodeRGBA=function(I,q,re,ue,ve){var ke=j0,Se=new gd,Be=new Ra;Se.ba=Be,Be.S=ke,Be.width=[Be.width],Be.height=[Be.height];var Fe=Be.width,Me=Be.height,Je=new Dn;if(Je==null||I==null)var At=2;else t(Je!=null),At=ku(I,q,re,Je.width,Je.height,Je.Pd,Je.Qd,Je.format,null);if(At!=0?Fe=0:(Fe!=null&&(Fe[0]=Je.width[0]),Me!=null&&(Me[0]=Je.height[0]),Fe=1),Fe){Be.width=Be.width[0],Be.height=Be.height[0],ue!=null&&(ue[0]=Be.width),ve!=null&&(ve[0]=Be.height);e:{if(ue=new Qs,(ve=new wf).data=I,ve.w=q,ve.ha=re,ve.kd=1,q=[0],t(ve!=null),((I=ku(ve.data,ve.w,ve.ha,null,null,null,q,null,ve))==0||I==7)&&q[0]&&(I=4),(q=I)==0){if(t(Se!=null),ue.data=ve.data,ue.w=ve.w+ve.offset,ue.ha=ve.ha-ve.offset,ue.put=Pn,ue.ac=Za,ue.bc=Us,ue.ma=Se,ve.xa){if((I=He())==null){Se=1;break e}if(function(dt,it){var Dt=[0],yt=[0],Ze=[0];t:for(;;){if(dt==null)return 0;if(it==null)return dt.a=2,0;if(dt.l=it,dt.a=0,G(dt.m,it.data,it.w,it.ha),!er(dt.m,Dt,yt,Ze)){dt.a=3;break t}if(dt.xb=S0,it.width=Dt[0],it.height=yt[0],!Re(Dt[0],yt[0],1,dt,null))break t;return 1}return t(dt.a!=0),0}(I,ue)){if(ue=(q=UA(ue.width,ue.height,Se.Oa,Se.ba))==0){t:{ue=I;r:for(;;){if(ue==null){ue=0;break t}if(t(ue.s.yc!=null),t(ue.s.Ya!=null),t(0<ue.s.Wb),t((re=ue.l)!=null),t((ve=re.ma)!=null),ue.xb!=0){if(ue.ca=ve.ba,ue.tb=ve.tb,t(ue.ca!=null),!Cf(ve.Oa,re,Cp)){ue.a=2;break r}if(!We(ue,re.width)||re.da)break r;if((re.da||br(ue.ca.S))&&st(),11>ue.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ue.ca.f.kb.F!=null&&st()),ue.Pb&&0<ue.s.ua&&ue.s.vb.X==null&&!_e(ue.s.vb,ue.s.Wa.Xa)){ue.a=1;break r}ue.xb=0}if(!me(ue,ue.V,ue.Ba,ue.c,ue.i,re.o,Ue))break r;ve.Dc=ue.Ma,ue=1;break t}t(ue.a!=0),ue=0}ue=!ue}ue&&(q=I.a)}else q=I.a}else{if((I=new ki)==null){Se=1;break e}if(I.Fa=ve.na,I.P=ve.P,I.qc=ve.Sa,gf(I,ue)){if((q=UA(ue.width,ue.height,Se.Oa,Se.ba))==0){if(I.Aa=0,re=Se.Oa,t((ve=I)!=null),re!=null){if(0<(Fe=0>(Fe=re.Md)?0:100<Fe?255:255*Fe/100)){for(Me=Je=0;4>Me;++Me)12>(At=ve.pb[Me]).lc&&(At.ia=Fe*x3[0>At.lc?0:At.lc]>>3),Je|=At.ia;Je&&(alert("todo:VP8InitRandom"),ve.ia=1)}ve.Ga=re.Id,100<ve.Ga?ve.Ga=100:0>ve.Ga&&(ve.Ga=0)}FA(I,ue)||(q=I.a)}}else q=I.a}q==0&&Se.Oa!=null&&Se.Oa.fd&&(q=w0(Se.ba))}Se=q}ke=Se!=0?null:11>ke?Be.f.RGBA.eb:Be.f.kb.y}else ke=null;return ke};var NC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,B){for(var L="",D=0;D<4;D++)L+=String.fromCharCode(S[B++]);return L}function d(S,B){return(S[B+0]<<0|S[B+1]<<8|S[B+2]<<16)>>>0}function f(S,B){return(S[B+0]<<0|S[B+1]<<8|S[B+2]<<16|S[B+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(S,B){var L={},D=0,k=!1,R=0,U=0;if(L.frames=[],!function(F,X,Y,ae){for(var le=0;le<ae;le++)if(F[X+le]!=Y.charCodeAt(le))return!0;return!1}(S,B,"RIFF",4)){var H,Q;for(f(S,B+=4),B+=8;B<S.length;){var V=u(S,B),G=f(S,B+=4);B+=4;var J=G+(1&G);switch(V){case"VP8 ":case"VP8L":L.frames[D]===void 0&&(L.frames[D]={}),(M=L.frames[D]).src_off=k?U:B-8,M.src_size=R+G+8,D++,k&&(k=!1,R=0,U=0);break;case"VP8X":(M=L.header={}).feature_flags=S[B];var W=B+4;M.canvas_width=1+d(S,W),W+=3,M.canvas_height=1+d(S,W),W+=3;break;case"ALPH":k=!0,R=J+8,U=B-8;break;case"ANIM":(M=L.header).bgcolor=f(S,B),W=B+4,M.loop_count=(H=S)[(Q=W)+0]<<0|H[Q+1]<<8,W+=2;break;case"ANMF":var Z,M;(M=L.frames[D]={}).offset_x=2*d(S,B),B+=3,M.offset_y=2*d(S,B),B+=3,M.width=1+d(S,B),B+=3,M.height=1+d(S,B),B+=3,M.duration=d(S,B),B+=3,Z=S[B++],M.dispose=1&Z,M.blend=Z>>1&1}V!="ANMF"&&(B+=J)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var N=y.header?y.header:null,C=y.frames?y.frames:null;if(N){N.loop_counter=N.loop_count,h=[N.canvas_height],m=[N.canvas_width];for(var T=0;T<C.length&&C[T].blend!=0;T++);}var _=C[0],O=x.WebPDecodeRGBA(v,_.src_off,_.src_size,m,h);_.rgba=O,_.imgwidth=m[0],_.imgheight=h[0];for(var j=0;j<m[0]*h[0]*4;j++)g[j]=O[j];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof CD=="function"},r=function(h,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=i;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=a(h,m,g,y);var N=CD(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(N)},a=function(h,m,g,x){for(var v,y,N,C=h.length/m,T=new Uint8Array(h.length+C),_=d(),O=0;O<C;O+=1){if(N=O*m,v=h.subarray(N,N+m),x)T.set(x(v,g,y),N+O);else{for(var j,S=_.length,B=[];j<S;j+=1)B[j]=_[j](v,g,y);var L=f(B.concat());T.set(B[L],N+O)}y=v}return T},n=function(h){var m=Array.apply([],h);return m.unshift(0),m},i=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},o=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var N=0;N<y;N+=1)x=g&&g[N]||0,v[N+1]=h[N]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],N=h.length;y[0]=3;for(var C=0;C<N;C+=1)x=h[C-m]||0,v=g&&g[C]||0,y[C+1]=h[C]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,N,C=[],T=h.length;C[0]=4;for(var _=0;_<T;_+=1)x=h[_-m]||0,v=g&&g[_]||0,y=g&&g[_-m]||0,N=u(x,v,y),C[_+1]=h[_]-N+256&255;return C},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[n,i,o,l,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,N,C,T,_,O,j,S,B,L,D,k,R,U,H=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(N=new EJe(h)).imgData,y=N.bits,v=N.colorSpace,T=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){S=(j=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,L=new Uint8Array(S*N.colors),B=new Uint8Array(S);var V,G=N.pixelBitlength-N.bits;for(R=0,U=0;R<S;R++){for(k=j[R],V=0;V<G;)L[U++]=k>>>V&255,V+=N.bits;B[R]=k>>>V&255}}if(N.bits===16){S=(j=new Uint32Array(N.decodePixels().buffer)).length,L=new Uint8Array(S*(32/N.pixelBitlength)*N.colors),B=new Uint8Array(S*(32/N.pixelBitlength)),D=N.colors>1,R=0,U=0;for(var J=0;R<S;)k=j[R++],L[U++]=k>>>0&255,D&&(L[U++]=k>>>16&255,k=j[R++],L[U++]=k>>>0&255),B[J++]=k>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(L,N.width*N.colors,N.colors,x),O=r(B,N.width,1,x)):(h=L,O=B,H=void 0)}if(N.colorType===3&&(v=this.color_spaces.INDEXED,_=N.palette,N.transparency.indexed)){var W=N.transparency.indexed,Z=0;for(R=0,S=W.length;R<S;++R)Z+=W[R];if((Z/=255)===S-1&&W.indexOf(0)!==-1)C=[W.indexOf(0)];else if(Z!==S){for(j=N.decodePixels(),B=new Uint8Array(j.length),R=0,S=j.length;R<S;R++)B[R]=W[j[R]];O=r(B,N.width,1)}}var M=function(F){var X;switch(F){case e.image_compression.FAST:X=11;break;case e.image_compression.MEDIUM:X=13;break;case e.image_compression.SLOW:X=14;break;default:X=12}return X}(x);return H===this.decode.FLATE_DECODE&&(Q="/Predictor "+M+" "),Q+="/Colors "+T+" /BitsPerComponent "+y+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:g,data:h,index:m,filter:H,decodeParameters:Q,transparency:C,palette:_,sMask:O,predictor:M,width:N.width,height:N.height,bitsPerComponent:y,colorSpace:v}}}})(gr.API),function(e){e.processGIF89A=function(t,r,a,n){var i=new jJe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new m6(100).encode(u,100);return e.processJPEG.call(this,d,r,a,n)},e.processGIF87A=e.processGIF89A}(gr.API),Ld.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ld.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Tn.log("bit decode error:"+r)}},Ld.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ld.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*n+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ld.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ld.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=a*this.width*4+4*n;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},Ld.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=n*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Ld.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Ld.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},Ld.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,n){var i=new Ld(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new m6(100).encode(c,100);return e.processJPEG.call(this,u,r,a,n)}}(gr.API),MW.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,n){var i=new MW(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new m6(100).encode(c,100);return e.processJPEG.call(this,u,r,a,n)}}(gr.API),gr.API.processRGBA=function(e,t,r){for(var a=e.data,n=a.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,u=0;u<n;u+=4){var d=a[u],f=a[u+1],h=a[u+2],m=a[u+3];i[l++]=d,i[l++]=f,i[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},gr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nv=gr.API,lj=nv.getCharWidthsArray=function(e,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:n.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)a=e.charCodeAt(r),typeof n.metadata.widthOfString=="function"?v.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(h=f&&bn(u[a])==="object"&&!isNaN(parseInt(u[a][g],10))?u[a][g]/d:0,v.push((l[a]||x)/c+h)),g=a;return v},DW=nv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return nv.processArabic&&(e=nv.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,n)/r:lj.apply(this,arguments).reduce(function(i,o){return i+o},0)},PW=function(e,t,r,a){for(var n=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;n.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(n.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&n.push(e.slice(c,i)),n},RW=function(e,t,r){r||(r={});var a,n,i,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=lj.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),N=[];x.map(function(T){(T=T.split(/\s*\n/)).length>1?N=N.concat(T.map(function(_,O){return(O&&_.length?`
`:"")+_})):N.push(T[0])}),x=N,c=DW.apply(this,[y,r])}for(i=0,o=x.length;i<o;i++){var C=0;if(a=x[i],c&&a[0]==`
`&&(a=a.substr(1),C=1),h+m+(g=(n=lj.apply(this,[a,r])).reduce(function(T,_){return T+_},0))>t||C){if(g>t){for(l=PW.apply(this,[a,n,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=n.slice(a.length-(d[0]?d[0].length:0)).reduce(function(T,_){return T+_},0)}else d=[a];f.push(d),h=g+c,m=v}else d.push(a),h+=m+g,m=v}return u=c?function(T,_){return(_?y:"")+T.join(" ")}:function(T){return T.join(" ")},f.map(u)},nv.splitTextToSize=function(e,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=a.length;l<c;l++)u=u.concat(RW.apply(this,[a[l],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},n=0;n<t.length;n++)r[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(g=i(h).slice(3),x="-"):(g=i(h).slice(2),x=""),g=x+g.slice(0,-1)+a[g.slice(-1)];else{if(bn(h)!=="object")throw new Error("Don't know what to do with value type "+bn(h)+".");g=o(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,N=v,C=[],T="",_="",O=f.length-1,j=1;j<O;j+=1)(x=f[j])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(C.push([N,g]),N={},g=void 0):x=="}"?((m=C.pop())[0][m[1]]=N,g=void 0,N=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(T+=r[x],g=parseInt(T,16)*y,y=1,T=""):T+=x:r.hasOwnProperty(x)?(_+=r[x],N[g]=parseInt(_,16)*y,y=1,g=void 0,_=""):_+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(gr.API),function(e){var t=function(r){for(var a=r.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=r.charCodeAt(i);return n};e.API.events.push(["addFont",function(r){var a=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(lw(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])}(gr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):ai(()=>import("./index.es-BQlW5ndq.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}gr.API.addSvgAsImage=function(r,a,n,i,o,l,c,u){if(isNaN(a)||isNaN(n))throw Tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),a,n,i,o,c,u)})}}(),gr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},gr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(bn(e)==="object"){for(n in e)if(i=e[n],h(l,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&h(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(u=0;u<i.length;u+=1)if(a=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(a=!1);a===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[n].value="["+c.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(gr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=i.length;f<h;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},a=function(i){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(i).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Tv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Tv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+Tv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:a(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Tv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Tv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,N="",C=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(N=l,x=m,Array.isArray(l)&&(N=l[0]),y=0;y<N.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[N[y].charCodeAt(0)]),o||N[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=N[y]:v+="";var T="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?T=h(v,x).split("").map(function(_){return _.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(T=r(v,g[x])),f.isHex=!0,{text:T,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([n(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(n(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=n(Object.assign({},c,{text:o})).text}])}(gr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(gr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var n,i,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,C=0;this.__bidiEngine__={};var T=function(D){var k=D.charCodeAt(),R=k>>8,U=x[R];return U!==void 0?f[256*U+(255&k)]:R===252||R===253?"AL":y.test(R)?"L":R===8?"R":"N"},_=function(D){for(var k,R=0;R<D.length;R++){if((k=T(D.charAt(R)))==="L")return!1;if(k==="R")return!0}return!1},O=function(D,k,R,U){var H,Q,V,G,J=k[U];switch(J){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(J="AN");break;case"AL":N=!0,J="R";break;case"WS":J="N";break;case"CS":U<1||U+1>=k.length||(H=R[U-1])!=="EN"&&H!=="AN"||(Q=k[U+1])!=="EN"&&Q!=="AN"?J="N":N&&(Q="AN"),J=Q===H?Q:"N";break;case"ES":J=(H=U>0?R[U-1]:"B")==="EN"&&U+1<k.length&&k[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&R[U-1]==="EN"){J="EN";break}if(N){J="N";break}for(V=U+1,G=k.length;V<G&&k[V]==="ET";)V++;J=V<G&&k[V]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(G=k.length,V=U+1;V<G&&k[V]==="NSM";)V++;if(V<G){var W=D[U],Z=W>=1425&&W<=2303||W===64286;if(H=k[V],Z&&(H==="R"||H==="AL")){J="R";break}}}J=U<1||(H=k[U-1])==="B"?"N":R[U-1];break;case"B":N=!1,n=!0,J=C;break;case"S":i=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":J="N"}return J},j=function(D,k,R){var U=D.split("");return R&&S(U,R,{hiLevel:C}),U.reverse(),k&&k.reverse(),U.join("")},S=function(D,k,R){var U,H,Q,V,G,J=-1,W=D.length,Z=0,M=[],F=C?m:h,X=[];for(N=!1,n=!1,i=!1,H=0;H<W;H++)X[H]=T(D[H]);for(Q=0;Q<W;Q++){if(G=Z,M[Q]=O(D,X,M,Q),U=240&(Z=F[G][g[M[Q]]]),Z&=15,k[Q]=V=F[Z][5],U>0)if(U===16){for(H=J;H<Q;H++)k[H]=1;J=-1}else J=-1;if(F[Z][6])J===-1&&(J=Q);else if(J>-1){for(H=J;H<Q;H++)k[H]=V;J=-1}X[Q]==="B"&&(k[Q]=0),R.hiLevel|=V}i&&function(Y,ae,le){for(var ie=0;ie<le;ie++)if(Y[ie]==="S"){ae[ie]=C;for(var ne=ie-1;ne>=0&&Y[ne]==="WS";ne--)ae[ne]=C}}(X,k,W)},B=function(D,k,R,U,H){if(!(H.hiLevel<D)){if(D===1&&C===1&&!n)return k.reverse(),void(R&&R.reverse());for(var Q,V,G,J,W=k.length,Z=0;Z<W;){if(U[Z]>=D){for(G=Z+1;G<W&&U[G]>=D;)G++;for(J=Z,V=G-1;J<V;J++,V--)Q=k[J],k[J]=k[V],k[V]=Q,R&&(Q=R[J],R[J]=R[V],R[V]=Q);Z=G}Z++}}},L=function(D,k,R){var U=D.split(""),H={hiLevel:C};return R||(R=[]),S(U,R,H),function(Q,V,G){if(G.hiLevel!==0&&d)for(var J,W=0;W<Q.length;W++)V[W]===1&&(J=v.indexOf(Q[W]))>=0&&(Q[W]=v[J+1])}(U,R,H),B(2,U,k,R,H),B(1,U,k,R,H),U.join("")};return this.__bidiEngine__.doBidiReorder=function(D,k,R){if(function(H,Q){if(Q)for(var V=0;V<H.length;V++)Q[V]=V;l===void 0&&(l=_(H)),u===void 0&&(u=_(H))}(D,k),o||!c||u)if(o&&c&&l^u)C=l?1:0,D=j(D,k,R);else if(!o&&c&&u)C=l?1:0,D=L(D,k,R),D=j(D,k);else if(!o||l||c||u){if(o&&!c&&l^u)D=j(D,k),l?(C=0,D=L(D,k,R)):(C=1,D=L(D,k,R),D=j(D,k));else if(o&&l&&!c&&u)C=1,D=L(D,k,R),D=j(D,k);else if(!o&&!c&&l^u){var U=d;l?(C=1,D=L(D,k,R),C=0,d=!1,D=L(D,k,R),d=U):(C=0,D=L(D,k,R),D=j(D,k),C=1,d=!1,D=L(D,k,R),d=U,D=j(D,k))}}else C=0,D=L(D,k,R);else C=l?1:0,D=L(D,k,R);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var n=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([r.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([r.doBidiReorder(n[l])]);a.text=o}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(gr),gr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new sp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new QJe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new kJe(this.contents),this.head=new _Je(this),this.name=new FJe(this),this.cmap=new mue(this),this.toUnicode={},this.hhea=new BJe(this),this.maxp=new DJe(this),this.hmtx=new PJe(this),this.post=new IJe(this),this.os2=new TJe(this),this.loca=new UJe(this),this.glyf=new RJe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),(32768&(r=n>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var hf,sp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,n;for(n=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,n,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*n+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,n,i;for(i=[],a=0,n=t.length;a<n;a++)r=t[a],i.push(this.writeByte(r));return i},e}(),kJe=function(){var e;function t(r){var a,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,n,i,o,l,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(n=new sp).writeInt(this.scalarType),n.writeShort(m),n.writeShort(f),n.writeShort(o),n.writeShort(d),i=16*m,u=n.pos+i,l=null,g=[],r)for(h=r[x],n.writeString(x),n.writeInt(e(h)),n.writeInt(u),n.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return n.write(g),a=2981146554-e(n.data),n.pos=l+8,n.writeUInt32(a),n.data},e=function(r){var a,n,i,o;for(r=pue.call(r);r.length%4;)r.push(0);for(i=new sp(r),n=0,a=0,o=r.length;a<o;a=a+=4)n+=i.readUInt32();return 4294967295&n},t}(),SJe={}.hasOwnProperty,BA=function(e,t){for(var r in t)SJe.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};hf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var _Je=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new sp).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),UW=function(){function e(t,r){var a,n,i,o,l,c,u,d,f,h,m,g,x,v,y,N,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var T,_;for(_=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)_.push(t.readUInt16());return _}(),t.pos+=2,x=function(){var T,_;for(_=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)_.push(t.readUInt16());return _}(),u=function(){var T,_;for(_=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)_.push(t.readUInt16());return _}(),d=function(){var T,_;for(_=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)_.push(t.readUInt16());return _}(),n=(this.length-t.pos+this.offset)/2,l=function(){var T,_;for(_=[],c=T=0;0<=n?T<n:T>n;c=0<=n?++T:--T)_.push(t.readUInt16());return _}(),c=y=0,C=i.length;y<C;c=++y)for(v=i[c],a=N=g=x[c];g<=v?N<=v:N>=v;a=g<=v?++N:--N)d[c]===0?o=a+u[c]:(o=l[d[c]/2+(a-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,n,i,o,l,c,u,d,f,h,m,g,x,v,y,N,C,T,_,O,j,S,B,L,D,k,R,U,H,Q,V,G,J,W,Z,M,F,X,Y,ae,le,ie,ne,oe,we,K;switch(U=new sp,o=Object.keys(t).sort(function(Ee,_e){return Ee-_e}),r){case"macroman":for(x=0,v=function(){var Ee=[];for(g=0;g<256;++g)Ee.push(0);return Ee}(),N={0:0},i={},H=0,J=o.length;H<J;H++)N[ne=t[n=o[H]]]==null&&(N[ne]=++x),i[n]={old:t[n],new:N[t[n]]},v[n]=N[t[n]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(v),{charMap:i,subtable:U.data,maxGlyphID:x+1};case"unicode":for(k=[],f=[],C=0,N={},a={},y=u=null,Q=0,W=o.length;Q<W;Q++)N[_=t[n=o[Q]]]==null&&(N[_]=++C),a[n]={old:_,new:N[_]},l=N[_]-n,y!=null&&l===u||(y&&f.push(y),k.push(n),u=l),y=n;for(y&&f.push(y),f.push(65535),k.push(65535),L=2*(B=k.length),S=2*Math.pow(Math.log(B)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,j=2*B-S,c=[],O=[],m=[],g=V=0,Z=k.length;V<Z;g=++V){if(D=k[g],d=f[g],D===65535){c.push(0),O.push(0);break}if(D-(R=a[D].new)>=32768)for(c.push(0),O.push(2*(m.length+B-g)),n=G=D;D<=d?G<=d:G>=d;n=D<=d?++G:--G)m.push(a[n].new);else c.push(R-D),O.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*B+2*m.length),U.writeUInt16(0),U.writeUInt16(L),U.writeUInt16(S),U.writeUInt16(h),U.writeUInt16(j),le=0,M=f.length;le<M;le++)n=f[le],U.writeUInt16(n);for(U.writeUInt16(0),ie=0,F=k.length;ie<F;ie++)n=k[ie],U.writeUInt16(n);for(oe=0,X=c.length;oe<X;oe++)l=c[oe],U.writeUInt16(l);for(we=0,Y=O.length;we<Y;we++)T=O[we],U.writeUInt16(T);for(K=0,ae=m.length;K<ae;K++)x=m[K],U.writeUInt16(x);return{charMap:a,subtable:U.data,maxGlyphID:C+1}}},e}(),mue=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,n,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)a=new UW(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var n,i;return a==null&&(a="macroman"),n=UW.encode(r,a),(i=new sp).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),BJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),TJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,n;for(n=[],a=0;a<10;++a)n.push(r.readByte());return n}(),this.charRange=function(){var a,n;for(n=[],a=0;a<4;++a)n.push(r.readInt());return n}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(r.readInt());return n}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),IJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="post",t.prototype.parse=function(r){var a,n,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(n=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return n=r.readUInt16(),this.offsets=r.read(n);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),OJe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},FJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="name",t.prototype.parse=function(r){var a,n,i,o,l,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),n=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)n.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,h=n.length;f<h;o=++f)i=n[o],r.pos=i.offset,d=r.readString(i.length),l=new OJe(d,i),u[m=i.nameID]==null&&(u[m]=[]),u[i.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),DJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),PJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,n,i,o,l,c,u;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],a=d=0;0<=i?d<i:d>i;a=0<=i?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)o=h[d],m.push(o.advance);return m}).call(this),n=this.widths[this.widths.length-1],u=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)u.push(this.widths.push(n));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),pue=[].slice,RJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,n,i,o,l,c,u,d,f,h;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,n=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+n,l=(c=new sp(a.read(i))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new MJe(c,d,h,u,f):new LJe(c,l,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,a,n){var i,o,l,c,u;for(l=[],o=[],c=0,u=a.length;c<u;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),LJe=function(){function e(t,r,a,n,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),MJe=function(){function e(t,r,a,n,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new sp(pue.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),UJe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return BA(t,hf),t.prototype.tag="loca",t.prototype.parse=function(r){var a,n;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<a.length&&a[o]==l){++o,n[l]=i;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(i+=u)}for(var d=new Array(4*n.length),f=0;f<n.length;++f)d[4*f+3]=255&n[f],d[4*f+2]=(65280&n[f])>>8,d[4*f+1]=(16711680&n[f])>>16,d[4*f]=(4278190080&n[f])>>24;return d},t}(),QJe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,n,i;for(r in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=n[a];return t},e.prototype.glyphsFor=function(t){var r,a,n,i,o,l,c;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(a=n[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],n[i]=a;return n},e.prototype.encode=function(t,r){var a,n,i,o,l,c,u,d,f,h,m,g,x,v,y;for(n in a=mue.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=a.charMap)m[(c=y[n]).old]=c.new;for(g in h=a.maxGlyphID,o)g in m||(m[g]=h++);return d=function(N){var C,T;for(C in T={},N)T[N[C]]=C;return T}(m),f=Object.keys(d).sort(function(N,C){return N-C}),x=function(){var N,C,T;for(T=[],N=0,C=f.length;N<C;N++)l=f[N],T.push(d[l]);return T}(),i=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(i.offsets,x),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();gr.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,n,i,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)a=r[l],u.push(t.convert(a));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function gue(e,t,r,a,n){a=a||{};var i=1.15,o=n.internal.scaleFactor,l=n.internal.getFontSize()/o,c=n.getLineHeightFactor?n.getLineHeightFactor():i,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-i),a.valign==="middle"?r-=h/2*u:a.valign==="bottom"&&(r-=h*u),a.halign==="center"||a.halign==="right"){var m=l;if(a.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)n.text(f[g],t-n.getStringUnitWidth(f[g])*m,r),r+=u;return n}t-=n.getStringUnitWidth(e)*m}return a.halign==="justify"?n.text(e,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(e,t,r),n}var QW={},hb=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:QW=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var a,n,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(a=this.jsPDFDocument).setFillColor.apply(a,d),d=e.unifyColor(t.textColor),d&&(n=this.jsPDFDocument).setTextColor.apply(n,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},e.prototype.rect=function(t,r,a,n,i){return this.jsPDFDocument.rect(t,r,a,n,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return QW||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),TD=function(e,t){return TD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},TD(e,t)};function xue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");TD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vue=function(e){xue(t,e);function t(r){var a=e.call(this)||this;return a._element=r,a}return t}(Array);function HJe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function zJe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function AS(e,t,r){r.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],n=a.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return n}function bue(e,t,r,a){var n=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:i});var o=yue(n,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),a.y-r.y,o)}function yue(e,t){var r=e>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function D4(e,t){var r,a,n,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function wue(e,t){var r=D4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function VJe(e,t,r,a,n){var i={},o=1.3333333333333333,l=p6(t,function(C){return n.getComputedStyle(C).backgroundColor});l!=null&&(i.fillColor=l);var c=p6(t,function(C){return n.getComputedStyle(C).color});c!=null&&(i.textColor=c);var u=GJe(a,r);u&&(i.cellPadding=u);var d="borderTopColor",f=o*r,h=a.borderTopWidth;if(a.borderBottomWidth===h&&a.borderRightWidth===h&&a.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/f,right:(parseFloat(a.borderRightWidth)||0)/f,bottom:(parseFloat(a.borderBottomWidth)||0)/f,left:(parseFloat(a.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var g=p6(t,function(C){return n.getComputedStyle(C)[d]});g!=null&&(i.lineColor=g);var x=["left","right","center","justify"];x.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),x=["middle","bottom","top"],x.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var v=parseInt(a.fontSize||"");isNaN(v)||(i.fontSize=v/o);var y=$Je(a);y&&(i.fontStyle=y);var N=(a.fontFamily||"").toLowerCase();return e.indexOf(N)!==-1&&(i.font=N),i}function $Je(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function p6(e,t){var r=Nue(e,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Nue(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Nue(e.parentElement,t):r}function GJe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/a}),o=D4(i,0);return n>o.top&&(o.top=n),n>o.bottom&&(o.bottom=n),o}function Cue(e,t,r,a,n){var i,o;a===void 0&&(a=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(i=g==null?void 0:g.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=qJe(c,u,r,g,a,n);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function qJe(e,t,r,a,n,i){for(var o=new vue(a),l=0;l<a.cells.length;l++){var c=a.cells[l],u=r.getComputedStyle(c);if(n||u.display!=="none"){var d=void 0;i&&(d=VJe(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:KJe(c)})}}var f=r.getComputedStyle(a);if(o.length>0&&(n||f.display!=="none"))return o}function KJe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function WJe(e,t,r){for(var a=0,n=[e,t,r];a<n.length;a++){var i=n[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function _h(e,t,r,a,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function Eue(e,t){var r=new hb(e),a=r.getDocumentOptions(),n=r.getGlobalOptions();WJe(n,a,t);var i=_h({},n,a,t),o;typeof window<"u"&&(o=window);var l=XJe(n,a,t),c=YJe(n,a,t),u=JJe(r,i),d=eZe(r,i,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function XJe(e,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];a.columnStyles=_h({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});a[c]=_h({},m[0],m[1],m[2])}},i=0,o=Object.keys(a);i<o.length;i++){var l=o[i];n(l)}return a}function YJe(e,t,r){for(var a=[e,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=a;i<o.length;i++){var l=o[i];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function JJe(e,t){var r,a,n,i,o,l,c,u,d,f,h,m,g=D4(t.margin,40/e.scaleFactor()),x=(r=ZJe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var N=(i=t.useCss)!==null&&i!==void 0?i:!1,C=t.theme||(N?"plain":"striped"),T=!!t.horizontalPageBreak,_=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:N,theme:C,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:T,horizontalPageBreakRepeat:_,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function ZJe(e,t){var r=e.getLastAutoTable(),a=e.scaleFactor(),n=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===n}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/a:null}function eZe(e,t,r){var a=t.head||[],n=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=Cue(e,t.html,r,o,t.useCss)||{};a=l.head||a,n=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var c=t.columns||tZe(a,n,i);return{columns:c,head:a,body:n,foot:i}}function tZe(e,t,r){var a=e[0]||t[0]||r[0]||[],n=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(a)?l=a[parseInt(i)]:l=a[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(a)?u=n.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};n.push(d)}}),n}var ID=function(){function e(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return e}(),rZe=function(e){xue(t,e);function t(r,a,n,i,o,l){var c=e.call(this,r,a,l)||this;return c.cell=n,c.row=i,c.column=o,c.section=i.section,c}return t}(ID),aZe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,a,n,i,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new rZe(t,this,a,n,i,o),f=u(d)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var i=n[a];i(new ID(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var i=n[a];i(new ID(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,i){return n+i.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},e}(),jue=function(){function e(t,r,a,n,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof vue&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=n,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,n){var i;return Math.max(a,((i=r.cells[n.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var n=r.cells[a.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(n,i){var o=a.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>n?u:n},0)},e}(),kue=function(){function e(t,r,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,i=a*n+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=D4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),nZe=function(){function e(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,n=t.allRows();a<n.length;a++){var i=n[a],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function sZe(e,t){iZe(e,t);var r=[],a=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),a+=i.width});var n=t.getWidth(e.pageSize().width)-a;n&&(n=OD(r,n,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),n&&(n=OD(r,n,function(i){return i.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),lZe(t),cZe(t,e),oZe(t)}function iZe(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,n=wue(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=AS(u.text,u.styles,e)+f;var h=AS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||a===!0)u.contentWidth>n?(u.minWidth=n,u.wrappedWidth=n):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function OD(e,t,r){for(var a=t,n=e.reduce(function(m,g){return m+g.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/n,c=a*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=OD(h,t,r))}return t}function oZe(e){for(var t={},r=1,a=e.allRows(),n=0;n<a.length;n++)for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=a.length-n,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:i}}}}}function lZe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var a=t[r],n=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete a.cells[c.index];else if(n){var u=n;delete a.cells[c.index],n=null,u.width=c.width+i}else{var u=a.cells[c.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){n=u,i+=c.width;continue}u.width=c.width+i}}}function cZe(e,t){for(var r={count:0,height:0},a=0,n=e.allRows();a<n.length;a++){for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=HW(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=HW(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function HW(e,t,r,a,n){return e.map(function(i){return uZe(i,t,r,a,n)})}function uZe(e,t,r,a,n){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=AS(e,r,a))return e;for(;t<AS(e+n,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function Sue(e,t){var r=new hb(e),a=dZe(t,r.scaleFactor()),n=new aZe(t,a);return sZe(r,n),r.applyStyles(r.userStyles),n}function dZe(e,t){var r=e.content,a=AZe(r.columns);if(r.head.length===0){var n=zW(a,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=zW(a,"foot");n&&r.foot.push(n)}var i=e.settings.theme,o=e.styles;return{columns:a,head:g6("head",r.head,a,o,i,t),body:g6("body",r.body,a,o,i,t),foot:g6("foot",r.foot,a,o,i,t)}}function g6(e,t,r,a,n,i){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var N={};typeof y=="object"&&!Array.isArray(y)&&(N=(y==null?void 0:y.styles)||{});var C=hZe(e,v,u,n,a,i,N),T=new kue(y,C,e);f[v.dataKey]=T,f[v.index]=T,m=T.colSpan-1,o[v.index]={left:T.rowSpan-1,times:m}}else m--,h++;else o[v.index].left--,m=o[v.index].times,d++}return new jue(c,u,e,f)});return l}function zW(e,t){var r={};return e.forEach(function(a){if(a.raw!=null){var n=fZe(t,a.raw);n!=null&&(r[a.dataKey]=n)}}),Object.keys(r).length>0?r:null}function fZe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function AZe(e){return e.map(function(t,r){var a,n;return typeof t=="object"?n=(a=t.dataKey)!==null&&a!==void 0?a:r:n=r,new nZe(n,t,r)})}function hZe(e,t,r,a,n,i,o){var l=zJe(a),c;e==="head"?c=n.headStyles:e==="body"?c=n.bodyStyles:e==="foot"&&(c=n.footStyles);var u=_h({},l.table,l[e],n.styles,c),d=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?_h({},l.alternateRow,n.alternateRowStyles):{},m=HJe(i),g=_h({},m,u,h,f);return _h(g,o)}function mZe(e,t,r){var a;r===void 0&&(r={});var n=wue(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),n-=m.wrappedWidth)});for(var u=!0,d=(a=r==null?void 0:r.start)!==null&&a!==void 0?a:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||n>=f)u=!1,o.push(d),l.push(t.columns[d]),n-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function pZe(e,t){for(var r=[],a=0;a<t.columns.length;a++){var n=mZe(e,t,{start:a});n.columns.length&&(r.push(n),a=n.lastIndex)}return r}function _ue(e,t){var r=t.settings,a=r.startY,n=r.margin,i={x:n.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+n.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new hb(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Tue(d),i.y=n.top),t.callWillDrawPageHooks(d,i);var f=_h({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?gZe(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return r0(d,t,h,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;hS(d,t,h,g,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return r0(d,t,h,i,t.columns)})),bue(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function gZe(e,t,r,a){var n=pZe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?cw(e,t,r,a,u.columns,!0):VW(e,t,a,u.columns),xZe(e,t,r,a,u.columns),x6(e,t,a,u.columns)});else for(var o=-1,l=n[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?cw(e,t,r,a,d,!0):VW(e,t,a,d),u=$W(e,t,o+1,a,d),x6(e,t,a,d)}var f=u-o;n.slice(1).forEach(function(h){e.applyStyles(e.userStyles),cw(e,t,r,a,h.columns,!0),$W(e,t,o+1,a,h.columns,f),x6(e,t,a,h.columns)}),o=u};o<t.body.length-1;)c()}function VW(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(i){return r0(e,t,i,r,a)})}function xZe(e,t,r,a,n){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;hS(e,t,i,l,r,a,n)})}function $W(e,t,r,a,n,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=Bue(e,t,d,a);c.canEntireRowFit(f,n)&&(r0(e,t,c,a,n),l=r+u)}),l}function x6(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(i){return r0(e,t,i,r,a)})}function vZe(e,t,r){var a=r.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),i=Math.floor((t-n)/a);return Math.max(0,i)}function bZe(e,t,r,a){var n={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new kue(u.raw,u.styles,u.section);d=_h(d,u),d.text=[];var f=vZe(u,t,a);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=a.scaleFactor(),m=a.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>i&&(i=d.contentHeight),n[c.index]=d}}var g=new jue(e.raw,-1,e.section,n,!0);g.height=i;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function yZe(e,t,r,a){var n=e.pageSize().height,i=a.settings.margin,o=i.top+i.bottom,l=n-o;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var c=t.getMinimumRowHeight(a.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(a.columns),f=t.getMaxCellHeight(a.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||a.settings.rowPageBreak==="avoid")}function hS(e,t,r,a,n,i,o){var l=Bue(e,t,a,i);if(r.canEntireRowFit(l,o))r0(e,t,r,i,o);else if(yZe(e,r,l,t)){var c=bZe(r,l,t,e);r0(e,t,r,i,o),cw(e,t,n,i,o),hS(e,t,c,a,n,i,o)}else cw(e,t,n,i,o),hS(e,t,r,a,n,i,o)}function r0(e,t,r,a,n){a.x=t.settings.margin.left;for(var i=0,o=n;i<o.length;i++){var l=o[i],c=r.cells[l.index];if(!c){a.x+=l.width;continue}e.applyStyles(c.styles),c.x=a.x,c.y=a.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,a);if(u===!1){a.x+=l.width;continue}wZe(e,c,a);var d=c.getTextPos();gue(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,a),a.x+=l.width}a.y+=r.height}function wZe(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=yue(a.lineWidth,a.fillColor);n&&e.rect(t.x,r.y,t.width,t.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),NZe(e,t,r,a.lineWidth))}function NZe(e,t,r,a){var n,i,o,l;a.top&&(n=r.x,i=r.y,o=r.x+t.width,l=r.y,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.top,n,i,o,l)),a.bottom&&(n=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.bottom,n,i,o,l)),a.left&&(n=r.x,i=r.y,o=r.x,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.left,n,i,o,l)),a.right&&(n=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.right,n,i,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function Bue(e,t,r,a){var n=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-n}function cw(e,t,r,a,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return r0(e,t,l,a,n)}),t.callEndPageHooks(e,a);var o=t.settings.margin;bue(e,t,r,a),Tue(e),t.pageNumber++,a.x=o.left,a.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return r0(e,t,l,a,n)}),e.applyStyles(e.userStyles))}function Tue(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function CZe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],n=Eue(this,a),i=Sue(this,n);return _ue(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,a,n){gue(t,r,a,n,this)},e.API.autoTableSetDefaults=function(t){return hb.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){hb.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new hb(this),i=Cue(n,t,window,r,!1),o=i.head,l=i.body,c=((a=o[0])===null||a===void 0?void 0:a.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var v6;function Ni(e,t){var r=Eue(e,t),a=Sue(e,r);_ue(e,a)}try{if(typeof window<"u"&&window){var GW=window,qW=GW.jsPDF||((v6=GW.jspdf)===null||v6===void 0?void 0:v6.jsPDF);qW&&CZe(qW)}}catch(e){console.error("Could not apply autoTable plugin",e)}const EZe=["Localizar información explícita","Realizar inferencias a partir del texto","Interpretar y relacionar información del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto según su propósito comunicativo","Comprender vocabulario en contexto"],jZe=["Números y operaciones","Álgebra y funciones","Geometría","Probabilidad y estadística","Resolución de problemas","Modelamiento matemático","Argumentación y comunicación matemática"],KW=pt(ot,"usuarios");async function xx(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",KW);const e=await _r(KW);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(a=>{const n=a.data();return!n.curso||typeof n.curso!="string"||!n.curso.trim()?console.warn("⚠️ [ASIGNACION] Usuario sin curso asignado o curso inválido:",{id:a.id,...n}):console.log("✅ [ASIGNACION] Usuario con curso:",{id:a.id,curso:n.curso,nombre:n.nombreCompleto}),{id:a.id,...n}}),r=Array.from(new Set(t.map(a=>a.curso).filter(Boolean)));return console.log("📚 [ASIGNACION] Cursos únicos encontrados en usuarios:",r),console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const kZe=e=>{try{if(!e)return new Date().toISOString();if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString();if(e instanceof Date)return e.toISOString();const t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString()}catch{}return new Date().toISOString()},Xd="simce_sets",cC="simce_resultados";async function SZe(e){try{return(await Yr(pt(ot,Xd),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function _Ze(e,t){try{await Ui($t(ot,Xd,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function Iue(e){var t,r;console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);try{const a=await $h($t(ot,"simce_evaluaciones",e));if(a.exists()){const n=a.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en simce_evaluaciones: ${n.titulo||"Sin título"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`),n.preguntas&&n.preguntas.length>0){for(let i=0;i<n.preguntas.length;i++)if(n.preguntas[i].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (eval) en pregunta ${i+1}`);break}}return{id:a.id,...n}}}catch(a){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_evaluaciones, intentando simce_sets:",a)}try{const a=await $h($t(ot,Xd,e));if(a.exists()){const n=a.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en ${Xd}: ${n.titulo||"Sin título"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((r=n.preguntas)==null?void 0:r.length)||0}`),n.preguntas&&n.preguntas.length>0){for(let i=0;i<n.preguntas.length;i++)if(n.preguntas[i].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (set) en pregunta ${i+1}`);break}}return{id:a.id,...n}}}catch(a){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_sets:",a)}throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontró set con ID: ${e} en ninguna colección o sin permisos`),new Error("No se pudo obtener el set de preguntas")}async function f7(e){try{const t=_t(pt(ot,Xd),rr("creadorId","==",e),Gt("fechaCreacion","desc")),a=(await _r(t)).docs.map(l=>({id:l.id,...l.data()})),n=_t(pt(ot,"simce_evaluaciones"),rr("creadorId","==",e),Gt("fechaCreacion","desc")),o=(await _r(n)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...a,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function Oue(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vacío"),[];const t=_t(pt(ot,Xd),rr("cursosAsignados","array-contains",e),Gt("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${Xd}:`,t);const r=await _r(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${Xd}: ${r.docs.length}`);const a=_t(pt(ot,"simce_evaluaciones"),rr("cursosAsignados","array-contains",e),Gt("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",a);const n=await _r(a);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${n.docs.length}`);let i=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${Xd}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...n.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${i.length}`),i}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function Fue(e){try{if(!e)return[];const t=_t(pt(ot,Xd),rr("estudiantesAsignados","array-contains",e),Gt("fechaCreacion","desc")),r=await _r(t),a=_t(pt(ot,"simce_evaluaciones"),rr("estudiantesAsignados","array-contains",e),Gt("fechaCreacion","desc")),n=await _r(a);return[...r.docs.map(i=>({id:i.id,...i.data()})),...n.docs.map(i=>({id:i.id,...i.data(),preguntas:i.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function Due(e){try{await Ja($t(ot,Xd,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function Pue(e){try{return(await Yr(pt(ot,cC),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function Rue(e){try{const t=_t(pt(ot,cC),rr("setId","==",e),Gt("fechaEnvio","desc"));return(await _r(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function Lue(e,t){try{if(!t||t.length===0)return[];const r=10,a=[];for(let o=0;o<t.length;o+=r)a.push(t.slice(o,o+r));const n=[];for(const o of a){const l=_t(pt(ot,cC),rr("setId","==",e),rr("estudianteId","in",o)),c=await _r(l);n.push(...c.docs.map(u=>({id:u.id,...u.data()})))}const i=new Map;for(const o of n)i.set(o.id,o);return Array.from(i.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function Mue(e){try{const t=_t(pt(ot,cC),rr("estudianteId","==",e),Gt("fechaEnvio","desc"));return(await _r(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function BZe(e){try{await Ja($t(ot,cC,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function TZe(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const a=(u=>{if(!u)return"";let d=u.trim().toLowerCase();return d=d.replace(/°/g,"º"),d=d.replace(/\s+(medio|básico|basico)/g,""),d=d.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),d=d.replace(/^(\d)(?![º])/,"$1º"),d=d.replace(/\s+/g,"").toUpperCase(),d})(t),[n,i]=await Promise.all([Oue(a),Fue(e)]),o=new Map;[...n,...i].forEach(u=>o.set(u.id,u));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(u=>{const d={id:u.id,titulo:u.titulo,descripcion:u.descripcion||"",asignatura:(()=>{const h=String(u.asignatura||"").toLowerCase();return h.includes("lect")?"Competencia Lectora":h.includes("lóg")||h.includes("log")||h.includes("mat")?"Pensamiento Lógico":u.asignatura})(),preguntas:[...u.preguntas],fechaAsignacion:u.fechaCreacion||new Date().toISOString(),textoBase:""};if(String(d.asignatura||"").toLowerCase().includes("lect")){let h="";for(const m of u.preguntas)if(m.textoBase&&m.textoBase.trim()){h=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,h.substring(0,50)+"...");break}h&&d.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluación y primera pregunta: ${u.id}`),d.textoBase=h,d.preguntas[0].textoBase=h)}return d});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function uw(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluación con ID: ${e}`);const a=await Iue(e);if(a){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluación encontrada: ${a.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${a.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=a.preguntas)==null?void 0:t.length)||0}`);const n=a.preguntas.some(i=>i.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - ¿Tiene texto base?: ${n}`),n){const i=a.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${i==null?void 0:i.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=i==null?void 0:i.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontró evaluación con ID: ${e}`);return a||null}catch(a){return console.error("Error en obtenerEvaluacionPorId:",a),null}}async function Uue(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeAciertos??e.porcentajeLogro??0,porcentajeLogro:e.porcentajeLogro??e.porcentajeAciertos??0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString(),tiempoRealizacion:e.tiempoRealizacion??e.duracionSegundos??null};return await Pue(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function Que(e,t){try{return(await Mue(e)).filter(n=>n.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function Hue(e){try{let t=[];try{t=await f7(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:Array.isArray(r.preguntas)?r.preguntas:[],fechaCreacion:kZe(r.fechaCreacion),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function FD(e){try{return await Rue(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function zue(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(/°/g,"º"),y=y.replace(/\s+(medio|básico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),y=y.replace(/^(\d)(?![º])/,"$1º"),y=y.replace(/\s+/g,"").toUpperCase(),y},a=r(t),i=(await xx()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===a).map(v=>v.id);if(i.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await Lue(e,i),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),u=c.reduce((v,y)=>v+y,0)/l;let d=0,f=0,h=0;c.forEach(v=>{v>=80?d++:v>=50?f++:h++});const m=d/l*100,g=f/l*100,x=h/l*100;return{totalEstudiantes:l,promedioLogro:u,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const DD=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:_Ze,crearSetPreguntas:SZe,eliminarResultado:BZe,eliminarSetPreguntas:Due,guardarIntentoEvaluacion:Uue,guardarResultadoIntento:Pue,obtenerEstadisticasPorCurso:zue,obtenerEvaluacionPorId:uw,obtenerEvaluacionesEstudiante:TZe,obtenerEvaluacionesPorProfesor:Hue,obtenerIntentosPorEvaluacion:FD,obtenerResultadosPorCurso:Lue,obtenerResultadosPorEstudiante:Mue,obtenerResultadosPorSet:Rue,obtenerSetPreguntas:Iue,obtenerSetsPreguntasPorCurso:Oue,obtenerSetsPreguntasPorEstudiante:Fue,obtenerSetsPreguntasPorProfesor:f7,verificarIntentoExistente:Que},Symbol.toStringTag,{value:"Module"}));function IZe(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por límite de tamaño]`),t}async function OZe(e,t){try{let r;if(typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=IZe(r.textoProporcionado))),r.asignatura){const l=r.asignatura.toLowerCase();l.includes("lectora")||l.includes("lectura")?r.asignatura="Lectura":(l.includes("lóg")||l.includes("log")||l.includes("matem"))&&(r.asignatura="Matemática")}const a=r.cantidad??4,n=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${a} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const i=FZe(r,a,n);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await K8(i,2,!0);if(!o)throw console.error("La IA no devolvió respuesta"),new Error("No se recibió respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),PZe(o,a,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurrió un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function FZe(e,t,r){const a=e.asignatura,i=(e.nivel||"1M")==="1M"?"1º medio":"2º medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedagógico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${a}" para nivel ${i} (Chile).`),a==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizarás EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa únicamente el texto que se proporciona más adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizarás el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensión: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+i),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer ítem solamente'))}else if(a==="Matemática"){c.push(`
ESPECIFICACIONES PARA MATEMÁTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Números","Álgebra","Probabilidad y estadística","Geometría"];c.push(`- Ejes temáticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemáticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizarás el texto proporcionado por el usuario como contexto o referencia para generar problemas matemáticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN ÚNICO bloque JSON (sin texto adicional antes o después)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificación detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),a==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aquí (solo en el primer ítem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estándar curricular específico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigüedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedagógica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores típicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currículum chileno para "+i+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y español chileno estándar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECÍFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus ítems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&a==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas ÚNICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegúrate de formular preguntas relevantes y precisas."),a==="Matemática"&&(c.push("- Para matemáticas, extrae datos numéricos y situaciones del texto para formular problemas matemáticos relacionados."),c.push("- Cuando sea relevante, inventa datos numéricos coherentes con la situación para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function WW(e){if(!e)return e;try{const t=["como","así","también","según","véase","ejemplo"];let r=e;return t.forEach(a=>{const n=new RegExp(`"([^"]*)"${a}"([^"]*)"`,"g");r=r.replace(n,`"$1\\"${a}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function DZe(e){if(!e||typeof e!="string")return console.error("Texto de entrada inválido:",e),null;console.log("Iniciando extracción JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=WW(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemáticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de código potenciales`);for(const r of t){const a=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de código: ${a.substring(0,50)}...`);const n=WW(a),i=sv(n);try{return JSON.parse(i),console.log("JSON válido extraído del bloque de código"),i}catch{console.log("JSON en este bloque de código es inválido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de código:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=sv(t[1].trim());try{return JSON.parse(r),console.log("JSON completo válido encontrado directamente"),r}catch{console.log("JSON completo parece inválido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const a=e.lastIndexOf("]");let n;if(a>t)n=e.substring(t,a+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`Última pregunta encontrada: ${u} en posición ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),n=e.substring(t,d)+"]"}else n=e.substring(t)+"]"}const i=sv(n);try{return JSON.parse(i),console.log("JSON reconstruido desde inicio del array"),i}catch{console.log("JSON reconstruido inválido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstrucción desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let a=r[0];if(a.includes('"alternativas"')&&a.includes('"id": "A"')){const n=["A","B","C","D"],i=[];for(const o of n)a.includes(`"id": "${o}"`)&&i.push(o);if(console.log(`Alternativas encontradas en p1: ${i.join(", ")}`),i.length>0){const o=a.indexOf('"alternativas"');if(!a.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const h of i){const m=a.lastIndexOf(`"id": "${h}"`);m>d&&(d=m,f=h)}if(d!==-1){console.log(`Última alternativa completa: ${f}`);const h=a.indexOf("}",d);h!==-1&&(a=a.substring(0,h+1),a.includes("]}")||(a+="]}"))}}let c=`[${a}]`;const u=sv(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con éxito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extracción quirúrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let a="A";const n=e.match(/"respuesta"\s*:\s*"([A-D])"/);n&&n[1]&&(a=n[1]);let i="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(i=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="A"}, "explicacion": "${a==="A"?i:""}"},
          {"id": "B", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="B"}, "explicacion": "${a==="B"?i:""}"},
          {"id": "C", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="C"}, "explicacion": "${a==="C"?i:""}"},
          {"id": "D", "texto": "Opción recuperada parcialmente", "esCorrecta": ${a==="D"}, "explicacion": "${a==="D"?i:""}"}
        ],
        "respuesta": "${a}",
        "explicacion": "${i}",
        "habilidad": "Recuperación parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=sv(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extracción quirúrgica:",t)}try{return console.log("Construyendo JSON mínimo de respaldo..."),sv(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opción no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parámetros."
    }]`)}catch(t){console.error("Error final en construcción de JSON de respaldo:",t)}return console.error("Todos los métodos de extracción JSON fallaron"),null}function sv(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const h=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(h>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(C,T)=>(C.match(new RegExp("\\"+T,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),N=g(e,"]");return x!==v||y!==N?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:N}),!0):!1},a=[];for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m<32&&m!==9&&m!==10&&m!==13&&a.push({posicion:h,codigo:m,contexto:e.substring(Math.max(0,h-15),h)+"|PROBLEMA|"+e.substring(h+1,h+15)})}a.length>0&&(console.log(`Detectados ${a.length} caracteres de control problemáticos`),a.slice(0,3).forEach(h=>{console.log(`Carácter de control en posición ${h.posicion}, código U+${h.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${h.contexto}`)})),e=e.replace(/^\uFEFF/,"");let n="";for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?n+=e[h]:n+=" "}if(e=n,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const h=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(h){let m=h[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const N=m.indexOf("}",x);if(N!==-1){let C=m.substring(0,N+1);C+=" ] }",e=`[ ${C} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let i="",o=!1,l=!1;for(let h=0;h<e.length;h++){const m=e[h],g=e.charCodeAt(h);o?l?(i+=m,l=!1):m==="\\"?(i+=m,l=!0):m==='"'?(i+=m,o=!1):g<32?(i+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carácter de control en posición ${h}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[h-1]!=="\\"?(i+='\\"',console.log(`Escapada comilla sin escapar en posición ${h}`)):i+=m:(m==='"'&&!o&&(o=!0),i+=m)}e=i,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(h,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(h=>{const m=new RegExp(`"${h}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${h}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(h,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("así")||g.includes("también")||g.includes("según"))?`"${m}\\"${g}\\"${x}"`:h),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const d=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(d){const h=e.indexOf(d[0])+d[0].length;e=e.substring(0,h)+" }"+e.substring(h),console.log("Reparado cierre de alternativa")}const f=h=>{if(e.length>=h+10){const m=e.substring(Math.max(0,h-20),Math.min(e.length,h+20));console.log(`Verificando contexto alrededor de posición ${h}: "${m}"`);const g=[];for(let x=Math.max(0,h-5);x<Math.min(e.length,h+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Análisis de caracteres alrededor de posición específica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(h,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(h,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio válido")}catch(h){console.log("JSON sigue siendo inválido después de limpieza, intentando reparación más agresiva"),console.error("Error específico:",h.message);try{if(h.message&&h.message.includes("position")){const x=h.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posición específica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("¡Detectado el error típico en posición ~392! Aplicando corrección específica..."),f(v);try{const N=e.lastIndexOf('"',v),C=e.indexOf('"',v);if(N!==-1&&C!==-1){const T=e.substring(0,N+1),_=e.substring(C);e=T+"Contenido reemplazado debido a caracteres de control"+_,console.log("Aplicada corrección específica para error en posición 392");try{return JSON.parse(e),console.log("Corrección específica exitosa"),e}catch{console.log("La corrección específica falló, continuando...")}}}catch(N){console.log("Error durante corrección específica:",N)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const N=e.lastIndexOf('"',v)+1,C=e.indexOf('"',v);if(N>=0&&C>=0){const T=e.substring(N,C),_=T.substring(0,Math.min(100,T.length));e=e.substring(0,N)+_+e.substring(C),console.log("Aplicada reparación de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparación exitosa por truncado de contenido"),e}catch{console.log("Reparación por truncado falló, continuando con reconstrucción completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const N=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automáticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(N),console.log("Generada versión de emergencia del JSON"),e=N}catch{console.log("Error al parsear JSON de emergencia, creando versión básica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generación."},
              {"id": "B", "texto": "Opción B", "esCorrecta": false},
              {"id": "C", "texto": "Opción C", "esCorrecta": false},
              {"id": "D", "texto": "Opción D", "esCorrecta": false}
            ],
            "habilidad": "Diagnóstico",
            "estandarAprendizaje": "Error en generación"
          }]`}}else console.log("No se encontraron datos mínimos para reconstrucción, usando JSON de fallback mínimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parámetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnóstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstrucción manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crítico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error técnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opción B", "esCorrecta": false},
          {"id": "C", "texto": "Opción C", "esCorrecta": false},
          {"id": "D", "texto": "Opción D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(h){console.error("JSON final sigue siendo inválido:",h),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function PZe(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA inválida:",e),new Error("No se recibió una respuesta válida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const a=DZe(e);if(!a)return console.error("No se pudo extraer JSON de la respuesta después de múltiples intentos"),Xy(1,"La IA generó una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extraído correctamente, intentando parsear...");let n;try{n=JSON.parse(a),console.log("JSON parseado correctamente:",typeof n,Array.isArray(n)?n.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",a.substring(0,200)),console.log("Intentando reparación de emergencia del JSON...");try{const c=a.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";n=JSON.parse(u),console.log("Reparación parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo después de error de parseo final"),Xy(1,"La IA generó una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parámetros.")}}if(!Array.isArray(n))if(console.log("La respuesta no es un array, encapsulándola"),typeof n=="object"&&n!==null)n=[n];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof n),Xy(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(n=n.filter(l=>l&&typeof l=="object"),n.length===0)return console.error("No se encontraron preguntas válidas después de filtrar"),Xy(1,"No se pudieron extraer preguntas válidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${n.length} preguntas para procesar`),n.length<t&&(console.warn(`⚠️ Solo se generaron ${n.length} preguntas de ${t} solicitadas. Intentando re-generación automática.`),n.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generación parcial. Intentando recuperar más preguntas..."));let i;r!=null&&r.textoProporcionado?(i=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):n.length>0&&n[0].textoBase?(i=n[0].textoBase,console.log("Se encontró textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(i=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=n.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto válido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontró enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opción A (generada automáticamente)",esCorrecta:!0},{id:"B",texto:"Opción B (generada automáticamente)",esCorrecta:!1},{id:"C",texto:"Opción C (generada automáticamente)",esCorrecta:!1},{id:"D",texto:"Opción D (generada automáticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let N=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(N=!0);const C=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return C&&(C===y||C===x||C===x+1||C===(x+1).toString())&&(N=!0),{id:y,texto:v,esCorrecta:N,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas válidas después de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automáticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontró alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),h=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return h&&f&&!f.explicacion&&(f.explicacion=h),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?i:void 0,createdAt:qa(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),XW(c+1)}});if(console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o.length<t){const l=t-o.length;console.warn(`Rellenando ${l} pregunta(s) para alcanzar la cantidad solicitada (${t})`);for(let c=0;c<l;c++)o.push(XW(o.length+1))}return o}catch(a){return console.error("Error general en procesarRespuestaIA:",a),Xy(t,"Ocurrió un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function XW(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación con el modelo Pro."},{id:"B",texto:"Modificar parámetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:qa(),dificultad:"media"}}function Xy(e,t){const r=[];for(let a=0;a<e;a++)r.push({id:`p${a+1}`,enunciado:a===0?t:`Pregunta ${a+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación."},{id:"B",texto:"Modificar parámetros de generación",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnóstico",estandarAprendizaje:"Error en generación",createdAt:qa(),dificultad:"media"});return r}async function RZe(e){try{const t=mh(),r=lc(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const a=await r({options:e}),{preguntas:n,textoBase:i}=a.data;if(!n||!Array.isArray(n)||n.length===0)throw new Error("La respuesta no contiene preguntas válidas");return console.log(`Se generaron ${n.length} preguntas correctamente mediante Cloud Function`),i&&n.length>0&&(n[0].textoBase=i),n}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const uC=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?s.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):s.jsx("span",{className:"whitespace-pre-wrap",children:e});if(ct.isValidElement(e))return e;try{return s.jsx("span",{children:JSON.stringify(e)})}catch{return s.jsx("span",{children:"[Sin contenido disponible]"})}},Xc=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},LZe=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},MZe=(e,t)=>t.trim()?e.map((r,a)=>a===0?{...r,textoBase:t.trim()}:r):e,UZe=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState("lista"),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,h]=w.useState("todas"),[m,g]=w.useState(!1),[x,v]=w.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,N]=w.useState(!1),[C,T]=w.useState(null),[_,O]=w.useState([]),[j,S]=w.useState([]),[B,L]=w.useState(""),[D,k]=w.useState(!1),[R,U]=w.useState(null),[H,Q]=w.useState(null),[V,G]=w.useState([]);w.useEffect(()=>{(async()=>{try{n(!0);const xe=await f7(e.id||"");r(xe);const he=await xx();G(he);const ye=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(Ae=>ye.add(Xc(Ae))):on.forEach(Ae=>ye.add(Xc(Ae))),he.filter(Ae=>Ae.profile==="ESTUDIANTE"&&Ae.curso).forEach(Ae=>{Ae.curso&&(Ae.curso=Xc(Ae.curso),ye.add(Ae.curso))});const ce=Array.from(ye).sort().map(Ae=>({id:Ae,nombre:J(Ae)}));O(ce)}catch(xe){console.error("Error al cargar datos iniciales:",xe),T("No se pudieron cargar los datos necesarios")}finally{n(!1)}})()},[e]);const J=de=>{const xe=de.match(/^(\d+)º?([A-E])$/i);if(xe){const he=xe[1],ye=xe[2].toUpperCase();return`${he}º Medio ${ye}`}return de};w.useEffect(()=>{S(B?_.filter(de=>de.nombre.toLowerCase().includes(B.toLowerCase())):[])},[B,_]);const W=()=>t.filter(de=>{const xe=de.titulo.toLowerCase().includes(u.toLowerCase()),he=f==="todas"||de.asignatura===f;return xe&&he}),Z=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),U(null),Q(null),ae(de=>({...de,textoProporcionado:""})),o("detalle")},M=de=>{g(!0),c(de),v({...de}),o("detalle")},F=async de=>{if(window.confirm(`¿Estás seguro de eliminar el set "${de.titulo}"? Esta acción no se puede deshacer.`))try{await Due(de.id),r(xe=>xe.filter(he=>he.id!==de.id))}catch(xe){console.error("Error al eliminar set:",xe),T("No se pudo eliminar el set de preguntas")}},X=async()=>{try{if(!x.titulo){T("El título de la evaluación es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){T("Debes agregar al menos una pregunta");return}const de=(x.cursosAsignados||[]).map(Xc),xe=de.length>0;n(!0);let he=[];xe&&(he=V.filter(ze=>ze.profile==="ESTUDIANTE"&&ze.curso&&de.includes(Xc(ze.curso))).map(ze=>ze.id));const ye=new Date().toISOString(),ce=e.id||"",Ae=e.nombreCompleto||e.displayName||e.email||"Docente",Ne={...x,cursosAsignados:de,estudiantesAsignados:he,creadorId:l&&l.creadorId||ce,creadorNombre:l&&l.creadorNombre||Ae,fechaCreacion:l&&l.fechaCreacion||ye},Pe=(Ne.preguntas||[]).map(ze=>{var ir;const Tt=((ir=ze.alternativas.find(Kt=>Kt.esCorrecta))==null?void 0:ir.id)||ze.respuestaCorrecta;return{...ze,respuestaCorrecta:Tt}});Ne.preguntas=Pe;let Qe="";const{collection:$e,addDoc:et,updateDoc:Ke,doc:Ge}=await ai(async()=>{const{collection:ze,addDoc:Tt,updateDoc:ir,doc:Kt}=await Promise.resolve().then(()=>Tb);return{collection:ze,addDoc:Tt,updateDoc:ir,doc:Kt}},void 0),{db:nt}=await ai(async()=>{const{db:ze}=await Promise.resolve().then(()=>s8);return{db:ze}},void 0),bt="simce_evaluaciones";console.log("[DEBUG] Guardando evaluación:",Ne);try{if(l&&l.id){const ze=Ge(nt,bt,l.id),{getDoc:Tt,deleteDoc:ir}=await ai(async()=>{const{getDoc:Cr,deleteDoc:$r}=await Promise.resolve().then(()=>Tb);return{getDoc:Cr,deleteDoc:$r}},void 0),Kt=await Tt(ze);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",Kt.exists()),Kt.exists())await Ke(ze,Ne),Qe=l.id,console.log("[DEBUG] Evaluación actualizada en simce_evaluaciones:",Qe);else{Qe=(await et($e(nt,bt),Ne)).id,console.log("[DEBUG] Evaluación migrada a simce_evaluaciones:",Qe);const $r=Ge(nt,"simce_sets",l.id),br=await Tt($r);console.log("[DEBUG] Documento antiguo existe en simce_sets:",br.exists()),br.exists()&&(await ir($r),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else Qe=(await et($e(nt,bt),Ne)).id,console.log("[DEBUG] Evaluación nueva creada en simce_evaluaciones:",Qe)}catch(ze){throw console.error("[ERROR] Guardando evaluación:",ze),ze}const ut={id:Qe,...Ne};r(ze=>{const Tt=ze.findIndex(ir=>ir.id===Qe);if(Tt>=0){const ir=[...ze];return ir[Tt]=ut,ir}return[ut,...ze]}),ie({tipo:"success",mensaje:xe?`Evaluación guardada y asignada a ${de.length} curso${de.length!==1?"s":""} correctamente`:"Evaluación guardada correctamente"}),setTimeout(()=>{ie({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),T(null)}catch(de){console.error("Error al guardar evaluación:",de),T("No se pudo guardar la evaluación"),ie({tipo:"error",mensaje:"Ocurrió un error al guardar la evaluación"}),setTimeout(()=>{ie({tipo:"",mensaje:""})},3e3)}finally{n(!1)}},[Y,ae]=w.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar información":!0,"Relacionar información":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Números:!0,Álgebra:!0,"Probabilidad y estadística":!0,Geometría:!0}}),[le,ie]=w.useState({tipo:"",mensaje:""}),ne=async()=>{var de,xe,he,ye,ce;try{if(!x.asignatura){T("Seleccione una asignatura para generar preguntas");return}N(!0),T(null),ie({tipo:"",mensaje:""});let Ae,Ne;x.asignatura==="Competencia Lectora"?(Ae=Object.entries(Y.habilidadesLectura).filter(([Ke,Ge])=>Ge).map(([Ke])=>Ke),Ae.length===0&&(Ae=["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lógico"&&(Ne=Object.entries(Y.ejesMatematica).filter(([Ke,Ge])=>Ge).map(([Ke])=>Ke),Ne.length===0&&(Ne=["Números","Álgebra","Probabilidad y estadística","Geometría"])),ie({tipo:"warning",mensaje:`Generando ${Y.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const Qe={asignatura:(()=>{const Ke=(x.asignatura||"").toLowerCase();if(Ke.includes("lectora")||Ke.includes("lectura"))return"Lectura";if(Ke.includes("lóg")||Ke.includes("log")||Ke.includes("matem"))return"Matemática";const Ge=x.asignatura||"Lectura";return Ge==="Lectura"||Ge==="Matemática"?Ge:"Lectura"})(),cantidad:parseInt(Y.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:Ae,ejesMatematica:Ne,dificultad:Y.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((de=Y.textoProporcionado)==null?void 0:de.trim())||void 0};let $e,et=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),et.push("Cloud Function"),$e=await RZe(Qe),!Array.isArray($e)||$e.length===0)throw new Error("La respuesta de Cloud Function no es válida");$e.forEach((Ke,Ge)=>{if(!Ke.enunciado||!Array.isArray(Ke.alternativas)||Ke.alternativas.length!==4)throw new Error(`Pregunta ${Ge+1} tiene estructura inválida`)})}catch(Ke){console.error("Error con Cloud Function:",Ke);try{if(console.log("Usando generación local como respaldo..."),et.push("Local"),ie({tipo:"warning",mensaje:"Usando generación local como respaldo. Procesando..."}),$e=await OZe(Qe),!Array.isArray($e)||$e.length===0)throw new Error("La generación local no produjo resultados válidos");$e.forEach((Ge,nt)=>{if(!Ge.enunciado||!Array.isArray(Ge.alternativas)||Ge.alternativas.length!==4)throw new Error(`Pregunta ${nt+1} generada localmente tiene estructura inválida`)})}catch(Ge){console.error("Error con generación local:",Ge);const nt=[];throw(xe=Ke.message)!=null&&xe.includes("JSON")&&nt.push("Problema de formato en servidor remoto"),(he=Ge.message)!=null&&he.includes("JSON")&&nt.push("Problema de formato en generación local"),new Error(`No se pudieron generar preguntas con ningún método (intentos: ${et.join(", ")}). Errores: ${nt.join(", ")||"Problemas de conexión o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!$e||$e.length===0)throw new Error("No se generaron preguntas válidas después de todos los intentos");if(x.asignatura==="Competencia Lectora"){let Ke=(ye=Y.textoProporcionado)==null?void 0:ye.trim();Ke||(Ke=(ce=$e[0].textoBase)==null?void 0:ce.trim()),Ke||(Ke="Texto de comprensión generado automáticamente."),$e[0].textoBase=Ke,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",Ke.substring(0,50)+"...")}v(Ke=>({...Ke,preguntas:[...Ke.preguntas||[],...$e]})),ie({tipo:"success",mensaje:`¡Se generaron ${$e.length} preguntas correctamente usando ${et[et.length-1]}!`}),setTimeout(()=>{ie({tipo:"",mensaje:""})},5e3)}catch(Ae){console.error("Error general al generar preguntas:",Ae);let Ne="No se pudieron generar las preguntas.";Ae instanceof Error&&(Ae.message.includes("JSON")?Ne="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":Ae.message.includes("red")||Ae.message.includes("network")?Ne="Problema de conexión. Verifique su conexión a internet e intente nuevamente.":Ae.message.length>10&&(Ne=Ae.message)),T(Ne),ie({tipo:"error",mensaje:Ne+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{ie({tipo:"",mensaje:""})},8e3)}finally{N(!1)}},oe=de=>{Q({...de})},we=()=>{var ye,ce;if(!H)return;if(!H.enunciado){T("El enunciado de la pregunta es obligatorio");return}if(!H.alternativas.find(Ae=>Ae.esCorrecta)){T("Debe marcar una alternativa como correcta");return}if(H.alternativas.filter(Ae=>!Ae.texto).length>0){T("Todas las alternativas deben tener texto");return}const he=H.textoBase&&x.asignatura==="Competencia Lectora";if(H.id.startsWith("p"))if(he){console.log("Nueva pregunta con texto base detectado:",H.textoBase);const Ae=[...x.preguntas||[]];v(Ne=>({...Ne,preguntas:[H,...Ae]}))}else v(Ae=>({...Ae,preguntas:[...Ae.preguntas||[],H]}));else if(he){console.log("Actualizando pregunta con texto base:",H.textoBase);const Ae=((ye=x.preguntas)==null?void 0:ye.map(Ne=>Ne.id===H.id?H:Ne))||[];if(H===((ce=x.preguntas)==null?void 0:ce[0])){const Ne=H.textoBase||"",Pe=MZe(Ae,Ne);v(Qe=>({...Qe,preguntas:Pe}))}else v(Ne=>({...Ne,preguntas:Ae}))}else v(Ae=>{var Ne;return{...Ae,preguntas:((Ne=Ae.preguntas)==null?void 0:Ne.map(Pe=>Pe.id===H.id?H:Pe))||[]}});Q(null),T(null)},K=de=>{v(xe=>{var he;return{...xe,preguntas:((he=xe.preguntas)==null?void 0:he.filter(ye=>ye.id!==de))||[]}})},Ee=de=>{const xe=Xc(de);v(he=>{const ye=(he.cursosAsignados||[]).map(Xc);return ye.includes(xe)?{...he,cursosAsignados:ye.filter(ce=>ce!==xe)}:{...he,cursosAsignados:[...ye,xe]}})},_e=()=>{const de=W();return a?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(bA,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(C1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:xe=>d(xe.target.value)})]}),s.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:xe=>h(xe.target.value),children:[s.jsx("option",{value:"todas",children:"Todas las asignaturas"}),s.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),s.jsx("option",{value:"Pensamiento Lógico",children:"Pensamiento Lógico"})]})]}),s.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[s.jsx(Li,{className:"w-4 h-4"}),"Nueva evaluación"]})]}),s.jsx("div",{className:"space-y-4",children:de.length===0?s.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx(S_,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas aún. Crea tu primera evaluación SIMCE."}),(u||f!=="todas")&&s.jsx("button",{onClick:()=>{d(""),h("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):de.map(xe=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"p-4 flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`p-2 rounded-md mr-3 ${xe.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:xe.asignatura==="Competencia Lectora"?s.jsx(Ds,{className:"w-5 h-5"}):s.jsx(t8,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:xe.titulo}),xe.descripcion&&s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:xe.descripcion}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[xe.preguntas.length," preguntas"]}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:xe.asignatura}),xe.cursosAsignados&&xe.cursosAsignados.length>0&&s.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[s.jsx(Ei,{className:"w-3 h-3"}),xe.cursosAsignados.length," ",xe.cursosAsignados.length===1?"curso":"cursos"]}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:xe.fechaCreacion?new Date(xe.fechaCreacion).toLocaleDateString():"-"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>c(xe),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:s.jsx(tb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>M(xe),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluación",children:s.jsx(wh,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>F(xe),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluación",children:s.jsx(Da,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===xe.id&&s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[xe.asignatura==="Competencia Lectora"&&(()=>{const he=LZe(xe.preguntas);return he?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:s.jsx(Ds,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:s.jsx(uC,{content:he,context:"simce-texto-base"})})]}):null})(),s.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"❓"}),"Preguntas (",xe.preguntas.length,")"]}),s.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:xe.preguntas.map((he,ye)=>{var ce,Ae;return s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("p",{className:"font-medium",children:[s.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:ye+1}),he.enunciado]}),s.jsx("div",{className:"mt-3 ml-6 space-y-2",children:he.alternativas.map(Ne=>s.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${Ne.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[Ne.id,")"]}),s.jsx("span",{className:"flex-1",children:Ne.texto}),Ne.esCorrecta&&s.jsx(cn,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},Ne.id))}),s.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"📚 Estándar:"})," ",he.estandarAprendizaje]}),he.habilidad&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"🎯 Habilidad:"})," ",he.habilidad]}),((ce=he.alternativas.find(Ne=>Ne.esCorrecta))==null?void 0:ce.explicacion)&&s.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[s.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"💡 Explicación:"}),s.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(Ae=he.alternativas.find(Ne=>Ne.esCorrecta))==null?void 0:Ae.explicacion})]})]})]},he.id)})}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:"✕ Cerrar vista detallada"})})]})]},xe.id))})]})},Ce=()=>{var de,xe,he,ye;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluación":"Nueva evaluación"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{g(!1),o("lista"),T(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),s.jsxs("button",{onClick:X,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:a,children:[s.jsx(gl,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluación"]})]})]}),C&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[s.jsx(Db,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:C})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la evaluación *"}),s.jsx("input",{type:"text",value:x.titulo,onChange:ce=>v({...x,titulo:ce.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluación SIMCE 4° Básico - Competencia Lectora"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Asignatura"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Competencia Lectora"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/40 dark:text-blue-300 dark:border-blue-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Competencia Lectora"}),s.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Pensamiento Lógico"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Pensamiento Lógico"?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900/40 dark:text-purple-300 dark:border-purple-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Pensamiento Lógico"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción (opcional)"}),s.jsx("textarea",{value:x.descripcion,onChange:ce=>v({...x,descripcion:ce.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripción de la evaluación",rows:3})]})]}),s.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[s.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[s.jsx(Ei,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&s.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),s.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estará asignada esta evaluación. Estará disponible para los estudiantes en cuanto guarde."}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:B,onChange:ce=>{L(ce.target.value),k(!0)},onFocus:()=>k(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),D&&(j.length>0||B)&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:j.length===0&&B?s.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):j.map(ce=>s.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{Ee(ce.id),L("")},children:[s.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(ce.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(ce.id)&&s.jsx(pre,{className:"w-3 h-3 text-white"})}),s.jsx("span",{children:ce.nombre})]},ce.id))})]}),(x.cursosAsignados||[]).length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(ce=>{const Ae=_.find(Ne=>Ne.id===ce);return s.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[s.jsx("span",{children:(Ae==null?void 0:Ae.nombre)||ce}),s.jsx("button",{onClick:()=>Ee(ce),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:s.jsx(Oo,{className:"w-3 h-3"})})]},ce)})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const ce=V.filter(Ae=>{if(Ae.profile!=="ESTUDIANTE"||!Ae.curso)return!1;const Ne=Xc(Ae.curso);return(x.cursosAsignados||[]).includes(Ne)});return ce.length===0?s.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):s.jsx("ul",{className:"list-disc pl-4",children:ce.map(Ae=>s.jsxs("li",{className:"mb-1",children:[Ae.nombreCompleto||Ae.nombre||Ae.id," ",s.jsxs("span",{className:"text-xs text-slate-400",children:["(",J(Xc(Ae.curso)),")"]})]},Ae.id))})})()})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuración de presentación"})}),s.jsx("div",{className:"flex space-x-6",children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:ce=>v({...x,barajarAlternativas:ce.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),s.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generación con IA"}),le.mensaje&&s.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${le.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":le.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[le.tipo==="error"&&s.jsx(Db,{className:"w-5 h-5 flex-shrink-0"}),le.tipo==="warning"&&s.jsx(bA,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),le.tipo==="success"&&s.jsx(cn,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:le.mensaje})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarán basadas en él. Si lo deja vacío, la IA generará automáticamente un texto adecuado."}),s.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:Y.textoProporcionado||"",onChange:ce=>ae({...Y,textoProporcionado:ce.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aquí un texto para generar preguntas de comprensión lectora...":"Ingrese aquí un texto para crear problemas de pensamiento lógico relacionados...",rows:6})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),s.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:Y.cantidadPreguntas,onChange:ce=>ae({...Y,cantidadPreguntas:ce.target.value}),children:[s.jsx("option",{value:"2",children:"2 preguntas"}),s.jsx("option",{value:"4",children:"4 preguntas"}),s.jsx("option",{value:"6",children:"6 preguntas"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),s.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:Y.dificultad,onChange:ce=>ae({...Y,dificultad:ce.target.value}),children:[s.jsx("option",{value:"baja",children:"Baja"}),s.jsx("option",{value:"media",children:"Media"}),s.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Y.habilidadesLectura).map(([ce,Ae])=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:Ae,onChange:()=>{ae({...Y,habilidadesLectura:{...Y.habilidadesLectura,[ce]:!Ae}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),s.jsx("span",{className:"text-sm",children:ce})]},ce))})]}),x.asignatura==="Pensamiento Lógico"&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lógico"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Y.ejesMatematica).map(([ce,Ae])=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:Ae,onChange:()=>{ae({...Y,ejesMatematica:{...Y.ejesMatematica,[ce]:!Ae}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),s.jsx("span",{className:"text-sm",children:ce})]},ce))})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:ne,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx(bA,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Li,{className:"w-4 h-4"}),"Generar preguntas automáticamente"]})})}),H?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((de=x.preguntas[0])==null?void 0:de.id)===H.id&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensión"}),s.jsx("textarea",{value:H.textoBase||"",onChange:ce=>Q({...H,textoBase:ce.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),s.jsx("textarea",{value:H.enunciado,onChange:ce=>Q({...H,enunciado:ce.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estándar de aprendizaje *"}),s.jsx("select",{value:H.estandarAprendizaje,onChange:ce=>Q({...H,estandarAprendizaje:ce.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Competencia Lectora"?EZe.map((ce,Ae)=>s.jsx("option",{value:ce,children:ce},Ae)):jZe.map((ce,Ae)=>s.jsx("option",{value:ce,children:ce},Ae))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),s.jsx("input",{value:H.habilidad||"",onChange:ce=>Q({...H,habilidad:ce.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),s.jsx("div",{className:"space-y-3",children:H.alternativas.map((ce,Ae)=>s.jsxs("div",{className:"flex items-start",children:[s.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[s.jsx("input",{type:"radio",checked:ce.esCorrecta,onChange:()=>{Q({...H,alternativas:H.alternativas.map(Ne=>({...Ne,esCorrecta:Ne.id===ce.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsxs("span",{className:"ml-1 font-semibold",children:[ce.id,")"]})]}),s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:ce.texto,onChange:Ne=>{Q({...H,alternativas:H.alternativas.map(Pe=>Pe.id===ce.id?{...Pe,texto:Ne.target.value}:Pe)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${ce.id}...`,rows:2})})]},ce.id))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicación para alternativa correcta (recomendado)"}),s.jsx("textarea",{value:((xe=H.alternativas.find(ce=>ce.esCorrecta))==null?void 0:xe.explicacion)||"",onChange:ce=>{Q({...H,alternativas:H.alternativas.map(Ae=>Ae.esCorrecta?{...Ae,explicacion:ce.target.value}:Ae)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qué esta es la respuesta correcta...",rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{Q(null),T(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),s.jsxs("button",{onClick:we,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[s.jsx(gl,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):s.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?s.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx(gre,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas aún. Puedes generar preguntas automáticamente o agregarlas manualmente."})]}):s.jsxs(s.Fragment,{children:[x.asignatura==="Competencia Lectora"&&((ye=(he=x.preguntas)==null?void 0:he[0])==null?void 0:ye.textoBase)&&s.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:s.jsx(Ds,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensión Lectora"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompañará a todas las preguntas de lectura"})]})]}),s.jsx("button",{onClick:()=>{var Ae;const ce=(Ae=x.preguntas)==null?void 0:Ae[0];ce&&oe(ce)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:s.jsx(wh,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:s.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:s.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((ce,Ae)=>{var Ne,Pe;return s.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-medium",children:[s.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",Ae+1]}),ce.enunciado]}),s.jsx("div",{className:"mt-3 ml-6 space-y-2",children:ce.alternativas.map(Qe=>s.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${Qe.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[Qe.id,")"]}),s.jsx("span",{className:"flex-1",children:Qe.texto}),Qe.esCorrecta&&s.jsx(cn,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},Qe.id))}),s.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Estándar:"})," ",ce.estandarAprendizaje]}),ce.habilidad&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",ce.habilidad]}),((Ne=ce.alternativas.find(Qe=>Qe.esCorrecta))==null?void 0:Ne.explicacion)&&s.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[s.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicación:"}),s.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(Pe=ce.alternativas.find(Qe=>Qe.esCorrecta))==null?void 0:Pe.explicacion})]})]})]}),s.jsxs("div",{className:"flex gap-1 ml-3",children:[s.jsx("button",{onClick:()=>oe(ce),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:s.jsx(wh,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>K(ce.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:s.jsx(Da,{className:"w-4 h-4"})})]})]})},ce.id)})]})})]})]})};return s.jsxs(s.Fragment,{children:[i==="lista"&&!m&&_e(),(i==="detalle"||m)&&Ce()]})},QZe=e=>(console.log("Google Sans Code font would be added here"),e);var YW={};const HZe=({className:e})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),JW=["Selección múltiple","Verdadero o Falso","Términos pareados","Desarrollo","Comprensión de lectura"],Vue=mh(N1),zZe=lc(Vue,"generarRubricaConGemini"),VZe=lc(Vue,"generarDescriptorDimensionConGemini"),b6={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[5,10,15],"Comprensión de lectura":[5,10,15]},$Ze=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>{var o;const a=e.puntaje??1,n=l=>{const c=Array.isArray(l)?l.slice(0,4):[];for(;c.length<4;)c.push("");return c},i=l=>l.length<=1?l:[...l.slice(1),l[0]];return s.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-slate-800 dark:border-slate-700",children:[s.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:e.tipo}),s.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:e.pregunta||(e.tipo==="Comprensión de lectura"?"Comprensión de lectura":"")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in e&&e.habilidadBloom&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",e.habilidadBloom]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[a," pts"]})]})]}),e.tipo==="Selección múltiple"&&s.jsxs("div",{className:"ml-1 mt-2 space-y-2",children:[s.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-1",children:"Marca la alternativa correcta."}),n(e.opciones).map((l,c)=>{const u=t&&c===e.respuestaCorrecta;return s.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/30":""}`,children:[s.jsx("div",{className:"w-5 h-5 border rounded-full flex-shrink-0"}),s.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})]}),e.tipo==="Verdadero o Falso"&&s.jsxs("div",{className:"ml-1 mt-2 flex items-center gap-6",children:[s.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Indica si la afirmación es verdadera (V) o falsa (F)."}),s.jsx("div",{className:"flex-1"}),s.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!0?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"V"}),s.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!1?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"F"})]}),e.tipo==="Desarrollo"&&s.jsx("div",{className:"mt-3 border rounded-md h-24 bg-slate-50 dark:bg-slate-700/40"}),e.tipo==="Términos pareados"&&(()=>{const l=e.pares||[],c=l.map(f=>f.concepto),u=i(l.map(f=>f.definicion)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-2",children:"Une cada concepto (columna izquierda) con su definición (columna derecha)."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Columna A: Conceptos"}),s.jsx("div",{className:"space-y-1",children:c.map((f,h)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"font-semibold w-6 text-right",children:[h+1,"."]}),s.jsx("span",{children:f})]},h))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Columna B: Definiciones"}),s.jsx("div",{className:"space-y-1",children:u.map((f,h)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"font-semibold w-6 text-right",children:[d[h]||"?","."]}),s.jsx("span",{children:f})]},h))})]})]})]})})(),e.tipo==="Comprensión de lectura"&&s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-md whitespace-pre-wrap",children:e.texto}),s.jsx("div",{className:"space-y-3",children:(o=e.preguntas)==null?void 0:o.map((l,c)=>{var u;return s.jsxs("div",{className:"p-3 border rounded-md bg-white dark:bg-slate-800 dark:border-slate-700",children:[s.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:["CL-",c+1]}),s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:l.tipo}),s.jsx("div",{className:"font-medium",children:l.pregunta})]}),s.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in l&&l.habilidadBloom&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",l.habilidadBloom]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.puntaje??1," pts"]})]})]}),l.tipo==="Selección múltiple"?s.jsx("div",{className:"ml-1 mt-1 space-y-1",children:(u=l.opciones)==null?void 0:u.map((d,f)=>{const h=t&&f===l.respuestaCorrecta;return s.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${h?"bg-green-100 dark:bg-green-900/30":""}`,children:[s.jsx("div",{className:"w-4 h-4 border rounded-full flex-shrink-0"}),s.jsxs("span",{children:[String.fromCharCode(65+f),") ",d]})]},f)})}):s.jsx("div",{className:"mt-2 border rounded-md h-16 bg-slate-50 dark:bg-slate-700/40"})]},c)})})]})]})},GZe=()=>{const e=w.useMemo(()=>JW.reduce((W,Z)=>(W[Z]=0,W),{}),[]),t=w.useMemo(()=>({nombre:"",asignatura:(ln==null?void 0:ln[0])||"",nivel:(Nh==null?void 0:Nh[0])||"",contenido:"",tiposActividad:e,dificultad:"Intermedio",isNee:!1,selectedNee:[]}),[e]),[r,a]=w.useState(t),[n,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState([]),[h,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),{currentUser:N}=l7();w.useEffect(()=>{if(N){const W=PYe(f);return()=>W()}},[N]);const C=W=>{const{name:Z,value:M}=W.target;a(F=>({...F,[Z]:M}))},T=W=>{a(Z=>{var F;const M={...Z.tiposActividad};return M[W]>0?M[W]=0:M[W]=((F=b6[W])==null?void 0:F[0])||1,{...Z,tiposActividad:M}})},_=(W,Z)=>{a(M=>({...M,tiposActividad:{...M.tiposActividad,[W]:Z}}))},O=W=>{a(Z=>{const M=Z.selectedNee.includes(W)?Z.selectedNee.filter(F=>F!==W):[...Z.selectedNee,W];return{...Z,selectedNee:M}})},j=W=>{const Z=String(W||"").trim().toLowerCase();if(Z){if(Z.includes("record"))return"Recordar";if(Z.includes("comprend")||Z.includes("entend"))return"Comprender";if(Z.includes("aplic"))return"Aplicar";if(Z.includes("analiz"))return"Analizar";if(Z.includes("evalu"))return"Evaluar";if(Z.includes("crea")||Z.includes("sintet"))return"Crear"}},S=W=>{switch(W){case"Selección múltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Términos pareados":return"Comprender";case"Comprensión de lectura":return"Comprender";default:return"Comprender"}},B=W=>{const M=(Array.isArray(W)?W.map(F=>typeof F=="string"?F:(F==null?void 0:F.texto)??""):[]).slice(0,4);for(;M.length<4;)M.push("");return M},L=W=>{if(typeof(W==null?void 0:W.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,W.respuestaCorrecta));if(Array.isArray(W==null?void 0:W.alternativas)){const F=W.alternativas.findIndex(X=>X&&(X.esCorrecta===!0||X.correcta===!0));if(F>=0&&F<4)return F}const Z=String((W==null?void 0:W.correcta)||(W==null?void 0:W.respuesta)||(W==null?void 0:W.respuestaCorrecta)||"").trim().toUpperCase(),M={A:0,B:1,C:2,D:3};return Z in M?M[Z]:0},D=W=>{const Z=B(W.opciones??W.alternativas),M=L(W),F=j(W.habilidadBloom)||S("Selección múltiple");return{id:W.id||crypto.randomUUID(),tipo:"Selección múltiple",pregunta:W.pregunta||W.enunciado||"Pregunta",puntaje:W.puntaje??1,opciones:Z,respuestaCorrecta:M,habilidadBloom:F}},k=W=>{let Z=!1;typeof(W==null?void 0:W.respuestaCorrecta)=="boolean"?Z=W.respuestaCorrecta:typeof(W==null?void 0:W.esVerdadero)=="boolean"?Z=W.esVerdadero:W!=null&&W.correcta&&(Z=String(W.correcta).toUpperCase().startsWith("V"));const M=j(W.habilidadBloom)||S("Verdadero o Falso");return{id:W.id||crypto.randomUUID(),tipo:"Verdadero o Falso",pregunta:W.pregunta||W.enunciado||"Afirmación",puntaje:W.puntaje??1,respuestaCorrecta:Z,habilidadBloom:M}},R=W=>{const Z=j(W.habilidadBloom)||S("Desarrollo");return{id:W.id||crypto.randomUUID(),tipo:"Desarrollo",pregunta:W.pregunta||W.enunciado||"Pregunta abierta",puntaje:W.puntaje??1,habilidadBloom:Z}},U=W=>{let Z=Array.isArray(W==null?void 0:W.pares)?W.pares:[];if((!Z||Z.length===0)&&Array.isArray(W==null?void 0:W.conceptos)&&Array.isArray(W==null?void 0:W.definiciones)){const F=Math.min(W.conceptos.length,W.definiciones.length);Z=Array.from({length:F},(X,Y)=>({concepto:W.conceptos[Y],definicion:W.definiciones[Y]}))}Z=(Z||[]).map(F=>({concepto:(F==null?void 0:F.concepto)??"",definicion:(F==null?void 0:F.definicion)??""}));const M=j(W.habilidadBloom)||S("Términos pareados");return{id:W.id||crypto.randomUUID(),tipo:"Términos pareados",pregunta:W.pregunta||W.enunciado||"Relaciona los términos",puntaje:W.puntaje??1,pares:Z,habilidadBloom:M}},H=W=>{const Z=typeof(W==null?void 0:W.texto)=="string"?W.texto:Array.isArray(W==null?void 0:W.texto)?W.texto.join(`
`):(W==null?void 0:W.lectura)||"",F=(Array.isArray(W==null?void 0:W.preguntas)?W.preguntas:[]).map(Y=>{const ae=j(Y==null?void 0:Y.habilidadBloom),le=((Y==null?void 0:Y.tipo)||"").toLowerCase();if(le.includes("multiple")||le.includes("seleccion")){const ie=D(Y);return ie.habilidadBloom||(ie.habilidadBloom=ae||S("Selección múltiple")),ie}if(le.includes("desarrollo")||le.includes("abierta")){const ie=R(Y);return ie.habilidadBloom||(ie.habilidadBloom=ae||S("Desarrollo")),ie}if(Y!=null&&Y.alternativas||Y!=null&&Y.opciones){const ie=D(Y);return ie.habilidadBloom||(ie.habilidadBloom=ae||S("Selección múltiple")),ie}return null}).filter(Boolean),X=j(W.habilidadBloom)||S("Comprensión de lectura");return{id:W.id||crypto.randomUUID(),tipo:"Comprensión de lectura",pregunta:W.pregunta||W.enunciado||"Comprensión de lectura",puntaje:W.puntaje??Math.max(1,F.reduce((Y,ae)=>Y+(ae.puntaje??1),0)),texto:Z,preguntas:F,habilidadBloom:X}},Q=async W=>{var M;if(W.preventDefault(),!N||!N.uid||!N.email||!N.id){l("Debes iniciar sesión para generar una evaluación.");return}const Z=Object.values(r.tiposActividad||{}).reduce((F,X)=>F+(Number(X)||0),0);if(!r.nombre.trim()||!r.contenido.trim()||Z===0){l("Nombre, Contenido y al menos un tipo con cantidad (> 0) son obligatorios.");return}i(!0),l(null);try{B4("Evaluación - Pruebas",N);const X={objetivo:"",cantidadesPorTipo:Object.entries(r.tiposActividad).reduce((Ge,[nt,bt])=>{const ut=Number(bt)||0;return ut>0&&(Ge[nt]=ut),Ge},{}),metadata:{nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenido:r.contenido,dificultad:r.dificultad,nee:r.isNee?r.selectedNee:[]},contextoAdicional:"Directrices: vocabulario y contexto adecuados al nivel educativo en Chile. Si hay NEE, usar lenguaje claro, reducir complejidad, textos más cortos y distractores no ambiguos."},ae=`${YW.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,le=await((M=jn.currentUser)==null?void 0:M.getIdToken());if(!le)throw new Error("No se pudo obtener token de autenticación.");const ie=await fetch(ae,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${le}`},body:JSON.stringify(X)});if(!ie.ok){const Ge=await ie.text();throw new Error(`Error en función: ${ie.status} ${Ge}`)}const ne=await ie.json(),oe=ne.prueba||ne.data&&ne.data.prueba,we=Ge=>Ge.normalize("NFD").replace(/[\u0300-\u036f]/g,""),K=Ge=>we((Ge||"").toLowerCase()),Ee=Ge=>{const nt=K(String(Ge||""));return nt?nt.includes("comprension")||nt.includes("lectura")||nt.includes("reading")?"Comprensión de lectura":nt.includes("multiple")||nt.includes("seleccion")||nt.includes("mcq")?"Selección múltiple":nt.includes("verdadero")||nt.includes("falso")||nt==="vf"||nt.includes("true")||nt.includes("false")?"Verdadero o Falso":nt.includes("paread")||nt.includes("matching")||nt.includes("emparejar")?"Términos pareados":nt.includes("desarrollo")||nt.includes("respuesta corta")||nt.includes("abierta")?"Desarrollo":null:null},_e=Ge=>{const bt=(Array.isArray(Ge)?Ge.map(ut=>typeof ut=="string"?ut:(ut==null?void 0:ut.texto)??""):[]).slice(0,4);for(;bt.length<4;)bt.push("");return bt},Ce=Ge=>{if(typeof(Ge==null?void 0:Ge.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,Ge.respuestaCorrecta));if(Array.isArray(Ge==null?void 0:Ge.alternativas)){const ut=Ge.alternativas.findIndex(ze=>ze&&(ze.esCorrecta===!0||ze.correcta===!0));if(ut>=0&&ut<4)return ut}const nt=String((Ge==null?void 0:Ge.correcta)||(Ge==null?void 0:Ge.respuesta)||"").trim().toUpperCase(),bt={A:0,B:1,C:2,D:3};return nt in bt?bt[nt]:0},de=Ge=>{const nt=String(Ge||"").trim().toLowerCase();if(nt){if(nt.includes("record"))return"Recordar";if(nt.includes("comprend")||nt.includes("entend"))return"Comprender";if(nt.includes("aplic"))return"Aplicar";if(nt.includes("analiz"))return"Analizar";if(nt.includes("evalu"))return"Evaluar";if(nt.includes("crea")||nt.includes("sintet"))return"Crear"}},xe=Ge=>{switch(Ge){case"Selección múltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Términos pareados":return"Comprender";case"Comprensión de lectura":return"Comprender";default:return"Comprender"}},he=D,ye=k,ce=R,Ae=U,Ne=H,Pe=Ge=>{switch(Ee(Ge.tipo)||(Ge!=null&&Ge.alternativas||Ge!=null&&Ge.opciones?"Selección múltiple":null)){case"Selección múltiple":return he(Ge);case"Verdadero o Falso":return ye(Ge);case"Desarrollo":return ce(Ge);case"Términos pareados":return Ae(Ge);case"Comprensión de lectura":return Ne(Ge);default:return Ge!=null&&Ge.alternativas||Ge!=null&&Ge.opciones?he(Ge):Ge!=null&&Ge.pares||Ge!=null&&Ge.conceptos&&(Ge!=null&&Ge.definiciones)?Ae(Ge):(Ge!=null&&Ge.texto||Ge!=null&&Ge.lectura)&&Array.isArray(Ge==null?void 0:Ge.preguntas)?Ne(Ge):typeof(Ge==null?void 0:Ge.respuestaCorrecta)=="boolean"||typeof(Ge==null?void 0:Ge.esVerdadero)=="boolean"||/^(v|f)$/i.test(String((Ge==null?void 0:Ge.correcta)||""))?ye(Ge):ce(Ge)}},Qe=(Array.isArray(oe==null?void 0:oe.preguntas)?oe.preguntas:[]).map((Ge,nt)=>{const bt=Pe(Ge);return bt?{...bt,id:bt.id||crypto.randomUUID(),pregunta:bt.pregunta||`Ítem ${nt+1}`,puntaje:bt.puntaje??1}:null}).filter(Boolean),$e=oe.instruccionesGenerales&&oe.instruccionesGenerales.trim().length>0?oe.instruccionesGenerales:"Lee atentamente y responde cada ítem según se indique. Marca solo una alternativa cuando corresponda. Justifica tus respuestas en los ítems de desarrollo.",et=(Qe||[]).reduce((Ge,nt)=>{if(nt.tipo==="Comprensión de lectura"&&Array.isArray(nt.preguntas)){const bt=nt.preguntas.reduce((ut,ze)=>ut+(ze.puntaje??1),0);return Ge+bt}return Ge+(nt.puntaje??1)},0),Ke={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenidoOriginal:r.contenido,tiposActividadOriginal:r.tiposActividad,objetivo:oe.objetivo||"",instruccionesGenerales:$e,puntajeIdeal:et,actividades:[{id:crypto.randomUUID(),titulo:r.nombre,instrucciones:$e,items:Qe}],dificultad:r.dificultad,...r.isNee&&{adaptacionNEE:r.selectedNee}};u(Ke),m(!1)}catch(F){console.error(F),l("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{i(!1)}},V=async()=>{if(c)try{await RYe(c),alert("Prueba guardada con éxito.")}catch(W){console.error(W),alert("No se pudo guardar la prueba.")}},G=async W=>{if(window.confirm("¿Eliminar esta prueba?"))try{await LYe(W),(c==null?void 0:c.id)===W&&u(null)}catch(Z){console.error(Z),alert("No se pudo eliminar la prueba.")}},J=async W=>{try{x(!0);const Z=new gr({unit:"pt",format:"letter"});try{QZe(Z),Z.setFont("GoogleSansCode","normal")}catch{}const M=40;let F=M;Z.setFontSize(12),Z.text("LICEO INDUSTRIAL DE RECOLETA",M,F),Z.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",Z.internal.pageSize.getWidth()-M,F,{align:"right"}),F+=24,Z.setFont(void 0,"bold"),Z.setFontSize(18),Z.text(W.nombre,Z.internal.pageSize.getWidth()/2,F,{align:"center"}),Z.setFont(void 0,"normal"),F+=18,Ni(Z,{startY:F+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(W.fechaCreacion).toLocaleDateString()],["Asignatura",W.asignatura],["Nivel",W.nivel],["Puntaje Ideal",String(W.puntajeIdeal)],["Objetivo",W.objetivo],["Instrucciones Generales",W.instruccionesGenerales]]}),F=Z.lastAutoTable.finalY+16,W.actividades.forEach((ae,le)=>{F>Z.internal.pageSize.getHeight()-120&&(Z.addPage(),F=M),Z.setFontSize(13),Z.setFont(void 0,"bold"),Z.text(`Actividad ${le+1}: ${ae.titulo}`,M,F),F+=14,Z.setFont(void 0,"normal"),Z.setFontSize(10);const ie=Z.splitTextToSize(ae.instrucciones,Z.internal.pageSize.getWidth()-M*2);Z.text(ie,M,F),F+=ie.length*12+6,ae.items.forEach((ne,oe)=>{const we=ne.habilidadBloom?` [Bloom: ${ne.habilidadBloom}]`:"",K=`${oe+1}. ${ne.pregunta} (${ne.puntaje} pts)${we}`,Ee=Z.splitTextToSize(K,Z.internal.pageSize.getWidth()-M*2);switch(F>Z.internal.pageSize.getHeight()-100&&(Z.addPage(),F=M),Z.setFont(void 0,"bold"),Z.text(Ee,M,F),F+=Ee.length*12+4,Z.setFont(void 0,"normal"),ne.tipo){case"Selección múltiple":{ne.opciones.forEach((_e,Ce)=>{const de=`${String.fromCharCode(65+Ce)}) ${_e}`,xe=Z.splitTextToSize(de,Z.internal.pageSize.getWidth()-M*2-16);Z.text(xe,M+16,F),F+=xe.length*12}),F+=8;break}case"Verdadero o Falso":{Z.text("V ____    F ____",M+16,F),F+=18;break}case"Desarrollo":{Z.rect(M,F-10,Z.internal.pageSize.getWidth()-M*2,60),F+=70;break}case"Términos pareados":{const _e=ne.pares;Ni(Z,{startY:F,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definición"]],body:_e.map((Ce,de)=>[`${de+1}. ${Ce.concepto}`,Ce.definicion])}),F=Z.lastAutoTable.finalY+8;break}case"Comprensión de lectura":{const _e=ne,Ce=Z.splitTextToSize(_e.texto,Z.internal.pageSize.getWidth()-M*2);Z.text(Ce,M,F),F+=Ce.length*12+8,_e.preguntas.forEach((de,xe)=>{const he=de.habilidadBloom?` [Bloom: ${de.habilidadBloom}]`:"",ye=`CL-${xe+1}. ${de.pregunta} (${de.puntaje} pts)${he}`,ce=Z.splitTextToSize(ye,Z.internal.pageSize.getWidth()-M*2);F>Z.internal.pageSize.getHeight()-100&&(Z.addPage(),F=M),Z.setFont(void 0,"bold"),Z.text(ce,M+8,F),F+=ce.length*12+4,Z.setFont(void 0,"normal"),de.tipo==="Selección múltiple"?(de.opciones.forEach((Ae,Ne)=>{const Pe=`${String.fromCharCode(65+Ne)}) ${Ae}`,Qe=Z.splitTextToSize(Pe,Z.internal.pageSize.getWidth()-M*2-24);Z.text(Qe,M+24,F),F+=Qe.length*12}),F+=6):(Z.rect(M+8,F-10,Z.internal.pageSize.getWidth()-M*2-16,50),F+=58)});break}}})});const X=new Date().toISOString().split("T")[0],Y=`${W.nombre.replace(/\s/g,"_")}_${W.asignatura.replace(/\s/g,"_")}_${X}.pdf`;Z.save(Y),x(!1),alert(`PDF generado y descargado como "${Y}"`)}catch(Z){console.error(Z),x(!1),alert("No se pudo generar el PDF.")}};if(c){const W=async(Z,M)=>{var F,X;try{const Y=c.actividades.findIndex(Pe=>Pe.id===Z);if(Y<0)return;const ae=c.actividades[Y],le=ae.items.findIndex(Pe=>Pe.id===M);if(le<0)return;const ie=ae.items[le],ne=Pe=>Pe,oe=c.objetivo&&c.objetivo.trim().length>0?c.objetivo:"",we={[ne(ie.tipo)]:1},K={objetivo:oe,cantidadesPorTipo:we,metadata:{nombre:c.nombre,asignatura:c.asignatura,nivel:c.nivel,contenido:c.contenidoOriginal,dificultad:c.dificultad||"Intermedio",nee:c.adaptacionNEE||[]},contextoAdicional:`Regenerar 1 ítem del tipo ${ie.tipo} manteniendo nivel y asignatura indicados.`},_e=`${YW.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,Ce=await((F=jn.currentUser)==null?void 0:F.getIdToken());if(!Ce)throw new Error("No se pudo obtener token de autenticación.");const de=await fetch(_e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce}`},body:JSON.stringify(K)});if(!de.ok)throw new Error(await de.text());const xe=await de.json(),he=Array.isArray((X=xe==null?void 0:xe.prueba)==null?void 0:X.preguntas)?xe.prueba.preguntas:[];if(he.length===0)throw new Error("La IA no devolvió ítems nuevos.");const ye=he[0],ce=(()=>{const Pe=((ye==null?void 0:ye.tipo)||"").toLowerCase();return Pe.includes("múltiple")||Pe.includes("multiple")||Pe.includes("seleccion")?"Selección múltiple":Pe.includes("verdadero")||Pe.includes("falso")||Pe==="vf"?"Verdadero o Falso":Pe.includes("paread")||Pe.includes("matching")||Pe.includes("emparejar")?"Términos pareados":Pe.includes("comprension")||Pe.includes("lectura")?"Comprensión de lectura":Pe.includes("desarrollo")||Pe.includes("respuesta corta")||Pe.includes("abierta")?"Desarrollo":null})();let Ae=null;if(ce==="Selección múltiple"?Ae=D(ye):ce==="Verdadero o Falso"?Ae=k(ye):ce==="Desarrollo"?Ae=R(ye):ce==="Términos pareados"?Ae=U(ye):ce==="Comprensión de lectura"?Ae=H(ye):(ye!=null&&ye.opciones||ye!=null&&ye.alternativas)&&(Ae=D(ye)),!Ae)throw new Error("No se pudo normalizar el ítem generado.");const Ne={...c};Ne.actividades=c.actividades.map((Pe,Qe)=>Qe!==Y?Pe:{...Pe,items:Pe.items.map(($e,et)=>et===le?{...Ae,id:$e.id}:$e)}),u(Ne)}catch(Y){console.error("No se pudo regenerar el ítem:",Y),alert("No se pudo regenerar el ítem. Intenta de nuevo.")}};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:()=>u(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>m(!h),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[s.jsx(HZe,{open:!h})," ",s.jsxs("span",{children:[h?"Ocultar":"Mostrar"," Respuestas"]})]}),s.jsx("button",{onClick:()=>y(Z=>!Z),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:v?"Orden original":"Ordenar por tipo"}),s.jsx("button",{onClick:V,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),s.jsxs("button",{onClick:()=>c&&J(c),disabled:g,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[g?"...":s.jsx(kre,{})," PDF"]})]})]}),s.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[s.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),s.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),s.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:c.nombre}),s.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Asignatura:"})," ",c.asignatura]}),s.jsxs("p",{className:"text-right",children:[s.jsx("strong",{children:"Puntaje Ideal:"})," ",c.puntajeIdeal]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Nivel:"})," ",c.nivel]})]}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[s.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",c.dificultad||"Intermedio"]}),c.adaptacionNEE&&c.adaptacionNEE.length>0&&s.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",c.adaptacionNEE.join(", ")]})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",c.objetivo]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Instrucciones Generales:"})," ",c.instruccionesGenerales]})]}),c.actividades.map(Z=>s.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:Z.titulo}),s.jsx("p",{className:"italic text-sm mb-4",children:Z.instrucciones}),s.jsx("div",{className:"space-y-6",children:(()=>{const M={"Comprensión de lectura":0,"Selección múltiple":1,"Verdadero o Falso":2,"Términos pareados":3,Desarrollo:4};return(v?[...Z.items||[]].sort((X,Y)=>(M[X.tipo]??99)-(M[Y.tipo]??99)):Z.items||[]).map(X=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>W(Z.id,X.id),className:"text-xs bg-sky-600 text-white px-3 py-1 rounded hover:bg-sky-700",children:"Regenerar ítem"})}),s.jsx($Ze,{item:X,showAnswers:h})]},X.id))})()})]},Z.id))]})]})}return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),s.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"nombre",value:r.nombre,onChange:C,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:r.asignatura,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ln.map(W=>s.jsx("option",{children:W},W))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),s.jsx("select",{name:"nivel",value:r.nivel,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Nh.map(W=>s.jsx("option",{children:W},W))})]}),s.jsx("div",{})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),s.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((W,Z)=>s.jsx("button",{type:"button",onClick:()=>a(M=>({...M,dificultad:W})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${Z===0?"rounded-l-lg":""} ${Z===2?"rounded-r-lg":""} ${r.dificultad===W?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:W},W))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isNee,onChange:W=>a(Z=>({...Z,isNee:W.target.checked,selectedNee:W.target.checked?Z.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),r.isNee&&s.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:uk.map(W=>s.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.selectedNee.includes(W),onChange:()=>O(W),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:W})]},W))})]})]})]}),s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),s.jsx("textarea",{name:"contenido",value:r.contenido,onChange:C,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("div",{className:"space-y-3",children:JW.map(W=>{var Z;return s.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:!!r.tiposActividad[W],onChange:()=>T(W),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:W})]}),r.tiposActividad[W]&&b6[W]&&s.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),(Z=b6[W])==null?void 0:Z.map(M=>s.jsx("button",{type:"button",onClick:()=>_(W,M),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${r.tiposActividad[W]===M?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:M},M))]})]},W)})}),o&&s.jsx("p",{className:"text-red-500 text-sm",children:o}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"submit",disabled:n,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:n?"Generando...":"Generar Prueba"})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),s.jsx("div",{className:"space-y-2",children:d.length>0?d.map(W=>s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:W.nombre}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[W.asignatura," - ",W.nivel," (",new Date(W.fechaCreacion).toLocaleDateString(),")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>u(W),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),s.jsx("button",{onClick:()=>G(W.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},W.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},qZe=({rubricas:e,onSave:t,onDelete:r,onCreate:a,allUsers:n,onCreatedInteractiva:i})=>{const[o,l]=w.useState(null),[c,u]=w.useState("list"),[d,f]=w.useState(!1),[h,m]=w.useState(""),{currentUser:g}=l7(),[x,v]=w.useState(!1),[y,N]=w.useState(""),[C,T]=w.useState(""),_=w.useMemo(()=>Array.from(new Set(n.filter(H=>H.profile===Mt.ESTUDIANTE&&H.curso).map(H=>Xc(H.curso)))).sort(),[n]),O=async(H,Q,V)=>{try{H.id||(H.id=crypto.randomUUID()),await vD(H);const G=n.filter(M=>M.profile===Mt.ESTUDIANTE&&Xc(M.curso||"")===Q),J={};G.forEach(M=>{J[M.id]={puntajes:{},feedback:""}});const W={nombre:H.titulo,curso:Q,asignatura:V,rubricaEstaticaId:H.id,resultados:J},Z=await HYe(W);v(!1),alert("Rúbrica interactiva creada."),i==null||i(Z)}catch(G){console.error(G),alert("No se pudo crear la rúbrica interactiva.")}},j=async(H,Q)=>{if(!H.trim()||!Q.trim()){alert("El título y la descripción son obligatorios.");return}f(!0);try{B4("Evaluación - Rúbricas",g);const G=(await zZe({objetivo:H,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propósito de la rúbrica es: "${Q}". Por favor, genera entre 3 y 5 dimensiones de evaluación relevantes.`})).data.rubrica,J={id:crypto.randomUUID(),titulo:G.nombre,descripcion:G.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:G.dimensiones.map(W=>({id:crypto.randomUUID(),nombre:W.nombre,niveles:W.descriptores.reduce((Z,M)=>{const X={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[M.nivel]||M.nivel.toLowerCase().replace(/\s/g,"");return X&&(Z[X]=M.descripcion),Z},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await a(J),l(J),u("form"),v(!0)}catch(V){console.error(V),alert("Error al generar la rúbrica con IA.")}finally{f(!1)}},S=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),u("form")},B=H=>{l(H),u("form")},L=async()=>{if(!o||!h.trim())return;const H=h;m("");const Q=`temp-${crypto.randomUUID()}`;l(V=>V?{...V,dimensiones:[...V.dimensiones,{id:Q,nombre:H,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const G=(await VZe({objetivo:o.titulo,dimension:H,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(J=>J?{...J,dimensiones:J.dimensiones.map(W=>W.id===Q?{...W,niveles:G,isLoading:!1}:W)}:null)}catch(V){console.error(V),alert("No se pudo generar la dimensión con IA."),l(G=>G?{...G,dimensiones:G.dimensiones.filter(J=>J.id!==Q)}:null)}},D=(H,Q,V)=>{o&&l(G=>G?{...G,dimensiones:G.dimensiones.map(J=>J.id!==H?J:Q==="nombre"?{...J,nombre:V}:{...J,niveles:{...J.niveles,[Q]:V}})}:null)},k=(H,Q)=>{l(V=>V?{...V,[H]:Q}:null)},R=H=>{o&&l(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(V=>V.id!==H)}:null)},U=()=>{if(!o)return null;const H="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",Q=`${H} resize-none text-sm`;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),s.jsx("button",{onClick:()=>u("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),s.jsx("input",{value:o.titulo,onChange:V=>k("titulo",V.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${H} mt-1`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),s.jsx("textarea",{value:o.descripcion,onChange:V=>k("descripcion",V.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${H} mt-1`})]})]}),o.dimensiones.length===0&&s.jsx("div",{className:"text-center py-4",children:s.jsx("button",{onClick:()=>j(o.titulo,o.descripcion),disabled:d||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:d?"Generando...":"✨ Generar Rúbrica con IA"})}),o.dimensiones.length>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),s.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rúbrica Interactiva"})]}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(V=>s.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:V},V))})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(V=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 w-1/5",children:s.jsx("textarea",{value:V.nombre,onChange:G=>D(V.id,"nombre",G.target.value),rows:4,className:Q})}),Object.keys(V.niveles).map(G=>s.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in V&&V.isLoading?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):s.jsx("textarea",{value:V.niveles[G],onChange:J=>D(V.id,G,J.target.value),rows:4,className:Q})},G)),s.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:s.jsx("button",{onClick:()=>R(V.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},V.id))})]})}),s.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),s.jsx("input",{value:h,onChange:V=>m(V.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${H} mt-1`})]}),s.jsx("button",{onClick:L,disabled:!h.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),s.jsx("label",{className:"text-sm font-medium",children:"Curso"}),s.jsxs("select",{value:y,onChange:V=>N(V.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[s.jsx("option",{value:"",children:"Selecciona un curso..."}),_.map(V=>s.jsx("option",{value:V,children:V},V))]}),s.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),s.jsxs("select",{value:C,onChange:V=>T(V.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[s.jsx("option",{value:"",children:"Selecciona una asignatura..."}),ln.map(V=>s.jsx("option",{value:V,children:V},V))]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),s.jsx("button",{disabled:!y||!o||!C,onClick:()=>o&&O(o,y,C),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),s.jsx("button",{onClick:S,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(H=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:H.titulo}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:H.descripcion})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>B(H),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),s.jsx("button",{onClick:()=>r(H.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},H.id)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):U()},KZe=({allUsers:e,rubricasEstaticas:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(null);w.useEffect(()=>{const f=QYe(a);return()=>f()},[]);const o=w.useMemo(()=>r.find(f=>f.id===n)||null,[r,n]),l=w.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=w.useMemo(()=>o?e.filter(f=>f.profile===Mt.ESTUDIANTE&&Xc(f.curso||"")===Xc(o.curso)):[],[o,e]),u=async(f,h,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[h]:m}}};await zYe(o.id,{resultados:x})},d=f=>{if(!l)return 1;const h=l.dimensiones.map(N=>N.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=h.reduce((N,C)=>N+(m.puntajes[C]||0),0),x=h.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rúbricas Interactivas"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>s.jsxs("button",{onClick:()=>i(f.id),className:`w-full text-left p-3 rounded border ${n===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[s.jsx("div",{className:"font-semibold",children:f.nombre}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso," · Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&s.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rúbricas interactivas."})]}),s.jsx("div",{className:"flex-1",children:o&&l?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre," — ",o.curso]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>s.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),s.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),s.jsx("tbody",{children:c.map(f=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(h=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[h.nombre])||0;return s.jsx("td",{className:"p-2",children:s.jsxs("select",{value:m,onChange:v=>u(f.id,h.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[s.jsx("option",{value:0,children:"—"}),s.jsx("option",{value:1,children:"1 - Insuficiente"}),s.jsx("option",{value:2,children:"2 - Suficiente"}),s.jsx("option",{value:3,children:"3 - Competente"}),s.jsx("option",{value:4,children:"4 - Avanzado"})]})},h.id)}),s.jsx("td",{className:"p-2 font-semibold",children:d(f.id).toFixed(1)})]},f.id))})]})})]}):s.jsx("p",{className:"text-slate-500",children:"Selecciona una rúbrica interactiva para calificar."})})]})]})},WZe=()=>{const[e,t]=w.useState("pruebas"),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState(!0);return w.useEffect(()=>{l(!0);const c=VYe(a),u=MYe(d=>{i(d),l(!1)});return()=>{c(),u()}},[]),o?s.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),s.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rúbricas"}),s.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rúbricas Interactivas"})]}),e==="pruebas"&&s.jsx(GZe,{}),e==="rubricas"&&s.jsx(qZe,{rubricas:n,onSave:vD,onDelete:UYe,onCreate:vD,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&s.jsx(KZe,{allUsers:r,rubricasEstaticas:n})]})},XZe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let a=0,n=0;const i=[];for(const c of r)try{const u=pt(Ar,c),d=await _r(u),f=d.size;a+=f,i.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),n+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),i.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=pt(Ar,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=_t(c,rr("timestamp",">=",u.toISOString()),Gt("timestamp","desc")),f=await _r(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(n*2.5);return{documentsCreatedToday:n,readsToday:l,writesToday:n,totalDocuments:a,collectionsActivity:i.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},ZW=500,iv=({title:e,value:t,description:r,alert:a})=>s.jsxs("div",{className:`p-5 rounded-xl border ${a?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),s.jsx("p",{className:`text-3xl font-bold mt-2 ${a?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),y6=({title:e,data:t,colorClass:r})=>{const a=w.useMemo(()=>Math.max(...t.map(n=>n.value),1),[t]);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),s.jsx("div",{className:"space-y-4",children:t.length>0?t.map(n=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label}),s.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n.value})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${n.value/a*100}%`}})})]},n.label)):s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},YZe=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0),[n,i]=w.useState(null),[o,l]=w.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});w.useEffect(()=>{a(!0);const f=SYe(g=>{t(g),a(!1)}),h=async()=>{try{const g=await XZe();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=w.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(T=>{const _=new Date(T.timestamp).getTime();_>=h&&x.today++,_>=m&&x.week++,_>=g&&x.month++;const O=T.userEmail||"Desconocido";v[O]||(v[O]={email:O,today:0,month:0,total:0}),v[O].total++,_>=h&&v[O].today++,_>=g&&v[O].month++,y[T.module]=(y[T.module]||0)+1});const N=Object.values(v).sort((T,_)=>_.total-T.total),C=Object.entries(y).map(([T,_])=>({label:T,value:_})).sort((T,_)=>_.value-T.value);return{stats:x,userStats:N,moduleStats:C}},[e]);return s.jsxs("div",{className:"space-y-8",children:[n&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:n}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&s.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(iv,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${ZW}`,alert:c.today>ZW}),s.jsx(iv,{title:"Llamadas esta Semana",value:r?"--":c.week}),s.jsx(iv,{title:"Llamadas este Mes",value:r?"--":c.month})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[s.jsx(y6,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),s.jsx("div",{className:"overflow-x-auto max-h-96",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),s.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),s.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),s.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(iv,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),s.jsx(iv,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),s.jsx(iv,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[s.jsx(y6,{title:"Actividad por Colección",data:o.collectionsActivity,colorClass:"bg-green-500"}),s.jsx(y6,{title:"Actividad Diaria (Últimos 7 días)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},w6=Object.values(Mt),N6=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",JZe=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!1),[n,i]=w.useState("Usuarios"),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,f]=w.useState(""),[h,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState({nombreCompleto:"",email:"",rut:"",profile:Mt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[T,_]=w.useState(null),[O,j]=w.useState(""),[S,B]=w.useState(""),[L,D]=w.useState(""),[k,R]=w.useState(null),[U,H]=w.useState(null),[Q,V]=w.useState(null),G=w.useCallback(async()=>{a(!0);try{const oe=await xx();t(oe)}catch(oe){console.error("Error al cargar usuarios",oe),R("No se pudieron cargar los usuarios.")}finally{a(!1)}},[]);w.useEffect(()=>{G()},[G]);const J=w.useCallback(oe=>{const{name:we,value:K}=oe.target;C(Ee=>({...Ee,[we]:K,curso:we==="profile"&&K!==Mt.ESTUDIANTE?"":Ee.curso,cursos:we==="profile"&&K!==Mt.PROFESORADO?[]:Ee.cursos,asignaturas:we==="profile"&&K!==Mt.PROFESORADO?[]:Ee.asignaturas}))},[]),W=w.useCallback((oe,we)=>{C(K=>{const Ee=K[oe]||[],_e=Ee.includes(we)?Ee.filter(Ce=>Ce!==we):[...Ee,we];return{...K,[oe]:_e}})},[]),Z=w.useCallback(()=>{C({nombreCompleto:"",email:"",rut:"",profile:Mt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),_(null),R(null)},[]),M=w.useCallback(async oe=>{oe.preventDefault(),R(null);const{nombreCompleto:we,email:K,profile:Ee,curso:_e,password:Ce}=N;if(!we.trim()||!K.trim()){R("Nombre Completo y Email son obligatorios.");return}if(Ee===Mt.ESTUDIANTE&&!_e){R('El campo "Curso" es obligatorio para Estudiantes.');return}if(!T&&!(Ce!=null&&Ce.trim())){R("La contraseña es obligatoria al crear un nuevo usuario.");return}const de=mh();try{if(T){const xe=lc(de,"updateUser"),he={...N,password:(Ce==null?void 0:Ce.trim())||void 0,curso:Ee===Mt.ESTUDIANTE?N6(_e||""):void 0};await xe(he)}else{const xe=lc(de,"createUser"),he={...N,curso:Ee===Mt.ESTUDIANTE?N6(_e||""):void 0};await xe(he)}await G(),Z()}catch(xe){console.error("Error al guardar usuario:",xe),R(xe.message||"Error al guardar el usuario.")}},[N,T,G,Z]),F=w.useCallback(oe=>{_(oe.email),C({nombreCompleto:oe.nombreCompleto,email:oe.email,rut:oe.rut||"",profile:oe.profile,password:"",curso:oe.curso||"",cursos:oe.cursos||[],asignaturas:oe.asignaturas||[]}),setTimeout(()=>{const we=document.querySelector("form");we&&we.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),X=w.useCallback(async oe=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${oe}? Esta acción es irreversible.`))try{const we=mh();await lc(we,"deleteUser")({email:oe}),await G()}catch(we){console.error("Error al eliminar usuario:",we),R(we.message||"No se pudo borrar el usuario.")}},[G]),Y=async oe=>{var Ce;const we=(Ce=oe.target.files)==null?void 0:Ce[0];if(!we)return;H({message:"Procesando archivo...",isError:!1});const K=mh(),Ee=lc(K,"createUser"),_e=new FileReader;_e.onload=async de=>{var xe;try{const he=new Uint8Array((xe=de.target)==null?void 0:xe.result),ye=Ub(he,{type:"array"}),ce=ye.Sheets[ye.SheetNames[0]],Ae=Os.sheet_to_json(ce);if(Ae.length===0){H({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ne=Ae.map(Ke=>{const Ge=Ke.Nombre||Ke.nombre,nt=Ke.Correo||Ke.correo||Ke.Email||Ke.email,bt=Ke.Curso||Ke.curso,ut=Ke.RUT||Ke.rut;return!Ge||!nt||!bt?Promise.resolve({email:nt||"Sin email",error:"Datos incompletos"}):Ee({nombreCompleto:String(Ge).trim(),email:String(nt).trim(),profile:Mt.ESTUDIANTE,curso:N6(String(bt).trim()),rut:ut?String(ut).trim():"",password:"recoleta"}).catch(ze=>({email:nt,error:ze.message}))}),Pe=await Promise.all(Ne),Qe=Pe.filter(Ke=>!Ke.error).length,$e=Pe.filter(Ke=>Ke.error);let et=`Carga completada. ${Qe} estudiantes agregados.`;$e.length>0&&(et+=` ${$e.length} fallaron.`,console.error("Errores en carga masiva:",$e)),H({message:et,isError:$e.length>0}),await G()}catch(he){H({message:`Error: ${he.message}`,isError:!0})}},_e.readAsArrayBuffer(we),oe.target.value=""},ae=async oe=>{var Ce;const we=(Ce=oe.target.files)==null?void 0:Ce[0];if(!we)return;V({message:"Procesando archivo...",isError:!1});const K=mh(),Ee=lc(K,"createUser"),_e=new FileReader;_e.onload=async de=>{var xe;try{const he=new Uint8Array((xe=de.target)==null?void 0:xe.result),ye=Ub(he,{type:"array"}),ce=ye.Sheets[ye.SheetNames[0]],Ae=Os.sheet_to_json(ce);if(Ae.length===0){V({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Ne=Ae.map(Ke=>{const Ge=Ke.Nombre||Ke.nombre,nt=Ke.Correo||Ke.correo||Ke.Email||Ke.email,bt=Ke.Perfil||Ke.perfil||Ke.Profile||Ke.profile,ut=Ke.RUT||Ke.rut;return!Ge||!nt||!bt?Promise.resolve({email:nt||"Sin email",error:"Datos incompletos"}):Ee({nombreCompleto:String(Ge).trim(),email:String(nt).trim(),profile:bt,rut:ut?String(ut).trim():"",password:"recoleta"}).catch(ze=>({email:nt,error:ze.message}))}),Pe=await Promise.all(Ne),Qe=Pe.filter(Ke=>!Ke.error).length,$e=Pe.filter(Ke=>Ke.error);let et=`Carga completada. ${Qe} usuarios agregados.`;$e.length>0&&(et+=` ${$e.length} fallaron.`,console.error("Errores en carga masiva:",$e)),V({message:et,isError:$e.length>0}),await G()}catch(he){V({message:`Error: ${he.message}`,isError:!0})}},_e.readAsArrayBuffer(we),oe.target.value=""},le="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ie=w.useMemo(()=>Array.from(new Set(e.filter(oe=>oe.profile===Mt.ESTUDIANTE&&oe.curso).map(oe=>oe.curso))).sort(),[e]),ne=w.useMemo(()=>e.filter(oe=>(O===""||oe.nombreCompleto.toLowerCase().includes(O.toLowerCase())||oe.email.toLowerCase().includes(O.toLowerCase()))&&(S===""||oe.profile===S)&&(L===""||oe.curso===L)),[e,O,S,L]);return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>i("Usuarios"),className:`${n==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),s.jsx("button",{onClick:()=>i("Monitor de Uso"),className:`${n==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),n==="Usuarios"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cambio masivo de contraseñas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nueva contraseña"}),s.jsx("input",{type:"password",value:o,onChange:oe=>l(oe.target.value),placeholder:"Mínimo 6 caracteres",className:le})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil"}),s.jsxs("select",{value:c,onChange:oe=>{u(oe.target.value),oe.target.value!==Mt.ESTUDIANTE&&f("")},className:le,children:[s.jsx("option",{value:"",children:"Selecciona un perfil"}),w6.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso (solo estudiantes)"}),s.jsxs("select",{value:d,onChange:oe=>f(oe.target.value),className:le,disabled:c!==Mt.ESTUDIANTE,children:[s.jsx("option",{value:"",children:"Todos los cursos"}),ie.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3",children:s.jsx("button",{type:"button",onClick:async()=>{if(m(null),y(null),!o||o.length<6){m({message:"La contraseña debe tener al menos 6 caracteres.",isError:!0});return}if(!c){m({message:"Debes seleccionar un perfil.",isError:!0});return}const oe=c===Mt.ESTUDIANTE&&!d?"Se cambiarán contraseñas de TODOS los estudiantes. ¿Deseas continuar?":`Se cambiarán contraseñas para ${c}${c===Mt.ESTUDIANTE&&d?" del curso "+d:""}. ¿Confirmas?`;if(window.confirm(oe))try{x(!0);const we=mh(),K=lc(we,"bulkUpdatePasswords"),Ee={newPassword:o,profile:c};c===Mt.ESTUDIANTE&&d&&(Ee.curso=d);const _e=await K(Ee),Ce=(_e==null?void 0:_e.data)||_e,de=`Coincidieron: ${Ce.matched??0} | Procesados: ${Ce.processed??0} | Actualizados: ${Ce.updated??0} | Fallidos: ${Ce.failed??0}`;m({message:de,isError:(Ce.failed??0)>0}),y(Ce),await G()}catch(we){console.error("Error en cambio masivo:",we),m({message:(we==null?void 0:we.message)||"Error al ejecutar cambio masivo",isError:!0})}finally{x(!1)}},disabled:g||!c||!o||o.length<6,className:`bg-amber-600 text-white font-bold py-2 px-6 rounded-lg ${g||!c||!o||o.length<6?"opacity-60 cursor-not-allowed":"hover:bg-amber-700"}`,children:g?"Procesando…":"Cambiar contraseñas"})}),h&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:`text-sm ${h.isError?"text-red-600":"text-green-600"}`,children:h.message}),(v==null?void 0:v.failed)&&v.failed>0&&s.jsxs("details",{className:"mt-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[s.jsxs("summary",{className:"cursor-pointer text-red-700 dark:text-red-300 text-sm font-medium",children:["Ver errores (",v.failed,")"]}),s.jsx("div",{className:"mt-2 max-h-56 overflow-auto",children:s.jsxs("table",{className:"min-w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-600 dark:text-slate-300",children:[s.jsx("th",{className:"pr-4 py-1",children:"Email"}),s.jsx("th",{className:"py-1",children:"Error"})]})}),s.jsx("tbody",{children:(v.errors||[]).map((oe,we)=>s.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[s.jsx("td",{className:"pr-4 py-1 text-slate-800 dark:text-slate-200 whitespace-nowrap",children:oe.email}),s.jsx("td",{className:"py-1 text-slate-700 dark:text-slate-300",children:oe.error})]},we))})]})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),s.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Y,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),U&&s.jsx("p",{className:`text-sm mt-2 ${U.isError?"text-red-600":"text-green-600"}`,children:U.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),s.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:ae,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),Q&&s.jsx("p",{className:`text-sm mt-2 ${Q.isError?"text-red-600":"text-green-600"}`,children:Q.message})]})]})]}),s.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:T?"Editando usuario":"Agregar nuevo usuario"}),s.jsxs("form",{onSubmit:M,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),s.jsx("input",{type:"text",name:"nombreCompleto",value:N.nombreCompleto,onChange:J,className:le,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:N.email,onChange:J,className:le,required:!0,readOnly:!!T})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),s.jsx("input",{type:"password",name:"password",value:N.password||"",onChange:J,placeholder:T?"Dejar en blanco para no cambiar":"Contraseña temporal",className:le})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),s.jsx("input",{type:"text",name:"rut",value:N.rut||"",onChange:J,placeholder:"12.345.678-9",className:le})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),s.jsx("select",{name:"profile",value:N.profile,onChange:J,className:le,required:!0,children:w6.map(oe=>s.jsx("option",{value:oe,children:oe},oe))})]}),N.profile===Mt.ESTUDIANTE&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),s.jsxs("select",{name:"curso",value:N.curso,onChange:J,className:le,required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]})]}),N.profile===Mt.PROFESORADO&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[s.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[s.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:on.map(oe=>{var we;return s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[s.jsx("input",{type:"checkbox",checked:((we=N.cursos)==null?void 0:we.includes(oe))||!1,onChange:()=>W("cursos",oe),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:oe})]},oe)})})]}),N.profile===Mt.PROFESORADO&&s.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[s.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[s.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ln.map(oe=>{var we;return s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[s.jsx("input",{type:"checkbox",checked:((we=N.asignaturas)==null?void 0:we.includes(oe))||!1,onChange:()=>W("asignaturas",oe),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:oe})]},oe)})})]}),k&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:k}),s.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[T&&s.jsx("button",{type:"button",onClick:Z,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const oe=mh(),K=await lc(oe,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",K),R("✅ Custom claim agregado exitosamente")}catch(oe){console.error("❌ Error al agregar custom claim:",oe),R(`Error: ${oe.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),s.jsx("button",{type:"button",onClick:async()=>{var oe,we,K,Ee,_e;try{const{auth:Ce}=await ai(async()=>{const{auth:he}=await Promise.resolve().then(()=>fre);return{auth:he}},void 0);console.log("🔍 Usuario actual:",(oe=Ce.currentUser)==null?void 0:oe.email);const de=await((we=Ce.currentUser)==null?void 0:we.getIdToken(!0));console.log("🔑 Token refreshed:",!!de);const xe=await((K=Ce.currentUser)==null?void 0:K.getIdTokenResult());console.log("📋 Claims completos:",xe==null?void 0:xe.claims),console.log("👤 Profile claim:",(Ee=xe==null?void 0:xe.claims)==null?void 0:Ee.profile),((_e=xe==null?void 0:xe.claims)==null?void 0:_e.profile)==="SUBDIRECCION"?R("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):R(`❌ Custom claim faltante. Claims: ${JSON.stringify(xe==null?void 0:xe.claims)}`)}catch(Ce){console.error("❌ Error verificando token:",Ce),R(`Error verificando token: ${Ce.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:T?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{children:s.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:O,onChange:oe=>j(oe.target.value),className:le})}),s.jsx("div",{children:s.jsxs("select",{value:S,onChange:oe=>B(oe.target.value),className:le,children:[s.jsx("option",{value:"",children:"Todos los perfiles"}),w6.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})}),s.jsx("div",{children:s.jsxs("select",{value:L,onChange:oe=>D(oe.target.value),className:le,children:[s.jsx("option",{value:"",children:"Todos los cursos"}),ie.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})})]}),r?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ne.map(oe=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:oe.nombreCompleto}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:oe.email}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.profile===Mt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":oe.profile===Mt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:oe.profile})}),s.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[oe.profile===Mt.ESTUDIANTE&&s.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:oe.curso||"Sin curso"}),oe.profile===Mt.PROFESORADO&&s.jsxs("div",{className:"space-y-1",children:[oe.cursos&&oe.cursos.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.cursos.slice(0,3).map(we=>s.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:we},we)),oe.cursos.length>3&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",oe.cursos.length-3]})]})]}),oe.asignaturas&&oe.asignaturas.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[oe.asignaturas.slice(0,2).map(we=>s.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:we},we)),oe.asignaturas.length>2&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",oe.asignaturas.length-2]})]})]}),(!oe.cursos||oe.cursos.length===0)&&(!oe.asignaturas||oe.asignaturas.length===0)&&s.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),oe.profile!==Mt.ESTUDIANTE&&oe.profile!==Mt.PROFESORADO&&s.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[s.jsx("button",{onClick:()=>F(oe),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),s.jsx("button",{onClick:()=>X(oe.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},oe.email))})]}),ne.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),n==="Monitor de Uso"&&s.jsx(YZe,{})]})},e1="seguimiento_dual_records",ZZe=e=>{const t=e.data(),r=a=>a&&typeof a.toDate=="function"?a.toDate().toISOString().split("T")[0]:a;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},eet=e=>{const t=_t(pt(ot,e1),Gt("nombreEstudiante","asc"));return ar(t,a=>{const n=a.docs.map(i=>ZZe(i));e(n)},a=>{console.error("Error al suscribirse a los registros de seguimiento:",a),e([])})},mS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(a=>{t[a]&&typeof t[a]=="string"&&(t[a]=lr.fromDate(new Date(t[a]+"T00:00:00")))}),t},tet=async e=>{try{const t=mS(e);return(await Yr(pt(ot,e1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},eX=async(e,t)=>{try{const r=$t(ot,e1,e),a=mS(t);await ii(r,a,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},ret=async e=>{try{const t=$t(ot,e1,e);await Ja(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},aet=async e=>{const t=up(ot),r=pt(ot,e1);let a=0,n=0;for(const i of e){const o=_t(r,rr("rutEstudiante","==",i.rutEstudiante)),l=await _r(o);if(l.empty){const c=$t(r);t.set(c,mS(i)),n++}else{const c=l.docs[0].id,u=$t(ot,e1,c);t.set(u,mS(i),{merge:!0}),a++}}return await t.commit(),{updated:a,created:n}},net={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},set=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},iet=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},oet=({record:e,onSave:t,onClose:r})=>{const[a,n]=w.useState(e),i="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:h}=c.target;n(m=>({...m,[u]:f==="checkbox"?h:d}))},l=()=>{t(a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),s.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),s.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:a.fecha1raSupervision1erSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!a.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),s.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:a.fecha2daSupervision1erSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!a.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]})]})]}),s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),s.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:a.fecha1raSupervision2doSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!a.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),s.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:a.fecha2daSupervision2doSemestre||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!a.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]})]})]}),s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),s.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:a.fechaSupervisionExcepcional||"",onChange:o,className:i})]}),s.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!a.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),s.jsx("span",{children:"Realizada"})]})]})]}),s.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[s.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),s.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:a.nombreMaestroGuia||"",onChange:o,className:i+" mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),s.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:a.contactoMaestroGuia||"",onChange:o,className:i+" mt-1"})]})]})]})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),s.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},cet=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(!0),n=w.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:bg[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:KB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[i,o]=w.useState(n),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,h]=w.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(!1),[C,T]=w.useState(null);w.useEffect(()=>{a(!0);const G=eet(J=>{t(J),a(!1)});return()=>G()},[]);const _=w.useCallback(G=>{const{name:J,value:W}=G.target;o(Z=>({...Z,[J]:W}))},[]),O=w.useCallback(G=>{const{name:J,value:W}=G.target;h(Z=>({...Z,[J]:W}))},[]),j=w.useCallback(()=>{o(n),c(null),g(null)},[n]),S=async G=>{G.preventDefault(),g(null);const W=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Z=>{var M;return!((M=i[Z])!=null&&M.trim())});if(W){g(`El campo '${W}' es obligatorio.`);return}try{l?await eX(l,i):await tet(i),j()}catch(Z){console.error(Z),g("No se pudo guardar el registro.")}},B=w.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),c(G.id),o(G)},[]),L=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await ret(G)}catch(J){console.error(J),g("No se pudo eliminar el registro.")}},D=G=>{T(G),N(!0)},k=()=>{T(null),N(!1)},R=async G=>{try{await eX(G.id,G),k()}catch(J){console.error(J),alert("No se pudieron guardar los cambios de supervisión.")}},U=()=>{const G=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],J=Os.aoa_to_sheet([G]),W=Os.book_new();Os.book_append_sheet(W,J,"Plantilla"),B1(W,"Plantilla_Seguimiento_Dual.xlsx")},H=G=>{var Z;const J=(Z=G.target.files)==null?void 0:Z[0];if(!J)return;v({message:"Procesando archivo...",isError:!1});const W=new FileReader;W.onload=async M=>{var F;try{const X=new Uint8Array((F=M.target)==null?void 0:F.result),Y=Ub(X,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ae=Y.SheetNames[0],le=Y.Sheets[ae],ie=Os.sheet_to_json(le,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo está vacío.");const ne={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},oe=Object.keys(ie[0]).map(_e=>_e.trim().toLowerCase()),K=["nombre","rut","curso 2025","empresa","estado"].find(_e=>!oe.includes(_e));if(K)throw new Error(`Falta la columna requerida: '${K}'`);const Ee=ie.map((_e,Ce)=>{try{const de={};for(const xe in _e){const he=ne[xe.trim().toLowerCase()];if(he){let ye=_e[xe];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(he)?(ye=set(ye),ye&&(de[he]=ye)):he.includes("realizada")?de[he]=iet(ye):ye!=null&&ye!==""&&(de[he]=String(ye).trim())}}return!de.nombreEstudiante||!de.rutEstudiante?(console.warn(`Fila ${Ce+2}: Faltan campos requeridos`),null):de}catch(de){return console.error(`Error procesando fila ${Ce+2}:`,de),null}}).filter(_e=>_e!==null);if(console.log("Registros procesados:",Ee),Ee.length>0){const{updated:_e,created:Ce}=await aet(Ee);v({message:`Carga exitosa. ${Ce} registros creados, ${_e} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(X){console.error("Error completo:",X),v({message:`Error al procesar el archivo: ${X.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},W.readAsArrayBuffer(J)},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=w.useMemo(()=>e.filter(G=>(u===""||G.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||G.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||G.rutEstudiante.includes(u))&&(f.curso===""||G.curso===f.curso)&&(f.empresa===""||G.nombreEmpresa===f.empresa)&&(f.estado===""||G.estado===f.estado)&&(f.comuna===""||G.comuna===f.comuna)&&(f.profesor===""||G.profesorTutorEmpresa===f.profesor)).sort((G,J)=>G.nombreEstudiante.localeCompare(J.nombreEstudiante)),[e,u,f]);return w.useMemo(()=>{const G=new Set,J=new Set;return e.forEach(W=>{W.nombreEmpresa&&G.add(W.nombreEmpresa),W.comuna&&J.add(W.comuna)}),{empresas:Array.from(G).sort(),comunas:Array.from(J).sort()}},[e]),r?s.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),s.jsx("input",{type:"text",name:"nombreEstudiante",value:i.nombreEstudiante,onChange:_,className:Q,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),s.jsx("input",{type:"text",name:"rutEstudiante",value:i.rutEstudiante,onChange:_,className:Q,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),s.jsx("select",{name:"curso",value:i.curso,onChange:_,className:Q,required:!0,children:bg.map(G=>s.jsx("option",{value:G,children:G},G))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),s.jsxs("select",{name:"profesorTutorEmpresa",value:i.profesorTutorEmpresa,onChange:_,className:Q,children:[s.jsx("option",{value:"",children:"Seleccione un profesor"}),lF.map(G=>s.jsx("option",{value:G,children:G},G))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),s.jsx("input",{type:"text",name:"nombreEmpresa",value:i.nombreEmpresa,onChange:_,className:Q,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),s.jsx("input",{type:"text",name:"rutEmpresa",value:i.rutEmpresa,onChange:_,className:Q})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),s.jsx("input",{type:"text",name:"direccionEmpresa",value:i.direccionEmpresa,onChange:_,className:Q})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),s.jsx("input",{type:"text",name:"comuna",value:i.comuna,onChange:_,className:Q})]}),s.jsxs("div",{className:"lg:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),s.jsx("select",{name:"estado",value:i.estado,onChange:_,className:Q,children:KB.map(G=>s.jsx("option",{value:G,children:G},G))})]})]}),i.estado==="Desvinculado"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),s.jsx("input",{type:"date",name:"fechaDesvinculacion",value:i.fechaDesvinculacion||"",onChange:_,className:`${Q} border-red-300`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),s.jsx("input",{type:"text",name:"motivoDesvinculacion",value:i.motivoDesvinculacion||"",onChange:_,className:`${Q} border-red-300`})]})]}),m&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),s.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&s.jsx("button",{type:"button",onClick:j,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[s.jsx("button",{onClick:U,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),s.jsx("input",{type:"file",onChange:H,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&s.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[s.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:G=>d(G.target.value),className:`${Q} md:col-span-2 lg:col-span-1`}),s.jsxs("select",{name:"curso",value:f.curso,onChange:O,className:Q,children:[s.jsx("option",{value:"",children:"Todos los Cursos"}),bg.map(G=>s.jsx("option",{children:G},G))]}),s.jsxs("select",{name:"estado",value:f.estado,onChange:O,className:Q,children:[s.jsx("option",{value:"",children:"Todos los Estados"}),KB.map(G=>s.jsx("option",{children:G},G))]}),s.jsxs("select",{name:"profesor",value:f.profesor,onChange:O,className:Q,children:[s.jsx("option",{value:"",children:"Todos los Profesores"}),lF.map(G=>s.jsx("option",{children:G},G))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:V.map(G=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombreEstudiante}),s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:G.curso})]}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.nombreEmpresa}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.profesorTutorEmpresa}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${net[G.estado]}`,children:G.estado})}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[s.jsx("button",{onClick:()=>D(G),className:"text-blue-600 hover:underline",children:"Supervisión"}),s.jsx("button",{onClick:()=>B(G),className:"text-yellow-600 hover:underline",children:"Editar"}),s.jsx("button",{onClick:()=>L(G.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},G.id))})]})})]}),y&&C&&s.jsx(oet,{record:C,onClose:k,onSave:R})]})},A7="actividades_remotas",$ue="respuestas_actividades",Gue="pruebas_estandarizadas",uet="usuarios",que=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},h7=e=>{const t=que(e);return t?t.toISOString():void 0},pS=e=>{const t=que(e);return t?t.toISOString().split("T")[0]:void 0},m7=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:lr.fromDate(t)},p7=e=>lr.fromDate(new Date(e||new Date().toISOString())),det=e=>!!e&&/^data:/.test(e),t1=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(t1);const t={};return Object.entries(e).forEach(([r,a])=>{a!==void 0&&(t[r]=t1(a))}),t},fet=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",a=t[2];let n="";if(typeof atob=="function")n=atob(a);else{const l=typeof Buffer<"u"?Buffer:null;if(l)n=l.from(a,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const i=n.length,o=new Uint8Array(i);for(let l=0;l<i;l++)o[l]=n.charCodeAt(l);return{bytes:o,contentType:r}},Aet=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:h7(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:pS(t.plazoEntrega)||pS(new Date)}},het=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:h7(t.fechaCompletado)||new Date().toISOString()}},met=e=>{const t=e.data()||{};return{id:e.id,...t}},pet=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:h7(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:pS(t.plazoEntrega)||pS(new Date)}},get=e=>{const t=_t(pt(ot,A7),Gt("fechaCreacion","desc"));return ar(t,r=>e(r.docs.map(Aet)),r=>{console.error("subscribeToActividades error:",r),e([])})},xet=(e,t)=>{const r=pt(ot,$ue),a=_t(r,Gt("fechaCompletado","desc"));return ar(a,n=>e(n.docs.map(het)),n=>{console.error("subscribeToRespuestas error:",n),e([])})},vet=e=>{const t=_t(pt(ot,uet),Gt("nombreCompleto","asc"));return ar(t,r=>e(r.docs.map(met)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},bet=e=>{const t=_t(pt(ot,Gue),Gt("fechaCreacion","desc"));return ar(t,r=>e(r.docs.map(pet)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},yet=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:a,...n}=e||{},i=t1({...n,fechaCreacion:p7(r),plazoEntrega:m7(a)});return(await Yr(pt(ot,A7),i)).id},wet=async(e,t)=>{const{fechaCreacion:r,plazoEntrega:a,...n}=t||{},i=t1({...n});r!==void 0&&(i.fechaCreacion=p7(r)),a!==void 0&&(i.plazoEntrega=m7(a)),await Ui($t(ot,A7,e),i)},Net=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:a,...n}=e||{},i=t1({...n,fechaCreacion:p7(r),plazoEntrega:m7(a)});return(await Yr(pt(ot,Gue),i)).id},Cet=async(e,t)=>{const r=t1(t);await Ui($t(ot,$ue,e),r)},Eet=(e,t)=>{if(!t||t<=0)return"1.0";const a=t*.6;let n;return e>=a?n=4+3*(e-a)/(t-a+1e-9):n=1+3*e/(a+1e-9),n=Math.max(1,Math.min(7,n)),n.toFixed(1)},jet=async(e,t,r)=>{const{bytes:a,contentType:n}=fet(e),i=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${i}/${o}`,u=l0(I_,c);await j_(u,a,{contentType:n});const d=await w1(u);return{nombre:t,url:d}},ket=async e=>{var i;const t=e.nivel||"general",r=((i=e.recursos)==null?void 0:i.archivos)||[],a=await Promise.all(r.map(async(o,l)=>{if(det(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return jet(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),n={...e,recursos:{...e.recursos||{},archivos:a}};return yet(n)},Yy=e=>e?new Date(e).toLocaleDateString("es-CL"):"",tX=e=>e?new Date(e).toLocaleString("es-CL"):"",_et=e=>new Promise((t,r)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(String(a.result)),a.onerror=n=>r(n)}),Kue=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")||a.includes("Aspecto")||a.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},gi=(e,t)=>{if(t&&Kue(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>gi(n,`${t}-array-item`)).join(", ");if(Object.keys(e).some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")))return"[Rúbrica de evaluación]";const a=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const n of a)if(e[n]&&typeof e[n]=="string")return e[n];try{const n=JSON.stringify(e);return n.length>100?"[Objeto complejo]":n}catch{return"[Objeto no serializable]"}}return String(e)},rc=(e,t,...r)=>{if(Kue(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const n=gi(e[a],`${t}-${a}`);if(n&&n!=="[Objeto complejo]"&&n!=="[Objeto no serializable]")return n}return typeof e=="string"?e:"[Sin contenido disponible]"},Bn=({content:e,context:t="unknown"})=>{try{const r=gi(e,`UltraSafeRenderer-${t}`);return s.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),s.jsx("span",{children:"[Error al mostrar contenido]"})}},C6={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},E6=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],Bet=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,f]=w.useState(null),[h,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),[N,C]=w.useState(!1),[T,_]=w.useState(!1),[O,j]=w.useState(!0),[S,B]=w.useState(null),[L,D]=w.useState(""),[k,R]=w.useState(null),[U,H]=w.useState(null),[Q,V]=w.useState([]),[G,J]=w.useState("carpetas"),[W,Z]=w.useState("Todas"),[M,F]=w.useState("Todos"),[X,Y]=w.useState(null),[ae,le]=w.useState([]),[ie,ne]=w.useState(!1),[oe,we]=w.useState(null),[K,Ee]=w.useState(null),[_e,Ce]=w.useState([]),[de,xe]=w.useState(""),he={asignatura:ln[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ye,ce]=w.useState(he),Ae={asignatura:ln[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[Ne,Pe]=w.useState(Ae);w.useEffect(()=>{j(!0);const ge=get(t),me=bet(a),Oe=xet(i),He=vet(Re=>{l(Re),j(!1)});return()=>{ge(),me(),Oe(),He()}},[]);const Qe=ge=>{ce(me=>({...me,[ge.target.name]:ge.target.value}))},$e=ge=>{Pe(me=>({...me,[ge.target.name]:ge.target.value}))},et=ge=>{ce(me=>({...me,recursos:{...me.recursos,[ge.target.name]:ge.target.value}}))},Ke=ge=>{ge.target.files&&V(Array.from(ge.target.files))},Ge=ge=>{ce(me=>{const Oe=me.tipos.includes(ge)?me.tipos.filter(Re=>Re!==ge):[...me.tipos,ge],He={...me.cantidadPreguntas};return Oe.includes(ge)?He[ge]||(He[ge]=C6[ge][0]):delete He[ge],{...me,tipos:Oe,cantidadPreguntas:He}})},nt=(ge,me)=>{ce(Oe=>({...Oe,cantidadPreguntas:{...Oe.cantidadPreguntas,[ge]:me}}))},bt=(ge,me=!1)=>{(me?Pe:ce)(He=>{const Re=He.estudiantesDestino||[],We=Re.includes(ge)?Re.filter(Ye=>Ye!==ge):[...Re,ge];return{...He,estudiantesDestino:We}})},ut=()=>{const{tipos:ge,contenido:me,asignatura:Oe,nivel:He,cantidadPreguntas:Re}=ye;let We=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${me}"
Asignatura: ${Oe}
Nivel educativo: ${He}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return ge.forEach(Ye=>{const wt=Re[Ye]||C6[Ye][0];switch(Ye){case"Quiz":We+=`- "Quiz": Array de ${wt} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":We+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${wt} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":We+=`- "Términos Pareados": Array de ${wt} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":We+=`- "Desarrollo": Array de ${wt} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),We+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,ge.includes("Quiz")&&(We+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),ge.includes("Comprensión de Lectura")&&(We+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),We},ze=()=>{const{contenido:ge,objetivosAprendizaje:me,asignatura:Oe,nivel:He}=Ne;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${Oe}
- Nivel educativo: ${He}
- Contenido principal: ${ge}
- Objetivos de Aprendizaje: ${me}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${Oe==="Lenguaje y Comunicación"||Oe==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${E6.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function Tt(ge,me){if(ge==="Desarrollo"&&Array.isArray(me))return me.map((Oe,He)=>{if(typeof Oe=="string"){const Re=Oe.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Re?{pregunta:rc(Re[1],`desarrollo-pregunta-${He}`),rubrica:rc(Re[2],`desarrollo-rubrica-${He}`)}:{pregunta:rc(Oe,`desarrollo-pregunta-simple-${He}`),rubrica:""}}if(Oe&&typeof Oe=="object"){const Re=rc(Oe,`desarrollo-obj-pregunta-${He}`,"pregunta","Pregunta","texto");let We="";if(Oe.rubrica||Oe.Rubrica||Oe.rúbrica||Oe.Rúbrica){const Ye=Oe.rubrica||Oe.Rubrica||Oe.rúbrica||Oe.Rúbrica;We=gi(Ye,`desarrollo-rubrica-${He}`)}return{pregunta:Re,rubrica:We}}return{pregunta:gi(Oe,`desarrollo-fallback-${He}`),rubrica:""}});if(ge==="Términos Pareados"&&Array.isArray(me))return me.map((Oe,He)=>{if(typeof Oe=="string"){const Re=Oe.match(/^(.+?)[\s:-–]+(.+)$/);return Re?{id:He,concepto:rc(Re[1],`pareados-concepto-${He}`),definicion:rc(Re[2],`pareados-definicion-${He}`)}:{id:He,concepto:rc(Oe,`pareados-concepto-simple-${He}`),definicion:""}}return Oe&&typeof Oe=="object"?{id:He,concepto:rc(Oe,`pareados-obj-concepto-${He}`,"concepto","termino"),definicion:rc(Oe,`pareados-obj-definicion-${He}`,"definicion","significado")}:{id:He,concepto:gi(Oe,`pareados-fallback-${He}`),definicion:""}});if(ge==="Comprensión de Lectura"){if(me&&typeof me=="object"&&!Array.isArray(me)&&Array.isArray(me.preguntas))return{texto:rc(me,"comprension-texto","texto"),preguntas:me.preguntas.map((Oe,He)=>({pregunta:rc(Oe,`comprension-pregunta-${He}`,"pregunta"),opciones:Array.isArray(Oe.opciones)?Oe.opciones.map(Re=>gi(Re,`comprension-opcion-${He}`)):[],respuestaCorrecta:gi(Oe.respuestaCorrecta,`comprension-respuesta-${He}`),puntaje:typeof Oe.puntaje=="number"?Oe.puntaje:1}))};if(Array.isArray(me)){const Oe=me.map((Re,We)=>rc(Re,`comprension-bloque-${We}`,"texto")).join(`

---

`),He=me.flatMap(Re=>Array.isArray(Re.preguntas)?Re.preguntas:[]);return{texto:Oe,preguntas:He.map((Re,We)=>({pregunta:rc(Re,`comprension-combined-pregunta-${We}`,"pregunta"),opciones:Array.isArray(Re.opciones)?Re.opciones.map(Ye=>gi(Ye,`comprension-combined-opcion-${We}`)):[],respuestaCorrecta:gi(Re.respuestaCorrecta,`comprension-combined-respuesta-${We}`),puntaje:typeof Re.puntaje=="number"?Re.puntaje:1}))}}}return ge==="Quiz"&&Array.isArray(me)?me.map((Oe,He)=>({pregunta:rc(Oe,`quiz-pregunta-${He}`,"pregunta"),opciones:Array.isArray(Oe.opciones)?Oe.opciones.map(Re=>gi(Re,`quiz-opcion-${He}`)):[],respuestaCorrecta:gi(Oe.respuestaCorrecta,`quiz-respuesta-${He}`),puntaje:typeof Oe.puntaje=="number"?Oe.puntaje:1})):me}const ir=async ge=>{var me;if(ge.preventDefault(),!ye.contenido.trim()||ye.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Oe=await Promise.all(Q.map(async Ot=>({nombre:Ot.name,url:await _et(Ot)}))),He=ut(),Re=await jn.currentUser.getIdToken(),We=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Re}`},body:JSON.stringify({prompt:He,formData:ye,selectedFiles:Q})});if(!We.ok)throw new Error("Error al generar la actividad con IA");const Ye=await We.json(),wt={};for(const Ot of ye.tipos){const Vt=(me=Ye.actividades)==null?void 0:me[Ot];wt[Ot]=Tt(Ot,Vt)}let Nt="";Ye.panelDidactico&&(Nt=typeof Ye.panelDidactico=="string"?Ye.panelDidactico:JSON.stringify(Ye.panelDidactico));const zt={id:"",fechaCreacion:new Date().toISOString(),...ye,recursos:{...ye.recursos,archivos:Oe},introduccion:gi(Ye.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:Nt,generatedContent:wt};R(zt)}catch(Oe){B(`Error al generar la actividad: ${(Oe==null?void 0:Oe.message)||Oe}`)}finally{y(!1)}},Kt=async ge=>{if(ge.preventDefault(),!Ne.contenido.trim()||!Ne.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const me=ze(),Oe=await jn.currentUser.getIdToken(),He=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify({prompt:me,pruebaFormData:Ne})});if(!He.ok)throw new Error("Error al generar la prueba con IA");const Re=await He.json();if(!Re.preguntas||!Array.isArray(Re.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const We=(Re.textos||[]).map((Nt,zt)=>({id:Nt.id||zt+1,titulo:gi(Nt.titulo,`texto-titulo-${zt}`)||`Texto ${zt+1}`,contenido:gi(Nt.contenido,`texto-contenido-${zt}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(Nt.tipo)?Nt.tipo:"informativo",palabras:Nt.palabras||(Nt.contenido?String(Nt.contenido).split(" ").length:0)})),Ye=Re.preguntas.slice(0,30).map((Nt,zt)=>({numero:Nt.numero||zt+1,pregunta:gi(Nt.pregunta,`pregunta-${zt}`)||`Pregunta ${zt+1}`,opciones:Array.isArray(Nt.opciones)&&Nt.opciones.length>=4?Nt.opciones.slice(0,4).map((Ot,Vt)=>gi(Ot,`pregunta-opcion-${zt}-${Vt}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(Nt.respuestaCorrecta)?Nt.respuestaCorrecta:"A",habilidad:E6.includes(Nt.habilidad)?Nt.habilidad:E6[0],justificacion:gi(Nt.justificacion,`justificacion-${zt}`)||"Justificación no disponible",...Nt.textoId&&typeof Nt.textoId=="number"?{textoId:Nt.textoId}:{}})),wt={id:"",fechaCreacion:new Date().toISOString(),...Ne,titulo:gi(Re.titulo,"prueba-titulo")||`Prueba ${Ne.asignatura}`,instrucciones:gi(Re.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:We,preguntas:Ye};H(wt)}catch(me){B(`Error al generar la prueba: ${(me==null?void 0:me.message)||me}`)}finally{y(!1)}},Cr=async()=>{if(k)try{C(!0),await ket(k),ce(he),V([]),m(!1),R(null)}catch(ge){console.error("Error al guardar la actividad con archivos:",ge),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{C(!1)}},$r=async()=>{if(U)try{C(!0);const ge={...U,cursosDestino:U.cursosDestino||[],estudiantesDestino:U.estudiantesDestino||[],textos:U.textos||[],preguntas:U.preguntas.map(me=>({...me,textoId:me.textoId||null}))};await Net(ge),Pe(Ae),x(!1),H(null)}catch(ge){console.error("Error al guardar la prueba:",ge),B("No se pudo guardar la prueba.")}finally{C(!1)}},br=w.useMemo(()=>{var Oe,He,Re;const ge=c||d;if(!ge||!o.length)return[];const me=new Map;return!((Oe=ge.cursosDestino)!=null&&Oe.length)&&!((He=ge.estudiantesDestino)!=null&&He.length)?[]:((Re=ge.estudiantesDestino)!=null&&Re.length&&o.filter(We=>We.profile===Mt.ESTUDIANTE&&ge.estudiantesDestino.includes(We.nombreCompleto)).forEach(We=>me.set(We.id,We)),Array.from(me.values()).sort((We,Ye)=>We.nombreCompleto.localeCompare(Ye.nombreCompleto)))},[c,d,o]),Sn=w.useMemo(()=>{const ge=(c==null?void 0:c.id)||(d==null?void 0:d.id);return n.filter(me=>me.actividadId===ge)},[n,c,d]),Pr=w.useMemo(()=>o.filter(ge=>ge.profile===Mt.ESTUDIANTE).sort((ge,me)=>ge.nombreCompleto.localeCompare(me.nombreCompleto)),[o]),Ra=w.useMemo(()=>L.trim()?Pr.filter(ge=>ge.nombreCompleto.toLowerCase().includes(L.toLowerCase())):Pr,[Pr,L]),Dn=w.useMemo(()=>{const ge=new Set;return e.forEach(me=>{(me.estudiantesDestino||[]).forEach(Oe=>{const He=o.find(Re=>Re.profile===Mt.ESTUDIANTE&&Re.nombreCompleto===Oe);He&&ge.add(He.id)})}),r.forEach(me=>{(me.estudiantesDestino||[]).forEach(Oe=>{const He=o.find(Re=>Re.profile===Mt.ESTUDIANTE&&Re.nombreCompleto===Oe);He&&ge.add(He.id)})}),n.forEach(me=>ge.add(me.estudianteId)),o.filter(me=>me.profile===Mt.ESTUDIANTE&&ge.has(me.id)).sort((me,Oe)=>me.nombreCompleto.localeCompare(Oe.nombreCompleto))},[e,r,n,o]),Rr=w.useMemo(()=>o.find(ge=>ge.id===oe)||null,[o,oe]),pr=w.useMemo(()=>{if(!Rr)return{asignadas:[],respuestas:[]};const ge=[...e.filter(Oe=>(Oe.estudiantesDestino||[]).includes(Rr.nombreCompleto)).map(Oe=>({tipo:"Actividad",item:Oe})),...r.filter(Oe=>(Oe.estudiantesDestino||[]).includes(Rr.nombreCompleto)).map(Oe=>({tipo:"Prueba",item:Oe}))],me=n.filter(Oe=>Oe.estudianteId===Rr.id);return{asignadas:ge,respuestas:me}},[Rr,e,r,n]),Jr=()=>s.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas","gestion"].map(ge=>s.jsxs("button",{onClick:()=>{J(ge),u(null),f(null),we(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${G===ge?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[ge==="carpetas"&&s.jsx(uz,{size:18}),ge==="actividades"&&s.jsx(Pl,{size:18}),ge==="pruebas"&&s.jsx(mre,{size:18}),ge==="carpetas"?"Carpetas de Estudiantes":ge==="actividades"?"Actividades Remotas":ge==="pruebas"?"Pruebas Estandarizadas":"Gestión de Trabajos"]},ge)),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(C1,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:ge=>D(ge.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),G==="actividades"&&!k&&!c&&s.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[s.jsx(CE,{size:18})," Nueva"]}),G==="pruebas"&&!U&&!d&&s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[s.jsx(CE,{size:18})," Nueva"]})]})]}),gs=w.useMemo(()=>{const ge=new Set;return e.forEach(me=>(me==null?void 0:me.asignatura)&&ge.add(me.asignatura)),["Todas",...Array.from(ge).sort()]},[e]),Za=w.useMemo(()=>{const ge=new Set;return e.forEach(Oe=>(Oe==null?void 0:Oe.nivel)&&ge.add(Oe.nivel)),["Todos","—",...Array.from(ge).filter(Oe=>!!Oe&&Oe!=="—").sort()]},[e]),Pn=w.useMemo(()=>{const ge=[];for(const me of e){const Oe=me.estudiantesDestino||[];for(const He of Oe){const Re=o.find(Ye=>Ye.profile===Mt.ESTUDIANTE&&Ye.nombreCompleto===He)||null,We=Re?n.find(Ye=>Ye.estudianteId===Re.id&&Ye.actividadId===me.id):void 0;ge.push({actividad:me,estudiante:Re,estado:We?"Completado":"Pendiente",respuesta:We})}}return ge},[e,o,n]),Us=w.useMemo(()=>Pn.filter(ge=>{const me=W==="Todas"||ge.actividad.asignatura===W,Oe=M==="Todos"||ge.actividad.nivel===M;return me&&Oe}),[Pn,W,M]),er=()=>{var ge;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Gestión de Trabajos"}),s.jsx("p",{className:"text-slate-500",children:"Organiza envíos y realizados por asignatura y nivel. Reasigna actividades ya creadas sin consumir tokens."})]}),s.jsxs("div",{className:"md:ml-auto flex flex-wrap gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),s.jsx("select",{value:W,onChange:me=>Z(me.target.value),className:"border-slate-300 rounded-md",children:gs.map(me=>s.jsx("option",{value:me,children:me},me))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),s.jsx("select",{value:M,onChange:me=>F(me.target.value),className:"border-slate-300 rounded-md",children:Za.map(me=>s.jsx("option",{value:me,children:me},me))})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Asignatura"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nivel"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipos"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),s.jsx("th",{className:"px-4 py-3"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Us.map((me,Oe)=>{var He,Re,We;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:s.jsx(Bn,{content:me.actividad.asignatura,context:"gestion-asig"})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:me.actividad.nivel||"—"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:((He=me.estudiante)==null?void 0:He.nombreCompleto)||"—"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:(Re=me.actividad.tipos)==null?void 0:Re.join(", ")}),s.jsx("td",{className:"px-4 py-3 text-sm",children:me.estado==="Completado"?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx(cn,{size:14})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[s.jsx(Ac,{size:14})," Pendiente"]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:me.respuesta?`${me.respuesta.puntaje}/${me.respuesta.puntajeMaximo}`:"—"}),s.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:me.respuesta?me.respuesta.nota:"—"}),s.jsx("td",{className:"px-4 py-3 text-sm",children:me.respuesta?tX(me.respuesta.fechaCompletado):"—"}),s.jsx("td",{className:"px-4 py-3 text-sm text-right",children:s.jsx("button",{onClick:()=>{Y(me.actividad),le([])},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Reasignar a nuevos estudiantes",children:"Reasignar"})})]},`${me.actividad.id}-${((We=me.estudiante)==null?void 0:We.id)||Oe}`)})})]})}),X&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reasignar Actividad"}),s.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Selecciona estudiantes adicionales para la actividad de ",s.jsx("strong",{children:X.asignatura})," — ",(ge=X.tipos)==null?void 0:ge.join(", "),"."]}),s.jsx("div",{className:"mb-3",children:s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:me=>D(me.target.value),className:"w-full border-slate-300 rounded-md shadow-sm"})}),s.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2 bg-slate-50",children:(L?Ra:Pr).map(me=>{const Oe=(X.estudiantesDestino||[]).includes(me.nombreCompleto);return s.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${Oe?"opacity-50":"hover:bg-slate-100"}`,children:[s.jsx("input",{type:"checkbox",disabled:Oe,checked:ae.includes(me.nombreCompleto),onChange:()=>{le(He=>He.includes(me.nombreCompleto)?He.filter(Re=>Re!==me.nombreCompleto):[...He,me.nombreCompleto])},className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:me.nombreCompleto,children:me.nombreCompleto}),Oe&&s.jsx("span",{className:"ml-auto text-xs text-slate-400",children:"Ya asignado"})]},me.id)})}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{Y(null),le([])},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{disabled:ie||ae.length===0,onClick:async()=>{if(X)try{ne(!0);const me=X.estudiantesDestino||[],Oe=Array.from(new Set([...me,...ae]));await wet(X.id,{estudiantesDestino:Oe}),Y(null),le([])}catch(me){console.error("Error reasignando actividad:",me),B("No se pudo reasignar la actividad.")}finally{ne(!1)}},className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:ie?"Guardando...":"Confirmar reasignación"})]})]})})]})},xa=()=>{const ge=L?Ra:Dn;return ge.length?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:ge.map(me=>{const Oe=n.filter(We=>We.estudianteId===me.id),He=Oe.length,Re=e.filter(We=>(We.estudiantesDestino||[]).includes(me.nombreCompleto)).length+r.filter(We=>(We.estudiantesDestino||[]).includes(me.nombreCompleto)).length;return s.jsxs("button",{onClick:()=>we(me.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[s.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:s.jsx(uz,{})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"font-semibold text-slate-800 truncate",children:me.nombreCompleto}),s.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[s.jsx(Pb,{size:14})," ",me.curso||"—"]})]})]}),s.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:Re}),s.jsx("p",{className:"text-xs",children:"Asignadas"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:He}),s.jsx("p",{className:"text-xs",children:"Entregas"})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Ac,{size:16,className:"opacity-70"}),s.jsx("span",{className:"text-xs mt-1",children:Oe.length?Yy(Oe.sort((We,Ye)=>(We.fechaCompletado||"").localeCompare(Ye.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},me.id)})}):s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},la=()=>{if(!Rr)return null;const{asignadas:ge,respuestas:me}=pr;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsxs("button",{onClick:()=>we(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[s.jsx(NE,{size:18})," Volver"]}),s.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",Rr.nombreCompleto]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ge.map(({tipo:Oe,item:He})=>{var wt;const Re=me.find(Nt=>Nt.actividadId===He.id),We=Oe==="Actividad"?`${He.asignatura} — ${(wt=He.tipos)==null?void 0:wt.join(", ")}`:He.titulo,Ye=He.plazoEntrega?Yy(He.plazoEntrega):"—";return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm",children:Oe}),s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:s.jsx(Bn,{content:We,context:"hist-titulo"})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:Ye}),s.jsx("td",{className:"px-4 py-3 text-sm",children:Re?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx(cn,{size:14})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[s.jsx(Ac,{size:14})," Pendiente"]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:Re?`${Re.puntaje}/${Re.puntajeMaximo}`:"—"}),s.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Re?Re.nota:"—"})]},He.id)})})]})})]})},Ia=()=>{var ge,me,Oe;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Bn,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):s.jsx(Bn,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",Yy((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),s.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[s.jsx(NE,{size:18})," Volver al listado"]})]}),s.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((ge=c==null?void 0:c.tipos)==null?void 0:ge.includes("Desarrollo"))&&s.jsx("th",{className:"px-4 py-3"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:br.map(He=>{var We;const Re=Sn.find(Ye=>Ye.estudianteId===He.id);return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:He.nombreCompleto}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Re?s.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):s.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Re?`${Re.puntaje}/${Re.puntajeMaximo}`:"-"}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Re?s.jsx("span",{className:parseFloat(Re.nota)>=4?"text-green-600":"text-red-600",children:Re.nota}):"-"}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Re?tX(Re.fechaCompletado):"-"}),((We=c==null?void 0:c.tipos)==null?void 0:We.includes("Desarrollo"))&&s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Re?s.jsx("button",{onClick:()=>{var wt,Nt,zt;Ee(Re);const Ye=Array.from({length:((Nt=(wt=c.generatedContent)==null?void 0:wt.Desarrollo)==null?void 0:Nt.length)||0},(Ot,Vt)=>({index:Vt,puntaje:0,observacion:""}));Ce(Ye),xe(((zt=Re==null?void 0:Re.revisionDocente)==null?void 0:zt.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):s.jsx("span",{className:"text-slate-400",children:"-"})})]},He.id)})})]})})]}),K&&((me=c==null?void 0:c.tipos)==null?void 0:me.includes("Desarrollo"))&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(K==null?void 0:K.estudianteNombre)||""]}),s.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Oe=c.generatedContent)==null?void 0:Oe.Desarrollo)||[]).map((He,Re)=>{var We,Ye;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("p",{className:"font-semibold",children:[Re+1,". ",s.jsx(Bn,{content:He.pregunta,context:`revision-pregunta-${Re}`})]}),He.rubrica&&s.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[s.jsx("strong",{children:"Rúbrica:"})," ",s.jsx(Bn,{content:He.rubrica,context:`revision-rubrica-${Re}`})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),s.jsx("input",{type:"number",min:0,step:.5,value:((We=_e[Re])==null?void 0:We.puntaje)??0,onChange:wt=>{const Nt=Number(wt.target.value)||0;Ce(zt=>{const Ot=[...zt];return Ot[Re]={...Ot[Re]||{index:Re,puntaje:0},puntaje:Nt},Ot})},className:"w-24 border-slate-300 rounded-md"}),s.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((Ye=_e[Re])==null?void 0:Ye.observacion)||"",onChange:wt=>{const Nt=wt.target.value;Ce(zt=>{const Ot=[...zt];return Ot[Re]={...Ot[Re]||{index:Re,puntaje:0},observacion:Nt},Ot})},className:"flex-1 border-slate-300 rounded-md"})]})]},Re)})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),s.jsx("textarea",{rows:3,value:de,onChange:He=>xe(He.target.value),className:"w-full border-slate-300 rounded-md"})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{Ee(null),Ce([]),xe("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{onClick:async()=>{if(K)try{_(!0);const He=Number(K.puntaje)||0,Re=Number(K.puntajeMaximo)||0,We=(_e||[]).reduce((Nt,zt)=>Nt+(Number(zt.puntaje)||0),0),Ye=He+We,wt=Eet(Ye,Re);await Cet(K.id,{puntaje:Ye,puntajeMaximo:Re,nota:wt,revisionDocente:{completada:!0,observacionesGenerales:de||"",detalle:_e||[],puntajeDocente:We}}),Ee(null),Ce([]),xe("")}catch(He){console.error("Error guardando revisión:",He),B("No se pudo guardar la revisión del docente.")}finally{_(!1)}},disabled:T,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:T?"Guardando...":"Guardar Revisión"})]})]})})]})},Wa=()=>{var ge,me;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),s.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[s.jsx(NE,{size:18})," Volver"]})]}),s.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),s.jsxs("form",{onSubmit:ir,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:ye.asignatura,onChange:Qe,className:"w-full border-slate-300 rounded-md shadow-sm",children:ln.map(Oe=>s.jsx("option",{value:Oe,children:Oe},Oe))})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),s.jsx("textarea",{name:"instrucciones",value:(ge=ye.recursos)==null?void 0:ge.instrucciones,onChange:et,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),s.jsx("textarea",{name:"enlaces",value:(me=ye.recursos)==null?void 0:me.enlaces,onChange:et,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),s.jsx("input",{type:"file",multiple:!0,onChange:Ke,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),s.jsxs("div",{children:[s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Oe=>D(Oe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Ra:Pr).map(Oe=>{var He;return s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(He=ye.estudiantesDestino)==null?void 0:He.includes(Oe.nombreCompleto),onChange:()=>bt(Oe.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Oe.nombreCompleto,children:Oe.nombreCompleto})]},Oe.id)})})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"contenido",value:ye.contenido,onChange:Qe,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),s.jsx("input",{type:"date",name:"plazoEntrega",value:ye.plazoEntrega,onChange:Qe,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),s.jsx("div",{className:"space-y-3",children:zEe.map(Oe=>s.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ye.tipos.includes(Oe),onChange:()=>Ge(Oe),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Oe})]}),ye.tipos.includes(Oe)&&s.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),C6[Oe].map(He=>s.jsx("button",{type:"button",onClick:()=>nt(Oe,He),className:`px-3 py-1 rounded-full font-semibold text-xs ${ye.cantidadPreguntas[Oe]===He?"bg-amber-500 text-white":"bg-slate-200"}`,children:He},He))]})]},Oe))})]})]}),S&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:S}),s.jsx("div",{className:"pt-2 text-right",children:s.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?s.jsx(Ac,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},en=()=>{var ge;return s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),s.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),s.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[s.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(Bn,{content:k==null?void 0:k.introduccion,context:"preview-introduccion"})})]}),(k==null?void 0:k.panelDidactico)&&s.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[s.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),s.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof k.panelDidactico=="string"&&k.panelDidactico.trim().startsWith("{")){const me=JSON.parse(k.panelDidactico);return s.jsxs("div",{className:"space-y-4",children:[me.titulo&&s.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:me.titulo}),Array.isArray(me.subtitulos)&&me.subtitulos.map((Oe,He)=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Oe.titulo}),s.jsx("p",{className:"whitespace-pre-line",children:Oe.texto})]},He)),Array.isArray(me.conceptosClave)&&me.conceptosClave.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:me.conceptosClave.map((Oe,He)=>s.jsx("li",{className:"text-emerald-800",children:Oe},He))})]}),!me.subtitulos&&!me.conceptosClave&&s.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(me,null,2)})]})}return s.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}catch{return s.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}})()})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((ge=k.recursos.archivos)==null?void 0:ge.length))&&s.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),s.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(Bn,{content:k.recursos.instrucciones,context:"preview-instrucciones"})}),k.recursos.enlaces&&s.jsx("div",{children:k.recursos.enlaces.split(`
`).map((me,Oe)=>me.trim()&&s.jsx("a",{href:me,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:me},Oe))}),k.recursos.archivos&&k.recursos.archivos.length>0&&s.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(me=>s.jsx("li",{className:"text-slate-700",children:me.nombre},me.nombre))})]})]}),k==null?void 0:k.tipos.map(me=>{const Oe=k.generatedContent[me];return Oe?s.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:me}),s.jsxs("div",{className:"space-y-4 text-sm",children:[me==="Quiz"&&Array.isArray(Oe)&&Oe.map((He,Re)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Re+1,". ",s.jsx(Bn,{content:He.pregunta,context:`preview-quiz-pregunta-${Re}`})]}),s.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:He.opciones.map((We,Ye)=>s.jsxs("li",{children:[s.jsxs("strong",{children:[String.fromCharCode(65+Ye),"."]})," ",s.jsx(Bn,{content:We,context:`preview-quiz-opcion-${Re}-${Ye}`})]},Ye))}),s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",s.jsx(Bn,{content:He.respuestaCorrecta,context:`preview-quiz-respuesta-${Re}`})]})]},Re)),me==="Comprensión de Lectura"&&Oe&&typeof Oe=="object"&&"preguntas"in Oe&&Array.isArray(Oe.preguntas)&&s.jsxs("div",{children:[s.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:s.jsx(Bn,{content:Oe.texto,context:"preview-lectura-texto"})}),Oe.preguntas.map((He,Re)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Re+1,". ",s.jsx(Bn,{content:He.pregunta,context:`preview-lectura-pregunta-${Re}`})]}),s.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:He.opciones.map((We,Ye)=>s.jsxs("li",{children:[s.jsxs("strong",{children:[String.fromCharCode(65+Ye),"."]})," ",s.jsx(Bn,{content:We,context:`preview-lectura-opcion-${Re}-${Ye}`})]},Ye))}),s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",s.jsx(Bn,{content:He.respuestaCorrecta,context:`preview-lectura-respuesta-${Re}`})]})]},Re))]}),me==="Términos Pareados"&&Array.isArray(Oe)&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full border border-slate-200",children:[s.jsx("thead",{className:"bg-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),s.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),s.jsx("tbody",{children:Oe.map((He,Re)=>s.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[s.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:s.jsx(Bn,{content:He.concepto,context:`preview-pareado-concepto-${Re}`})}),s.jsx("td",{className:"p-2 align-top text-slate-700",children:s.jsx(Bn,{content:He.definicion,context:`preview-pareado-definicion-${Re}`})})]},He.id))})]})}),me==="Desarrollo"&&Array.isArray(Oe)&&Oe.map((He,Re)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Re+1,". ",s.jsx(Bn,{content:He.pregunta,context:`preview-desarrollo-pregunta-${Re}`})]}),s.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[s.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",s.jsx(Bn,{content:He.rubrica,context:`preview-desarrollo-rubrica-${Re}`})]})]},Re))]})]},me):null})]}),s.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>R(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{onClick:Cr,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},je=()=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify_between items-start",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),s.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[s.jsx(NE,{size:18})," Volver"]})]}),s.jsxs("form",{onSubmit:Kt,className:"space-y-6 mt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),s.jsx("select",{name:"asignatura",value:Ne.asignatura,onChange:$e,className:"w-full border-slate-300 rounded-md shadow-sm",children:ln.map(ge=>s.jsx("option",{value:ge,children:ge},ge))})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),s.jsx("textarea",{name:"objetivosAprendizaje",value:Ne.objetivosAprendizaje,onChange:$e,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),s.jsx("textarea",{name:"contenido",value:Ne.contenido,onChange:$e,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),s.jsx("input",{type:"date",name:"plazoEntrega",value:Ne.plazoEntrega,onChange:$e,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),s.jsxs("div",{children:[s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:ge=>D(ge.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Ra:Pr).map(ge=>{var me;return s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(me=Ne.estudiantesDestino)==null?void 0:me.includes(ge.nombreCompleto),onChange:()=>bt(ge.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ge.nombreCompleto,children:ge.nombreCompleto})]},ge.id)})})]})]})]}),S&&s.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:S}),s.jsx("div",{className:"text-right",children:s.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?s.jsx(Ac,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Ue=()=>{var ge,me;return s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),s.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),s.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[s.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:s.jsx(Bn,{content:U==null?void 0:U.titulo,context:"preview-prueba-titulo"})}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(Bn,{content:U==null?void 0:U.instrucciones,context:"preview-prueba-instrucciones"})})]}),(ge=U==null?void 0:U.textos)!=null&&ge.length?s.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[s.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),s.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:U.textos.map((Oe,He)=>s.jsxs("li",{children:[s.jsxs("p",{className:"font-semibold",children:[s.jsx(Bn,{content:Oe.titulo,context:`preview-texto-titulo-${He}`}),s.jsxs("span",{className:"text-xs text-slate-500",children:["(",Oe.tipo,")"]})]}),s.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:s.jsx(Bn,{content:Oe.contenido,context:`preview-texto-contenido-${He}`})})]},Oe.id))})]}):null,(me=U==null?void 0:U.preguntas)!=null&&me.length?s.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),U.preguntas.slice(0,10).map((Oe,He)=>s.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[s.jsxs("p",{className:"font-semibold",children:[Oe.numero,". ",s.jsx(Bn,{content:Oe.pregunta,context:`preview-pregunta-texto-${He}`})]}),s.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Oe.opciones.map((Re,We)=>s.jsx("li",{children:s.jsx(Bn,{content:Re,context:`preview-pregunta-opcion-${He}-${We}`})},We))}),s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Oe.respuestaCorrecta]})]},Oe.numero))]}):null]}),s.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>H(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{onClick:$r,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},De=()=>s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),s.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[s.jsx(CE,{size:18})," Crear Nueva"]})]}),s.jsx("div",{className:"space-y-4",children:e.length>0?e.map(ge=>{var He;const me=[];(He=ge.estudiantesDestino)!=null&&He.length&&me.push(`Estudiantes: ${ge.estudiantesDestino.length}`);const Oe=me.length?me.join(" | "):"Estudiantes seleccionados";return s.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800",children:[s.jsx(Bn,{content:ge.asignatura,context:`lista-asignatura-${ge.id}`})," — ",ge.tipos.join(", ")]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Oe," | Creado: ",Yy(ge.fechaCreacion)]})]}),s.jsx("button",{onClick:()=>u(ge),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ge.id)}):s.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Le=()=>s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[s.jsx(CE,{size:18})," Crear Nueva"]})]}),s.jsx("div",{className:"space-y-4",children:r.length>0?r.map(ge=>s.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800",children:s.jsx(Bn,{content:ge.titulo,context:`lista-prueba-titulo-${ge.id}`})}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",Yy(ge.fechaCreacion)]})]}),s.jsx("button",{onClick:()=>f(ge),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ge.id)):s.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return O?s.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):s.jsxs("div",{className:"animate-fade-in",children:[Jr(),oe?la():U?Ue():k?en():c||d?Ia():G==="gestion"?er():G==="pruebas"?g?je():Le():G==="actividades"?h?Wa():De():xa()]})},rX="actividades_remotas",Wue="respuestas_actividades",Xue=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},aX=e=>{const t=Xue(e);return t?t.toISOString():void 0},Tet=e=>{const t=Xue(e);return t?t.toISOString().split("T")[0]:void 0},Yue=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:aX(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:Tet(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:aX(t.fechaCompletado)||t.fechaCompletado}},mb=(e,t)=>{var a,n;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((a=e.message)!=null&&a.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(n=e.message.match(/https:\/\/[^\s]+/))==null?void 0:n[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},Iet=e=>new Promise(t=>setTimeout(t,e)),Oet=async(e,t=3,r="operación")=>{for(let a=1;a<=t;a++)try{return await e()}catch(n){if(console.log(`⚠️ Intento ${a} falló en ${r}:`,n.code||n.message),a===t)throw n;if(["unavailable","deadline-exceeded","internal"].includes(n.code)){const i=Math.pow(2,a)*1e3;console.log(`⏱️ Reintentando en ${i}ms...`),await Iet(i)}else throw n}throw new Error("Max retries exceeded")},Fet=(e,t,r)=>{var o;console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const a=[],n=new Map,i=l=>{for(const u of l){const d=Yue(u);n.set(d.id,d)}const c=Array.from(n.values());c.sort((u,d)=>new Date(d.fechaCreacion||"").getTime()-new Date(u.fechaCreacion||"").getTime()),console.log("✅ Actividades combinadas para el estudiante:",c.length),t(c)};try{const l=e.curso||"";if(l){const h=_t(pt(ot,rX),rr("cursosDestino","array-contains",l)),m=ar(h,{next:g=>{console.log("📋 Actividades por curso:",g.docs.length),i(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn("⚠️ Sin permisos para actividades por curso; verificando doc usuarios/{email} y campo curso.",g);else{const x=mb(g,"suscripción a actividades por curso");r==null||r(x)}}});a.push(m)}const c=(o=jn.currentUser)==null?void 0:o.uid,u=e.email,d=e.nombreCompleto,f=[u,c,d].filter(Boolean);if(f.length){const h=_t(pt(ot,rX),rr("estudiantesDestino","array-contains-any",f)),m=ar(h,{next:g=>{console.log("📋 Actividades por estudiante:",g.docs.length),i(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn("⚠️ Sin permisos para actividades por estudiante; continuando con filtro por curso.",g);else{const x=mb(g,"suscripción a actividades por estudiante");r==null||r(x)}}});a.push(m)}a.length===0&&(console.warn("⚠️ Usuario sin curso ni identificadores para filtrar actividades."),t([]))}catch(l){const c=mb(l,"configuración de suscripciones de actividades");r==null||r(c)}return()=>a.forEach(l=>l&&l())},Det=(e,t,r)=>{var d,f;console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const a=(d=jn.currentUser)==null?void 0:d.uid,n=(f=jn.currentUser)==null?void 0:f.email,i=Array.from(new Set([e,a,n].filter(Boolean)));if(i.length===0)return console.warn("⚠️ Sin identificadores válidos para suscripción de respuestas."),t([]),()=>{};const o=[],l=new Map;let c=0;const u=()=>{const h=Array.from(l.values()).sort((m,g)=>new Date(g.fechaCompletado).getTime()-new Date(m.fechaCompletado).getTime());console.log("✅ Enviando respuestas procesadas al componente (combinadas):",h.length),t(h)};for(const h of i){const m=_t(pt(ot,Wue),rr("estudianteId","==",h)),g=ar(m,{next:x=>{try{console.log(`📝 Respuestas recibidas para identificador ${h}:`,x.docs.length);for(const v of x.docs){const y=Yue(v);l.set(y.id,y)}u()}catch(v){console.error("❌ Error procesando respuestas:",v);const y=mb(v,"procesamiento de respuestas");r==null||r(y)}},error:x=>{if((x==null?void 0:x.code)==="permission-denied"){if(console.warn(`⚠️ Sin permisos para suscripción de respuestas con identificador ${h}. Continuando con otras.`,x),c++,c===i.length){const y=mb(x,"suscripción a respuestas (todas fallaron)");r==null||r(y)}return}const v=mb(x,"suscripción a respuestas");r==null||r(v)}});o.push(g)}return()=>{for(const h of o)try{h()}catch{}}},Pet=async e=>Oet(async()=>{var i;console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,calificacion:e.calificacion});const r=((i=jn.currentUser)==null?void 0:i.uid)||e.estudianteId,a={...e,estudianteId:r,fechaCompletado:lr.fromDate(new Date(e.fechaCompletado))},n=await Yr(pt(ot,Wue),a);return console.log("✅ Respuesta guardada exitosamente con ID:",n.id),n.id},3,"guardado de respuesta"),Ret=.6,PD=(e,t,r=Ret,a=2)=>{if(!t||t<=0)return a.toFixed(1);const n=t*r;let i;return e>=n?i=4+3*(e-n)/(t-n+1e-9):i=1+3*e/(n+1e-9),i=Math.max(a,Math.min(7,i)),i.toFixed(1)},RD=({className:e="w-5 h-5"})=>s.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Let=async(e,t,r,a=3)=>{try{for(let n=1;n<=a;n++)try{const i=jn.currentUser;if(!i)throw new Error("Usuario no autenticado.");const o=await i.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||i.uid})});if(!l.ok){const d=await l.json();throw new Error(d.error||`Error del servidor: ${l.status}`)}const u=(await l.json()).feedback;if(u)return u;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(i){if(console.error(`Error en intento ${n} de generar feedback:`,i),n===a)return null}}catch(n){return console.error("Error al generar feedback con IA:",n),null}},Met=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const a=await Pet(e);console.log("✅ Respuesta base guardada con ID:",a);const n={id:a,...e};try{const i=await Let(t,r);if(i){const{updateDoc:o,doc:l}=await ai(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Tb);return{updateDoc:u,doc:d}},void 0),{db:c}=await ai(async()=>{const{db:u}=await Promise.resolve().then(()=>fre);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",a),{retroalimentacionAI:i}),console.log("🤖 Feedback de IA agregado exitosamente"),{...n,retroalimentacionAI:i}}return n}catch(i){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",i),n}}catch(a){throw console.error("❌ Error crítico al guardar respuesta:",a),a}},Bo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(a))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},oc=(e,t)=>{if(t&&Bo(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>oc(n,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const n of r)if(e[n]&&typeof e[n]=="string")return e[n];if(Object.keys(e).some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(n)))return"[Criterios de evaluación]";try{const n=JSON.stringify(e);return n.length>100?"[Objeto complejo]":n}catch{return"[Objeto no serializable]"}}return String(e)},Yd=(e,t,...r)=>{if(Bo(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const i=oc(e[n],`${t}-${n}`);if(i&&i!=="[Objeto complejo]"&&i!=="[Objeto no serializable]")return i}const a=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const n of a)if(e[n]){const i=oc(e[n],`${t}-${n}`);if(i&&i!=="[Objeto complejo]"&&i!=="[Objeto no serializable]")return i}return typeof e=="string"?e:"[Sin contenido disponible]"},_s=({content:e,context:t="unknown"})=>{try{const r=oc(e,`UltraSafeRenderer-${t}`);return s.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),s.jsx("span",{children:"[Error al mostrar contenido]"})}};function nX(e){if(console.log("🔍 Normalizando lectura:",e),Bo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,a)=>{Bo(r,`normalizeQuestion-${a}`);const n=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((i,o)=>oc(i,`opcion-${a}-${o}`)).filter(Boolean):[];return{pregunta:Yd(r,`pregunta-${a}`,"pregunta","texto"),opciones:n,respuestaCorrecta:oc(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${a}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Yd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((n,i)=>Yd(n,`lectura-bloque-${i}`,"texto")).filter(Boolean).join(`

---

`),a=e.flatMap((n,i)=>(Bo(n,`lectura-bloque-preguntas-${i}`),Array.isArray(n==null?void 0:n.preguntas)?n.preguntas:[])).map(t);return{texto:r,preguntas:a}}return{texto:"",preguntas:[]}}function sX(e){return console.log("🔍 Normalizando pareados:",e),Bo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Bo(t,`pareado-${r}`),{izquierda:Yd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Yd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Bo(t,`pareado-array-${r}`),{izquierda:Yd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Yd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function iX(e){return console.log("🔍 Normalizando desarrollo:",e),Bo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Bo(t,`desarrollo-pregunta-${r}`),{enunciado:Yd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Bo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Yd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const Uet=({actividad:e,onComplete:t,currentUser:r})=>{const[a,n]=w.useState({}),[i,o]=w.useState(!1),l=(u,d)=>{const f={...a,[u]:d};n(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=a[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Bo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,N)=>(Bo(y,`quiz-question-${N}`),{pregunta:Yd(y,`quiz-pregunta-${N}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((C,T)=>oc(C,`quiz-opcion-${N}-${T}`)):[],respuestaCorrecta:oc(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${N}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:nX(g).preguntas).forEach((y,N)=>{const C=x==null?void 0:x[N],T=C===y.respuestaCorrecta,_=y.puntaje??1;T&&(u+=_),d+=_,f.items.push({pregunta:y.pregunta,respuestaUsuario:oc(C,`feedback-respuesta-${N}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:T,puntajeObtenido:T?_:0,tipo:m})}),m==="Términos Pareados"){const v=sX(g),y=x||{};v.forEach((N,C)=>{const T=y[C],_=T===N.derecha,O=N.puntaje??1;_&&(u+=O),d+=O,f.items.push({pregunta:`${N.izquierda} → ¿?`,respuestaUsuario:oc(T,`pareado-feedback-${C}`)||"No respondida",respuestaCorrecta:N.derecha,esCorrecta:_,puntajeObtenido:_?O:0,tipo:m})})}if(m==="Desarrollo"){const v=iX(g),y=x||{};v.forEach((N,C)=>{const T=oc(y[C],`desarrollo-feedback-${C}`).trim();f.items.push({pregunta:N.enunciado,respuestaUsuario:T||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:a,nota:PD(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:s.jsx(_s,{content:e.asignatura,context:"actividad-asignatura"})}),s.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(_s,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&s.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[s.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),s.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return s.jsxs("div",{className:"space-y-4",children:[u.titulo&&s.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),s.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>s.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&s.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return s.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return s.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(_s,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),s.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),s.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),Bo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(Bo(h,`render-quiz-question-${m}`),{pregunta:Yd(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>oc(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:oc(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),s.jsx("div",{className:"space-y-6",children:f.map((h,m)=>s.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",s.jsx(_s,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),s.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return s.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[s.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=a[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...a[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),s.jsx("span",{children:s.jsx(_s,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const f=nX(d);return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),s.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:s.jsx(_s,{content:f.texto,context:"lectura-texto"})}),s.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>s.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",s.jsx(_s,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),s.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return s.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[s.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=a[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...a[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),s.jsx("span",{children:s.jsx(_s,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const f=sX(d),h=a[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>s.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[s.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",s.jsx(_s,{content:g.izquierda,context:`pareado-izq-${x}`})]}),s.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[s.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>s.jsx("option",{value:v,children:oc(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=iX(d),h=a[u]||{};return s.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),s.jsx("div",{className:"space-y-6",children:f.map((m,g)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",s.jsx(_s,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),s.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),s.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),s.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:s.jsxs("button",{onClick:c,disabled:i,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[i?s.jsx(RD,{className:"w-5 h-5 mr-2"}):null,i?"Evaluando...":"Entregar Actividad"]})})]})},Qet=({currentUser:e})=>{var k,R,U;const[t,r]=w.useState(!0),[a,n]=w.useState("list"),[i,o]=w.useState("actividades"),[l,c]=w.useState(!1),[u,d]=w.useState([]),[f,h]=w.useState([]),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[C,T]=w.useState("connecting");w.useEffect(()=>{var F,X;console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let H=!1,Q=!1,V=!1,G=!1;const J=()=>{(H||V)&&(Q||G)&&(V&&G?(T("error"),N("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):T("connected"),r(!1),console.log("✅ Carga completada - Actividades:",H,"Respuestas:",Q))},W=Fet(e,Y=>{console.log("📋 Actividades recibidas:",Y.length),Y.forEach((ae,le)=>{console.log(`  ${le+1}. ${ae.asignatura} (ID: ${ae.id})`),Bo(ae,`actividad-${le}`)}),d(Y),H=!0,J()},Y=>{console.error("❌ Error en suscripción de actividades:",Y),V=!0,J()}),Z=((F=jn.currentUser)==null?void 0:F.uid)||((X=jn.currentUser)==null?void 0:X.email)||e.email||e.id,M=Det(Z,Y=>{console.log("📝 Respuestas del estudiante recibidas:",Y.length),Y.forEach((ae,le)=>{var ie;console.log(`  ${le+1}. Actividad ${ae.actividadId} - Fecha: ${ae.fechaCompletado}`),ae.nota&&console.log(`    Nota: ${ae.nota}`),(ie=ae.revisionDocente)!=null&&ie.completada&&console.log("    ✅ Con revisión docente completada"),Bo(ae,`respuesta-${le}`)}),h(Y),Q=!0,J()},Y=>{var ae;console.error("❌ Error en suscripción de respuestas:",Y),(ae=Y.message)!=null&&ae.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),N("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),G=!0,J()});return()=>{console.log("🧹 Limpiando subscripciones"),W==null||W(),M==null||M()}},[e]),w.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:u.length,respuestas:f.length,vista:a,conexion:C})},[u.length,f.length,a,C,t]);const _=H=>{if(console.log("🔍 Iniciando actividad:",H.asignatura),S.has(H.id)){N("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(H),n("activity"),N(null)},O=H=>{console.log("🔍 Viendo resultado:",H.actividadId);const Q=u.find(V=>V.id===H.actividadId);Q?(g(Q),v(H),n("result"),N(null)):N("No se pudieron cargar los detalles de esta actividad completada.")},j=w.useCallback(async(H,Q)=>{var J,W;if(!m)return;const V=((J=jn.currentUser)==null?void 0:J.uid)||((W=jn.currentUser)==null?void 0:W.email)||e.email||e.id;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:V,puntaje:H.puntaje,nota:H.nota}),n("result"),c(!0),N(null);const G={actividadId:m.id,estudianteId:V,fechaCompletado:new Date().toISOString(),...H,retroalimentacionDetallada:Q};console.log("💾 Guardando respuesta...");try{const Z=await Met(G,m,Q);console.log("✅ Respuesta completada con ID:",Z.id),v(Z),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(Z){console.error("❌ Error crítico al completar actividad:",Z),N("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...G,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),S=w.useMemo(()=>{if(f.length===0)return new Set;const H=new Set(f.map(Q=>Q.actividadId));return console.log("🎯 IDs completados calculados:",H.size),H},[f]),B=w.useMemo(()=>{if(u.length===0)return[];const H=u.filter(Q=>!S.has(Q.id));return console.log("⏳ Actividades pendientes:",H.length),H},[u,S]),L=w.useMemo(()=>{if(f.length===0)return[];const H=f.map(Q=>{const V=u.find(G=>G.id===Q.actividadId);return{...Q,asignatura:(V==null?void 0:V.asignatura)||"Actividad no disponible",tipos:(V==null?void 0:V.tipos)||[]}}).sort((Q,V)=>new Date(V.fechaCompletado).getTime()-new Date(Q.fechaCompletado).getTime());return console.log("📖 Historial preparado:",H.length),H},[f,u]),D=w.useMemo(()=>{if(L.length===0)return[];const H=new Map;for(const V of L){const G=V.asignatura||"Sin asignatura";let J;if(V.nota!=null){const Z=parseFloat(V.nota);isNaN(Z)||(J=Z)}if(J==null&&typeof V.puntaje=="number"&&typeof V.puntajeMaximo=="number"&&V.puntajeMaximo>0){const Z=PD(V.puntaje,V.puntajeMaximo),M=parseFloat(Z);isNaN(M)||(J=M)}if(J==null||isNaN(J))continue;const W=H.get(G)||{suma:0,cantidad:0};H.set(G,{suma:W.suma+J,cantidad:W.cantidad+1})}const Q=Array.from(H.entries()).map(([V,G])=>({asignatura:V,promedio:Math.round(G.suma/G.cantidad*100)/100,cantidad:G.cantidad}));return Q.sort((V,G)=>G.promedio-V.promedio),Q},[L]);return t?s.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[s.jsx(RD,{className:"w-8 h-8 text-slate-500"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),s.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",C==="connecting"?"Conectando...":C==="connected"?"Conectado":"Error de conexión"]})]})]}):C==="error"&&u.length===0&&f.length===0?s.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[s.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),s.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),s.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):a==="activity"&&m?s.jsx(Uet,{actividad:m,onComplete:j,currentUser:e}):a==="result"&&x?(console.log("🔍 Renderizando resultado:",x),s.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),s.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[s.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",s.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),s.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",s.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&s.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:s.jsx(_s,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((H,Q)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),s.jsx("a",{href:H.startsWith("http")?H:`https://${H}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:H})]},Q))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),s.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((H,Q)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),s.jsx("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:H.nombre||`Archivo ${Q+1}`})]},Q))})]})]}),y&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",y]})}),l&&s.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[s.jsx(RD,{className:"w-8 h-8 text-blue-500"}),s.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),s.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&s.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),s.jsx("p",{className:"text-slate-700 mt-1",children:s.jsx(_s,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((k=x.retroalimentacionAI.desafios)==null?void 0:k.length)>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),s.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((H,Q)=>s.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[s.jsx("p",{className:"font-semibold text-slate-800",children:s.jsx(_s,{content:H.pregunta,context:`feedback-desafio-pregunta-${Q}`})}),s.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:s.jsx(_s,{content:H.explicacionDelError,context:`feedback-desafio-explicacion-${Q}`})})]},Q))})]}),((U=(R=x.retroalimentacionAI)==null?void 0:R.comentariosDesarrollo)==null?void 0:U.length)>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),s.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((H,Q)=>s.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[s.jsx("p",{className:"font-semibold text-slate-800",children:s.jsx(_s,{content:H.pregunta,context:`feedback-desarrollo-pregunta-${Q}`})}),s.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:s.jsx(_s,{content:H.retroalimentacionBreve,context:`feedback-desarrollo-retro-${Q}`})})]},Q))})]})]}),x.retroalimentacionDetallada&&s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),x.retroalimentacionDetallada.items.map((H,Q)=>{const V=H.esCorrecta===null,G=V?"border-slate-400 bg-slate-50":H.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",J=V?"🕓":H.esCorrecta?"✅":"❌";return s.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${G}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[Q+1,". ",s.jsx(_s,{content:H.pregunta,context:`feedback-item-pregunta-${Q}`})]}),s.jsx("span",{className:"font-bold text-lg",children:J})]}),s.jsxs("div",{className:"mt-2 text-sm pl-4",children:[s.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",s.jsx("span",{className:"font-medium",children:s.jsx(_s,{content:H.respuestaUsuario,context:`feedback-item-respuesta-${Q}`})})]}),!V&&!H.esCorrecta&&s.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",s.jsx("span",{className:"font-medium text-green-700",children:s.jsx(_s,{content:H.respuestaCorrecta,context:`feedback-item-correcta-${Q}`})})]}),V&&s.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},Q)})]}),s.jsx("div",{className:"flex gap-4",children:s.jsx("button",{onClick:()=>{n("list"),g(null),v(null),N(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&s.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-amber-800",children:["⚠️ ",y]})}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(H=>s.jsx("button",{onClick:()=>o(H.key),className:`px-4 py-2 rounded-lg border transition-colors ${i===H.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:H.label},H.key))}),i==="actividades"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),s.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),s.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:s.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),s.jsx("div",{className:"space-y-4",children:B.length>0?B.map(H=>s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800",children:[s.jsx(_s,{content:H.asignatura,context:`actividad-asignatura-${H.id}`})," - ",H.tipos.join(", ")]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",s.jsx(_s,{content:typeof H.plazoEntrega=="string"?H.plazoEntrega:"",context:`actividad-plazo-${H.id}`})]})]}),s.jsx("button",{onClick:()=>_(H),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},H.id)):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]})}),i==="historial"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),s.jsx("div",{className:"space-y-4",children:L.length>0?L.map(H=>s.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800",children:[s.jsx(_s,{content:H.asignatura,context:`completada-asignatura-${H.id}`})," - ",H.tipos.join(", ")]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(H.fechaCompletado).toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",s.jsx("span",{className:`font-bold text-lg ${(parseFloat(H.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:H.nota??PD(H.puntaje,H.puntajeMaximo)})]}),s.jsx("button",{onClick:()=>O(H),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},H.id)):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📚"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]}),i==="promedios"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),D.length>0?s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:D.map(H=>s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[s.jsx("p",{className:"font-bold text-slate-800 mb-1",children:H.asignatura}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-2xl font-extrabold ${H.promedio>=4?"text-green-600":"text-red-600"}`,children:H.promedio.toFixed(2)}),s.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-slate-700 font-semibold",children:H.cantidad}),s.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},H.asignatura))}):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📊"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos aún"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},P4="estudiantes_inclusion",Het="usuarios",Jue=e=>{const t=e.data();return{id:e.id,...t}},zet=e=>{const t=_t(pt(ot,P4));return ar(t,a=>{const n=a.docs.map(i=>Jue(i));e(n)},a=>{console.error("Error al suscribirse a estudiantes de inclusión:",a),e([])})},Vet=e=>{const t=_t(pt(ot,Het));return ar(t,a=>{const n=a.docs.map(i=>Jue(i));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},$et=async e=>{try{return(await Yr(pt(ot,P4),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},Get=async(e,t)=>{try{const{id:r,...a}=t,n=$t(ot,P4,e);await ii(n,a)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},qet=async e=>{try{const t=$t(ot,P4,e);await Ja(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},Ket=({estudiantes:e})=>{const t=w.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=w.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),a=w.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),n=w.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),i=w.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...a.map(l=>l.cantidad));return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),s.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.total}),s.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:i}),s.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.promedio}),s.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),s.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),s.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),s.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),s.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),s.jsx("div",{className:"space-y-2",children:a.map(({diagnostico:l,cantidad:c})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),s.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},oX=({estudiantesDisponibles:e,onSelect:t})=>{const[r,a]=w.useState(""),[n,i]=w.useState(""),[o,l]=w.useState(!1),c=w.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=n===""||f.curso===n;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,n]),u=w.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),a(""),i(""),l(!1)};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),s.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{a(f.target.value),l(f.target.value.length>0||n!=="")},onFocus:()=>l(r.length>0||n!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),s.jsxs("select",{value:n,onChange:f=>{i(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>s.jsx("option",{value:f,children:f},f))]})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),s.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),s.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&s.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?s.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||n?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):s.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>s.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),s.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),s.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},Wet=({student:e,onClose:t,onConfirm:r})=>{const[a,n]=w.useState(uk[0]),i=()=>r(e,a);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),s.jsx("select",{id:"dificultad",value:a,onChange:o=>n(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:uk.map(o=>s.jsx("option",{value:o,children:o},o))})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:i,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},Xet=({student:e,onClose:t,onSave:r,profesores:a,getDocenteEmail:n})=>{const[i,o]=w.useState("intervenciones"),[l,c]=w.useState(e);w.useEffect(()=>c(e),[e]);const[u,d]=w.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=w.useState(f),[g,x]=w.useState({trimestre:"T1",meta:""}),[v,y]=w.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,C]=w.useState(null),[T,_]=w.useState(!1),O={motivo:"",acuerdos:"",asistentes:""},[j,S]=w.useState(O),B=()=>{r(l),t()},L=async()=>{var Ce;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let K,Ee=!1;u?K=(l.intervenciones||[]).map(de=>de.id===u.id?{...de,...h}:de):(Ee=!0,K=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const _e=K.sort((de,xe)=>new Date(xe.fecha).getTime()-new Date(de.fecha).getTime());if(c(de=>({...de,intervenciones:_e})),Ee)try{await _re({docenteNombre:h.responsable,docenteEmail:n?n(h.responsable):void 0,docenteEmailLower:(Ce=n?n(h.responsable):void 0)==null?void 0:Ce.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(de){console.error("Error al crear notificación:",de),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),d(null)},D=K=>{d(K),m({responsable:K.responsable,accion:K.accion,observaciones:K.observaciones})},k=K=>{window.confirm("¿Eliminar esta intervención?")&&c(Ee=>({...Ee,intervenciones:(Ee.intervenciones||[]).filter(_e=>_e.id!==K)}))},R=K=>{const{name:Ee,value:_e}=K.target;c(Ce=>({...Ce,[Ee]:_e,fechaActualizacionApoyos:new Date().toISOString()}))},U=()=>{if(!g.meta.trim())return;const K={...g,id:crypto.randomUUID(),cumplida:!1};c(Ee=>({...Ee,metasProgreso:[...Ee.metasProgreso||[],K]})),x({trimestre:"T1",meta:""})},H=K=>{c(Ee=>({...Ee,metasProgreso:(Ee.metasProgreso||[]).map(_e=>_e.id===K?{..._e,cumplida:!_e.cumplida}:_e)}))},Q=K=>{c(Ee=>({...Ee,metasProgreso:(Ee.metasProgreso||[]).filter(_e=>_e.id!==K)}))},V=w.useMemo(()=>{const K=l.metasProgreso||[];if(K.length===0)return{percent:0,color:"bg-slate-300"};const Ee=K.filter(de=>de.cumplida).length,_e=Math.round(Ee/K.length*100),Ce=_e<40?"bg-red-500":_e<75?"bg-yellow-500":"bg-green-500";return{percent:_e,color:Ce}},[l.metasProgreso]),G=w.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const K=new Date(l.fechaActualizacionApoyos),Ee=new Date;return Ee.setMonth(Ee.getMonth()-3),K<Ee},[l.fechaActualizacionApoyos]),J=()=>{if(!v.titulo.trim()||!v.fecha)return;const K={...v,id:crypto.randomUUID(),resuelta:!1};c(Ee=>({...Ee,alertas:[...Ee.alertas||[],K].sort((_e,Ce)=>new Date(_e.fecha).getTime()-new Date(Ce.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},W=K=>{c(Ee=>({...Ee,alertas:(Ee.alertas||[]).map(_e=>_e.id===K?{..._e,resuelta:!_e.resuelta}:_e)}))},Z=K=>{c(Ee=>({...Ee,alertas:(Ee.alertas||[]).filter(_e=>_e.id!==K)}))},M=K=>{K.target.files&&K.target.files[0]&&C(K.target.files[0])},F=()=>{if(!N)return;_(!0);const K=new FileReader;K.readAsDataURL(N),K.onloadend=()=>{const Ee={id:crypto.randomUUID(),nombre:N.name,url:K.result,fechaSubida:new Date().toISOString()};c(_e=>({..._e,archivos:[Ee,..._e.archivos||[]]})),C(null),_(!1)},K.onerror=()=>{alert("Error al leer el archivo."),_(!1)}},X=K=>{window.confirm("¿Eliminar este archivo?")&&c(Ee=>({...Ee,archivos:(Ee.archivos||[]).filter(_e=>_e.id!==K)}))},Y=()=>{if(!j.motivo.trim()||!j.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const K={...j,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Ee=>({...Ee,reuniones:[K,...Ee.reuniones||[]].sort((_e,Ce)=>new Date(Ce.fecha).getTime()-new Date(_e.fecha).getTime())})),S(O)},ae=K=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Ee=>({...Ee,reuniones:(Ee.reuniones||[]).filter(_e=>_e.id!==K)}))},le=()=>{var ce,Ae,Ne;const K=new gr("p","mm","a4"),Ee=20,_e=K.internal.pageSize.getWidth(),Ce=K.internal.pageSize.getHeight();let de=Ee;const xe=Pe=>{Pe.setFontSize(10),Pe.setTextColor(100),Pe.text("Ficha de Seguimiento - Módulo Inclusión",Ee,15)};xe(K),K.setFontSize(18),K.setFont("helvetica","bold"),K.setTextColor(40),K.text(l.nombre,Ee,de+10),de+=15,K.setFontSize(11),K.setFont("helvetica","normal"),K.setTextColor(80),K.text(`Curso: ${l.curso}`,Ee,de),K.text(`Dificultad: ${l.dificultad}`,Ee,de+6),de+=15;const he=Pe=>{de+Pe>Ce-Ee&&(K.addPage(),xe(K),de=Ee)},ye=Pe=>{he(15),K.setFontSize(14),K.setFont("helvetica","bold"),K.text(Pe,Ee,de),de+=10};if((ce=l.intervenciones)!=null&&ce.length&&(ye("Historial de Intervenciones"),Ni(K,{startY:de,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map(Pe=>[new Date(Pe.fecha).toLocaleDateString("es-CL"),Pe.responsable,Pe.accion,Pe.observaciones||""]),theme:"grid",didDrawPage:()=>xe(K)}),de=K.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){he(30),ye("Seguimiento y Apoyos"),K.setFontSize(11),K.setFont("helvetica","normal");const Pe=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,Qe=K.splitTextToSize(Pe,_e-Ee*2);K.text(Qe,Ee,de),de+=Qe.length*5+10}(Ae=l.metasProgreso)!=null&&Ae.length&&(he(30),ye("Metas de Progreso"),Ni(K,{startY:de,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(Pe=>[Pe.trimestre,Pe.meta,Pe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>xe(K)}),de=K.lastAutoTable.finalY+10),(Ne=l.reuniones)!=null&&Ne.length&&(ye("Reuniones con Apoderados"),Ni(K,{startY:de,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(Pe=>[new Date(Pe.fecha).toLocaleDateString("es-CL"),Pe.motivo,Pe.acuerdos||"",Pe.asistentes]),theme:"grid",didDrawPage:()=>xe(K)})),K.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),s.jsxs("select",{value:h.responsable,onChange:K=>m(Ee=>({...Ee,responsable:K.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione Responsable..."}),a.map(K=>s.jsx("option",{value:K,children:K},K))]}),h.responsable&&!u&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),s.jsx("textarea",{value:h.accion,onChange:K=>m(Ee=>({...Ee,accion:K.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("textarea",{value:h.observaciones,onChange:K=>m(Ee=>({...Ee,observaciones:K.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[u&&s.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),s.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(K=>s.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.accion}),K.observaciones&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:K.observaciones}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(K.fecha).toLocaleString("es-CL")," - ",K.responsable]}),s.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),s.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[s.jsx("button",{onClick:()=>D(K),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),s.jsx("button",{onClick:()=>k(K.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},K.id)),(!l.intervenciones||l.intervenciones.length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📋"}),s.jsx("p",{children:"No hay intervenciones registradas"}),s.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ne=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),G&&s.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),s.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:R,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),s.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:R,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",V.percent,"%"]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:s.jsx("div",{className:`${V.color} h-4 rounded-full transition-all duration-500`,style:{width:`${V.percent}%`}})})]}),s.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[s.jsxs("select",{value:g.trimestre,onChange:K=>x(Ee=>({...Ee,trimestre:K.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"T1",children:"T1"}),s.jsx("option",{value:"T2",children:"T2"}),s.jsx("option",{value:"T3",children:"T3"})]}),s.jsx("input",{value:g.meta,onChange:K=>x(Ee=>({...Ee,meta:K.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:U,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(K=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[s.jsx("input",{type:"checkbox",checked:K.cumplida,onChange:()=>H(K.id),className:"h-5 w-5 rounded text-amber-500"}),s.jsxs("span",{className:`flex-grow text-sm ${K.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[s.jsxs("strong",{children:[K.trimestre,":"]})," ",K.meta]}),s.jsx("button",{onClick:()=>Q(K.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},K.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&s.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),s.jsx("p",{children:"No hay metas definidas"}),s.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),oe=()=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),s.jsx("input",{type:"text",value:v.titulo,onChange:K=>y(Ee=>({...Ee,titulo:K.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),s.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:K=>y(Ee=>({...Ee,fecha:K.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),s.jsx("button",{onClick:J,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(K=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[s.jsx("input",{type:"checkbox",checked:K.resuelta,onChange:()=>W(K.id),className:"h-5 w-5 rounded text-amber-500"}),s.jsxs("span",{className:`flex-grow text-sm ${K.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[K.titulo," (",new Date(K.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),s.jsx("button",{onClick:()=>Z(K.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},K.id)),(!l.alertas||l.alertas.length===0)&&s.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),s.jsx("p",{children:"No hay alertas programadas"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),s.jsx("input",{type:"file",onChange:M,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),s.jsx("button",{onClick:F,disabled:!N||T,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:T?"Subiendo...":"Subir"}),N&&s.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",N.name]})]}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(K=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[s.jsxs("a",{href:K.url,download:K.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:K.nombre,children:["📎 ",K.nombre]}),s.jsx("button",{onClick:()=>X(K.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},K.id)),(!l.archivos||l.archivos.length===0)&&s.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-3xl mb-2",children:"📁"}),s.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),we=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),s.jsx("input",{value:j.motivo,onChange:K=>S(Ee=>({...Ee,motivo:K.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("textarea",{value:j.acuerdos,onChange:K=>S(Ee=>({...Ee,acuerdos:K.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("input",{value:j.asistentes,onChange:K=>S(Ee=>({...Ee,asistentes:K.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("div",{className:"text-right",children:s.jsx("button",{onClick:Y,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!j.motivo.trim()||!j.asistentes.trim(),children:"Guardar Reunión"})})]}),s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(K=>s.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.motivo}),K.acuerdos&&s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[s.jsx("strong",{children:"Acuerdos:"})," ",K.acuerdos]}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(K.fecha).toLocaleString("es-CL")," - Asistentes: ",K.asistentes]})]}),s.jsx("button",{onClick:()=>ae(K.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},K.id)),(!l.reuniones||l.reuniones.length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"👥"}),s.jsx("p",{children:"No hay reuniones registradas"}),s.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:K=>K.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),s.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),s.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:s.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(K=>s.jsx("button",{onClick:()=>o(K),className:`${i===K?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:K==="alertas"?"Alertas y Archivos":K==="seguimiento"?"Seguimiento y Metas":K},K))})}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[i==="intervenciones"&&ie(),i==="seguimiento"&&ne(),i==="reuniones"&&we(),i==="alertas"&&oe()]}),s.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[s.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),s.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},lX=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState([]),[i,o]=w.useState(!0),[l,c]=w.useState(null),[u,d]=w.useState(null),[f,h]=w.useState(""),[m,g]=w.useState(""),[x,v]=w.useState(""),[y,N]=w.useState("dashboard");w.useEffect(()=>{o(!0);const L=zet(k=>{r(k),o(!1)}),D=Vet(k=>n(k));return()=>{L(),D()}},[]);const C=async(L,D)=>{if(t.some(R=>R.nombre===L.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const k={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await $et(k),alert(`✅ ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(R){console.error("Error al agregar estudiante:",R),alert("Hubo un error al agregar al estudiante al programa.")}},T=async L=>{try{await Get(L.id,L)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},_=async L=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await qet(L),(l==null?void 0:l.id)===L&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},O=L=>{const D=S;if(D.length===0){alert("No hay datos para exportar.");return}const k=D.map(R=>{var U;return{Nombre:R.nombre,Curso:R.curso,Dificultad:R.dificultad,"N° Intervenciones":((U=R.intervenciones)==null?void 0:U.length)||0,"Alertas Pendientes":(R.alertas||[]).filter(H=>!H.resuelta).length,"Metas Cumplidas":(R.metasProgreso||[]).filter(H=>H.cumplida).length,"Total Metas":(R.metasProgreso||[]).length,"Última Actualización":R.fechaActualizacionApoyos?new Date(R.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const R=Os.json_to_sheet(k),U=Os.book_new();Os.book_append_sheet(U,R,"Estudiantes_Inclusion"),B1(U,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const R=new gr;R.text("Listado de Estudiantes - Programa de Inclusión",14,15),Ni(R,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),R.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},j=w.useMemo(()=>a.filter(L=>{var D;return L.profile===Mt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(L.curso||""))||e.profile===Mt.SUBDIRECCION)}).filter(L=>!t.some(D=>D.nombre===L.nombreCompleto)),[a,t,e]),S=w.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,D)=>L.nombre.localeCompare(D.nombre)),[t,f,m,x]),B=w.useMemo(()=>a.filter(L=>L.profile===Mt.PROFESORADO).map(L=>L.nombreCompleto).sort(),[a]);return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),s.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>N("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),s.jsx("button",{onClick:()=>N("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),i?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),s.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):s.jsxs(s.Fragment,{children:[y==="dashboard"&&s.jsxs("div",{className:"space-y-8",children:[s.jsx(Ket,{estudiantes:t}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),s.jsx("button",{onClick:()=>N("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),s.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📚"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),s.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),s.jsx(oX,{estudiantesDisponibles:j,onSelect:L=>d(L)})]})]}),y==="lista"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",S.length,")"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>O("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),s.jsx("button",{onClick:()=>O("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),s.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>h(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),s.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todos los Cursos"}),on.map(L=>s.jsx("option",{value:L,children:L},L))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),s.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todas las Dificultades"}),uk.map(L=>s.jsx("option",{value:L,children:L},L))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-blue-600",children:S.length}),s.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-green-600",children:t.length}),s.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,D)=>L+(D.alertas||[]).filter(k=>!k.resuelta).length,0)}),s.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),s.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),s.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[S.map(L=>{var D;return s.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(k=>!k.resuelta).length>0&&s.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(k=>!k.resuelta).length," alertas"]})]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[s.jsxs("span",{children:[((D=L.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),s.jsxs("span",{children:[(L.metasProgreso||[]).filter(k=>k.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&s.jsxs("span",{children:["Últ. actualización: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),s.jsx("button",{onClick:()=>_(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},L.id)}),S.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),s.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&s.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),s.jsx(oX,{estudiantesDisponibles:j,onSelect:L=>d(L)})]})]}),u&&s.jsx(Wet,{student:u,onClose:()=>d(null),onConfirm:(L,D)=>{C(L,D),d(null)}}),l&&s.jsx(Xet,{student:l,onClose:()=>c(null),onSave:T,profesores:B})]})},LD="asistencia_dual",cX=e=>{var r,a;const t=e.data();return{id:e.id,...t,fechaHora:((a=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaHora}},Yet=(e,t)=>{var l;const r=(l=jn.currentUser)==null?void 0:l.uid,a=[],n=new Map,i=()=>t(Array.from(n.values())),o=_t(pt(Ar,LD),rr("emailEstudiante","==",e),Gt("fechaHora","desc"));if(a.push(ar(o,c=>{c.docs.forEach(u=>n.set(u.id,cX(u))),i()},c=>{(c==null?void 0:c.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (email):",c)})),r){const c=_t(pt(Ar,LD),rr("estudianteId","==",r),Gt("fechaHora","desc"));a.push(ar(c,u=>{u.docs.forEach(d=>n.set(d.id,cX(d))),i()},u=>{(u==null?void 0:u.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (uid):",u)}))}return()=>a.forEach(c=>c())},Jet=async e=>{try{const t={...e,fechaHora:lr.fromDate(new Date(e.fechaHora))};await Yr(pt(Ar,LD),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},Zet=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),ett=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),ttt=({currentUser:e})=>{const[t,r]=w.useState(e.curso||""),[a,n]=w.useState([]),[i,o]=w.useState(!1),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,h]=w.useState(null),[m,g]=w.useState(null),[x,v]=w.useState(()=>{try{return sessionStorage.getItem("geo-requested")==="1"}catch{return!1}});w.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const T=Yet(e.email,_=>{n(_),c(!1)});return()=>T()},[e.email]),w.useEffect(()=>{var _;if(!window.isSecureContext){h("insecure");return}if(!("geolocation"in navigator)){h("unsupported");return}const T=navigator;(_=T==null?void 0:T.permissions)!=null&&_.query?T.permissions.query({name:"geolocation"}).then(O=>{const j=()=>{const S=O.state;h(S==="denied"&&!x?"prompt":S)};j(),O.onchange=j}).catch(()=>h(null)):h(null)},[x]);const y={enableHighAccuracy:!0,timeout:15e3,maximumAge:0},N=w.useCallback(()=>{if(o(!0),d(null),!window.isSecureContext){h("insecure"),d({text:"El sitio no está en un contexto seguro (HTTPS). La ubicación está bloqueada por el navegador.",type:"error"}),o(!1);return}if(!("geolocation"in navigator)){h("unsupported"),d({text:"Tu navegador no soporta geolocalización.",type:"error"}),o(!1);return}try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0),navigator.geolocation.getCurrentPosition(T=>{h("granted"),g(typeof T.coords.accuracy=="number"?T.coords.accuracy:null),d({text:"Ubicación habilitada. Ya puedes marcar tu asistencia.",type:"success"}),o(!1)},T=>{let _="No se pudo obtener la ubicación.";T.code===T.PERMISSION_DENIED?(h("denied"),_="Permiso de ubicación denegado. Habilítalo en la configuración del navegador."):T.code===T.POSITION_UNAVAILABLE?_="La información de ubicación no está disponible. Revisa tu conexión y GPS.":T.code===T.TIMEOUT&&(_="La solicitud de ubicación expiró. Inténtalo de nuevo con mejor señal."),d({text:_,type:"error"}),o(!1)},y)},[]),C=T=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}if(f==="insecure"){d({text:"La ubicación está bloqueada porque el sitio no está bajo HTTPS.",type:"error"});return}if(f==="unsupported"){d({text:"Tu navegador no soporta geolocalización.",type:"error"});return}if(f==="denied"&&!x){try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0)}o(!0),d(null),navigator.geolocation.getCurrentPosition(async _=>{const O={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:T,fechaHora:new Date().toISOString(),ubicacion:{latitud:_.coords.latitude,longitud:_.coords.longitude,precision:typeof _.coords.accuracy=="number"?_.coords.accuracy:void 0}};try{await Jet(O),d({text:`¡Marca de ${T} registrada con éxito!`,type:"success"}),g(typeof _.coords.accuracy=="number"?_.coords.accuracy:null)}catch(j){console.error("Error saving record to Firestore:",j),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},_=>{console.error("Geolocation error:",_);let O="No se pudo obtener la ubicación.";switch(_.code){case _.PERMISSION_DENIED:O="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.",h("denied");break;case _.POSITION_UNAVAILABLE:O="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case _.TIMEOUT:O="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:O=`Ocurrió un error desconocido al obtener la ubicación (código: ${_.code}).`;break}d({text:O,type:"error"}),o(!1)},y)};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),f==="insecure"&&s.jsx("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:"La ubicación está bloqueada porque el sitio no está bajo HTTPS. Usa la URL segura (https://) o contacta soporte."}),f==="unsupported"&&s.jsx("div",{className:"mb-4 p-3 rounded-md bg-amber-50 text-amber-800 border border-amber-200",children:"Tu navegador no soporta geolocalización. Prueba con otro navegador actualizado."}),f==="denied"&&s.jsxs("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:["Permiso de ubicación denegado. Habilítalo en los ajustes del navegador:",s.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm",children:[s.jsxs("li",{children:[s.jsx("b",{children:"Android (Chrome)"}),": Icono de candado → Permisos → Ubicación → Permitir."]}),s.jsxs("li",{children:[s.jsx("b",{children:"iOS (Safari)"}),": Ajustes → Safari → Ubicación → Permitir al usar."]})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:N,disabled:i,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Reintentar solicitud"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Si no se abre la solicitud, ajusta los permisos del sitio."})]})]}),(f==="prompt"||f===null)&&s.jsxs("div",{className:"mb-4 p-3 rounded-md bg-sky-50 text-sky-800 border border-sky-200 flex items-center justify-between gap-3",children:[s.jsx("div",{children:"Para marcar asistencia, permite el acceso a tu ubicación."}),s.jsx("button",{type:"button",onClick:N,disabled:i,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Habilitar ubicación"})]}),s.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),s.jsxs("select",{id:"curso",value:t,onChange:T=>r(T.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"-- Mi curso --"}),bg.map(T=>s.jsx("option",{value:T,children:T},T))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[s.jsx("button",{onClick:()=>C("Entrada"),disabled:i||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),s.jsx("button",{onClick:()=>C("Salida"),disabled:i||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),i&&s.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Obteniendo ubicación..."})]}),m!=null&&!i&&s.jsxs("div",{className:"text-center text-slate-500 text-sm",children:["Precisión GPS ~ ",Math.round(m)," m"]}),u&&s.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),s.jsx("div",{className:"overflow-x-auto max-h-96",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):a.length>0?a.map(T=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(T.fechaHora).toLocaleString("es-CL")}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:s.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${T.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[T.tipo==="Entrada"?s.jsx(Zet,{}):s.jsx(ett,{}),T.tipo]})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:T.curso})]},T.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},ov=e=>e?typeof e=="string"?new Date(e):e!=null&&e.toDate?e.toDate():e instanceof Date?e:new Date(e):new Date(NaN),rtt=async()=>{try{console.log("🔍 Debugging users collection...");const e=pt(Ar,"usuarios"),t=_t(e,hl(10)),r=await _r(t),a={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},n=new Set;return r.forEach(i=>{const o=i.data(),l={id:i.id,data:o,fields:Object.keys(o)};a.sampleDocs.push(l),Object.keys(o).forEach(c=>n.add(c))}),a.fieldAnalysis={allFields:Array.from(n),commonFields:Array.from(n).filter(i=>a.sampleDocs.filter(l=>i in l.data).length>a.sampleDocs.length*.5)},console.log("Users collection debug result:",a),a}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},att=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),a=new Date(e,t+1,0,23,59,59,999),n=lr.fromDate(r),i=lr.fromDate(a),o=["asistencia_dual","asistencia_empresa","asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const h=pt(Ar,f);try{const m=_t(h,rr("fechaHora",">=",n),rr("fechaHora","<=",i)),g=await _r(m);l[f]={exists:!0,hasDateField:!0,count:g.size,totalDocs:(await _r(_t(h,hl(5)))).size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=_t(h,rr(v,">=",n),rr(v,"<=",i)),N=await _r(y);l[f]={exists:!0,hasDateField:v,count:N.size,totalDocs:(await _r(_t(h,hl(5)))).size,sampleDoc:((u=N.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=_t(h,Gt("__name__"),hl(5)),y=await _r(v);l[f]={exists:!0,hasDateField:!1,count:y.size,totalDocs:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},ntt=(e,t,r,a,n)=>{try{const i=new Date(e,t,1);i.setHours(0,0,0,0);const o=new Date(e,t+1,0);o.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${i.toISOString()} y ${o.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const l=lr.fromDate(i),c=lr.fromDate(o),u=[],d=new Map,f=(n==null?void 0:n.includeAll)===!0,h=(n==null?void 0:n.limit)??1e3,m=()=>{const x=Array.from(d.values());console.log(`📊 Total registros encontrados: ${x.length}`),x.length>0&&console.log("📅 Registros por día:",x.reduce((v,y)=>{const C=ov(y.fechaHora).getDate();return v[C]=(v[C]||0)+1,v},{})),r(x)};return["asistencia_dual"].forEach(x=>{try{console.log(`🔍 Configurando suscripción para: ${x}`);const v=pt(Ar,x);if(f){const C=_t(v,Gt("fechaHora","desc"),hl(h)),T=ar(C,_=>{console.log(`📋 ${x} (histórico): ${_.size} documentos`),Array.from(d.keys()).filter(j=>j.startsWith(`${x}_`)).forEach(j=>d.delete(j)),_.forEach(j=>{const S=j.data(),B=ov(S.fechaHora),L=isNaN(B.getTime())?new Date().toISOString():B.toISOString(),D={id:j.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:L,tipo:S.tipo||"Entrada",ubicacion:S.ubicacion||{latitud:null,longitud:null},origen:x},k=`${x}_${j.id}`;d.set(k,D)}),m()},_=>{console.warn(`⚠️ Error en histórico ${x} con orderBy fechaHora:`,_);const O=_t(v,hl(h)),j=ar(O,S=>{console.log(`📋 ${x} (histórico sin orderBy): ${S.size} documentos`),Array.from(d.keys()).filter(L=>L.startsWith(`${x}_`)).forEach(L=>d.delete(L)),S.forEach(L=>{const D=L.data(),k=ov(D.fechaHora),R=isNaN(k.getTime())?new Date().toISOString():k.toISOString(),U={id:L.id,emailEstudiante:D.emailEstudiante||D.email||"",nombreEstudiante:D.nombreEstudiante||D.nombre||"",curso:D.curso||"",fechaHora:R,tipo:D.tipo||"Entrada",ubicacion:D.ubicacion||{latitud:null,longitud:null},origen:x},H=`${x}_${L.id}`;d.set(H,U)}),m()});u.push(j)});u.push(T);return}const y=_t(v,rr("fechaHora",">=",l),rr("fechaHora","<=",c),Gt("fechaHora","desc")),N=ar(y,C=>{console.log(`📋 ${x}: ${C.size} documentos encontrados con filtro`),C.size>0?(console.log(`✅ Registros encontrados en ${x}:`),Array.from(d.keys()).filter(_=>_.startsWith(`${x}_`)).forEach(_=>d.delete(_)),C.docs.forEach((_,O)=>{var j;if(O<5){const S=_.data();let B;(j=S.fechaHora)!=null&&j.toDate?B=S.fechaHora.toDate():typeof S.fechaHora=="string"?B=new Date(S.fechaHora):B=new Date,console.log(`   ${O+1}. ${S.emailEstudiante} - ${B.toLocaleString()} - ${S.tipo}`),console.log(`      📅 Fecha original: ${S.fechaHora} (tipo: ${typeof S.fechaHora})`)}}),C.forEach(_=>{const O=_.data(),j=ov(O.fechaHora),S=isNaN(j.getTime())?new Date().toISOString():j.toISOString(),B={id:_.id,emailEstudiante:O.emailEstudiante||O.email||"",nombreEstudiante:O.nombreEstudiante||O.nombre||"",curso:O.curso||"",fechaHora:S,tipo:O.tipo||"Entrada",ubicacion:O.ubicacion||{latitud:null,longitud:null},origen:x},L=`${x}_${_.id}`;d.set(L,B)}),m()):(console.log(`⚪ ${x}: sin registros en el período, limpiando y notificando vacío`),Array.from(d.keys()).filter(_=>_.startsWith(`${x}_`)).forEach(_=>d.delete(_)),m())},C=>{console.warn(`⚠️ Error con filtro en ${x}:`,C),console.log(`🔄 Intentando estrategia alternativa en ${x}...`);const T=_t(v,hl(h)),_=ar(T,j=>{if(console.log(`📋 ${x} (sin filtro): ${j.size} documentos`),j.size>0){const L=j.docs[0].data();console.log(`📄 Estructura en ${x}:`,Object.keys(L)),console.log("📄 Primer documento:",L)}const S=j.docs.filter(L=>{const D=L.data();if(!D.fechaHora)return!1;const k=ov(D.fechaHora);return k>=i&&k<=o});console.log(`📅 ${x}: ${S.length} registros después de filtro manual`),Array.from(d.keys()).filter(L=>L.startsWith(`${x}_`)).forEach(L=>d.delete(L)),S.length>0&&S.forEach(L=>{const D=L.data(),k=ov(D.fechaHora),R=isNaN(k.getTime())?new Date().toISOString():k.toISOString(),U={id:L.id,emailEstudiante:D.emailEstudiante||D.email||"",nombreEstudiante:D.nombreEstudiante||D.nombre||"",curso:D.curso||"",fechaHora:R,tipo:D.tipo||"Entrada",ubicacion:D.ubicacion||null},H=`${x}_${L.id}`;d.set(H,U)}),m()}),O=u.findIndex(j=>j===N);O>=0?u[O]=_:u.push(_)});u.push(N)}catch(v){console.warn(`❌ Error configurando ${x}:`,v)}}),()=>{u.forEach(x=>{try{x()}catch(v){console.warn("Error unsubscribing:",v)}})}}catch(i){return console.error("Error setting up subscribeToAsistenciaByMonth:",i),a&&a(new Error(`Error al configurar suscripción: ${i instanceof Error?i.message:"Error desconocido"}`)),()=>{}}},stt=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios"],a=[],n=new Map,i=()=>{const l=Array.from(n.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Mt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=pt(Ar,l),u=_t(c),d=ar(u,f=>{Array.from(n.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>n.delete(m)),f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${l}`),o=!0,f.forEach(m=>{try{const g=m.data(),x=g.email||g.userEmail||g.mail||g.correo||"",v=g.nombreCompleto||g.displayName||g.name||g.nombre||g.fullName||"",y=g.curso||g.course||g.class||g.grade||"";let N=g.profile||g.role||g.tipo||g.userType||Mt.ESTUDIANTE;if(typeof N=="string"){const _=N.toLowerCase();_.includes("estudiante")||_.includes("student")||_.includes("alumno")?N=Mt.ESTUDIANTE:_.includes("coordinador")||_.includes("coordinator")?N=Mt.COORDINACION_TP:_.includes("profesor")||_.includes("teacher")||_.includes("docente")?N=Mt.PROFESORADO:(_.includes("subdireccion")||_.includes("subdir"))&&(N=Mt.COORDINACION_TP)}const C={id:m.id,email:x,nombreCompleto:v,curso:y,profile:N},T=`${l}_${m.id}`;n.set(T,C)}catch(g){console.warn(`Error procesando documento ${m.id} en ${l}:`,g)}})):console.log(`⚪ Colección ${l}: vacía`),i()},f=>{console.warn(`⚠️ Error en colección ${l}:`,f)});a.push(d)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{a.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},itt=(e,t)=>{try{console.log("Setting up users subscription...");const r=pt(Ar,"usuarios"),a=_t(r);return ar(a,i=>{console.log(`Raw users snapshot size: ${i.size}`);const o=[];i.forEach(d=>{try{const f=d.data();console.log(`Processing user doc ${d.id}:`,f);const h=f.email||f.userEmail||f.mail||"",m=f.nombreCompleto||f.displayName||f.name||f.nombre||"",g=f.curso||f.course||f.class||"";let x=f.profile||f.role||f.tipo||Mt.ESTUDIANTE;if(typeof x=="string"){const y=x.toLowerCase();y.includes("estudiante")||y.includes("student")||y.includes("alumno")?x=Mt.ESTUDIANTE:y.includes("coordinador")||y.includes("coordinator")?x=Mt.COORDINACION_TP:y.includes("profesor")||y.includes("teacher")||y.includes("docente")?x=Mt.PROFESORADO:(y.includes("subdireccion")||y.includes("subdir"))&&(x=Mt.COORDINACION_TP)}const v={id:d.id,email:h,nombreCompleto:m,curso:g,profile:x};o.push(v)}catch(f){console.warn(`Error processing user document ${d.id}:`,f)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===Mt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},i=>{console.error("Error in subscribeToAllUsers:",i),t&&t(new Error(`Error al cargar usuarios: ${i.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},cj=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},ott=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),ltt=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),ctt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,l]=w.useState(null),[c,u]=w.useState(new Date),[d,f]=w.useState("todos"),[h,m]=w.useState(""),[g,x]=w.useState(!1);w.useEffect(()=>{i(!0),l(null);const B=c.getFullYear(),L=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",B,"Mes:",L);let D=!1,k=!1;const R=()=>{D&&k&&(console.log("=== CARGA COMPLETA ==="),i(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const H=pt(Ar,"asistencia_dual"),Q=_t(H,hl(5)),V=await _r(Q);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${V.size}`),V.size>0)V.docs.forEach((G,J)=>{const W=G.data();console.log(`   ${J+1}. ${G.id.slice(0,8)} - ${W.emailEstudiante} - ${W.tipo}`),console.log("      Fecha original:",W.fechaHora),console.log("      Todos los campos:",Object.keys(W))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const G=["asistenciaEmpresa","asistencia_empresa"];for(const J of G)try{const W=pt(Ar,J),Z=_t(W,hl(3)),M=await _r(Z);if(console.log(`📋 ${J}: ${M.size} documentos`),M.size>0){const F=M.docs[0].data();console.log("   Estructura:",Object.keys(F)),console.log("   Email:",F.emailEstudiante||F.email),console.log("   Fecha:",F.fechaHora||F.fecha)}}catch(W){console.log(`❌ ${J}: ${W instanceof Error?W.message:"Error"}`)}}}catch(H){console.error("❌ Error en prueba directa:",H),H.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):H.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),att(B,L).then(H=>{console.log("🔍 Debug info for collections:",H),Object.entries(H).forEach(([Q,V])=>{if(V.exists&&V.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${Q.toUpperCase()}:`),console.log(`   📊 Total documentos: ${V.totalDocs}`),console.log(`   📅 Documentos del período: ${V.count}`),console.log(`   🔑 Campo de fecha: ${V.hasDateField}`),V.sampleDoc){console.log("   📄 Documento ejemplo:",V.sampleDoc);const G=V.sampleDoc,J=G.emailEstudiante||G.email||G.userEmail||G.correo||"NO ENCONTRADO",W=G.tipo||G.type||G.action||G.tipoRegistro||"NO ENCONTRADO",Z=G.fechaHora||G.fecha||G.timestamp||G.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${J}`),console.log(`   📝 Tipo registro: ${W}`),console.log(`   📅 Fecha: ${Z}`),console.log("   🗂️ Todos los campos:",Object.keys(G))}V.filteredDocs&&V.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",V.filteredDocs.length),V.filteredDocs.forEach((G,J)=>{J<3&&console.log(`      ${J+1}. ID: ${G.id}`,G.data)}))}else V.exists?console.log(`⚪ Colección ${Q}: vacía`):console.log(`❌ Colección ${Q}: no existe`)})}).catch(H=>{console.error("Debug error:",H)}),rtt().then(H=>{console.log("🔍 Debug info for users:",H),(!H.exists||"totalDocs"in H&&H.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async V=>{var G;try{const J=pt(Ar,V),W=_t(J,hl(5)),Z=await _r(W);Z.size>0?(console.log(`✅ Encontrada colección alternativa: ${V} con ${Z.size} documentos`),console.log("Documento muestra:",(G=Z.docs[0])==null?void 0:G.data())):console.log(`❌ Colección ${V}: vacía`)}catch{console.log(`❌ Colección ${V}: no existe`)}}))}).catch(H=>{console.error("Users debug error:",H)});try{console.log("Configurando suscripción a asistencia...");let H=ntt(B,L,G=>{if(console.log("✅ Received registros:",G.length),G.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",G[0]);const J=[...new Set(G.map(Y=>Y.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",J);const W=[...new Set(G.map(Y=>Y.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",W);const Z=G.reduce((Y,ae)=>{const le=new Date(ae.fechaHora).getDate();return Y[le]||(Y[le]=[]),Y[le].push(ae),Y},{});console.log("📅 Registros por día del mes:",Object.keys(Z).map(Y=>({dia:parseInt(Y),cantidad:Z[parseInt(Y)].length})));const M=r.map(Y=>Y.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",M);const F=J.filter(Y=>M.includes(Y)),X=J.filter(Y=>!M.includes(Y));console.log("✅ Emails que coinciden:",F),console.log("❌ Emails que NO coinciden:",X)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(G),D=!0,R()},G=>{console.error("❌ Error fetching asistencia:",G),l("Error al cargar datos de asistencia: "+G.message),D=!0,R()},{includeAll:g});console.log("Configurando suscripción a usuarios...");let Q=null,V=null;return Q=stt(G=>{if(console.log("✅ Received users (multi-collection):",G.length),G.length>0){console.log("Sample user:",G[0]);const J=G.filter(W=>W.profile===Mt.ESTUDIANTE&&W.curso);console.log("Dual students found:",J.length),J.forEach(W=>{console.log(`- ${W.nombreCompleto} (${W.curso}) - ${W.email}`)})}a(G),k=!0,R()},G=>{console.error("❌ Error fetching users (multi-collection):",G),console.log("🔄 Intentando con función original de usuarios..."),V=itt(J=>{console.log("✅ Received users (fallback):",J.length),a(J),k=!0,R()},J=>{console.error("❌ Error en fallback también:",J),l("Error al cargar estudiantes: "+G.message),k=!0,R()})}),setTimeout(async()=>{if(!k&&r.length===0)try{console.log("⏳ Timeout de usuarios: aplicando fallback getAllUsersFromAlt()...");const G=await xx();G.length>0?(console.log(`✅ Fallback cargó ${G.length} usuarios desde colección "usuarios"`),a(G),k=!0,R()):(console.warn('⚠️ Fallback no encontró usuarios en "usuarios"'),k=!0,R())}catch(G){console.error("❌ Error en fallback getAllUsersFromAlt:",G),k=!0,R()}},4e3),()=>{console.log("Limpiando suscripciones..."),H&&H(),Q&&Q(),V&&V()}}catch(H){console.error("❌ Error setting up subscriptions:",H),l("Error al inicializar conexiones: "+(H instanceof Error?H.message:"Error desconocido")),i(!1)}},[c,g]);const{monthDays:v,monthName:y,year:N}=w.useMemo(()=>{const B=c.getFullYear(),L=c.getMonth();return{monthDays:new Date(B,L+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:B}},[c]),C=w.useMemo(()=>{let B=r.filter(L=>L.profile===Mt.ESTUDIANTE&&L.curso&&bg.includes(cj(L.curso)));if(d!=="todos"&&(B=B.filter(L=>cj(L.curso||"")===d)),h&&(B=B.filter(L=>L.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const L=[...new Set(e.map(R=>R.emailEstudiante).filter(R=>!!R))],D=B.map(R=>R.email),k=L.filter(R=>!D.includes(R));if(k.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",k);const U=k.map(H=>{const Q=e.find(V=>V.emailEstudiante===H);return{id:H,email:H,nombreCompleto:(Q==null?void 0:Q.nombreEstudiante)||H.split("@")[0],curso:(Q==null?void 0:Q.curso)||"3ºC",profile:Mt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(H=>{const Q=d==="todos"||cj(H.curso)===d,V=!h||H.nombreCompleto.toLowerCase().includes(h.toLowerCase());return Q&&V&&bg.includes(cj(H.curso))});B=[...B,...U]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${B.length}`),B.forEach(L=>{console.log(`   - ${L.nombreCompleto} (${L.curso}) - ${L.email}`)}),B.sort((L,D)=>L.nombreCompleto.localeCompare(D.nombreCompleto))},[r,d,h,e]),T=w.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${C.length}`);const B=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),B):(e.forEach((L,D)=>{const k=L.emailEstudiante;if(!k)return;let R;if(L.fechaHora instanceof Date)R=L.fechaHora;else if(L.fechaHora&&typeof L.fechaHora=="object"&&"toDate"in L.fechaHora)R=L.fechaHora.toDate();else if(typeof L.fechaHora=="string")R=new Date(L.fechaHora);else{console.warn("Fecha no válida en registro:",L);return}const U=R.getDate(),H=R.getMonth(),Q=R.getFullYear();D<3&&console.log(`📅 Registro ${D+1}:`,{email:k,tipo:L.tipo,fechaOriginal:L.fechaHora,fechaProcesada:R.toLocaleString(),año:Q,mes:H,día:U}),B.has(k)||B.set(k,new Map);const V=B.get(k);V.has(U)||V.set(U,{});const G=V.get(U);L.tipo==="Entrada"?(!G.entrada||R<new Date(G.entrada.fechaHora))&&(G.entrada=L):L.tipo==="Salida"&&(!G.salida||R>new Date(G.salida.fechaHora))&&(G.salida=L)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:B.size,estudiantes:Array.from(B.keys()),registrosPorEstudiante:Array.from(B.entries()).map(([L,D])=>({email:L,dias:Array.from(D.keys()),totalRegistros:Array.from(D.values()).reduce((k,R)=>k+(R.entrada?1:0)+(R.salida?1:0),0)}))}),B)},[e]),_=w.useMemo(()=>{if(!e.length)return 0;const B=c.getFullYear(),L=c.getMonth();return e.reduce((D,k)=>{let R=null;return k.fechaHora instanceof Date?R=k.fechaHora:k.fechaHora&&typeof k.fechaHora=="object"&&"toDate"in k.fechaHora?R=k.fechaHora.toDate():typeof k.fechaHora=="string"&&(R=new Date(k.fechaHora)),!R||isNaN(R.getTime())?D:R.getFullYear()===B&&R.getMonth()===L?D+1:D},0)},[e,c]),O=B=>{u(L=>{const D=new Date(L);return D.setMonth(D.getMonth()+B),D})},j=B=>{B!=null&&B.latitud&&(B!=null&&B.longitud)&&window.open(`https://www.google.com/maps?q=${B.latitud},${B.longitud}`,"_blank")},S=["D","L","M","M","J","V","S"];return o?s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:s.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:o})}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[s.jsx("button",{onClick:()=>O(-1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes anterior",children:"←"}),s.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${N}`}),s.jsx("button",{onClick:()=>O(1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes siguiente",children:"→"})]}),s.jsxs("label",{className:"flex items-center gap-2 justify-center md:justify-start",children:[s.jsx("input",{type:"checkbox",checked:g,onChange:B=>x(B.target.checked),disabled:n}),s.jsx("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Mostrar todo"})]}),s.jsxs("select",{value:d,onChange:B=>f(B.target.value),disabled:n,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsxs("div",{className:"text-center md:text-right text-sm text-slate-600 dark:text-slate-300",children:[s.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50 mr-2",children:["Estudiantes: ",C.length]}),s.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50",children:["Registros del período: ",_]})]}),s.jsx("option",{value:"todos",children:"Todos los Cursos"}),bg.map(B=>s.jsx("option",{value:B,children:B},B))]}),s.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:B=>m(B.target.value),disabled:n,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n?s.jsxs("div",{className:"text-center text-amber-600 py-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),s.jsx("div",{children:"Cargando datos de asistencia..."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:v},(B,L)=>{const k=new Date(N,c.getMonth(),L+1).getDay(),R=k===0||k===6;return s.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[s.jsx("div",{className:"font-semibold",children:S[k]}),s.jsx("div",{children:L+1})]},L)})]})}),s.jsx("tbody",{children:C.length>0?C.map(B=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[s.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:B.nombreCompleto}),Array.from({length:v},(L,D)=>{var Q;const k=D+1,R=(Q=T.get(B.email))==null?void 0:Q.get(k),U=new Date(N,c.getMonth(),D+1),H=U.getDay()===0||U.getDay()===6;return B.email==="alexis.robles@industrialderecoleta.cl"&&k===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:B.email,day:k,hasDataForStudent:T.has(B.email),studentDayRecords:R,allAttendanceKeys:Array.from(T.keys()),daysForStudent:T.get(B.email)?Array.from(T.get(B.email).keys()):[]}),s.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${H?"bg-slate-100 dark:bg-slate-700/50":""}`,children:s.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(R==null?void 0:R.entrada)&&s.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var V;return j((V=R.entrada)==null?void 0:V.ubicacion)},children:[s.jsx(ott,{}),s.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(R==null?void 0:R.salida)&&s.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var V;return j((V=R.salida)==null?void 0:V.ubicacion)},children:[s.jsx(ltt,{}),s.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},k)})]},B.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:v+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},R4="evaluaciones_formativas",L4="calificaciones_formativas",g7="trabajos_grupales_formativos",utt="usuarios",x7=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((i=(n=t.fechaPresentacion)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString().split("T")[0])||t.fechaPresentacion}},dtt=(e,t,r)=>{const a=_t(pt(ot,R4),rr("curso","==",e),rr("asignatura","==",t),Gt("fecha","asc"));return ar(a,n=>{r(n.docs.map(i=>x7(i)))},n=>{console.error("Error al suscribirse a evaluaciones:",n),r([])})},ftt=async(e,t)=>{const r=up(ot),a=$t(pt(ot,R4));r.set(a,{...e,fecha:lr.fromDate(new Date(e.fecha+"T00:00:00"))});const n=$t(ot,L4,a.id);return r.set(n,t),await r.commit(),a.id},Att=async(e,t)=>{const r=$t(ot,R4,e);await ii(r,t,{merge:!0})},htt=async e=>{const t=up(ot);t.delete($t(ot,R4,e)),t.delete($t(ot,L4,e)),await t.commit()},mtt=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(a=>{const n=$t(ot,L4,a);return ar(n,i=>{i.exists()&&t({[a]:i.data()})})});return()=>r.forEach(a=>a())},ptt=async(e,t)=>{const r=$t(ot,L4,e);await ii(r,t,{merge:!0})},gtt=(e,t,r)=>{const a=_t(pt(ot,g7),rr("curso","==",e),rr("asignatura","==",t),Gt("fechaPresentacion","desc"));return ar(a,n=>{r(n.docs.map(i=>x7(i)))},n=>{console.error("Error al suscribirse a trabajos grupales:",n),r([])})},xtt=async e=>{const t={...e,fechaPresentacion:lr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Yr(pt(ot,g7),t)},vtt=async(e,t)=>{const r=$t(ot,g7,e);await ii(r,t,{merge:!0})},btt=e=>{const t=_t(pt(ot,utt));return ar(t,r=>{e(r.docs.map(a=>x7(a)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Zue=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Hv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},ede=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},ytt=({cursos:e,onSelect:t})=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const a=ede(r);return s.jsxs("div",{className:"space-y-2 text-center",children:[s.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${a.bg} ${a.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[s.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${a.spine} rounded-l-md`}),s.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${a.text}`,children:[s.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),s.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),s.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):s.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[s.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),wtt=({curso:e,asignaturas:t,onSelect:r,onBack:a})=>{const n=ede(e);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),s.jsxs("div",{className:`p-2 rounded-md ${n.bg} ${n.text} font-bold`,children:["Libro de Clases: ",e]})]}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(i=>s.jsxs("button",{onClick:()=>r(i),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[s.jsx("span",{className:"text-2xl",children:Hv[i]||Hv.Default}),s.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:i})]},i))}):s.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[s.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Ntt=({curso:e,asignatura:t,allUsers:r,onBack:a})=>{const[n,i]=w.useState([]),[o,l]=w.useState({}),[c,u]=w.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=w.useState(null),[h,m]=w.useState(null),[g,x]=w.useState(!0),v=w.useMemo(()=>r.filter(S=>S.profile===Mt.ESTUDIANTE&&Zue(S.curso||"")===e).map(S=>S.nombreCompleto).sort((S,B)=>S.localeCompare(B)),[r,e]);w.useEffect(()=>{x(!0);const S=dtt(e,t,B=>{i(B);const L=B.map(k=>k.id),D=mtt(L,k=>{l(R=>({...R,...k}))});return x(!1),()=>D()});return()=>S()},[e,t]);const y=S=>{const{name:B,value:L}=S.target;d?f(D=>D?{...D,[B]:L}:null):u(D=>({...D,[B]:L}))},N=async S=>{if(S.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},L=v.reduce((D,k)=>(D[k]="trabajado",D),{});try{await ftt(B,L),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),m("No se pudo crear la evaluación.")}},C=(S,B)=>{var R;const L=((R=o[S])==null?void 0:R[B])||"trabajado";let D;L==="trabajado"?D="no trabajado":L==="no trabajado"?D="ausente":D="trabajado";const k={...o,[S]:{...o[S]||{},[B]:D}};l(k),ptt(S,{[B]:D}).catch(U=>{console.error("Error updating grade:",U)})},T=S=>f(S),_=async()=>{if(d)try{await Att(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(S){console.error(S),m("No se pudo guardar la edición.")}},O=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await htt(S)}catch(B){console.error(B),m("No se pudo eliminar la evaluación.")}},j=w.useCallback(S=>{if(n.length===0)return"-";let B=0,L=0;return n.forEach(D=>{var R;const k=(R=o[D.id])==null?void 0:R[S];k==="trabajado"?(B+=7,L++):k==="no trabajado"&&(B+=2,L++)}),L===0?"-":(B/L).toFixed(1)},[o,n]);return g?s.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),s.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),s.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),s.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),s.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx("div",{className:"w-full",children:s.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&s.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),n.map(S=>s.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),s.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),s.jsx("button",{onClick:_,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"font-semibold",children:S.nombreActividad}),s.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("button",{onClick:()=>T(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),s.jsx("button",{onClick:()=>O(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),s.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(S=>s.jsxs("tr",{children:[s.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),n.map(B=>{var k;const L=(k=o[B.id])==null?void 0:k[S];let D;return L==="trabajado"?D=Hv[t]||Hv.Default:L==="no trabajado"?D="❌":L==="ausente"?D="A":D=Hv[t]||Hv.Default,s.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:s.jsx("button",{onClick:()=>C(B.id,S),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},B.id)}),s.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:j(S)})]},S))})]})})]})},Ctt=({curso:e,asignatura:t,allUsers:r,onBack:a})=>{const[n,i]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=w.useState({}),[h,m]=w.useState(2),g=w.useMemo(()=>r.filter(T=>T.profile===Mt.ESTUDIANTE&&Zue(T.curso||"")===e).sort((T,_)=>T.nombreCompleto.localeCompare(_.nombreCompleto)),[r,e]);w.useEffect(()=>{const T=gtt(e,t,i);return()=>T()},[e,t]),w.useEffect(()=>{if(o){const T={};o.grupos.forEach(_=>{_.integrantes.forEach(O=>{T[O.nombre]={groupNumber:String(_.numero),role:O.rol||""}})}),f(T)}else f({})},[o]);const x=async T=>{if(T.preventDefault(),!c.nombre.trim())return;const _={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await xtt(_),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(O){console.error(O),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const T=new Map;for(const O of g){const j=d[O.nombreCompleto];if(j&&j.groupNumber){const S=parseInt(j.groupNumber,10);isNaN(S)||(T.has(S)||T.set(S,[]),T.get(S).push({nombre:O.nombreCompleto,rol:j.role||""}))}}const _=Array.from(T.entries()).map(([O,j])=>({numero:O,integrantes:j})).sort((O,j)=>O.numero-j.numero);try{await vtt(o.id,{grupos:_}),alert("Grupos guardados con éxito.")}catch(O){console.error(O),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const T=[...g].sort(()=>Math.random()-.5),_={};T.forEach((O,j)=>{var S;_[O.nombreCompleto]={groupNumber:String(j%h+1),role:((S=d[O.nombreCompleto])==null?void 0:S.role)||""}}),f(_)},N=(T,_,O)=>{f(j=>({...j,[T]:{...j[T]||{groupNumber:"",role:""},[_]:O}}))},C=w.useMemo(()=>{const T=new Map;return Object.entries(d).forEach(([_,O])=>{O.groupNumber&&(T.has(O.groupNumber)||T.set(O.groupNumber,[]),T.get(O.groupNumber).push({nombre:_,rol:O.role}))}),Array.from(T.entries()).sort((_,O)=>parseInt(_[0])-parseInt(O[0]))},[d]);return o?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),s.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),s.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"md:col-span-1 space-y-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",value:h,onChange:T=>m(parseInt(T.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),s.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),s.jsx("table",{className:"w-full text-sm",children:s.jsx("tbody",{children:g.map(T=>{var _;return s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-2",children:T.nombreCompleto}),s.jsx("td",{className:"py-1",children:s.jsx("input",{type:"number",value:((_=d[T.nombreCompleto])==null?void 0:_.groupNumber)||"",onChange:O=>N(T.nombreCompleto,"groupNumber",O.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},T.id)})})})]})]}),s.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:C.map(([T,_])=>s.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[s.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",T]}),s.jsx("ul",{className:"space-y-2",children:_.map(O=>s.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"flex-1 truncate",children:O.nombre}),s.jsxs("select",{value:O.rol||"",onChange:j=>N(O.nombre,"role",j.target.value),className:"p-1 border rounded text-xs w-32",children:[s.jsx("option",{value:"",children:"-- Asignar Rol --"}),Sre.map(j=>s.jsx("option",{value:j,children:j},j))]})]},O.nombre))})]},T))})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),s.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),s.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsx("input",{value:c.nombre,onChange:T=>u({...c,nombre:T.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),s.jsx("input",{type:"date",value:c.fecha,onChange:T=>u({...c,fecha:T.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),n.map(T=>s.jsxs("button",{onClick:()=>l(T),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[s.jsx("p",{className:"font-bold",children:T.nombreActividad}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",T.fechaPresentacion]})]},T.id))]})]})},Ett=({currentUser:e})=>{const[t,r]=w.useState("calificaciones"),[a,n]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState([]),[u,d]=w.useState(!0);w.useEffect(()=>{d(!0);const x=btt(v=>{c(v),d(!1)});return()=>x()},[]);const f=w.useMemo(()=>e.cursos||[],[e.cursos]),h=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>s.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return s.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!a)return s.jsx(ytt,{cursos:f,onSelect:n});if(!i)return s.jsx(wtt,{curso:a,asignaturas:h,onSelect:o,onBack:()=>n(null)});if(t==="calificaciones")return s.jsx(Ntt,{curso:a,asignatura:i,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return s.jsx(Ctt,{curso:a,asignatura:i,allUsers:l,onBack:()=>o(null)})};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),s.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),s.jsx("div",{className:"mt-6",children:g()})]})};function jtt(e){return e.map(t=>{const[r,a]=t.minuto.split("-").map(Number),n=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(a-r):0;return{minuto:r,participacion:Math.min(100,n*10)}})}function ktt(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[a,n]of Object.entries(r)){const i=e.match(n);t.set(a,i?i.length:0)}return t}async function Stt(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=jtt(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const a=new Map;let n=0;(o=e.detallesObservacion)==null||o.forEach(l=>{ktt(l.accionesDocente).forEach((u,d)=>{a.set(d,(a.get(d)||0)+u)}),n+=l.accionesDocente.length}),a.forEach((l,c)=>{const u=n>0?l/n*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const i=[...a.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=i.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=i.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const _tt=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[a,n]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(!1),u=e.length,d=Object.values(t).reduce((y,N)=>y+N.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,N)=>{const C=new Date(N.fecha).toLocaleDateString("es-ES",{month:"long"});return y[C]=(y[C]||0)+1,y},{}),g=f.reduce((y,N)=>(N.asignaturaInfo&&(y[N.asignaturaInfo]=(y[N.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,N])=>N-y).slice(0,5);f.reduce((y,N)=>{if(!N.horaInicio||!N.horaTermino)return y;const C=new Date("2000/01/01 "+N.horaInicio),_=(new Date("2000/01/01 "+N.horaTermino).getTime()-C.getTime())/(1e3*60);return y+_},0)/f.length;const v=f.filter(y=>{var N,C,T;return((N=y.retroalimentacion)==null?void 0:N.exito)&&((C=y.retroalimentacion)==null?void 0:C.modelo)&&((T=y.retroalimentacion)==null?void 0:T.foco)}).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:s.jsx(Pl,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:s.jsx(tu,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(Ei,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:s.jsx(cn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Io,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,N])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${N/d*100}%`}})})]})},y))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(_w,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),s.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(i==null?void 0:i.id)||"",onChange:y=>{const N=f.find(C=>C.id===y.target.value);o(N||null)},children:[s.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>s.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),i&&!a&&s.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(C=>C.docenteInfo===i.docenteInfo&&C.id!==i.id),N=await Stt(i,y);n(N)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_w,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),a&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),s.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[a.stats.participacion_promedio.toFixed(1),"%"]})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),s.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[a.stats.min_interaccion,"min / ",a.stats.min_explicacion,"min"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[s.jsx(cn,{className:"w-4 h-4"})," Fortalezas"]}),s.jsx("ul",{className:"space-y-2",children:a.summary.fortalezas.map((y,N)=>s.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},N))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[s.jsx(Fb,{className:"w-4 h-4"})," Áreas de Mejora"]}),s.jsx("ul",{className:"space-y-2",children:a.summary.mejoras.map((y,N)=>s.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},N))})]})]}),a.alerts.length>0&&s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[s.jsx(vc,{className:"w-4 h-4"})," Alertas"]}),s.jsx("ul",{className:"space-y-2",children:a.alerts.map((y,N)=>s.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},N))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[s.jsx(lk,{className:"w-4 h-4"})," Recomendaciones"]}),s.jsx("ul",{className:"space-y-2",children:a.summary.recomendaciones.map((y,N)=>s.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},N))})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Ds,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),s.jsx("div",{className:"space-y-2",children:x.map(([y,N])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${N/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(lk,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),s.jsx("tbody",{children:f.sort((y,N)=>new Date(N.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var N;return s.jsxs("tr",{className:"border-t dark:border-slate-700",children:[s.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),s.jsx("td",{className:"py-2 px-3",children:(N=y.retroalimentacion)!=null&&N.exito?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[s.jsx(cn,{className:"w-3 h-3"})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[s.jsx(Fb,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},tde=ZR(),G1="acompanamientos",lf="ciclos_opr",cf=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},rde=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,a=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+a.toLowerCase()},Btt=(e,t,r)=>{const a=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),n=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),i=rde(r);return`videos_opr/${a}/${n}/${i}`},Ttt=async(e,t,r)=>{try{if(!Ow.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const a=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],n=500*1024*1024;if(e.size>n)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(n/1024/1024).toFixed(0)}MB`);if(!a.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let i="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],h=o.slice(3).join("/");i=Btt(d,f,h)}else{const d=Date.now(),f=rde(e.name);i=`videos_opr/general/${d}_${f}`}const l=l0(tde,i),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:Ow.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=cre(l,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await w1(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(a){const n=(a==null?void 0:a.message)||"Error inesperado al procesar el archivo.";throw new Error(n)}},v7=async e=>{try{const t=l0(tde,e),{items:r,prefixes:a}=await P2e(t);await Promise.all(r.map(n=>JR(n))),await Promise.all(a.map(n=>v7(n.fullPath)))}catch{}},Itt=async()=>{try{const e=_t(pt(ot,G1),Gt("fecha","desc"));return(await _r(e)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:cf(n==null?void 0:n.fecha)}}).sort((a,n)=>a.fecha<n.fecha?1:a.fecha>n.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},Ott=async e=>{var t,r;try{const a=e.docenteEmailLower||((r=(t=Ow.currentUser)==null?void 0:t.email)==null?void 0:r.toLowerCase())||void 0,n={...e,docenteEmailLower:a,fecha:lr.fromDate(new Date(e.fecha)),fechaCreacion:lr.now()},i=await Yr(pt(ot,G1),n);return{...e,id:i.id,fecha:cf(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},uX=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:lr.fromDate(new Date(t.fecha))}:{},fechaModificacion:lr.now()};await Ui($t(ot,G1,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},Ftt=async e=>{try{const t=_t(pt(ot,lf),rr("acompanamientoId","==",e)),r=await _r(t),a=up(ot);r.forEach(n=>a.delete($t(ot,lf,n.id))),await a.commit(),await v7(`videos_opr/${e}`),await Ja($t(ot,G1,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},dX=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:lr.fromDate(new Date(e.fecha)),fechaCreacion:lr.now(),...e.docenteEmailLower?{docenteEmailLower:e.docenteEmailLower}:{}};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:lr.fromDate(new Date(e.seguimiento.fecha))});const a=await Yr(pt(ot,lf),r);return{...e,id:a.id,acompanamientoId:String(e.acompanamientoId||""),fecha:cf(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},Dtt=async(e,t)=>{var r;try{const a={...t};t.fecha&&(a.fecha=lr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(a.seguimiento={...t.seguimiento,fecha:lr.fromDate(new Date(t.seguimiento.fecha))}),a.fechaModificacion=lr.now(),await Ui($t(ot,lf,e),a)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},MD=async e=>{try{const t=_t(pt(ot,lf),rr("acompanamientoId","==",e),Gt("fecha","desc"));return(await _r(t)).docs.map(n=>{var l;const i=n.data(),o={id:n.id,...i,fecha:cf(i==null?void 0:i.fecha)};return(l=i==null?void 0:i.seguimiento)!=null&&l.fecha&&(o.seguimiento={...i.seguimiento,fecha:cf(i.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},ade=async()=>{try{const e=_t(pt(ot,lf),rr("acompanamientoId","==",""),Gt("fecha","desc"));return(await _r(e)).docs.map(a=>{var o;const n=a.data(),i={id:a.id,...n,fecha:cf(n==null?void 0:n.fecha)};return(o=n==null?void 0:n.seguimiento)!=null&&o.fecha&&(i.seguimiento={...n.seguimiento,fecha:cf(n.seguimiento.fecha)}),i})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},Ptt=(e,t,r)=>{const a=_t(pt(ot,lf),rr("acompanamientoId","==",e),Gt("fecha","desc"));return ar(a,n=>{const i=n.docs.map(o=>{var u;const l=o.data(),c={id:o.id,...l,fecha:cf(l==null?void 0:l.fecha)};return(u=l==null?void 0:l.seguimiento)!=null&&u.fecha&&(c.seguimiento={...l.seguimiento,fecha:cf(l.seguimiento.fecha)}),c});t(i)},n=>r==null?void 0:r(n))},UD=async e=>{try{const t=await $h($t(ot,lf,e));if(!t.exists())return;const r=t.data(),a=(r==null?void 0:r.acompanamientoId)||"general";await v7(`videos_opr/${a}/${e}`),await Ja($t(ot,lf,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},Rtt=async e=>{const t=e.id;if(!t)return{updated:0,total:0};const r=_t(pt(ot,lf),rr("acompanamientoId","==",t)),a=await _r(r);if(a.empty)return{updated:0,total:0};const n=up(ot);let i=0;return a.forEach(o=>{const l=o.data(),c={};!l.docenteEmailLower&&e.docenteEmailLower&&(c.docenteEmailLower=e.docenteEmailLower),!l.docenteInfo&&e.docente&&(c.docenteInfo=e.docente),!l.docente&&e.docente&&(c.docente=e.docente),!l.cursoInfo&&e.curso&&(c.cursoInfo=e.curso),!l.asignaturaInfo&&e.asignatura&&(c.asignaturaInfo=e.asignatura),Object.keys(c).length>0&&(i++,n.update($t(ot,lf,o.id),c))}),i>0&&await n.commit(),{updated:i,total:a.size}},fX=async e=>{try{const t=_t(pt(ot,G1),rr("docente","==",e),Gt("fecha","desc"));return(await _r(t)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:cf(n==null?void 0:n.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},Ltt=async e=>{try{const t=_t(pt(ot,G1),rr("docenteEmailLower","==",e),Gt("fecha","desc"));return(await _r(t)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:cf(n==null?void 0:n.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},Mtt=async e=>{try{const t=_t(pt(ot,"rubricas_personalizadas"),rr("docente","==",e)),r=await _r(t);if(r.empty)return null;const a=r.docs[0].data();return(a==null?void 0:a.rubrica)??null}catch{return null}},Utt=async()=>await xx(),Qtt=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:a,onRemove:n,isUploading:i,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=w.useState(!1),[h,m]=w.useState(!1),[g,x]=w.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?f(!0):j.type==="dragleave"&&f(!1)},N=j=>{if(j.preventDefault(),j.stopPropagation(),f(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&!i){const S=j.dataTransfer.files[0];T(S)}},C=j=>{if(j.target.files&&j.target.files[0]&&!i){const S=j.target.files[0];T(S)}},T=j=>{if(j.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(j.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(j)},_=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",O=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!a&&!i&&s.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"url",value:g,onChange:j=>x(j.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),a?s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[s.jsx(cn,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:a.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:a.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),s.jsx("button",{type:"button",onClick:n,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:s.jsx(Da,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":i?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${i?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:N,onClick:()=>{var j;return!i&&((j=document.getElementById(v))==null?void 0:j.click())},children:[s.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:i?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?s.jsxs("div",{className:"text-center",children:[s.jsx(vc,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(E1,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),s.jsx("input",{id:v,type:"file",onChange:C,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:i,accept:o,style:{display:"none"}})]}),i&&s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:`${_()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[s.jsx(vc,{className:"w-4 h-4 text-red-500"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},Htt=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:a,profesores:n})=>{const[i,o]=w.useState(!1),[l,c]=w.useState({}),[u,d]=w.useState({}),[f,h]=w.useState({}),[m,g]=w.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=w.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=w.useState(t||x);w.useEffect(()=>{t&&(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""}))},[t]);const N=k=>{const{name:R,value:U}=k.target,H=R.split(".");H.length>1?y(Q=>{const V=JSON.parse(JSON.stringify(Q));let G=V;for(let J=0;J<H.length-1;J++)G=G[H[J]];return G[H[H.length-1]]=U,V}):y(Q=>({...Q,[R]:U}))},C=(k,R,U)=>{y(H=>({...H,detallesObservacion:H.detallesObservacion.map(Q=>Q.id===k?{...Q,[R]:U}:Q)}))},T=()=>{const k=v.detallesObservacion[v.detallesObservacion.length-1],R=k&&parseInt(k.minuto.split("-")[1],10)||0,U=`${R+1}-${R+5}`;y(H=>({...H,detallesObservacion:[...H.detallesObservacion,{id:`row_${Date.now()}`,minuto:U,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},_=k=>{y(R=>({...R,detallesObservacion:R.detallesObservacion.filter(U=>U.id!==k)}))},O=async(k,R)=>{h(U=>({...U,[k]:null})),c(U=>({...U,[k]:!0})),d(U=>({...U,[k]:0}));try{const U=Date.now(),H=R.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),Q=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",V=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",G=`videos_opr/${Q}/${V}/${U}_${H}`,J=await Ttt(R,G,W=>{d(Z=>({...Z,[k]:W}))});j(k,J),d(W=>({...W,[k]:100}))}catch(U){const H=(U==null?void 0:U.message)||"Error desconocido al subir el archivo";h(Q=>({...Q,[k]:H})),alert(`Error al subir el video: ${H}`)}finally{c(U=>({...U,[k]:!1})),setTimeout(()=>{d(U=>({...U,[k]:0}))},2e3)}},j=(k,R)=>{const U=k.split(".");U.length>1?y(H=>{const Q=JSON.parse(JSON.stringify(H));let V=Q;for(let G=0;G<U.length-1;G++)V=V[U[G]];return V[U[U.length-1]]=R,Q}):y(H=>({...H,[k]:R}))},S=k=>{const R=k.split(".");R.length>1?y(U=>{const H=JSON.parse(JSON.stringify(U));let Q=H;for(let V=0;V<R.length-1;V++)Q=Q[R[V]];return Q[R[R.length-1]]="",H}):y(U=>({...U,[k]:""})),h(U=>({...U,[k]:null})),d(U=>({...U,[k]:0}))},B=async()=>{o(!0);try{const k=jn.currentUser;if(!k){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),o(!1);return}const R=await k.getIdToken(),U=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify({formData:v})});if(!U.ok){const Q=await U.json();throw new Error(Q.error||"Error al mejorar el texto con IA")}const{retroalimentacion:H}=await U.json();y(Q=>({...Q,retroalimentacion:{...Q.retroalimentacion,...H}})),alert("Textos mejorados exitosamente con IA")}catch(k){console.error(k),alert(k.message||"No se pudo mejorar la redacción. Intenta nuevamente.")}finally{o(!1)}},L=()=>{const k=new gr,R=k.internal.pageSize.getWidth(),U=k.internal.pageSize.getHeight(),H=15,Q="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",V=15,G=15;let J=25;const W=()=>{const ie="Liceo Industrial de Recoleta";k.setFontSize(8),k.setFont("helvetica","normal"),k.text(ie,R/2,U-10,{align:"center"}),k.setFontSize(10),k.setFont("helvetica","normal");const ne=U-25;k.line(H,ne,H+70,ne),k.text("Firma Docente",H+15,ne+5),k.line(R-H-70,ne,R-H,ne),k.text("Firma Observador",R-H-55,ne+5)},Z=()=>{try{k.addImage(Q,"PNG",R-G-10,10,G,V)}catch(ie){console.error("Error al cargar el logo:",ie)}};Z();const M=k.addPage;k.addPage=function(){return M.apply(this,arguments),Z(),W(),this};const F=ie=>{J>240&&(k.addPage(),J=25),k.setFontSize(14),k.setFont("helvetica","bold"),k.text(ie,H,J),J+=12};k.setFontSize(18),k.setFont("helvetica","bold"),k.text("Informe de Ciclo OPR",R/2,J,{align:"center"}),J+=18,F("1. Datos Generales");const X=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];Ni(k,{body:X,startY:J,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:H,right:H}}),J=k.lastAutoTable.finalY+15,F("2. Registro Detallado de Observación");const Y=v.detallesObservacion.map(ie=>[ie.minuto,ie.accionesDocente,ie.accionesEstudiantes,ie.actividades]);Ni(k,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:Y,startY:J,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:H,right:H},didDrawPage:ie=>{var ne;J=((ne=ie.cursor)==null?void 0:ne.y)||25}}),J=k.lastAutoTable.finalY+15,F("3. Retroalimentación Docente");const ae=[];if(v.retroalimentacion.exito&&ae.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&ae.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&ae.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&ae.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),ae.length>0&&(Ni(k,{body:ae,startY:J,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:H,right:H}}),J=k.lastAutoTable.finalY+10),v.retroalimentacion.brecha){J>240&&(k.addPage(),J=40),k.setFontSize(12),k.setFont("helvetica","bold"),k.text("Análisis de Brecha",H,J),J+=8;const ie=[],ne=v.retroalimentacion.brecha.minutoInicial,oe=v.retroalimentacion.brecha.minutoFinal;ne&&oe&&ie.push(["Minutos:",`${ne} a ${oe}`]),v.retroalimentacion.brecha.preguntas&&ie.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&ie.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),ie.length>0&&(Ni(k,{body:ie,startY:J,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:H+5,right:H}}),J=k.lastAutoTable.finalY+10)}F("4. Planificación de Práctica");const le=[];v.planificacion.preparacion&&le.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&le.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&le.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&le.push(["Tiempo:",v.planificacion.tiempo]),le.length>0&&(Ni(k,{body:le,startY:J,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:H,right:H}}),J=k.lastAutoTable.finalY+10),W(),k.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},D=async k=>{if(k.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const R={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(R)}catch(U){console.error("Error al guardar ciclo OPR:",U),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&s.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[s.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),s.jsxs("select",{value:m.docente,onChange:k=>g(R=>({...R,docente:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(k=>s.jsx("option",{value:k,children:k},k))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),s.jsxs("select",{value:m.curso,onChange:k=>g(R=>({...R,curso:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(k=>s.jsx("option",{value:k,children:k},k))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsxs("select",{value:m.asignatura,onChange:k=>g(R=>({...R,asignatura:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),ln.map(k=>s.jsx("option",{value:k,children:k},k))]})]})]})]}),s.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[s.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsxs("button",{type:"button",onClick:B,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:i,children:[s.jsx(B_,{className:"w-4 h-4"}),i?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),s.jsxs("button",{type:"button",onClick:L,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[s.jsx(of,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),s.jsxs("form",{onSubmit:D,className:"space-y-8",children:[s.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(tu,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:N,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),s.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),s.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:N,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),s.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx(Qtt,{label:"Video de observación de clase",onFileChange:k=>O("videoObservacionUrl",k),onLinkChange:k=>j("videoObservacionUrl",k),uploadedUrl:v.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(Gh,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b dark:border-slate-600",children:[s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),s.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),s.jsx("th",{className:"p-2"})]})}),s.jsx("tbody",{children:v.detallesObservacion.map(k=>s.jsxs("tr",{className:"border-b dark:border-slate-700",children:[s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"text",value:k.minuto,onChange:R=>C(k.id,"minuto",R.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),s.jsx("td",{className:"p-2",children:s.jsx("textarea",{value:k.accionesDocente,onChange:R=>C(k.id,"accionesDocente",R.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),s.jsx("td",{className:"p-2",children:s.jsx("textarea",{value:k.accionesEstudiantes,onChange:R=>C(k.id,"accionesEstudiantes",R.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),s.jsx("td",{className:"p-2",children:s.jsx("textarea",{value:k.actividades,onChange:R=>C(k.id,"actividades",R.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),s.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&s.jsx("button",{type:"button",onClick:()=>_(k.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:s.jsx(Da,{className:"w-4 h-4"})})})]},k.id))})]})}),s.jsxs("button",{type:"button",onClick:T,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[s.jsx(oF,{className:"w-4 h-4"})," Agregar Fila"]})]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(DN,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),s.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:N,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),s.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:N,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),s.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:N,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),s.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:N,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),s.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[s.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[s.jsx(r8,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),s.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:N,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),s.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:N,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),s.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:N,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),s.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:N,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[s.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(Ei,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),s.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:N,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),s.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:N,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},ztt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState({}),[o,l]=w.useState(!0),[c,u]=w.useState(!0),[d,f]=w.useState(null),[h,m]=w.useState("list"),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,C]=w.useState("general"),[T,_]=w.useState(!1),[O,j]=w.useState({}),[S,B]=w.useState([]),L=W2,D=w.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[k,R]=w.useState(D),U=w.useCallback(async()=>{l(!0),f(null);try{const ie=await Itt();t(ie)}catch(ie){f("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",ie)}finally{l(!1)}},[]),H=w.useCallback(async()=>{u(!0);try{const ne=(await Utt()).filter(K=>K.profile==="PROFESORADO").map(K=>({nombre:K.nombreCompleto,email:(K.email||"").toLowerCase()})),oe=ne.map(K=>K.nombre).sort(),we={};ne.forEach(K=>{K.nombre&&K.email&&(we[K.nombre]=K.email)}),a(oe),i(we)}catch(ie){f("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",ie)}finally{u(!1)}},[]),Q=w.useCallback(async()=>{try{const ie={};for(const ne of e)if(ne.id)try{const oe=await MD(ne.id);oe.length>0&&(ie[ne.id]=oe)}catch(oe){console.error(`Error loading OPR cycles for ${ne.id}:`,oe)}try{const ne=await ade();B(ne)}catch(ne){console.error("Error loading standalone OPR cycles:",ne),B([])}j(ie)}catch(ie){console.error("Error fetching OPR cycles:",ie)}},[e]);w.useEffect(()=>{U(),H()},[U,H]),w.useEffect(()=>{e.length>0&&Q()},[e,Q]);const V=(ie,ne)=>{if(y(ie),ne)R(ne),x(ne.id);else{const oe={id:"temp-"+Date.now(),fecha:ie.fecha,docente:ie.docenteInfo||"",curso:ie.cursoInfo||"",asignatura:ie.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};R(oe),x(null)}m("form"),C("opr"),f(null)},G=async()=>{if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),f(null);try{const ie=jn.currentUser;if(!ie){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),_(!1);return}const ne=await ie.getIdToken(),oe=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({formData:k})});if(!oe.ok)throw new Error("Error al generar la retroalimentación con IA");const{feedback:we}=await oe.json();R(K=>({...K,retroalimentacionConsolidada:we})),alert("Retroalimentación generada exitosamente con IA.")}catch{f("No se pudo generar la retroalimentación automática."),alert("Error: No se pudo generar la retroalimentación automática.")}finally{_(!1)}},J=async ie=>{var ne;if(ie.preventDefault(),!("docente"in k)||!k.docente||!k.curso||!k.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}f(null);try{const oe=(ne=n[k.docente])==null?void 0:ne.toLowerCase();if(g)await uX(g,{...k,docenteEmailLower:oe}),alert("¡Acompañamiento actualizado correctamente!");else{const we=await Ott({...k,docenteEmailLower:oe});x(we.id),R(we),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await U()}catch(oe){const we=(oe==null?void 0:oe.message)??"Error al guardar el registro de acompañamiento.";f(we),console.error("❌ Error al guardar:",oe),alert(`Error: ${we}`)}},W=()=>{R(D),x(null),y(null),m("form"),C("general"),f(null)},Z=ie=>{R(ie),x(ie.id),y(null),m("form"),C("general"),f(null)},M=async ie=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await Ftt(ie),await U(),alert("Registro eliminado exitosamente.")}catch(ne){const oe="No se pudo eliminar el registro.";f(oe),console.error("❌ Error al eliminar:",ne),alert(`Error: ${oe}`)}},F=(ie,ne)=>{R(oe=>({...oe,rubricaResultados:{...oe.rubricaResultados||{},[ie]:ne}}))},X=()=>{var ie;if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ne=new gr,oe=ne.internal.pageSize.getWidth(),we=ne.internal.pageSize.getHeight(),K=20,Ee=oe-K*2,_e=(ye,ce)=>ce+ye>we-K,Ce=()=>{const ye=ne.getNumberOfPages();for(let ce=1;ce<=ye;ce++)ne.setPage(ce),ne.setFontSize(9),ne.setTextColor(128),ne.text(`pág. ${ce} de ${ye}`,oe-K,we-10,{align:"right"})};let de=K;ne.setFontSize(16),ne.setFont("helvetica","bold"),ne.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",oe/2,de,{align:"center"}),de+=15;const xe=40;if(Ni(ne,{startY:de,head:[],body:[["Docente:",k.docente],["Curso:",k.curso],["Asignatura:",k.asignatura],["Fecha:",new Date(k.fecha).toLocaleDateString("es-CL")],["Bloques:",k.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:K,right:K}}),de=ne.lastAutoTable.finalY+10,Object.keys(k.rubricaResultados||{}).length>0){ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text("Evaluación por Indicadores",K,de),de+=10;const ye=Object.entries(k.rubricaResultados).map(([ce,Ae])=>{let Ne;switch(Ae){case 1:Ne="Débil";break;case 2:Ne="Incipiente";break;case 3:Ne="Satisfactorio";break;case 4:Ne="Avanzado";break;default:Ne="No evaluado"}return[ce,Ne,Ae]});Ni(ne,{startY:de,head:[["Indicador","Nivel de Logro","Puntuación"]],body:ye,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:K,right:K}})}ne.addPage(),de=K,ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text("Observaciones Generales y Sugerencias de Mejora",K,de),de+=15,k.observacionesGenerales&&(ne.setFontSize(12),ne.setFont("helvetica","bold"),ne.text("Fortalezas:",K,de),de+=10,ne.setFont("helvetica","normal"),ne.setFontSize(11),ne.splitTextToSize(k.observacionesGenerales,Ee).forEach(ce=>{_e(7,de)&&(ne.addPage(),de=K),ne.text(ce,K,de,{align:"justify"}),de+=7}),de+=10),k.retroalimentacionConsolidada&&(_e(50,de)&&(ne.addPage(),de=K),ne.setFontSize(12),ne.setFont("helvetica","bold"),ne.text("Sugerencias de mejora:",K,de),de+=10,ne.setFont("helvetica","normal"),ne.setFontSize(11),ne.splitTextToSize(k.retroalimentacionConsolidada,Ee).forEach(ce=>{_e(7,de)&&(ne.addPage(),de=K),ne.text(ce,K,de,{align:"justify"}),de+=7})),Ce();const he=`Informe_Acompanamiento_${(ie=k.docente)==null?void 0:ie.replace(/\s+/g,"_")}_${k.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ne.save(he)}catch(ne){console.error("❌ Error al generar PDF:",ne),alert("Error al generar el PDF. Intenta nuevamente.")}},Y=ie=>{const{name:ne,value:oe}=ie.target;R(we=>({...we,[ne]:oe}))},ae=()=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{var ie;try{const ne=e.filter(we=>we.id);let oe=0;for(const we of ne){const K=(ie=n[we.docente||""])==null?void 0:ie.toLowerCase();K&&we.docenteEmailLower!==K&&(await uX(we.id,{...we,docenteEmailLower:K}),oe++)}await U(),alert(`Reparación completada: ${oe} acompañamiento(s) actualizados`)}catch(ne){console.error("Error reparando acompañamientos:",ne),alert("No se pudo reparar docenteEmailLower en algunos acompañamientos.")}},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 flex items-center gap-2 transition-colors",title:"Backfill docenteEmailLower desde el nombre del docente",children:"Reparar Acompañamientos"}),s.jsxs("button",{onClick:()=>{W(),C("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[s.jsx(oF,{className:"w-5 h-5"})," Acompañamiento General"]}),s.jsxs("button",{onClick:()=>{R(D),x(null),y(null),m("form"),C("opr"),f(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[s.jsx(oF,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),d&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vc,{className:"w-5 h-5 text-red-500"}),s.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[s.jsx(fl,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),s.jsxs("div",{className:"space-y-3",children:[o&&s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),s.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!o&&e.filter(ie=>ie.id).length>0?s.jsx("div",{className:"grid gap-3",children:e.filter(ie=>ie.id).map(ie=>s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ei,{className:"w-4 h-4 text-amber-500"}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ie.docente})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Curso:"})," ",ie.curso," •"," ",s.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ie.asignatura]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ie.fecha).toLocaleDateString("es-CL")]}),ie.bloques&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ie.bloques]}),ie.retroalimentacionConsolidada&&s.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),O[ie.id]&&O[ie.id].length>0&&s.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[s.jsx(tu,{className:"w-3 h-3"}),O[ie.id].length," Ciclo",O[ie.id].length>1?"s":""," OPR"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>{Z(ie),C("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),s.jsx("button",{onClick:()=>{Z(ie),C("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),s.jsx("button",{onClick:async()=>{try{const ne=await Rtt(ie);await Q(),alert(`Reparación completada: ${ne.updated}/${ne.total} ciclos actualizados`)}catch(ne){console.error("Error reparando ciclos:",ne),alert("No se pudo ejecutar la reparación de ciclos.")}},title:"Reparar visibilidad de ciclos (backfill)",className:"text-amber-700 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300 font-semibold text-sm px-3 py-1 rounded border border-amber-300 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:"Reparar Ciclos"}),s.jsx("button",{onClick:()=>M(ie.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:s.jsx(Da,{className:"w-4 h-4"})})]})]}),O[ie.id]&&O[ie.id].length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[s.jsx(tu,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),s.jsx("div",{className:"space-y-2",children:O[ie.id].map(ne=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ne.nombreCiclo||`Registro N° ${ne.registroN}`}),s.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ne.fecha).toLocaleDateString("es-CL"),ne.horaInicio&&ne.horaTermino&&s.jsxs("span",{children:[" • ",ne.horaInicio," - ",ne.horaTermino]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{const oe=e.find(we=>we.id===ie.id);V(ne,oe)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),s.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await UD(ne.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:s.jsx(Da,{className:"w-3 h-3"})})]})]},ne.id))})]})]},ie.id))}):!o&&s.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[s.jsx(Pl,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),s.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),S.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[s.jsx(tu,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),s.jsx("div",{className:"space-y-3",children:S.map(ie=>s.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(tu,{className:"w-4 h-4 text-blue-500"}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ie.nombreCiclo||`Registro N° ${ie.registroN}`})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Docente:"})," ",ie.docenteInfo||"No especificado"," •"," ",s.jsx("span",{className:"font-medium",children:"Curso:"})," ",ie.cursoInfo||"No especificado"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ie.fecha).toLocaleDateString("es-CL"),ie.horaInicio&&ie.horaTermino&&s.jsxs("span",{children:[" • ",ie.horaInicio," - ",ie.horaTermino]})]}),ie.videoObservacionUrl&&s.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>{V(ie)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),s.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await UD(ie.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(ne){console.error("Error deleting standalone OPR cycle:",ne),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:s.jsx(Da,{className:"w-4 h-4"})})]})]})},ie.id))})]})]}),le=()=>{const ie=g?e.find(oe=>oe.id===g):null,ne={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in k&&k.docente||"",curso:"curso"in k&&k.curso||"",asignatura:"asignatura"in k&&k.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:N==="general"?g?"Editando Acompañamiento General":"Nuevo Acompañamiento General":v?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),s.jsx("button",{type:"button",onClick:()=>{m("list"),y(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>C("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Pl,{className:"w-4 h-4"}),"Acompañamiento General"]})}),s.jsx("button",{onClick:()=>C("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(tu,{className:"w-4 h-4"}),"Ciclos OPR"]})}),s.jsx("button",{onClick:()=>C("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(fl,{className:"w-4 h-4"}),"Dashboard"]})})]})}),d&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vc,{className:"w-5 h-5 text-red-500"}),s.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),N==="dashboard"&&s.jsx("div",{className:"animate-fade-in",children:s.jsx(_tt,{acompanamientos:e,ciclosOPR:O,standaloneCiclos:S})}),N==="general"&&s.jsxs("form",{onSubmit:J,className:"space-y-8",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[s.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[s.jsx(K2,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsxs("button",{type:"button",onClick:G,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:T,children:[s.jsx(B_,{className:"w-4 h-4"}),T?"Generando...":"Generar Retroalimentación con IA"]}),s.jsxs("button",{type:"button",onClick:X,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[s.jsx(of,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in k&&k.retroalimentacionConsolidada&&s.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[s.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[s.jsx(cn,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:s.jsx("textarea",{readOnly:!0,rows:8,value:k.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),s.jsxs("select",{name:"docente",value:"docente"in k?k.docente:"",onChange:Y,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:c,children:[s.jsx("option",{value:"",children:c?"Cargando profesores...":"Seleccione un docente"}),r.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),s.jsxs("select",{name:"curso",value:"curso"in k?k.curso:"",onChange:Y,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione un curso"}),on.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),s.jsxs("select",{name:"asignatura",value:"asignatura"in k?k.asignatura:"",onChange:Y,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione una asignatura"}),ln.map(oe=>s.jsx("option",{value:oe,children:oe},oe))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),s.jsx("input",{type:"text",name:"bloques",value:"bloques"in k?k.bloques:"",onChange:Y,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),s.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in k?k.observacionesGenerales:"",onChange:Y,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(fl,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:L.map(oe=>s.jsx(ct.Fragment,{children:oe.criteria.map((we,K)=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[K===0&&s.jsx("td",{rowSpan:oe.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:oe.domain}),s.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:we.name}),we.levels.map((Ee,_e)=>{const Ce=_e+1,de="rubricaResultados"in k&&k.rubricaResultados[we.name]===Ce,xe=de?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return s.jsx("td",{onClick:()=>F(we.name,Ce),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${xe} ${de?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Ce} para ${we.name}`,children:s.jsxs("div",{className:"text-xs leading-relaxed",children:[de&&s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(cn,{className:"w-3 h-3 text-amber-600"}),s.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Ee]})},Ce)})]},we.name))},oe.domain))})]})}),Object.keys(k.rubricaResultados||{}).length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[s.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[s.jsx(fl,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(k.rubricaResultados).length," criterios evaluados)"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(k.rubricaResultados).map(([oe,we])=>s.jsxs("div",{className:"flex justify-between items-center py-1",children:[s.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[oe,":"]}),s.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${we===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":we===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":we===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",we]})]},oe))})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:()=>m("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:T,children:[T&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),N==="opr"&&s.jsx(Htt,{acompanamiento:ie||ne,cicloToEdit:v,profesores:r,onSave:async oe=>{var we;try{const K=(ie==null?void 0:ie.id)||typeof oe.acompanamientoId=="string"&&oe.acompanamientoId||void 0,Ee=(ie==null?void 0:ie.docente)||oe.docenteInfo||"",_e=(we=n[Ee])==null?void 0:we.toLowerCase();if(v&&v.id)await Dtt(v.id,{...oe,docenteEmailLower:_e}),alert("Ciclo OPR actualizado exitosamente");else{if(!K||String(K).startsWith("temp-")){const Ce={...oe,docenteEmailLower:_e,acompanamientoId:""};await dX(Ce)}else{const Ce={...oe,docenteEmailLower:_e,acompanamientoId:String(K)};await dX(Ce)}alert("Ciclo OPR guardado exitosamente")}y(null),await U(),await Q(),m("list")}catch(K){console.error("❌ Error al guardar ciclo OPR:",K);const Ee=K.message||"Error desconocido al guardar el ciclo OPR";f(Ee),alert(`Error al guardar el ciclo OPR: ${Ee}`)}},onCancel:()=>{y(null),m("list")}})]})};return o||c?s.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[o&&"Cargando registros...",c&&" Cargando profesores..."]})]})})}):s.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h==="list"?ae():le()})})},b7="mensajes_internos",Vtt="usuarios",nde="mensajes_read_status",sde=e=>{var r,a;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fecha}},$tt=(e,t)=>{const r=_t(pt(ot,b7),rr("participants","array-contains",e),Gt("fecha","desc"));return ar(r,n=>{const i=n.docs.map(o=>sde(o));t(i)},n=>{console.error("Error al suscribirse a los mensajes:",n),t([])})},Gtt=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:lr.fromDate(new Date)};await Yr(pt(ot,b7),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},qtt=async e=>{try{const t=$t(ot,b7,e);await Ja(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},Ktt=(e,t)=>{const r=$t(ot,nde,e);return ar(r,n=>{n.exists()?t(n.data()):t({announcements:[],messages:[]})},n=>{console.error("Error al suscribirse al estado de lectura:",n),t({announcements:[],messages:[]})})},Wtt=async(e,t)=>{try{const r=$t(ot,nde,e);await ii(r,{messages:zte(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},Xtt=e=>{const t=_t(pt(ot,Vtt),Gt("nombreCompleto","asc"));return ar(t,a=>{const n=a.docs.map(i=>sde(i));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},Ytt=({currentUser:e,refreshUnreadCount:t})=>{const[r,a]=w.useState("inbox"),[n,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,f]=w.useState({announcements:[],messages:[]}),[h,m]=w.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=w.useState(g);w.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const j=$tt(e.email,L=>{i(L),m(!1)}),S=Xtt(l),B=Ktt(e.id,L=>{f(L),t()});return()=>{j(),S(),B()}},[e.id,e.email,t]);const y=j=>{u(j),r==="inbox"&&!d.messages.includes(j.id)&&Wtt(e.id,j.id).catch(S=>{console.error("Failed to mark message as read:",S)})},N=async j=>{if(j.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await Gtt(S),v(g),a("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},C=async j=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await qtt(j),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},T=j=>{v({para:j.de,asunto:`Re: ${j.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${j.de}
Fecha: ${new Date(j.fecha).toLocaleString("es-CL")}

${j.cuerpo}`}),a("compose")},_=w.useMemo(()=>n.filter(j=>j.para===e.email),[n,e.email]),O=w.useMemo(()=>n.filter(j=>j.de===e.email),[n,e.email]);return h?s.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[s.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:s.jsx("button",{onClick:()=>{a("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),s.jsxs("nav",{className:"p-2 space-y-1",children:[s.jsx("button",{onClick:()=>{a("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),s.jsx("button",{onClick:()=>{a("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&s.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?_:O).map(j=>{const S=r==="inbox"&&!d.messages.includes(j.id);return s.jsxs("div",{onClick:()=>y(j),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===j.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?j.de:`Para: ${j.para}`}),S&&s.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),s.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:j.asunto}),s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(j.fecha).toLocaleString("es-CL")})]},j.id)})}),s.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),s.jsxs("select",{id:"para",value:x.para,onChange:j=>v({...x,para:j.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione un destinatario..."}),o.filter(j=>j.email!==e.email).map(j=>s.jsxs("option",{value:j.email,children:[j.nombreCompleto," (",j.email,")"]},j.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),s.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:j=>v({...x,asunto:j.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),s.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:j=>v({...x,cuerpo:j.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?s.jsxs("div",{children:[s.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[s.jsx("strong",{children:"De:"})," ",c.de," ",s.jsx("br",{}),s.jsx("strong",{children:"Para:"})," ",c.para," ",s.jsx("br",{}),s.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),s.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),s.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&s.jsx("button",{onClick:()=>T(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),s.jsx("button",{onClick:()=>C(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:s.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},M4="proyectos_interdisciplinarios",y7="entregas_interdisciplinarias",Jtt="usuarios",w7=e=>{const t=e.data();return{id:e.id,...t}},Ztt=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),ert=e=>{const t=_t(pt(ot,M4),Gt("nombreProyecto","asc"));return ar(t,a=>{try{const n=a.docs.map(i=>Ztt(w7(i)));e(n)}catch(n){console.error("Error parseando planificaciones:",n),e([])}},a=>{console.error("Error al suscribirse a las planificaciones:",a),e([])})},trt=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:lr.now(),updatedAt:lr.now()};return(await Yr(pt(ot,M4),t)).id},AX=async(e,t)=>{const{id:r,...a}=t,n=$t(ot,M4,e);await ii(n,{...a,contenidosPorAsignatura:Array.isArray(a==null?void 0:a.contenidosPorAsignatura)?a.contenidosPorAsignatura:(a==null?void 0:a.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(a==null?void 0:a.actividades)?a.actividades:(a==null?void 0:a.actividades)===void 0?void 0:[],fechasClave:Array.isArray(a==null?void 0:a.fechasClave)?a.fechasClave:(a==null?void 0:a.fechasClave)===void 0?void 0:[],tareas:Array.isArray(a==null?void 0:a.tareas)?a.tareas:(a==null?void 0:a.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(a==null?void 0:a.docentesResponsables)?a.docentesResponsables:(a==null?void 0:a.docentesResponsables)===void 0?void 0:[a==null?void 0:a.docentesResponsables].filter(Boolean),updatedAt:lr.now()},{merge:!0})},rrt=async e=>{const t=$t(ot,M4,e),r=_t(pt(ot,y7),rr("planificacionId","==",e)),a=await _r(r),n=up(ot);a.forEach(i=>n.delete(i.ref)),n.delete(t),await n.commit()},art=(e,t)=>{const r=_t(pt(ot,y7),rr("planificacionId","==",e));return ar(r,n=>{const i=n.docs.map(o=>w7(o));t(i)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},nrt=async(e,t)=>{const r=$t(ot,y7,e);await ii(r,{feedbackProfesor:t,fechaFeedback:lr.fromDate(new Date)},{merge:!0})},ide=e=>{const t=_t(pt(ot,Jtt));return ar(t,a=>{const n=a.docs.map(i=>w7(i));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},j6={},QD={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},dw=({href:e})=>{if(!e)return s.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return s.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[s.jsx(ok,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},$p=({icon:e,label:t,children:r,aiButton:a,className:n=""})=>s.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${n}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),a]}),r]}),srt=({planificaciones:e,onActivityUpdate:t})=>{const[r,a]=w.useState(null),n=w.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),i=w.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,h]=w.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(wh,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),s.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),s.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),s.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),s.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),s.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),s.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!n.length||n.every(c=>c.items.length===0)?s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):s.jsxs("div",{className:"space-y-8",children:[n.map(({plan:c,items:u})=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:s.jsx(Ac,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=i(d),h=d.type==="activity";return s.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&a({planId:d.planId,activity:d}),children:[s.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),s.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),s.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(dw,{href:d.recursoUrl})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&s.jsx(l,{data:r,onClose:()=>a(null),onSave:t})]})},irt=({planificaciones:e,onBack:t})=>{const r=w.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(QD).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),a=w.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),n=w.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),i=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return s.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:s.jsx(_w,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),s.jsx("div",{className:"space-y-4",children:Object.keys(QD).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:f,color:h})=>s.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:d}),s.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),s.jsx("p",{className:"text-white/90 text-sm",children:f})]});return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:s.jsx(lk,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),s.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[s.jsx(Bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(l,{icon:s.jsx(Ym,{className:"w-8 h-8"}),title:"Proyectos",value:n.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),s.jsx(l,{icon:s.jsx(mwe,{className:"w-8 h-8"}),title:"Actividades",value:n.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),s.jsx(l,{icon:s.jsx(Pl,{className:"w-8 h-8"}),title:"Tareas",value:n.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),s.jsx(l,{icon:s.jsx(Ds,{className:"w-8 h-8"}),title:"Asignaturas",value:n.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsx(o,{data:r.categoriaCount}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(eb,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(a.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(a.asignaturasCount)),f=d>0?u/d*100:0;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsx(i,{data:a.palabrasCount,title:"Contenidos Más Frecuentes"}),s.jsx(i,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},ort=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[a,n]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=w.useState(null);w.useEffect(()=>{const v=ide(n),y=art(e.id,o);return()=>{v(),y()}},[e.id]);const f=w.useMemo(()=>a.filter(v=>v.profile===Mt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[a,e.cursos]),h=async v=>{d(v.id);{alert("La API Key de Gemini no está configurada."),d(null);return}},m=v=>v.map(y=>{var N;return((N=r.find(C=>C.id===y))==null?void 0:N.nombreCompleto)||y}).join(", ");return l?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),s.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[s.jsx(Bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),s.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(N=>N.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>s.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),s.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=i.find(N=>N.tareaId===l.id&&N.estudianteId===v.id);return s.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[s.jsx(ON,{className:"w-4 h-4"})," Entregado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[s.jsx(vc,{className:"w-4 h-4"})," Pendiente"]})})]}),y?s.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),s.jsx(dw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),s.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[s.jsx(of,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:N=>nrt(y.id,N.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),s.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):s.jsx(vg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx(vc,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx(vc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),s.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[s.jsx(Bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},lrt=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:a,onIndicadores:n,onEstructura:i,availableTeachers:o})=>{const[l,c]=w.useState(null),u=j6==null?void 0:j6.VITE_GEMINI_API_KEY,d=h=>h.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!u){alert("La API Key de Gemini no está configurada.");return}if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new Ek(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const N=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,C=await y.generateContent(N);a(C.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const N=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,C=await y.generateContent(N);n(C.response.text().replace(/(\*\*|\*)/g,""))}else{const N=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,T=(await y.generateContent(N)).response.text().replace(/^```json\s*|```\s*$/g,""),_=JSON.parse(T);i({actividades:(m=_.actividades)==null?void 0:m.map(O=>({...O,id:crypto.randomUUID()})),fechasClave:(g=_.fechasClave)==null?void 0:g.map(O=>({id:crypto.randomUUID(),nombre:O.nombre,fecha:O.fecha,recursoUrl:O.recursoUrl})),tareas:(x=_.tareas)==null?void 0:x.map((O,j)=>({...O,id:crypto.randomUUID(),numero:j+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):s.jsx(vg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):s.jsx(vg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",s.jsx("span",{children:"Generando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(vg,{className:"w-4 h-4"})," ",s.jsx("span",{children:"Estructura IA"})]})})]})},crt=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:a})=>{const[n,i]=w.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=w.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=w.useState(null),[d,f]=w.useState({nombre:"",fecha:"",recursoUrl:""}),[h,m]=w.useState(null),[g,x]=w.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=w.useState(null);w.useEffect(()=>{i(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const N=V=>i(G=>({...G,[V.target.name]:V.target.value})),C=V=>{i(G=>{const J=G.asignaturas,W=J.includes(V)?J.filter(M=>M!==V):[...J,V];let Z=G.contenidosPorAsignatura;return W.includes(V)&&!J.includes(V)&&(Z=[...Z,{asignatura:V,contenidos:"",habilidades:[]}]),!W.includes(V)&&J.includes(V)&&(Z=Z.filter(M=>M.asignatura!==V)),{...G,asignaturas:W,contenidosPorAsignatura:Z}})},T=V=>i(G=>({...G,cursos:G.cursos.includes(V)?G.cursos.filter(J=>J!==V):[...G.cursos,V]})),_=V=>i(G=>({...G,docentesResponsables:G.docentesResponsables.includes(V)?G.docentesResponsables.filter(J=>J!==V):[...G.docentesResponsables,V]})),O=(V,G,J)=>i(W=>({...W,contenidosPorAsignatura:W.contenidosPorAsignatura.map(Z=>Z.asignatura===V?{...Z,[G]:J}:Z)})),j=(V,G)=>i(J=>({...J,contenidosPorAsignatura:J.contenidosPorAsignatura.map(W=>W.asignatura===V?{...W,habilidades:W.habilidades.includes(G)?W.habilidades.filter(Z=>Z!==G):[...W.habilidades,G]}:W)})),S=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(i(V=>({...V,actividades:V.actividades.map(G=>G.id===c?{...o,id:c}:G)})),u(null)):i(V=>({...V,actividades:[...V.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},B=V=>{u(V.id),l(V)},L=V=>{window.confirm("¿Eliminar esta actividad?")&&i(G=>({...G,actividades:G.actividades.filter(J=>J.id!==V)}))},D=()=>{if(!d.nombre||!d.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}h?(i(V=>({...V,fechasClave:V.fechasClave.map(G=>G.id===h?{...d,id:h}:G)})),m(null)):i(V=>({...V,fechasClave:[...V.fechasClave||[],{...d,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},k=V=>{m(V.id),f(V)},R=V=>{window.confirm("¿Eliminar este hito?")&&i(G=>({...G,fechasClave:G.fechasClave.filter(J=>J.id!==V)}))},U=()=>{var V,G;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const J={...g,id:v,numero:((V=n.tareas.find(W=>W.id===v))==null?void 0:V.numero)||0};i(W=>({...W,tareas:W.tareas.map(Z=>Z.id===v?J:Z)})),y(null)}else{const J={id:crypto.randomUUID(),numero:(((G=n.tareas)==null?void 0:G.length)||0)+1,...g};i(W=>({...W,tareas:[...W.tareas||[],J]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},H=V=>{y(V.id),x({instrucciones:V.instrucciones,fechaEntrega:V.fechaEntrega,recursoUrl:V.recursoUrl||""})},Q=V=>{window.confirm("¿Eliminar esta tarea?")&&i(G=>({...G,tareas:G.tareas.filter(J=>J.id!==V)}))};return s.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:s.jsx(Ym,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx($p,{icon:s.jsx(Pl,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:s.jsx(lrt,{descripcion:n.descripcionProyecto,asignaturas:n.asignaturas,docentes:n.docentesResponsables,availableTeachers:[],onObjetivos:V=>i(G=>({...G,objetivos:V})),onIndicadores:V=>i(G=>({...G,indicadoresLogro:V})),onEstructura:V=>i(G=>{var J,W,Z;return{...G,actividades:(J=V.actividades)!=null&&J.length?V.actividades:G.actividades,fechasClave:(W=V.fechasClave)!=null&&W.length?V.fechasClave:G.fechasClave,tareas:(Z=V.tareas)!=null&&Z.length?V.tareas:G.tareas}})}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),s.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:N,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),s.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:N,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),s.jsx($p,{icon:s.jsx(Ei,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:s.jsx("div",{className:"space-y-3",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:a.map(V=>s.jsx("button",{type:"button",onClick:()=>_(V.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${n.docentesResponsables.includes(V.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${n.docentesResponsables.includes(V.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:s.jsx(Pb,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:V.nombreCompleto}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:V.email})]})]})},V.id))})})}),s.jsx($p,{icon:s.jsx(Zv,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:on.map(V=>s.jsx("button",{type:"button",onClick:()=>T(V),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${n.cursos.includes(V)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:V},V))})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx($p,{icon:s.jsx(Ds,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:ln.map(V=>s.jsx("button",{type:"button",onClick:()=>C(V),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${n.asignaturas.includes(V)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:V},V))})]}),n.contenidosPorAsignatura.length>0&&s.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),n.contenidosPorAsignatura.map(V=>s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[s.jsx(Ds,{className:"w-4 h-4"})," ",V.asignatura]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),s.jsx("textarea",{value:V.contenidos,onChange:G=>O(V.asignatura,"contenidos",G.target.value),placeholder:`Detalle los contenidos específicos de ${V.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),s.jsx("div",{className:"space-y-2",children:Object.entries(QD).map(([G,J])=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[s.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[G,":"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:J.map(W=>s.jsx("button",{type:"button",onClick:()=>j(V.asignatura,W),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${V.habilidades.includes(W)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:W},W))})]},G))}),V.habilidades.length>0&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[s.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:V.habilidades.map(G=>s.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:G},G))})]})]})]})]},V.asignatura))]})]})}),s.jsx($p,{icon:s.jsx(Fb,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:s.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:N,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),s.jsx($p,{icon:s.jsx(fl,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:s.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:N,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),s.jsxs($p,{icon:s.jsx(Io,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ac,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),s.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),s.jsx("input",{value:o.nombre,onChange:V=>l({...o,nombre:V.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),s.jsx("input",{type:"date",value:o.fechaInicio,onChange:V=>l({...o,fechaInicio:V.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),s.jsx("input",{type:"date",value:o.fechaFin,onChange:V=>l({...o,fechaFin:V.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),s.jsx("input",{value:o.recursoUrl||"",onChange:V=>l({...o,recursoUrl:V.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsx("button",{type:"button",onClick:S,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":s.jsxs(s.Fragment,{children:[s.jsx(Li,{className:"w-4 h-4"})," Agregar"]})})})]}),!!n.actividades.length&&s.jsx("div",{className:"mt-4 space-y-2",children:n.actividades.map(V=>s.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombre})," ",s.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",V.fechaInicio," - ",V.fechaFin,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dw,{href:V.recursoUrl}),s.jsx("button",{onClick:()=>B(V),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:s.jsx(wh,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>L(V.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:s.jsx(Da,{className:"w-3 h-3"})})]})]},V.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(ON,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),s.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),s.jsx("input",{value:d.nombre,onChange:V=>f({...d,nombre:V.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),s.jsx("input",{type:"date",value:d.fecha,onChange:V=>f({...d,fecha:V.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"sm:col-span-1",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),s.jsx("input",{value:d.recursoUrl||"",onChange:V=>f({...d,recursoUrl:V.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsx("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:h?"Actualizar":s.jsxs(s.Fragment,{children:[s.jsx(Li,{className:"w-4 h-4"})," Agregar"]})})]}),!!n.fechasClave.length&&s.jsx("div",{className:"mt-4 space-y-2",children:n.fechasClave.map(V=>s.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombre})," ",s.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",V.fecha,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dw,{href:V.recursoUrl}),s.jsx("button",{onClick:()=>k(V),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:s.jsx(wh,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>R(V.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:s.jsx(Da,{className:"w-3 h-3"})})]})]},V.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(_w,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),s.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),s.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[s.jsxs("div",{className:"lg:col-span-5",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),s.jsx("input",{value:g.instrucciones,onChange:V=>x({...g,instrucciones:V.target.value}),placeholder:"Descripción de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),s.jsx("input",{type:"date",value:g.fechaEntrega,onChange:V=>x({...g,fechaEntrega:V.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),s.jsx("input",{value:g.recursoUrl||"",onChange:V=>x({...g,recursoUrl:V.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx("button",{type:"button",onClick:U,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?s.jsx(wh,{className:"w-4 h-4"}):s.jsx(Li,{className:"w-4 h-4"})})})]}),!!n.tareas.length&&s.jsx("div",{className:"mt-4 space-y-2",children:n.tareas.map(V=>s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",V.numero]}),s.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:V.instrucciones})]}),s.jsxs("div",{className:"text-right space-y-1",children:[s.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:V.fechaEntrega}),"recursoUrl"in V?s.jsx(dw,{href:V.recursoUrl}):s.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[s.jsx("button",{onClick:()=>H(V),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:s.jsx(wh,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>Q(V.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:s.jsx(Da,{className:"w-3 h-3"})})]})]},V.id))})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),s.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},hX=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState(!0),[o,l]=w.useState("list"),[c,u]=w.useState(null),[d,f]=w.useState(null),[h,m]=w.useState(null),[g,x]=w.useState("all"),v=w.useMemo(()=>g==="all"?e:e.filter(S=>S.id===g),[e,g]);w.useEffect(()=>{i(!0);const S=ide(L=>{const D=L.filter(k=>k.profile===Mt.PROFESORADO);a(D)}),B=ert(L=>{const D=L.map(k=>({...k,docentesResponsables:Array.isArray(k.docentesResponsables)?k.docentesResponsables:[k.docentesResponsables].filter(Boolean),contenidosPorAsignatura:k.contenidosPorAsignatura||[],actividades:k.actividades||[],fechasClave:k.fechasClave||[]}));t(D),i(!1)});return()=>{S(),B()}},[]);const y=w.useCallback(async(S,B)=>{const L=e.find(k=>k.id===S);if(!L)return;const D={...L,actividades:(L.actividades||[]).map(k=>k.id===B.id?B:k)};await AX(S,D)},[e]),N=async S=>{try{const B=S.id&&String(S.id).length>0,L={...S};if(B){const{id:D,...k}=L;await AX(S.id,k)}else delete L.id,await trt(L);l("list"),u(null)}catch(B){console.error("Error al guardar la planificación:",B),alert("No se pudo guardar la planificación.")}},C=S=>{u(S),l("form")},T=async S=>{if(!S){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await rrt(S)}catch(B){console.error(B),alert("No se pudo eliminar la planificación.")}},_=()=>{u(null),l("form")},O=async S=>{f(S.id);try{const B=new gr("p","mm","a4"),L=B.internal.pageSize.getHeight(),D=B.internal.pageSize.getWidth(),k=15,R=D-k*2;let U=k,H=1;const G=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),J=await new Promise((ie,ne)=>{const oe=new FileReader;oe.onloadend=()=>ie(oe.result),oe.onerror=ne,oe.readAsDataURL(G)}),W=()=>{B.addImage(J,"PNG",k,U,R,20),U+=25},Z=()=>{B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(149,165,166);const ie=`Página ${H}`,ne=B.getStringUnitWidth(ie)*B.getFontSize()/B.internal.scaleFactor;B.text(ie,(D-ne)/2,L-10)},M=ie=>U+ie>L-k?(Z(),B.addPage(),H++,U=k,W(),!0):!1,F=ie=>{M(15),B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(44,62,80),B.text(ie,k,U),U+=8},X=ie=>{if(!ie||!ie.trim())return;B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(86,101,115);const ne=B.splitTextToSize(ie,R);M(ne.length*5+5),B.text(ne,k,U),U+=ne.length*5+8};W(),B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(41,128,185);const Y=B.splitTextToSize(S.nombreProyecto,R);M(Y.length*10+10),B.text(Y,k,U),U+=Y.length*9+10,Ni(B,{startY:U,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(ie=>ie.map(ne=>{var oe;return((oe=r.find(we=>we.id===ne))==null?void 0:oe.nombreCompleto)||ne}).join(", "))(S.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:ie=>{ie.pageNumber>1&&(U=k,W())}}),U=B.lastAutoTable.finalY+10,F("Descripción del Proyecto"),X(S.descripcionProyecto),F("Objetivos de Aprendizaje"),X(S.objetivos),F("Indicadores de Logro"),X(S.indicadoresLogro),S.contenidosPorAsignatura&&S.contenidosPorAsignatura.length>0&&(F("Contenidos y Habilidades por Asignatura"),S.contenidosPorAsignatura.forEach(ie=>{var ne;M(15),B.setFont("helvetica","bold"),B.setFontSize(12),B.setTextColor(52,73,94),B.text(`${ie.asignatura}:`,k,U),U+=7,ie.contenidos&&X(`Contenidos: ${ie.contenidos}`),(ne=ie.habilidades)!=null&&ne.length&&X(`Habilidades: ${ie.habilidades.join(", ")}`)}));const le={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:ie=>{ie.pageNumber>H&&(H=ie.pageNumber,Z()),ie.pageNumber>1&&(U=k,W())}};if(S.actividades&&S.actividades.length>0&&(F("Cronograma de Actividades"),Ni(B,{...le,startY:U,head:[["Actividad","Inicio","Fin","Recurso"]],body:S.actividades.map(ie=>[ie.nombre,ie.fechaInicio,ie.fechaFin,ie.recursoUrl||"—"])}),U=B.lastAutoTable.finalY+10),S.fechasClave&&S.fechasClave.length>0&&(F("Hitos y Fechas Clave"),Ni(B,{...le,startY:U,head:[["Hito","Fecha","Recurso"]],body:S.fechasClave.map(ie=>[ie.nombre,ie.fecha,ie.recursoUrl||"—"])}),U=B.lastAutoTable.finalY+10),S.tareas&&S.tareas.length>0){F("Tareas para Estudiantes");const ie=S.tareas.map(ne=>[String(ne.numero||""),ne.instrucciones,ne.fechaEntrega,ne.recursoUrl||"—"]);Ni(B,{...le,startY:U,head:[["#","Instrucciones","Entrega","Recurso"]],body:ie}),U=B.lastAutoTable.finalY+10}Z(),B.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(B){console.error("Error al generar PDF:",B),alert("No se pudo generar el PDF. Verifique la consola para más detalles.")}finally{f(null)}},j=S=>S.map(B=>{var L;return((L=r.find(D=>D.id===B))==null?void 0:L.nombreCompleto)||B}).join(", ");return n?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?s.jsx(ort,{plan:h,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),s.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),s.jsx(irt,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),s.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),s.jsx(crt,{initialPlan:c,onSave:N,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):s.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),s.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:s.jsx(Ym,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[s.jsx(lk,{className:"w-5 h-5"})," Ver Dashboard"]}),s.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[s.jsx(Li,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:s.jsx(Ym,{className:"w-12 h-12 text-slate-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),s.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Li,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(S=>s.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:S.nombreProyecto}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(Zv,{className:"w-4 h-4"}),s.jsxs("span",{children:["Cursos: ",S.cursos.join(", ")]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(Ei,{className:"w-4 h-4"}),s.jsxs("span",{children:["Profesores: ",j(S.docentesResponsables)]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(Ds,{className:"w-4 h-4"}),s.jsxs("span",{children:["Asignaturas: ",S.asignaturas.length]})]})]})]})}),!!S.descripcionProyecto&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:S.descripcionProyecto}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>m(S),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[s.jsx(ON,{className:"w-4 h-4"})," Entregas"]}),s.jsxs("button",{type:"button",onClick:()=>O(S),disabled:d===S.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===S.id?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):s.jsx(of,{className:"w-4 h-4"}),"PDF"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>C(S),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:s.jsx(wh,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>T(S.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:s.jsx(Da,{className:"w-4 h-4"})})]})]})]},S.id))})]}),e.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sCe,{className:"w-5 h-5 text-slate-600"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),s.jsxs("select",{value:g,onChange:S=>x(S.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[s.jsx("option",{value:"all",children:"Todos"}),e.map(S=>s.jsx("option",{value:S.id,children:S.nombreProyecto},S.id))]})]})]}),s.jsx("div",{id:"gantt-container-vertical",children:s.jsx(srt,{planificaciones:v,onActivityUpdate:y})})]})]})},r1="panol_maquinas",dC="panol_registros",urt=e=>{const t=_t(pt(ot,r1),Gt("nombre","asc"));return ar(t,r=>{const a=r.docs.map(n=>({id:n.id,...n.data()}));e(a)})},drt=e=>{const t=_t(pt(ot,dC),Gt("fecha","desc"));return ar(t,r=>{const a=r.docs.map(n=>{const i=n.data();return{id:n.id,fecha:i.fecha,curso:i.curso,profesorResponsable:i.profesorResponsable,maquinaId:i.maquinaId,totalHoras:i.totalHoras,observaciones:i.observaciones||""}});e(a)})},frt=async e=>(await Yr(pt(ot,r1),{...e,createdAt:qa(),updatedAt:qa()})).id,Art=async(e,t)=>{await Ui($t(ot,r1,e),{...t,updatedAt:qa()})},hrt=async e=>{const t=_t(pt(ot,dC),rr("maquinaId","==",e));if(!(await _r(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await Ja($t(ot,r1,e))},mrt=async e=>(await Yr(pt(ot,dC),{...e,createdAt:qa(),updatedAt:qa()})).id,prt=async(e,t)=>{await Ui($t(ot,dC,e),{...t,updatedAt:qa()})},grt=async e=>{await Ja($t(ot,dC,e))},xrt=async()=>{if(!(await _r(pt(ot,r1))).empty)return;const t=up(ot);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(a=>{const n=$t(pt(ot,r1));t.set(n,{...a,createdAt:qa(),updatedAt:qa()})}),await t.commit()},vrt=()=>{var H;const[e,t]=w.useState([]),[r,a]=w.useState([]),n={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[i,o]=w.useState(n),[l,c]=w.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=w.useState(u),[h,m]=w.useState(null),[g,x]=w.useState({maquinaId:"",curso:"",profesor:"",fecha:""});w.useEffect(()=>{xrt().catch(console.error);const Q=urt(t),V=drt(a);return()=>{Q&&Q(),V&&V()}},[]);const v=async Q=>{if(Q.preventDefault(),!!d.nombre.trim())try{h?await Art(h.id,{...d}):await frt({...d}),f(u),m(null)}catch(V){alert(V.message||"Error al guardar máquina")}},y=w.useCallback(async Q=>{try{await hrt(Q)}catch(V){alert(V.message||"Error al eliminar máquina")}},[]),N=async Q=>{Q.preventDefault();const V=l||i;if(!V.curso||!V.profesorResponsable.trim()||!V.maquinaId||Number(V.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:G,...J}=l;await prt(G,J)}else await mrt({...i});o(n),c(null)}catch(G){alert(G.message||"Error al guardar registro")}},C=w.useCallback(async Q=>{try{await grt(Q)}catch(V){alert(V.message||"Error al eliminar registro")}},[]),T=w.useMemo(()=>r.filter(Q=>(g.maquinaId===""||Q.maquinaId===g.maquinaId)&&(g.curso===""||Q.curso===g.curso)&&(g.profesor===""||Q.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||Q.fecha===g.fecha)).sort((Q,V)=>new Date(V.fecha).getTime()-new Date(Q.fecha).getTime()),[r,g]),_=w.useMemo(()=>new Map(e.map(Q=>[Q.id,Q])),[e]),O=w.useMemo(()=>T.reduce((Q,V)=>Q+(Number(V.totalHoras)||0),0),[T]),j=w.useMemo(()=>{const Q=new Map;T.forEach(G=>{var W;const J=((W=_.get(G.maquinaId))==null?void 0:W.nombre)||"N/A";Q.set(J,(Q.get(J)||0)+(Number(G.totalHoras)||0))});const V=Array.from(Q.entries()).map(([G,J])=>({maquina:G,horas:Number(J.toFixed(2))}));return V.sort((G,J)=>J.horas-G.horas),V},[T,_]),S=()=>{const Q=T.map(J=>{var W,Z;return{Fecha:J.fecha,Curso:J.curso,Profesor:J.profesorResponsable,Máquina:((W=_.get(J.maquinaId))==null?void 0:W.nombre)||"N/A",Especialidad:((Z=_.get(J.maquinaId))==null?void 0:Z.especialidad)||"N/A","Total Horas":J.totalHoras,Observaciones:J.observaciones}}),V=Os.json_to_sheet(Q),G=Os.book_new();Os.book_append_sheet(G,V,"RegistrosPañol"),B1(G,"Registros_Pañol.xlsx")},B=()=>{const Q=new gr;Ni(Q,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:T.map(V=>{var G,J;return[V.fecha,V.curso,V.profesorResponsable,((G=_.get(V.maquinaId))==null?void 0:G.nombre)||"N/A",((J=_.get(V.maquinaId))==null?void 0:J.especialidad)||"N/A",V.totalHoras,V.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:V=>{Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text("LICEO INDUSTRIAL DE RECOLETA",V.settings.margin.left,14),Q.setFontSize(10),Q.setFont("helvetica","normal"),Q.text("Informe de Registros de Pañol",V.settings.margin.left,20)}}),Q.save("Registros_Pañol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",D=(Q,V)=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V}`,children:Q}),k=({icon:Q,label:V,value:G,accent:J="from-indigo-500 to-sky-500"})=>s.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[s.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${J} opacity-10`}),s.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[s.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:Q}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:V}),s.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:G})]})]})]}),R=({title:Q,icon:V,children:G,right:J,accent:W="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>s.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[s.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${W}`}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[V," ",s.jsx("span",{children:Q})]}),J]}),G]})]}),U=()=>{const Q=l||i,V=l?c:o;return s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Io,{size:16})," Fecha"]}),s.jsx("input",{name:"fecha",type:"date",value:Q.fecha,onChange:G=>V({...Q,fecha:G.target.value}),className:L,required:!0})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Ei,{size:16})," Curso"]}),s.jsxs("select",{name:"curso",value:Q.curso,onChange:G=>V({...Q,curso:G.target.value}),className:L,required:!0,children:[s.jsx("option",{value:"",children:"Curso"}),on.map(G=>s.jsx("option",{children:G},G))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Ds,{size:16})," Profesor"]}),s.jsxs("select",{name:"profesorResponsable",value:Q.profesorResponsable,onChange:G=>V({...Q,profesorResponsable:G.target.value}),className:L,required:!0,children:[s.jsx("option",{value:"",children:"Profesor Responsable"}),lF.map(G=>s.jsx("option",{value:G,children:G},G))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(K2,{size:16})," Máquina"]}),s.jsxs("select",{name:"maquinaId",value:Q.maquinaId,onChange:G=>V({...Q,maquinaId:G.target.value}),className:L,required:!0,children:[s.jsx("option",{value:"",children:"Máquina"}),e.map(G=>s.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(sk,{size:16})," Total de Horas"]}),s.jsx("input",{name:"totalHoras",type:"number",value:Q.totalHoras,onChange:G=>V({...Q,totalHoras:Number(G.target.value)}),className:L,required:!0,min:.5,step:.5})]}),s.jsxs("div",{className:"lg:col-span-6",children:[s.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),s.jsx("textarea",{name:"observaciones",value:Q.observaciones,onChange:G=>V({...Q,observaciones:G.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&s.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[s.jsx(Oo,{size:16})," Cancelar"]}),s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?s.jsx(gl,{size:16}):s.jsx(Li,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[s.jsx(S_,{size:18})," Excel"]}),s.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[s.jsx(Pl,{size:18})," PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(k,{icon:s.jsx(K2,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),s.jsx(k,{icon:s.jsx(Pl,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:T.length,accent:"from-sky-500 to-cyan-500"}),s.jsx(k,{icon:s.jsx(sk,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:O.toFixed(1),accent:"from-emerald-500 to-lime-500"}),s.jsx(k,{icon:s.jsx(Io,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(H=r[0])!=null&&H.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[s.jsx("div",{className:"xl:col-span-3",children:s.jsx(R,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:s.jsx(CNe,{size:18}),children:s.jsx(U,{})})}),s.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:s.jsx(R,{title:"Uso por máquina (horas)",icon:s.jsx(fl,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:s.jsx("div",{className:"flex gap-2 items-center",children:D(`${j.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:s.jsx("div",{className:"h-[320px] w-full",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:j,margin:{top:8,right:16,bottom:8,left:0},children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),s.jsx(Wd,{}),s.jsx(hc,{}),s.jsx(fx,{}),s.jsx(fA,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),s.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:s.jsxs(R,{title:"Administrar máquinas",icon:s.jsx(K2,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[s.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[s.jsx("input",{value:d.nombre,onChange:Q=>f({...d,nombre:Q.target.value}),placeholder:"Nombre máquina",className:L+" md:col-span-2"}),s.jsxs("select",{value:d.especialidad,onChange:Q=>f({...d,especialidad:Q.target.value}),className:L+" md:col-span-2",children:[s.jsx("option",{value:"Industrial",children:"Industrial"}),s.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),s.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?s.jsx(gl,{size:16}):s.jsx(Li,{size:16}),h?"Guardar":"Agregar"]})]}),s.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(Q=>s.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:Q.nombre}),s.jsx("div",{className:"text-xs",children:Q.especialidad==="Industrial"?D("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):D("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{m(Q),f(Q)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:s.jsx(Iw,{size:16,className:"text-blue-600"})}),s.jsx("button",{onClick:()=>y(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:s.jsx(Da,{size:16,className:"text-red-600"})})]})]},Q.id))})]})}),s.jsx("div",{className:"xl:col-span-2 order-3",children:s.jsxs(R,{title:"Historial de uso",icon:s.jsx(Pl,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(FN,{size:16,className:"text-slate-600"})}),children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[s.jsx("input",{type:"date",value:g.fecha,onChange:Q=>x({...g,fecha:Q.target.value}),className:L,placeholder:"Fecha"}),s.jsxs("select",{value:g.curso,onChange:Q=>x({...g,curso:Q.target.value}),className:L,children:[s.jsx("option",{value:"",children:"Todos los Cursos"}),on.map(Q=>s.jsx("option",{children:Q},Q))]}),s.jsxs("select",{value:g.maquinaId,onChange:Q=>x({...g,maquinaId:Q.target.value}),className:L,children:[s.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(Q=>s.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),s.jsxs("div",{className:"relative",children:[s.jsx(C1,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),s.jsx("input",{value:g.profesor,onChange:Q=>x({...g,profesor:Q.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),s.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),s.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),s.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[T.map(Q=>{var V;return s.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.fecha}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((V=_.get(Q.maquinaId))==null?void 0:V.nombre)||"N/A"}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[Q.profesorResponsable," ",s.jsxs("span",{className:"text-slate-400",children:["(",Q.curso,")"]})]}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.totalHoras}),s.jsxs("td",{className:"px-3 py-2 text-center",children:[s.jsx("button",{onClick:()=>c(Q),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:s.jsx(Iw,{size:16,className:"text-blue-600"})}),s.jsx("button",{onClick:()=>C(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:s.jsx(Da,{size:16,className:"text-red-600"})})]})]},Q.id)}),T.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Ul(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,a;r<e.length;r++)(a=Ul(e[r]))!==""&&(t+=(t&&" ")+a);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const brt={},mX=e=>{let t;const r=new Set,a=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},n=()=>t,c={setState:a,getState:n,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(brt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(a,n,c);return c},yrt=e=>e?mX(e):mX,{useDebugValue:wrt}=ct,{useSyncExternalStoreWithSelector:Nrt}=iRe,Crt=e=>e;function ode(e,t=Crt,r){const a=Nrt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return wrt(a),a}const pX=(e,t)=>{const r=yrt(e),a=(n,i=t)=>ode(r,n,i);return Object.assign(a,r),a},Ert=(e,t)=>e?pX(e,t):pX;function vl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,n]of e)if(!Object.is(n,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}var jrt={value:()=>{}};function U4(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new f5(r)}function f5(e){this._=e}function krt(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}f5.prototype=U4.prototype={constructor:f5,on:function(e,t){var r=this._,a=krt(e+"",r),n,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((n=(e=a[i]).type)&&(n=Srt(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=gX(r[n],e.name,t);else if(t==null)for(n in r)r[n]=gX(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new f5(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,i;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)}};function Srt(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function gX(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=jrt,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}var HD="http://www.w3.org/1999/xhtml";const xX={svg:"http://www.w3.org/2000/svg",xhtml:HD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q4(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),xX.hasOwnProperty(t)?{space:xX[t],local:e}:e}function _rt(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===HD&&t.documentElement.namespaceURI===HD?t.createElement(e):t.createElementNS(r,e)}}function Brt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lde(e){var t=Q4(e);return(t.local?Brt:_rt)(t)}function Trt(){}function N7(e){return e==null?Trt:function(){return this.querySelector(e)}}function Irt(e){typeof e!="function"&&(e=N7(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var i=t[n],o=i.length,l=a[n]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new hu(a,this._parents)}function Ort(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Frt(){return[]}function cde(e){return e==null?Frt:function(){return this.querySelectorAll(e)}}function Drt(e){return function(){return Ort(e.apply(this,arguments))}}function Prt(e){typeof e=="function"?e=Drt(e):e=cde(e);for(var t=this._groups,r=t.length,a=[],n=[],i=0;i<r;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(a.push(e.call(c,c.__data__,u,o)),n.push(c));return new hu(a,n)}function ude(e){return function(){return this.matches(e)}}function dde(e){return function(t){return t.matches(e)}}var Rrt=Array.prototype.find;function Lrt(e){return function(){return Rrt.call(this.children,e)}}function Mrt(){return this.firstElementChild}function Urt(e){return this.select(e==null?Mrt:Lrt(typeof e=="function"?e:dde(e)))}var Qrt=Array.prototype.filter;function Hrt(){return Array.from(this.children)}function zrt(e){return function(){return Qrt.call(this.children,e)}}function Vrt(e){return this.selectAll(e==null?Hrt:zrt(typeof e=="function"?e:dde(e)))}function $rt(e){typeof e!="function"&&(e=ude(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var i=t[n],o=i.length,l=a[n]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new hu(a,this._parents)}function fde(e){return new Array(e.length)}function Grt(){return new hu(this._enter||this._groups.map(fde),this._parents)}function gS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gS.prototype={constructor:gS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qrt(e){return function(){return e}}function Krt(e,t,r,a,n,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],a[o]=l):r[o]=new gS(e,i[o]);for(;o<c;++o)(l=t[o])&&(n[o]=l)}function Wrt(e,t,r,a,n,i,o){var l,c,u=new Map,d=t.length,f=i.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?n[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,i[l],l,i)+"",(c=u.get(m))?(a[l]=c,c.__data__=i[l],u.delete(m)):r[l]=new gS(e,i[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(n[l]=c)}function Xrt(e){return e.__data__}function Yrt(e,t){if(!arguments.length)return Array.from(this,Xrt);var r=t?Wrt:Krt,a=this._parents,n=this._groups;typeof e!="function"&&(e=qrt(e));for(var i=n.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var d=a[u],f=n[u],h=f.length,m=Jrt(e.call(d,d&&d.__data__,u,a)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var N=0,C=0,T,_;N<g;++N)if(T=x[N]){for(N>=C&&(C=N+1);!(_=v[C])&&++C<g;);T._next=_||null}}return o=new hu(o,a),o._enter=l,o._exit=c,o}function Jrt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zrt(){return new hu(this._exit||this._groups.map(fde),this._parents)}function eat(e,t,r){var a=this.enter(),n=this,i=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),r==null?i.remove():r(i),a&&n?a.merge(n).order():n}function tat(e){for(var t=e.selection?e.selection():e,r=this._groups,a=t._groups,n=r.length,i=a.length,o=Math.min(n,i),l=new Array(n),c=0;c<o;++c)for(var u=r[c],d=a[c],f=u.length,h=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<n;++c)l[c]=r[c];return new hu(l,this._parents)}function rat(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var a=e[t],n=a.length-1,i=a[n],o;--n>=0;)(o=a[n])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function aat(e){e||(e=nat);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,a=r.length,n=new Array(a),i=0;i<a;++i){for(var o=r[i],l=o.length,c=n[i]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new hu(n,this._parents).order()}function nat(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sat(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function iat(){return Array.from(this)}function oat(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],n=0,i=a.length;n<i;++n){var o=a[n];if(o)return o}return null}function lat(){let e=0;for(const t of this)++e;return e}function cat(){return!this.node()}function uat(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var n=t[r],i=0,o=n.length,l;i<o;++i)(l=n[i])&&e.call(l,l.__data__,i,n);return this}function dat(e){return function(){this.removeAttribute(e)}}function fat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Aat(e,t){return function(){this.setAttribute(e,t)}}function hat(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mat(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function pat(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function gat(e,t){var r=Q4(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?fat:dat:typeof t=="function"?r.local?pat:mat:r.local?hat:Aat)(r,t))}function Ade(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xat(e){return function(){this.style.removeProperty(e)}}function vat(e,t,r){return function(){this.style.setProperty(e,t,r)}}function bat(e,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function yat(e,t,r){return arguments.length>1?this.each((t==null?xat:typeof t=="function"?bat:vat)(e,t,r??"")):a1(this.node(),e)}function a1(e,t){return e.style.getPropertyValue(t)||Ade(e).getComputedStyle(e,null).getPropertyValue(t)}function wat(e){return function(){delete this[e]}}function Nat(e,t){return function(){this[e]=t}}function Cat(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Eat(e,t){return arguments.length>1?this.each((t==null?wat:typeof t=="function"?Cat:Nat)(e,t)):this.node()[e]}function hde(e){return e.trim().split(/^|\s+/)}function C7(e){return e.classList||new mde(e)}function mde(e){this._node=e,this._names=hde(e.getAttribute("class")||"")}mde.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function pde(e,t){for(var r=C7(e),a=-1,n=t.length;++a<n;)r.add(t[a])}function gde(e,t){for(var r=C7(e),a=-1,n=t.length;++a<n;)r.remove(t[a])}function jat(e){return function(){pde(this,e)}}function kat(e){return function(){gde(this,e)}}function Sat(e,t){return function(){(t.apply(this,arguments)?pde:gde)(this,e)}}function _at(e,t){var r=hde(e+"");if(arguments.length<2){for(var a=C7(this.node()),n=-1,i=r.length;++n<i;)if(!a.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?Sat:t?jat:kat)(r,t))}function Bat(){this.textContent=""}function Tat(e){return function(){this.textContent=e}}function Iat(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Oat(e){return arguments.length?this.each(e==null?Bat:(typeof e=="function"?Iat:Tat)(e)):this.node().textContent}function Fat(){this.innerHTML=""}function Dat(e){return function(){this.innerHTML=e}}function Pat(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rat(e){return arguments.length?this.each(e==null?Fat:(typeof e=="function"?Pat:Dat)(e)):this.node().innerHTML}function Lat(){this.nextSibling&&this.parentNode.appendChild(this)}function Mat(){return this.each(Lat)}function Uat(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qat(){return this.each(Uat)}function Hat(e){var t=typeof e=="function"?e:lde(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zat(){return null}function Vat(e,t){var r=typeof e=="function"?e:lde(e),a=t==null?zat:typeof t=="function"?t:N7(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function $at(){var e=this.parentNode;e&&e.removeChild(this)}function Gat(){return this.each($at)}function qat(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kat(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wat(e){return this.select(e?Kat:qat)}function Xat(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Yat(e){return function(t){e.call(this,t,this.__data__)}}function Jat(e){return e.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function Zat(e){return function(){var t=this.__on;if(t){for(var r=0,a=-1,n=t.length,i;r<n;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++a]=i;++a?t.length=a:delete this.__on}}}function ent(e,t,r){return function(){var a=this.__on,n,i=Yat(t);if(a){for(var o=0,l=a.length;o<l;++o)if((n=a[o]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=i,n.options=r),n.value=t;return}}this.addEventListener(e.type,i,r),n={type:e.type,name:e.name,value:t,listener:i,options:r},a?a.push(n):this.__on=[n]}}function tnt(e,t,r){var a=Jat(e+""),n,i=a.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(n=0,d=l[c];n<i;++n)if((o=a[n]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?ent:Zat,n=0;n<i;++n)this.each(l(a[n],t,r));return this}function xde(e,t,r){var a=Ade(e),n=a.CustomEvent;typeof n=="function"?n=new n(t,r):(n=a.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function rnt(e,t){return function(){return xde(this,e,t)}}function ant(e,t){return function(){return xde(this,e,t.apply(this,arguments))}}function nnt(e,t){return this.each((typeof t=="function"?ant:rnt)(e,t))}function*snt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],n=0,i=a.length,o;n<i;++n)(o=a[n])&&(yield o)}var vde=[null];function hu(e,t){this._groups=e,this._parents=t}function fC(){return new hu([[document.documentElement]],vde)}function int(){return this}hu.prototype=fC.prototype={constructor:hu,select:Irt,selectAll:Prt,selectChild:Urt,selectChildren:Vrt,filter:$rt,data:Yrt,enter:Grt,exit:Zrt,join:eat,merge:tat,selection:int,order:rat,sort:aat,call:sat,nodes:iat,node:oat,size:lat,empty:cat,each:uat,attr:gat,style:yat,property:Eat,classed:_at,text:Oat,html:Rat,raise:Mat,lower:Qat,append:Hat,insert:Vat,remove:Gat,clone:Wat,datum:Xat,on:tnt,dispatch:nnt,[Symbol.iterator]:snt};function Zu(e){return typeof e=="string"?new hu([[document.querySelector(e)]],[document.documentElement]):new hu([[e]],vde)}function ont(e){let t;for(;t=e.sourceEvent;)e=t;return e}function eA(e,t){if(e=ont(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}}return[e.pageX,e.pageY]}const lnt={passive:!1},cN={capture:!0,passive:!1};function k6(e){e.stopImmediatePropagation()}function pb(e){e.preventDefault(),e.stopImmediatePropagation()}function bde(e){var t=e.document.documentElement,r=Zu(e).on("dragstart.drag",pb,cN);"onselectstart"in t?r.on("selectstart.drag",pb,cN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yde(e,t){var r=e.document.documentElement,a=Zu(e).on("dragstart.drag",null);t&&(a.on("click.drag",pb,cN),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const uj=e=>()=>e;function zD(e,{sourceEvent:t,subject:r,target:a,identifier:n,active:i,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}zD.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function cnt(e){return!e.ctrlKey&&!e.button}function unt(){return this.parentNode}function dnt(e,t){return t??{x:e.x,y:e.y}}function fnt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ant(){var e=cnt,t=unt,r=dnt,a=fnt,n={},i=U4("start","drag","end"),o=0,l,c,u,d,f=0;function h(T){T.on("mousedown.drag",m).filter(a).on("touchstart.drag",v).on("touchmove.drag",y,lnt).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(T,_){if(!(d||!e.call(this,T,_))){var O=C(this,t.call(this,T,_),T,_,"mouse");O&&(Zu(T.view).on("mousemove.drag",g,cN).on("mouseup.drag",x,cN),bde(T.view),k6(T),u=!1,l=T.clientX,c=T.clientY,O("start",T))}}function g(T){if(pb(T),!u){var _=T.clientX-l,O=T.clientY-c;u=_*_+O*O>f}n.mouse("drag",T)}function x(T){Zu(T.view).on("mousemove.drag mouseup.drag",null),yde(T.view,u),pb(T),n.mouse("end",T)}function v(T,_){if(e.call(this,T,_)){var O=T.changedTouches,j=t.call(this,T,_),S=O.length,B,L;for(B=0;B<S;++B)(L=C(this,j,T,_,O[B].identifier,O[B]))&&(k6(T),L("start",T,O[B]))}}function y(T){var _=T.changedTouches,O=_.length,j,S;for(j=0;j<O;++j)(S=n[_[j].identifier])&&(pb(T),S("drag",T,_[j]))}function N(T){var _=T.changedTouches,O=_.length,j,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),j=0;j<O;++j)(S=n[_[j].identifier])&&(k6(T),S("end",T,_[j]))}function C(T,_,O,j,S,B){var L=i.copy(),D=eA(B||O,_),k,R,U;if((U=r.call(T,new zD("beforestart",{sourceEvent:O,target:h,identifier:S,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:L}),j))!=null)return k=U.x-D[0]||0,R=U.y-D[1]||0,function H(Q,V,G){var J=D,W;switch(Q){case"start":n[S]=H,W=o++;break;case"end":delete n[S],--o;case"drag":D=eA(G||V,_),W=o;break}L.call(Q,T,new zD(Q,{sourceEvent:V,subject:U,target:h,identifier:S,active:W,x:D[0]+k,y:D[1]+R,dx:D[0]-J[0],dy:D[1]-J[1],dispatch:L}),j)}}return h.filter=function(T){return arguments.length?(e=typeof T=="function"?T:uj(!!T),h):e},h.container=function(T){return arguments.length?(t=typeof T=="function"?T:uj(T),h):t},h.subject=function(T){return arguments.length?(r=typeof T=="function"?T:uj(T),h):r},h.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:uj(!!T),h):a},h.on=function(){var T=i.on.apply(i,arguments);return T===i?h:T},h.clickDistance=function(T){return arguments.length?(f=(T=+T)*T,h):Math.sqrt(f)},h}var n1=0,B2=0,Jy=0,wde=1e3,xS,T2,vS=0,Yg=0,H4=0,uN=typeof performance=="object"&&performance.now?performance:Date,Nde=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function E7(){return Yg||(Nde(hnt),Yg=uN.now()+H4)}function hnt(){Yg=0}function bS(){this._call=this._time=this._next=null}bS.prototype=Cde.prototype={constructor:bS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?E7():+r)+(t==null?0:+t),!this._next&&T2!==this&&(T2?T2._next=this:xS=this,T2=this),this._call=e,this._time=r,VD()},stop:function(){this._call&&(this._call=null,this._time=1/0,VD())}};function Cde(e,t,r){var a=new bS;return a.restart(e,t,r),a}function mnt(){E7(),++n1;for(var e=xS,t;e;)(t=Yg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--n1}function vX(){Yg=(vS=uN.now())+H4,n1=B2=0;try{mnt()}finally{n1=0,gnt(),Yg=0}}function pnt(){var e=uN.now(),t=e-vS;t>wde&&(H4-=t,vS=e)}function gnt(){for(var e,t=xS,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:xS=r);T2=e,VD(a)}function VD(e){if(!n1){B2&&(B2=clearTimeout(B2));var t=e-Yg;t>24?(e<1/0&&(B2=setTimeout(vX,e-uN.now()-H4)),Jy&&(Jy=clearInterval(Jy))):(Jy||(vS=uN.now(),Jy=setInterval(pnt,wde)),n1=1,Nde(vX))}}function bX(e,t,r){var a=new bS;return t=t==null?0:+t,a.restart(n=>{a.stop(),e(n+t)},t,r),a}var xnt=U4("start","end","cancel","interrupt"),vnt=[],Ede=0,yX=1,$D=2,A5=3,wX=4,GD=5,h5=6;function z4(e,t,r,a,n,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;bnt(e,r,{name:t,index:a,group:n,on:xnt,tween:vnt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Ede})}function j7(e,t){var r=mf(e,t);if(r.state>Ede)throw new Error("too late; already scheduled");return r}function TA(e,t){var r=mf(e,t);if(r.state>A5)throw new Error("too late; already running");return r}function mf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function bnt(e,t,r){var a=e.__transition,n;a[t]=r,r.timer=Cde(i,0,r.time);function i(u){r.state=yX,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,h,m;if(r.state!==yX)return c();for(d in a)if(m=a[d],m.name===r.name){if(m.state===A5)return bX(o);m.state===wX?(m.state=h5,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete a[d]):+d<t&&(m.state=h5,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete a[d])}if(bX(function(){r.state===A5&&(r.state=wX,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=$D,r.on.call("start",e,e.__data__,r.index,r.group),r.state===$D){for(r.state=A5,n=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(n[++f]=m);n.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=GD,1),f=-1,h=n.length;++f<h;)n[f].call(e,d);r.state===GD&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=h5,r.timer.stop(),delete a[t];for(var u in a)return;delete e.__transition}}function m5(e,t){var r=e.__transition,a,n,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((a=r[o]).name!==t){i=!1;continue}n=a.state>$D&&a.state<GD,a.state=h5,a.timer.stop(),a.on.call(n?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[o]}i&&delete e.__transition}}function ynt(e){return this.each(function(){m5(this,e)})}function wnt(e,t){var r,a;return function(){var n=TA(this,e),i=n.tween;if(i!==r){a=r=i;for(var o=0,l=a.length;o<l;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}n.tween=a}}function Nnt(e,t,r){var a,n;if(typeof r!="function")throw new Error;return function(){var i=TA(this,e),o=i.tween;if(o!==a){n=(a=o).slice();for(var l={name:t,value:r},c=0,u=n.length;c<u;++c)if(n[c].name===t){n[c]=l;break}c===u&&n.push(l)}i.tween=n}}function Cnt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var a=mf(this.node(),r).tween,n=0,i=a.length,o;n<i;++n)if((o=a[n]).name===e)return o.value;return null}return this.each((t==null?wnt:Nnt)(r,e,t))}function k7(e,t,r){var a=e._id;return e.each(function(){var n=TA(this,a);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return mf(n,a).value[t]}}function jde(e,t){var r;return(typeof t=="number"?Qd:t instanceof Wg?qk:(r=Wg(t))?(t=r,qk):Rie)(e,t)}function Ent(e){return function(){this.removeAttribute(e)}}function jnt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function knt(e,t,r){var a,n=r+"",i;return function(){var o=this.getAttribute(e);return o===n?null:o===a?i:i=t(a=o,r)}}function Snt(e,t,r){var a,n=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===a?i:i=t(a=o,r)}}function _nt(e,t,r){var a,n,i;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===a&&c===n?i:(n=c,i=t(a=o,l)))}}function Bnt(e,t,r){var a,n,i;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===a&&c===n?i:(n=c,i=t(a=o,l)))}}function Tnt(e,t){var r=Q4(e),a=r==="transform"?_7e:jde;return this.attrTween(e,typeof t=="function"?(r.local?Bnt:_nt)(r,a,k7(this,"attr."+e,t)):t==null?(r.local?jnt:Ent)(r):(r.local?Snt:knt)(r,a,t))}function Int(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Ont(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Fnt(e,t){var r,a;function n(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&Ont(e,i)),r}return n._value=t,n}function Dnt(e,t){var r,a;function n(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&Int(e,i)),r}return n._value=t,n}function Pnt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var a=Q4(e);return this.tween(r,(a.local?Fnt:Dnt)(a,t))}function Rnt(e,t){return function(){j7(this,e).delay=+t.apply(this,arguments)}}function Lnt(e,t){return t=+t,function(){j7(this,e).delay=t}}function Mnt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rnt:Lnt)(t,e)):mf(this.node(),t).delay}function Unt(e,t){return function(){TA(this,e).duration=+t.apply(this,arguments)}}function Qnt(e,t){return t=+t,function(){TA(this,e).duration=t}}function Hnt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Unt:Qnt)(t,e)):mf(this.node(),t).duration}function znt(e,t){if(typeof t!="function")throw new Error;return function(){TA(this,e).ease=t}}function Vnt(e){var t=this._id;return arguments.length?this.each(znt(t,e)):mf(this.node(),t).ease}function $nt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;TA(this,e).ease=r}}function Gnt(e){if(typeof e!="function")throw new Error;return this.each($nt(this._id,e))}function qnt(e){typeof e!="function"&&(e=ude(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var i=t[n],o=i.length,l=a[n]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new a0(a,this._parents,this._name,this._id)}function Knt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,a=t.length,n=r.length,i=Math.min(a,n),o=new Array(a),l=0;l<i;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<a;++l)o[l]=t[l];return new a0(o,this._parents,this._name,this._id)}function Wnt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Xnt(e,t,r){var a,n,i=Wnt(t)?j7:TA;return function(){var o=i(this,e),l=o.on;l!==a&&(n=(a=l).copy()).on(t,r),o.on=n}}function Ynt(e,t){var r=this._id;return arguments.length<2?mf(this.node(),r).on.on(e):this.each(Xnt(r,e,t))}function Jnt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Znt(){return this.on("end.remove",Jnt(this._id))}function est(e){var t=this._name,r=this._id;typeof e!="function"&&(e=N7(e));for(var a=this._groups,n=a.length,i=new Array(n),o=0;o<n;++o)for(var l=a[o],c=l.length,u=i[o]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,z4(u[h],t,r,h,u,mf(d,r)));return new a0(i,this._parents,t,r)}function tst(e){var t=this._name,r=this._id;typeof e!="function"&&(e=cde(e));for(var a=this._groups,n=a.length,i=[],o=[],l=0;l<n;++l)for(var c=a[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=mf(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&z4(m,t,r,x,h,g);i.push(h),o.push(d)}return new a0(i,o,t,r)}var rst=fC.prototype.constructor;function ast(){return new rst(this._groups,this._parents)}function nst(e,t){var r,a,n;return function(){var i=a1(this,e),o=(this.style.removeProperty(e),a1(this,e));return i===o?null:i===r&&o===a?n:n=t(r=i,a=o)}}function kde(e){return function(){this.style.removeProperty(e)}}function sst(e,t,r){var a,n=r+"",i;return function(){var o=a1(this,e);return o===n?null:o===a?i:i=t(a=o,r)}}function ist(e,t,r){var a,n,i;return function(){var o=a1(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),a1(this,e))),o===c?null:o===a&&c===n?i:(n=c,i=t(a=o,l))}}function ost(e,t){var r,a,n,i="style."+t,o="end."+i,l;return function(){var c=TA(this,e),u=c.on,d=c.value[i]==null?l||(l=kde(t)):void 0;(u!==r||n!==d)&&(a=(r=u).copy()).on(o,n=d),c.on=a}}function lst(e,t,r){var a=(e+="")=="transform"?S7e:jde;return t==null?this.styleTween(e,nst(e,a)).on("end.style."+e,kde(e)):typeof t=="function"?this.styleTween(e,ist(e,a,k7(this,"style."+e,t))).each(ost(this._id,e)):this.styleTween(e,sst(e,a,t),r).on("end.style."+e,null)}function cst(e,t,r){return function(a){this.style.setProperty(e,t.call(this,a),r)}}function ust(e,t,r){var a,n;function i(){var o=t.apply(this,arguments);return o!==n&&(a=(n=o)&&cst(e,o,r)),a}return i._value=t,i}function dst(e,t,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,ust(e,t,r??""))}function fst(e){return function(){this.textContent=e}}function Ast(e){return function(){var t=e(this);this.textContent=t??""}}function hst(e){return this.tween("text",typeof e=="function"?Ast(k7(this,"text",e)):fst(e==null?"":e+""))}function mst(e){return function(t){this.textContent=e.call(this,t)}}function pst(e){var t,r;function a(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&mst(n)),t}return a._value=e,a}function gst(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,pst(e))}function xst(){for(var e=this._name,t=this._id,r=Sde(),a=this._groups,n=a.length,i=0;i<n;++i)for(var o=a[i],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=mf(c,t);z4(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new a0(a,this._parents,e,r)}function vst(){var e,t,r=this,a=r._id,n=r.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--n===0&&i()}};r.each(function(){var u=TA(this,a),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),n===0&&i()})}var bst=0;function a0(e,t,r,a){this._groups=e,this._parents=t,this._name=r,this._id=a}function Sde(){return++bst}var uh=fC.prototype;a0.prototype={constructor:a0,select:est,selectAll:tst,selectChild:uh.selectChild,selectChildren:uh.selectChildren,filter:qnt,merge:Knt,selection:ast,transition:xst,call:uh.call,nodes:uh.nodes,node:uh.node,size:uh.size,empty:uh.empty,each:uh.each,on:Ynt,attr:Tnt,attrTween:Pnt,style:lst,styleTween:dst,text:hst,textTween:gst,remove:Znt,tween:Cnt,delay:Mnt,duration:Hnt,ease:Vnt,easeVarying:Gnt,end:vst,[Symbol.iterator]:uh[Symbol.iterator]};function yst(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wst={time:null,delay:0,duration:250,ease:yst};function Nst(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Cst(e){var t,r;e instanceof a0?(t=e._id,e=e._name):(t=Sde(),(r=wst).time=E7(),e=e==null?null:e+"");for(var a=this._groups,n=a.length,i=0;i<n;++i)for(var o=a[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&z4(c,e,t,u,o,r||Nst(c,t));return new a0(a,this._parents,e,t)}fC.prototype.interrupt=ynt;fC.prototype.transition=Cst;const dj=e=>()=>e;function Est(e,{sourceEvent:t,target:r,transform:a,dispatch:n}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:n}})}function Bh(e,t,r){this.k=e,this.x=t,this.y=r}Bh.prototype={constructor:Bh,scale:function(e){return e===1?this:new Bh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Bh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lm=new Bh(1,0,0);Bh.prototype;function S6(e){e.stopImmediatePropagation()}function Zy(e){e.preventDefault(),e.stopImmediatePropagation()}function jst(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function kst(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function NX(){return this.__zoom||Lm}function Sst(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function _st(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bst(e,t,r){var a=e.invertX(t[0][0])-r[0][0],n=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(n>a?(a+n)/2:Math.min(0,a)||Math.max(0,n),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Tst(){var e=jst,t=kst,r=Bst,a=Sst,n=_st,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=O7e,u=U4("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(U){U.property("__zoom",NX).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",L).filter(n).on("touchstart.zoom",D).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(U,H,Q,V){var G=U.selection?U.selection():U;G.property("__zoom",NX),U!==G?_(U,H,Q,V):G.interrupt().each(function(){O(this,arguments).event(V).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},y.scaleBy=function(U,H,Q,V){y.scaleTo(U,function(){var G=this.__zoom.k,J=typeof H=="function"?H.apply(this,arguments):H;return G*J},Q,V)},y.scaleTo=function(U,H,Q,V){y.transform(U,function(){var G=t.apply(this,arguments),J=this.__zoom,W=Q==null?T(G):typeof Q=="function"?Q.apply(this,arguments):Q,Z=J.invert(W),M=typeof H=="function"?H.apply(this,arguments):H;return r(C(N(J,M),W,Z),G,o)},Q,V)},y.translateBy=function(U,H,Q,V){y.transform(U,function(){return r(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof Q=="function"?Q.apply(this,arguments):Q),t.apply(this,arguments),o)},null,V)},y.translateTo=function(U,H,Q,V,G){y.transform(U,function(){var J=t.apply(this,arguments),W=this.__zoom,Z=V==null?T(J):typeof V=="function"?V.apply(this,arguments):V;return r(Lm.translate(Z[0],Z[1]).scale(W.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof Q=="function"?-Q.apply(this,arguments):-Q),J,o)},V,G)};function N(U,H){return H=Math.max(i[0],Math.min(i[1],H)),H===U.k?U:new Bh(H,U.x,U.y)}function C(U,H,Q){var V=H[0]-Q[0]*U.k,G=H[1]-Q[1]*U.k;return V===U.x&&G===U.y?U:new Bh(U.k,V,G)}function T(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function _(U,H,Q,V){U.on("start.zoom",function(){O(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(V).end()}).tween("zoom",function(){var G=this,J=arguments,W=O(G,J).event(V),Z=t.apply(G,J),M=Q==null?T(Z):typeof Q=="function"?Q.apply(G,J):Q,F=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),X=G.__zoom,Y=typeof H=="function"?H.apply(G,J):H,ae=c(X.invert(M).concat(F/X.k),Y.invert(M).concat(F/Y.k));return function(le){if(le===1)le=Y;else{var ie=ae(le),ne=F/ie[2];le=new Bh(ne,M[0]-ie[0]*ne,M[1]-ie[1]*ne)}W.zoom(null,le)}})}function O(U,H,Q){return!Q&&U.__zooming||new j(U,H)}function j(U,H){this.that=U,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(U,H),this.taps=0}j.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,H){return this.mouse&&U!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var H=Zu(this.that).datum();u.call(U,this.that,new Est(U,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),H)}};function S(U,...H){if(!e.apply(this,arguments))return;var Q=O(this,H).event(U),V=this.__zoom,G=Math.max(i[0],Math.min(i[1],V.k*Math.pow(2,a.apply(this,arguments)))),J=eA(U);if(Q.wheel)(Q.mouse[0][0]!==J[0]||Q.mouse[0][1]!==J[1])&&(Q.mouse[1]=V.invert(Q.mouse[0]=J)),clearTimeout(Q.wheel);else{if(V.k===G)return;Q.mouse=[J,V.invert(J)],m5(this),Q.start()}Zy(U),Q.wheel=setTimeout(W,g),Q.zoom("mouse",r(C(N(V,G),Q.mouse[0],Q.mouse[1]),Q.extent,o));function W(){Q.wheel=null,Q.end()}}function B(U,...H){if(h||!e.apply(this,arguments))return;var Q=U.currentTarget,V=O(this,H,!0).event(U),G=Zu(U.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",F,!0),J=eA(U,Q),W=U.clientX,Z=U.clientY;bde(U.view),S6(U),V.mouse=[J,this.__zoom.invert(J)],m5(this),V.start();function M(X){if(Zy(X),!V.moved){var Y=X.clientX-W,ae=X.clientY-Z;V.moved=Y*Y+ae*ae>x}V.event(X).zoom("mouse",r(C(V.that.__zoom,V.mouse[0]=eA(X,Q),V.mouse[1]),V.extent,o))}function F(X){G.on("mousemove.zoom mouseup.zoom",null),yde(X.view,V.moved),Zy(X),V.event(X).end()}}function L(U,...H){if(e.apply(this,arguments)){var Q=this.__zoom,V=eA(U.changedTouches?U.changedTouches[0]:U,this),G=Q.invert(V),J=Q.k*(U.shiftKey?.5:2),W=r(C(N(Q,J),V,G),t.apply(this,H),o);Zy(U),l>0?Zu(this).transition().duration(l).call(_,W,V,U):Zu(this).call(y.transform,W,V,U)}}function D(U,...H){if(e.apply(this,arguments)){var Q=U.touches,V=Q.length,G=O(this,H,U.changedTouches.length===V).event(U),J,W,Z,M;for(S6(U),W=0;W<V;++W)Z=Q[W],M=eA(Z,this),M=[M,this.__zoom.invert(M),Z.identifier],G.touch0?!G.touch1&&G.touch0[2]!==M[2]&&(G.touch1=M,G.taps=0):(G.touch0=M,J=!0,G.taps=1+!!d);d&&(d=clearTimeout(d)),J&&(G.taps<2&&(f=M[0],d=setTimeout(function(){d=null},m)),m5(this),G.start())}}function k(U,...H){if(this.__zooming){var Q=O(this,H).event(U),V=U.changedTouches,G=V.length,J,W,Z,M;for(Zy(U),J=0;J<G;++J)W=V[J],Z=eA(W,this),Q.touch0&&Q.touch0[2]===W.identifier?Q.touch0[0]=Z:Q.touch1&&Q.touch1[2]===W.identifier&&(Q.touch1[0]=Z);if(W=Q.that.__zoom,Q.touch1){var F=Q.touch0[0],X=Q.touch0[1],Y=Q.touch1[0],ae=Q.touch1[1],le=(le=Y[0]-F[0])*le+(le=Y[1]-F[1])*le,ie=(ie=ae[0]-X[0])*ie+(ie=ae[1]-X[1])*ie;W=N(W,Math.sqrt(le/ie)),Z=[(F[0]+Y[0])/2,(F[1]+Y[1])/2],M=[(X[0]+ae[0])/2,(X[1]+ae[1])/2]}else if(Q.touch0)Z=Q.touch0[0],M=Q.touch0[1];else return;Q.zoom("touch",r(C(W,Z,M),Q.extent,o))}}function R(U,...H){if(this.__zooming){var Q=O(this,H).event(U),V=U.changedTouches,G=V.length,J,W;for(S6(U),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),J=0;J<G;++J)W=V[J],Q.touch0&&Q.touch0[2]===W.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===W.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(W=eA(W,this),Math.hypot(f[0]-W[0],f[1]-W[1])<v)){var Z=Zu(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return y.wheelDelta=function(U){return arguments.length?(a=typeof U=="function"?U:dj(+U),y):a},y.filter=function(U){return arguments.length?(e=typeof U=="function"?U:dj(!!U),y):e},y.touchable=function(U){return arguments.length?(n=typeof U=="function"?U:dj(!!U),y):n},y.extent=function(U){return arguments.length?(t=typeof U=="function"?U:dj([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),y):t},y.scaleExtent=function(U){return arguments.length?(i[0]=+U[0],i[1]=+U[1],y):[i[0],i[1]]},y.translateExtent=function(U){return arguments.length?(o[0][0]=+U[0][0],o[1][0]=+U[1][0],o[0][1]=+U[0][1],o[1][1]=+U[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(U){return arguments.length?(r=U,y):r},y.duration=function(U){return arguments.length?(l=+U,y):l},y.interpolate=function(U){return arguments.length?(c=U,y):c},y.on=function(){var U=u.on.apply(u,arguments);return U===u?y:U},y.clickDistance=function(U){return arguments.length?(x=(U=+U)*U,y):Math.sqrt(x)},y.tapDistance=function(U){return arguments.length?(v=+U,y):v},y}const V4=w.createContext(null),Ist=V4.Provider,n0={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},_de=n0.error001();function ms(e,t){const r=w.useContext(V4);if(r===null)throw new Error(_de);return ode(r,e,t)}const fo=()=>{const e=w.useContext(V4);if(e===null)throw new Error(_de);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Ost=e=>e.userSelectionActive?"none":"all";function Bde({position:e,children:t,className:r,style:a,...n}){const i=ms(Ost),o=`${e}`.split("-");return ct.createElement("div",{className:Ul(["react-flow__panel",r,...o]),style:{...a,pointerEvents:i},...n},t)}function Fst({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ct.createElement(Bde,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ct.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Dst=({x:e,y:t,label:r,labelStyle:a={},labelShowBg:n=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=w.useRef(null),[h,m]=w.useState({x:0,y:0,width:0,height:0}),g=Ul(["react-flow__edge-textwrapper",u]);return w.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:ct.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},n&&ct.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),ct.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:a},r),c)};var Pst=w.memo(Dst);const S7=e=>({width:e.offsetWidth,height:e.offsetHeight}),s1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),_7=(e={x:0,y:0},t)=>({x:s1(e.x,t[0][0],t[1][0]),y:s1(e.y,t[0][1],t[1][1])}),CX=(e,t,r)=>e<t?s1(Math.abs(e-t),1,50)/50:e>r?-s1(Math.abs(e-r),1,50)/50:0,Tde=(e,t)=>{const r=CX(e.x,35,t.width-35)*20,a=CX(e.y,35,t.height-35)*20;return[r,a]},Ide=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Rst=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),B7=({x:e,y:t,width:r,height:a})=>({x:e,y:t,x2:e+r,y2:t+a}),Lst=({x:e,y:t,x2:r,y2:a})=>({x:e,y:t,width:r-e,height:a-t}),EX=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),qD=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*a)},Mst=e=>rd(e.width)&&rd(e.height)&&rd(e.x)&&rd(e.y),rd=e=>!isNaN(e)&&isFinite(e),Fs=Symbol.for("internals"),Ode=["Enter"," ","Escape"],Ust=(e,t)=>{},Qst=e=>"nativeEvent"in e;function KD(e){var n,i;const t=Qst(e)?e.nativeEvent:e,r=((i=(n=t.composedPath)==null?void 0:n.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Fde=e=>"clientX"in e,Mm=(e,t)=>{var i,o;const r=Fde(e),a=r?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,n=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:n-((t==null?void 0:t.top)??0)}},yS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},AC=({id:e,path:t,labelX:r,labelY:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>ct.createElement(ct.Fragment,null,ct.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&ct.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),n&&rd(r)&&rd(a)?ct.createElement(Pst,{x:r,y:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);AC.displayName="BaseEdge";function e2(e,t,r){return r===void 0?r:a=>{const n=t().edges.find(i=>i.id===e);n&&r(a,{...n})}}function Dde({sourceX:e,sourceY:t,targetX:r,targetY:a}){const n=Math.abs(r-e)/2,i=r<e?r+n:r-n,o=Math.abs(a-t)/2,l=a<t?a+o:a-o;return[i,l,n,o]}function Pde({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+n*.375+o*.375+r*.125,u=t*.125+i*.375+l*.375+a*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Jg;(function(e){e.Strict="strict",e.Loose="loose"})(Jg||(Jg={}));var hg;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(hg||(hg={}));var dN;(function(e){e.Partial="partial",e.Full="full"})(dN||(dN={}));var vm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vm||(vm={}));var wS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(wS||(wS={}));var Nr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Nr||(Nr={}));function jX({pos:e,x1:t,y1:r,x2:a,y2:n}){return e===Nr.Left||e===Nr.Right?[.5*(t+a),r]:[t,.5*(r+n)]}function Rde({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:a,targetY:n,targetPosition:i=Nr.Top}){const[o,l]=jX({pos:r,x1:e,y1:t,x2:a,y2:n}),[c,u]=jX({pos:i,x1:a,y1:n,x2:e,y2:t}),[d,f,h,m]=Pde({sourceX:e,sourceY:t,targetX:a,targetY:n,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${a},${n}`,d,f,h,m]}const T7=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,sourcePosition:n=Nr.Bottom,targetPosition:i=Nr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,N]=Rde({sourceX:e,sourceY:t,sourcePosition:n,targetX:r,targetY:a,targetPosition:i});return ct.createElement(AC,{path:v,labelX:y,labelY:N,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});T7.displayName="SimpleBezierEdge";const kX={[Nr.Left]:{x:-1,y:0},[Nr.Right]:{x:1,y:0},[Nr.Top]:{x:0,y:-1},[Nr.Bottom]:{x:0,y:1}},Hst=({source:e,sourcePosition:t=Nr.Bottom,target:r})=>t===Nr.Left||t===Nr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},SX=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zst({source:e,sourcePosition:t=Nr.Bottom,target:r,targetPosition:a=Nr.Top,center:n,offset:i}){const o=kX[t],l=kX[a],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:r.x+l.x*i,y:r.y+l.y*i},d=Hst({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[N,C,T,_]=Dde({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=n.x??N,x=n.y??C;const j=[{x:g,y:c.y},{x:g,y:u.y}],S=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===h?m=f==="x"?j:S:m=f==="x"?S:j}else{const j=[{x:c.x,y:u.y}],S=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===h?S:j:m=o.y===h?j:S,t===a){const R=Math.abs(e[f]-r[f]);if(R<=i){const U=Math.min(i-1,i-R);o[f]===h?v[f]=(c[f]>e[f]?-1:1)*U:y[f]=(u[f]>r[f]?-1:1)*U}}if(t!==a){const R=f==="x"?"y":"x",U=o[f]===l[R],H=c[R]>u[R],Q=c[R]<u[R];(o[f]===1&&(!U&&H||U&&Q)||o[f]!==1&&(!U&&Q||U&&H))&&(m=f==="x"?j:S)}const B={x:c.x+v.x,y:c.y+v.y},L={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(B.x-m[0].x),Math.abs(L.x-m[0].x)),k=Math.max(Math.abs(B.y-m[0].y),Math.abs(L.y-m[0].y));D>=k?(g=(B.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(B.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,T,_]}function Vst(e,t,r,a){const n=Math.min(SX(e,t)/2,SX(t,r)/2,a),{x:i,y:o}=t;if(e.x===i&&i===r.x||e.y===o&&o===r.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${i+n*u},${o}Q ${i},${o} ${i},${o+n*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${i},${o+n*c}Q ${i},${o} ${i+n*l},${o}`}function WD({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:a,targetY:n,targetPosition:i=Nr.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,h,m,g]=zst({source:{x:e,y:t},sourcePosition:r,target:{x:a,y:n},targetPosition:i,center:{x:l,y:c},offset:u});return[d.reduce((v,y,N)=>{let C="";return N>0&&N<d.length-1?C=Vst(d[N-1],y,d[N+1],o):C=`${N===0?"M":"L"}${y.x} ${y.y}`,v+=C,v},""),f,h,m,g]}const $4=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Nr.Bottom,targetPosition:h=Nr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,C]=WD({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:a,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return ct.createElement(AC,{path:y,labelX:N,labelY:C,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});$4.displayName="SmoothStepEdge";const I7=w.memo(e=>{var t;return ct.createElement($4,{...e,pathOptions:w.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});I7.displayName="StepEdge";function $st({sourceX:e,sourceY:t,targetX:r,targetY:a}){const[n,i,o,l]=Dde({sourceX:e,sourceY:t,targetX:r,targetY:a});return[`M ${e},${t}L ${r},${a}`,n,i,o,l]}const O7=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=$st({sourceX:e,sourceY:t,targetX:r,targetY:a});return ct.createElement(AC,{path:g,labelX:x,labelY:v,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});O7.displayName="StraightEdge";function fj(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _X({pos:e,x1:t,y1:r,x2:a,y2:n,c:i}){switch(e){case Nr.Left:return[t-fj(t-a,i),r];case Nr.Right:return[t+fj(a-t,i),r];case Nr.Top:return[t,r-fj(r-n,i)];case Nr.Bottom:return[t,r+fj(n-r,i)]}}function Lde({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:a,targetY:n,targetPosition:i=Nr.Top,curvature:o=.25}){const[l,c]=_X({pos:r,x1:e,y1:t,x2:a,y2:n,c:o}),[u,d]=_X({pos:i,x1:a,y1:n,x2:e,y2:t,c:o}),[f,h,m,g]=Pde({sourceX:e,sourceY:t,targetX:a,targetY:n,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${a},${n}`,f,h,m,g]}const NS=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,sourcePosition:n=Nr.Bottom,targetPosition:i=Nr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,C]=Lde({sourceX:e,sourceY:t,sourcePosition:n,targetX:r,targetY:a,targetPosition:i,curvature:x==null?void 0:x.curvature});return ct.createElement(AC,{path:y,labelX:N,labelY:C,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});NS.displayName="BezierEdge";const F7=w.createContext(null),Gst=F7.Provider;F7.Consumer;const qst=()=>w.useContext(F7),Kst=e=>"id"in e&&"source"in e&&"target"in e,Wst=({source:e,sourceHandle:t,target:r,targetHandle:a})=>`reactflow__edge-${e}${t||""}-${r}${a||""}`,XD=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`,Xst=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Yst=(e,t)=>{if(!e.source||!e.target)return t;let r;return Kst(e)?r={...e}:r={...e,id:Wst(e)},Xst(r,t)?t:t.concat(r)},YD=({x:e,y:t},[r,a,n],i,[o,l])=>{const c={x:(e-r)/n,y:(t-a)/n};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},Mde=({x:e,y:t},[r,a,n])=>({x:e*n+r,y:t*n+a}),gb=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],a=(e.height??0)*t[1],n={x:e.position.x-r,y:e.position.y-a};return{...n,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-a}:n}},D7=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((a,n)=>{const{x:i,y:o}=gb(n,t).positionAbsolute;return Rst(a,B7({x:i,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lst(r)},Ude=(e,t,[r,a,n]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/n,y:(t.y-a)/n,width:t.width/n,height:t.height/n},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=gb(d,l),v={x:x.x,y:x.y,width:f||0,height:h||0},y=qD(c,v),N=typeof f>"u"||typeof h>"u"||f===null||h===null,C=i&&y>0,T=(f||0)*(h||0);(N||C||y>=T||d.dragging)&&u.push(d)}),u},Qde=(e,t)=>{const r=e.map(a=>a.id);return t.filter(a=>r.includes(a.source)||r.includes(a.target))},Hde=(e,t,r,a,n,i=.1)=>{const o=t/(e.width*(1+i)),l=r/(e.height*(1+i)),c=Math.min(o,l),u=s1(c,a,n),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},eg=(e,t=0)=>e.transition().duration(t);function BX(e,t,r,a){return(t[r]||[]).reduce((n,i)=>{var o,l;return`${e.id}-${i.id}-${r}`!==a&&n.push({id:i.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),n},[])}function Jst(e,t,r,a,n,i){const{x:o,y:l}=Mm(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=P7(void 0,u),v=u.getAttribute("data-handleid"),y=i({nodeId:g,id:v,type:x});if(y){const N=n.find(C=>C.nodeId===g&&C.type===x&&C.id===v);return{handle:{id:v,type:x,nodeId:g,x:(N==null?void 0:N.x)||r.x,y:(N==null?void 0:N.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(n.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=a){const v=i(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:zde()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const Zst={source:null,target:null,sourceHandle:null,targetHandle:null},zde=()=>({handleDomNode:null,isValid:!1,connection:Zst,endHandle:null});function Vde(e,t,r,a,n,i,o){const l=n==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...zde(),handleDomNode:c};if(c){const d=P7(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?h:a,target:l?r:f,targetHandle:l?a:h};u.connection=x,m&&g&&(t===Jg.Strict?l&&d==="source"||!l&&d==="target":f!==r||h!==a)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=i(x))}return u}function eit({nodes:e,nodeId:t,handleId:r,handleType:a}){return e.reduce((n,i)=>{if(i[Fs]){const{handleBounds:o}=i[Fs];let l=[],c=[];o&&(l=BX(i,o,"source",`${t}-${r}-${a}`),c=BX(i,o,"target",`${t}-${r}-${a}`)),n.push(...l,...c)}return n},[])}function P7(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function _6(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function tit(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function $de({event:e,handleId:t,nodeId:r,onConnect:a,isTarget:n,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Ide(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:N}=i();let C=0,T;const{x:_,y:O}=Mm(e),j=d==null?void 0:d.elementFromPoint(_,O),S=P7(c,j),B=h==null?void 0:h.getBoundingClientRect();if(!B||!S)return;let L,D=Mm(e,B),k=!1,R=null,U=!1,H=null;const Q=eit({nodes:y(),nodeId:r,handleId:t,handleType:S}),V=()=>{if(!m)return;const[W,Z]=Tde(D,B);v({x:W,y:Z}),C=requestAnimationFrame(V)};o({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:t,type:S},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:S});function G(W){const{transform:Z}=i();D=Mm(W,B);const{handle:M,validHandleResult:F}=Jst(W,d,YD(D,Z,!1,[1,1]),g,Q,X=>Vde(X,f,r,t,n?"target":"source",l,d));if(T=M,k||(V(),k=!0),H=F.handleDomNode,R=F.connection,U=F.isValid,o({connectionPosition:T&&U?Mde({x:T.x,y:T.y},Z):D,connectionStatus:tit(!!T,U),connectionEndHandle:F.endHandle}),!T&&!U&&!H)return _6(L);R.source!==R.target&&H&&(_6(L),L=H,H.classList.add("connecting","react-flow__handle-connecting"),H.classList.toggle("valid",U),H.classList.toggle("react-flow__handle-valid",U))}function J(W){var Z,M;(T||H)&&R&&U&&(a==null||a(R)),(M=(Z=i()).onConnectEnd)==null||M.call(Z,W),c&&(u==null||u(W)),_6(L),N(),cancelAnimationFrame(C),k=!1,U=!1,R=null,H=null,d.removeEventListener("mousemove",G),d.removeEventListener("mouseup",J),d.removeEventListener("touchmove",G),d.removeEventListener("touchend",J)}d.addEventListener("mousemove",G),d.addEventListener("mouseup",J),d.addEventListener("touchmove",G),d.addEventListener("touchend",J)}const TX=()=>!0,rit=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),ait=(e,t,r)=>a=>{const{connectionStartHandle:n,connectionEndHandle:i,connectionClickStartHandle:o}=a;return{connecting:(n==null?void 0:n.nodeId)===e&&(n==null?void 0:n.handleId)===t&&(n==null?void 0:n.type)===r||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},Gde=w.forwardRef(({type:e="source",position:t=Nr.Top,isValidConnection:r,isConnectable:a=!0,isConnectableStart:n=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var B,L;const g=o||null,x=e==="target",v=fo(),y=qst(),{connectOnClick:N,noPanClassName:C}=ms(rit,vl),{connecting:T,clickConnecting:_}=ms(ait(y,g,e),vl);y||(L=(B=v.getState()).onError)==null||L.call(B,"010",n0.error010());const O=D=>{const{defaultEdgeOptions:k,onConnect:R,hasDefaultEdges:U}=v.getState(),H={...k,...D};if(U){const{edges:Q,setEdges:V}=v.getState();V(Yst(H,Q))}R==null||R(H),l==null||l(H)},j=D=>{if(!y)return;const k=Fde(D);n&&(k&&D.button===0||!k)&&$de({event:D,handleId:g,nodeId:y,onConnect:O,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||TX}),k?d==null||d(D):f==null||f(D)},S=D=>{const{onClickConnectStart:k,onClickConnectEnd:R,connectionClickStartHandle:U,connectionMode:H,isValidConnection:Q}=v.getState();if(!y||!U&&!n)return;if(!U){k==null||k(D,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const V=Ide(D.target),G=r||Q||TX,{connection:J,isValid:W}=Vde({nodeId:y,id:g,type:e},H,U.nodeId,U.handleId||null,U.type,G,V);W&&O(J),R==null||R(D),v.setState({connectionClickStartHandle:null})};return ct.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Ul(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!x,target:x,connectable:a,connectablestart:n,connectableend:i,connecting:_,connectionindicator:a&&(n&&!T||i&&T)}]),onMouseDown:j,onTouchStart:j,onClick:N?S:void 0,ref:m,...h},c)});Gde.displayName="Handle";var i1=w.memo(Gde);const qde=({data:e,isConnectable:t,targetPosition:r=Nr.Top,sourcePosition:a=Nr.Bottom})=>ct.createElement(ct.Fragment,null,ct.createElement(i1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ct.createElement(i1,{type:"source",position:a,isConnectable:t}));qde.displayName="DefaultNode";var JD=w.memo(qde);const Kde=({data:e,isConnectable:t,sourcePosition:r=Nr.Bottom})=>ct.createElement(ct.Fragment,null,e==null?void 0:e.label,ct.createElement(i1,{type:"source",position:r,isConnectable:t}));Kde.displayName="InputNode";var Wde=w.memo(Kde);const Xde=({data:e,isConnectable:t,targetPosition:r=Nr.Top})=>ct.createElement(ct.Fragment,null,ct.createElement(i1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Xde.displayName="OutputNode";var Yde=w.memo(Xde);const R7=()=>null;R7.displayName="GroupNode";const nit=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Aj=e=>e.id;function sit(e,t){return vl(e.selectedNodes.map(Aj),t.selectedNodes.map(Aj))&&vl(e.selectedEdges.map(Aj),t.selectedEdges.map(Aj))}const Jde=w.memo(({onSelectionChange:e})=>{const t=fo(),{selectedNodes:r,selectedEdges:a}=ms(nit,sit);return w.useEffect(()=>{const n={nodes:r,edges:a};e==null||e(n),t.getState().onSelectionChange.forEach(i=>i(n))},[r,a,e]),null});Jde.displayName="SelectionListener";const iit=e=>!!e.onSelectionChange;function oit({onSelectionChange:e}){const t=ms(iit);return e||t?ct.createElement(Jde,{onSelectionChange:e}):null}const lit=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function lv(e,t){w.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function pa(e,t,r){w.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const cit=({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:n,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:N,onEdgesChange:C,elementsSelectable:T,connectionMode:_,snapGrid:O,snapToGrid:j,translateExtent:S,connectOnClick:B,defaultEdgeOptions:L,fitView:D,fitViewOptions:k,onNodesDelete:R,onEdgesDelete:U,onNodeDrag:H,onNodeDragStart:Q,onNodeDragStop:V,onSelectionDrag:G,onSelectionDragStart:J,onSelectionDragStop:W,noPanClassName:Z,nodeOrigin:M,rfId:F,autoPanOnConnect:X,autoPanOnNodeDrag:Y,onError:ae,connectionRadius:le,isValidConnection:ie,nodeDragThreshold:ne})=>{const{setNodes:oe,setEdges:we,setDefaultNodesAndEdges:K,setMinZoom:Ee,setMaxZoom:_e,setTranslateExtent:Ce,setNodeExtent:de,reset:xe}=ms(lit,vl),he=fo();return w.useEffect(()=>{const ye=a==null?void 0:a.map(ce=>({...ce,...L}));return K(r,ye),()=>{xe()}},[]),pa("defaultEdgeOptions",L,he.setState),pa("connectionMode",_,he.setState),pa("onConnect",n,he.setState),pa("onConnectStart",i,he.setState),pa("onConnectEnd",o,he.setState),pa("onClickConnectStart",l,he.setState),pa("onClickConnectEnd",c,he.setState),pa("nodesDraggable",u,he.setState),pa("nodesConnectable",d,he.setState),pa("nodesFocusable",f,he.setState),pa("edgesFocusable",h,he.setState),pa("edgesUpdatable",m,he.setState),pa("elementsSelectable",T,he.setState),pa("elevateNodesOnSelect",g,he.setState),pa("snapToGrid",j,he.setState),pa("snapGrid",O,he.setState),pa("onNodesChange",N,he.setState),pa("onEdgesChange",C,he.setState),pa("connectOnClick",B,he.setState),pa("fitViewOnInit",D,he.setState),pa("fitViewOnInitOptions",k,he.setState),pa("onNodesDelete",R,he.setState),pa("onEdgesDelete",U,he.setState),pa("onNodeDrag",H,he.setState),pa("onNodeDragStart",Q,he.setState),pa("onNodeDragStop",V,he.setState),pa("onSelectionDrag",G,he.setState),pa("onSelectionDragStart",J,he.setState),pa("onSelectionDragStop",W,he.setState),pa("noPanClassName",Z,he.setState),pa("nodeOrigin",M,he.setState),pa("rfId",F,he.setState),pa("autoPanOnConnect",X,he.setState),pa("autoPanOnNodeDrag",Y,he.setState),pa("onError",ae,he.setState),pa("connectionRadius",le,he.setState),pa("isValidConnection",ie,he.setState),pa("nodeDragThreshold",ne,he.setState),lv(e,oe),lv(t,we),lv(x,Ee),lv(v,_e),lv(S,Ce),lv(y,de),null},IX={display:"none"},uit={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Zde="react-flow__node-desc",efe="react-flow__edge-desc",dit="react-flow__aria-live",fit=e=>e.ariaLiveMessage;function Ait({rfId:e}){const t=ms(fit);return ct.createElement("div",{id:`${dit}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:uit},t)}function hit({rfId:e,disableKeyboardA11y:t}){return ct.createElement(ct.Fragment,null,ct.createElement("div",{id:`${Zde}-${e}`,style:IX},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ct.createElement("div",{id:`${efe}-${e}`,style:IX},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ct.createElement(Ait,{rfId:e}))}var fN=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,a]=w.useState(!1),n=w.useRef(!1),i=w.useRef(new Set([])),[o,l]=w.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return w.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(n.current=m.ctrlKey||m.metaKey||m.shiftKey,(!n.current||n.current&&!t.actInsideInputWithModifier)&&KD(m))return!1;const x=FX(m.code,l);i.current.add(m[x]),OX(o,i.current,!1)&&(m.preventDefault(),a(!0))},f=m=>{if((!n.current||n.current&&!t.actInsideInputWithModifier)&&KD(m))return!1;const x=FX(m.code,l);OX(o,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(m[x]),m.key==="Meta"&&i.current.clear(),n.current=!1},h=()=>{i.current.clear(),a(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,a]),r};function OX(e,t,r){return e.filter(a=>r||a.length===t.size).some(a=>a.every(n=>t.has(n)))}function FX(e,t){return t.includes(e)?"code":"key"}function tfe(e,t,r,a){var l,c;const n=e.parentNode||e.parentId;if(!n)return r;const i=t.get(n),o=gb(i,a);return tfe(i,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=i[Fs])==null?void 0:l.z)??0)>(r.z??0)?((c=i[Fs])==null?void 0:c.z)??0:r.z??0},a)}function rfe(e,t,r){e.forEach(a=>{var i;const n=a.parentNode||a.parentId;if(n&&!e.has(n))throw new Error(`Parent node ${n} not found`);if(n||r!=null&&r[a.id]){const{x:o,y:l,z:c}=tfe(a,e,{...a.position,z:((i=a[Fs])==null?void 0:i.z)??0},t);a.positionAbsolute={x:o,y:l},a[Fs].z=c,r!=null&&r[a.id]&&(a[Fs].isParent=!0)}})}function B6(e,t,r,a){const n=new Map,i={},o=a?1e3:0;return e.forEach(l=>{var m;const c=(rd(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(i[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Fs,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Fs])==null?void 0:m.handleBounds,z:c}}),n.set(l.id,d)}),rfe(n,r,i),n}function afe(e,t={}){const{getNodes:r,width:a,height:n,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var N;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(N=t.nodes)!=null&&N.length?y&&t.nodes.some(C=>C.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=D7(g,f),{x:y,y:N,zoom:C}=Hde(v,a,n,t.minZoom??i,t.maxZoom??o,t.padding??.1),T=Lm.translate(y,N).scale(C);return typeof t.duration=="number"&&t.duration>0?l.transform(eg(c,t.duration),T):l.transform(c,T),!0}}return!1}function mit(e,t){return e.forEach(r=>{const a=t.get(r.id);a&&t.set(a.id,{...a,[Fs]:a[Fs],selected:r.selected})}),new Map(t)}function pit(e,t){return t.map(r=>{const a=e.find(n=>n.id===r.id);return a&&(r.selected=a.selected),r})}function hj({changedNodes:e,changedEdges:t,get:r,set:a}){const{nodeInternals:n,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&a({nodeInternals:mit(e,n)}),o==null||o(e)),t!=null&&t.length&&(u&&a({edges:pit(t,i)}),l==null||l(t))}const cv=()=>{},git={zoomIn:cv,zoomOut:cv,zoomTo:cv,getZoom:()=>1,setViewport:cv,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:cv,fitBounds:cv,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},xit=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),vit=()=>{const e=fo(),{d3Zoom:t,d3Selection:r}=ms(xit,vl);return w.useMemo(()=>r&&t?{zoomIn:n=>t.scaleBy(eg(r,n==null?void 0:n.duration),1.2),zoomOut:n=>t.scaleBy(eg(r,n==null?void 0:n.duration),1/1.2),zoomTo:(n,i)=>t.scaleTo(eg(r,i==null?void 0:i.duration),n),getZoom:()=>e.getState().transform[2],setViewport:(n,i)=>{const[o,l,c]=e.getState().transform,u=Lm.translate(n.x??o,n.y??l).scale(n.zoom??c);t.transform(eg(r,i==null?void 0:i.duration),u)},getViewport:()=>{const[n,i,o]=e.getState().transform;return{x:n,y:i,zoom:o}},fitView:n=>afe(e.getState,n),setCenter:(n,i,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-n*d,h=c/2-i*d,m=Lm.translate(f,h).scale(d);t.transform(eg(r,o==null?void 0:o.duration),m)},fitBounds:(n,i)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Hde(n,o,l,c,u,(i==null?void 0:i.padding)??.1),m=Lm.translate(d,f).scale(h);t.transform(eg(r,i==null?void 0:i.duration),m)},project:n=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),YD(n,i,o,l)},screenToFlowPosition:n=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return n;const{x:u,y:d}=c.getBoundingClientRect(),f={x:n.x-u,y:n.y-d};return YD(f,i,o,l)},flowToScreenPosition:n=>{const{transform:i,domNode:o}=e.getState();if(!o)return n;const{x:l,y:c}=o.getBoundingClientRect(),u=Mde(n,i);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:git,[t,r])};function G4(){const e=vit(),t=fo(),r=w.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),a=w.useCallback(x=>t.getState().nodeInternals.get(x),[]),n=w.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),i=w.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=w.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:N,onNodesChange:C}=t.getState(),T=v(),_=typeof x=="function"?x(T):x;if(N)y(_);else if(C){const O=_.length===0?T.map(j=>({type:"remove",id:j.id})):_.map(j=>({item:j,type:"reset"}));C(O)}},[]),l=w.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:N,onEdgesChange:C}=t.getState(),T=typeof x=="function"?x(v):x;if(N)y(T);else if(C){const _=T.length===0?v.map(O=>({type:"remove",id:O.id})):T.map(O=>({item:O,type:"reset"}));C(_)}},[]),c=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:N,hasDefaultNodes:C,onNodesChange:T}=t.getState();if(C){const O=[...y(),...v];N(O)}else if(T){const _=v.map(O=>({item:O,type:"add"}));T(_)}},[]),u=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:N,hasDefaultEdges:C,onEdgesChange:T}=t.getState();if(C)N([...y,...v]);else if(T){const _=v.map(O=>({item:O,type:"add"}));T(_)}},[]),d=w.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[N,C,T]=y;return{nodes:x().map(_=>({..._})),edges:v.map(_=>({..._})),viewport:{x:N,y:C,zoom:T}}},[]),f=w.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:N,edges:C,hasDefaultNodes:T,hasDefaultEdges:_,onNodesDelete:O,onEdgesDelete:j,onNodesChange:S,onEdgesChange:B}=t.getState(),L=(x||[]).map(H=>H.id),D=(v||[]).map(H=>H.id),k=N().reduce((H,Q)=>{const V=Q.parentNode||Q.parentId,G=!L.includes(Q.id)&&V&&H.find(W=>W.id===V);return(typeof Q.deletable=="boolean"?Q.deletable:!0)&&(L.includes(Q.id)||G)&&H.push(Q),H},[]),R=C.filter(H=>typeof H.deletable=="boolean"?H.deletable:!0),U=R.filter(H=>D.includes(H.id));if(k||U){const H=Qde(k,R),Q=[...U,...H],V=Q.reduce((G,J)=>(G.includes(J.id)||G.push(J.id),G),[]);if((_||T)&&(_&&t.setState({edges:C.filter(G=>!V.includes(G.id))}),T&&(k.forEach(G=>{y.delete(G.id)}),t.setState({nodeInternals:new Map(y)}))),V.length>0&&(j==null||j(Q),B&&B(V.map(G=>({id:G,type:"remove"})))),k.length>0&&(O==null||O(k),S)){const G=k.map(J=>({id:J.id,type:"remove"}));S(G)}}},[]),h=w.useCallback(x=>{const v=Mst(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:EX(y),y,v]},[]),m=w.useCallback((x,v=!0,y)=>{const[N,C,T]=h(x);return N?(y||t.getState().getNodes()).filter(_=>{if(!T&&(_.id===C.id||!_.positionAbsolute))return!1;const O=EX(_),j=qD(O,N);return v&&j>0||j>=N.width*N.height}):[]},[]),g=w.useCallback((x,v,y=!0)=>{const[N]=h(x);if(!N)return!1;const C=qD(N,v);return y&&C>0||C>=N.width*N.height},[]);return w.useMemo(()=>({...e,getNodes:r,getNode:a,getEdges:n,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,a,n,i,o,l,c,u,d,f,m,g])}const bit={actInsideInputWithModifier:!1};var yit=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=fo(),{deleteElements:a}=G4(),n=fN(e,bit),i=fN(t);w.useEffect(()=>{if(n){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);a({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[n]),w.useEffect(()=>{r.setState({multiSelectionActive:i})},[i])};function wit(e){const t=fo();w.useEffect(()=>{let r;const a=()=>{var i,o;if(!e.current)return;const n=S7(e.current);(n.height===0||n.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",n0.error004())),t.setState({width:n.width||500,height:n.height||500})};return a(),window.addEventListener("resize",a),e.current&&(r=new ResizeObserver(()=>a()),r.observe(e.current)),()=>{window.removeEventListener("resize",a),r&&e.current&&r.unobserve(e.current)}},[])}const L7={position:"absolute",width:"100%",height:"100%",top:0,left:0},Nit=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mj=e=>({x:e.x,y:e.y,zoom:e.k}),uv=(e,t)=>e.target.closest(`.${t}`),DX=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),PX=e=>{const t=e.ctrlKey&&yS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Cit=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Eit=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:a,zoomOnScroll:n=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=hg.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:N,noWheelClassName:C,noPanClassName:T})=>{const _=w.useRef(),O=fo(),j=w.useRef(!1),S=w.useRef(!1),B=w.useRef(null),L=w.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:k,d3ZoomHandler:R,userSelectionActive:U}=ms(Cit,vl),H=fN(v),Q=w.useRef(0),V=w.useRef(!1),G=w.useRef();return wit(B),w.useEffect(()=>{if(B.current){const J=B.current.getBoundingClientRect(),W=Tst().scaleExtent([g,x]).translateExtent(m),Z=Zu(B.current).call(W),M=Lm.translate(h.x,h.y).scale(s1(h.zoom,g,x)),F=[[0,0],[J.width,J.height]],X=W.constrain()(M,F,m);W.transform(Z,X),W.wheelDelta(PX),O.setState({d3Zoom:W,d3Selection:Z,d3ZoomHandler:Z.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:B.current.closest(".react-flow")})}},[]),w.useEffect(()=>{k&&D&&(o&&!H&&!U?k.on("wheel.zoom",J=>{if(uv(J,C))return!1;J.preventDefault(),J.stopImmediatePropagation();const W=k.property("__zoom").k||1;if(J.ctrlKey&&i){const ie=eA(J),ne=PX(J),oe=W*Math.pow(2,ne);D.scaleTo(k,oe,ie,J);return}const Z=J.deltaMode===1?20:1;let M=c===hg.Vertical?0:J.deltaX*Z,F=c===hg.Horizontal?0:J.deltaY*Z;!yS()&&J.shiftKey&&c!==hg.Vertical&&(M=J.deltaY*Z,F=0),D.translateBy(k,-(M/W)*l,-(F/W)*l,{internal:!0});const X=mj(k.property("__zoom")),{onViewportChangeStart:Y,onViewportChange:ae,onViewportChangeEnd:le}=O.getState();clearTimeout(G.current),V.current||(V.current=!0,t==null||t(J,X),Y==null||Y(X)),V.current&&(e==null||e(J,X),ae==null||ae(X),G.current=setTimeout(()=>{r==null||r(J,X),le==null||le(X),V.current=!1},150))},{passive:!1}):typeof R<"u"&&k.on("wheel.zoom",function(J,W){if(!y&&J.type==="wheel"&&!J.ctrlKey||uv(J,C))return null;J.preventDefault(),R.call(this,J,W)},{passive:!1}))},[U,o,c,k,D,R,H,i,y,C,t,e,r]),w.useEffect(()=>{D&&D.on("start",J=>{var M,F;if(!J.sourceEvent||J.sourceEvent.internal)return null;Q.current=(M=J.sourceEvent)==null?void 0:M.button;const{onViewportChangeStart:W}=O.getState(),Z=mj(J.transform);j.current=!0,L.current=Z,((F=J.sourceEvent)==null?void 0:F.type)==="mousedown"&&O.setState({paneDragging:!0}),W==null||W(Z),t==null||t(J.sourceEvent,Z)})},[D,t]),w.useEffect(()=>{D&&(U&&!j.current?D.on("zoom",null):U||D.on("zoom",J=>{var Z;const{onViewportChange:W}=O.getState();if(O.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),S.current=!!(a&&DX(f,Q.current??0)),(e||W)&&!((Z=J.sourceEvent)!=null&&Z.internal)){const M=mj(J.transform);W==null||W(M),e==null||e(J.sourceEvent,M)}}))},[U,D,e,f,a]),w.useEffect(()=>{D&&D.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=O.getState();if(j.current=!1,O.setState({paneDragging:!1}),a&&DX(f,Q.current??0)&&!S.current&&a(J.sourceEvent),S.current=!1,(r||W)&&Nit(L.current,J.transform)){const Z=mj(J.transform);L.current=Z,clearTimeout(_.current),_.current=setTimeout(()=>{W==null||W(Z),r==null||r(J.sourceEvent,Z)},o?150:0)}})},[D,o,f,r,a]),w.useEffect(()=>{D&&D.filter(J=>{const W=H||n,Z=i&&J.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&J.button===1&&J.type==="mousedown"&&(uv(J,"react-flow__node")||uv(J,"react-flow__edge")))return!0;if(!f&&!W&&!o&&!u&&!i||U||!u&&J.type==="dblclick"||uv(J,C)&&J.type==="wheel"||uv(J,T)&&(J.type!=="wheel"||o&&J.type==="wheel"&&!H)||!i&&J.ctrlKey&&J.type==="wheel"||!W&&!o&&!Z&&J.type==="wheel"||!f&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(f)&&!f.includes(J.button)&&J.type==="mousedown")return!1;const M=Array.isArray(f)&&f.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&M})},[U,D,n,i,o,u,f,d,H]),ct.createElement("div",{className:"react-flow__renderer",ref:B,style:L7},N)},jit=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function kit(){const{userSelectionActive:e,userSelectionRect:t}=ms(jit,vl);return e&&t?ct.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function RX(e,t){const r=t.parentNode||t.parentId,a=e.find(n=>n.id===r);if(a){const n=t.position.x+t.width-a.width,i=t.position.y+t.height-a.height;if(n>0||i>0||t.position.x<0||t.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,n>0&&(a.style.width+=n),i>0&&(a.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);a.position.x=a.position.x-o,a.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);a.position.y=a.position.y-o,a.style.height+=o,t.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function nfe(e,t){if(e.some(a=>a.type==="reset"))return e.filter(a=>a.type==="reset").map(a=>a.item);const r=e.filter(a=>a.type==="add").map(a=>a.item);return t.reduce((a,n)=>{const i=e.filter(l=>l.id===n.id);if(i.length===0)return a.push(n),a;const o={...n};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&RX(a,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&RX(a,o);break}case"remove":return a}return a.push(o),a},r)}function sfe(e,t){return nfe(e,t)}function Sit(e,t){return nfe(e,t)}const fm=(e,t)=>({id:e,type:"select",selected:t});function zv(e,t){return e.reduce((r,a)=>{const n=t.includes(a.id);return!a.selected&&n?(a.selected=!0,r.push(fm(a.id,!0))):a.selected&&!n&&(a.selected=!1,r.push(fm(a.id,!1))),r},[])}const T6=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},_it=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ife=w.memo(({isSelecting:e,selectionMode:t=dN.Full,panOnDrag:r,onSelectionStart:a,onSelectionEnd:n,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=w.useRef(null),m=fo(),g=w.useRef(0),x=w.useRef(0),v=w.useRef(),{userSelectionActive:y,elementsSelectable:N,dragging:C}=ms(_it,vl),T=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},_=R=>{i==null||i(R),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},O=R=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){R.preventDefault();return}o==null||o(R)},j=l?R=>l(R):void 0,S=R=>{const{resetSelectedElements:U,domNode:H}=m.getState();if(v.current=H==null?void 0:H.getBoundingClientRect(),!N||!e||R.button!==0||R.target!==h.current||!v.current)return;const{x:Q,y:V}=Mm(R,v.current);U(),m.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:V,x:Q,y:V}}),a==null||a(R)},B=R=>{const{userSelectionRect:U,nodeInternals:H,edges:Q,transform:V,onNodesChange:G,onEdgesChange:J,nodeOrigin:W,getNodes:Z}=m.getState();if(!e||!v.current||!U)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const M=Mm(R,v.current),F=U.startX??0,X=U.startY??0,Y={...U,x:M.x<F?M.x:F,y:M.y<X?M.y:X,width:Math.abs(M.x-F),height:Math.abs(M.y-X)},ae=Z(),le=Ude(H,Y,V,t===dN.Partial,!0,W),ie=Qde(le,Q).map(oe=>oe.id),ne=le.map(oe=>oe.id);if(g.current!==ne.length){g.current=ne.length;const oe=zv(ae,ne);oe.length&&(G==null||G(oe))}if(x.current!==ie.length){x.current=ie.length;const oe=zv(Q,ie);oe.length&&(J==null||J(oe))}m.setState({userSelectionRect:Y})},L=R=>{if(R.button!==0)return;const{userSelectionRect:U}=m.getState();!y&&U&&R.target===h.current&&(_==null||_(R)),m.setState({nodesSelectionActive:g.current>0}),T(),n==null||n(R)},D=R=>{y&&(m.setState({nodesSelectionActive:g.current>0}),n==null||n(R)),T()},k=N&&(e||y);return ct.createElement("div",{className:Ul(["react-flow__pane",{dragging:C,selection:e}]),onClick:k?void 0:T6(_,h),onContextMenu:T6(O,h),onWheel:T6(j,h),onMouseEnter:k?void 0:c,onMouseDown:k?S:void 0,onMouseMove:k?B:u,onMouseUp:k?L:void 0,onMouseLeave:k?D:d,ref:h,style:L7},f,ct.createElement(kit,null))});ife.displayName="Pane";function ofe(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const a=t.get(r);return a?a.selected?!0:ofe(a,t):!1}function LX(e,t,r){let a=e;do{if(a!=null&&a.matches(t))return!0;if(a===r.current)return!1;a=a.parentElement}while(a);return!1}function Bit(e,t,r,a){return Array.from(e.values()).filter(n=>(n.selected||n.id===a)&&(!n.parentNode||n.parentId||!ofe(n,e))&&(n.draggable||t&&typeof n.draggable>"u")).map(n=>{var i,o;return{id:n.id,position:n.position||{x:0,y:0},positionAbsolute:n.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((i=n.positionAbsolute)==null?void 0:i.x)??0),y:r.y-(((o=n.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:n.extent,parentNode:n.parentNode||n.parentId,parentId:n.parentNode||n.parentId,width:n.width,height:n.height,expandParent:n.expandParent}})}function Tit(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function lfe(e,t,r,a,n=[0,0],i){const o=Tit(e,e.extent||a);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=gb(f,n).positionAbsolute;l=f&&rd(h)&&rd(m)&&rd(f.width)&&rd(f.height)?[[h+e.width*n[0],m+e.height*n[1]],[h+f.width-e.width+e.width*n[0],m+f.height-e.height+e.height*n[1]]]:l}else i==null||i("005",n0.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=gb(f,n).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=gb(f,n).positionAbsolute}const d=l&&l!=="parent"?_7(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function I6({nodeId:e,dragItems:t,nodeInternals:r}){const a=t.map(n=>({...r.get(n.id),position:n.position,positionAbsolute:n.positionAbsolute}));return[e?a.find(n=>n.id===e):a[0],a]}const MX=(e,t,r,a)=>{const n=t.querySelectorAll(e);if(!n||!n.length)return null;const i=Array.from(n),o=t.getBoundingClientRect(),l={x:o.width*a[0],y:o.height*a[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...S7(c)}})};function t2(e,t,r){return r===void 0?r:a=>{const n=t().nodeInternals.get(e);n&&r(a,{...n})}}function ZD({id:e,store:t,unselect:r=!1,nodeRef:a}){const{addSelectedNodes:n,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",n0.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=a==null?void 0:a.current)==null?void 0:d.blur()})):n([e])}function Iit(){const e=fo();return w.useCallback(({sourceEvent:r})=>{const{transform:a,snapGrid:n,snapToGrid:i}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-a[0])/a[2],y:(l-a[1])/a[2]};return{xSnapped:i?n[0]*Math.round(c.x/n[0]):c.x,ySnapped:i?n[1]*Math.round(c.y/n[1]):c.y,...c}},[])}function O6(e){return(t,r,a)=>e==null?void 0:e(t,a)}function cfe({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:a,nodeId:n,isSelectable:i,selectNodesOnDrag:o}){const l=fo(),[c,u]=w.useState(!1),d=w.useRef([]),f=w.useRef({x:null,y:null}),h=w.useRef(0),m=w.useRef(null),g=w.useRef({x:0,y:0}),x=w.useRef(null),v=w.useRef(!1),y=w.useRef(!1),N=w.useRef(!1),C=Iit();return w.useEffect(()=>{if(e!=null&&e.current){const T=Zu(e.current),_=({x:S,y:B})=>{const{nodeInternals:L,onNodeDrag:D,onSelectionDrag:k,updateNodePositions:R,nodeExtent:U,snapGrid:H,snapToGrid:Q,nodeOrigin:V,onError:G}=l.getState();f.current={x:S,y:B};let J=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&U){const M=D7(d.current,V);W=B7(M)}if(d.current=d.current.map(M=>{const F={x:S-M.distance.x,y:B-M.distance.y};Q&&(F.x=H[0]*Math.round(F.x/H[0]),F.y=H[1]*Math.round(F.y/H[1]));const X=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];d.current.length>1&&U&&!M.extent&&(X[0][0]=M.positionAbsolute.x-W.x+U[0][0],X[1][0]=M.positionAbsolute.x+(M.width??0)-W.x2+U[1][0],X[0][1]=M.positionAbsolute.y-W.y+U[0][1],X[1][1]=M.positionAbsolute.y+(M.height??0)-W.y2+U[1][1]);const Y=lfe(M,F,L,X,V,G);return J=J||M.position.x!==Y.position.x||M.position.y!==Y.position.y,M.position=Y.position,M.positionAbsolute=Y.positionAbsolute,M}),!J)return;R(d.current,!0,!0),u(!0);const Z=n?D:O6(k);if(Z&&x.current){const[M,F]=I6({nodeId:n,dragItems:d.current,nodeInternals:L});Z(x.current,M,F)}},O=()=>{if(!m.current)return;const[S,B]=Tde(g.current,m.current);if(S!==0||B!==0){const{transform:L,panBy:D}=l.getState();f.current.x=(f.current.x??0)-S/L[2],f.current.y=(f.current.y??0)-B/L[2],D({x:S,y:B})&&_(f.current)}h.current=requestAnimationFrame(O)},j=S=>{var V;const{nodeInternals:B,multiSelectionActive:L,nodesDraggable:D,unselectNodesAndEdges:k,onNodeDragStart:R,onSelectionDragStart:U}=l.getState();y.current=!0;const H=n?R:O6(U);(!o||!i)&&!L&&n&&((V=B.get(n))!=null&&V.selected||k()),n&&i&&o&&ZD({id:n,store:l,nodeRef:e});const Q=C(S);if(f.current=Q,d.current=Bit(B,D,Q,n),H&&d.current){const[G,J]=I6({nodeId:n,dragItems:d.current,nodeInternals:B});H(S.sourceEvent,G,J)}};if(t)T.on(".drag",null);else{const S=Ant().on("start",B=>{const{domNode:L,nodeDragThreshold:D}=l.getState();D===0&&j(B),N.current=!1;const k=C(B);f.current=k,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=Mm(B.sourceEvent,m.current)}).on("drag",B=>{var R,U;const L=C(B),{autoPanOnNodeDrag:D,nodeDragThreshold:k}=l.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!v.current&&y.current&&D&&(v.current=!0,O()),!y.current){const H=L.xSnapped-(((R=f==null?void 0:f.current)==null?void 0:R.x)??0),Q=L.ySnapped-(((U=f==null?void 0:f.current)==null?void 0:U.y)??0);Math.sqrt(H*H+Q*Q)>k&&j(B)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=Mm(B.sourceEvent,m.current),_(L))}}).on("end",B=>{if(!(!y.current||N.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:L,nodeInternals:D,onNodeDragStop:k,onSelectionDragStop:R}=l.getState(),U=n?k:O6(R);if(L(d.current,!1,!1),U){const[H,Q]=I6({nodeId:n,dragItems:d.current,nodeInternals:D});U(B.sourceEvent,H,Q)}}}).filter(B=>{const L=B.target;return!B.button&&(!r||!LX(L,`.${r}`,e))&&(!a||LX(L,a,e))});return T.call(S),()=>{T.on(".drag",null)}}}},[e,t,r,a,i,l,n,o,C]),c}function ufe(){const e=fo();return w.useCallback(r=>{const{nodeInternals:a,nodeExtent:n,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(N=>N.selected&&(N.draggable||d&&typeof N.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(N=>{if(N.positionAbsolute){const C={x:N.positionAbsolute.x+x,y:N.positionAbsolute.y+v};l&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));const{positionAbsolute:T,position:_}=lfe(N,C,a,n,void 0,u);N.position=_,N.positionAbsolute=T}return N});i(y,!0,!1)},[])}const xb={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var r2=e=>{const t=({id:r,type:a,data:n,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:N,isSelectable:C,isConnectable:T,isFocusable:_,selectNodesOnDrag:O,sourcePosition:j,targetPosition:S,hidden:B,resizeObserver:L,dragHandle:D,zIndex:k,isParent:R,noDragClassName:U,noPanClassName:H,initialized:Q,disableKeyboardA11y:V,ariaLabel:G,rfId:J,hasHandleBounds:W})=>{const Z=fo(),M=w.useRef(null),F=w.useRef(null),X=w.useRef(j),Y=w.useRef(S),ae=w.useRef(a),le=C||N||d||f||h||m,ie=ufe(),ne=t2(r,Z.getState,f),oe=t2(r,Z.getState,h),we=t2(r,Z.getState,m),K=t2(r,Z.getState,g),Ee=t2(r,Z.getState,x),_e=xe=>{const{nodeDragThreshold:he}=Z.getState();if(C&&(!O||!N||he>0)&&ZD({id:r,store:Z,nodeRef:M}),d){const ye=Z.getState().nodeInternals.get(r);ye&&d(xe,{...ye})}},Ce=xe=>{if(!KD(xe)&&!V)if(Ode.includes(xe.key)&&C){const he=xe.key==="Escape";ZD({id:r,store:Z,unselect:he,nodeRef:M})}else N&&u&&Object.prototype.hasOwnProperty.call(xb,xe.key)&&(Z.setState({ariaLiveMessage:`Moved selected node ${xe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),ie({x:xb[xe.key].x,y:xb[xe.key].y,isShiftPressed:xe.shiftKey}))};w.useEffect(()=>()=>{F.current&&(L==null||L.unobserve(F.current),F.current=null)},[]),w.useEffect(()=>{if(M.current&&!B){const xe=M.current;(!Q||!W||F.current!==xe)&&(F.current&&(L==null||L.unobserve(F.current)),L==null||L.observe(xe),F.current=xe)}},[B,Q,W]),w.useEffect(()=>{const xe=ae.current!==a,he=X.current!==j,ye=Y.current!==S;M.current&&(xe||he||ye)&&(xe&&(ae.current=a),he&&(X.current=j),ye&&(Y.current=S),Z.getState().updateNodeDimensions([{id:r,nodeElement:M.current,forceUpdate:!0}]))},[r,a,j,S]);const de=cfe({nodeRef:M,disabled:B||!N,noDragClassName:U,handleSelector:D,nodeId:r,isSelectable:C,selectNodesOnDrag:O});return B?null:ct.createElement("div",{className:Ul(["react-flow__node",`react-flow__node-${a}`,{[H]:N},y,{selected:u,selectable:C,parent:R,dragging:de}]),ref:M,style:{zIndex:k,transform:`translate(${l}px,${c}px)`,pointerEvents:le?"all":"none",visibility:Q?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ne,onMouseMove:oe,onMouseLeave:we,onContextMenu:K,onClick:_e,onDoubleClick:Ee,onKeyDown:_?Ce:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":V?void 0:`${Zde}-${J}`,"aria-label":G},ct.createElement(Gst,{value:r},ct.createElement(e,{id:r,data:n,type:a,xPos:i,yPos:o,selected:u,isConnectable:T,sourcePosition:j,targetPosition:S,dragging:de,dragHandle:D,zIndex:k})))};return t.displayName="NodeWrapper",w.memo(t)};const Oit=e=>{const t=e.getNodes().filter(r=>r.selected);return{...D7(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Fit({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const a=fo(),{width:n,height:i,x:o,y:l,transformString:c,userSelectionActive:u}=ms(Oit,vl),d=ufe(),f=w.useRef(null);if(w.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),cfe({nodeRef:f}),u||!n||!i)return null;const h=e?g=>{const x=a.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(xb,g.key)&&d({x:xb[g.key].x,y:xb[g.key].y,isShiftPressed:g.shiftKey})};return ct.createElement("div",{className:Ul(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ct.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:n,height:i,top:l,left:o}}))}var Dit=w.memo(Fit);const Pit=e=>e.nodesSelectionActive,dfe=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:n,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:N,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:_,panOnScroll:O,panOnScrollSpeed:j,panOnScrollMode:S,zoomOnDoubleClick:B,panOnDrag:L,defaultViewport:D,translateExtent:k,minZoom:R,maxZoom:U,preventScrolling:H,onSelectionContextMenu:Q,noWheelClassName:V,noPanClassName:G,disableKeyboardA11y:J})=>{const W=ms(Pit),Z=fN(f),M=fN(y),F=M||L,X=M||O,Y=Z||h&&F!==!0;return yit({deleteKeyCode:l,multiSelectionKeyCode:v}),ct.createElement(Eit,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:_,panOnScroll:X,panOnScrollSpeed:j,panOnScrollMode:S,zoomOnDoubleClick:B,panOnDrag:!Z&&F,defaultViewport:D,translateExtent:k,minZoom:R,maxZoom:U,zoomActivationKeyCode:N,preventScrolling:H,noWheelClassName:V,noPanClassName:G},ct.createElement(ife,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:n,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:F,isSelecting:!!Y,selectionMode:m},e,W&&ct.createElement(Dit,{onSelectionContextMenu:Q,noPanClassName:G,disableKeyboardA11y:J})))};dfe.displayName="FlowRenderer";var Rit=w.memo(dfe);function Lit(e){return ms(w.useCallback(r=>e?Ude(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Mit(e){const t={input:r2(e.input||Wde),default:r2(e.default||JD),output:r2(e.output||Yde),group:r2(e.group||R7)},r={},a=Object.keys(e).filter(n=>!["input","default","output","group"].includes(n)).reduce((n,i)=>(n[i]=r2(e[i]||JD),n),r);return{...t,...a}}const Uit=({x:e,y:t,width:r,height:a,origin:n})=>!r||!a?{x:e,y:t}:n[0]<0||n[1]<0||n[0]>1||n[1]>1?{x:e,y:t}:{x:e-r*n[0],y:t-a*n[1]},Qit=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ffe=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:a,elementsSelectable:n,updateNodeDimensions:i,onError:o}=ms(Qit,vl),l=Lit(e.onlyRenderVisibleElements),c=w.useRef(),u=w.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));i(h)});return c.current=d,d},[]);return w.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),ct.createElement("div",{className:"react-flow__nodes",style:L7},l.map(d=>{var _,O,j;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",n0.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||n&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||a&&typeof d.focusable>"u"),y=e.nodeExtent?_7(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,N=(y==null?void 0:y.x)??0,C=(y==null?void 0:y.y)??0,T=Uit({x:N,y:C,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ct.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Nr.Bottom,targetPosition:d.targetPosition||Nr.Top,hidden:d.hidden,xPos:N,yPos:C,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((_=d[Fs])==null?void 0:_.z)??0,isParent:!!((O=d[Fs])!=null&&O.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((j=d[Fs])!=null&&j.handleBounds)})}))};ffe.displayName="NodeRenderer";var Hit=w.memo(ffe);const zit=(e,t,r)=>r===Nr.Left?e-t:r===Nr.Right?e+t:e,Vit=(e,t,r)=>r===Nr.Top?e-t:r===Nr.Bottom?e+t:e,UX="react-flow__edgeupdater",QX=({position:e,centerX:t,centerY:r,radius:a=10,onMouseDown:n,onMouseEnter:i,onMouseOut:o,type:l})=>ct.createElement("circle",{onMouseDown:n,onMouseEnter:i,onMouseOut:o,className:Ul([UX,`${UX}-${l}`]),cx:zit(t,a,e),cy:Vit(r,a,e),r:a,stroke:"transparent",fill:"transparent"}),$it=()=>!0;var dv=e=>{const t=({id:r,className:a,type:n,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:N,sourceX:C,sourceY:T,targetX:_,targetY:O,sourcePosition:j,targetPosition:S,elementsSelectable:B,hidden:L,sourceHandleId:D,targetHandleId:k,onContextMenu:R,onMouseEnter:U,onMouseMove:H,onMouseLeave:Q,reconnectRadius:V,onReconnect:G,onReconnectStart:J,onReconnectEnd:W,markerEnd:Z,markerStart:M,rfId:F,ariaLabel:X,isFocusable:Y,isReconnectable:ae,pathOptions:le,interactionWidth:ie,disableKeyboardA11y:ne})=>{const oe=w.useRef(null),[we,K]=w.useState(!1),[Ee,_e]=w.useState(!1),Ce=fo(),de=w.useMemo(()=>`url('#${XD(M,F)}')`,[M,F]),xe=w.useMemo(()=>`url('#${XD(Z,F)}')`,[Z,F]);if(L)return null;const he=ut=>{var $r;const{edges:ze,addSelectedEdges:Tt,unselectNodesAndEdges:ir,multiSelectionActive:Kt}=Ce.getState(),Cr=ze.find(br=>br.id===r);Cr&&(B&&(Ce.setState({nodesSelectionActive:!1}),Cr.selected&&Kt?(ir({nodes:[],edges:[Cr]}),($r=oe.current)==null||$r.blur()):Tt([r])),o&&o(ut,Cr))},ye=e2(r,Ce.getState,l),ce=e2(r,Ce.getState,R),Ae=e2(r,Ce.getState,U),Ne=e2(r,Ce.getState,H),Pe=e2(r,Ce.getState,Q),Qe=(ut,ze)=>{if(ut.button!==0)return;const{edges:Tt,isValidConnection:ir}=Ce.getState(),Kt=ze?N:y,Cr=(ze?k:D)||null,$r=ze?"target":"source",br=ir||$it,Sn=ze,Pr=Tt.find(Rr=>Rr.id===r);_e(!0),J==null||J(ut,Pr,$r);const Ra=Rr=>{_e(!1),W==null||W(Rr,Pr,$r)};$de({event:ut,handleId:Cr,nodeId:Kt,onConnect:Rr=>G==null?void 0:G(Pr,Rr),isTarget:Sn,getState:Ce.getState,setState:Ce.setState,isValidConnection:br,edgeUpdaterType:$r,onReconnectEnd:Ra})},$e=ut=>Qe(ut,!0),et=ut=>Qe(ut,!1),Ke=()=>K(!0),Ge=()=>K(!1),nt=!B&&!o,bt=ut=>{var ze;if(!ne&&Ode.includes(ut.key)&&B){const{unselectNodesAndEdges:Tt,addSelectedEdges:ir,edges:Kt}=Ce.getState();ut.key==="Escape"?((ze=oe.current)==null||ze.blur(),Tt({edges:[Kt.find($r=>$r.id===r)]})):ir([r])}};return ct.createElement("g",{className:Ul(["react-flow__edge",`react-flow__edge-${n}`,a,{selected:c,animated:u,inactive:nt,updating:we}]),onClick:he,onDoubleClick:ye,onContextMenu:ce,onMouseEnter:Ae,onMouseMove:Ne,onMouseLeave:Pe,onKeyDown:Y?bt:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":X===null?void 0:X||`Edge from ${y} to ${N}`,"aria-describedby":Y?`${efe}-${F}`:void 0,ref:oe},!Ee&&ct.createElement(e,{id:r,source:y,target:N,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:i,style:v,sourceX:C,sourceY:T,targetX:_,targetY:O,sourcePosition:j,targetPosition:S,sourceHandleId:D,targetHandleId:k,markerStart:de,markerEnd:xe,pathOptions:le,interactionWidth:ie}),ae&&ct.createElement(ct.Fragment,null,(ae==="source"||ae===!0)&&ct.createElement(QX,{position:j,centerX:C,centerY:T,radius:V,onMouseDown:$e,onMouseEnter:Ke,onMouseOut:Ge,type:"source"}),(ae==="target"||ae===!0)&&ct.createElement(QX,{position:S,centerX:_,centerY:O,radius:V,onMouseDown:et,onMouseEnter:Ke,onMouseOut:Ge,type:"target"})))};return t.displayName="EdgeWrapper",w.memo(t)};function Git(e){const t={default:dv(e.default||NS),straight:dv(e.bezier||O7),step:dv(e.step||I7),smoothstep:dv(e.step||$4),simplebezier:dv(e.simplebezier||T7)},r={},a=Object.keys(e).filter(n=>!["default","bezier"].includes(n)).reduce((n,i)=>(n[i]=dv(e[i]||NS),n),r);return{...t,...a}}function HX(e,t,r=null){const a=((r==null?void 0:r.x)||0)+t.x,n=((r==null?void 0:r.y)||0)+t.y,i=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case Nr.Top:return{x:a+i/2,y:n};case Nr.Right:return{x:a+i,y:n+o/2};case Nr.Bottom:return{x:a+i/2,y:n+o};case Nr.Left:return{x:a,y:n+o/2}}}function zX(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const qit=(e,t,r,a,n,i)=>{const o=HX(r,e,t),l=HX(i,a,n);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function Kit({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:a,targetWidth:n,targetHeight:i,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+n),y2:Math.max(e.y+a,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=B7({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function VX(e){var a,n,i,o,l;const t=((a=e==null?void 0:e[Fs])==null?void 0:a.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((n=e==null?void 0:e.positionAbsolute)==null?void 0:n.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const Wit=[{level:0,isMaxLevel:!0,edges:[]}];function Xit(e,t,r=!1){let a=-1;const n=e.reduce((o,l)=>{var d,f;const c=rd(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Fs])==null?void 0:d.z)||0,((f=h==null?void 0:h[Fs])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],a=u>a?u:a,o},{}),i=Object.entries(n).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===a}});return i.length===0?Wit:i}function Yit(e,t,r){const a=ms(w.useCallback(n=>e?n.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Kit({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return Xit(a,t,r)}const Jit=({color:e="none",strokeWidth:t=1})=>ct.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Zit=({color:e="none",strokeWidth:t=1})=>ct.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),$X={[wS.Arrow]:Jit,[wS.ArrowClosed]:Zit};function eot(e){const t=fo();return w.useMemo(()=>{var n,i;return Object.prototype.hasOwnProperty.call($X,e)?$X[e]:((i=(n=t.getState()).onError)==null||i.call(n,"009",n0.error009(e)),null)},[e])}const tot=({id:e,type:t,color:r,width:a=12.5,height:n=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=eot(t);return c?ct.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${n}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},ct.createElement(c,{color:r,strokeWidth:o})):null},rot=({defaultColor:e,rfId:t})=>r=>{const a=[];return r.edges.reduce((n,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=XD(o,t);a.includes(l)||(n.push({id:l,color:o.color||e,...o}),a.push(l))}}),n),[]).sort((n,i)=>n.id.localeCompare(i.id))},Afe=({defaultColor:e,rfId:t})=>{const r=ms(w.useCallback(rot({defaultColor:e,rfId:t}),[e,t]),(a,n)=>!(a.length!==n.length||a.some((i,o)=>i.id!==n[o].id)));return ct.createElement("defs",null,r.map(a=>ct.createElement(tot,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};Afe.displayName="MarkerDefinitions";var aot=w.memo(Afe);const not=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),hfe=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:a,edgeTypes:n,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:N,edgesUpdatable:C,elementsSelectable:T,width:_,height:O,connectionMode:j,nodeInternals:S,onError:B}=ms(not,vl),L=Yit(t,S,r);return _?ct.createElement(ct.Fragment,null,L.map(({level:D,edges:k,isMaxLevel:R})=>ct.createElement("svg",{key:D,style:{zIndex:D},width:_,height:O,className:"react-flow__edges react-flow__container"},R&&ct.createElement(aot,{defaultColor:e,rfId:a}),ct.createElement("g",null,k.map(U=>{const[H,Q,V]=VX(S.get(U.source)),[G,J,W]=VX(S.get(U.target));if(!V||!W)return null;let Z=U.type||"default";n[Z]||(B==null||B("011",n0.error011(Z)),Z="default");const M=n[Z]||n.default,F=j===Jg.Strict?J.target:(J.target??[]).concat(J.source??[]),X=zX(Q.source,U.sourceHandle),Y=zX(F,U.targetHandle),ae=(X==null?void 0:X.position)||Nr.Bottom,le=(Y==null?void 0:Y.position)||Nr.Top,ie=!!(U.focusable||N&&typeof U.focusable>"u"),ne=U.reconnectable||U.updatable,oe=typeof h<"u"&&(ne||C&&typeof ne>"u");if(!X||!Y)return B==null||B("008",n0.error008(X,U)),null;const{sourceX:we,sourceY:K,targetX:Ee,targetY:_e}=qit(H,X,ae,G,Y,le);return ct.createElement(M,{key:U.id,id:U.id,className:Ul([U.className,i]),type:Z,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:we,sourceY:K,targetX:Ee,targetY:_e,sourcePosition:ae,targetPosition:le,elementsSelectable:T,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:a,ariaLabel:U.ariaLabel,isFocusable:ie,isReconnectable:oe,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:y})})))),v):null};hfe.displayName="EdgeRenderer";var sot=w.memo(hfe);const iot=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oot({children:e}){const t=ms(iot);return ct.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function lot(e){const t=G4(),r=w.useRef(!1);w.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const cot={[Nr.Left]:Nr.Right,[Nr.Right]:Nr.Left,[Nr.Top]:Nr.Bottom,[Nr.Bottom]:Nr.Top},mfe=({nodeId:e,handleType:t,style:r,type:a=vm.Bezier,CustomComponent:n,connectionStatus:i})=>{var O,j,S;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=ms(w.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),vl),f=(O=o==null?void 0:o[Fs])==null?void 0:O.handleBounds;let h=f==null?void 0:f[t];if(d===Jg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const m=l?h.find(B=>B.id===l):h[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((j=o.positionAbsolute)==null?void 0:j.x)??0)+g,y=(((S=o.positionAbsolute)==null?void 0:S.y)??0)+x,N=m==null?void 0:m.position,C=N?cot[N]:null;if(!N||!C)return null;if(n)return ct.createElement(n,{connectionLineType:a,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:N,toPosition:C,connectionStatus:i});let T="";const _={sourceX:v,sourceY:y,sourcePosition:N,targetX:c,targetY:u,targetPosition:C};return a===vm.Bezier?[T]=Lde(_):a===vm.Step?[T]=WD({..._,borderRadius:0}):a===vm.SmoothStep?[T]=WD(_):a===vm.SimpleBezier?[T]=Rde(_):T=`M${v},${y} ${c},${u}`,ct.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:r})};mfe.displayName="ConnectionLine";const uot=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function dot({containerStyle:e,style:t,type:r,component:a}){const{nodeId:n,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:u}=ms(uot,vl);return!(n&&i&&l&&o)?null:ct.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ct.createElement("g",{className:Ul(["react-flow__connection",u])},ct.createElement(mfe,{nodeId:n,handleType:i,style:t,type:r,CustomComponent:a,connectionStatus:u})))}function GX(e,t){return w.useRef(null),fo(),w.useMemo(()=>t(e),[e])}const pfe=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:a,onMoveEnd:n,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:T,selectionKeyCode:_,selectionOnDrag:O,selectionMode:j,multiSelectionKeyCode:S,panActivationKeyCode:B,zoomActivationKeyCode:L,deleteKeyCode:D,onlyRenderVisibleElements:k,elementsSelectable:R,selectNodesOnDrag:U,defaultViewport:H,translateExtent:Q,minZoom:V,maxZoom:G,preventScrolling:J,defaultMarkerColor:W,zoomOnScroll:Z,zoomOnPinch:M,panOnScroll:F,panOnScrollSpeed:X,panOnScrollMode:Y,zoomOnDoubleClick:ae,panOnDrag:le,onPaneClick:ie,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:we,onPaneScroll:K,onPaneContextMenu:Ee,onEdgeContextMenu:_e,onEdgeMouseEnter:Ce,onEdgeMouseMove:de,onEdgeMouseLeave:xe,onReconnect:he,onReconnectStart:ye,onReconnectEnd:ce,reconnectRadius:Ae,noDragClassName:Ne,noWheelClassName:Pe,noPanClassName:Qe,elevateEdgesOnSelect:$e,disableKeyboardA11y:et,nodeOrigin:Ke,nodeExtent:Ge,rfId:nt})=>{const bt=GX(e,Mit),ut=GX(t,Git);return lot(i),ct.createElement(Rit,{onPaneClick:ie,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:we,onPaneContextMenu:Ee,onPaneScroll:K,deleteKeyCode:D,selectionKeyCode:_,selectionOnDrag:O,selectionMode:j,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:B,zoomActivationKeyCode:L,elementsSelectable:R,onMove:r,onMoveStart:a,onMoveEnd:n,zoomOnScroll:Z,zoomOnPinch:M,zoomOnDoubleClick:ae,panOnScroll:F,panOnScrollSpeed:X,panOnScrollMode:Y,panOnDrag:le,defaultViewport:H,translateExtent:Q,minZoom:V,maxZoom:G,onSelectionContextMenu:g,preventScrolling:J,noDragClassName:Ne,noWheelClassName:Pe,noPanClassName:Qe,disableKeyboardA11y:et},ct.createElement(oot,null,ct.createElement(sot,{edgeTypes:ut,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:k,onEdgeContextMenu:_e,onEdgeMouseEnter:Ce,onEdgeMouseMove:de,onEdgeMouseLeave:xe,onReconnect:he,onReconnectStart:ye,onReconnectEnd:ce,reconnectRadius:Ae,defaultMarkerColor:W,noPanClassName:Qe,elevateEdgesOnSelect:!!$e,disableKeyboardA11y:et,rfId:nt},ct.createElement(dot,{style:N,type:y,component:C,containerStyle:T})),ct.createElement("div",{className:"react-flow__edgelabel-renderer"}),ct.createElement(Hit,{nodeTypes:bt,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:U,onlyRenderVisibleElements:k,noPanClassName:Qe,noDragClassName:Ne,disableKeyboardA11y:et,nodeOrigin:Ke,nodeExtent:Ge,rfId:nt})))};pfe.displayName="GraphView";var fot=w.memo(pfe);const eP=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],sm={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:eP,nodeExtent:eP,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Jg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Ust,isValidConnection:void 0},Aot=()=>Ert((e,t)=>({...sm,setNodes:r=>{const{nodeInternals:a,nodeOrigin:n,elevateNodesOnSelect:i}=t();e({nodeInternals:B6(r,a,n,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:a={}}=t();e({edges:r.map(n=>({...a,...n}))})},setDefaultNodesAndEdges:(r,a)=>{const n=typeof r<"u",i=typeof a<"u",o=n?B6(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?a:[],hasDefaultNodes:n,hasDefaultEdges:i})},updateNodeDimensions:r=>{const{onNodesChange:a,nodeInternals:n,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=n.get(v.id);if(y!=null&&y.hidden)n.set(y.id,{...y,[Fs]:{...y[Fs],handleBounds:void 0}});else if(y){const N=S7(v.nodeElement);!!(N.width&&N.height&&(y.width!==N.width||y.height!==N.height||v.forceUpdate))&&(n.set(y.id,{...y,[Fs]:{...y[Fs],handleBounds:{source:MX(".source",v.nodeElement,h,u),target:MX(".target",v.nodeElement,h,u)}},...N}),x.push({id:y.id,type:"dimensions",dimensions:N}))}return x},[]);rfe(n,u);const g=o||i&&!o&&afe(t,{initial:!0,...l});e({nodeInternals:new Map(n),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(a==null||a(m))},updateNodePositions:(r,a=!0,n=!1)=>{const{triggerNodeChanges:i}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:n};return a&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:r=>{const{onNodesChange:a,nodeInternals:n,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(i){const u=sfe(r,l()),d=B6(u,n,o,c);e({nodeInternals:d})}a==null||a(r)}},addSelectedNodes:r=>{const{multiSelectionActive:a,edges:n,getNodes:i}=t();let o,l=null;a?o=r.map(c=>fm(c,!0)):(o=zv(i(),r),l=zv(n,[])),hj({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:a,edges:n,getNodes:i}=t();let o,l=null;a?o=r.map(c=>fm(c,!0)):(o=zv(n,r),l=zv(i(),[])),hj({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:a}={})=>{const{edges:n,getNodes:i}=t(),o=r||i(),l=a||n,c=o.map(d=>(d.selected=!1,fm(d.id,!1))),u=l.map(d=>fm(d.id,!1));hj({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:a,maxZoom:n}=t();a==null||a.scaleExtent([r,n]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:a,minZoom:n}=t();a==null||a.scaleExtent([n,r]),e({maxZoom:r})},setTranslateExtent:r=>{var a;(a=t().d3Zoom)==null||a.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:a}=t(),i=a().filter(l=>l.selected).map(l=>fm(l.id,!1)),o=r.filter(l=>l.selected).map(l=>fm(l.id,!1));hj({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:a}=t();a.forEach(n=>{n.positionAbsolute=_7(n.position,r)}),e({nodeExtent:r,nodeInternals:new Map(a)})},panBy:r=>{const{transform:a,width:n,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=Lm.translate(a[0]+r.x,a[1]+r.y).scale(a[2]),d=[[0,0],[n,i]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),a[0]!==f.x||a[1]!==f.y||a[2]!==f.k},cancelConnection:()=>e({connectionNodeId:sm.connectionNodeId,connectionHandleId:sm.connectionHandleId,connectionHandleType:sm.connectionHandleType,connectionStatus:sm.connectionStatus,connectionStartHandle:sm.connectionStartHandle,connectionEndHandle:sm.connectionEndHandle}),reset:()=>e({...sm})}),Object.is),M7=({children:e})=>{const t=w.useRef(null);return t.current||(t.current=Aot()),ct.createElement(Ist,{value:t.current},e)};M7.displayName="ReactFlowProvider";const gfe=({children:e})=>w.useContext(V4)?ct.createElement(ct.Fragment,null,e):ct.createElement(M7,null,e);gfe.displayName="ReactFlowWrapper";const hot={input:Wde,default:JD,output:Yde,group:R7},mot={default:NS,straight:O7,step:I7,smoothstep:$4,simplebezier:T7},pot=[0,0],got=[15,15],xot={x:0,y:0,zoom:1},vot={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},xfe=w.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,className:n,nodeTypes:i=hot,edgeTypes:o=mot,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:T,onNodeContextMenu:_,onNodeDoubleClick:O,onNodeDragStart:j,onNodeDrag:S,onNodeDragStop:B,onNodesDelete:L,onEdgesDelete:D,onSelectionChange:k,onSelectionDragStart:R,onSelectionDrag:U,onSelectionDragStop:H,onSelectionContextMenu:Q,onSelectionStart:V,onSelectionEnd:G,connectionMode:J=Jg.Strict,connectionLineType:W=vm.Bezier,connectionLineStyle:Z,connectionLineComponent:M,connectionLineContainerStyle:F,deleteKeyCode:X="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:ae=!1,selectionMode:le=dN.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ne=yS()?"Meta":"Control",zoomActivationKeyCode:oe=yS()?"Meta":"Control",snapToGrid:we=!1,snapGrid:K=got,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:_e=!0,nodesDraggable:Ce,nodesConnectable:de,nodesFocusable:xe,nodeOrigin:he=pot,edgesFocusable:ye,edgesUpdatable:ce,elementsSelectable:Ae,defaultViewport:Ne=xot,minZoom:Pe=.5,maxZoom:Qe=2,translateExtent:$e=eP,preventScrolling:et=!0,nodeExtent:Ke,defaultMarkerColor:Ge="#b1b1b7",zoomOnScroll:nt=!0,zoomOnPinch:bt=!0,panOnScroll:ut=!1,panOnScrollSpeed:ze=.5,panOnScrollMode:Tt=hg.Free,zoomOnDoubleClick:ir=!0,panOnDrag:Kt=!0,onPaneClick:Cr,onPaneMouseEnter:$r,onPaneMouseMove:br,onPaneMouseLeave:Sn,onPaneScroll:Pr,onPaneContextMenu:Ra,children:Dn,onEdgeContextMenu:Rr,onEdgeDoubleClick:pr,onEdgeMouseEnter:Jr,onEdgeMouseMove:gs,onEdgeMouseLeave:Za,onEdgeUpdate:Pn,onEdgeUpdateStart:Us,onEdgeUpdateEnd:er,onReconnect:xa,onReconnectStart:la,onReconnectEnd:Ia,reconnectRadius:Wa=10,edgeUpdaterRadius:en=10,onNodesChange:je,onEdgesChange:Ue,noDragClassName:De="nodrag",noWheelClassName:Le="nowheel",noPanClassName:ge="nopan",fitView:me=!1,fitViewOptions:Oe,connectOnClick:He=!0,attributionPosition:Re,proOptions:We,defaultEdgeOptions:Ye,elevateNodesOnSelect:wt=!0,elevateEdgesOnSelect:Nt=!1,disableKeyboardA11y:zt=!1,autoPanOnConnect:Ot=!0,autoPanOnNodeDrag:Vt=!0,connectionRadius:jr=20,isValidConnection:ea,onError:ta,style:ia,id:xs,nodeDragThreshold:Fo,...vs},ci)=>{const Qs=xs||"1";return ct.createElement("div",{...vs,style:{...ia,...vot},ref:ci,className:Ul(["react-flow",n]),"data-testid":"rf__wrapper",id:xs},ct.createElement(gfe,null,ct.createElement(fot,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:T,onNodeContextMenu:_,onNodeDoubleClick:O,nodeTypes:i,edgeTypes:o,connectionLineType:W,connectionLineStyle:Z,connectionLineComponent:M,connectionLineContainerStyle:F,selectionKeyCode:Y,selectionOnDrag:ae,selectionMode:le,deleteKeyCode:X,multiSelectionKeyCode:ne,panActivationKeyCode:ie,zoomActivationKeyCode:oe,onlyRenderVisibleElements:Ee,selectNodesOnDrag:_e,defaultViewport:Ne,translateExtent:$e,minZoom:Pe,maxZoom:Qe,preventScrolling:et,zoomOnScroll:nt,zoomOnPinch:bt,zoomOnDoubleClick:ir,panOnScroll:ut,panOnScrollSpeed:ze,panOnScrollMode:Tt,panOnDrag:Kt,onPaneClick:Cr,onPaneMouseEnter:$r,onPaneMouseMove:br,onPaneMouseLeave:Sn,onPaneScroll:Pr,onPaneContextMenu:Ra,onSelectionContextMenu:Q,onSelectionStart:V,onSelectionEnd:G,onEdgeContextMenu:Rr,onEdgeDoubleClick:pr,onEdgeMouseEnter:Jr,onEdgeMouseMove:gs,onEdgeMouseLeave:Za,onReconnect:xa??Pn,onReconnectStart:la??Us,onReconnectEnd:Ia??er,reconnectRadius:Wa??en,defaultMarkerColor:Ge,noDragClassName:De,noWheelClassName:Le,noPanClassName:ge,elevateEdgesOnSelect:Nt,rfId:Qs,disableKeyboardA11y:zt,nodeOrigin:he,nodeExtent:Ke}),ct.createElement(cit,{nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:Ce,nodesConnectable:de,nodesFocusable:xe,edgesFocusable:ye,edgesUpdatable:ce,elementsSelectable:Ae,elevateNodesOnSelect:wt,minZoom:Pe,maxZoom:Qe,nodeExtent:Ke,onNodesChange:je,onEdgesChange:Ue,snapToGrid:we,snapGrid:K,connectionMode:J,translateExtent:$e,connectOnClick:He,defaultEdgeOptions:Ye,fitView:me,fitViewOptions:Oe,onNodesDelete:L,onEdgesDelete:D,onNodeDragStart:j,onNodeDrag:S,onNodeDragStop:B,onSelectionDrag:U,onSelectionDragStart:R,onSelectionDragStop:H,noPanClassName:ge,nodeOrigin:he,rfId:Qs,autoPanOnConnect:Ot,autoPanOnNodeDrag:Vt,onError:ta,connectionRadius:jr,isValidConnection:ea,nodeDragThreshold:Fo}),ct.createElement(oit,{onSelectionChange:k}),Dn,ct.createElement(Fst,{proOptions:We,position:Re}),ct.createElement(hit,{rfId:Qs,disableKeyboardA11y:zt})))});xfe.displayName="ReactFlow";function vfe(e){return t=>{const[r,a]=w.useState(t),n=w.useCallback(i=>a(o=>e(i,o)),[]);return[r,a,n]}}const bot=vfe(sfe),yot=vfe(Sit);function wot(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ct.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Not(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ct.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Cot(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ct.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Eot(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ct.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function jot(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ct.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const I2=({children:e,className:t,...r})=>ct.createElement("button",{type:"button",className:Ul(["react-flow__controls-button",t]),...r},e);I2.displayName="ControlButton";const kot=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),bfe=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:a=!0,fitViewOptions:n,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=fo(),[m,g]=w.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=ms(kot,vl),{zoomIn:N,zoomOut:C,fitView:T}=G4();if(w.useEffect(()=>{g(!0)},[]),!m)return null;const _=()=>{N(),i==null||i()},O=()=>{C(),o==null||o()},j=()=>{T(n),l==null||l()},S=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return ct.createElement(Bde,{className:Ul(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ct.createElement(ct.Fragment,null,ct.createElement(I2,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ct.createElement(wot,null)),ct.createElement(I2,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},ct.createElement(Not,null))),r&&ct.createElement(I2,{className:"react-flow__controls-fitview",onClick:j,title:"fit view","aria-label":"fit view"},ct.createElement(Cot,null)),a&&ct.createElement(I2,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},x?ct.createElement(jot,null):ct.createElement(Eot,null)),d)};bfe.displayName="Controls";var Sot=w.memo(bfe),rf;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(rf||(rf={}));function _ot({color:e,dimensions:t,lineWidth:r}){return ct.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Bot({color:e,radius:t}){return ct.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Tot={[rf.Dots]:"#91919a",[rf.Lines]:"#eee",[rf.Cross]:"#e2e2e2"},Iot={[rf.Dots]:1,[rf.Lines]:1,[rf.Cross]:6},Oot=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function yfe({id:e,variant:t=rf.Dots,gap:r=20,size:a,lineWidth:n=1,offset:i=2,color:o,style:l,className:c}){const u=w.useRef(null),{transform:d,patternId:f}=ms(Oot,vl),h=o||Tot[t],m=a||Iot[t],g=t===rf.Dots,x=t===rf.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],N=m*d[2],C=x?[N,N]:y,T=g?[N/i,N/i]:[C[0]/i,C[1]/i];return ct.createElement("svg",{className:Ul(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ct.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},g?ct.createElement(Bot,{color:h,radius:N/i}):ct.createElement(_ot,{dimensions:C,color:h,lineWidth:n})),ct.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}yfe.displayName="Background";var Fot=w.memo(yfe);function Dot(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),n=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(n),t&&(a.href=t),n.href=e,n.href}const Pot=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Um(e){const t=[];for(let r=0,a=e.length;r<a;r++)t.push(e[r]);return t}let fv=null;function wfe(e={}){return fv||(e.includeStyleProperties?(fv=e.includeStyleProperties,fv):(fv=Um(window.getComputedStyle(document.documentElement)),fv))}function CS(e,t){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return a?parseFloat(a.replace("px","")):0}function Rot(e){const t=CS(e,"border-left-width"),r=CS(e,"border-right-width");return e.clientWidth+t+r}function Lot(e){const t=CS(e,"border-top-width"),r=CS(e,"border-bottom-width");return e.clientHeight+t+r}function Nfe(e,t={}){const r=t.width||Rot(e),a=t.height||Lot(e);return{width:r,height:a}}function Mot(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Vc=16384;function Uot(e){(e.width>Vc||e.height>Vc)&&(e.width>Vc&&e.height>Vc?e.width>e.height?(e.height*=Vc/e.width,e.width=Vc):(e.width*=Vc/e.height,e.height=Vc):e.width>Vc?(e.height*=Vc/e.width,e.width=Vc):(e.width*=Vc/e.height,e.height=Vc))}function ES(e){return new Promise((t,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function Qot(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Hot(e,t,r){const a="http://www.w3.org/2000/svg",n=document.createElementNS(a,"svg"),i=document.createElementNS(a,"foreignObject");return n.setAttribute("width",`${t}`),n.setAttribute("height",`${r}`),n.setAttribute("viewBox",`0 0 ${t} ${r}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),n.appendChild(i),i.appendChild(e),Qot(n)}const yc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||yc(r,t)};function zot(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Vot(e,t){return wfe(t).map(r=>{const a=e.getPropertyValue(r),n=e.getPropertyPriority(r);return`${r}: ${a}${n?" !important":""};`}).join(" ")}function $ot(e,t,r,a){const n=`.${e}:${t}`,i=r.cssText?zot(r):Vot(r,a);return document.createTextNode(`${n}{${i}}`)}function qX(e,t,r,a){const n=window.getComputedStyle(e,r),i=n.getPropertyValue("content");if(i===""||i==="none")return;const o=Pot();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild($ot(o,r,n,a)),t.appendChild(l)}function Got(e,t,r){qX(e,t,":before",r),qX(e,t,":after",r)}const KX="application/font-woff",WX="image/jpeg",qot={woff:KX,woff2:KX,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:WX,jpeg:WX,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Kot(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function U7(e){const t=Kot(e).toLowerCase();return qot[t]||""}function Wot(e){return e.split(/,/)[1]}function tP(e){return e.search(/^(data:)/)!==-1}function Xot(e,t){return`data:${t};base64,${e}`}async function Cfe(e,t,r){const a=await fetch(e,t);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const n=await a.blob();return new Promise((i,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{i(r({res:a,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(n)})}const F6={};function Yot(e,t,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),t?`[${t}]${a}`:a}async function Q7(e,t,r){const a=Yot(e,t,r.includeQueryParams);if(F6[a]!=null)return F6[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let n;try{const i=await Cfe(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),Wot(l)));n=Xot(i,t)}catch(i){n=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;i&&(o=typeof i=="string"?i:i.message),o&&console.warn(o)}return F6[a]=n,n}async function Jot(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):ES(t)}async function Zot(e,t){if(e.currentSrc){const i=document.createElement("canvas"),o=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,o==null||o.drawImage(e,0,0,i.width,i.height);const l=i.toDataURL();return ES(l)}const r=e.poster,a=U7(r),n=await Q7(r,a,t);return ES(n)}async function elt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await q4(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function tlt(e,t){return yc(e,HTMLCanvasElement)?Jot(e):yc(e,HTMLVideoElement)?Zot(e,t):yc(e,HTMLIFrameElement)?elt(e,t):e.cloneNode(Efe(e))}const rlt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Efe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function alt(e,t,r){var a,n;if(Efe(t))return t;let i=[];return rlt(e)&&e.assignedNodes?i=Um(e.assignedNodes()):yc(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?i=Um(e.contentDocument.body.childNodes):i=Um(((n=e.shadowRoot)!==null&&n!==void 0?n:e).childNodes),i.length===0||yc(e,HTMLVideoElement)||await i.reduce((o,l)=>o.then(()=>q4(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function nlt(e,t,r){const a=t.style;if(!a)return;const n=window.getComputedStyle(e);n.cssText?(a.cssText=n.cssText,a.transformOrigin=n.transformOrigin):wfe(r).forEach(i=>{let o=n.getPropertyValue(i);i==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),yc(e,HTMLIFrameElement)&&i==="display"&&o==="inline"&&(o="block"),i==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),a.setProperty(i,o,n.getPropertyPriority(i))})}function slt(e,t){yc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),yc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function ilt(e,t){if(yc(e,HTMLSelectElement)){const r=t,a=Array.from(r.children).find(n=>e.value===n.getAttribute("value"));a&&a.setAttribute("selected","")}}function olt(e,t,r){return yc(t,Element)&&(nlt(e,t,r),Got(e,t,r),slt(e,t),ilt(e,t)),t}async function llt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let i=0;i<r.length;i++){const l=r[i].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!a[l]&&(a[l]=await q4(u,t,!0))}}const n=Object.values(a);if(n.length){const i="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg");o.setAttribute("xmlns",i),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(i,"defs");o.appendChild(l);for(let c=0;c<n.length;c++)l.appendChild(n[c]);e.appendChild(o)}return e}async function q4(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(a=>tlt(a,t)).then(a=>alt(e,a,t)).then(a=>olt(e,a,t)).then(a=>llt(a,t))}const jfe=/url\((['"]?)([^'"]+?)\1\)/g,clt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ult=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function dlt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function flt(e){const t=[];return e.replace(jfe,(r,a,n)=>(t.push(n),r)),t.filter(r=>!tP(r))}async function Alt(e,t,r,a,n){try{const i=r?Dot(t,r):t,o=U7(t);let l;return n||(l=await Q7(i,o,a)),e.replace(dlt(t),`$1${l}$3`)}catch{}return e}function hlt(e,{preferredFontFormat:t}){return t?e.replace(ult,r=>{for(;;){const[a,,n]=clt.exec(r)||[];if(!n)return"";if(n===t)return`src: ${a};`}}):e}function kfe(e){return e.search(jfe)!==-1}async function Sfe(e,t,r){if(!kfe(e))return e;const a=hlt(e,r);return flt(a).reduce((i,o)=>i.then(l=>Alt(l,o,t,r)),Promise.resolve(a))}async function Av(e,t,r){var a;const n=(a=t.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(n){const i=await Sfe(n,null,r);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function mlt(e,t){await Av("background",e,t)||await Av("background-image",e,t),await Av("mask",e,t)||await Av("-webkit-mask",e,t)||await Av("mask-image",e,t)||await Av("-webkit-mask-image",e,t)}async function plt(e,t){const r=yc(e,HTMLImageElement);if(!(r&&!tP(e.src))&&!(yc(e,SVGImageElement)&&!tP(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,n=await Q7(a,U7(a),t);await new Promise((i,o)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...c)=>{try{i(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=i),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=n):e.href.baseVal=n})}async function glt(e,t){const a=Um(e.childNodes).map(n=>_fe(n,t));await Promise.all(a).then(()=>e)}async function _fe(e,t){yc(e,Element)&&(await mlt(e,t),await plt(e,t),await glt(e,t))}function xlt(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const a=t.style;return a!=null&&Object.keys(a).forEach(n=>{r[n]=a[n]}),e}const XX={};async function YX(e){let t=XX[e];if(t!=null)return t;const a=await(await fetch(e)).text();return t={url:e,cssText:a},XX[e]=t,t}async function JX(e,t){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,i=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(a,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Cfe(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(i).then(()=>r)}function ZX(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const n=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=n.exec(a);if(c===null)break;t.push(c[0])}a=a.replace(n,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=i.exec(a);if(c===null){if(c=l.exec(a),c===null)break;i.lastIndex=l.lastIndex}else l.lastIndex=i.lastIndex;t.push(c[0])}return t}async function vlt(e,t){const r=[],a=[];return e.forEach(n=>{if("cssRules"in n)try{Um(n.cssRules||[]).forEach((i,o)=>{if(i.type===CSSRule.IMPORT_RULE){let l=o+1;const c=i.href,u=YX(c).then(d=>JX(d,t)).then(d=>ZX(d).forEach(f=>{try{n.insertRule(f,f.startsWith("@import")?l+=1:n.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});a.push(u)}})}catch(i){const o=e.find(l=>l.href==null)||document.styleSheets[0];n.href!=null&&a.push(YX(n.href).then(l=>JX(l,t)).then(l=>ZX(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",i)}}),Promise.all(a).then(()=>(e.forEach(n=>{if("cssRules"in n)try{Um(n.cssRules||[]).forEach(i=>{r.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${n.href}`,i)}}),r))}function blt(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>kfe(t.style.getPropertyValue("src")))}async function ylt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Um(e.ownerDocument.styleSheets),a=await vlt(r,t);return blt(a)}function Bfe(e){return e.trim().replace(/["']/g,"")}function wlt(e){const t=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(i=>{t.add(Bfe(i))}),Array.from(a.children).forEach(i=>{i instanceof HTMLElement&&r(i)})}return r(e),t}async function Nlt(e,t){const r=await ylt(e,t),a=wlt(e);return(await Promise.all(r.filter(i=>a.has(Bfe(i.style.fontFamily))).map(i=>{const o=i.parentStyleSheet?i.parentStyleSheet.href:null;return Sfe(i.cssText,o,t)}))).join(`
`)}async function Clt(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Nlt(e,t);if(r){const a=document.createElement("style"),n=document.createTextNode(r);a.appendChild(n),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function Elt(e,t={}){const{width:r,height:a}=Nfe(e,t),n=await q4(e,t,!0);return await Clt(n,t),await _fe(n,t),xlt(n,t),await Hot(n,r,a)}async function jlt(e,t={}){const{width:r,height:a}=Nfe(e,t),n=await Elt(e,t),i=await ES(n),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||Mot(),u=t.canvasWidth||r,d=t.canvasHeight||a;return o.width=u*c,o.height=d*c,t.skipAutoScale||Uot(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(i,0,0,o.width,o.height),o}async function K4(e,t={}){return(await jlt(e,t)).toDataURL()}const Tfe="recursos_crucigramas",H7="recursos_lineas_de_tiempo",z7="recursos_mapas_mentales",Ife="recursos_sopas_de_letras",W4=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,createdAt:((i=(n=t.createdAt)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString())||t.createdAt}},klt=e=>{const t=_t(pt(ot,Tfe),Gt("fechaCreacion","desc"));return ar(t,r=>{const a=r.docs.map(n=>W4(n));e(a)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Slt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:lr.fromDate(new Date)};return(await Yr(pt(ot,Tfe),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},_lt=e=>{const t=_t(pt(ot,H7),Gt("createdAt","desc"));return ar(t,r=>{const a=r.docs.map(n=>W4(n));e(a)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Blt=async(e,t)=>{try{const{id:r,...a}=e,n=$t(ot,H7,r);await ii(n,{...a,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:lr.fromDate(new Date(a.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Tlt=async e=>{try{const t=$t(ot,H7,e);await Ja(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Ilt=e=>{const t=_t(pt(ot,z7),Gt("createdAt","desc"));return ar(t,r=>{const a=r.docs.map(n=>W4(n));e(a)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Olt=async(e,t)=>{try{const{id:r,...a}=e,n=$t(ot,z7,r);await ii(n,{...a,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:lr.fromDate(new Date(a.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Flt=async e=>{try{const t=$t(ot,z7,e);await Ja(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Dlt=e=>{const t=_t(pt(ot,Ife),Gt("createdAt","desc"));return ar(t,r=>{const a=r.docs.map(n=>W4(n));e(a)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Plt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:lr.fromDate(new Date)};return(await Yr(pt(ot,Ife),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Rlt=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Llt=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Mlt=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Ult=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return s.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[s.jsx(i1,{type:"target",position:Nr.Left,className:"w-2 h-2 !bg-slate-400"}),s.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),s.jsx(i1,{type:"source",position:Nr.Right,className:"w-2 h-2 !bg-slate-400"})]})},rP=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,a)=>r+rP(a,t),0),eY=(e,t="tree")=>{const r=[],a=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=rP(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=rP(h,100),g=f+m/2-100/2;a.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),o(h,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),a.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),a.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:a}},Ofe=({node:e,onUpdate:t,onAddChild:r,onDelete:a,level:n=0})=>{const i=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return s.jsxs("div",{className:`pl-4 ${n>0?"border-l "+o[n-1%o.length]:""}`,children:[s.jsx("div",{className:`p-2 rounded-lg my-1 ${i[n%i.length]}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),s.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),n>0&&s.jsx("button",{onClick:()=>a(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>s.jsx(Ofe,{node:l,onUpdate:t,onAddChild:r,onDelete:a,level:n+1},l.id))]})},Qlt={custom:Ult},Hlt=({mapData:e,onBack:t,onSave:r})=>{const[a,n]=w.useState(e.treeData),[i,o]=w.useState("tree"),[l,c]=w.useState(!1),[u,d,f]=bot([]),[h,m,g]=yot([]),{fitView:x}=G4();w.useEffect(()=>{const{nodes:_,edges:O}=eY(a,i);d(_),m(O),setTimeout(()=>x({duration:300}),50)},[a,i,d,m,x]);const v=(_,O)=>{const j=JSON.parse(JSON.stringify(a)),S=B=>B.id===_?(B.label=O,!0):(B.children||[]).some(S);S(j),n(j)},y=_=>{const O=JSON.parse(JSON.stringify(a)),j=S=>S.id===_?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(j);j(O),n(O)},N=_=>{const O=JSON.parse(JSON.stringify(a)),j=S=>{const B=(S.children||[]).findIndex(L=>L.id===_);return B!==-1?(S.children.splice(B,1),!0):(S.children||[]).some(j)};j(O),n(O)},C=()=>{c(!0);const{nodes:_,edges:O}=eY(a,i);r({...e,treeData:a,nodes:_,edges:O}),setTimeout(()=>c(!1),1e3)},T=async _=>{const O=document.querySelector(".react-flow");O&&K4(O,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(j=>{{const S=document.createElement("a");S.download=`${e.tema}.png`,S.href=j,S.click()}}).catch(j=>console.error("oops, something went wrong!",j))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),s.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:s.jsxs(xfe,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Qlt,children:[s.jsx(Sot,{}),s.jsx(Fot,{})]})}),s.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[s.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${i==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[s.jsx(Llt,{})," Vista en árbol"]}),s.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${i==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[s.jsx(Mlt,{})," Vista central"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:s.jsx(Ofe,{node:a,onUpdate:v,onAddChild:y,onDelete:N})}),s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>T(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),s.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},zlt=({onBack:e,currentUser:t})=>{const[r,a]=w.useState("list"),[n,i]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!0),[h,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const j=Ilt(S=>{i(S),f(!1)});return()=>j()},[]);const N=async j=>{if(j.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no está configurada."),u(!1);return}},C=async j=>{try{await Olt(j,t)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},T=j=>{l(j),a("editor")},_=async j=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Flt(j)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},O=()=>{switch(r){case"editor":return o?s.jsx(M7,{children:s.jsx(Hlt,{mapData:o,onBack:()=>a("list"),onSave:C})}):null;case"config":return s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),s.jsx("button",{onClick:()=>a("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"tema",value:h,onChange:j=>m(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),s.jsx("textarea",{id:"contenido",value:v,onChange:j=>y(j.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?s.jsx(Rlt,{}):"Generar Mapa con IA"})})]})]});case"list":default:return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),s.jsx("button",{onClick:()=>a("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map(j=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[s.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:j.tema}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(j.createdAt).toLocaleDateString("es-CL")]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:()=>T(j),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),s.jsx("button",{onClick:()=>_(j.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},j.id)):s.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?s.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("span",{className:"text-4xl",children:"🧠"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),O()]})},Vlt=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),$lt=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Glt=({onBack:e,currentUser:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState("Media"),[o,l]=w.useState(10),[c,u]=w.useState(!1),[d,f]=w.useState(Array(10).fill("")),[h,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState({ai:!1,puzzle:!1,data:!0}),N=w.useRef(null);w.useEffect(()=>{y(D=>({...D,data:!0}));const L=Dlt(D=>{a(D),y(k=>({...k,data:!1}))});return()=>L()},[]),w.useEffect(()=>{f(L=>{const D=Array(o).fill("");for(let k=0;k<Math.min(L.length,o);k++)D[k]=L[k];return D})},[o]);const C=(L,D)=>{const k=[...d];k[L]=D,f(k)},T=async()=>{if(h.trim()){y(L=>({...L,ai:!0}));try{alert("La API Key de Gemini no está configurada."),y(Z=>({...Z,ai:!1}));return}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},_=(L,D,k,R,U,H)=>{for(let Q=0;Q<L.length;Q++){const V=k+Q*U.y,G=R+Q*U.x;if(V<0||V>=H||G<0||G>=H||D[V][G]&&D[V][G]!==L[Q])return!1}return!0},O=(L,D,k,R,U)=>{for(let H=0;H<L.length;H++)D[k+H*U.y][R+H*U.x]=L[H]},j=async()=>{y(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const L=d.map(V=>V.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(V=>({...V,puzzle:!1}));return}const D=Math.max(...L.map(V=>V.length));let k=Math.max(D,L.length)+2;n==="Media"&&(k+=3),n==="Difícil"&&(k+=5),k=Math.min(Math.max(k,10),25);const R=Array(k).fill(null).map(()=>Array(k).fill(null)),U=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];n!=="Fácil"&&U.push({x:1,y:-1}),n==="Difícil"&&U.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const V of L.sort((G,J)=>J.length-G.length)){let G=!1;for(let J=0;J<100;J++){const W=U[Math.floor(Math.random()*U.length)],Z=Math.floor(Math.random()*k),M=Math.floor(Math.random()*k);if(_(V,R,Z,M,W,k)){O(V,R,Z,M,W),G=!0;break}}G||console.warn(`No se pudo colocar la palabra: ${V}`)}const H=R.map(V=>V.map(G=>G||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),Q={tema:h||"Personalizado",grid:H.map(V=>V.join("")),words:L.sort()};try{const V=await Plt(Q,t);x({...Q,id:V,createdAt:new Date().toISOString()})}catch(V){console.error("Error saving puzzle:",V),alert("No se pudo guardar la sopa de letras.")}finally{y(V=>({...V,puzzle:!1}))}},S=()=>{N.current&&K4(N.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=L,D.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var k;if(!g)return null;const L=((k=g.grid[0])==null?void 0:k.length)||1,D=g.grid.join("").split("");return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{ref:N,className:"p-6 bg-white",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:D.map((R,U)=>s.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:R},U))})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),s.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(R=>s.jsx("li",{children:R},R))})]})]})}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),s.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?s.jsx("div",{className:"text-center py-10",children:"Cargando..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-4xl",children:"🅰️"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&s.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),s.jsxs("select",{value:n,onChange:L=>i(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{children:"Fácil"}),s.jsx("option",{children:"Media"}),s.jsx("option",{children:"Difícil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>s.jsx("button",{onClick:()=>{l(L),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),s.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&s.jsx("input",{type:"number",value:o,onChange:L=>l(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:T,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?s.jsx(Vlt,{}):s.jsxs(s.Fragment,{children:[s.jsx($lt,{}),s.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((L,D)=>s.jsx("input",{type:"text",value:L,onChange:k=>C(D,k.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),s.jsx("div",{className:"text-right pt-4",children:s.jsx("button",{onClick:j,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},qlt=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Klt=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Wlt=({timeline:e,onSave:t,onBack:r})=>{const[a,n]=w.useState(e),[i,o]=w.useState(null),l=w.useRef(null),c=(m,g,x)=>{n(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...a.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));n(x=>({...x,events:g}))},d=m=>{n(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no está configurada."),o(null);return}},h=()=>{l.current&&K4(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${a.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:a.tema}),s.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:s.jsxs("div",{ref:l,className:"relative p-10",children:[s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),s.jsx("div",{className:"relative",children:a.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return s.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[s.jsx("div",{className:"w-1/2",children:x&&s.jsx("div",{className:"text-right pr-8",children:s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[s.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),s.jsx("div",{className:"z-10 flex-shrink-0",children:s.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),s.jsx("div",{className:"w-1/2",children:!x&&s.jsx("div",{className:"text-left pl-8",children:s.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[s.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:a.events.map(m=>s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[s.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),s.jsx("button",{onClick:()=>f(m),disabled:i===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:i===m.id?s.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):s.jsx(Klt,{})})]}),s.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),s.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[s.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),s.jsx("button",{onClick:()=>t(a),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Xlt=({onBack:e,currentUser:t})=>{const[r,a]=w.useState("list"),[n,i]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!0),[h,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const _=_lt(O=>{i(O),f(!1)});return()=>_()},[]);const N=async _=>{if(_.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no está configurada."),u(!1);return}},C=async _=>{try{await Blt(_,t),a("list"),l(null)}catch(O){console.error("Error saving timeline:",O),alert("No se pudo guardar la línea de tiempo.")}},T=async _=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Tlt(_)}catch(O){console.error("Error deleting timeline:",O),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&o?s.jsx(Wlt,{timeline:o,onSave:C,onBack:()=>a("list")}):d?s.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-4xl",children:"🕒"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),s.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"tema",value:h,onChange:_=>m(_.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),s.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:_=>x(_.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),s.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:_=>y(_.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?s.jsx(qlt,{}):"Generar con IA"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),n.length>0?n.map(_=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.tema}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(_.createdAt).toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{l(_),a("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),s.jsx("button",{onClick:()=>T(_.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},_.id)):s.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},Ylt=()=>s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tY=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Jlt=({onBack:e,currentUser:t})=>{const[r,a]=w.useState([]),[n,i]=w.useState(10),[o,l]=w.useState(!1),[c,u]=w.useState(Array(10).fill("")),[d,f]=w.useState(Array(10).fill("")),[h,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState(!1),[N,C]=w.useState({ai:!1,puzzle:!1,data:!0}),[T,_]=w.useState(null),O=w.useRef(null);w.useEffect(()=>{C(H=>({...H,data:!0}));const U=klt(H=>{const Q=H.map(V=>{const{grid_flat:G,grid_width:J,...W}=V,Z=[];if(G&&J>0)for(let M=0;M<G.length;M+=J)Z.push(G.slice(M,M+J));return{...W,grid:Z}});a(Q),C(V=>({...V,data:!1}))});return()=>U()},[]),w.useEffect(()=>{const U=n;u(H=>Array.from({length:U},(Q,V)=>H[V]||"")),f(H=>Array.from({length:U},(Q,V)=>H[V]||""))},[n]);const j=(U,H)=>{const Q=[...c];Q[U]=H,u(Q)},S=(U,H)=>{const Q=[...d];Q[U]=H,f(Q)},B=async()=>{if(h.trim()){C(U=>({...U,ai:!0}));try{alert("La API Key de Gemini no está configurada."),C(le=>({...le,ai:!1}));return}catch(U){console.error("Error generating words/clues with AI:",U),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{C(U=>({...U,ai:!1}))}}},L=async U=>{const H=c[U];if(!H||!H.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}_(U);try{alert("La API Key de Gemini no está configurada."),_(null);return}catch(Q){console.error("Error generating clue with AI:",Q),alert("No se pudo generar la pista.")}finally{_(null)}},D=w.useCallback(()=>{try{const U=c.map((xe,he)=>({word:xe.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[he]})).filter(xe=>xe.word.length>0);if(U.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;U.sort((xe,he)=>he.word.length-xe.word.length);const H=U[0].word.length,Q=Math.max(H,U.length)*2;let V=Array.from({length:Q},()=>Array(Q).fill(null));const G=[],J=U.shift(),W=Math.floor(Q/2),Z=Math.floor((Q-J.word.length)/2);for(let xe=0;xe<J.word.length;xe++)V[W][Z+xe]=J.word[xe];G.push({word:J.word,clue:J.clue,direction:"across",row:W,col:Z});for(const xe of U){let he={score:-1,row:-1,col:-1,direction:"across"};for(const ye of G)for(let ce=0;ce<ye.word.length;ce++)for(let Ae=0;Ae<xe.word.length;Ae++)if(ye.word[ce]===xe.word[Ae]){let Ne=0,Pe,Qe,$e;ye.direction==="across"?($e="down",Pe=ye.row-Ae,Qe=ye.col+ce):($e="across",Pe=ye.row+ce,Qe=ye.col-Ae);let et=!0;for(let Ke=0;Ke<xe.word.length;Ke++){const Ge=Pe+($e==="down"?Ke:0),nt=Qe+($e==="across"?Ke:0);if(Ge<0||Ge>=Q||nt<0||nt>=Q){et=!1;break}const bt=V[Ge][nt],ut=Ge===ye.row+(ye.direction==="down"?ce:0)&&nt===ye.col+(ye.direction==="across"?ce:0);if(bt&&!ut){et=!1;break}if(bt&&ut&&bt!==xe.word[Ae]){et=!1;break}if(!ut){if($e==="across"&&(Ge>0&&V[Ge-1][nt]||Ge<Q-1&&V[Ge+1][nt])){et=!1;break}if($e==="down"&&(nt>0&&V[Ge][nt-1]||nt<Q-1&&V[Ge][nt+1])){et=!1;break}}bt&&Ne++}et&&Ne>he.score&&(he={score:Ne,row:Pe,col:Qe,direction:$e})}if(he.score>-1){for(let ye=0;ye<xe.word.length;ye++){const ce=he.row+(he.direction==="down"?ye:0),Ae=he.col+(he.direction==="across"?ye:0);V[ce][Ae]=xe.word[ye]}G.push({word:xe.word,clue:xe.clue,direction:he.direction,row:he.row,col:he.col})}}let M=Q,F=-1,X=Q,Y=-1;G.forEach(xe=>{M=Math.min(M,xe.row),F=Math.max(F,xe.row+(xe.direction==="down"?xe.word.length-1:0)),X=Math.min(X,xe.col),Y=Math.max(Y,xe.col+(xe.direction==="across"?xe.word.length-1:0))}),F===-1&&(M=G[0].row,F=G[0].row,X=G[0].col,Y=G[0].col+G[0].word.length-1);const ae=1,le=Math.max(0,M-ae),ie=Math.min(Q,F+1+ae),ne=Math.max(0,X-ae),oe=Math.min(Q,Y+1+ae),we=V.slice(le,ie).map(xe=>xe.slice(ne,oe)),K=G.map(xe=>({...xe,row:xe.row-le,col:xe.col-ne})).sort((xe,he)=>xe.row-he.row||xe.col-he.col);let Ee=1;const _e=[],Ce=new Map;K.forEach(xe=>{const he=`${xe.row},${xe.col}`;Ce.has(he)||Ce.set(he,Ee++),_e.push({...xe,number:Ce.get(he)})});const de=we.map(xe=>xe.map(he=>({char:he,number:null})));return _e.forEach(xe=>{const he=`${xe.row},${xe.col}`;de[xe.row]&&de[xe.row][xe.col]!==void 0&&(de[xe.row][xe.col].number=Ce.get(he))}),{grid:de,clues:{across:_e.filter(xe=>xe.direction==="across").sort((xe,he)=>xe.number-he.number),down:_e.filter(xe=>xe.direction==="down").sort((xe,he)=>xe.number-he.number)}}}catch(U){return console.error("Error generating crossword grid:",U),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),k=async()=>{var H;C(Q=>({...Q,puzzle:!0})),x(null),await new Promise(Q=>setTimeout(Q,100));const U=D();if(U){const Q={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:U.grid,clues:U.clues},{grid:V,...G}=Q,J={...G,grid_flat:V.flat().map(W=>W.char||""),grid_width:((H=V[0])==null?void 0:H.length)||0};try{const W=await Slt(J,t);x({...Q,id:W,fechaCreacion:new Date().toISOString()})}catch(W){console.error("Error saving puzzle:",W),alert("No se pudo guardar el crucigrama en la base de datos.")}}C(Q=>({...Q,puzzle:!1}))},R=()=>{O.current&&(y(!1),setTimeout(()=>{K4(O.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(U=>{const H=document.createElement("a");H.download="crucigrama.png",H.href=U,H.click()}).catch(U=>console.error("Error generating image",U))},100))};return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-4xl",children:"✏️"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),s.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{ref:O,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsx("div",{children:s.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((U,H)=>s.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:U.char?"white":"black"},children:[U.number&&s.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:U.number}),v&&U.char&&s.jsx("span",{children:U.char})]},H))})}),s.jsxs("div",{className:"text-sm",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),s.jsx("ul",{className:"space-y-1",children:g.clues.across.map(U=>s.jsxs("li",{children:[s.jsxs("strong",{children:[U.number,"."]})," ",U.clue]},`${U.word}-${U.clue}`))}),s.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),s.jsx("ul",{className:"space-y-1",children:g.clues.down.map(U=>s.jsxs("li",{children:[s.jsxs("strong",{children:[U.number,"."]})," ",U.clue]},`${U.word}-${U.clue}`))})]})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),s.jsx("span",{children:"Mostrar Solución"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),s.jsx("button",{onClick:R,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):s.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(U=>s.jsx("button",{onClick:()=>{i(U),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&n===U?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:U},U)),s.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&s.jsx("input",{type:"number",value:n,onChange:U=>i(parseInt(U.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:U=>m(U.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:B,disabled:N.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:N.ai?s.jsx(Ylt,{}):s.jsxs(s.Fragment,{children:[s.jsx(tY,{}),s.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),s.jsx("div",{className:"space-y-3",children:Array.from({length:n}).map((U,H)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx("input",{type:"text",value:c[H],onChange:Q=>j(H,Q.target.value),placeholder:`Palabra ${H+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[s.jsx("textarea",{value:d[H],onChange:Q=>S(H,Q.target.value),placeholder:`Pista ${H+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),s.jsx("button",{onClick:()=>L(H),disabled:T===H,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:T===H?s.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):s.jsx(tY,{})})]})]},H))}),s.jsx("div",{className:"text-right pt-4",children:s.jsx("button",{onClick:k,disabled:N.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:N.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Zlt=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],ect=({recurso:e,onClick:t})=>s.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[s.jsx("div",{className:"text-6xl mb-4",children:e.icon}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),tct=()=>{const[e,t]=w.useState("menu"),{currentUser:r}=l7(),a=()=>e!=="menu"&&!r?s.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?s.jsx(zlt,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?s.jsx(Glt,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?s.jsx(Xlt,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?s.jsx(Jlt,{onBack:()=>t("menu"),currentUser:r}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Zlt.map(n=>s.jsx(ect,{recurso:n,onClick:()=>t(n.id)},n.id))})]});return s.jsx("div",{className:"animate-fade-in space-y-6",children:a()})},rct="evaluaciones_formativas",act="calificaciones_formativas",Ffe="trabajos_grupales_formativos",Dfe=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((i=(n=t.fechaPresentacion)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString().split("T")[0])||t.fechaPresentacion}},nct=(e,t)=>{const r=_t(pt(ot,rct),rr("curso","==",e));return ar(r,a=>{t(a.docs.map(n=>Dfe(n)))},a=>{console.error("Error subscribing to student evaluations:",a),t([])})},sct=(e,t)=>{if(!e||e.length===0)return()=>{};const r=e.map(a=>{const n=$t(ot,act,a);return ar(n,i=>{i.exists()?t({[a]:i.data()}):t({[a]:{}})},i=>{(i==null?void 0:i.code)!=="permission-denied"&&console.error(`Error subscribing to grade doc ${a}:`,i)})});return()=>r.forEach(a=>a())},ict=(e,t)=>{const r=_t(pt(ot,Ffe),rr("curso","==",e));return ar(r,a=>{t(a.docs.map(n=>Dfe(n)))},a=>{console.error("Error subscribing to group projects:",a),t([])})},oct=async e=>{try{const{id:t,...r}=e,a=$t(ot,Ffe,t);await ii(a,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},lct=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState({}),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,h]=w.useState(!1),[m,g]=w.useState(null),x=w.useRef(null);w.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const T=nct(e.curso,r),_=ict(e.curso,O=>{o(O),c(!1)});return()=>{T(),_()}},[e.curso]),w.useEffect(()=>{if(t.length===0){n({});return}const T=t.map(S=>S.id);let _={};const j=sct(T,S=>{_={..._,...S},n(_)});return()=>{j()}},[t]);const v=w.useMemo(()=>{if(!e.curso)return[];const _=t.filter(j=>j.curso===e.curso).reduce((j,S)=>((j[S.asignatura]=j[S.asignatura]||[]).push(S),j),{});return Object.entries(_).map(([j,S])=>{let B=0,L=0;const D=S.map(R=>{var Q;const U=(Q=a[R.id])==null?void 0:Q[e.nombreCompleto];let H="No Trabajado";return U==="trabajado"?(B+=7,L++,H="Trabajado"):U==="no trabajado"&&(B+=2,L++,H="No Trabajado"),{id:R.id,nombreActividad:R.nombreActividad,fecha:R.fecha,estado:H}}).filter(R=>{var U;return(U=a[R.id])==null?void 0:U[e.nombreCompleto]}),k=L>0?(B/L).toFixed(1):"N/A";return{asignatura:j,promedio:k,actividades:D.sort((R,U)=>new Date(U.fecha).getTime()-new Date(R.fecha).getTime())}}).filter(j=>j.actividades.length>0).sort((j,S)=>j.asignatura.localeCompare(S.asignatura))},[t,a,e]);w.useEffect(()=>{if(v.reduce((B,L)=>B+L.actividades.length,0)===0){d(null);return}const _=v.reduce((B,L)=>{const D=parseFloat(L.promedio);return isNaN(D)?B:B+D},0),O=v.length>0?_/v.length:0,j=BE.find(B=>O>=B.promedioMin&&O<=B.promedioMax)||null,S=BE.filter(B=>O>=B.promedioMin);if(d({puntajeTotal:0,promedio:O,rangoActual:j,insigniasGanadas:S}),x.current!==null){const B=BE.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;j&&(!B||j.nombre!==B.nombre)&&g(j)}x.current=O},[v]);const y=w.useMemo(()=>e.curso?i.filter(T=>T.curso===e.curso).map(T=>{const _=T.grupos.find(O=>O.integrantes.some(j=>j.nombre===e.nombreCompleto));return _?{...T,miGrupo:_}:null}).filter(T=>T!==null).sort((T,_)=>new Date(_.fechaPresentacion).getTime()-new Date(T.fechaPresentacion).getTime()):[],[i,e]),N=async(T,_)=>{const O=i.find(S=>S.id===T);if(!O)return;const j={...O,grupos:O.grupos.map(S=>S.integrantes.some(L=>L.nombre===e.nombreCompleto)?{...S,integrantes:S.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:_||void 0}:L)}:S)};try{await oct(j)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},C=T=>{const _=parseFloat(T);return isNaN(_)?"bg-slate-400":_<4?"bg-red-500":_<5.5?"bg-yellow-500":"bg-green-500"};return l?s.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:T=>T.stopPropagation(),children:[s.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),s.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),s.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),s.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),s.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:T=>T.stopPropagation(),children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),s.jsx("div",{className:"overflow-y-auto space-y-3",children:BE.map(T=>{const _=u==null?void 0:u.insigniasGanadas.some(O=>O.nombre===T.nombre);return s.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${_?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[s.jsx("div",{className:"text-5xl",children:T.emoji}),s.jsxs("div",{children:[s.jsx("h3",{className:`font-bold ${_?"text-amber-700":"text-slate-600"}`,children:T.nombre}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",T.promedioMin," y ",T.promedioMax]})]})]},T.nombre)})})]})}),s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&s.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),s.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),s.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),s.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),s.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>s.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800",children:T.asignatura}),s.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),s.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${C(T.promedio)}`,children:T.promedio})]}),s.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),T.actividades.map(_=>s.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-700",children:_.nombreActividad}),s.jsx("p",{className:"text-xs text-slate-500",children:new Date(_.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),s.jsx("span",{className:`font-semibold ${_.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:_.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},_.id))]})]},T.asignatura))}):s.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[s.jsx("span",{className:"text-5xl",children:"📊"}),s.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),s.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),s.jsx("div",{className:"space-y-4",children:y.map(T=>{const _=T.miGrupo.integrantes.filter(j=>j.nombre!==e.nombreCompleto&&j.rol).map(j=>j.rol),O=Sre.filter(j=>!_.includes(j));return s.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:T.nombreActividad}),s.jsxs("p",{className:"text-sm text-slate-500",children:[T.asignatura," - Presentación: ",new Date(T.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),s.jsxs("div",{className:"mt-3 pt-3 border-t",children:[s.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",T.miGrupo.numero]}),s.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:T.miGrupo.integrantes.map(j=>s.jsxs("li",{className:"grid grid-cols-2 items-center",children:[s.jsx("span",{className:j.nombre===e.nombreCompleto?"font-bold":"",children:j.nombre}),j.nombre===e.nombreCompleto?s.jsxs("select",{value:j.rol||"",onChange:S=>N(T.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[s.jsx("option",{value:"",children:"-- Seleccionar rol --"}),j.rol&&!O.includes(j.rol)&&s.jsx("option",{value:j.rol,children:j.rol}),O.map(S=>s.jsx("option",{value:S,children:S},S))]}):s.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:j.rol||"Sin rol"})]},j.nombre))})]})]},T.id)})})]})]})},cct="proyectos_interdisciplinarios",Pfe="entregas_interdisciplinarias",Rfe=e=>{var r,a,n,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((i=(n=t.fechaCompletado)==null?void 0:n.toDate)==null?void 0:i.call(n).toISOString())||t.fechaCompletado}},uct=(e,t)=>{const r=_t(pt(ot,cct),rr("cursos","array-contains",e));return ar(r,a=>{const n=a.docs.map(i=>Rfe(i));t(n)},a=>{console.error("Error al suscribirse a los proyectos:",a),t([])})},dct=(e,t)=>{const r=_t(pt(ot,Pfe),rr("estudianteId","==",e));return ar(r,a=>{const n=a.docs.map(i=>Rfe(i));t(n)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},fct=async e=>{try{const{id:t,...r}=e,a=$t(ot,Pfe,t),n={...r,fechaCompletado:lr.fromDate(new Date(r.fechaCompletado||Date.now()))};await ii(a,n,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Act=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState([]),[i,o]=w.useState(null),[l,c]=w.useState(!0);w.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=uct(e.curso,r),h=dct(e.id,m=>{n(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await fct(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=w.useMemo(()=>{const _=a.find(O=>O.planificacionId===f.id&&O.tareaId===h.id);return _||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,a]),[g,x]=w.useState(!1),[v,y]=w.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),N=_=>{var j;const O=(j=_.target.files)==null?void 0:j[0];O&&(alert(`Simulación: Archivo "${O.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:O.name,url:`simulated/path/${O.name}`},fechaCompletado:new Date().toISOString()}))},C=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},T=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:m.completada,onChange:T,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&s.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),s.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&s.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[s.jsx("textarea",{value:v.observaciones,onChange:_=>y({...v,observaciones:_.target.value}),onBlur:C,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),s.jsx("input",{type:"url",value:v.enlace,onChange:_=>y({...v,enlace:_.target.value}),onBlur:C,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),s.jsx("input",{type:"file",onChange:N,className:"text-sm"}),m.archivoAdjunto&&s.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&s.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[s.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?s.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=a.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[s.jsxs("button",{onClick:()=>o(i===f.id?null:f.id),className:"w-full text-left",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[s.jsx("span",{children:"Progreso"}),s.jsxs("span",{children:[Math.round(x),"%"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),i===f.id&&s.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>s.jsx(d,{plan:f,tarea:v},v.id)):s.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):s.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[s.jsx("span",{className:"text-5xl",children:"🎉"}),s.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),s.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},hct=({ciclos:e})=>{var T,_,O,j,S;const[t,r]=w.useState(!1),[a,n]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(null),u=B=>{if(!B)return null;try{let L=B.trim();const D=L.match(/```json([\s\S]*?)```/i)||L.match(/```([\s\S]*?)```/i);D&&D[1]&&(L=D[1]);const k=L.indexOf("{"),R=L.lastIndexOf("}");return k!==-1&&R!==-1&&R>k&&(L=L.slice(k,R+1)),JSON.parse(L)}catch{return null}},d=e.length,f=e.filter(B=>B.videoObservacionUrl&&B.retroalimentacion.exito).length,h=new Set(e.map(B=>B.docenteInfo)).size,m=e.reduce((B,L)=>{if(!L.horaInicio||!L.horaTermino)return B;const D=new Date(`2000/01/01 ${L.horaInicio}`),R=(new Date(`2000/01/01 ${L.horaTermino}`).getTime()-D.getTime())/(1e3*60);return B+R},0)/e.length,g=e.reduce((B,L)=>{const D=new Date(L.fecha).toLocaleDateString("es-ES",{month:"long"});return B[D]=(B[D]||0)+1,B},{}),x=e.reduce((B,L)=>(L.asignaturaInfo&&(B[L.asignaturaInfo]=(B[L.asignaturaInfo]||0)+1),B),{}),v=Object.entries(x).sort(([,B],[,L])=>L-B).slice(0,5),y=w.useMemo(()=>e.map(B=>{var L,D,k;return{fecha:B.fecha,docente:B.docenteInfo,asignatura:B.asignaturaInfo,foco:(L=B.retroalimentacion)==null?void 0:L.foco,exito:(D=B.retroalimentacion)==null?void 0:D.exito,brecha:(k=B.retroalimentacion)==null?void 0:k.brecha}}).filter(B=>B.foco||B.brecha||B.exito),[e]),N=()=>{const B=Object.entries(g).map(([R,U])=>`${R}: ${U}`).join(", "),L=v.map(([R,U])=>`${R} (${U})`).join(", "),D=d?Math.round(f/d*100):0,k=y.slice(0,12).map(R=>`- ${new Date(R.fecha).toLocaleDateString()} | Docente: ${R.docente} | Asig.: ${R.asignatura}
         Exitos: ${R.exito||"-"}
         Foco: ${R.foco||"-"}
         Brecha: ${R.brecha?`min ${R.brecha.minutoInicial||"?"}-${R.brecha.minutoFinal||"?"} | preguntas: ${R.brecha.preguntas||"-"} | indicadores: ${R.brecha.indicadores||"-"}`:"-"}`).join(`
`);return`Eres un asesor pedagógico experto en OPR. Analiza los siguientes datos agregados de ciclos de observación y retroalimentación y devuelve un JSON con insights accionables para Subdirección.

DATOS RESUMEN:
- Total de ciclos: ${d}
- Ciclos completados: ${f} (tasa: ${D}%)
- Docentes únicos observados: ${h}
- Tiempo promedio de observación (min): ${isFinite(m)?Math.round(m):0}
- Distribución por mes: ${B||"sin datos"}
- Asignaturas más observadas (top 5): ${L||"sin datos"}

MUESTRAS DE FOCO/ÉXITO/BRECHAS (máx. 12):
${k||"(no hay muestras)"}

DEVUELVE SOLO JSON (sin comentarios) con este esquema:
{
  "resumenGeneral": "string",
  "tendencias": ["string"],
  "riesgos": ["string"],
  "focosRecomendados": [
    { "foco": "string", "justificativo": "string opcional" }
  ],
  "proximosPasos": ["string"],
  "indicadores": [ { "nombre": "string", "valor": "string|number" } ]
}
`},C=async()=>{if(d){r(!0),n(null),c(null),o(null);try{const B=N(),L=await K8(B,1,!0,"OPR"),D=u(L);D?c(D):o(L)}catch(B){n((B==null?void 0:B.message)||"No se pudo obtener el análisis con IA.")}finally{r(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(fl,{className:"w-5 h-5 text-indigo-600"}),"Asistente IA del Ciclo OPR"]}),s.jsx("button",{onClick:C,disabled:t||d===0,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium border ${t||d===0?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700"} border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200`,title:d===0?"No hay ciclos para analizar":"Generar análisis con IA",children:t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Generando..."]}):s.jsx(s.Fragment,{children:"Generar análisis"})})]}),a&&s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:a}),!a&&(l||i)&&s.jsx("div",{className:"mt-2 grid grid-cols-1 lg:grid-cols-2 gap-4",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[l.resumenGeneral&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Resumen"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:l.resumenGeneral})]}),(T=l.tendencias)!=null&&T.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Tendencias"}),s.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.tendencias.map((B,L)=>s.jsx("li",{children:B},L))})]}):null,(_=l.riesgos)!=null&&_.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Riesgos"}),s.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.riesgos.map((B,L)=>s.jsx("li",{children:B},L))})]}):null]}),s.jsxs("div",{className:"space-y-3",children:[(O=l.focosRecomendados)!=null&&O.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Focos recomendados"}),s.jsx("ul",{className:"space-y-2",children:l.focosRecomendados.map((B,L)=>s.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300",children:[s.jsx("span",{className:"font-medium",children:B.foco}),B.justificativo?s.jsx("span",{className:"block text-slate-600 dark:text-slate-400",children:B.justificativo}):null]},L))})]}):null,(j=l.proximosPasos)!=null&&j.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Próximos pasos"}),s.jsx("ol",{className:"list-decimal pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.proximosPasos.map((B,L)=>s.jsx("li",{children:B},L))})]}):null,(S=l.indicadores)!=null&&S.length?s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.indicadores.map((B,L)=>s.jsxs("div",{className:"px-3 py-2 rounded border dark:border-slate-700 text-sm",children:[s.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:B.nombre}),s.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-100",children:String(B.valor)})]},L))})]}):null]})]}):s.jsx("div",{className:"col-span-2 text-sm text-slate-700 dark:text-slate-300",children:s.jsx(uC,{content:i,context:"dashboard-opr-ai"})})}),!a&&!l&&!i&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Genera un análisis para obtener tendencias, focos y próximos pasos basados en los ciclos registrados."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:s.jsx(fl,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:s.jsx(cn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Ciclos Completados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:f})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:s.jsx(Ei,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:s.jsx(Ac,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Tiempo Promedio"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[Math.round(m)," min"]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Io,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),s.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([B,L])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:B}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:L})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${L/d*100}%`}})})]})},B))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(tu,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),s.jsx("div",{className:"space-y-2",children:v.map(([B,L])=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:B}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:L})]}),s.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${L/Math.max(...Object.values(x))*100}%`}})})]})},B))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(vc,{className:"w-5 h-5 text-blue-600"}),"Estado de los Ciclos"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),s.jsx("tbody",{children:e.map(B=>s.jsxs("tr",{className:"border-t dark:border-slate-700",children:[s.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:B.docenteInfo}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(B.fecha).toLocaleDateString()}),s.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:B.asignaturaInfo}),s.jsx("td",{className:"py-2 px-3",children:B.videoObservacionUrl&&B.retroalimentacion.exito?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[s.jsx(cn,{className:"w-3 h-3"})," Completado"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[s.jsx(vc,{className:"w-3 h-3"})," Pendiente"]})})]},B.id))})]})})]})]})},mct=({acompanamientoId:e,onEdit:t,readOnly:r=!1,allowDelete:a=!0})=>{const[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null);w.useEffect(()=>{l(!0),u(null);let m=null;try{m=Ptt(e,g=>{i(g),l(!1)},async g=>{console.warn("Suscripción ciclos falló, usando fetch una vez.",g);try{const x=await MD(e);i(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})}catch(g){console.warn("Fallo suscripción, hago fetch único.",g),(async()=>{try{const x=await MD(e);i(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})()}return()=>{try{m&&m()}catch{}}},[e]);const d=async m=>{if(confirm("¿Eliminar este ciclo OPR? Esta acción no se puede deshacer."))try{await UD(m)}catch{alert("No se pudo eliminar el ciclo.")}},[f,h]=w.useState(!1);return o?s.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-amber-600"})," Cargando ciclos OPR..."]}):c?s.jsx("div",{className:"p-3 border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c})}):n.length?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Ciclos OPR"}),s.jsx("button",{onClick:()=>h(!f),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 rounded-lg shadow-sm transition-colors",children:f?"Ver Lista":"Ver Dashboard"})]}),f?s.jsx("div",{children:s.jsx(hct,{ciclos:n})}):s.jsx("div",{className:"space-y-3",children:n.map(m=>{var g;return s.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm",children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r8,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:m.nombreCiclo||"Ciclo"}),s.jsxs("span",{className:"text-sm text-slate-500",children:["• ",new Date(m.fecha).toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 dark:text-slate-300",children:[m.videoObservacionUrl&&s.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.videoObservacionUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video de observación",children:[s.jsx(xre,{className:"w-4 h-4"})," Video observación"]}),((g=m.retroalimentacion)==null?void 0:g.videoModeloUrl)&&s.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.retroalimentacion.videoModeloUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video modelo",children:[s.jsx(DN,{className:"w-4 h-4"})," Video modelo"]}),m.horaInicio&&m.horaTermino&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ac,{className:"w-4 h-4"})," ",m.horaInicio,"–",m.horaTermino]})]})]}),!r&&s.jsxs("div",{className:"flex items-center gap-2",children:[t&&s.jsx("button",{onClick:()=>t(m),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Editar"}),a&&s.jsx("button",{onClick:()=>d(m.id),title:"Eliminar ciclo",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:s.jsx(Da,{className:"w-4 h-4"})})]})]})},m.id)})})]}):s.jsx("div",{className:"p-6 text-center bg-slate-100 dark:bg-slate-800 rounded",children:s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"No hay ciclos OPR registrados para este acompañamiento."})})},Ks=({label:e,value:t})=>t?s.jsxs("div",{className:"flex gap-2 text-sm",children:[s.jsx("div",{className:"text-slate-500 dark:text-slate-400 min-w-28",children:e}),s.jsx("div",{className:"text-slate-800 dark:text-slate-200 flex-1",children:t})]}):null,pct=({ciclo:e,onClose:t})=>{const{nombreCiclo:r,fecha:a,horaInicio:n,horaTermino:i,videoObservacionUrl:o,detallesObservacion:l=[],retroalimentacion:c,planificacion:u,seguimiento:d}=e,f=e.docenteInfo||e.docente||"",h=e.cursoInfo||"",m=e.asignaturaInfo||"";return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t,children:s.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden animate-fade-in-up",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r8,{className:"w-5 h-5 text-purple-600"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r||"Ciclo OPR"})]}),s.jsx("button",{onClick:t,className:"p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700",title:"Cerrar",children:s.jsx(Oo,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"px-5 py-4 space-y-6 max-h-[80vh] overflow-auto",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ks,{label:"Fecha",value:new Date(a).toLocaleDateString("es-CL")}),s.jsx(Ks,{label:"Hora",value:n||i?`${n||""}${n&&i?" – ":""}${i||""}`:void 0}),s.jsx(Ks,{label:"Docente",value:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(pEe,{className:"w-4 h-4 text-sky-600"}),f]})}),s.jsx(Ks,{label:"Curso / Asignatura",value:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-amber-600"}),[h,m].filter(Boolean).join(" • ")]})}),o&&s.jsx(Ks,{label:"Video",value:s.jsxs("a",{className:"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline",href:o,target:"_blank",rel:"noopener noreferrer",children:[s.jsx(xre,{className:"w-4 h-4"})," Ver video de observación"]})})]}),l!=null&&l.length?s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[s.jsx(Ac,{className:"w-4 h-4 text-blue-600"})," Registro detallado de observación"]}),s.jsx("div",{className:"overflow-x-auto border rounded-md dark:border-slate-700",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-2",children:"Minuto"}),s.jsx("th",{className:"text-left p-2",children:"Acciones Docente"}),s.jsx("th",{className:"text-left p-2",children:"Acciones Estudiantes"}),s.jsx("th",{className:"text-left p-2",children:"Actividades"})]})}),s.jsx("tbody",{children:l.map(g=>s.jsxs("tr",{className:"border-t dark:border-slate-700 align-top",children:[s.jsx("td",{className:"p-2 whitespace-nowrap",children:g.minuto}),s.jsx("td",{className:"p-2",children:g.accionesDocente||"—"}),s.jsx("td",{className:"p-2",children:g.accionesEstudiantes||"—"}),s.jsx("td",{className:"p-2",children:g.actividades||"—"})]},g.id))})]})})]}):null,c&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[s.jsx(DN,{className:"w-4 h-4 text-green-600"})," Retroalimentación"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ks,{label:"Éxito",value:c.exito}),s.jsx(Ks,{label:"Foco",value:c.foco}),s.jsx(Ks,{label:"Modelo",value:c.modelo}),s.jsx(Ks,{label:"Elementos a identificar",value:c.elementosIdentificar})]}),c.brecha&&s.jsxs("div",{className:"mt-3 p-3 rounded border dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Análisis de brecha"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[s.jsx(Ks,{label:"Minuto inicial",value:c.brecha.minutoInicial}),s.jsx(Ks,{label:"Minuto final",value:c.brecha.minutoFinal}),s.jsx(Ks,{label:"Indicadores",value:c.brecha.indicadores})]}),s.jsx("div",{className:"mt-2 text-sm",children:s.jsx(Ks,{label:"Preguntas",value:c.brecha.preguntas})})]})]}),u&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Planificación de práctica"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ks,{label:"Preparación",value:u.preparacion}),s.jsx(Ks,{label:"Objetivo",value:u.objetivo}),s.jsx(Ks,{label:"Actividad",value:u.actividad}),s.jsx(Ks,{label:"Tiempo",value:u.tiempo})]})]}),d&&(d.fecha||d.curso||d.profesor||d.firma)&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsx(Ks,{label:"Fecha",value:d.fecha}),s.jsx(Ks,{label:"Curso",value:d.curso}),s.jsx(Ks,{label:"Profesor",value:d.profesor}),s.jsx(Ks,{label:"Firma",value:d.firma})]})]})]}),s.jsx("div",{className:"px-5 py-3 bg-slate-50 dark:bg-slate-700/50 border-t dark:border-slate-700 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cerrar"})})]})})},gct=({data:e})=>s.jsx("div",{className:"space-y-4",children:e.map((r,a)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),s.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:s.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+a))}),xct=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState(W2),[f,h]=w.useState([]),[m,g]=w.useState(null),x=w.useCallback(async()=>{n(!0);try{let C;if(e.email)try{C=await Ltt(e.email.toLowerCase())}catch{C=await fX(e.nombreCompleto)}else C=await fX(e.nombreCompleto);const T=C.sort((_,O)=>{const j=_.fecha?new Date(_.fecha).getTime():0;return(O.fecha?new Date(O.fecha).getTime():0)-j});r(T),o(null)}catch(C){console.error("Error al cargar acompañamientos desde Firestore",C),o("No se pudieron cargar tus acompañamientos desde la nube.")}finally{n(!1)}},[e.nombreCompleto]),v=w.useCallback(async()=>{try{const C=await Mtt(e.nombreCompleto);C&&d(C)}catch(C){console.error("Error al cargar rúbrica personalizada",C)}},[e.nombreCompleto]);w.useEffect(()=>{x(),v()},[x,v]),w.useEffect(()=>{(async()=>{try{const T=await ade(),_=(e.email||"").toLowerCase(),O=e.nombreCompleto,j=T.filter(S=>S.docenteEmailLower===_||S.docenteInfo===O||S.docente===O);j.sort((S,B)=>S.fecha<B.fecha?1:S.fecha>B.fecha?-1:0),h(j)}catch(T){console.warn("No se pudieron cargar Ciclos OPR independientes.",T),h([])}})()},[e.email,e.nombreCompleto]);const y=w.useMemo(()=>{if(!l)return[];const C={};return u.forEach(T=>{C[T.domain]={total:0,count:0},T.criteria.forEach(_=>{const O=l.rubricaResultados[_.name];O&&(C[T.domain].total+=O,C[T.domain].count++)})}),Object.entries(C).map(([T,_])=>({label:T,value:_.count>0?_.total/_.count:0}))},[l,u]),N=C=>{const T=new gr;T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(100),T.text("LICEO INDUSTRIAL DE RECOLETA",T.internal.pageSize.getWidth()/2,15,{align:"center"}),T.setFont("helvetica","bold"),T.setFontSize(16),T.setTextColor(40),T.text("Informe de Acompañamiento Docente",T.internal.pageSize.getWidth()/2,25,{align:"center"}),T.setFontSize(12),T.setFont("helvetica","normal"),Ni(T,{startY:35,body:[["Docente:",C.docente],["Fecha:",new Date(C.fecha).toLocaleDateString("es-CL")],["Asignatura:",C.asignatura],["Curso:",C.curso],["Bloques:",C.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let _=T.lastAutoTable.finalY+15;if(Object.keys(C.rubricaResultados).length>0){const S=[],B=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(L=>{S.push([{content:L.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),L.criteria.forEach(D=>{const k=C.rubricaResultados[D.name],R=k?B[k-1]:"No evaluado";S.push([D.name,R])})}),Ni(T,{startY:_,head:[["Indicador","Nivel de Logro"]],body:S,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),_=T.lastAutoTable.finalY+15}const O=(S,B)=>{if(!B)return;_>250&&(T.addPage(),_=20,T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(100),T.text("LICEO INDUSTRIAL DE RECOLETA",T.internal.pageSize.getWidth()/2,15,{align:"center"}),_=25),T.setFont("helvetica","bold"),T.setFontSize(14),T.setTextColor(40),T.text(S,14,_),_+=8,T.setFont("helvetica","normal"),T.setFontSize(11),T.setTextColor(60);const L=T.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);T.text(L,14,_),_+=L.length*5+10};O("Observaciones Generales",C.observacionesGenerales),O("Retroalimentación Consolidada",C.retroalimentacionConsolidada);const j=T.getNumberOfPages();for(let S=1;S<=j;S++)T.setPage(S),T.setFontSize(8),T.setTextColor(128),T.text(`Página ${S} de ${j}`,T.internal.pageSize.getWidth()/2,T.internal.pageSize.getHeight()-10,{align:"center"});T.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(C.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),s.jsxs("button",{onClick:()=>N(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[s.jsx(kre,{})," Exportar PDF"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[s.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:s.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),s.jsx("h3",{children:"Observaciones Generales"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:s.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:s.jsx(gct,{data:y})})]})]}),l.id&&s.jsxs("div",{className:"mt-10",children:[s.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Mis Ciclos OPR"}),s.jsx("div",{className:"border rounded-lg dark:border-slate-700 p-4 bg-white dark:bg-slate-800",children:s.jsx(mct,{acompanamientoId:l.id,readOnly:!0,allowDelete:!1})})]})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),a&&s.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),i&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),!a&&t.length===0&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),s.jsx("div",{className:"space-y-4",children:!a&&t.length>0?t.map(C=>s.jsx("button",{onClick:()=>c(C),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[C.curso," - ",C.asignatura]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(C.fecha).toLocaleDateString("es-CL"),C.bloques&&` | Bloques: ${C.bloques}`]}),Object.keys(C.rubricaResultados).length>0&&s.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(C.rubricaResultados).length," criterios"]})]}),s.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},C.id)):!a&&s.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsx("span",{className:"text-5xl",children:"👍"}),s.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})}),s.jsxs("div",{className:"mt-10",children:[s.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Ciclos OPR Independientes"}),f.length===0?s.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded border dark:border-slate-700 text-slate-600 dark:text-slate-300",children:"No tienes ciclos OPR independientes registrados."}):s.jsx("div",{className:"space-y-3",children:f.map(C=>s.jsx("button",{onClick:()=>g(C),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:s.jsx("div",{className:"flex justify-between items-start gap-3",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombreCiclo||"Ciclo"}),s.jsxs("span",{className:"text-sm text-slate-500",children:["• ",new Date(C.fecha).toLocaleDateString("es-CL")]})]}),C.cursoInfo&&C.asignaturaInfo&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[C.cursoInfo," • ",C.asignaturaInfo]})]})})},C.id))})]}),m&&s.jsx(pct,{ciclo:m,onClose:()=>g(null)})]})},vct=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=pt(Ar,"planificaciones"),r=_t(t,Gt("fechaCreacion","desc"));return ar(r,n=>{const i=[];n.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",i.length),e(i)},n=>{throw console.error("❌ Error al cargar todas las planificaciones:",n),n})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},bct=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=pt(Ar,"planificaciones"),a=_t(r,rr("userId","==",e),Gt("fechaCreacion","desc"));return ar(a,i=>{const o=[];i.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",o.length),t(o)},i=>{throw console.error("❌ Error al cargar planificaciones del usuario:",i),i})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function yct(e){for(var t=e.length/6|0,r=new Array(t),a=0;a<t;)r[a]="#"+e.slice(a*6,++a*6);return r}const wct=yct("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Nct={value:function(){}};function Lfe(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new p5(r)}function p5(e){this._=e}function Cct(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}p5.prototype=Lfe.prototype={constructor:p5,on:function(e,t){var r=this._,a=Cct(e+"",r),n,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((n=(e=a[i]).type)&&(n=Ect(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=rY(r[n],e.name,t);else if(t==null)for(n in r)r[n]=rY(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new p5(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,i;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(t,r)}};function Ect(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function rY(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=Nct,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}const jct=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Lfe},Symbol.toStringTag,{value:"Module"})),kct=ome(jct);var D6,aY;function Sct(){if(aY)return D6;aY=1;const e=kct.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},a=64,n=2048;D6=function(){var T=[256,256],_=i,O=o,j=c,S=l,B=l,L=u,D=d,k=x,R=[],U=1/0,H=e("word","end"),Q=null,V=Math.random,G={},J=N;G.canvas=function(M){return arguments.length?(J=C(M),G):J},G.start=function(){var M=W(J()),F=y((T[0]>>5)*T[1]),X=null,Y=R.length,ae=-1,le=[],ie=R.map(function(oe,we){return oe.text=_.call(this,oe,we),oe.font=O.call(this,oe,we),oe.style=S.call(this,oe,we),oe.weight=B.call(this,oe,we),oe.rotate=L.call(this,oe,we),oe.size=~~j.call(this,oe,we),oe.padding=D.call(this,oe,we),oe}).sort(function(oe,we){return we.size-oe.size});return Q&&clearInterval(Q),Q=setInterval(ne,0),ne(),G;function ne(){for(var oe=Date.now();Date.now()-oe<U&&++ae<Y&&Q;){var we=ie[ae];we.x=T[0]*(V()+.5)>>1,we.y=T[1]*(V()+.5)>>1,f(M,we,ie,ae),we.hasText&&Z(F,we,X)&&(le.push(we),H.call("word",G,we),X?m(X,we):X=[{x:we.x+we.x0,y:we.y+we.y0},{x:we.x+we.x1,y:we.y+we.y1}],we.x-=T[0]>>1,we.y-=T[1]>>1)}ae>=Y&&(G.stop(),H.call("end",G,le,X))}},G.stop=function(){Q&&(clearInterval(Q),Q=null);for(const M of R)delete M.sprite;return G};function W(M){const F=M.getContext("2d",{willReadFrequently:!0});M.width=M.height=1;const X=Math.sqrt(F.getImageData(0,0,1,1).data.length>>2);return M.width=(a<<5)/X,M.height=n/X,F.fillStyle=F.strokeStyle="red",{context:F,ratio:X}}function Z(M,F,X){T[0],T[1];for(var Y=F.x,ae=F.y,le=Math.sqrt(T[0]*T[0]+T[1]*T[1]),ie=k(T),ne=V()<.5?1:-1,oe=-ne,we,K,Ee;(we=ie(oe+=ne))&&(K=~~we[0],Ee=~~we[1],!(Math.min(Math.abs(K),Math.abs(Ee))>=le));)if(F.x=Y+K,F.y=ae+Ee,!(F.x+F.x0<0||F.y+F.y0<0||F.x+F.x1>T[0]||F.y+F.y1>T[1])&&(!X||g(F,X))&&!h(F,M,T[0])){for(var _e=F.sprite,Ce=F.width>>5,de=T[0]>>5,xe=F.x-(Ce<<4),he=xe&127,ye=32-he,ce=F.y1-F.y0,Ae=(F.y+F.y0)*de+(xe>>5),Ne,Pe=0;Pe<ce;Pe++){Ne=0;for(var Qe=0;Qe<=Ce;Qe++)M[Ae+Qe]|=Ne<<ye|(Qe<Ce?(Ne=_e[Pe*Ce+Qe])>>>he:0);Ae+=de}return!0}return!1}return G.timeInterval=function(M){return arguments.length?(U=M??1/0,G):U},G.words=function(M){return arguments.length?(R=M,G):R},G.size=function(M){return arguments.length?(T=[+M[0],+M[1]],G):T},G.font=function(M){return arguments.length?(O=C(M),G):O},G.fontStyle=function(M){return arguments.length?(S=C(M),G):S},G.fontWeight=function(M){return arguments.length?(B=C(M),G):B},G.rotate=function(M){return arguments.length?(L=C(M),G):L},G.text=function(M){return arguments.length?(_=C(M),G):_},G.spiral=function(M){return arguments.length?(k=r[M]||M,G):k},G.fontSize=function(M){return arguments.length?(j=C(M),G):j},G.padding=function(M){return arguments.length?(D=C(M),G):D},G.random=function(M){return arguments.length?(V=M,G):V},G.on=function(){var M=H.on.apply(H,arguments);return M===H?G:M},G};function i(T){return T.text}function o(){return"serif"}function l(){return"normal"}function c(T){return Math.sqrt(T.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(T,_,O,j){if(!_.sprite){var S=T.context,B=T.ratio;S.clearRect(0,0,(a<<5)/B,n/B);var L=0,D=0,k=0,R=O.length;for(--j;++j<R;){_=O[j],S.save(),S.font=_.style+" "+_.weight+" "+~~((_.size+1)/B)+"px "+_.font;const we=S.measureText(_.text),K=-Math.floor(we.width/2);let Ee=(we.width+1)*B,_e=_.size<<1;if(_.rotate){var U=Math.sin(_.rotate*t),H=Math.cos(_.rotate*t),Q=Ee*H,V=Ee*U,G=_e*H,J=_e*U;Ee=Math.max(Math.abs(Q+J),Math.abs(Q-J))+31>>5<<5,_e=~~Math.max(Math.abs(V+G),Math.abs(V-G))}else Ee=Ee+31>>5<<5;if(_e>k&&(k=_e),L+Ee>=a<<5&&(L=0,D+=k,k=0),D+_e>=n)break;S.translate((L+(Ee>>1))/B,(D+(_e>>1))/B),_.rotate&&S.rotate(_.rotate*t),S.fillText(_.text,K,0),_.padding&&(S.lineWidth=2*_.padding,S.strokeText(_.text,K,0)),S.restore(),_.width=Ee,_.height=_e,_.xoff=L,_.yoff=D,_.x1=Ee>>1,_.y1=_e>>1,_.x0=-_.x1,_.y0=-_.y1,_.hasText=!0,L+=Ee}for(var W=S.getImageData(0,0,(a<<5)/B,n/B).data,Z=[];--j>=0;)if(_=O[j],!!_.hasText){for(var M=_.width,F=M>>5,X=_.y1-_.y0,Y=0;Y<X*F;Y++)Z[Y]=0;if(L=_.xoff,L==null)return;D=_.yoff;for(var ae=0,le=-1,ie=0;ie<X;ie++){for(var Y=0;Y<M;Y++){var ne=F*ie+(Y>>5),oe=W[(D+ie)*(a<<5)+(L+Y)<<2]?1<<31-Y%32:0;Z[ne]|=oe,ae|=oe}ae?le=ie:(_.y0++,X--,ie--,D++)}_.y1=_.y0+le,_.sprite=Z.slice(0,(_.y1-_.y0)*F)}}}function h(T,_,O){O>>=5;for(var j=T.sprite,S=T.width>>5,B=T.x-(S<<4),L=B&127,D=32-L,k=T.y1-T.y0,R=(T.y+T.y0)*O+(B>>5),U,H=0;H<k;H++){U=0;for(var Q=0;Q<=S;Q++)if((U<<D|(Q<S?(U=j[H*S+Q])>>>L:0))&_[R+Q])return!0;R+=O}return!1}function m(T,_){var O=T[0],j=T[1];_.x+_.x0<O.x&&(O.x=_.x+_.x0),_.y+_.y0<O.y&&(O.y=_.y+_.y0),_.x+_.x1>j.x&&(j.x=_.x+_.x1),_.y+_.y1>j.y&&(j.y=_.y+_.y1)}function g(T,_){return T.x+T.x1>_[0].x&&T.x+T.x0<_[1].x&&T.y+T.y1>_[0].y&&T.y+T.y0<_[1].y}function x(T){var _=T[0]/T[1];return function(O){return[_*(O*=.1)*Math.cos(O),O*Math.sin(O)]}}function v(T){var _=4,O=_*T[0]/T[1],j=0,S=0;return function(B){var L=B<0?-1:1;switch(Math.sqrt(1+4*L*B)-L&3){case 0:j+=O;break;case 1:S+=_;break;case 2:j-=O;break;default:S-=_;break}return[j,S]}}function y(T){for(var _=[],O=-1;++O<T;)_[O]=0;return _}function N(){return document.createElement("canvas")}function C(T){return typeof T=="function"?T:function(){return T}}return D6}var _ct=Sct();const Bct=Ml(_ct),Tct=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Ict=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Oct=()=>s.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Fct=e=>{const[t,r]=w.useState([]),[a,n]=w.useState(!0),[i,o]=w.useState(null),l=w.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return w.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),n(!1);return}try{let c;const u=d=>{r(d),n(!1),o(null)};if(l)c=vct(u);else{const d=e.email||e.id||"";c=bct(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),n(!1)}},[e,l]),{planificaciones:t,loading:a,error:i,canViewAllPlans:l}},Dct=({plan:e,onClose:t})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[s.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:s.jsx(Ict,{})})]}),s.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[s.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),s.jsx("div",{className:"mt-3",children:s.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),s.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),s.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,a)=>s.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[s.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",a+1,": ",r.actividades]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},a))}),e.reflexionUnidad&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?s.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,a)=>s.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[s.jsxs("span",{className:"font-bold text-amber-500",children:[a+1,"."]})," ",r]},r))}):s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),nY=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Pct=["1º Medio","2º Medio","3º Medio","4º Medio"],Rct=({words:e})=>{const t=w.useRef(null);return w.useEffect(()=>{if(!e.length||!t.current)return;const r=Zu(t.current);r.selectAll("*").remove();const a=Bct().size([500,350]).words(e.map(i=>({...i}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(i=>Math.sqrt(i.value)*12).on("end",n);a.start();function n(i){r.attr("width",a.size()[0]).attr("height",a.size()[1]).append("g").attr("transform",`translate(${a.size()[0]/2},${a.size()[1]/2})`).selectAll("text").data(i).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>n4(wct)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),s.jsx("svg",{ref:t})},Lct=({planificaciones:e})=>{const[t,r]=w.useState("todos"),[a,n]=w.useState("todos"),i=w.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=w.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(a==="todos"||d.asignatura===a)&&d.reflexionUnidad),[e,t,a]),l=w.useMemo(()=>{const d=nY.reduce((f,h)=>({...f,[h]:0}),{});return o.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=nY.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[o]),c=w.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),s.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[s.jsx("option",{value:"todos",children:"Todos los Niveles"}),Pct.map(d=>s.jsx("option",{value:d,children:d},d))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsx("select",{value:a,onChange:d=>n(d.target.value),className:u,children:i.map(d=>s.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?s.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):s.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>s.jsxs("li",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),s.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?s.jsx(Rct,{words:c}):s.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Mct=({currentUser:e})=>{const{planificaciones:t,loading:r,error:a,canViewAllPlans:n}=Fct(e),[i,o]=w.useState("seguimiento"),[l,c]=w.useState("1º"),[u,d]=w.useState(null),[f,h]=w.useState(null),m=w.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{children:"Usuario no autenticado."})});if(r)return s.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[s.jsx(Oct,{}),s.jsx("span",{children:"Cargando planificaciones..."})]});if(a)return s.jsx("div",{className:"text-center py-8",children:s.jsxs("p",{className:"text-red-500",children:["Error: ",a]})});const x=()=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>s.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):s.jsx("div",{className:"space-y-4",children:ln.map(v=>{const y=m.filter(C=>C.asignatura===v);if(y.length===0)return null;const N=u===v;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[s.jsxs("button",{onClick:()=>d(N?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),s.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),s.jsx("span",{className:`transform transition-transform ${N?"rotate-180":""}`,children:s.jsx(Tct,{})})]}),N&&s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:s.jsx("ul",{className:"space-y-3",children:y.map(C=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>h(C),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[s.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:C.nombreUnidad}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",C.autor||"N/A"]})]})},C.id))})})]},v)})})]});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),n&&s.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>o("seguimiento"),className:`${i==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),s.jsx("button",{onClick:()=>o("analisis"),className:`${i==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),i==="seguimiento"&&x(),i==="analisis"&&s.jsx(Lct,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&s.jsx(Dct,{plan:f,onClose:()=>h(null)})]})},X4="analisisTaxonomicos",Uct=async()=>{try{const e=_t(pt(Ar,X4),Gt("uploadDate","desc"));return(await _r(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},Qct=async e=>{if(!e)return[];try{const t=_t(pt(Ar,X4),rr("userId","==",e),Gt("uploadDate","desc"));return(await _r(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},Hct=async e=>{try{return{id:(await Yr(pt(Ar,X4),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},zct=async e=>{try{const t=$t(Ar,X4,e);await Ja(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},q1="multicopias",V7=e=>{if(e===null||typeof e!="object")return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,a])=>{a!==void 0&&(t[r]=typeof a=="object"&&a!==null?V7(a):a)}),t},sY=e=>{try{if(!e)return;if(typeof e.toDate=="function")return e.toDate().toISOString();if(e.seconds)return new Date(e.seconds*1e3+Math.floor((e.nanoseconds||0)/1e6)).toISOString()}catch{}},$7=e=>{const t=e.data()||{};return{...t,id:e.id,createdAt:sY(t.createdAt)||new Date().toISOString(),updatedAt:sY(t.updatedAt)||void 0}};async function Vct(e,t="multicopias"){const r=Date.now(),a=e.name.replace(/\s+/g,"_"),n=`${t}/${r}/${a}`,i=l0(I_,n);return await j_(i,e),await w1(i)}async function Mfe(e){const{id:t,createdAt:r,updatedAt:a,solicitanteEmailLower:n,...i}=e||{},o=i,l=V7({...o,estado:o.estado||"Enviada",solicitanteEmailLower:o.solicitanteEmail?o.solicitanteEmail.toLowerCase():void 0,createdAt:qa(),updatedAt:qa()});return(await Yr(pt(ot,q1),l)).id}async function Ufe(e,t){if(!e)throw new Error("updateSolicitudMulticopia: id requerido");const r=V7({...t,updatedAt:qa()});await Ui($t(ot,q1,e),r)}function Qfe(e,t){const r=pt(ot,q1);let a;return e.emailLower?a=_t(r,rr("solicitanteEmailLower","==",e.emailLower),Gt("createdAt","desc")):e.solicitanteId?a=_t(r,rr("solicitanteId","==",e.solicitanteId),Gt("createdAt","desc")):a=_t(r,Gt("createdAt","desc")),ar(a,n=>t(n.docs.map($7)),n=>{console.error("subscribeMulticopiasPorSolicitante",n),t([])})}function Hfe(e,t){const r=pt(ot,q1),a=_t(r,Gt("createdAt","desc"));return ar(a,n=>{const o=n.docs.map($7).filter(l=>!(e.nivel&&e.nivel!=="Todos"&&(l.nivel||"")!==e.nivel||e.curso&&e.curso!=="Todos"&&(l.curso||"")!==e.curso||e.asignatura&&e.asignatura!=="Todas"&&(l.asignatura||"")!==e.asignatura||e.docenteNombre&&e.docenteNombre!=="Todos"&&(l.solicitanteNombre||"")!==e.docenteNombre||e.estado&&e.estado!=="Todos"&&(l.estado||"Enviada")!==e.estado));t(o)},n=>{console.error("subscribeMulticopiasAllConFiltros",n),t([])})}async function O2(e,t,r,a){if(!e)throw new Error("cambiarEstadoMulticopia: id requerido");const n={estado:t};t==="Visada"&&(n.visadoPor=r),t==="Aceptada"&&(n.aceptadoPor=r),t==="Rechazada"&&(n.rechazadoPor=r,a!=null&&a.motivoRechazo&&(n.motivoRechazo=a.motivoRechazo)),t==="Completada"&&(n.completadoPor=r),await Ufe(e,n)}async function zfe(e){try{if(!e.solicitanteNombre&&!e.solicitanteEmail)return;await _re({docenteNombre:e.solicitanteNombre,docenteEmail:e.solicitanteEmail,tipo:"alerta",titulo:"Multicopia aceptada",mensaje:"Su solicitud fue aceptada. La multicopia estará lista en un plazo máximo de 48 horas.",estudianteNombre:void 0,estudianteId:void 0,accionRequerida:void 0})}catch(t){console.warn("No se pudo crear notificación de aceptación:",t)}}async function Vfe(e,t){if(!e)throw new Error("eliminarSolicitudMulticopia: id requerido");if(t!=null&&t.adjuntoUrl)try{const r=l0(I_,t.adjuntoUrl);await JR(r)}catch(r){console.warn("No se pudo eliminar adjunto de Storage (continuando con borrado de doc):",r)}await Ja($t(ot,q1,e))}async function $fe(e={}){const{emailLower:t,max:r=200}=e;let a;const n=pt(ot,q1);t?a=_t(n,rr("solicitanteEmailLower","==",t)):a=_t(n,Gt("createdAt","desc"));let o=(await _r(a)).docs.map($7).filter(l=>!!l.adjuntoUrl);return t&&(o=o.sort((l,c)=>(c.createdAt||"").localeCompare(l.createdAt||""))),o.slice(0,r)}const $ct=Object.freeze(Object.defineProperty({__proto__:null,cambiarEstadoMulticopia:O2,createSolicitudMulticopia:Mfe,eliminarSolicitudMulticopia:Vfe,listarAdjuntosMulticopias:$fe,notificarAceptacionMulticopia:zfe,subscribeMulticopiasAllConFiltros:Hfe,subscribeMulticopiasPorSolicitante:Qfe,updateSolicitudMulticopia:Ufe,uploadAdjuntoMulticopia:Vct},Symbol.toStringTag,{value:"Module"})),iY=["1º Medio","2º Medio","3º Medio","4º Medio"],im=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],hv={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Gct=()=>s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),oY=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,h]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState([]),[C,T]=w.useState(""),[_,O]=w.useState(""),[j,S]=w.useState(""),[B,L]=w.useState(""),[D,k]=w.useState(""),[R,U]=w.useState("resumen"),H=w.useCallback(async()=>{if(e!=null&&e.id){n(!0);try{const F=e.profile==="SUBDIRECCION"?await Uct():await Qct(e.id);r(F),o(null)}catch(F){console.error("Error al cargar análisis:",F),o("No se pudieron cargar los análisis.")}finally{n(!1)}}},[e]);w.useEffect(()=>{H()},[H]),w.useEffect(()=>{(async()=>{try{const F=(e.email||"").toLowerCase(),Y=(await $fe({emailLower:e.profile==="SUBDIRECCION"?void 0:F,max:300})).map(ae=>({id:ae.id,titulo:ae.tituloMaterial,url:ae.adjuntoUrl,createdAt:ae.createdAt,asignatura:ae.asignatura,nivel:ae.nivel}));N(Y)}catch(F){console.warn("No se pudieron cargar adjuntos de Multicopias:",F)}})()},[e]);const Q=async F=>{var Y;const X=(Y=F.target.files)==null?void 0:Y[0];if(X){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(X.type)){o("Por favor, suba un archivo PDF o DOCX válido.");return}g(X),d(X.name),o(null);const le=new FileReader;le.onloadend=()=>{var ne;const ie=(ne=le.result)==null?void 0:ne.split(",")[1];if(!ie){o("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:X.type,data:ie})},le.onerror=()=>o("Error al leer el archivo."),le.readAsDataURL(X)}},V=async()=>{if(!u.trim()||!x&&!C){o("Debe subir un documento o seleccionar uno desde Multicopias, y asignarle un nombre para analizar.");return}if(!_||!j){o("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),o(null);const F=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;im.reduce((X,Y)=>({...X,[Y]:{type:"number"}}),{});try{B4("Análisis Taxonómico",e);const X=jn.currentUser;if(!X)throw new Error("Usuario no autenticado.");const Y=await X.getIdToken(),ae=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({prompt:F,fileData:x,fileUrl:C||void 0,documentName:u,nivelForm:_,asignaturaForm:j,userId:e.id})});if(!ae.ok){const oe=await ae.text();throw console.error("Error response from backend:",oe),new Error(`Error al analizar el documento con IA: ${ae.statusText}`)}const le=await ae.json(),ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:le.analysisResults,summary:le.summary,nivel:_,asignatura:j},ne=await Hct(ie);await H(),c(ne),d(""),g(null),v(null),T(""),O(""),S("")}catch(X){console.error(X);const Y=X instanceof Error?X.message:"Hubo un error al analizar el documento.";o(Y)}finally{h(!1)}},G=async F=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await zct(F),await H(),(l==null?void 0:l.id)===F&&c(null)}catch{o("No se pudo eliminar el análisis.")}},J=w.useMemo(()=>t.filter(F=>{const X=B?F.nivel===B:!0,Y=D?F.asignatura===D:!0;return X&&Y}),[t,B,D]),W=w.useMemo(()=>{const F={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};J.forEach(Y=>{im.forEach(ae=>{var ie;const le=((ie=Y.summary)==null?void 0:ie[ae])||0;F[ae]+=le})});const X=Object.values(F).reduce((Y,ae)=>Y+ae,0);return{acc:F,total:X}},[J]),Z=w.useMemo(()=>{const F=new Map;J.forEach(Y=>{const ae=Y.asignatura||"Sin asignatura";F.has(ae)||F.set(ae,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const le=F.get(ae);im.forEach(ie=>{var ne;le[ie]+=((ne=Y.summary)==null?void 0:ne[ie])||0})});const X=Array.from(F.entries()).map(([Y,ae])=>({asignatura:Y,counts:ae,total:Object.values(ae).reduce((le,ie)=>le+ie,0)}));return X.sort((Y,ae)=>ae.total-Y.total),X},[J]),M=w.useMemo(()=>l?Object.values(l.summary).reduce((X,Y)=>X+(Y||0),0):0,[l]);return s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),i&&s.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),s.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:s.jsxs("div",{className:"space-y-1 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[s.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Q,accept:".pdf,.doc,.docx"}),s.jsx("span",{children:"Cargue un archivo"})]}),s.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),s.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"O seleccionar desde Multicopias"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:C,onChange:F=>T(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 pl-10",children:[s.jsx("option",{value:"",children:"— Seleccione un adjunto —"}),y.map(F=>s.jsxs("option",{value:F.url,children:[F.titulo," ",F.nivel?`• ${F.nivel}`:""," ",F.asignatura?`• ${F.asignatura}`:""]},F.id))]}),s.jsx(b2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se listan adjuntos que hayan sido subidos en Multicopias."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),s.jsxs("select",{value:_,onChange:F=>O(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione"}),iY.map(F=>s.jsx("option",{value:F,children:F},F))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),s.jsxs("select",{value:j,onChange:F=>S(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Seleccione"}),ln.map(F=>s.jsx("option",{value:F,children:F},F))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),s.jsx("input",{type:"text",id:"documentName",value:u,onChange:F=>d(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),s.jsx("button",{onClick:V,disabled:f||!x&&!C,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?s.jsx(Gct,{}):"Analizar con IA"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),a?s.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(F=>s.jsxs("button",{onClick:()=>c(F),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===F.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[s.jsx("p",{className:"font-semibold truncate",children:F.documentName}),s.jsx("p",{className:"text-xs text-slate-500",children:new Date(F.uploadDate).toLocaleString("es-CL")}),(F.nivel||F.asignatura)&&s.jsxs("p",{className:"text-xs text-slate-500",children:[F.nivel||"Nivel s/i"," • ",F.asignatura||"Asignatura s/i"]})]},F.id))})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),s.jsxs("select",{value:B,onChange:F=>L(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todos"}),iY.map(F=>s.jsx("option",{value:F,children:F},F))]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),s.jsxs("select",{value:D,onChange:F=>k(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[s.jsx("option",{value:"",children:"Todas"}),ln.map(F=>s.jsx("option",{value:F,children:F},F))]})]}),s.jsx("button",{type:"button",onClick:()=>{L(""),k("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:s.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>U("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${R==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),s.jsx("button",{onClick:()=>U("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${R==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),R==="resumen"?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[J.length," análisis considerados"]})]}),s.jsx("div",{className:"space-y-3",children:im.map(F=>{const X=W.acc[F],Y=W.total>0?X/W.total*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:F}),s.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[X," (",Y.toFixed(0),"%)"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:s.jsx("div",{className:`${hv[F]} h-4 rounded-full`,style:{width:`${Y}%`}})})]},F)})}),s.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:im.map(F=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[s.jsx("span",{className:"text-sm",children:F}),s.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${hv[F]}`,children:W.acc[F]})]},F))})]}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),s.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," asignaturas comparadas"]})]}),Z.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):s.jsx("div",{className:"space-y-5",children:Z.map(F=>{const X=F.total||1;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:F.asignatura}),s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[F.total," ítems"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:im.map(Y=>{const ae=F.counts[Y]||0,le=ae/X*100;return s.jsx("div",{className:`${hv[Y]} h-5`,style:{width:`${le}%`},title:`${Y}: ${ae} (${le.toFixed(0)}%)`},Y)})}),s.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:im.map(Y=>s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("span",{className:`inline-block w-3 h-3 rounded ${hv[Y]}`}),s.jsx("span",{children:Y})]},Y))})]},F.asignatura)})})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&s.jsxs(s.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),s.jsx("button",{onClick:()=>G(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",M," preguntas)"]}),s.jsx("div",{className:"space-y-3",children:im.map(F=>{const X=l.summary[F]||0,Y=M>0?X/M*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:F}),s.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[X," (",Y.toFixed(0),"%)"]})]}),s.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:s.jsx("div",{className:`${hv[F]} h-4 rounded-full`,style:{width:`${Y}%`}})})]},F)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),s.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((F,X)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:F.question}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${hv[F.habilidadBloom]}`,children:F.habilidadBloom})})]},X))})]})})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},jS="empresas_practicas",qct="usuarios",G7="rutas_supervision",q7=e=>{const t=e.data();return{id:e.id,...t}};async function Kct(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const n=await(await fetch(r)).json();return n.status==="OK"&&n.results[0]?n.results[0].geometry.location:null}catch(a){return console.error("Error en la llamada a la API de Geocodificación:",a),null}}const Wct=e=>{const t=_t(pt(ot,jS),Gt("nombre","asc"));return ar(t,r=>{const a=r.docs.map(n=>q7(n));e(a)},r=>console.error("Error al suscribirse a empresas:",r))},Xct=async e=>{const t=e.calificaciones.reduce((a,n)=>a+(n.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const a=await Kct(e.direccion);a&&(r.coordenadas=a)}if("id"in e&&e.id){const{id:a,...n}=r,i=$t(ot,jS,a);return await ii(i,n,{merge:!0}),a}else return(await Yr(pt(ot,jS),{...r,createdAt:qa()})).id},Yct=async e=>{const t=$t(ot,jS,e);await Ja(t)},Jct=e=>{const t=_t(pt(ot,qct),rr("profile","==","PROFESORADO"),Gt("nombreCompleto","asc"));return ar(t,r=>{const a=r.docs.map(n=>q7(n));e(a)},r=>console.error("Error al suscribirse a profesores:",r))},Zct=async e=>(await Yr(pt(ot,G7),{...e,createdAt:qa()})).id,eut=e=>{const t=_t(pt(ot,G7),Gt("createdAt","desc"));return ar(t,r=>{const a=r.docs.map(n=>q7(n));e(a)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},tut=async e=>{const t=$t(ot,G7,e);await Ja(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bg=function(){return Bg=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Bg.apply(this,arguments)};function rut(e,t,r,a){return new(r||(r=Promise))(function(n,i){function o(u){try{c(a.next(u))}catch(d){i(d)}}function l(u){try{c(a.throw(u))}catch(d){i(d)}}function c(u){var d;u.done?n(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((a=a.apply(e,[])).next())})}function aut(e,t){var r,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&d[0]?a.return:d[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,d[1])).done)return n;switch(a=0,n&&(d=[2&d[0],n.value]),d[0]){case 0:case 1:n=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,a=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){o.label=d[1];break}if(d[0]===6&&o.label<n[1]){o.label=n[1],n=d;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(d);break}n[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],a=0}finally{r=n=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fr.apply(this,arguments)}function Tg(e){return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function Gfe(e){var t=function(r,a){if(Tg(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,a);if(Tg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}(e,"string");return Tg(t)==="symbol"?t:String(t)}function Vv(e,t,r){return(t=Gfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lY(Object(r),!0).forEach(function(a){Vv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lY(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cY(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Gfe(a.key),a)}}function aP(e,t){return aP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aP(e,t)}function kS(e){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kS(e)}function nut(e,t){if(t&&(Tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function sut(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,a=kS(e);if(t){var n=kS(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return nut(this,r)}}function nP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qfe(e,t){if(e){if(typeof e=="string")return nP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nP(e,t):void 0}}function K7(e){return function(t){if(Array.isArray(t))return nP(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||qfe(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var iut=function(){function e(r){var a=this;this._insertTag=function(n){var i;i=a.tags.length===0?a.insertionPoint?a.insertionPoint.nextSibling:a.prepend?a.container.firstChild:a.before:a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(n,i),a.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(i){var o=document.createElement("style");return o.setAttribute("data-emotion",i.key),i.nonce!==void 0&&o.setAttribute("nonce",i.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(i){if(i.sheet)return i.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===i)return document.styleSheets[o]}(a);try{n.insertRule(r,n.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),zu="-ms-",uY="-moz-",Xa="-webkit-",W7="decl",Kfe="@keyframes",out=Math.abs,Y4=String.fromCharCode,lut=Object.assign;function Wfe(e){return e.trim()}function sn(e,t,r){return e.replace(t,r)}function sP(e,t){return e.indexOf(t)}function Co(e,t){return 0|e.charCodeAt(t)}function AN(e,t,r){return e.slice(t,r)}function rA(e){return e.length}function X7(e){return e.length}function pj(e,t){return t.push(e),e}var J4=1,o1=1,Xfe=0,Nc=0,bi=0,K1="";function Z4(e,t,r,a,n,i,o){return{value:e,root:t,parent:r,type:a,props:n,children:i,line:J4,column:o1,length:o,return:""}}function a2(e,t){return lut(Z4("",null,null,"",null,null,0),e,{length:-e.length},t)}function lu(){return bi=Nc<Xfe?Co(K1,Nc++):0,o1++,bi===10&&(o1=1,J4++),bi}function CA(){return Co(K1,Nc)}function g5(){return Nc}function hC(e,t){return AN(K1,e,t)}function hN(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Yfe(e){return J4=o1=1,Xfe=rA(K1=e),Nc=0,[]}function Jfe(e){return K1="",e}function x5(e){return Wfe(hC(Nc-1,iP(e===91?e+2:e===40?e+1:e)))}function cut(e){for(;(bi=CA())&&bi<33;)lu();return hN(e)>2||hN(bi)>3?"":" "}function uut(e,t){for(;--t&&lu()&&!(bi<48||bi>102||bi>57&&bi<65||bi>70&&bi<97););return hC(e,g5()+(t<6&&CA()==32&&lu()==32))}function iP(e){for(;lu();)switch(bi){case e:return Nc;case 34:case 39:e!==34&&e!==39&&iP(bi);break;case 40:e===41&&iP(e);break;case 92:lu()}return Nc}function dut(e,t){for(;lu()&&e+bi!==57&&(e+bi!==84||CA()!==47););return"/*"+hC(t,Nc-1)+"*"+Y4(e===47?e:lu())}function fut(e){for(;!hN(CA());)lu();return hC(e,Nc)}function dY(e){return Jfe(v5("",null,null,null,[""],e=Yfe(e),0,[0],e))}function v5(e,t,r,a,n,i,o,l,c){for(var u=0,d=0,f=o,h=0,m=0,g=0,x=1,v=1,y=1,N=0,C="",T=n,_=i,O=a,j=C;v;)switch(g=N,N=lu()){case 40:if(g!=108&&Co(j,f-1)==58){sP(j+=sn(x5(N),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:j+=x5(N);break;case 9:case 10:case 13:case 32:j+=cut(g);break;case 92:j+=uut(g5()-1,7);continue;case 47:switch(CA()){case 42:case 47:pj(Aut(dut(lu(),g5()),t,r),c);break;default:j+="/"}break;case 123*x:l[u++]=rA(j)*y;case 125*x:case 59:case 0:switch(N){case 0:case 125:v=0;case 59+d:m>0&&rA(j)-f&&pj(m>32?AY(j+";",a,r,f-1):AY(sn(j," ","")+";",a,r,f-2),c);break;case 59:j+=";";default:if(pj(O=fY(j,t,r,u,d,n,l,C,T=[],_=[],f),i),N===123)if(d===0)v5(j,t,O,O,T,i,f,l,_);else switch(h===99&&Co(j,3)===110?100:h){case 100:case 109:case 115:v5(e,O,O,a&&pj(fY(e,O,O,0,0,n,l,C,n,T=[],f),_),n,_,f,l,a?T:_);break;default:v5(j,O,O,O,[""],_,0,l,_)}}u=d=m=0,x=y=1,C=j="",f=o;break;case 58:f=1+rA(j),m=g;default:if(x<1){if(N==123)--x;else if(N==125&&x++==0&&(bi=Nc>0?Co(K1,--Nc):0,o1--,bi===10&&(o1=1,J4--),bi==125))continue}switch(j+=Y4(N),N*x){case 38:y=d>0?1:(j+="\f",-1);break;case 44:l[u++]=(rA(j)-1)*y,y=1;break;case 64:CA()===45&&(j+=x5(lu())),h=CA(),d=f=rA(C=j+=fut(g5())),N++;break;case 45:g===45&&rA(j)==2&&(x=0)}}return i}function fY(e,t,r,a,n,i,o,l,c,u,d){for(var f=n-1,h=n===0?i:[""],m=X7(h),g=0,x=0,v=0;g<a;++g)for(var y=0,N=AN(e,f+1,f=out(x=o[g])),C=e;y<m;++y)(C=Wfe(x>0?h[y]+" "+N:sn(N,/&\f/g,h[y])))&&(c[v++]=C);return Z4(e,t,r,n===0?"rule":l,c,u,d)}function Aut(e,t,r){return Z4(e,t,r,"comm",Y4(bi),AN(e,2,-2),0)}function AY(e,t,r,a){return Z4(e,t,r,W7,AN(e,0,a),AN(e,a+1,-1),a)}function Ig(e,t){for(var r="",a=X7(e),n=0;n<a;n++)r+=t(e[n],n,e,t)||"";return r}function hY(e,t,r,a){switch(e.type){case"@import":case W7:return e.return=e.return||e.value;case"comm":return"";case Kfe:return e.return=e.value+"{"+Ig(e.children,a)+"}";case"rule":e.value=e.props.join(",")}return rA(r=Ig(e.children,a))?e.return=e.value+"{"+r+"}":""}function mY(e){var t=X7(e);return function(r,a,n,i){for(var o="",l=0;l<t;l++)o+=e[l](r,a,n,i)||"";return o}}function hut(e){return function(t){t.root||(t=t.return)&&e(t)}}function Zfe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var mut=function(e,t,r){for(var a=0,n=0;a=n,n=CA(),a===38&&n===12&&(t[r]=1),!hN(n);)lu();return hC(e,Nc)},put=function(e,t){return Jfe(function(r,a){var n=-1,i=44;do switch(hN(i)){case 0:i===38&&CA()===12&&(a[n]=1),r[n]+=mut(Nc-1,a,n);break;case 2:r[n]+=x5(i);break;case 4:if(i===44){r[++n]=CA()===58?"&\f":"",a[n]=r[n].length;break}default:r[n]+=Y4(i)}while(i=lu());return r}(Yfe(e),t))},pY=new WeakMap,gut=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||pY.get(r))&&!a){pY.set(e,!0);for(var n=[],i=put(t,n),o=r.props,l=0,c=0;l<i.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=n[l]?i[l].replace(/&\f/g,o[u]):o[u]+" "+i[l]}}},xut=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function eAe(e,t){switch(function(r,a){return 45^Co(r,0)?(((a<<2^Co(r,0))<<2^Co(r,1))<<2^Co(r,2))<<2^Co(r,3):0}(e,t)){case 5103:return Xa+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xa+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Xa+e+uY+e+zu+e+e;case 6828:case 4268:return Xa+e+zu+e+e;case 6165:return Xa+e+zu+"flex-"+e+e;case 5187:return Xa+e+sn(e,/(\w+).+(:[^]+)/,Xa+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Xa+e+zu+"flex-item-"+sn(e,/flex-|-self/,"")+e;case 4675:return Xa+e+zu+"flex-line-pack"+sn(e,/align-content|flex-|-self/,"")+e;case 5548:return Xa+e+zu+sn(e,"shrink","negative")+e;case 5292:return Xa+e+zu+sn(e,"basis","preferred-size")+e;case 6060:return Xa+"box-"+sn(e,"-grow","")+Xa+e+zu+sn(e,"grow","positive")+e;case 4554:return Xa+sn(e,/([^-])(transform)/g,"$1"+Xa+"$2")+e;case 6187:return sn(sn(sn(e,/(zoom-|grab)/,Xa+"$1"),/(image-set)/,Xa+"$1"),e,"")+e;case 5495:case 3959:return sn(e,/(image-set\([^]*)/,Xa+"$1$`$1");case 4968:return sn(sn(e,/(.+:)(flex-)?(.*)/,Xa+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xa+e+e;case 4095:case 3583:case 4068:case 2532:return sn(e,/(.+)-inline(.+)/,Xa+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rA(e)-1-t>6)switch(Co(e,t+1)){case 109:if(Co(e,t+4)!==45)break;case 102:return sn(e,/(.+:)(.+)-([^]+)/,"$1"+Xa+"$2-$3$1"+uY+(Co(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~sP(e,"stretch")?eAe(sn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Co(e,t+1)!==115)break;case 6444:switch(Co(e,rA(e)-3-(~sP(e,"!important")&&10))){case 107:return sn(e,":",":"+Xa)+e;case 101:return sn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xa+(Co(e,14)===45?"inline-":"")+"box$3$1"+Xa+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Co(e,t+11)){case 114:return Xa+e+zu+sn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Xa+e+zu+sn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Xa+e+zu+sn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Xa+e+zu+e+e}return e}var gY,gj,b5=typeof document<"u",vut=b5?void 0:(gY=function(){return Zfe(function(){var e={};return function(t){return e[t]}})},gj=new WeakMap,function(e){if(gj.has(e))return gj.get(e);var t=gY(e);return gj.set(e,t),t}),but=[function(e,t,r,a){if(e.length>-1&&!e.return)switch(e.type){case W7:e.return=eAe(e.value,e.length);break;case Kfe:return Ig([a2(e,{value:sn(e.value,"@","@"+Xa)})],a);case"rule":if(e.length)return function(n,i){return n.map(i).join("")}(e.props,function(n){switch(function(i,o){return(i=o.exec(i))?i[0]:i}(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ig([a2(e,{props:[sn(n,/:(read-\w+)/,":-moz-$1")]})],a);case"::placeholder":return Ig([a2(e,{props:[sn(n,/:(plac\w+)/,":"+Xa+"input-$1")]}),a2(e,{props:[sn(n,/:(plac\w+)/,":-moz-$1")]}),a2(e,{props:[sn(n,/:(plac\w+)/,"-ms-input-$1")]})],a)}return""})}}],tAe=function(e){var t=e.key;if(b5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var a=e.stylisPlugins||but,n,i,o={},l=[];b5&&(n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var N=y.getAttribute("data-emotion").split(" "),C=1;C<N.length;C++)o[N[C]]=!0;l.push(y)}));var c=[gut,xut];if(b5){var u,d=[hY,hut(function(y){u.insert(y)})],f=mY(c.concat(a,d));i=function(y,N,C,T){u=C,Ig(dY(y?y+"{"+N.styles+"}":N.styles),f),T&&(v.inserted[N.name]=!0)}}else{var h=[hY],m=mY(c.concat(a,h)),g=vut(a)(t),x=function(y,N){var C=N.name;return g[C]===void 0&&(g[C]=Ig(dY(y?y+"{"+N.styles+"}":N.styles),m)),g[C]};i=function(y,N,C,T){var _=N.name,O=x(y,N);return v.compat===void 0?(T&&(v.inserted[_]=!0),O):T?void(v.inserted[_]=O):O}}var v={key:t,sheet:new iut({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return v.sheet.hydrate(l),v};function dn(e,t,r){return e(r={path:t,exports:{},require:function(a,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(n==null&&r.path)}},r.exports),r.exports}var Ao=typeof Symbol=="function"&&Symbol.for,oP=Ao?Symbol.for("react.element"):60103,lP=Ao?Symbol.for("react.portal"):60106,y5=Ao?Symbol.for("react.fragment"):60107,w5=Ao?Symbol.for("react.strict_mode"):60108,N5=Ao?Symbol.for("react.profiler"):60114,C5=Ao?Symbol.for("react.provider"):60109,E5=Ao?Symbol.for("react.context"):60110,cP=Ao?Symbol.for("react.async_mode"):60111,SS=Ao?Symbol.for("react.concurrent_mode"):60111,j5=Ao?Symbol.for("react.forward_ref"):60112,k5=Ao?Symbol.for("react.suspense"):60113,yut=Ao?Symbol.for("react.suspense_list"):60120,S5=Ao?Symbol.for("react.memo"):60115,_5=Ao?Symbol.for("react.lazy"):60116,wut=Ao?Symbol.for("react.block"):60121,Nut=Ao?Symbol.for("react.fundamental"):60117,Cut=Ao?Symbol.for("react.responder"):60118,Eut=Ao?Symbol.for("react.scope"):60119;function $c(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case oP:switch(e=e.type){case cP:case SS:case y5:case N5:case w5:case k5:return e;default:switch(e=e&&e.$$typeof){case E5:case j5:case _5:case S5:case C5:return e;default:return t}}case lP:return t}}}function xY(e){return $c(e)===SS}var jut={AsyncMode:cP,ConcurrentMode:SS,ContextConsumer:E5,ContextProvider:C5,Element:oP,ForwardRef:j5,Fragment:y5,Lazy:_5,Memo:S5,Portal:lP,Profiler:N5,StrictMode:w5,Suspense:k5,isAsyncMode:function(e){return xY(e)||$c(e)===cP},isConcurrentMode:xY,isContextConsumer:function(e){return $c(e)===E5},isContextProvider:function(e){return $c(e)===C5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===oP},isForwardRef:function(e){return $c(e)===j5},isFragment:function(e){return $c(e)===y5},isLazy:function(e){return $c(e)===_5},isMemo:function(e){return $c(e)===S5},isPortal:function(e){return $c(e)===lP},isProfiler:function(e){return $c(e)===N5},isStrictMode:function(e){return $c(e)===w5},isSuspense:function(e){return $c(e)===k5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===y5||e===SS||e===N5||e===w5||e===k5||e===yut||typeof e=="object"&&e!==null&&(e.$$typeof===_5||e.$$typeof===S5||e.$$typeof===C5||e.$$typeof===E5||e.$$typeof===j5||e.$$typeof===Nut||e.$$typeof===Cut||e.$$typeof===Eut||e.$$typeof===wut)},typeOf:$c};dn(function(e,t){});var vY=dn(function(e){e.exports=jut}),bY={};bY[vY.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bY[vY.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var uP=typeof document<"u";function rAe(e,t,r){var a="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):a+=n+" "}),a}var Y7=function(e,t,r){var a=e.key+"-"+t.name;(r===!1||uP===!1&&e.compat!==void 0)&&e.registered[a]===void 0&&(e.registered[a]=t.styles)},J7=function(e,t,r){Y7(e,t,r);var a=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var n="",i=t;do{var o=e.insert(t===i?"."+a:"",i,e.sheet,!0);uP||o===void 0||(n+=o),i=i.next}while(i!==void 0);if(!uP&&n.length!==0)return n}},kut={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Sut=/[A-Z]|^ms/g,_ut=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aAe=function(e){return e.charCodeAt(1)===45},yY=function(e){return e!=null&&typeof e!="boolean"},P6=Zfe(function(e){return aAe(e)?e:e.replace(Sut,"-$&").toLowerCase()}),wY=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(_ut,function(r,a,n){return aA={name:a,styles:n,next:aA},a})}return kut[e]===1||aAe(e)||typeof t!="number"||t===0?t:t+"px"};function fw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return aA={name:r.name,styles:r.styles,next:aA},r.name;if(r.styles!==void 0){var a=r.next;if(a!==void 0)for(;a!==void 0;)aA={name:a.name,styles:a.styles,next:aA},a=a.next;var n=r.styles+";";return n}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=fw(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":yY(g)&&(f+=P6(m)+":"+wY(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=fw(c,u,g);switch(m){case"animation":case"animationName":f+=P6(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)yY(g[v])&&(f+=P6(m)+":"+wY(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var i=aA,o=r(e);return aA=i,fw(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var aA,NY=/label:\s*([^\s;\n{]+)\s*(;|$)/g,e3=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,n="";aA=void 0;var i=e[0];i==null||i.raw===void 0?(a=!1,n+=fw(r,t,i)):n+=i[0];for(var o=1;o<e.length;o++)n+=fw(r,t,e[o]),a&&(n+=i[o]);NY.lastIndex=0;for(var l,c="";(l=NY.exec(n))!==null;)c+="-"+l[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(n)+c;return{name:u,styles:n,next:aA}},But=typeof document<"u",Tut=function(e){return e()},nAe=!!w.useInsertionEffect&&w.useInsertionEffect,sAe=But&&nAe||Tut,CY=nAe||w.useLayoutEffect,vb=typeof document<"u",Z7={}.hasOwnProperty,_S=w.createContext(typeof HTMLElement<"u"?tAe({key:"css"}):null);_S.Provider;var t3=function(e){return w.forwardRef(function(t,r){var a=w.useContext(_S);return e(t,a,r)})};vb||(t3=function(e){return function(t){var r=w.useContext(_S);return r===null?(r=tAe({key:"css"}),w.createElement(_S.Provider,{value:r},e(t,r))):e(t,r)}});var eU=w.createContext({}),dP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Iut=function(e,t){var r={};for(var a in t)Z7.call(t,a)&&(r[a]=t[a]);return r[dP]=e,r},Out=function(e){var t=e.cache,r=e.serialized,a=e.isStringTag;Y7(t,r,a);var n=sAe(function(){return J7(t,r,a)});if(!vb&&n!==void 0){for(var i,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return w.createElement("style",((i={})["data-emotion"]=t.key+" "+o,i.dangerouslySetInnerHTML={__html:n},i.nonce=t.sheet.nonce,i))}return null},Fut=t3(function(e,t,r){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var n=e[dP],i=[a],o="";typeof e.className=="string"?o=rAe(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=e3(i,void 0,w.useContext(eU));o+=t.key+"-"+l.name;var c={};for(var u in e)!Z7.call(e,u)||u==="css"||u===dP||(c[u]=e[u]);return c.ref=r,c.className=o,w.createElement(w.Fragment,null,w.createElement(Out,{cache:t,serialized:l,isStringTag:typeof n=="string"}),w.createElement(n,c))});dn(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Sr=function(e,t){var r=arguments;if(t==null||!Z7.call(t,"css"))return w.createElement.apply(void 0,r);var a=r.length,n=new Array(a);n[0]=Fut,n[1]=Iut(e,t);for(var i=2;i<a;i++)n[i]=r[i];return w.createElement.apply(null,n)};t3(function(e,t){var r=e.styles,a=e3([r],void 0,w.useContext(eU));if(!vb){for(var n,i=a.name,o=a.styles,l=a.next;l!==void 0;)i+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:i,styles:o},t.sheet,c);return c?null:w.createElement("style",((n={})["data-emotion"]=t.key+"-global "+i,n.dangerouslySetInnerHTML={__html:u},n.nonce=t.sheet.nonce,n))}var d=w.useRef();return CY(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+a.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),CY(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(a.next!==void 0&&J7(t,a.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",a,h,!1)}},[t,a.name]),null});function tU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e3(t)}var Dut=function e(t){for(var r=t.length,a=0,n="";a<r;a++){var i=t[a];if(i!=null){var o=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))o=e(i);else for(var l in o="",i)i[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=i}o&&(n&&(n+=" "),n+=o)}}return n};function Put(e,t,r){var a=[],n=rAe(e,a,r);return a.length<2?r:n+t(a)}var Rut=function(e){var t,r=e.cache,a=e.serializedArr,n=sAe(function(){for(var i="",o=0;o<a.length;o++){var l=J7(r,a[o],!1);vb||l===void 0||(i+=l)}if(!vb)return i});return vb||n.length===0?null:w.createElement("style",((t={})["data-emotion"]=r.key+" "+a.map(function(i){return i.name}).join(" "),t.dangerouslySetInnerHTML={__html:n},t.nonce=r.sheet.nonce,t))};t3(function(e,t){var r=[],a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=e3(l,t.registered);return r.push(u),Y7(t,u,!1),t.key+"-"+u.name},n={css:a,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return Put(t.registered,a,Dut(l))},theme:w.useContext(eU)},i=e.children(n);return w.createElement(w.Fragment,null,w.createElement(Rut,{cache:t,serializedArr:r}),i)});function eo(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,a){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,o,l,c,u=[],d=!0,f=!1;try{if(l=(n=n.call(r)).next,a===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(i=l.call(n)).done)&&(u.push(i.value),u.length!==a);d=!0);}catch(h){f=!0,o=h}finally{try{if(!d&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||qfe(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oA(e,t){if(e==null)return{};var r,a,n=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function iAe(e){return Lh(e).getComputedStyle(e)}const xj=Math.round;function oAe(e){return cAe(e)?(e.nodeName||"").toLowerCase():""}let vj;function lAe(e){return e instanceof Lh(e).HTMLElement}function B5(e){return e instanceof Lh(e).Element}function cAe(e){return e instanceof Lh(e).Node}function EY(e){return typeof ShadowRoot>"u"?!1:e instanceof Lh(e).ShadowRoot||e instanceof ShadowRoot}function uAe(e){const{overflow:t,overflowX:r,overflowY:a,display:n}=iAe(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(n)}function Lut(){return/^((?!chrome|android).)*safari/i.test(function(){if(vj)return vj;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(vj=e.brands.map(t=>t.brand+"/"+t.version).join(" "),vj):navigator.userAgent}())}function dAe(e){return B5(e)?e:e.contextElement}const fAe={x:1,y:1};function jY(e){const t=dAe(e);if(!lAe(t))return fAe;const r=t.getBoundingClientRect(),{width:a,height:n,fallback:i}=function(c){const u=iAe(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=xj(d)!==h||xj(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let o=(i?xj(r.width):r.width)/a,l=(i?xj(r.height):r.height)/n;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function kY(e,t,r,a){var n,i;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=dAe(e);let c=fAe;t&&(c=jY(e));const u=l?Lh(l):window,d=Lut()&&r;let f=(o.left+(d&&((n=u.visualViewport)==null?void 0:n.offsetLeft)||0))/c.x,h=(o.top+(d&&((i=u.visualViewport)==null?void 0:i.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=Lh(l),v=a;let y=x.frameElement;for(;y&&a&&v!==x;){const N=jY(y),C=y.getBoundingClientRect(),T=getComputedStyle(y);C.x+=(y.clientLeft+parseFloat(T.paddingLeft))*N.x,C.y+=(y.clientTop+parseFloat(T.paddingTop))*N.y,f*=N.x,h*=N.y,m*=N.x,g*=N.y,f+=C.x,h+=C.y,y=Lh(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function Mut(e){if(oAe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EY(e)&&e.host||function(r){return((cAe(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return EY(t)?t.host:t}function AAe(e){const t=Mut(e);return function(r){return["html","body","#document"].includes(oAe(r))}(t)?t.ownerDocument.body:lAe(t)&&uAe(t)?t:AAe(t)}function T5(e,t){var r;t===void 0&&(t=[]);const a=AAe(e),n=a===((r=e.ownerDocument)==null?void 0:r.body),i=Lh(a);return n?t.concat(i,i.visualViewport||[],uAe(a)?a:[]):t.concat(a,T5(a))}var fP=typeof document<"u"?w.useLayoutEffect:w.useEffect,Uut=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],BS=function(){};function Qut(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Hut(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];var i=[].concat(a);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(Qut(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var SY=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Tg(e)==="object"&&e!==null?[e]:[];var t},_Y=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,wr({},oA(e,Uut))},ks=function(e,t,r){var a=e.cx,n=e.getStyles,i=e.getClassNames,o=e.className;return{css:n(t,e),className:a(r??{},i(t,e),o)}};function r3(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function hAe(e){return r3(e)?window.pageYOffset:e.scrollTop}function TS(e,t){r3(e)?window.scrollTo(0,t):e.scrollTop=t}function zut(e,t,r,a){return r*((e=e/a-1)*e*e+1)+t}function bj(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:BS,n=hAe(e),i=t-n,o=10,l=0;function c(){var u=zut(l+=o,n,i,r);TS(e,u),l<r?window.requestAnimationFrame(c):a(e)}c()}function BY(e,t){var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),n=t.offsetHeight/3;a.bottom+n>r.bottom?TS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+n,e.scrollHeight)):a.top-n<r.top&&TS(e,Math.max(t.offsetTop-n,0))}function TY(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var mAe=!1,Vut={get passive(){return mAe=!0}},yj=typeof window<"u"?window:{};yj.addEventListener&&yj.removeEventListener&&(yj.addEventListener("p",BS,Vut),yj.removeEventListener("p",BS,!1));var $ut=mAe;function Gut(e){return e!=null}function wj(e,t,r){return e?t:r}var qut=["children","innerProps"],Kut=["children","innerProps"];function Wut(e){var t=e.maxHeight,r=e.menuEl,a=e.minHeight,n=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(H){var Q=getComputedStyle(H),V=Q.position==="absolute",G=/(auto|scroll)/;if(Q.position==="fixed")return document.documentElement;for(var J=H;J=J.parentElement;)if(Q=getComputedStyle(J),(!V||Q.position!=="static")&&G.test(Q.overflow+Q.overflowY+Q.overflowX))return J;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=o||r3(d=c)?window.innerHeight:d.clientHeight,N=hAe(c),C=parseInt(getComputedStyle(r).marginBottom,10),T=parseInt(getComputedStyle(r).marginTop,10),_=v-T,O=y-x,j=_+N,S=f-N-x,B=m-y+N+C,L=N+x-T,D=160;switch(n){case"auto":case"bottom":if(O>=g)return{placement:"bottom",maxHeight:t};if(S>=g&&!o)return i&&bj(c,B,D),{placement:"bottom",maxHeight:t};if(!o&&S>=a||o&&O>=a)return i&&bj(c,B,D),{placement:"bottom",maxHeight:o?O-C:S-C};if(n==="auto"||o){var k=t,R=o?_:j;return R>=a&&(k=Math.min(R-C-l,t)),{placement:"top",maxHeight:k}}if(n==="bottom")return i&&TS(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(_>=g)return{placement:"top",maxHeight:t};if(j>=g&&!o)return i&&bj(c,L,D),{placement:"top",maxHeight:t};if(!o&&j>=a||o&&_>=a){var U=t;return(!o&&j>=a||o&&_>=a)&&(U=o?_-T:j-T),i&&bj(c,L,D),{placement:"top",maxHeight:U}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(n,'".'))}return u}var IY,pAe=function(e){return e==="auto"?"bottom":e},gAe=w.createContext(null),Xut=function(e){var t=e.children,r=e.minMenuHeight,a=e.maxMenuHeight,n=e.menuPlacement,i=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(w.useContext(gAe)||{}).setPortalPlacement,u=w.useRef(null),d=eo(w.useState(a),2),f=d[0],h=d[1],m=eo(w.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return fP(function(){var y=u.current;if(y){var N=i==="fixed",C=Wut({maxHeight:a,menuEl:y,minHeight:r,placement:n,shouldScroll:o&&!N,isFixedPosition:N,controlHeight:v});h(C.maxHeight),x(C.placement),c==null||c(C.placement)}},[a,n,i,o,r,c,v]),t({ref:u,placerProps:wr(wr({},e),{},{placement:g||pAe(n),maxHeight:f})})},Yut=function(e){var t=e.children,r=e.innerRef,a=e.innerProps;return Sr("div",Fr({},ks(e,"menu",{menu:!0}),{ref:r},a),t)},xAe=function(e,t){var r=e.theme,a=r.spacing.baseUnit,n=r.colors;return wr({textAlign:"center"},t?{}:{color:n.neutral40,padding:"".concat(2*a,"px ").concat(3*a,"px")})},Jut=xAe,Zut=xAe,edt=["size"],tdt=["innerProps","isRtl","size"],R6,L6,rdt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},vAe=function(e){var t=e.size,r=oA(e,edt);return Sr("svg",Fr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:rdt},r))},M6=function(e){return Sr(vAe,Fr({size:20},e),Sr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},OY=function(e){return Sr(vAe,Fr({size:20},e),Sr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},bAe=function(e,t){var r=e.isFocused,a=e.theme,n=a.spacing.baseUnit,i=a.colors;return wr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*n,":hover":{color:r?i.neutral80:i.neutral40}})},adt=bAe,ndt=bAe,sdt=function(){var e=tU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(IY||(R6=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],L6||(L6=R6.slice(0)),IY=Object.freeze(Object.defineProperties(R6,{raw:{value:Object.freeze(L6)}})))),U6=function(e){var t=e.delay,r=e.offset;return Sr("span",{css:tU({animation:"".concat(sdt," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},idt=function(e){var t=e.children,r=e.isDisabled,a=e.isFocused,n=e.innerRef,i=e.innerProps,o=e.menuIsOpen;return Sr("div",Fr({ref:n},ks(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":a,"control--menu-is-open":o}),i,{"aria-disabled":r||void 0}),t)},odt=["data"],ldt=function(e){var t=e.children,r=e.cx,a=e.getStyles,n=e.getClassNames,i=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Sr("div",Fr({},ks(e,"group",{group:!0}),l),Sr(i,Fr({},o,{selectProps:d,theme:u,getStyles:a,getClassNames:n,cx:r}),c),Sr("div",null,t))},cdt=["innerRef","isDisabled","isHidden","inputClassName"],yAe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},udt={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":wr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},yAe)},ddt=function(e){return wr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},yAe)},FY=function(e){var t=e.children,r=e.innerProps;return Sr("div",r,t)},fdt=function(e){var t=e.children,r=e.components,a=e.data,n=e.innerProps,i=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Sr(c,{data:a,innerProps:wr(wr({},ks(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":i})),n),selectProps:l},Sr(u,{data:a,innerProps:wr({},ks(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Sr(d,{data:a,innerProps:wr(wr({},ks(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},Adt={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Sr("div",Fr({},ks(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Sr(M6,null))},Control:idt,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Sr("div",Fr({},ks(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Sr(OY,null))},DownChevron:OY,CrossIcon:M6,Group:ldt,GroupHeading:function(e){var t=_Y(e);t.data;var r=oA(t,odt);return Sr("div",Fr({},ks(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Sr("div",Fr({},ks(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Sr("span",Fr({},t,ks(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,a=_Y(e),n=a.innerRef,i=a.isDisabled,o=a.isHidden,l=a.inputClassName,c=oA(a,cdt);return Sr("div",Fr({},ks(e,"input",{"input-container":!0}),{"data-value":r||""}),Sr("input",Fr({className:t({input:!0},l),ref:n,style:ddt(o),disabled:i},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,a=e.size,n=a===void 0?4:a,i=oA(e,tdt);return Sr("div",Fr({},ks(wr(wr({},i),{},{innerProps:t,isRtl:r,size:n}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Sr(U6,{delay:0,offset:r}),Sr(U6,{delay:160,offset:!0}),Sr(U6,{delay:320,offset:!r}))},Menu:Yut,MenuList:function(e){var t=e.children,r=e.innerProps,a=e.innerRef,n=e.isMulti;return Sr("div",Fr({},ks(e,"menuList",{"menu-list":!0,"menu-list--is-multi":n}),{ref:a},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,a=e.controlElement,n=e.innerProps,i=e.menuPlacement,o=e.menuPosition,l=w.useRef(null),c=w.useRef(null),u=eo(w.useState(pAe(i)),2),d=u[0],f=u[1],h=w.useMemo(function(){return{setPortalPlacement:f}},[]),m=eo(w.useState(null),2),g=m[0],x=m[1],v=w.useCallback(function(){if(a){var T=function(j){var S=j.getBoundingClientRect();return{bottom:S.bottom,height:S.height,left:S.left,right:S.right,top:S.top,width:S.width}}(a),_=o==="fixed"?0:window.pageYOffset,O=T[d]+_;O===(g==null?void 0:g.offset)&&T.left===(g==null?void 0:g.rect.left)&&T.width===(g==null?void 0:g.rect.width)||x({offset:O,rect:T})}},[a,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);fP(function(){v()},[v]);var y=w.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),a&&l.current&&(c.current=function(T,_,O,j){j===void 0&&(j={});const{ancestorScroll:S=!0,ancestorResize:B=!0,elementResize:L=!0,animationFrame:D=!1}=j,k=S&&!D,R=k||B?[...B5(T)?T5(T):T.contextElement?T5(T.contextElement):[],...T5(_)]:[];R.forEach(V=>{k&&V.addEventListener("scroll",O,{passive:!0}),B&&V.addEventListener("resize",O)});let U,H=null;if(L){let V=!0;H=new ResizeObserver(()=>{V||O(),V=!1}),B5(T)&&!D&&H.observe(T),B5(T)||!T.contextElement||D||H.observe(T.contextElement),H.observe(_)}let Q=D?kY(T):null;return D&&function V(){const G=kY(T);!Q||G.x===Q.x&&G.y===Q.y&&G.width===Q.width&&G.height===Q.height||O(),Q=G,U=requestAnimationFrame(V)}(),O(),()=>{var V;R.forEach(G=>{k&&G.removeEventListener("scroll",O),B&&G.removeEventListener("resize",O)}),(V=H)==null||V.disconnect(),H=null,D&&cancelAnimationFrame(U)}}(a,l.current,v,{elementResize:"ResizeObserver"in window}))},[a,v]);fP(function(){y()},[y]);var N=w.useCallback(function(T){l.current=T,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var C=Sr("div",Fr({ref:N},ks(wr(wr({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),n),r);return Sr(gAe.Provider,{value:h},t?tL.createPortal(C,t):C)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,a=e.innerProps,n=oA(e,Kut);return Sr("div",Fr({},ks(wr(wr({},n),{},{children:r,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,a=e.innerProps,n=oA(e,qut);return Sr("div",Fr({},ks(wr(wr({},n),{},{children:r,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),r)},MultiValue:fdt,MultiValueContainer:FY,MultiValueLabel:FY,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Sr("div",Fr({role:"button"},r),t||Sr(M6,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,a=e.isFocused,n=e.isSelected,i=e.innerRef,o=e.innerProps;return Sr("div",Fr({},ks(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":a,"option--is-selected":n}),{ref:i,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Sr("div",Fr({},ks(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,a=e.isDisabled,n=e.isRtl;return Sr("div",Fr({},ks(e,"container",{"--is-disabled":a,"--is-rtl":n}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,a=e.innerProps;return Sr("div",Fr({},ks(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),a),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,a=e.isMulti,n=e.hasValue;return Sr("div",Fr({},ks(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":n}),r),t)}},DY=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function hdt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(a=e[r],n=t[r],!(a===n||DY(a)&&DY(n)))return!1;var a,n;return!0}for(var mdt={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},PY=function(e){return Sr("span",Fr({css:mdt},e))},pdt={guidance:function(e){var t=e.isSearchable,r=e.isMulti,a=e.tabSelectsValue,n=e.context,i=e.isInitialFocus;switch(n){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return i?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,a=r===void 0?"":r,n=e.labels,i=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(n.length>1?"s":""," ").concat(n.join(","),", selected.");case"select-option":return"option ".concat(a,i?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,a=e.options,n=e.label,i=n===void 0?"":n,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(i," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(i).concat(h,", ").concat(d(a,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},gdt=function(e){var t=e.ariaSelection,r=e.focusedOption,a=e.focusedValue,n=e.focusableOptions,i=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,N=l.screenReaderStatus,C=l.tabSelectsValue,T=l.isLoading,_=l["aria-label"],O=l["aria-live"],j=w.useMemo(function(){return wr(wr({},pdt),d||{})},[d]),S=w.useMemo(function(){var U,H="";if(t&&j.onChange){var Q=t.option,V=t.options,G=t.removedValue,J=t.removedValues,W=t.value,Z=G||Q||(U=W,Array.isArray(U)?null:U),M=Z?f(Z):"",F=V||J||void 0,X=F?F.map(f):[],Y=wr({isDisabled:Z&&g(Z,o),label:M,labels:X},t);H=j.onChange(Y)}return H},[t,j,g,o,f]),B=w.useMemo(function(){var U="",H=r||a,Q=!!(r&&o&&o.includes(r));if(H&&j.onFocus){var V={focused:H,label:f(H),isDisabled:g(H,o),isSelected:Q,options:n,context:H===r?"menu":"value",selectValue:o,isAppleDevice:u};U=j.onFocus(V)}return U},[r,a,f,g,j,n,o,u]),L=w.useMemo(function(){var U="";if(v&&y.length&&!T&&j.onFilter){var H=N({count:n.length});U=j.onFilter({inputValue:h,resultsMessage:H})}return U},[n,h,v,j,y,N,T]),D=(t==null?void 0:t.action)==="initial-input-focus",k=w.useMemo(function(){var U="";if(j.guidance){var H=a?"value":v?"menu":"input";U=j.guidance({"aria-label":_,context:H,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:C,isInitialFocus:D})}return U},[_,r,a,m,g,x,v,j,o,C,D]),R=Sr(w.Fragment,null,Sr("span",{id:"aria-selection"},S),Sr("span",{id:"aria-focused"},B),Sr("span",{id:"aria-results"},L),Sr("span",{id:"aria-guidance"},k));return Sr(w.Fragment,null,Sr(PY,{id:c},D&&R),Sr(PY,{"aria-live":O,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},i&&!D&&R))},Q6=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],xdt=new RegExp("["+Q6.map(function(e){return e.letters}).join("")+"]","g"),wAe={},H6=0;H6<Q6.length;H6++)for(var z6=Q6[H6],V6=0;V6<z6.letters.length;V6++)wAe[z6.letters[V6]]=z6.base;var NAe=function(e){return e.replace(xdt,function(t){return wAe[t]})},vdt=function(e,t){t===void 0&&(t=hdt);var r=null;function a(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return a.clear=function(){r=null},a}(NAe),RY=function(e){return e.replace(/^\s+|\s+$/g,"")},bdt=function(e){return"".concat(e.label," ").concat(e.value)},ydt=["innerRef"];function wdt(e){var t=e.innerRef,r=function(a){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var l=Object.entries(a).filter(function(c){var u=eo(c,1)[0];return!i.includes(u)});return l.reduce(function(c,u){var d=eo(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(oA(e,ydt),"onExited","in","enter","exit","appear");return Sr("input",Fr({ref:t},r,{css:tU({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var LY=["boxSizing","height","overflow","paddingRight","position"],MY={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function UY(e){e.preventDefault()}function QY(e){e.stopPropagation()}function HY(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function zY(){return"ontouchstart"in window||navigator.maxTouchPoints}var VY=!(typeof window>"u"||!window.document||!window.document.createElement),n2=0,mv={capture:!1,passive:!1},Ndt=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Cdt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Edt(e){var t=e.children,r=e.lockEnabled,a=e.captureEnabled,n=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,h=w.useRef(!1),m=w.useRef(!1),g=w.useRef(0),x=w.useRef(null),v=w.useCallback(function(O,j){if(x.current!==null){var S=x.current,B=S.scrollTop,L=S.scrollHeight,D=S.clientHeight,k=x.current,R=j>0,U=L-D-B,H=!1;U>j&&h.current&&(u&&u(O),h.current=!1),R&&m.current&&(f&&f(O),m.current=!1),R&&j>U?(c&&!h.current&&c(O),k.scrollTop=L,H=!0,h.current=!0):!R&&-j>B&&(d&&!m.current&&d(O),k.scrollTop=0,H=!0,m.current=!0),H&&function(Q){Q.cancelable&&Q.preventDefault(),Q.stopPropagation()}(O)}},[c,u,d,f]),y=w.useCallback(function(O){v(O,O.deltaY)},[v]),N=w.useCallback(function(O){g.current=O.changedTouches[0].clientY},[]),C=w.useCallback(function(O){var j=g.current-O.changedTouches[0].clientY;v(O,j)},[v]),T=w.useCallback(function(O){if(O){var j=!!$ut&&{passive:!1};O.addEventListener("wheel",y,j),O.addEventListener("touchstart",N,j),O.addEventListener("touchmove",C,j)}},[C,N,y]),_=w.useCallback(function(O){O&&(O.removeEventListener("wheel",y,!1),O.removeEventListener("touchstart",N,!1),O.removeEventListener("touchmove",C,!1))},[C,N,y]);return w.useEffect(function(){if(l){var O=x.current;return T(O),function(){_(O)}}},[l,T,_]),function(O){x.current=O}}({isEnabled:a===void 0||a,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),i=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=w.useRef({}),f=w.useRef(null),h=w.useCallback(function(g){if(VY){var x=document.body,v=x&&x.style;if(u&&LY.forEach(function(T){var _=v&&v[T];d.current[T]=_}),u&&n2<1){var y=parseInt(d.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,C=window.innerWidth-N+y||0;Object.keys(MY).forEach(function(T){var _=MY[T];v&&(v[T]=_)}),v&&(v.paddingRight="".concat(C,"px"))}x&&zY()&&(x.addEventListener("touchmove",UY,mv),g&&(g.addEventListener("touchstart",HY,mv),g.addEventListener("touchmove",QY,mv))),n2+=1}},[u]),m=w.useCallback(function(g){if(VY){var x=document.body,v=x&&x.style;n2=Math.max(n2-1,0),u&&n2<1&&LY.forEach(function(y){var N=d.current[y];v&&(v[y]=N)}),x&&zY()&&(x.removeEventListener("touchmove",UY,mv),g&&(g.removeEventListener("touchstart",HY,mv),g.removeEventListener("touchmove",QY,mv)))}},[u]);return w.useEffect(function(){if(l){var g=f.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){f.current=g}}({isEnabled:r});return Sr(w.Fragment,null,r&&Sr("div",{onClick:Ndt,css:Cdt}),t(function(o){n(o),i(o)}))}var jdt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},kdt=function(e){var t=e.name,r=e.onFocus;return Sr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:jdt,value:"",onChange:function(){}})};function AP(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function CAe(){return AP(/^Mac/i)}function Sdt(){return AP(/^iPhone/i)||AP(/^iPad/i)||CAe()&&navigator.maxTouchPoints>1}var _dt,Bdt={clearIndicator:ndt,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,a=e.isFocused,n=e.theme,i=n.colors,o=n.borderRadius;return wr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:n.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?i.neutral5:i.neutral0,borderColor:r?i.neutral10:a?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(i.primary):void 0,"&:hover":{borderColor:a?i.primary:i.neutral30}})},dropdownIndicator:adt,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,a=r.colors,n=r.spacing;return wr({label:"group",cursor:"default",display:"block"},t?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*n.baseUnit,paddingRight:3*n.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,a=e.theme,n=a.spacing.baseUnit,i=a.colors;return wr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?i.neutral10:i.neutral20,marginBottom:2*n,marginTop:2*n})},input:function(e,t){var r=e.isDisabled,a=e.value,n=e.theme,i=n.spacing,o=n.colors;return wr(wr({visibility:r?"hidden":"visible",transform:a?"translateZ(0)":""},udt),t?{}:{margin:i.baseUnit/2,paddingBottom:i.baseUnit/2,paddingTop:i.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,a=e.size,n=e.theme,i=n.colors,o=n.spacing.baseUnit;return wr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*o})},loadingMessage:Zut,menu:function(e,t){var r,a=e.placement,n=e.theme,i=n.borderRadius,o=n.spacing,l=n.colors;return wr((Vv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(a),"100%"),Vv(r,"position","absolute"),Vv(r,"width","100%"),Vv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:i,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,a=e.theme.spacing.baseUnit;return wr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:a,paddingTop:a})},menuPortal:function(e){var t=e.rect,r=e.offset,a=e.position;return{left:t.left,position:a,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,a=r.spacing,n=r.borderRadius,i=r.colors;return wr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:i.neutral10,borderRadius:n/2,margin:a.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,a=r.borderRadius,n=r.colors,i=e.cropWithEllipsis;return wr({overflow:"hidden",textOverflow:i||i===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:a/2,color:n.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,a=r.spacing,n=r.borderRadius,i=r.colors,o=e.isFocused;return wr({alignItems:"center",display:"flex"},t?{}:{borderRadius:n/2,backgroundColor:o?i.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}})},noOptionsMessage:Jut,option:function(e,t){var r=e.isDisabled,a=e.isFocused,n=e.isSelected,i=e.theme,o=i.spacing,l=i.colors;return wr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:n?l.primary:a?l.primary25:"transparent",color:r?l.neutral20:n?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:n?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,a=r.spacing,n=r.colors;return wr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:n.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,a=e.theme,n=a.spacing,i=a.colors;return wr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?i.neutral40:i.neutral80,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,a=e.isMulti,n=e.hasValue,i=e.selectProps.controlShouldRenderValue;return wr({alignItems:"center",display:a&&n&&i?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},$6={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Tdt={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:TY(),captureMenuScroll:!TY(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=wr({ignoreCase:!0,ignoreAccents:!0,stringify:bdt,trim:!0,matchFrom:"any"},_dt),a=r.ignoreCase,n=r.ignoreAccents,i=r.stringify,o=r.trim,l=r.matchFrom,c=o?RY(t):t,u=o?RY(i(e)):i(e);return a&&(c=c.toLowerCase(),u=u.toLowerCase()),n&&(c=vdt(c),u=NAe(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function $Y(e,t,r,a){return{type:"option",data:t,isDisabled:jAe(e,t,r),isSelected:kAe(e,t,r),label:EAe(e,t),value:IS(e,t),index:a}}function Nj(e,t){return e.options.map(function(r,a){if("options"in r){var n=r.options.map(function(o,l){return $Y(e,o,t,l)}).filter(function(o){return KY(e,o)});return n.length>0?{type:"group",data:r,options:n,index:a}:void 0}var i=$Y(e,r,t,a);return KY(e,i)?i:void 0}).filter(Gut)}function GY(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,K7(r.options.map(function(a){return a.data}))):t.push(r.data),t},[])}function qY(e,t){return e.reduce(function(r,a){return a.type==="group"?r.push.apply(r,K7(a.options.map(function(n){return{data:n.data,id:"".concat(t,"-").concat(a.index,"-").concat(n.index)}}))):r.push({data:a.data,id:"".concat(t,"-").concat(a.index)}),r},[])}function KY(e,t){var r=e.inputValue,a=r===void 0?"":r,n=t.data,i=t.isSelected,o=t.label,l=t.value;return(!_Ae(e)||!i)&&SAe(e,{label:o,value:l,data:n},a)}var G6=function(e,t){var r;return((r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id)||null},EAe=function(e,t){return e.getOptionLabel(t)},IS=function(e,t){return e.getOptionValue(t)};function jAe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function kAe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var a=IS(e,t);return r.some(function(n){return IS(e,n)===a})}function SAe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var _Ae=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Idt=1,BAe=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&aP(o,l)})(i,w.Component);var t,r,a,n=sut(i);function i(o){var l;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,i),(l=n.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=CAe()||Sdt(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(f,h),g(f,h)},l.setValue=function(f,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:h,option:m})},l.selectOption=function(f){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),N=l.isOptionDisabled(f,v);if(y){var C=l.getOptionValue(f);l.setValue(v.filter(function(T){return l.getOptionValue(T)!==C}),"deselect-option",f)}else{if(N)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(K7(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=wj(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(wj(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=wj(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return G6(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return qY(Nj(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return Hut.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(f){return EAe(l.props,f)},l.getOptionValue=function(f){return IS(l.props,f)},l.getStyles=function(f,h){var m=l.props.unstyled,g=Bdt[f](h,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,h):g},l.getClassNames=function(f,h){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,wr(wr({},Adt),f.components);var f},l.buildCategorizedOptions=function(){return Nj(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return GY(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,h){l.setState({ariaSelection:wr({value:f},h)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&r3(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var h=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var h=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:h>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return _Ae(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,N=h.isDisabled,C=h.menuIsOpen,T=h.onKeyDown,_=h.tabSelectsValue,O=h.openMenuOnFocus,j=l.state,S=j.focusedOption,B=j.focusedValue,L=j.selectValue;if(!(N||typeof T=="function"&&(T(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(B)l.removeValue(B);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!C||!_||!S||O&&l.isOptionSelected(S,L))return;l.selectOption(S);break;case"Enter":if(f.keyCode===229)break;if(C){if(!S||l.isComposing)return;l.selectOption(S);break}return;case"Escape":C?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!C){l.openMenu("first");break}if(!S)return;l.selectOption(S);break;case"ArrowUp":C?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":C?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!C)return;l.focusOption("pageup");break;case"PageDown":if(!C)return;l.focusOption("pagedown");break;case"Home":if(!C)return;l.focusOption("first");break;case"End":if(!C)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++Idt),l.state.selectValue=SY(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=G6(c,u[d])}return l}return t=i,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&BY(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(BY(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(o){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme($6):wr(wr({},$6),this.props.theme):$6}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return jAe(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return kAe(this.props,o,l)}},{key:"filterOption",value:function(o,l){return SAe(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,h=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,N=v.ariaSelection,C=this.commonProps,T=u||this.getElementId("input"),_=wr(wr(wr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(N==null?void 0:N.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?w.createElement(x,Fr({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:T,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},_)):w.createElement(wdt,Fr({id:T,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:BS,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:h,value:""},_))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,N=x.isMulti,C=x.inputValue,T=x.placeholder,_=this.state,O=_.selectValue,j=_.focusedValue,S=_.isFocused;if(!this.hasValue()||!v)return C?null:w.createElement(m,Fr({},g,{key:"placeholder",isDisabled:y,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),T);if(N)return O.map(function(L,D){var k=L===j,R="".concat(o.getOptionLabel(L),"-").concat(o.getOptionValue(L));return w.createElement(c,Fr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:k,isDisabled:y,key:R,index:D,removeProps:{onClick:function(){return o.removeValue(L)},onTouchEnd:function(){return o.removeValue(L)},onMouseDown:function(U){U.preventDefault()}},data:L}),o.formatOptionLabel(L,"value"))});if(C)return null;var B=O[0];return w.createElement(h,Fr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,Fr({},l,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?w.createElement(o,Fr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return w.createElement(c,Fr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,Fr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,N=this.props,C=N.captureMenuScroll,T=N.inputValue,_=N.isLoading,O=N.loadingMessage,j=N.minMenuHeight,S=N.maxMenuHeight,B=N.menuIsOpen,L=N.menuPlacement,D=N.menuPosition,k=N.menuPortalTarget,R=N.menuShouldBlockScroll,U=N.menuShouldScrollIntoView,H=N.noOptionsMessage,Q=N.onMenuScrollToTop,V=N.onMenuScrollToBottom;if(!B)return null;var G,J=function(X,Y){var ae=X.type,le=X.data,ie=X.isDisabled,ne=X.isSelected,oe=X.label,we=X.value,K=y===le,Ee=ie?void 0:function(){return o.onOptionHover(le)},_e=ie?void 0:function(){return o.selectOption(le)},Ce="".concat(o.getElementId("option"),"-").concat(Y),de={id:Ce,onClick:_e,onMouseMove:Ee,onMouseOver:Ee,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ne};return w.createElement(x,Fr({},v,{innerProps:de,data:le,isDisabled:ie,isSelected:ne,key:Ce,label:oe,type:ae,value:we,isFocused:K,innerRef:K?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(X.data,"menu"))};if(this.hasOptions())G=this.getCategorizedOptions().map(function(X){if(X.type==="group"){var Y=X.data,ae=X.options,le=X.index,ie="".concat(o.getElementId("group"),"-").concat(le),ne="".concat(ie,"-heading");return w.createElement(c,Fr({},v,{key:ie,data:Y,options:ae,Heading:u,headingProps:{id:ne,data:X.data},label:o.formatGroupLabel(X.data)}),X.options.map(function(oe){return J(oe,"".concat(le,"-").concat(oe.index))}))}if(X.type==="option")return J(X,"".concat(X.index))});else if(_){var W=O({inputValue:T});if(W===null)return null;G=w.createElement(m,v,W)}else{var Z=H({inputValue:T});if(Z===null)return null;G=w.createElement(g,v,Z)}var M={minMenuHeight:j,maxMenuHeight:S,menuPlacement:L,menuPosition:D,menuShouldScrollIntoView:U},F=w.createElement(Xut,Fr({},v,M),function(X){var Y=X.ref,ae=X.placerProps,le=ae.placement,ie=ae.maxHeight;return w.createElement(d,Fr({},v,M,{innerRef:Y,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:_,placement:le}),w.createElement(Edt,{captureEnabled:C,onTopArrive:Q,onBottomArrive:V,lockEnabled:R},function(ne){return w.createElement(f,Fr({},v,{innerRef:function(oe){o.getMenuListRef(oe),ne(oe)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:_,maxHeight:ie,focusedOption:y}),G)}))});return k||D==="fixed"?w.createElement(h,Fr({},v,{appendTo:k,controlElement:this.controlRef,menuPlacement:L,menuPosition:D}),F):F}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return w.createElement(kdt,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return w.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,N){return w.createElement("input",{key:"i-".concat(N),name:f,type:"hidden",value:o.getOptionValue(y)})}):w.createElement("input",{name:f,type:"hidden",value:""});return w.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return w.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return w.createElement(gdt,Fr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return w.createElement(u,Fr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),w.createElement(l,Fr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),w.createElement(d,Fr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(c,Fr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],a=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,N=o.inputValue,C=o.isMulti,T=SY(v),_={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||N!==c.inputValue)){var O=y?function(R,U){return GY(Nj(R,U))}(o,T):[],j=y?qY(Nj(o,T),"".concat(g,"-option")):[],S=u?function(R,U){var H=R.focusedValue,Q=R.selectValue.indexOf(H);if(Q>-1){if(U.indexOf(H)>-1)return H;if(Q<U.length)return U[Q]}return null}(l,T):null,B=function(R,U){var H=R.focusedOption;return H&&U.indexOf(H)>-1?H:U[0]}(l,O);_={selectValue:T,focusedOption:B,focusedOptionId:G6(j,B),focusableOptionsWithIds:j,focusedValue:S,clearFocusValueOnUpdate:!1}}var L=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,k=h&&m;return h&&!k&&(D={value:wj(C,T,T[0]||null),options:T,action:"initial-input-focus"},k=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),wr(wr(wr({},_),L),{},{prevProps:o,ariaSelection:D,prevWasFocused:k})}}],r&&cY(t.prototype,r),a&&cY(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}();BAe.defaultProps=Tdt;var Odt=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Fdt=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],rU=dn(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Ddt=dn(function(e){var t=rU.default;e.exports=function(r,a){if(t(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,a||"default");if(t(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),TAe=dn(function(e){var t=rU.default;e.exports=function(r){var a=Ddt(r,"string");return t(a)==="symbol"?a:String(a)},e.exports.__esModule=!0,e.exports.default=e.exports}),Pdt=dn(function(e){e.exports=function(t,r,a){return(r=TAe(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t},e.exports.__esModule=!0,e.exports.default=e.exports});dn(function(e){function t(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);a&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,i)}return n}e.exports=function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?t(Object(n),!0).forEach(function(i){Pdt(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),dn(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),dn(function(e){function t(r,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,TAe(i.key),i)}}e.exports=function(r,a,n){return a&&t(r.prototype,a),n&&t(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Rdt=dn(function(e){function t(r,a){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});dn(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Rdt(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var WY=dn(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Ldt=dn(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Mdt=dn(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Udt=dn(function(e){var t=rU.default;e.exports=function(r,a){if(a&&(t(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mdt(r)},e.exports.__esModule=!0,e.exports.default=e.exports});dn(function(e){e.exports=function(t){var r=Ldt();return function(){var a,n=WY(t);if(r){var i=WY(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Udt(this,a)}},e.exports.__esModule=!0,e.exports.default=e.exports});var hP=dn(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n},e.exports.__esModule=!0,e.exports.default=e.exports}),Qdt=dn(function(e){e.exports=function(t){if(Array.isArray(t))return hP(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Hdt=dn(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),IAe=dn(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return hP(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?hP(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),zdt=dn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});dn(function(e){e.exports=function(t){return Qdt(t)||Hdt(t)||IAe(t)||zdt()},e.exports.__esModule=!0,e.exports.default=e.exports});var Vdt=dn(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),$dt=dn(function(e){e.exports=function(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,i,o,l,c=[],u=!0,d=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),Gdt=dn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});dn(function(e){e.exports=function(t,r){return Vdt(t)||$dt(t,r)||IAe(t,r)||Gdt()},e.exports.__esModule=!0,e.exports.default=e.exports});var qdt=dn(function(e){e.exports=function(t,r){if(t==null)return{};var a,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(i[a]=t[a]);return i},e.exports.__esModule=!0,e.exports.default=e.exports});dn(function(e){e.exports=function(t,r){if(t==null)return{};var a,n,i=qdt(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i},e.exports.__esModule=!0,e.exports.default=e.exports}),dn(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Kdt=w.forwardRef(function(e,t){var r=function(n){var i=n.defaultOptions,o=i!==void 0&&i,l=n.cacheOptions,c=l!==void 0&&l,u=n.loadOptions;n.options;var d=n.isLoading,f=d!==void 0&&d,h=n.onInputChange,m=n.filterOption,g=m===void 0?null:m,x=oA(n,Fdt),v=x.inputValue,y=w.useRef(void 0),N=w.useRef(!1),C=eo(w.useState(Array.isArray(o)?o:void 0),2),T=C[0],_=C[1],O=eo(w.useState(v!==void 0?v:""),2),j=O[0],S=O[1],B=eo(w.useState(o===!0),2),L=B[0],D=B[1],k=eo(w.useState(void 0),2),R=k[0],U=k[1],H=eo(w.useState([]),2),Q=H[0],V=H[1],G=eo(w.useState(!1),2),J=G[0],W=G[1],Z=eo(w.useState({}),2),M=Z[0],F=Z[1],X=eo(w.useState(void 0),2),Y=X[0],ae=X[1],le=eo(w.useState(void 0),2),ie=le[0],ne=le[1];c!==ie&&(F({}),ne(c)),o!==Y&&(_(Array.isArray(o)?o:void 0),ae(o)),w.useEffect(function(){return N.current=!0,function(){N.current=!1}},[]);var oe=w.useCallback(function(Ee,_e){if(!u)return _e();var Ce=u(Ee,_e);Ce&&typeof Ce.then=="function"&&Ce.then(_e,function(){return _e()})},[u]);w.useEffect(function(){o===!0&&oe(j,function(Ee){N.current&&(_(Ee||[]),D(!!y.current))})},[]);var we=w.useCallback(function(Ee,_e){var Ce=function(xe,he,ye){if(ye){var ce=ye(xe,he);if(typeof ce=="string")return ce}return xe}(Ee,_e,h);if(!Ce)return y.current=void 0,S(""),U(""),V([]),D(!1),void W(!1);if(c&&M[Ce])S(Ce),U(Ce),V(M[Ce]),D(!1),W(!1);else{var de=y.current={};S(Ce),D(!0),W(!R),oe(Ce,function(xe){N&&de===y.current&&(y.current=void 0,D(!1),U(Ce),V(xe||[]),W(!1),F(xe?wr(wr({},M),{},Vv({},Ce,xe)):M))})}},[c,oe,R,M,h]),K=J?[]:j&&R?Q:T||[];return wr(wr({},x),{},{options:K,isLoading:L||f,onInputChange:we,filterOption:g})}(e),a=function(n){var i=n.defaultInputValue,o=i===void 0?"":i,l=n.defaultMenuIsOpen,c=l!==void 0&&l,u=n.defaultValue,d=u===void 0?null:u,f=n.inputValue,h=n.menuIsOpen,m=n.onChange,g=n.onInputChange,x=n.onMenuClose,v=n.onMenuOpen,y=n.value,N=oA(n,Odt),C=eo(w.useState(f!==void 0?f:o),2),T=C[0],_=C[1],O=eo(w.useState(h!==void 0?h:c),2),j=O[0],S=O[1],B=eo(w.useState(y!==void 0?y:d),2),L=B[0],D=B[1],k=w.useCallback(function(J,W){typeof m=="function"&&m(J,W),D(J)},[m]),R=w.useCallback(function(J,W){var Z;typeof g=="function"&&(Z=g(J,W)),_(Z!==void 0?Z:J)},[g]),U=w.useCallback(function(){typeof v=="function"&&v(),S(!0)},[v]),H=w.useCallback(function(){typeof x=="function"&&x(),S(!1)},[x]),Q=f!==void 0?f:T,V=h!==void 0?h:j,G=y!==void 0?y:L;return wr(wr({},N),{},{inputValue:Q,menuIsOpen:V,onChange:k,onInputChange:R,onMenuClose:H,onMenuOpen:U,value:G})}(r);return w.createElement(BAe,Fr({ref:t},a))}),Wdt=Kdt,Xdt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,n,i;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;n--!=0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=a;n--!=0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=a;n--!=0;){var o=i[n];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},$v;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})($v||($v={}));class sg{constructor({apiKey:t,authReferrerPolicy:r,channel:a,client:n,id:i="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=a,this.client=n,this.id=i||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,sg.instance){if(!Xdt(this.options,sg.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(sg.instance.options)}`);return sg.instance}sg.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?$v.FAILURE:this.done?$v.SUCCESS:this.loading?$v.LOADING:$v.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(a=>{a?r(a.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Ydt=function(e,t,r){var a,n=e.bounds,i=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),l=Bg({input:t},o);return r&&(l.sessionToken=r),n&&(l.bounds=new((a=google.maps.LatLngBounds).bind.apply(a,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],n)))),i&&(l.location=new google.maps.LatLng(i)),l},Jdt=function(e){var t=e.autocompletionRequest,r=e.debounce,a=e.minLengthAutocomplete,n=e.placesService,i=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=w.useRef(null),m=w.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=w.useRef(!1),y=w.useRef(null),N=w.useRef(!1),C=w.useRef(c);C.current=c;var T=w.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);w.useEffect(function(){return N.current=!1,function(){N.current=!0}},[]);var _=w.useCallback(function(){for(var j=[],S=0;S<arguments.length;S++)j[S]=arguments[S];m.current=j,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(C.current.apply(C,j),v.current=!0),y.current=setTimeout(function(){var B=!0;g&&v.current&&(B=!1),T(),!N.current&&x&&B&&C.current.apply(C,j)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var B=m.current;T(),N.current||C.current.apply(null,B)},f))},[f,u,T,g,x]),O=w.useCallback(function(){y.current&&(C.current.apply(null,m.current),T())},[T]);return[_,T,O]}(function(c,u){if(!n)return u([]);if(c.length<a)return u([]);var d=Bg({},t);n.getPlacePredictions(Ydt(d,c,o&&i),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},XY=w.forwardRef(function(e,t){var r,a,n,i,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,N=x.onLoadFailed,C=w.useState(void 0),T=C[0],_=C[1],O=w.useState(void 0),j=O[0],S=O[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");_(new window.google.maps.places.AutocompleteService),S(new google.maps.places.AutocompleteSessionToken)};return w.useEffect(function(){v?rut(void 0,void 0,void 0,function(){var L;return aut(this,function(D){switch(D.label){case 0:if(!v)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new sg(Bg({apiKey:v},Bg({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return B(),[3,5];case 4:return L=D.sent(),typeof N=="function"&&N(L),[3,5];case 5:return[2]}})}):B()},[]),{placesService:T,sessionToken:j,setSessionToken:S}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(a=e.apiOptions)!==null&&a!==void 0?a:{},onLoadFailed:(n=e.onLoadFailed)!==null&&n!==void 0?n:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=Jdt({autocompletionRequest:(i=e.autocompletionRequest)!==null&&i!==void 0?i:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return w.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),ct.createElement(Wdt,Bg({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mP=function(e,t){return mP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},mP(e,t)};function pf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mP(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var pP=function(){return pP=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},pP.apply(this,arguments)};function kl(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(a.next(d))}catch(f){o(f)}}function c(d){try{u(a.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((a=a.apply(e,[])).next())})}function Zo(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],n=0}finally{a=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Cj(e,t,r){if(arguments.length===2)for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||t)}var s0=function(){function e(t,r,a,n){this.left=t,this.top=r,this.width=a,this.height=n}return e.prototype.add=function(t,r,a,n){return new e(this.left+t,this.top+r,this.width+a,this.height+n)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var a=Array.from(r).find(function(n){return n.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),a3=function(e,t){return s0.fromClientRect(e,t.getBoundingClientRect())},Zdt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),n=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new s0(0,0,a,n)},n3=function(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},Js=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var a=[],n=-1,i="";++n<r;){var o=e[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return i},YY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eft=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ej=0;Ej<YY.length;Ej++)eft[YY.charCodeAt(Ej)]=Ej;var JY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jj=0;jj<JY.length;jj++)F2[JY.charCodeAt(jj)]=jj;var tft=function(e){var t=e.length*.75,r=e.length,a,n=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(a=0;a<r;a+=4)i=F2[e.charCodeAt(a)],o=F2[e.charCodeAt(a+1)],l=F2[e.charCodeAt(a+2)],c=F2[e.charCodeAt(a+3)],d[n++]=i<<2|o>>4,d[n++]=(o&15)<<4|l>>2,d[n++]=(l&3)<<6|c&63;return u},rft=function(e){for(var t=e.length,r=[],a=0;a<t;a+=2)r.push(e[a+1]<<8|e[a]);return r},aft=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return r},Og=5,aU=11,q6=2,nft=aU-Og,OAe=65536>>Og,sft=1<<Og,K6=sft-1,ift=1024>>Og,oft=OAe+ift,lft=oft,cft=32,uft=lft+cft,dft=65536>>aU,fft=1<<nft,Aft=fft-1,ZY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},hft=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},mft=function(e,t){var r=tft(e),a=Array.isArray(r)?aft(r):new Uint32Array(r),n=Array.isArray(r)?rft(r):new Uint16Array(r),i=24,o=ZY(n,i/2,a[4]/2),l=a[5]===2?ZY(n,(i+a[4])/2):hft(a,Math.ceil((i+a[4])/4));return new pft(a[0],a[1],a[2],a[3],o,l)},pft=function(){function e(t,r,a,n,i,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=i,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Og],r=(r<<q6)+(t&K6),this.data[r];if(t<=65535)return r=this.index[OAe+(t-55296>>Og)],r=(r<<q6)+(t&K6),this.data[r];if(t<this.highStart)return r=uft-dft+(t>>aU),r=this.index[r],r+=t>>Og&Aft,r=this.index[r],r=(r<<q6)+(t&K6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),eJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gft=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var kj=0;kj<eJ.length;kj++)gft[eJ.charCodeAt(kj)]=kj;var xft="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",tJ=50,vft=1,FAe=2,DAe=3,bft=4,yft=5,rJ=7,PAe=8,aJ=9,jm=10,gP=11,nJ=12,xP=13,wft=14,D2=15,vP=16,Sj=17,s2=18,Nft=19,sJ=20,bP=21,i2=22,W6=23,pv=24,Gc=25,P2=26,R2=27,gv=28,Cft=29,ig=30,Eft=31,_j=32,Bj=33,yP=34,wP=35,NP=36,mN=37,CP=38,I5=39,O5=40,X6=41,RAe=42,jft=43,kft=[9001,65288],LAe="!",ya="×",Tj="÷",EP=mft(xft),dh=[ig,NP],jP=[vft,FAe,DAe,yft],MAe=[jm,PAe],iJ=[R2,P2],Sft=jP.concat(MAe),oJ=[CP,I5,O5,yP,wP],_ft=[D2,xP],Bft=function(e,t){t===void 0&&(t="strict");var r=[],a=[],n=[];return e.forEach(function(i,o){var l=EP.get(i);if(l>tJ?(n.push(!0),l-=tJ):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return a.push(o),r.push(vP);if(l===bft||l===gP){if(o===0)return a.push(o),r.push(ig);var c=r[o-1];return Sft.indexOf(c)===-1?(a.push(a[o-1]),r.push(c)):(a.push(o),r.push(ig))}if(a.push(o),l===Eft)return r.push(t==="strict"?bP:mN);if(l===RAe||l===Cft)return r.push(ig);if(l===jft)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(mN):r.push(ig);r.push(l)}),[a,r,n]},Y6=function(e,t,r,a){var n=a[r];if(Array.isArray(e)?e.indexOf(n)!==-1:e===n)for(var i=r;i<=a.length;){i++;var o=a[i];if(o===t)return!0;if(o!==jm)break}if(n===jm)for(var i=r;i>0;){i--;var l=a[i];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==jm)break}if(l!==jm)break}return!1},lJ=function(e,t){for(var r=e;r>=0;){var a=t[r];if(a===jm)r--;else return a}return 0},Tft=function(e,t,r,a,n){if(r[a]===0)return ya;var i=a-1;if(Array.isArray(n)&&n[i]===!0)return ya;var o=i-1,l=i+1,c=t[i],u=o>=0?t[o]:0,d=t[l];if(c===FAe&&d===DAe)return ya;if(jP.indexOf(c)!==-1)return LAe;if(jP.indexOf(d)!==-1||MAe.indexOf(d)!==-1)return ya;if(lJ(i,t)===PAe)return Tj;if(EP.get(e[i])===gP||(c===_j||c===Bj)&&EP.get(e[l])===gP||c===rJ||d===rJ||c===aJ||[jm,xP,D2].indexOf(c)===-1&&d===aJ||[Sj,s2,Nft,pv,gv].indexOf(d)!==-1||lJ(i,t)===i2||Y6(W6,i2,i,t)||Y6([Sj,s2],bP,i,t)||Y6(nJ,nJ,i,t))return ya;if(c===jm)return Tj;if(c===W6||d===W6)return ya;if(d===vP||c===vP)return Tj;if([xP,D2,bP].indexOf(d)!==-1||c===wft||u===NP&&_ft.indexOf(c)!==-1||c===gv&&d===NP||d===sJ||dh.indexOf(d)!==-1&&c===Gc||dh.indexOf(c)!==-1&&d===Gc||c===R2&&[mN,_j,Bj].indexOf(d)!==-1||[mN,_j,Bj].indexOf(c)!==-1&&d===P2||dh.indexOf(c)!==-1&&iJ.indexOf(d)!==-1||iJ.indexOf(c)!==-1&&dh.indexOf(d)!==-1||[R2,P2].indexOf(c)!==-1&&(d===Gc||[i2,D2].indexOf(d)!==-1&&t[l+1]===Gc)||[i2,D2].indexOf(c)!==-1&&d===Gc||c===Gc&&[Gc,gv,pv].indexOf(d)!==-1)return ya;if([Gc,gv,pv,Sj,s2].indexOf(d)!==-1)for(var f=i;f>=0;){var h=t[f];if(h===Gc)return ya;if([gv,pv].indexOf(h)!==-1)f--;else break}if([R2,P2].indexOf(d)!==-1)for(var f=[Sj,s2].indexOf(c)!==-1?o:i;f>=0;){var h=t[f];if(h===Gc)return ya;if([gv,pv].indexOf(h)!==-1)f--;else break}if(CP===c&&[CP,I5,yP,wP].indexOf(d)!==-1||[I5,yP].indexOf(c)!==-1&&[I5,O5].indexOf(d)!==-1||[O5,wP].indexOf(c)!==-1&&d===O5||oJ.indexOf(c)!==-1&&[sJ,P2].indexOf(d)!==-1||oJ.indexOf(d)!==-1&&c===R2||dh.indexOf(c)!==-1&&dh.indexOf(d)!==-1||c===pv&&dh.indexOf(d)!==-1||dh.concat(Gc).indexOf(c)!==-1&&d===i2&&kft.indexOf(e[l])===-1||dh.concat(Gc).indexOf(d)!==-1&&c===s2)return ya;if(c===X6&&d===X6){for(var m=r[i],g=1;m>0&&(m--,t[m]===X6);)g++;if(g%2!==0)return ya}return c===_j&&d===Bj?ya:Tj},Ift=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Bft(e,t.lineBreak),a=r[0],n=r[1],i=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(l){return[Gc,ig,RAe].indexOf(l)!==-1?mN:l}));var o=t.wordBreak==="keep-all"?i.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,n,o]},Oft=function(){function e(t,r,a,n){this.codePoints=t,this.required=r===LAe,this.start=a,this.end=n}return e.prototype.slice=function(){return Js.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Fft=function(e,t){var r=n3(e),a=Ift(r,t),n=a[0],i=a[1],o=a[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=ya;u<l&&(d=Tft(r,i,n,++u,o))===ya;);if(d!==ya||u===l){var f=new Oft(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Dft=1,Pft=2,mC=4,cJ=8,OS=10,uJ=47,Aw=92,Rft=9,Lft=32,Ij=34,o2=61,Mft=35,Uft=36,Qft=37,Oj=39,Fj=40,l2=41,Hft=95,uc=45,zft=33,Vft=60,$ft=62,Gft=64,qft=91,Kft=93,Wft=61,Xft=123,Dj=63,Yft=125,dJ=124,Jft=126,Zft=128,fJ=65533,J6=42,mg=43,eAt=44,tAt=58,rAt=59,pN=46,aAt=0,nAt=8,sAt=11,iAt=14,oAt=31,lAt=127,Wf=-1,UAe=48,QAe=97,HAe=101,cAt=102,uAt=117,dAt=122,zAe=65,VAe=69,$Ae=70,fAt=85,AAt=90,nl=function(e){return e>=UAe&&e<=57},hAt=function(e){return e>=55296&&e<=57343},xv=function(e){return nl(e)||e>=zAe&&e<=$Ae||e>=QAe&&e<=cAt},mAt=function(e){return e>=QAe&&e<=dAt},pAt=function(e){return e>=zAe&&e<=AAt},gAt=function(e){return mAt(e)||pAt(e)},xAt=function(e){return e>=Zft},Pj=function(e){return e===OS||e===Rft||e===Lft},FS=function(e){return gAt(e)||xAt(e)||e===Hft},AJ=function(e){return FS(e)||nl(e)||e===uc},vAt=function(e){return e>=aAt&&e<=nAt||e===sAt||e>=iAt&&e<=oAt||e===lAt},Am=function(e,t){return e!==Aw?!1:t!==OS},Rj=function(e,t,r){return e===uc?FS(t)||Am(t,r):FS(e)?!0:!!(e===Aw&&Am(e,t))},Z6=function(e,t,r){return e===mg||e===uc?nl(t)?!0:t===pN&&nl(r):nl(e===pN?t:e)},bAt=function(e){var t=0,r=1;(e[t]===mg||e[t]===uc)&&(e[t]===uc&&(r=-1),t++);for(var a=[];nl(e[t]);)a.push(e[t++]);var n=a.length?parseInt(Js.apply(void 0,a),10):0;e[t]===pN&&t++;for(var i=[];nl(e[t]);)i.push(e[t++]);var o=i.length,l=o?parseInt(Js.apply(void 0,i),10):0;(e[t]===VAe||e[t]===HAe)&&t++;var c=1;(e[t]===mg||e[t]===uc)&&(e[t]===uc&&(c=-1),t++);for(var u=[];nl(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Js.apply(void 0,u),10):0;return r*(n+l*Math.pow(10,-o))*Math.pow(10,c*d)},yAt={type:2},wAt={type:3},NAt={type:4},CAt={type:13},EAt={type:8},jAt={type:21},kAt={type:9},SAt={type:10},_At={type:11},BAt={type:12},TAt={type:14},Lj={type:23},IAt={type:1},OAt={type:25},FAt={type:24},DAt={type:26},PAt={type:27},RAt={type:28},LAt={type:29},MAt={type:31},kP={type:32},GAe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(n3(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==kP;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Ij:return this.consumeStringToken(Ij);case Mft:var r=this.peekCodePoint(0),a=this.peekCodePoint(1),n=this.peekCodePoint(2);if(AJ(r)||Am(a,n)){var i=Rj(r,a,n)?Pft:Dft,o=this.consumeName();return{type:5,value:o,flags:i}}break;case Uft:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),CAt;break;case Oj:return this.consumeStringToken(Oj);case Fj:return yAt;case l2:return wAt;case J6:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),TAt;break;case mg:if(Z6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case eAt:return NAt;case uc:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(Z6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Rj(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===uc&&u===$ft)return this.consumeCodePoint(),this.consumeCodePoint(),FAt;break;case pN:if(Z6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case uJ:if(this.peekCodePoint(0)===J6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===J6&&(d=this.consumeCodePoint(),d===uJ))return this.consumeToken();if(d===Wf)return this.consumeToken()}break;case tAt:return DAt;case rAt:return PAt;case Vft:if(this.peekCodePoint(0)===zft&&this.peekCodePoint(1)===uc&&this.peekCodePoint(2)===uc)return this.consumeCodePoint(),this.consumeCodePoint(),OAt;break;case Gft:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(Rj(f,h,m)){var o=this.consumeName();return{type:7,value:o}}break;case qft:return RAt;case Aw:if(Am(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Kft:return LAt;case Wft:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),EAt;break;case Xft:return _At;case Yft:return BAt;case uAt:case fAt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===mg&&(xv(x)||x===Dj)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case dJ:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),kAt;if(this.peekCodePoint(0)===dJ)return this.consumeCodePoint(),jAt;break;case Jft:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),SAt;break;case Wf:return kP}return Pj(t)?(this.consumeWhiteSpace(),MAt):nl(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):FS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Js(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();xv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var a=!1;r===Dj&&t.length<6;)t.push(r),r=this.consumeCodePoint(),a=!0;if(a){var n=parseInt(Js.apply(void 0,t.map(function(c){return c===Dj?UAe:c})),16),i=parseInt(Js.apply(void 0,t.map(function(c){return c===Dj?$Ae:c})),16);return{type:30,start:n,end:i}}var o=parseInt(Js.apply(void 0,t),16);if(this.peekCodePoint(0)===uc&&xv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];xv(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var i=parseInt(Js.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Fj?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Fj?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Wf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Oj||r===Ij){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Wf||this.peekCodePoint(0)===l2)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),Lj)}for(;;){var n=this.consumeCodePoint();if(n===Wf||n===l2)return{type:22,value:Js.apply(void 0,t)};if(Pj(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Wf||this.peekCodePoint(0)===l2?(this.consumeCodePoint(),{type:22,value:Js.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Lj);if(n===Ij||n===Oj||n===Fj||vAt(n))return this.consumeBadUrlRemnants(),Lj;if(n===Aw)if(Am(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Lj;else t.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;Pj(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===l2||t===Wf)return;Am(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,a="";t>0;){var n=Math.min(r,t);a+=Js.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var r="",a=0;do{var n=this._value[a];if(n===Wf||n===void 0||n===t)return r+=this.consumeStringSlice(a),{type:0,value:r};if(n===OS)return this._value.splice(0,a),IAt;if(n===Aw){var i=this._value[a+1];i!==Wf&&i!==void 0&&(i===OS?(r+=this.consumeStringSlice(a),a=-1,this._value.shift()):Am(n,i)&&(r+=this.consumeStringSlice(a),r+=Js(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=mC,a=this.peekCodePoint(0);for((a===mg||a===uc)&&t.push(this.consumeCodePoint());nl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(a===pN&&nl(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=cJ;nl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((a===VAe||a===HAe)&&((n===mg||n===uc)&&nl(i)||nl(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=cJ;nl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[bAt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],a=t[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Rj(n,i,o)){var l=this.consumeName();return{type:15,number:r,flags:a,unit:l}}return n===Qft?(this.consumeCodePoint(),{type:16,number:r,flags:a}):{type:17,number:r,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(xv(t)){for(var r=Js(t);xv(this.peekCodePoint(0))&&r.length<6;)r+=Js(this.consumeCodePoint());Pj(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(r,16);return a===0||hAt(a)||a>1114111?fJ:a}return t===Wf?fJ:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(AJ(r))t+=Js(r);else if(Am(r,this.peekCodePoint(0)))t+=Js(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),qAe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new GAe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||QAt(a,t))return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?kP:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),pC=function(e){return e.type===15},W1=function(e){return e.type===17},En=function(e){return e.type===20},UAt=function(e){return e.type===0},SP=function(e,t){return En(e)&&e.value===t},KAe=function(e){return e.type!==31},l1=function(e){return e.type!==31&&e.type!==4},IA=function(e){var t=[],r=[];return e.forEach(function(a){if(a.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}a.type!==31&&r.push(a)}),r.length&&t.push(r),t},QAt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},ip=function(e){return e.type===17||e.type===15},yi=function(e){return e.type===16||ip(e)},WAe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},To={type:17,number:0,flags:mC},nU={type:16,number:50,flags:mC},km={type:16,number:100,flags:mC},L2=function(e,t,r){var a=e[0],n=e[1];return[Qn(a,t),Qn(typeof n<"u"?n:a,r)]},Qn=function(e,t){if(e.type===16)return e.number/100*t;if(pC(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},XAe="deg",YAe="grad",JAe="rad",ZAe="turn",s3={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case XAe:return Math.PI*t.number/180;case YAe:return Math.PI/200*t.number;case JAe:return t.number;case ZAe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},ehe=function(e){return e.type===15&&(e.unit===XAe||e.unit===YAe||e.unit===JAe||e.unit===ZAe)},the=function(e){var t=e.filter(En).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[To,To];case"to top":case"bottom":return ad(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[To,km];case"to right":case"left":return ad(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[km,km];case"to bottom":case"top":return ad(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[km,To];case"to left":case"right":return ad(270)}return 0},ad=function(e){return Math.PI*e/180},Qm={name:"color",parse:function(e,t){if(t.type===18){var r=HAt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3);return Sm(parseInt(a+a,16),parseInt(n+n,16),parseInt(i+i,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3),o=t.value.substring(3,4);return Sm(parseInt(a+a,16),parseInt(n+n,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6);return Sm(parseInt(a,16),parseInt(n,16),parseInt(i,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8);return Sm(parseInt(a,16),parseInt(n,16),parseInt(i,16),parseInt(o,16)/255)}}if(t.type===20){var l=Mh[t.value.toUpperCase()];if(typeof l<"u")return l}return Mh.TRANSPARENT}},Hm=function(e){return(255&e)===0},Zi=function(e){var t=255&e,r=255&e>>8,a=255&e>>16,n=255&e>>24;return t<255?"rgba("+n+","+a+","+r+","+t/255+")":"rgb("+n+","+a+","+r+")"},Sm=function(e,t,r,a){return(e<<24|t<<16|r<<8|Math.round(a*255)<<0)>>>0},hJ=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},mJ=function(e,t){var r=t.filter(l1);if(r.length===3){var a=r.map(hJ),n=a[0],i=a[1],o=a[2];return Sm(n,i,o,1)}if(r.length===4){var l=r.map(hJ),n=l[0],i=l[1],o=l[2],c=l[3];return Sm(n,i,o,c)}return 0};function eO(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var pJ=function(e,t){var r=t.filter(l1),a=r[0],n=r[1],i=r[2],o=r[3],l=(a.type===17?ad(a.number):s3.parse(e,a))/(Math.PI*2),c=yi(n)?n.number/100:0,u=yi(i)?i.number/100:0,d=typeof o<"u"&&yi(o)?Qn(o,1):1;if(c===0)return Sm(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=eO(h,f,l+1/3),g=eO(h,f,l),x=eO(h,f,l-1/3);return Sm(m*255,g*255,x*255,d)},HAt={hsl:pJ,hsla:pJ,rgb:mJ,rgba:mJ},hw=function(e,t){return Qm.parse(e,qAe.create(t).parseComponentValue())},Mh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},zAt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(En(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},VAt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},i3=function(e,t){var r=Qm.parse(e,t[0]),a=t[1];return a&&yi(a)?{color:r,stop:a}:{color:r,stop:null}},gJ=function(e,t){var r=e[0],a=e[e.length-1];r.stop===null&&(r.stop=To),a.stop===null&&(a.stop=km);for(var n=[],i=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=Qn(l,t);c>i?n.push(c):n.push(i),i=c}else n.push(null)}for(var u=null,o=0;o<n.length;o++){var d=n[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,h=n[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)n[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,n[v]/t),0)}})},$At=function(e,t,r){var a=t/2,n=r/2,i=Qn(e[0],t)-a,o=n-Qn(e[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},GAt=function(e,t,r){var a=typeof e=="number"?e:$At(e,t,r),n=Math.abs(t*Math.sin(a))+Math.abs(r*Math.cos(a)),i=t/2,o=r/2,l=n/2,c=Math.sin(a-Math.PI/2)*l,u=Math.cos(a-Math.PI/2)*l;return[n,i-u,i+u,o-c,o+c]},Md=function(e,t){return Math.sqrt(e*e+t*t)},xJ=function(e,t,r,a,n){var i=[[0,0],[0,t],[e,0],[e,t]];return i.reduce(function(o,l){var c=l[0],u=l[1],d=Md(r-c,a-u);return(n?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},qAt=function(e,t,r,a,n){var i=0,o=0;switch(e.size){case 0:e.shape===0?i=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):e.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(r),Math.abs(r-n)));break;case 2:if(e.shape===0)i=o=Math.min(Md(t,r),Md(t,r-n),Md(t-a,r),Md(t-a,r-n));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-n))/Math.min(Math.abs(t),Math.abs(t-a)),c=xJ(a,n,t,r,!0),u=c[0],d=c[1];i=Md(u-t,(d-r)/l),o=l*i}break;case 1:e.shape===0?i=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):e.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(r),Math.abs(r-n)));break;case 3:if(e.shape===0)i=o=Math.max(Md(t,r),Md(t,r-n),Md(t-a,r),Md(t-a,r-n));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-n))/Math.max(Math.abs(t),Math.abs(t-a)),f=xJ(a,n,t,r,!1),u=f[0],d=f[1];i=Md(u-t,(d-r)/l),o=l*i}break}return Array.isArray(e.size)&&(i=Qn(e.size[0],a),o=e.size.length===2?Qn(e.size[1],n):i),[i,o]},KAt=function(e,t){var r=ad(180),a=[];return IA(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&o.value==="to"){r=the(n);return}else if(ehe(o)){r=s3.parse(e,o);return}}var l=i3(e,n);a.push(l)}),{angle:r,stops:a,type:1}},Mj=function(e,t){var r=ad(180),a=[];return IA(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=the(n);return}else if(ehe(o)){r=(s3.parse(e,o)+ad(270))%ad(360);return}}var l=i3(e,n);a.push(l)}),{angle:r,stops:a,type:1}},WAt=function(e,t){var r=ad(180),a=[],n=1,i=0,o=3,l=[];return IA(t).forEach(function(c,u){var d=c[0];if(u===0){if(En(d)&&d.value==="linear"){n=1;return}else if(En(d)&&d.value==="radial"){n=2;return}}if(d.type===18){if(d.name==="from"){var f=Qm.parse(e,d.values[0]);a.push({stop:To,color:f})}else if(d.name==="to"){var f=Qm.parse(e,d.values[0]);a.push({stop:km,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(l1);if(h.length===2){var f=Qm.parse(e,h[1]),m=h[0];W1(m)&&a.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),n===1?{angle:(r+ad(180))%ad(360),stops:a,type:n}:{size:o,shape:i,stops:a,position:l,type:n}},rhe="closest-side",ahe="farthest-side",nhe="closest-corner",she="farthest-corner",ihe="circle",ohe="ellipse",lhe="cover",che="contain",XAt=function(e,t){var r=0,a=3,n=[],i=[];return IA(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,h){if(u)if(En(h))switch(h.value){case"center":return i.push(nU),f;case"top":case"left":return i.push(To),f;case"right":case"bottom":return i.push(km),f}else(yi(h)||ip(h))&&i.push(h);else if(En(h))switch(h.value){case ihe:return r=0,!1;case ohe:return r=1,!1;case"at":return u=!0,!1;case rhe:return a=0,!1;case lhe:case ahe:return a=1,!1;case che:case nhe:return a=2,!1;case she:return a=3,!1}else if(ip(h)||yi(h))return Array.isArray(a)||(a=[]),a.push(h),!1;return f},c)}if(c){var d=i3(e,o);n.push(d)}}),{size:a,shape:r,stops:n,position:i,type:2}},Uj=function(e,t){var r=0,a=3,n=[],i=[];return IA(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(En(f))switch(f.value){case"center":return i.push(nU),!1;case"top":case"left":return i.push(To),!1;case"right":case"bottom":return i.push(km),!1}else if(yi(f)||ip(f))return i.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(En(f))switch(f.value){case ihe:return r=0,!1;case ohe:return r=1,!1;case che:case rhe:return a=0,!1;case ahe:return a=1,!1;case nhe:return a=2,!1;case lhe:case she:return a=3,!1}else if(ip(f)||yi(f))return Array.isArray(a)||(a=[]),a.push(f),!1;return d},c)),c){var u=i3(e,o);n.push(u)}}),{size:a,shape:r,stops:n,position:i,type:2}},YAt=function(e){return e.type===1},JAt=function(e){return e.type===2},sU={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var a=uhe[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function ZAt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!uhe[e.name])}var uhe={"linear-gradient":KAt,"-moz-linear-gradient":Mj,"-ms-linear-gradient":Mj,"-o-linear-gradient":Mj,"-webkit-linear-gradient":Mj,"radial-gradient":XAt,"-moz-radial-gradient":Uj,"-ms-radial-gradient":Uj,"-o-radial-gradient":Uj,"-webkit-radial-gradient":Uj,"-webkit-gradient":WAt},eht={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(a){return l1(a)&&ZAt(a)}).map(function(a){return sU.parse(e,a)})}},tht={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(En(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},rht={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return IA(t).map(function(r){return r.filter(yi)}).map(WAe)}},aht={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return IA(t).map(function(r){return r.filter(En).map(function(a){return a.value}).join(" ")}).map(nht)}},nht=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},bb;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(bb||(bb={}));var sht={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return IA(t).map(function(r){return r.filter(iht)})}},iht=function(e){return En(e)||yi(e)},o3=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},oht=o3("top"),lht=o3("right"),cht=o3("bottom"),uht=o3("left"),l3=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return WAe(r.filter(yi))}}},dht=l3("top-left"),fht=l3("top-right"),Aht=l3("bottom-right"),hht=l3("bottom-left"),c3=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},mht=c3("top"),pht=c3("right"),ght=c3("bottom"),xht=c3("left"),u3=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return pC(r)?r.number:0}}},vht=u3("top"),bht=u3("right"),yht=u3("bottom"),wht=u3("left"),Nht={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Cht={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Eht={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(En).reduce(function(r,a){return r|jht(a.value)},0)}},jht=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},kht={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Sht={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},DS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(DS||(DS={}));var _ht={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return DS.STRICT;case"normal":default:return DS.NORMAL}}},Bht={name:"line-height",initialValue:"normal",prefix:!1,type:4},vJ=function(e,t){return En(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:yi(e)?Qn(e,t):t},Tht={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:sU.parse(e,t)}},Iht={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},_P={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},d3=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Oht=d3("top"),Fht=d3("right"),Dht=d3("bottom"),Pht=d3("left"),Rht={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(En).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Lht={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},f3=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Mht=f3("top"),Uht=f3("right"),Qht=f3("bottom"),Hht=f3("left"),zht={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Vht={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},$ht={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&SP(t[0],"none")?[]:IA(t).map(function(r){for(var a={color:Mh.TRANSPARENT,offsetX:To,offsetY:To,blur:To},n=0,i=0;i<r.length;i++){var o=r[i];ip(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:a.blur=o,n++):a.color=Qm.parse(e,o)}return a})}},Ght={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},qht={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Xht[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Kht=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},Wht=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],a=t[1];t[2],t[3];var n=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,a,n,i,o,l]:null},Xht={matrix:Kht,matrix3d:Wht},bJ={type:16,number:50,flags:mC},Yht=[bJ,bJ],Jht={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(yi);return r.length!==2?Yht:[r[0],r[1]]}},Zht={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},mw;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(mw||(mw={}));var e0t={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return mw.BREAK_ALL;case"keep-all":return mw.KEEP_ALL;case"normal":default:return mw.NORMAL}}},t0t={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(W1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},dhe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},r0t={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return W1(t)?t.number:1}},a0t={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},n0t={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(En).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},s0t={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],a=[];return t.forEach(function(n){switch(n.type){case 20:case 0:r.push(n.value);break;case 17:r.push(n.number.toString());break;case 4:a.push(r.join(" ")),r.length=0;break}}),r.length&&a.push(r.join(" ")),a.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},i0t={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},o0t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(W1(t))return t.number;if(En(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},l0t={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(En).map(function(r){return r.value})}},c0t={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Fi=function(e,t){return(e&t)!==0},u0t={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},d0t={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var a=[],n=t.filter(KAe),i=0;i<n.length;i++){var o=n[i],l=n[i+1];if(o.type===20){var c=l&&W1(l)?l.number:1;a.push({counter:o.value,increment:c})}}return a}},f0t={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],a=t.filter(KAe),n=0;n<a.length;n++){var i=a[n],o=a[n+1];if(En(i)&&i.value!=="none"){var l=o&&W1(o)?o.number:0;r.push({counter:i.value,reset:l})}}return r}},A0t={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(pC).map(function(r){return dhe.parse(e,r)})}},h0t={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var a=[],n=t.filter(UAt);if(n.length%2!==0)return null;for(var i=0;i<n.length;i+=2){var o=n[i].value,l=n[i+1].value;a.push({open:o,close:l})}return a}},yJ=function(e,t,r){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?r?a.open:a.close:""},m0t={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&SP(t[0],"none")?[]:IA(t).map(function(r){for(var a={color:255,offsetX:To,offsetY:To,blur:To,spread:To,inset:!1},n=0,i=0;i<r.length;i++){var o=r[i];SP(o,"inset")?a.inset=!0:ip(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:n===2?a.blur=o:a.spread=o,n++):a.color=Qm.parse(e,o)}return a})}},p0t={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],a=[];return t.filter(En).forEach(function(n){switch(n.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),r.forEach(function(n){a.indexOf(n)===-1&&a.push(n)}),a}},g0t={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},x0t={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return pC(t)?t.number:0}},v0t=function(){function e(t,r){var a,n;this.animationDuration=or(t,A0t,r.animationDuration),this.backgroundClip=or(t,zAt,r.backgroundClip),this.backgroundColor=or(t,VAt,r.backgroundColor),this.backgroundImage=or(t,eht,r.backgroundImage),this.backgroundOrigin=or(t,tht,r.backgroundOrigin),this.backgroundPosition=or(t,rht,r.backgroundPosition),this.backgroundRepeat=or(t,aht,r.backgroundRepeat),this.backgroundSize=or(t,sht,r.backgroundSize),this.borderTopColor=or(t,oht,r.borderTopColor),this.borderRightColor=or(t,lht,r.borderRightColor),this.borderBottomColor=or(t,cht,r.borderBottomColor),this.borderLeftColor=or(t,uht,r.borderLeftColor),this.borderTopLeftRadius=or(t,dht,r.borderTopLeftRadius),this.borderTopRightRadius=or(t,fht,r.borderTopRightRadius),this.borderBottomRightRadius=or(t,Aht,r.borderBottomRightRadius),this.borderBottomLeftRadius=or(t,hht,r.borderBottomLeftRadius),this.borderTopStyle=or(t,mht,r.borderTopStyle),this.borderRightStyle=or(t,pht,r.borderRightStyle),this.borderBottomStyle=or(t,ght,r.borderBottomStyle),this.borderLeftStyle=or(t,xht,r.borderLeftStyle),this.borderTopWidth=or(t,vht,r.borderTopWidth),this.borderRightWidth=or(t,bht,r.borderRightWidth),this.borderBottomWidth=or(t,yht,r.borderBottomWidth),this.borderLeftWidth=or(t,wht,r.borderLeftWidth),this.boxShadow=or(t,m0t,r.boxShadow),this.color=or(t,Nht,r.color),this.direction=or(t,Cht,r.direction),this.display=or(t,Eht,r.display),this.float=or(t,kht,r.cssFloat),this.fontFamily=or(t,s0t,r.fontFamily),this.fontSize=or(t,i0t,r.fontSize),this.fontStyle=or(t,c0t,r.fontStyle),this.fontVariant=or(t,l0t,r.fontVariant),this.fontWeight=or(t,o0t,r.fontWeight),this.letterSpacing=or(t,Sht,r.letterSpacing),this.lineBreak=or(t,_ht,r.lineBreak),this.lineHeight=or(t,Bht,r.lineHeight),this.listStyleImage=or(t,Tht,r.listStyleImage),this.listStylePosition=or(t,Iht,r.listStylePosition),this.listStyleType=or(t,_P,r.listStyleType),this.marginTop=or(t,Oht,r.marginTop),this.marginRight=or(t,Fht,r.marginRight),this.marginBottom=or(t,Dht,r.marginBottom),this.marginLeft=or(t,Pht,r.marginLeft),this.opacity=or(t,r0t,r.opacity);var i=or(t,Rht,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=or(t,Lht,r.overflowWrap),this.paddingTop=or(t,Mht,r.paddingTop),this.paddingRight=or(t,Uht,r.paddingRight),this.paddingBottom=or(t,Qht,r.paddingBottom),this.paddingLeft=or(t,Hht,r.paddingLeft),this.paintOrder=or(t,p0t,r.paintOrder),this.position=or(t,Vht,r.position),this.textAlign=or(t,zht,r.textAlign),this.textDecorationColor=or(t,a0t,(a=r.textDecorationColor)!==null&&a!==void 0?a:r.color),this.textDecorationLine=or(t,n0t,(n=r.textDecorationLine)!==null&&n!==void 0?n:r.textDecoration),this.textShadow=or(t,$ht,r.textShadow),this.textTransform=or(t,Ght,r.textTransform),this.transform=or(t,qht,r.transform),this.transformOrigin=or(t,Jht,r.transformOrigin),this.visibility=or(t,Zht,r.visibility),this.webkitTextStrokeColor=or(t,g0t,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(t,x0t,r.webkitTextStrokeWidth),this.wordBreak=or(t,e0t,r.wordBreak),this.zIndex=or(t,t0t,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Hm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Fi(this.display,4)||Fi(this.display,33554432)||Fi(this.display,268435456)||Fi(this.display,536870912)||Fi(this.display,67108864)||Fi(this.display,134217728)},e}(),b0t=function(){function e(t,r){this.content=or(t,u0t,r.content),this.quotes=or(t,h0t,r.quotes)}return e}(),wJ=function(){function e(t,r){this.counterIncrement=or(t,d0t,r.counterIncrement),this.counterReset=or(t,f0t,r.counterReset)}return e}(),or=function(e,t,r){var a=new GAe,n=r!==null&&typeof r<"u"?r.toString():t.initialValue;a.write(n);var i=new qAe(a.read());switch(t.type){case 2:var o=i.parseComponentValue();return t.parse(e,En(o)?o.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return s3.parse(e,i.parseComponentValue());case"color":return Qm.parse(e,i.parseComponentValue());case"image":return sU.parse(e,i.parseComponentValue());case"length":var l=i.parseComponentValue();return ip(l)?l:To;case"length-percentage":var c=i.parseComponentValue();return yi(c)?c:To;case"time":return dhe.parse(e,i.parseComponentValue())}break}},y0t="data-html2canvas-debug",w0t=function(e){var t=e.getAttribute(y0t);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},BP=function(e,t){var r=w0t(e);return r===1||t===r},OA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,BP(r,3))debugger;this.styles=new v0t(t,window.getComputedStyle(r,null)),OP(r)&&(this.styles.animationDuration.some(function(a){return a>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=a3(this.context,r),BP(r,4)&&(this.flags|=16)}return e}(),N0t="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",NJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qj=0;Qj<NJ.length;Qj++)M2[NJ.charCodeAt(Qj)]=Qj;var C0t=function(e){var t=e.length*.75,r=e.length,a,n=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(a=0;a<r;a+=4)i=M2[e.charCodeAt(a)],o=M2[e.charCodeAt(a+1)],l=M2[e.charCodeAt(a+2)],c=M2[e.charCodeAt(a+3)],d[n++]=i<<2|o>>4,d[n++]=(o&15)<<4|l>>2,d[n++]=(l&3)<<6|c&63;return u},E0t=function(e){for(var t=e.length,r=[],a=0;a<t;a+=2)r.push(e[a+1]<<8|e[a]);return r},j0t=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return r},Fg=5,iU=11,tO=2,k0t=iU-Fg,fhe=65536>>Fg,S0t=1<<Fg,rO=S0t-1,_0t=1024>>Fg,B0t=fhe+_0t,T0t=B0t,I0t=32,O0t=T0t+I0t,F0t=65536>>iU,D0t=1<<k0t,P0t=D0t-1,CJ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},R0t=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},L0t=function(e,t){var r=C0t(e),a=Array.isArray(r)?j0t(r):new Uint32Array(r),n=Array.isArray(r)?E0t(r):new Uint16Array(r),i=24,o=CJ(n,i/2,a[4]/2),l=a[5]===2?CJ(n,(i+a[4])/2):R0t(a,Math.ceil((i+a[4])/4));return new M0t(a[0],a[1],a[2],a[3],o,l)},M0t=function(){function e(t,r,a,n,i,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=i,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Fg],r=(r<<tO)+(t&rO),this.data[r];if(t<=65535)return r=this.index[fhe+(t-55296>>Fg)],r=(r<<tO)+(t&rO),this.data[r];if(t<this.highStart)return r=O0t-F0t+(t>>iU),r=this.index[r],r+=t>>Fg&P0t,r=this.index[r],r=(r<<tO)+(t&rO),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),EJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U0t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hj=0;Hj<EJ.length;Hj++)U0t[EJ.charCodeAt(Hj)]=Hj;var Q0t=1,aO=2,nO=3,jJ=4,kJ=5,H0t=7,SJ=8,sO=9,iO=10,_J=11,BJ=12,TJ=13,IJ=14,oO=15,z0t=function(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},V0t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var a=[],n=-1,i="";++n<r;){var o=e[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return i},$0t=L0t(N0t),Wu="×",lO="÷",G0t=function(e){return $0t.get(e)},q0t=function(e,t,r){var a=r-2,n=t[a],i=t[r-1],o=t[r];if(i===aO&&o===nO)return Wu;if(i===aO||i===nO||i===jJ||o===aO||o===nO||o===jJ)return lO;if(i===SJ&&[SJ,sO,_J,BJ].indexOf(o)!==-1||(i===_J||i===sO)&&(o===sO||o===iO)||(i===BJ||i===iO)&&o===iO||o===TJ||o===kJ||o===H0t||i===Q0t)return Wu;if(i===TJ&&o===IJ){for(;n===kJ;)n=t[--a];if(n===IJ)return Wu}if(i===oO&&o===oO){for(var l=0;n===oO;)l++,n=t[--a];if(l%2===0)return Wu}return lO},K0t=function(e){var t=z0t(e),r=t.length,a=0,n=0,i=t.map(G0t);return{next:function(){if(a>=r)return{done:!0,value:null};for(var o=Wu;a<r&&(o=q0t(t,i,++a))===Wu;);if(o!==Wu||a===r){var l=V0t.apply(null,t.slice(n,a));return n=a,{value:l,done:!1}}return{done:!0,value:null}}}},W0t=function(e){for(var t=K0t(e),r=[],a;!(a=t.next()).done;)a.value&&r.push(a.value.slice());return r},X0t=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),r.selectNode(a);var n=r.getBoundingClientRect(),i=Math.round(n.height);if(e.body.removeChild(a),i===t)return!0}}return!1},Y0t=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,n=n3(a.data).map(function(c){return Js(c)}),i=0,o={},l=n.every(function(c,u){r.setStart(a,i),r.setEnd(a,i+c.length);var d=r.getBoundingClientRect();i+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},J0t=function(){return typeof new Image().crossOrigin<"u"},Z0t=function(){return typeof new XMLHttpRequest().responseType=="string"},emt=function(e){var t=new Image,r=e.createElement("canvas"),a=r.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},OJ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},tmt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,r,r);var n=new Image,i=t.toDataURL();n.src=i;var o=TP(r,r,0,0,n);return a.fillStyle="red",a.fillRect(0,0,r,r),FJ(o).then(function(l){a.drawImage(l,0,0);var c=a.getImageData(0,0,r,r).data;a.fillStyle="red",a.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=r+"px",OJ(c)?FJ(TP(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return a.drawImage(l,0,0),OJ(a.getImageData(0,0,r,r).data)}).catch(function(){return!1})},TP=function(e,t,r,a,n){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",a.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(n),o},FJ=function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){return t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Eo={get SUPPORT_RANGE_BOUNDS(){var e=X0t(document);return Object.defineProperty(Eo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Eo.SUPPORT_RANGE_BOUNDS&&Y0t(document);return Object.defineProperty(Eo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=emt(document);return Object.defineProperty(Eo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?tmt(document):Promise.resolve(!1);return Object.defineProperty(Eo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=J0t();return Object.defineProperty(Eo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Z0t();return Object.defineProperty(Eo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Eo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Eo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},pw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),rmt=function(e,t,r,a){var n=smt(t,r),i=[],o=0;return n.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Eo.SUPPORT_RANGE_BOUNDS){var c=DJ(a,o,l.length).getClientRects();if(c.length>1){var u=oU(l),d=0;u.forEach(function(h){i.push(new pw(h,s0.fromDOMRectList(e,DJ(a,d+o,h.length).getClientRects()))),d+=h.length})}else i.push(new pw(l,s0.fromDOMRectList(e,c)))}else{var f=a.splitText(l.length);i.push(new pw(l,amt(e,a))),a=f}else Eo.SUPPORT_RANGE_BOUNDS||(a=a.splitText(l.length));o+=l.length}),i},amt=function(e,t){var r=t.ownerDocument;if(r){var a=r.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(a,t);var i=a3(e,a);return a.firstChild&&n.replaceChild(a.firstChild,a),i}}return s0.EMPTY},DJ=function(e,t,r){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var n=a.createRange();return n.setStart(e,t),n.setEnd(e,t+r),n},oU=function(e){if(Eo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return W0t(e)},nmt=function(e,t){if(Eo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(a){return a.segment})}return omt(e,t)},smt=function(e,t){return t.letterSpacing!==0?oU(e):nmt(e,t)},imt=[32,160,4961,65792,65793,4153,4241],omt=function(e,t){for(var r=Fft(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],n,i=function(){if(n.value){var o=n.value.slice(),l=n3(o),c="";l.forEach(function(u){imt.indexOf(u)===-1?c+=Js(u):(c.length&&a.push(c),a.push(Js(u)),c="")}),c.length&&a.push(c)}};!(n=r.next()).done;)i();return a},lmt=function(){function e(t,r,a){this.text=cmt(r.data,a.textTransform),this.textBounds=rmt(t,this.text,a,r)}return e}(),cmt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(umt,dmt);case 2:return e.toUpperCase();default:return e}},umt=/(^|\s|:|-|\(|\))([a-z])/g,dmt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Ahe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.src=a.currentSrc||a.src,n.intrinsicWidth=a.naturalWidth,n.intrinsicHeight=a.naturalHeight,n.context.cache.addImage(n.src),n}return t}(OA),hhe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.canvas=a,n.intrinsicWidth=a.width,n.intrinsicHeight=a.height,n}return t}(OA),mhe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this,i=new XMLSerializer,o=a3(r,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(a)),n.intrinsicWidth=a.width.baseVal.value,n.intrinsicHeight=a.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(OA),phe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.value=a.value,n}return t}(OA),IP=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.start=a.start,n.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,n}return t}(OA),fmt=[{type:15,flags:0,unit:"px",number:3}],Amt=[{type:16,flags:0,number:50}],hmt=function(e){return e.width>e.height?new s0(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new s0(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},mmt=function(e){var t=e.type===pmt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},PS="checkbox",RS="radio",pmt="password",PJ=707406591,lU=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;switch(n.type=a.type.toLowerCase(),n.checked=a.checked,n.value=mmt(a),(n.type===PS||n.type===RS)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=hmt(n.bounds)),n.type){case PS:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=fmt;break;case RS:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Amt;break}return n}return t}(OA),ghe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this,i=a.options[a.selectedIndex||0];return n.value=i&&i.text||"",n}return t}(OA),xhe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.value=a.value,n}return t}(OA),vhe=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;n.src=a.src,n.width=parseInt(a.width,10)||0,n.height=parseInt(a.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){n.tree=yhe(r,a.contentWindow.document.documentElement);var i=a.contentWindow.document.documentElement?hw(r,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Mh.TRANSPARENT,o=a.contentWindow.document.body?hw(r,getComputedStyle(a.contentWindow.document.body).backgroundColor):Mh.TRANSPARENT;n.backgroundColor=Hm(i)?Hm(o)?n.styles.backgroundColor:o:i}}catch{}return n}return t}(OA),gmt=["OL","UL","MENU"],F5=function(e,t,r,a){for(var n=t.firstChild,i=void 0;n;n=i)if(i=n.nextSibling,whe(n)&&n.data.trim().length>0)r.textNodes.push(new lmt(e,n,r.styles));else if(Gv(n))if(jhe(n)&&n.assignedNodes)n.assignedNodes().forEach(function(l){return F5(e,l,r,a)});else{var o=bhe(e,n);o.styles.isVisible()&&(xmt(n,o,a)?o.flags|=4:vmt(o.styles)&&(o.flags|=2),gmt.indexOf(n.tagName)!==-1&&(o.flags|=8),r.elements.push(o),n.slot,n.shadowRoot?F5(e,n.shadowRoot,o,a):!LS(n)&&!Nhe(n)&&!MS(n)&&F5(e,n,o,a))}},bhe=function(e,t){return FP(t)?new Ahe(e,t):Che(t)?new hhe(e,t):Nhe(t)?new mhe(e,t):bmt(t)?new phe(e,t):ymt(t)?new IP(e,t):wmt(t)?new lU(e,t):MS(t)?new ghe(e,t):LS(t)?new xhe(e,t):Ehe(t)?new vhe(e,t):new OA(e,t)},yhe=function(e,t){var r=bhe(e,t);return r.flags|=4,F5(e,t,r,r),r},xmt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||cU(e)&&r.styles.isTransparent()},vmt=function(e){return e.isPositioned()||e.isFloating()},whe=function(e){return e.nodeType===Node.TEXT_NODE},Gv=function(e){return e.nodeType===Node.ELEMENT_NODE},OP=function(e){return Gv(e)&&typeof e.style<"u"&&!D5(e)},D5=function(e){return typeof e.className=="object"},bmt=function(e){return e.tagName==="LI"},ymt=function(e){return e.tagName==="OL"},wmt=function(e){return e.tagName==="INPUT"},Nmt=function(e){return e.tagName==="HTML"},Nhe=function(e){return e.tagName==="svg"},cU=function(e){return e.tagName==="BODY"},Che=function(e){return e.tagName==="CANVAS"},RJ=function(e){return e.tagName==="VIDEO"},FP=function(e){return e.tagName==="IMG"},Ehe=function(e){return e.tagName==="IFRAME"},LJ=function(e){return e.tagName==="STYLE"},Cmt=function(e){return e.tagName==="SCRIPT"},LS=function(e){return e.tagName==="TEXTAREA"},MS=function(e){return e.tagName==="SELECT"},jhe=function(e){return e.tagName==="SLOT"},MJ=function(e){return e.tagName.indexOf("-")>0},Emt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(a){return r.counters[a].pop()})},e.prototype.parse=function(t){var r=this,a=t.counterIncrement,n=t.counterReset,i=!0;a!==null&&a.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return i&&n.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),UJ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},QJ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},jmt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},kmt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},vv=function(e,t,r,a,n,i){return e<t||e>r?gN(e,n,i.length>0):a.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=a.values[c];return o},"")+i},khe=function(e,t,r,a){var n="";do r||e--,n=a(e)+n,e/=t;while(e*t>=t);return n},Ws=function(e,t,r,a,n){var i=r-t+1;return(e<0?"-":"")+(khe(Math.abs(e),i,a,function(o){return Js(Math.floor(o%i)+t)})+n)},Gp=function(e,t,r){r===void 0&&(r=". ");var a=t.length;return khe(Math.abs(e),a,!1,function(n){return t[Math.floor(n%a)]})+r},Iv=1,lm=2,cm=4,U2=8,fh=function(e,t,r,a,n,i){if(e<-9999||e>9999)return gN(e,4,n.length>0);var o=Math.abs(e),l=n;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&Fi(i,Iv)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Fi(i,lm)||u===1&&c===1&&Fi(i,cm)&&e>100||u===1&&c>1&&Fi(i,U2)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?a:"")+l},HJ="十百千萬",zJ="拾佰仟萬",VJ="マイナス",cO="마이너스",gN=function(e,t,r){var a=r?". ":"",n=r?"、":"",i=r?", ":"",o=r?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var l=Ws(e,48,57,!0,a);return l.length<4?"0"+l:l;case 4:return Gp(e,"〇一二三四五六七八九",n);case 6:return vv(e,1,3999,UJ,3,a).toLowerCase();case 7:return vv(e,1,3999,UJ,3,a);case 8:return Ws(e,945,969,!1,a);case 9:return Ws(e,97,122,!1,a);case 10:return Ws(e,65,90,!1,a);case 11:return Ws(e,1632,1641,!0,a);case 12:case 49:return vv(e,1,9999,QJ,3,a);case 35:return vv(e,1,9999,QJ,3,a).toLowerCase();case 13:return Ws(e,2534,2543,!0,a);case 14:case 30:return Ws(e,6112,6121,!0,a);case 15:return Gp(e,"子丑寅卯辰巳午未申酉戌亥",n);case 16:return Gp(e,"甲乙丙丁戊己庚辛壬癸",n);case 17:case 48:return fh(e,"零一二三四五六七八九",HJ,"負",n,lm|cm|U2);case 47:return fh(e,"零壹貳參肆伍陸柒捌玖",zJ,"負",n,Iv|lm|cm|U2);case 42:return fh(e,"零一二三四五六七八九",HJ,"负",n,lm|cm|U2);case 41:return fh(e,"零壹贰叁肆伍陆柒捌玖",zJ,"负",n,Iv|lm|cm|U2);case 26:return fh(e,"〇一二三四五六七八九","十百千万",VJ,n,0);case 25:return fh(e,"零壱弐参四伍六七八九","拾百千万",VJ,n,Iv|lm|cm);case 31:return fh(e,"영일이삼사오육칠팔구","십백천만",cO,i,Iv|lm|cm);case 33:return fh(e,"零一二三四五六七八九","十百千萬",cO,i,0);case 32:return fh(e,"零壹貳參四五六七八九","拾百千",cO,i,Iv|lm|cm);case 18:return Ws(e,2406,2415,!0,a);case 20:return vv(e,1,19999,kmt,3,a);case 21:return Ws(e,2790,2799,!0,a);case 22:return Ws(e,2662,2671,!0,a);case 22:return vv(e,1,10999,jmt,3,a);case 23:return Gp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Gp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ws(e,3302,3311,!0,a);case 28:return Gp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",n);case 29:return Gp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",n);case 34:return Ws(e,3792,3801,!0,a);case 37:return Ws(e,6160,6169,!0,a);case 38:return Ws(e,4160,4169,!0,a);case 39:return Ws(e,2918,2927,!0,a);case 40:return Ws(e,1776,1785,!0,a);case 43:return Ws(e,3046,3055,!0,a);case 44:return Ws(e,3174,3183,!0,a);case 45:return Ws(e,3664,3673,!0,a);case 46:return Ws(e,3872,3881,!0,a);case 3:default:return Ws(e,48,57,!0,a)}},She="data-html2canvas-ignore",$J=function(){function e(t,r,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=r,this.counters=new Emt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var a=this,n=Smt(t,r);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=n.contentWindow,c=l.document,u=Tmt(n).then(function(){return kl(a,void 0,void 0,function(){var d,f;return Zo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Dmt),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Bmt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write(Omt(document.doctype)+"<html></html>"),Fmt(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(BP(t,2))debugger;if(Che(t))return this.createCanvasClone(t);if(RJ(t))return this.createVideoClone(t);if(LJ(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return FP(r)&&(FP(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),MJ(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return uO(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var a=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),n=t.cloneNode(!1);return n.textContent=a,n}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var i=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var a=r.getContext("2d");try{return a&&(a.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||a.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},e.prototype.appendChildNode=function(t,r,a){(!Gv(r)||!Cmt(r)&&!r.hasAttribute(She)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Gv(r)||!LJ(r))&&t.appendChild(this.cloneNode(r,a))},e.prototype.cloneChildNodes=function(t,r,a){for(var n=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(Gv(i)&&jhe(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return n.appendChildNode(r,l,a)})}else this.appendChildNode(r,i,a)},e.prototype.cloneNode=function(t,r){if(whe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&Gv(t)&&(OP(t)||D5(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var i=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),l=a.getComputedStyle(t,":after");this.referenceElement===t&&OP(n)&&(this.clonedReferenceElement=n),cU(n)&&Lmt(n);var c=this.counters.parse(new wJ(this.context,i)),u=this.resolvePseudoContent(t,n,o,gw.BEFORE);MJ(t)&&(r=!0),RJ(t)||this.cloneChildNodes(t,n,r),u&&n.insertBefore(u,n.firstChild);var d=this.resolvePseudoContent(t,n,l,gw.AFTER);return d&&n.appendChild(d),this.counters.pop(c),(i&&(this.options.copyStyles||D5(t))&&!Ehe(t)||r)&&uO(i,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(LS(t)||MS(t))&&(LS(n)||MS(n))&&(n.value=t.value),n}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,a,n){var i=this;if(a){var o=a.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new wJ(this.context,a));var c=new b0t(this.context,a),u=l.createElement("html2canvaspseudoelement");uO(a,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(En);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(l1),x=g[0],v=g[1];if(x&&En(x)){var y=i.counters.getCounterValue(x.value),N=v&&En(v)?_P.parse(i.context,v.value):3;u.appendChild(l.createTextNode(gN(y,N,!1)))}}else if(f.name==="counters"){var C=f.values.filter(l1),x=C[0],T=C[1],v=C[2];if(x&&En(x)){var _=i.counters.getCounterValues(x.value),O=v&&En(v)?_P.parse(i.context,v.value):3,j=T&&T.type===0?T.value:"",S=_.map(function(D){return gN(D,O,!1)}).join(j);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(yJ(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(yJ(c.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=DP+" "+PP;var d=n===gw.BEFORE?" "+DP:" "+PP;return D5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),gw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(gw||(gw={}));var Smt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(She,"true"),e.body.appendChild(r),r},_mt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Bmt=function(e){return Promise.all([].slice.call(e.images,0).map(_mt))},Tmt=function(e){return new Promise(function(t,r){var a=e.contentWindow;if(!a)return r("No window assigned for iframe");var n=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var i=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(i),t(e))},50)}})},Imt=["all","d","content"],uO=function(e,t){for(var r=e.length-1;r>=0;r--){var a=e.item(r);Imt.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},Omt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Fmt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Dmt=function(e){var t=e[0],r=e[1],a=e[2];t.scrollLeft=r,t.scrollTop=a},Pmt=":before",Rmt=":after",DP="___html2canvas___pseudoelement_before",PP="___html2canvas___pseudoelement_after",GJ=`{
    content: "" !important;
    display: none !important;
}`,Lmt=function(e){Mmt(e,"."+DP+Pmt+GJ+`
         .`+PP+Rmt+GJ)},Mmt=function(e,t){var r=e.ownerDocument;if(r){var a=r.createElement("style");a.textContent=t,e.appendChild(a)}},_he=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Umt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(fO(t)||Vmt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return kl(this,void 0,void 0,function(){var r,a,n,i,o=this;return Zo(this,function(l){switch(l.label){case 0:return r=_he.isSameOrigin(t),a=!dO(t)&&this._options.useCORS===!0&&Eo.SUPPORT_CORS_IMAGES&&!r,n=!dO(t)&&!r&&!fO(t)&&typeof this._options.proxy=="string"&&Eo.SUPPORT_CORS_XHR&&!a,!r&&this._options.allowTaint===!1&&!dO(t)&&!fO(t)&&!n&&!a?[2]:(i=t,n?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,($mt(i)||a)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(i,o){var l=Eo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(h){return o(h)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=o;var u=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+n)}}c.send()})},e}(),Qmt=/^data:image\/svg\+xml/i,Hmt=/^data:image\/.*;base64,/i,zmt=/^data:image\/.*/i,Vmt=function(e){return Eo.SUPPORT_SVG_DRAWING||!Gmt(e)},dO=function(e){return zmt.test(e)},$mt=function(e){return Hmt.test(e)},fO=function(e){return e.substr(0,4)==="blob"},Gmt=function(e){return e.substr(-3).toLowerCase()==="svg"||Qmt.test(e)},nr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),bv=function(e,t,r){return new nr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},zj=function(){function e(t,r,a,n){this.type=1,this.start=t,this.startControl=r,this.endControl=a,this.end=n}return e.prototype.subdivide=function(t,r){var a=bv(this.start,this.startControl,t),n=bv(this.startControl,this.endControl,t),i=bv(this.endControl,this.end,t),o=bv(a,n,t),l=bv(n,i,t),c=bv(o,l,t);return r?new e(this.start,a,o,c):new e(c,l,i,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Ju=function(e){return e.type===1},qmt=function(){function e(t){var r=t.styles,a=t.bounds,n=L2(r.borderTopLeftRadius,a.width,a.height),i=n[0],o=n[1],l=L2(r.borderTopRightRadius,a.width,a.height),c=l[0],u=l[1],d=L2(r.borderBottomRightRadius,a.width,a.height),f=d[0],h=d[1],m=L2(r.borderBottomLeftRadius,a.width,a.height),g=m[0],x=m[1],v=[];v.push((i+c)/a.width),v.push((g+f)/a.width),v.push((o+x)/a.height),v.push((u+h)/a.height);var y=Math.max.apply(Math,v);y>1&&(i/=y,o/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var N=a.width-c,C=a.height-h,T=a.width-f,_=a.height-x,O=r.borderTopWidth,j=r.borderRightWidth,S=r.borderBottomWidth,B=r.borderLeftWidth,L=Qn(r.paddingTop,t.bounds.width),D=Qn(r.paddingRight,t.bounds.width),k=Qn(r.paddingBottom,t.bounds.width),R=Qn(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?ts(a.left+B/3,a.top+O/3,i-B/3,o-O/3,nn.TOP_LEFT):new nr(a.left+B/3,a.top+O/3),this.topRightBorderDoubleOuterBox=i>0||o>0?ts(a.left+N,a.top+O/3,c-j/3,u-O/3,nn.TOP_RIGHT):new nr(a.left+a.width-j/3,a.top+O/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?ts(a.left+T,a.top+C,f-j/3,h-S/3,nn.BOTTOM_RIGHT):new nr(a.left+a.width-j/3,a.top+a.height-S/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?ts(a.left+B/3,a.top+_,g-B/3,x-S/3,nn.BOTTOM_LEFT):new nr(a.left+B/3,a.top+a.height-S/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?ts(a.left+B*2/3,a.top+O*2/3,i-B*2/3,o-O*2/3,nn.TOP_LEFT):new nr(a.left+B*2/3,a.top+O*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?ts(a.left+N,a.top+O*2/3,c-j*2/3,u-O*2/3,nn.TOP_RIGHT):new nr(a.left+a.width-j*2/3,a.top+O*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?ts(a.left+T,a.top+C,f-j*2/3,h-S*2/3,nn.BOTTOM_RIGHT):new nr(a.left+a.width-j*2/3,a.top+a.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?ts(a.left+B*2/3,a.top+_,g-B*2/3,x-S*2/3,nn.BOTTOM_LEFT):new nr(a.left+B*2/3,a.top+a.height-S*2/3),this.topLeftBorderStroke=i>0||o>0?ts(a.left+B/2,a.top+O/2,i-B/2,o-O/2,nn.TOP_LEFT):new nr(a.left+B/2,a.top+O/2),this.topRightBorderStroke=i>0||o>0?ts(a.left+N,a.top+O/2,c-j/2,u-O/2,nn.TOP_RIGHT):new nr(a.left+a.width-j/2,a.top+O/2),this.bottomRightBorderStroke=f>0||h>0?ts(a.left+T,a.top+C,f-j/2,h-S/2,nn.BOTTOM_RIGHT):new nr(a.left+a.width-j/2,a.top+a.height-S/2),this.bottomLeftBorderStroke=g>0||x>0?ts(a.left+B/2,a.top+_,g-B/2,x-S/2,nn.BOTTOM_LEFT):new nr(a.left+B/2,a.top+a.height-S/2),this.topLeftBorderBox=i>0||o>0?ts(a.left,a.top,i,o,nn.TOP_LEFT):new nr(a.left,a.top),this.topRightBorderBox=c>0||u>0?ts(a.left+N,a.top,c,u,nn.TOP_RIGHT):new nr(a.left+a.width,a.top),this.bottomRightBorderBox=f>0||h>0?ts(a.left+T,a.top+C,f,h,nn.BOTTOM_RIGHT):new nr(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=g>0||x>0?ts(a.left,a.top+_,g,x,nn.BOTTOM_LEFT):new nr(a.left,a.top+a.height),this.topLeftPaddingBox=i>0||o>0?ts(a.left+B,a.top+O,Math.max(0,i-B),Math.max(0,o-O),nn.TOP_LEFT):new nr(a.left+B,a.top+O),this.topRightPaddingBox=c>0||u>0?ts(a.left+Math.min(N,a.width-j),a.top+O,N>a.width+j?0:Math.max(0,c-j),Math.max(0,u-O),nn.TOP_RIGHT):new nr(a.left+a.width-j,a.top+O),this.bottomRightPaddingBox=f>0||h>0?ts(a.left+Math.min(T,a.width-B),a.top+Math.min(C,a.height-S),Math.max(0,f-j),Math.max(0,h-S),nn.BOTTOM_RIGHT):new nr(a.left+a.width-j,a.top+a.height-S),this.bottomLeftPaddingBox=g>0||x>0?ts(a.left+B,a.top+Math.min(_,a.height-S),Math.max(0,g-B),Math.max(0,x-S),nn.BOTTOM_LEFT):new nr(a.left+B,a.top+a.height-S),this.topLeftContentBox=i>0||o>0?ts(a.left+B+R,a.top+O+L,Math.max(0,i-(B+R)),Math.max(0,o-(O+L)),nn.TOP_LEFT):new nr(a.left+B+R,a.top+O+L),this.topRightContentBox=c>0||u>0?ts(a.left+Math.min(N,a.width+B+R),a.top+O+L,N>a.width+B+R?0:c-B+R,u-(O+L),nn.TOP_RIGHT):new nr(a.left+a.width-(j+D),a.top+O+L),this.bottomRightContentBox=f>0||h>0?ts(a.left+Math.min(T,a.width-(B+R)),a.top+Math.min(C,a.height+O+L),Math.max(0,f-(j+D)),h-(S+k),nn.BOTTOM_RIGHT):new nr(a.left+a.width-(j+D),a.top+a.height-(S+k)),this.bottomLeftContentBox=g>0||x>0?ts(a.left+B+R,a.top+_,Math.max(0,g-(B+R)),x-(S+k),nn.BOTTOM_LEFT):new nr(a.left+B+R,a.top+a.height-(S+k))}return e}(),nn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(nn||(nn={}));var ts=function(e,t,r,a,n){var i=4*((Math.sqrt(2)-1)/3),o=r*i,l=a*i,c=e+r,u=t+a;switch(n){case nn.TOP_LEFT:return new zj(new nr(e,u),new nr(e,u-l),new nr(c-o,t),new nr(c,t));case nn.TOP_RIGHT:return new zj(new nr(e,t),new nr(e+o,t),new nr(c,u-l),new nr(c,u));case nn.BOTTOM_RIGHT:return new zj(new nr(c,t),new nr(c,t+l),new nr(e+o,u),new nr(e,u));case nn.BOTTOM_LEFT:default:return new zj(new nr(c,u),new nr(c-o,u),new nr(e,t+l),new nr(e,t))}},US=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Kmt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},QS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Wmt=function(){function e(t,r,a){this.offsetX=t,this.offsetY=r,this.matrix=a,this.type=0,this.target=6}return e}(),Vj=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),Xmt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Ymt=function(e){return e.type===0},Bhe=function(e){return e.type===1},Jmt=function(e){return e.type===2},qJ=function(e,t){return e.length===t.length?e.some(function(r,a){return r===t[a]}):!1},Zmt=function(e,t,r,a,n){return e.map(function(i,o){switch(o){case 0:return i.add(t,r);case 1:return i.add(t+a,r);case 2:return i.add(t+a,r+n);case 3:return i.add(t,r+n)}return i})},The=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Ihe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new qmt(this.container),this.container.styles.opacity<1&&this.effects.push(new Xmt(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Wmt(a,n,i))}if(this.container.styles.overflowX!==0){var o=US(this.curves),l=QS(this.curves);qJ(o,l)?this.effects.push(new Vj(o,6)):(this.effects.push(new Vj(o,2)),this.effects.push(new Vj(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,n=this.effects.slice(0);a;){var i=a.effects.filter(function(c){return!Bhe(c)});if(r||a.container.styles.position!==0||!a.parent){if(n.unshift.apply(n,i),r=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=US(a.curves),l=QS(a.curves);qJ(o,l)||n.unshift(new Vj(l,6))}}else n.unshift.apply(n,i);a=a.parent}return n.filter(function(c){return Fi(c.target,t)})},e}(),RP=function(e,t,r,a){e.container.elements.forEach(function(n){var i=Fi(n.flags,4),o=Fi(n.flags,2),l=new Ihe(n,e);Fi(n.styles.display,2048)&&a.push(l);var c=Fi(n.flags,8)?[]:a;if(i||o){var u=i||n.styles.isPositioned()?r:t,d=new The(l);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var f=n.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else n.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);RP(l,d,i?d:r,c)}else n.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),RP(l,t,r,c);Fi(n.flags,8)&&Ohe(n,c)})},Ohe=function(e,t){for(var r=e instanceof IP?e.start:1,a=e instanceof IP?e.reversed:!1,n=0;n<t.length;n++){var i=t[n];i.container instanceof phe&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=gN(r,i.container.styles.listStyleType,!0),r+=a?-1:1}},ept=function(e){var t=new Ihe(e,null),r=new The(t),a=[];return RP(t,r,r,a),Ohe(t.container,a),r},KJ=function(e,t){switch(t){case 0:return nd(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return nd(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return nd(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return nd(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},tpt=function(e,t){switch(t){case 0:return nd(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return nd(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return nd(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return nd(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},rpt=function(e,t){switch(t){case 0:return nd(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return nd(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return nd(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return nd(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},apt=function(e,t){switch(t){case 0:return $j(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return $j(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return $j(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return $j(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},$j=function(e,t){var r=[];return Ju(e)?r.push(e.subdivide(.5,!1)):r.push(e),Ju(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},nd=function(e,t,r,a){var n=[];return Ju(e)?n.push(e.subdivide(.5,!1)):n.push(e),Ju(r)?n.push(r.subdivide(.5,!0)):n.push(r),Ju(a)?n.push(a.subdivide(.5,!0).reverse()):n.push(a),Ju(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},Fhe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},HS=function(e){var t=e.styles,r=e.bounds,a=Qn(t.paddingLeft,r.width),n=Qn(t.paddingRight,r.width),i=Qn(t.paddingTop,r.width),o=Qn(t.paddingBottom,r.width);return r.add(a+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+n),-(t.borderTopWidth+t.borderBottomWidth+i+o))},npt=function(e,t){return e===0?t.bounds:e===2?HS(t):Fhe(t)},spt=function(e,t){return e===0?t.bounds:e===2?HS(t):Fhe(t)},AO=function(e,t,r){var a=npt(Ov(e.styles.backgroundOrigin,t),e),n=spt(Ov(e.styles.backgroundClip,t),e),i=ipt(Ov(e.styles.backgroundSize,t),r,a),o=i[0],l=i[1],c=L2(Ov(e.styles.backgroundPosition,t),a.width-o,a.height-l),u=opt(Ov(e.styles.backgroundRepeat,t),c,i,a,n),d=Math.round(a.left+c[0]),f=Math.round(a.top+c[1]);return[u,d,f,o,l]},yv=function(e){return En(e)&&e.value===bb.AUTO},Gj=function(e){return typeof e=="number"},ipt=function(e,t,r){var a=t[0],n=t[1],i=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(yi(o)&&l&&yi(l))return[Qn(o,r.width),Qn(l,r.height)];var c=Gj(i);if(En(o)&&(o.value===bb.CONTAIN||o.value===bb.COVER)){if(Gj(i)){var u=r.width/r.height;return u<i!=(o.value===bb.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var d=Gj(a),f=Gj(n),h=d||f;if(yv(o)&&(!l||yv(l))){if(d&&f)return[a,n];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?a:n*i,g=f?n:a/i;return[m,g]}var x=d?a:r.width,v=f?n:r.height;return[x,v]}if(c){var y=0,N=0;return yi(o)?y=Qn(o,r.width):yi(l)&&(N=Qn(l,r.height)),yv(o)?y=N*i:(!l||yv(l))&&(N=y/i),[y,N]}var C=null,T=null;if(yi(o)?C=Qn(o,r.width):l&&yi(l)&&(T=Qn(l,r.height)),C!==null&&(!l||yv(l))&&(T=d&&f?C/a*n:r.height),T!==null&&yv(o)&&(C=d&&f?T/n*a:r.width),C!==null&&T!==null)return[C,T];throw new Error("Unable to calculate background-size for element")},Ov=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},opt=function(e,t,r,a,n){var i=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new nr(Math.round(a.left),Math.round(a.top+o)),new nr(Math.round(a.left+a.width),Math.round(a.top+o)),new nr(Math.round(a.left+a.width),Math.round(c+a.top+o)),new nr(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new nr(Math.round(a.left+i),Math.round(a.top)),new nr(Math.round(a.left+i+l),Math.round(a.top)),new nr(Math.round(a.left+i+l),Math.round(a.height+a.top)),new nr(Math.round(a.left+i),Math.round(a.height+a.top))];case 1:return[new nr(Math.round(a.left+i),Math.round(a.top+o)),new nr(Math.round(a.left+i+l),Math.round(a.top+o)),new nr(Math.round(a.left+i+l),Math.round(a.top+o+c)),new nr(Math.round(a.left+i),Math.round(a.top+o+c))];default:return[new nr(Math.round(n.left),Math.round(n.top)),new nr(Math.round(n.left+n.width),Math.round(n.top)),new nr(Math.round(n.left+n.width),Math.round(n.height+n.top)),new nr(Math.round(n.left),Math.round(n.height+n.top))]}},lpt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",WJ="Hidden Text",cpt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var a=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),n.src=lpt,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(WJ)),a.appendChild(i),a.appendChild(n);var l=n.offsetTop-i.offsetTop+2;a.removeChild(i),a.appendChild(this._document.createTextNode(WJ)),a.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var a=t+" "+r;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,r)),this._data[a]},e}(),Dhe=function(){function e(t,r){this.context=t,this.options=r}return e}(),upt=1e4,dpt=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n._activeEffects=[],n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),a.canvas||(n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px"),n.fontMetrics=new cpt(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),n}return t.prototype.applyEffects=function(r){for(var a=this;this._activeEffects.length;)this.popEffect();r.forEach(function(n){return a.applyEffect(n)})},t.prototype.applyEffect=function(r){this.ctx.save(),Jmt(r)&&(this.ctx.globalAlpha=r.opacity),Ymt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Bhe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return kl(this,void 0,void 0,function(){var a;return Zo(this,function(n){switch(n.label){case 0:return a=r.element.container.styles,a.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return kl(this,void 0,void 0,function(){return Zo(this,function(a){switch(a.label){case 0:if(Fi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,a,n){var i=this;if(a===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+n);else{var o=oU(r.text);o.reduce(function(l,c){return i.ctx.fillText(c,l,r.bounds.top+n),l+i.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var a=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),n=ppt(r.fontFamily).join(", "),i=pC(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,a,r.fontWeight,i,n].join(" "),n,i]},t.prototype.renderTextNode=function(r,a){return kl(this,void 0,void 0,function(){var n,i,o,l,c,u,d,f,h=this;return Zo(this,function(m){return n=this.createFontStyle(a),i=n[0],o=n[1],l=n[2],this.ctx.font=i,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=a.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Zi(a.color),h.renderTextWithLetterSpacing(g,a.letterSpacing,u);var v=a.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Zi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,a.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),a.textDecorationLine.length&&(h.ctx.fillStyle=Zi(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Zi(a.webkitTextStrokeColor),h.ctx.lineWidth=a.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,a,n){if(n&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=HS(r),o=QS(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return kl(this,void 0,void 0,function(){var a,n,i,o,l,c,N,N,u,d,f,h,T,m,g,_,x,v,y,N,C,T,_;return Zo(this,function(O){switch(O.label){case 0:this.applyEffects(r.getEffects(4)),a=r.container,n=r.curves,i=a.styles,o=0,l=a.textNodes,O.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:O.sent(),O.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof Ahe))return[3,8];O.label=5;case 5:return O.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return N=O.sent(),this.renderReplacedElement(a,n,N),[3,8];case 7:return O.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof hhe&&this.renderReplacedElement(a,n,a.canvas),!(a instanceof mhe))return[3,12];O.label=9;case 9:return O.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return N=O.sent(),this.renderReplacedElement(a,n,N),[3,12];case 11:return O.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof vhe&&a.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,u.render(a.tree)]):[3,14];case 13:d=O.sent(),a.width&&a.height&&this.ctx.drawImage(d,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),O.label=14;case 14:if(a instanceof lU&&(f=Math.min(a.bounds.width,a.bounds.height),a.type===PS?a.checked&&(this.ctx.save(),this.path([new nr(a.bounds.left+f*.39363,a.bounds.top+f*.79),new nr(a.bounds.left+f*.16,a.bounds.top+f*.5549),new nr(a.bounds.left+f*.27347,a.bounds.top+f*.44071),new nr(a.bounds.left+f*.39694,a.bounds.top+f*.5649),new nr(a.bounds.left+f*.72983,a.bounds.top+f*.23),new nr(a.bounds.left+f*.84,a.bounds.top+f*.34085),new nr(a.bounds.left+f*.39363,a.bounds.top+f*.79)]),this.ctx.fillStyle=Zi(PJ),this.ctx.fill(),this.ctx.restore()):a.type===RS&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+f/2,a.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Zi(PJ),this.ctx.fill(),this.ctx.restore())),fpt(a)&&a.value.length){switch(h=this.createFontStyle(i),T=h[0],m=h[1],g=this.fontMetrics.getMetrics(T,m).baseline,this.ctx.font=T,this.ctx.fillStyle=Zi(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=hpt(a.styles.textAlign),_=HS(a),x=0,a.styles.textAlign){case 1:x+=_.width/2;break;case 2:x+=_.width;break}v=_.add(x,0,0,-_.height/2+1),this.ctx.save(),this.path([new nr(_.left,_.top),new nr(_.left+_.width,_.top),new nr(_.left+_.width,_.top+_.height),new nr(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new pw(a.value,v),i.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Fi(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(y=a.styles.listStyleImage,y.type!==0)return[3,18];N=void 0,C=y.url,O.label=15;case 15:return O.trys.push([15,17,,18]),[4,this.context.cache.match(C)];case 16:return N=O.sent(),this.ctx.drawImage(N,a.bounds.left-(N.width+10),a.bounds.top),[3,18];case 17:return O.sent(),this.context.logger.error("Error loading list-style-image "+C),[3,18];case 18:return[3,20];case 19:r.listValue&&a.styles.listStyleType!==-1&&(T=this.createFontStyle(i)[0],this.ctx.font=T,this.ctx.fillStyle=Zi(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new s0(a.bounds.left,a.bounds.top+Qn(a.styles.paddingTop,a.bounds.width),a.bounds.width,vJ(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new pw(r.listValue,_),i.letterSpacing,vJ(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),O.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return kl(this,void 0,void 0,function(){var a,n,y,i,o,y,l,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return Zo(this,function(N){switch(N.label){case 0:if(Fi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:N.sent(),a=0,n=r.negativeZIndex,N.label=2;case 2:return a<n.length?(y=n[a],[4,this.renderStack(y)]):[3,5];case 3:N.sent(),N.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:N.sent(),i=0,o=r.nonInlineLevel,N.label=7;case 7:return i<o.length?(y=o[i],[4,this.renderNode(y)]):[3,10];case 8:N.sent(),N.label=9;case 9:return i++,[3,7];case 10:l=0,c=r.nonPositionedFloats,N.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:N.sent(),N.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,N.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:N.sent(),N.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,N.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:N.sent(),N.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,N.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:N.sent(),N.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,N.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:N.sent(),N.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var a=this;r.forEach(function(n,i){var o=Ju(n)?n.start:n;i===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),Ju(n)&&a.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(r,a,n,i){this.path(r),this.ctx.fillStyle=a,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},t.prototype.resizeImage=function(r,a,n){var i;if(r.width===a&&r.height===n)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,a),l.height=Math.max(1,n);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,a,n),l},t.prototype.renderBackgroundImage=function(r){return kl(this,void 0,void 0,function(){var a,n,i,o,l,c;return Zo(this,function(u){switch(u.label){case 0:a=r.styles.backgroundImage.length-1,n=function(d){var f,h,m,L,Q,V,R,U,S,g,L,Q,V,R,U,x,v,y,N,C,T,_,O,j,S,B,L,D,k,R,U,H,Q,V,G,J,W,Z,M,F,X,Y;return Zo(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,i.context.cache.match(h)];case 2:return f=ae.sent(),[3,4];case 3:return ae.sent(),i.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=AO(r,a,[f.width,f.height,f.width/f.height]),L=m[0],Q=m[1],V=m[2],R=m[3],U=m[4],S=i.ctx.createPattern(i.resizeImage(f,R,U),"repeat"),i.renderRepeat(L,S,Q,V)),[3,6];case 5:YAt(d)?(g=AO(r,a,[null,null,null]),L=g[0],Q=g[1],V=g[2],R=g[3],U=g[4],x=GAt(d.angle,R,U),v=x[0],y=x[1],N=x[2],C=x[3],T=x[4],_=document.createElement("canvas"),_.width=R,_.height=U,O=_.getContext("2d"),j=O.createLinearGradient(y,C,N,T),gJ(d.stops,v).forEach(function(le){return j.addColorStop(le.stop,Zi(le.color))}),O.fillStyle=j,O.fillRect(0,0,R,U),R>0&&U>0&&(S=i.ctx.createPattern(_,"repeat"),i.renderRepeat(L,S,Q,V))):JAt(d)&&(B=AO(r,a,[null,null,null]),L=B[0],D=B[1],k=B[2],R=B[3],U=B[4],H=d.position.length===0?[nU]:d.position,Q=Qn(H[0],R),V=Qn(H[H.length-1],U),G=qAt(d,Q,V,R,U),J=G[0],W=G[1],J>0&&W>0&&(Z=i.ctx.createRadialGradient(D+Q,k+V,0,D+Q,k+V,J),gJ(d.stops,J*2).forEach(function(le){return Z.addColorStop(le.stop,Zi(le.color))}),i.path(L),i.ctx.fillStyle=Z,J!==W?(M=r.bounds.left+.5*r.bounds.width,F=r.bounds.top+.5*r.bounds.height,X=W/J,Y=1/X,i.ctx.save(),i.ctx.translate(M,F),i.ctx.transform(1,0,0,X,0,0),i.ctx.translate(-M,-F),i.ctx.fillRect(D,Y*(k-F)+F,R,U*Y),i.ctx.restore()):i.ctx.fill())),ae.label=6;case 6:return a--,[2]}})},i=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,n(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,a,n){return kl(this,void 0,void 0,function(){return Zo(this,function(i){return this.path(KJ(n,a)),this.ctx.fillStyle=Zi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,a,n,i){return kl(this,void 0,void 0,function(){var o,l;return Zo(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(r,n,i)]:[3,2];case 1:return c.sent(),[2];case 2:return o=tpt(i,n),this.path(o),this.ctx.fillStyle=Zi(r),this.ctx.fill(),l=rpt(i,n),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return kl(this,void 0,void 0,function(){var a,n,i,o,l,c,u,d,f=this;return Zo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),a=r.container.styles,n=!Hm(a.backgroundColor)||a.backgroundImage.length,i=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=Apt(Ov(a.backgroundClip,0),r.curves),n||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Hm(a.backgroundColor)||(this.ctx.fillStyle=Zi(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=US(r.curves),x=m.inset?0:upt,v=Zmt(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Zi(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Zi(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=i,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!Hm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,a,n,i,o){return kl(this,void 0,void 0,function(){var l,c,u,d,f,h,m,g,x,v,y,N,C,T,_,O,_,O;return Zo(this,function(j){return this.ctx.save(),l=apt(i,n),c=KJ(i,n),o===2&&(this.path(c),this.ctx.clip()),Ju(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Ju(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),n===0||n===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=a<3?a*3:a*2,x=a<3?a*2:a,o===3&&(g=a,x=a),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(N=Math.floor((m+x)/(g+x)),C=(m-N*g)/(N-1),T=(m-(N+1)*g)/N,x=T<=0||Math.abs(x-C)<Math.abs(x-T)?C:T),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Zi(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ju(c[0])&&(_=c[3],O=c[0],this.ctx.beginPath(),this.formatPath([new nr(_.end.x,_.end.y),new nr(O.start.x,O.start.y)]),this.ctx.stroke()),Ju(c[1])&&(_=c[1],O=c[2],this.ctx.beginPath(),this.formatPath([new nr(_.end.x,_.end.y),new nr(O.start.x,O.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return kl(this,void 0,void 0,function(){var a;return Zo(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Zi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=ept(r),[4,this.renderStack(a)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Dhe),fpt=function(e){return e instanceof xhe||e instanceof ghe?!0:e instanceof lU&&e.type!==RS&&e.type!==PS},Apt=function(e,t){switch(e){case 0:return US(t);case 2:return Kmt(t);case 1:default:return QS(t)}},hpt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},mpt=["-apple-system","system-ui"],ppt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return mpt.indexOf(t)===-1}):e},gpt=function(e){pf(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=a,n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),n}return t.prototype.render=function(r){return kl(this,void 0,void 0,function(){var a,n;return Zo(this,function(i){switch(i.label){case 0:return a=TP(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,xpt(a)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Zi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Dhe),xpt=function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vpt=function(){function e(t){var r=t.id,a=t.enabled;this.id=r,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Cj([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Cj([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Cj([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Cj([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),bpt=function(){function e(t,r){var a;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new vpt({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new Umt(this,t)}return e.instanceCount=1,e}(),LP=function(e,t){return t===void 0&&(t={}),ypt(e,t)};typeof window<"u"&&_he.setContext(window);var ypt=function(e,t){return kl(void 0,void 0,void 0,function(){var r,a,n,i,o,l,c,u,d,f,h,m,g,x,v,y,N,C,T,_,j,O,j,S,B,L,D,k,R,U,H,Q,V,G,J,W,Z,M,F,X;return Zo(this,function(Y){switch(Y.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(a=r.defaultView,!a)throw new Error("Document is not attached to a Window");return n={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},i=pP({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},n),o={windowWidth:(k=t.windowWidth)!==null&&k!==void 0?k:a.innerWidth,windowHeight:(R=t.windowHeight)!==null&&R!==void 0?R:a.innerHeight,scrollX:(U=t.scrollX)!==null&&U!==void 0?U:a.pageXOffset,scrollY:(H=t.scrollY)!==null&&H!==void 0?H:a.pageYOffset},l=new s0(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new bpt(i,l),u=(Q=t.foreignObjectRendering)!==null&&Q!==void 0?Q:!1,d={allowTaint:(V=t.allowTaint)!==null&&V!==void 0?V:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new $J(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=Y.sent(),g=cU(h)||Nmt(h)?Zdt(h.ownerDocument):a3(c,h),x=g.width,v=g.height,y=g.left,N=g.top,C=wpt(c,h,t.backgroundColor),T={canvas:t.canvas,backgroundColor:C,scale:(J=(G=t.scale)!==null&&G!==void 0?G:a.devicePixelRatio)!==null&&J!==void 0?J:1,x:((W=t.x)!==null&&W!==void 0?W:0)+y,y:((Z=t.y)!==null&&Z!==void 0?Z:0)+N,width:(M=t.width)!==null&&M!==void 0?M:Math.ceil(x),height:(F=t.height)!==null&&F!==void 0?F:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),j=new gpt(c,T),[4,j.render(h)]):[3,3];case 2:return _=Y.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+N+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),O=yhe(c,h),C===O.styles.backgroundColor&&(O.styles.backgroundColor=Mh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),j=new dpt(c,T),[4,j.render(O)];case 4:_=Y.sent(),Y.label=5;case 5:return(!((X=t.removeContainer)!==null&&X!==void 0)||X)&&($J.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,_]}})})},wpt=function(e,t,r){var a=t.ownerDocument,n=a.documentElement?hw(e,getComputedStyle(a.documentElement).backgroundColor):Mh.TRANSPARENT,i=a.body?hw(e,getComputedStyle(a.body).backgroundColor):Mh.TRANSPARENT,o=typeof r=="string"?hw(e,r):r===null?Mh.TRANSPARENT:4294967295;return t===a.documentElement?Hm(n)?Hm(i)?o:i:n:o};const Npt=Object.freeze(Object.defineProperty({__proto__:null,default:LP},Symbol.toStringTag,{value:"Module"})),Cpt=e=>{const[t,r]=w.useState(!1),[a,n]=w.useState(null);return w.useEffect(()=>{const i="google-maps-script";if(document.getElementById(i)||window.google){r(!0);return}const o=document.createElement("script");o.id=i,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>n(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:a}},Phe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],Ept=["Mecánica Industrial","Mecánica Automotriz"],jpt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Phe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),XJ=({empresas:e,isLoaded:t,route:r})=>{const a=w.useRef(null),n=w.useRef(null),i=w.useRef([]),o=w.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return w.useEffect(()=>{!t||!a.current||!window.google||(n.current||(n.current=new window.google.maps.Map(a.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),o.current||(o.current=new window.google.maps.DirectionsRenderer),i.current.forEach(c=>c.setMap(null)),i.current=[],o.current.setMap(null),r?(o.current.setMap(n.current),o.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:n.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(n.current,u)}),i.current.push(u)}))},[l,t,r]),s.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[s.jsx("div",{ref:a,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:s.jsx("div",{className:"text-center p-6",children:s.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},kpt=({route:e,travelMode:t})=>{const n=t==="TRANSIT"?45:30,i=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*n*60,c=i+l,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return s.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),s.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return s.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&s.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&s.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[s.jsx("span",{className:"text-lg",children:"🚌"}),s.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),s.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[s.jsxs("p",{children:["Tiempo de viaje: ",Math.round(i/60)," min"]}),s.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),s.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),s.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&s.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},YJ=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(a,n)=>{var i;n===window.google.maps.places.PlacesServiceStatus.OK&&((i=a==null?void 0:a.geometry)!=null&&i.location)?t({lat:a.geometry.location.lat(),lng:a.geometry.location.lng()}):t(null)})}):null,Spt=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),s.jsx(mc,{width:"100%",height:300,children:s.jsxs(j4,{children:[s.jsx(iC,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,a)=>s.jsx(Jh,{fill:t[a%t.length]},`cell-${a}`))}),s.jsx(hc,{})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),s.jsx(mc,{width:"100%",height:300,children:s.jsxs(Sh,{data:e.porSupervisor,layout:"vertical",children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{type:"number"}),s.jsx(Wd,{type:"category",dataKey:"name",width:150}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),s.jsx(mc,{width:"100%",height:300,children:s.jsxs(Sh,{data:e.porComuna,children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"name"}),s.jsx(Wd,{}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),s.jsx(mc,{width:"100%",height:300,children:s.jsxs(VXe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[s.jsx(Kle,{}),s.jsx(E4,{dataKey:"subject"}),s.jsx(N4,{angle:30,domain:[0,5]}),s.jsx(XM,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),s.jsx(hc,{})]})})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[s.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),s.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:s.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,a)=>s.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[s.jsxs("span",{className:"font-semibold",children:[a+1,". ",r.nombre]}),s.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},_pt=()=>{const[e,t]=w.useState([]),[r,a]=w.useState([]),[n,i]=w.useState("list"),[o,l]=w.useState(null),[c,u]=w.useState(!0),[d,f]=w.useState(null),[h,m]=w.useState(null),[g,x]=w.useState(null),[v,y]=w.useState([]),[N,C]=w.useState(null),[T,_]=w.useState(!1),[O,j]=w.useState("DRIVING"),[S,B]=w.useState(""),[L,D]=w.useState([]),k="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:R,error:U}=Cpt(k);w.useEffect(()=>{u(!0);const ne=Wct(t),oe=Jct(a),we=eut(D);return u(!1),()=>{ne(),oe(),we()}},[]);const H=w.useMemo(()=>{const ne=e.reduce((_e,Ce)=>{const de=Ce.area||"Sin especificar";return _e[de]=(_e[de]||0)+1,_e},{}),oe=e.reduce((_e,Ce)=>{var xe;const de=((xe=Ce.docenteSupervisor)==null?void 0:xe.nombreCompleto)||"Sin asignar";return _e[de]=(_e[de]||0)+1,_e},{}),we=e.reduce((_e,Ce)=>{const de=Ce.direccion.split(",").map(he=>he.trim()),xe=de.length>1?de[1]:"Desconocida";return _e[xe]=(_e[xe]||0)+1,_e},{}),K=Phe.map(_e=>{const Ce=e.flatMap(xe=>{var he;return(he=xe.calificaciones.find(ye=>ye.elemento===_e.elemento))==null?void 0:he.score}).filter(xe=>xe!=null),de=Ce.length>0?Ce.reduce((xe,he)=>xe+he,0)/Ce.length:0;return{subject:_e.elemento.split(" ")[0],A:de,fullMark:5}}),Ee=e.map(_e=>{const Ce=_e.calificaciones.map(xe=>xe.score).filter(xe=>xe!=null),de=Ce.length>0?Ce.reduce((xe,he)=>xe+he,0)/Ce.length:0;return{..._e,promedio:de}}).filter(_e=>_e.promedio>0).sort((_e,Ce)=>Ce.promedio-_e.promedio);return{porEspecialidad:Object.entries(ne).map(([_e,Ce])=>({name:_e,value:Ce})),porSupervisor:Object.entries(oe).map(([_e,Ce])=>({name:_e,value:Ce})),porComuna:Object.entries(we).map(([_e,Ce])=>({name:_e,value:Ce})),calificacionPorAmbito:K,ranking:Ee}},[e]),Q=async()=>{if(o)try{await Xct(o),i("list"),l(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async ne=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await Yct(ne)},G=(ne,oe)=>{l(we=>we?{...we,[ne]:oe}:null)},J=async ne=>{var oe;if(f(ne),(oe=ne==null?void 0:ne.value)!=null&&oe.place_id&&R){const we=await YJ(ne.value.place_id);G("direccion",ne.label||""),G("coordenadas",we)}else G("direccion",(ne==null?void 0:ne.label)||"")},W=ne=>{l(JSON.parse(JSON.stringify(ne))),ne.direccion&&f({label:ne.direccion,value:{description:ne.direccion}}),i("form")},Z=async ne=>{var oe;if(m(ne),(oe=ne==null?void 0:ne.value)!=null&&oe.place_id&&R){const we=await YJ(ne.value.place_id);x(we)}},M=ne=>{y(oe=>oe.some(we=>we.id===ne.id)?oe.filter(we=>we.id!==ne.id):[...oe,ne])},F=()=>{if(!g||v.length===0||!R)return;_(!0);const ne=new window.google.maps.DirectionsService,oe=v.filter(we=>we.coordenadas).map(we=>({location:we.coordenadas,stopover:!0}));ne.route({origin:g,destination:g,waypoints:oe,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[O]},(we,K)=>{_(!1),K===window.google.maps.DirectionsStatus.OK&&we?C(we):alert("No se pudo calcular la ruta: "+K)})},X=()=>{C(null),m(null),x(null),y([]),B("")},Y=async()=>{if(!S||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ne={nombre:S,startPoint:{label:h.label,coords:g},empresas:v.map(oe=>({id:oe.id,nombre:oe.nombre,coordenadas:oe.coordenadas})),travelMode:O};try{await Zct(ne),alert("Ruta guardada con éxito."),i("saved-routes")}catch{alert("Error al guardar la ruta.")}},ae=async()=>{const ne=document.getElementById("map-container-for-pdf"),oe=document.getElementById("route-details-for-pdf");if(!ne||!oe)return;const we=new gr("p","mm","a4"),K=we.internal.pageSize.getWidth();we.text(`Ruta de Supervisión: ${S||"Sin nombre"}`,10,15),we.setFontSize(10),we.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const _e=(await LP(ne,{useCORS:!0})).toDataURL("image/png");we.addImage(_e,"PNG",10,30,K-20,100);const de=(await LP(oe)).toDataURL("image/png"),xe=we.getImageProperties(de),he=xe.height*(K-20)/xe.width;we.addImage(de,"PNG",10,135,K-20,he),we.save(`ruta-${S||"supervision"}.pdf`)},le=ne=>{m({label:ne.startPoint.label,value:null}),x(ne.startPoint.coords),y(ne.empresas),j(ne.travelMode),B(ne.nombre),i("route")},ie=async ne=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await tut(ne),alert("Ruta eliminada."))};return c?s.jsx("div",{className:"text-center p-8",children:"Cargando..."}):U?s.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[s.jsx("p",{className:"font-bold text-lg",children:"Error de Configuración de Google Maps"}),s.jsx("p",{className:"mt-2",children:U.message}),s.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",s.jsx("code",{children:".env.local"})," en la raíz del proyecto y añade la siguiente línea:"]}),s.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),s.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",s.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegúrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),s.jsxs("div",{className:"flex items-center gap-4",children:[n!=="list"&&s.jsx("button",{onClick:()=>{i("list"),f(null),l(null),X()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),n==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>i("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(bre,{size:18})," Dashboard"]}),s.jsx("button",{onClick:()=>i("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),s.jsx("button",{onClick:()=>i("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),s.jsx("button",{onClick:()=>i("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),s.jsx("button",{onClick:()=>{l(jpt()),i("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),n==="dashboard"&&s.jsx(Spt,{data:H}),n==="saved-routes"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),s.jsx("div",{className:"space-y-3",children:L.length===0?s.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):L.map(ne=>s.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:ne.nombre}),s.jsxs("p",{className:"text-sm text-slate-500",children:[ne.empresas.length," paradas"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>le(ne),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),s.jsx("button",{onClick:()=>ie(ne.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ne.id))})]}),n==="route"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),s.jsx("input",{type:"text",value:S,onChange:ne=>B(ne.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),s.jsx(XY,{apiKey:k,selectProps:{value:h,onChange:Z,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),s.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[s.jsx("button",{onClick:()=>j("DRIVING"),className:`w-full py-2 rounded-md transition ${O==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),s.jsx("button",{onClick:()=>j("TRANSIT"),className:`w-full py-2 rounded-md transition ${O==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),s.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ne=>ne.coordenadas).map(ne=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`route-${ne.id}`,checked:v.some(oe=>oe.id===ne.id),onChange:()=>M(ne),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:`route-${ne.id}`,className:"ml-3 text-sm text-gray-700",children:ne.nombre})]},ne.id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:F,disabled:!g||v.length===0||T,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:T?"Calculando...":"Visualizar Ruta"}),s.jsx("button",{onClick:Y,disabled:!S||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),s.jsx("button",{onClick:ae,disabled:!N,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),s.jsx("button",{onClick:X,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),s.jsx("div",{children:s.jsx(XJ,{empresas:v,isLoaded:R,route:N})})]}),N&&s.jsx(kpt,{route:N,travelMode:O})]}),n==="map"&&s.jsx(XJ,{empresas:e,isLoaded:R}),n==="list"&&s.jsx("div",{className:"space-y-3",children:e.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ne=>{var oe;return s.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",children:ne.nombre}),s.jsxs("p",{className:"text-sm text-slate-500",children:[ne.rut," | ",ne.direccion]}),s.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ne.area||"No especificada"," | Cupos: ",ne.cupos," | Supervisor: ",((oe=ne.docenteSupervisor)==null?void 0:oe.nombreCompleto)||"Ninguno"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>W(ne),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),s.jsx("button",{onClick:()=>V(ne.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ne.id)})}),n==="form"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"id"in o?"Editando Empresa":"Nueva Empresa"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Rwe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{value:o.nombre,onChange:ne=>G("nombre",ne.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(qNe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{value:o.rut,onChange:ne=>G("rut",ne.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),s.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[s.jsx(Tw,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),s.jsx("div",{className:"w-full pl-10",children:s.jsx(XY,{apiKey:k,selectProps:{value:d,onChange:J,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Pb,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{value:o.contacto,onChange:ne=>G("contacto",ne.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(yre,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"email",value:o.email||"",onChange:ne=>G("email",ne.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Ei,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"number",value:o.cupos,onChange:ne=>G("cupos",parseInt(ne.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(Ob,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsxs("select",{value:o.area||"",onChange:ne=>G("area",ne.target.value),className:"input-style pl-10 w-full",children:[s.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),Ept.map(ne=>s.jsx("option",{value:ne,children:ne},ne))]})]}),s.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[s.jsx(Pb,{className:"absolute left-3 w-5 h-5 text-slate-400"}),s.jsxs("select",{value:o.docenteSupervisor?JSON.stringify(o.docenteSupervisor):"",onChange:ne=>{const oe=ne.target.value;G("docenteSupervisor",oe?JSON.parse(oe):void 0)},className:"input-style pl-10 w-full",children:[s.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ne=>s.jsx("option",{value:JSON.stringify({id:ne.id,nombre:ne.nombreCompleto}),children:ne.nombreCompleto},ne.id))]})]})]}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),o.calificaciones.map((ne,oe)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[s.jsx(Ere,{className:"w-5 h-5 text-slate-400"}),s.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ne.elemento}),s.jsxs("select",{value:ne.score||"",onChange:we=>{const K=[...o.calificaciones];K[oe].score=we.target.value?parseInt(we.target.value):null,G("calificaciones",K)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[s.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(we=>s.jsx("option",{value:we,children:we},we))]})]},oe))]}),s.jsx("div",{className:"pt-6",children:s.jsx("button",{onClick:Q,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!o.nombre||!o.rut,children:"Guardar Empresa"})})]})]})},uU="dpd_actividades",Rhe="dpd_respuestas",Bpt="usuarios";function Tpt(e,{includeArchived:t=!1}={}){const r=pt(ot,uU),a=t?_t(r,Gt("createdAt","desc")):_t(r,rr("isArchived","==",!1),Gt("createdAt","desc"));return ar(a,n=>{const i=n.docs.map(o=>({id:o.id,...o.data()}));e(i)})}async function Ipt(e){const t=pt(ot,uU);return(await Yr(t,{...e,isArchived:!1,createdAt:qa(),updatedAt:qa()})).id}async function Opt(e){const t=$t(ot,uU,e);await Ja(t)}function Fpt(e,t){const r=pt(ot,Rhe),a=_t(r,rr("activityId","==",e),Gt("createdAt","desc"));return ar(a,n=>{const i=n.docs.map(o=>({id:o.id,...o.data()}));t(i)})}async function Dpt(e){const t=pt(ot,Rhe);return(await Yr(t,{...e,createdAt:qa()})).id}function Ppt(e,t){const r=pt(ot,Bpt),a=_t(r,rr("profile","in",e));return ar(a,n=>{const i=n.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(i)})}function Lhe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const zS=500,JJ=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),c2=ct.memo(({title:e,icon:t,right:r,children:a})=>s.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[s.jsxs("header",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),a]})),Rpt=ct.memo(({value:e,onChange:t,canCreate:r})=>{const a=(n,i)=>s.jsx("button",{onClick:()=>t(n),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===n?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:n==="crear"&&!r,title:n==="crear"&&!r?"Tu perfil no crea actividades":"",children:i},n);return s.jsxs("div",{className:"flex items-center gap-2",children:[a("responder","Responder"),a("dashboard","Dashboard"),a("crear","Nueva actividad")]})}),Lpt=ct.memo(({items:e,selectedId:t,onSelect:r,canDelete:a,onDelete:n})=>e.length?s.jsx("ul",{className:"space-y-2",children:e.map(i=>{const o=i.id===t;return s.jsxs("li",{children:[s.jsxs("button",{onClick:()=>r(i.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${i.titulo} • ${i.dimension} / ${i.subdimension}`,children:[s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Gh,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:i.titulo})]}),s.jsx(k_,{className:"w-4 h-4 opacity-70"})]}),a(i)&&s.jsx("button",{onClick:()=>n(i.id,i.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},i.id)})}):s.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[s.jsx(RNe,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),hO=ct.memo(({label:e,value:t,pill:r})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):s.jsx("span",{className:"font-medium",children:t})]})),Mpt=ct.memo(({label:e,value:t,total:r=0})=>{const a=r>0?t/r*100:t>0?100:0,n=a>=75?"from-emerald-500":a>=50?"from-blue-500":a>=25?"from-amber-500":"from-rose-500";return s.jsxs("div",{className:"relative mt-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),s.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${n} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,a)}%`}})})]})}),Upt=ct.memo(({option:e,options:t,onChangeText:r,onDelete:a})=>{const n=w.useCallback(o=>r(e.id,o.target.value),[e.id,r]),i=w.useCallback(()=>a(e.id),[e.id,a]);return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{value:e.text,onChange:n,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(o=>o.id===e.id)+1}`}),s.jsx("button",{onClick:i,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:s.jsx(Da,{className:"w-4 h-4"})})]})}),Qpt=ct.memo(({q:e,index:t,onRemove:r,onPatch:a})=>{const n=w.useCallback(f=>a(e.id,{enunciado:f.target.value}),[e.id,a]),i=w.useCallback(f=>a(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,a]),o=w.useCallback(f=>a(e.id,{multiple:f.target.checked}),[e.id,a]),l=w.useCallback(()=>a(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,a]),c=w.useCallback((f,h)=>{a(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,a]),u=w.useCallback(f=>a(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,a]),d=w.useCallback(()=>r(e.id),[e.id,r]);return s.jsxs("div",{className:"border rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),s.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:s.jsx(Da,{className:"w-4 h-4"})})]}),s.jsx("input",{value:e.enunciado,onChange:n,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm",children:"Máx. palabras"}),s.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||zS,onChange:i,className:"w-24 border rounded-lg px-2 py-1"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir selección múltiple"]}),e.opciones.map(f=>s.jsx(Upt,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),s.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),Hpt=ct.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const a=w.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return s.jsxs("div",{className:"border rounded-xl p-3",children:[s.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),s.jsx("textarea",{rows:5,value:c,onChange:a,placeholder:`Máximo ${e.maxPalabras||zS} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[Lhe(c)," / ",e.maxPalabras||zS," palabras"]})]})}const n=((l=t[e.id])==null?void 0:l.seleccionados)||[],i=c=>{let u=new Set(n);n.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return s.jsxs("div",{className:"border rounded-xl p-3",children:[s.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),s.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=n.includes(c);return s.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>i(c)}),s.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),zpt=({currentUser:e})=>{var M;const[t,r]=w.useState("responder"),[a,n]=w.useState([]),[i,o]=w.useState(""),[l,c]=w.useState(""),[u,d]=w.useState(JJ()),f=w.useCallback(F=>d(X=>({...X,...F})),[]),[h,m]=w.useState([]),[g,x]=w.useState({}),[v,y]=w.useState([]),N=vz.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);w.useEffect(()=>{const F=Tpt(X=>{n(X),o(Y=>{var ae;return Y||(((ae=X[0])==null?void 0:ae.id)??"")})});return()=>F()},[]),w.useEffect(()=>{const F=Ppt(["PROFESORADO","SUBDIRECCION"],X=>{m(X),d(Y=>{if(Y.creadorId)return Y;const ae=X.find(le=>le.id===(e==null?void 0:e.uid));return ae?{...Y,creadorId:ae.id,creadorNombre:ae.nombre,creadorPerfil:ae.profile||Y.creadorPerfil}:Y})});return()=>F()},[e]),w.useEffect(()=>{if(!i)return;const F=Fpt(i,y);return()=>F()},[i]);const C=w.useMemo(()=>a.find(F=>F.id===i),[a,i]);w.useMemo(()=>xh[u.dimension]||[],[u.dimension]),w.useEffect(()=>{d(F=>{const X=xh[F.dimension]||[],Y=X.includes(F.subdimension)?F.subdimension:X[0]||"";return Y===F.subdimension?F:{...F,subdimension:Y}})},[u.dimension]);const T=w.useCallback(()=>{const F={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:zS};d(X=>({...X,preguntas:[...X.preguntas,F]}))},[]),_=w.useCallback(()=>{const F={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(X=>({...X,preguntas:[...X.preguntas,F]}))},[]),O=w.useCallback((F,X)=>{d(Y=>({...Y,preguntas:Y.preguntas.map(ae=>ae.id===F?{...ae,...X}:ae)}))},[]),j=w.useCallback(F=>{d(X=>({...X,preguntas:X.preguntas.filter(Y=>Y.id!==F)}))},[]),[S,B]=w.useState(!1),L=w.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const X=(await ADe(u.aiTema,u.aiCantidad)).map(Y=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:Y.enunciado,opciones:Y.opciones.slice(0,5).map(ae=>({id:crypto.randomUUID(),text:ae})),multiple:!0}));d(Y=>({...Y,preguntas:[...Y.preguntas,...X]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[D,k]=w.useState([]);w.useEffect(()=>{(async()=>{var Y;if(!C)return;const X=[];for(const ae of v)if(ae.respuestas)for(const[le,ie]of Object.entries(ae.respuestas)){const ne=C.preguntas.find(we=>we.id===le);if(!ne||ne.tipo!=="abierta")continue;const oe=ie;oe.tipo==="abierta"&&((Y=oe.valorTexto)!=null&&Y.trim())&&X.push(oe.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",X.length),X.length>0)try{const ae=await hDe(X,30);console.log("Keywords generadas:",ae),k(ae)}catch(ae){console.error("Error al extraer keywords:",ae),k([])}else k([])})()},[C,v]);const R=w.useMemo(()=>{if(!C)return{};const F={};for(const X of C.preguntas)X.tipo==="seleccion_multiple"&&(F[X.id]={},(X.opciones||[]).forEach(Y=>F[X.id][Y]=0));for(const X of v)for(const[Y,ae]of Object.entries(X.respuestas||{})){const le=ae;if((le==null?void 0:le.tipo)==="seleccion_multiple")for(const ie of le.seleccionados||[])F[Y]||(F[Y]={}),F[Y][ie]=(F[Y][ie]||0)+1}return F},[C,v]),U=w.useCallback(F=>F.map(X=>X.tipo==="abierta"?X:{...X,opciones:X.opciones.map(Y=>Y.text)}),[]),H=w.useCallback(()=>d(JJ()),[]),Q=w.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const F={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:U(u.preguntas)},X=await Ipt(F);H(),o(X),r("responder")},[u,U,H]),V=w.useCallback(async(F,X)=>{var ae;if(window.confirm(`¿Eliminar "${X}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await Opt(F),i===F){const le=a.filter(ie=>ie.id!==F);o(((ae=le[0])==null?void 0:ae.id)||""),le.length||r("crear")}alert("Actividad eliminada.")}},[i,a]),G=w.useCallback(async()=>{if(!C||!v.length)return;const F=new gr("p","mm","a4"),X=20;let Y=X;F.setFontSize(20),F.text(`Informe: ${C.titulo}`,X,Y),Y+=10,F.setFontSize(12),F.text(`Dimensión: ${C.dimension}`,X,Y+=10),F.text(`Subdimensión: ${C.subdimension}`,X,Y+=7),F.text(`Creador: ${C.creadorNombre} (${C.creadorPerfil})`,X,Y+=7),F.text(`Total de respuestas: ${v.length}`,X,Y+=7),Y+=10;for(const ae of C.preguntas){if(Y>250&&(F.addPage(),Y=X),F.setFontSize(14),F.text(`Pregunta: ${ae.enunciado}`,X,Y+=10),Y+=5,F.setFontSize(12),ae.tipo==="seleccion_multiple"){const le=R[ae.id]||{},ie=v.length;Object.entries(le).forEach(([ne,oe])=>{const we=ie>0?Math.round(oe/ie*100):0;F.text(`${ne}: ${oe} respuestas (${we}%)`,X+5,Y+=7)})}else{F.text("Respuestas:",X,Y+=7);for(const le of v){const ie=le.respuestas[ae.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){Y>250&&(F.addPage(),Y=X),F.text(`${le.userNombre}:`,X+5,Y+=7);const ne=F.splitTextToSize(ie.valorTexto,170);F.text(ne,X+10,Y+=7),Y+=ne.length*7}}}Y+=10}if(D.length>0){Y>250&&(F.addPage(),Y=X),F.setFontSize(14),F.text("Conceptos clave detectados:",X,Y+=10),F.setFontSize(12);const ae=D.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),le=F.splitTextToSize(ae,170);F.text(le,X,Y+=7)}F.save(`informe_${C.titulo.replace(/\s+/g,"_")}.pdf`)},[C,v,R,D]),J=w.useCallback(F=>{const X=e==null?void 0:e.isAdmin,Y=F.creadorId===(e==null?void 0:e.uid);return N&&(X||Y)},[e,N]),W=w.useCallback((F,X)=>{x(Y=>({...Y,[F.id]:F.tipo==="abierta"?{tipo:"abierta",valorTexto:X}:{tipo:"seleccion_multiple",seleccionados:X}}))},[]),Z=w.useCallback(async()=>{if(C){for(const F of C.preguntas){const X=g[F.id];if(X&&F.tipo==="abierta"&&F.maxPalabras){const Y=Lhe(X.valorTexto||"");if(Y>F.maxPalabras)return alert(`La respuesta a "${F.enunciado}" supera el máximo de ${F.maxPalabras} palabras (${Y}).`)}}await Dpt({activityId:C.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[C,g,e]);return s.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[s.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(__,{className:"w-7 h-7 text-indigo-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),s.jsx(Rpt,{value:t,onChange:r,canCreate:N})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:s.jsx(c2,{title:"Actividades",icon:s.jsx(Gh,{className:"w-5 h-5 text-indigo-600"}),children:s.jsx(Lpt,{items:a,selectedId:i,onSelect:F=>{o(F),r("responder")},canDelete:J,onDelete:V})})}),s.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&N&&s.jsxs(c2,{title:"Nueva actividad / sesión",icon:s.jsx(fz,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[s.jsx(gl,{className:"w-4 h-4"}),"Guardar"]}),children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Título"}),s.jsx("input",{value:u.titulo,onChange:F=>f({titulo:F.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),s.jsx("select",{value:u.dimension,onChange:F=>f({dimension:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(xh).map(F=>s.jsx("option",{value:F,children:F},F))}),s.jsx("select",{value:u.subdimension,onChange:F=>f({subdimension:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(xh[u.dimension]||[]).map(F=>s.jsx("option",{value:F,children:F},F))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),s.jsx("select",{value:u.creadorPerfil,onChange:F=>f({creadorPerfil:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:vz.map(F=>s.jsx("option",{value:F,children:F},F))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),s.jsxs("select",{value:u.creadorId,onChange:F=>{const X=F.target.value,Y=h.find(ae=>ae.id===X);f({creadorId:X,creadorNombre:(Y==null?void 0:Y.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[s.jsx("option",{value:"",children:"Seleccione…"}),h.filter(F=>F.profile===u.creadorPerfil).map(F=>s.jsx("option",{value:F.id,children:F.nombre},F.id))]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(DN,{className:"w-4 h-4"})," Preguntas"]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[s.jsx(Li,{className:"w-4 h-4"})," Abierta"]}),s.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[s.jsx(Li,{className:"w-4 h-4"})," Selección múltiple"]}),s.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[s.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[s.jsx(jre,{className:"w-4 h-4"})," IA"]}),s.jsx("input",{value:u.aiTema,onChange:F=>f({aiTema:F.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),s.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:F=>f({aiCantidad:parseInt(F.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),s.jsxs("button",{onClick:L,disabled:S||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[s.jsx(vg,{className:"w-4 h-4"}),S?"Generando…":"Generar con IA"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((F,X)=>s.jsx(Qpt,{q:F,index:X,onRemove:j,onPatch:O},F.id)),u.preguntas.length===0&&s.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[s.jsx(cn,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&C&&s.jsx(c2,{title:`Responder: ${C.titulo}`,icon:s.jsx(Ei,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("button",{onClick:Z,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[s.jsx(gl,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[s.jsx(hO,{pill:!0,label:"Dimensión",value:C.dimension}),s.jsx(hO,{pill:!0,label:"Subdimensión",value:C.subdimension}),s.jsx(hO,{pill:!0,label:"Creador",value:`${C.creadorNombre} • ${C.creadorPerfil}`})]}),C.preguntas.map(F=>s.jsx(Hpt,{q:F,respuestas:g,onChange:W},F.id))]})}),t==="respuestas_individuales"&&C&&s.jsx(c2,{title:`Respuestas individuales: ${C.titulo}`,icon:s.jsx(Ei,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:G,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[s.jsx(of,{className:"w-4 h-4"}),"Descargar informe"]}),s.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[s.jsx(fl,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:s.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[s.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[s.jsx(Sv,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(F=>{var X;return s.jsxs("button",{onClick:()=>c(F.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===F.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:s.jsx(Sv,{className:"w-4 h-4 text-indigo-600"})}),s.jsx("span",{className:"font-medium",children:F.userNombre})]}),s.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[s.jsx(Io,{className:"w-3.5 h-3.5"}),new Date(((X=F.createdAt)==null?void 0:X.seconds)*1e3).toLocaleDateString()]})]},F.userId)}):s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Sv,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),s.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[s.jsx(fz,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",s.jsx("span",{className:"text-indigo-600",children:(M=v.find(F=>F.userId===l))==null?void 0:M.userNombre})]}),s.jsx("div",{className:"space-y-6",children:C.preguntas.map(F=>{var ae;const X=v.find(le=>le.userId===l),Y=(ae=X==null?void 0:X.respuestas)==null?void 0:ae[F.id];return console.log("Respuesta encontrada:",{preguntaId:F.id,tipo:F.tipo,respuesta:Y}),s.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:F.tipo==="abierta"?s.jsx(Az,{className:"w-5 h-5 text-indigo-600"}):s.jsx(rb,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:F.enunciado}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:F.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),F.tipo==="abierta"?(Y==null?void 0:Y.tipo)==="abierta"&&Y.valorTexto?s.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:Y.valorTexto})}):s.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):s.jsxs("div",{className:"space-y-2 mt-3",children:[(F.opciones||[]).map(le=>{const ne=((Y==null?void 0:Y.tipo)==="seleccion_multiple"?Y.seleccionados||[]:[]).includes(le.text);return s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ne?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[s.jsx("div",{className:"flex-shrink-0",children:ne?s.jsx(cn,{className:"w-4 h-4 text-indigo-600"}):s.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),s.jsx("span",{className:"text-sm",children:typeof le=="string"?le:le.text})]},typeof le=="string"?le:le.id)}),!Y&&s.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},F.id)})})]}):s.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&C&&s.jsxs(c2,{title:`Dashboard: ${C.titulo}`,icon:s.jsx(_w,{className:"w-5 h-5 text-indigo-600"}),right:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[s.jsx(Sv,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),J(C)&&s.jsxs("button",{onClick:()=>V(C.id,C.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(Da,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:G,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[s.jsx(of,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(Sv,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),s.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:s.jsx(rb,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),s.jsx("p",{className:"text-xl font-semibold",children:C.preguntas.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Ym,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),s.jsx("p",{className:"text-sm font-medium truncate",children:C.creadorNombre})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Io,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),s.jsx("p",{className:"text-sm font-medium",children:(()=>{const F=C.createdAt,X=F!=null&&F.toDate?F.toDate():F!=null&&F.seconds?new Date(F.seconds*1e3):F?new Date(F):null;return X?X.toLocaleDateString():"No disponible"})()})]})]})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(eb,{className:"w-5 h-5 text-indigo-600"}),s.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),s.jsxs("div",{className:"space-y-4",children:[C.preguntas.filter(F=>F.tipo==="seleccion_multiple").map(F=>s.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[s.jsx("p",{className:"font-medium mb-3 text-slate-700",children:F.enunciado}),Object.entries(R[F.id]||{}).map(([X,Y])=>s.jsx(Mpt,{label:X,value:Y},X)),s.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[s.jsx(Fb,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},F.id)),C.preguntas.filter(F=>F.tipo==="seleccion_multiple").length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(rb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Iwe,{className:"w-5 h-5 text-indigo-600"}),s.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),D.length?s.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(F=>s.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(F.score*18)}px`},children:F.keyword},F.keyword))}):s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Az,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var gC=e=>e.type==="checkbox",pg=e=>e instanceof Date,Tl=e=>e==null;const Mhe=e=>typeof e=="object";var si=e=>!Tl(e)&&!Array.isArray(e)&&Mhe(e)&&!pg(e),Vpt=e=>si(e)&&e.target?gC(e.target)?e.target.checked:e.target.value:e,$pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Gpt=(e,t)=>e.has($pt(t)),qpt=e=>{const t=e.constructor&&e.constructor.prototype;return si(t)&&t.hasOwnProperty("isPrototypeOf")},dU=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rs(e){let t;const r=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(dU&&(e instanceof Blob||a))&&(r||si(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!qpt(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=rs(e[n]));else return e;return t}var A3=e=>/^\w*$/.test(e),as=e=>e===void 0,h3=e=>Array.isArray(e)?e.filter(Boolean):[],fU=e=>h3(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cr=(e,t,r)=>{if(!t||!si(e))return r;const a=(A3(t)?[t]:fU(t)).reduce((n,i)=>Tl(n)?n:n[i],e);return as(a)||a===e?as(e[t])?r:e[t]:a},tA=e=>typeof e=="boolean",Mn=(e,t,r)=>{let a=-1;const n=A3(t)?[t]:fU(t),i=n.length,o=i-1;for(;++a<i;){const l=n[a];let c=r;if(a!==o){const u=e[l];c=si(u)||Array.isArray(u)?u:isNaN(+n[a+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const ZJ={BLUR:"blur",FOCUS_OUT:"focusout"},ed={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ah={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Uhe=ct.createContext(null);Uhe.displayName="HookFormContext";const Kpt=()=>ct.useContext(Uhe);var Wpt=(e,t,r,a=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ed.all&&(t._proxyFormState[o]=!a||ed.all),e[o]}});return n};const Qhe=typeof window<"u"?ct.useLayoutEffect:ct.useEffect;var hA=e=>typeof e=="string",Xpt=(e,t,r,a,n)=>hA(e)?(a&&t.watch.add(e),cr(r,e,n)):Array.isArray(e)?e.map(i=>(a&&t.watch.add(i),cr(r,i))):(a&&(t.watchAll=!0),r),MP=e=>Tl(e)||!Mhe(e);function bm(e,t,r=new WeakSet){if(MP(e)||MP(t))return e===t;if(pg(e)&&pg(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of a){const o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=t[i];if(pg(o)&&pg(l)||si(o)&&si(l)||Array.isArray(o)&&Array.isArray(l)?!bm(o,l,r):o!==l)return!1}}return!0}var Ypt=(e,t,r,a,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:n||!0}}:{},xc=e=>Array.isArray(e)?e:[e],eZ=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}},Sl=e=>si(e)&&!Object.keys(e).length,AU=e=>e.type==="file",Vd=e=>typeof e=="function",VS=e=>{if(!dU)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Hhe=e=>e.type==="select-multiple",hU=e=>e.type==="radio",Jpt=e=>hU(e)||gC(e),mO=e=>VS(e)&&e.isConnected;function Zpt(e,t){const r=t.slice(0,-1).length;let a=0;for(;a<r;)e=as(e)?a++:e[t[a++]];return e}function egt(e){for(const t in e)if(e.hasOwnProperty(t)&&!as(e[t]))return!1;return!0}function Ys(e,t){const r=Array.isArray(t)?t:A3(t)?[t]:fU(t),a=r.length===1?e:Zpt(e,r),n=r.length-1,i=r[n];return a&&delete a[i],n!==0&&(si(a)&&Sl(a)||Array.isArray(a)&&egt(a))&&Ys(e,r.slice(0,-1)),e}var zhe=e=>{for(const t in e)if(Vd(e[t]))return!0;return!1};function $S(e,t={}){const r=Array.isArray(e);if(si(e)||r)for(const a in e)Array.isArray(e[a])||si(e[a])&&!zhe(e[a])?(t[a]=Array.isArray(e[a])?[]:{},$S(e[a],t[a])):Tl(e[a])||(t[a]=!0);return t}function Vhe(e,t,r){const a=Array.isArray(e);if(si(e)||a)for(const n in e)Array.isArray(e[n])||si(e[n])&&!zhe(e[n])?as(t)||MP(r[n])?r[n]=Array.isArray(e[n])?$S(e[n],[]):{...$S(e[n])}:Vhe(e[n],Tl(t)?{}:t[n],r[n]):r[n]=!bm(e[n],t[n]);return r}var u2=(e,t)=>Vhe(e,t,$S(t));const tZ={value:!1,isValid:!1},rZ={value:!0,isValid:!0};var $he=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!as(e[0].attributes.value)?as(e[0].value)||e[0].value===""?rZ:{value:e[0].value,isValid:!0}:rZ:tZ}return tZ},Ghe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>as(e)?e:t?e===""?NaN:e&&+e:r&&hA(e)?new Date(e):a?a(e):e;const aZ={isValid:!1,value:null};var qhe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,aZ):aZ;function nZ(e){const t=e.ref;return AU(t)?t.files:hU(t)?qhe(e.refs).value:Hhe(t)?[...t.selectedOptions].map(({value:r})=>r):gC(t)?$he(e.refs).value:Ghe(as(t.value)?e.ref.value:t.value,e)}var tgt=(e,t,r,a)=>{const n={};for(const i of e){const o=cr(t,i);o&&Mn(n,i,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:a}},GS=e=>e instanceof RegExp,d2=e=>as(e)?e:GS(e)?e.source:si(e)?GS(e.value)?e.value.source:e.value:e,qv=e=>({isOnSubmit:!e||e===ed.onSubmit,isOnBlur:e===ed.onBlur,isOnChange:e===ed.onChange,isOnAll:e===ed.all,isOnTouch:e===ed.onTouched});const sZ="AsyncFunction";var rgt=e=>!!e&&!!e.validate&&!!(Vd(e.validate)&&e.validate.constructor.name===sZ||si(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===sZ)),agt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),UP=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const yb=(e,t,r,a)=>{for(const n of r||Object.keys(e)){const i=cr(e,n);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!a)return!0;if(o.ref&&t(o.ref,o.name)&&!a)return!0;if(yb(l,t))break}else if(si(l)&&yb(l,t))break}}};function iZ(e,t,r){const a=cr(e,r);if(a||A3(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),o=cr(t,i),l=cr(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};n.pop()}return{name:r}}var ngt=(e,t,r,a)=>{r(e);const{name:n,...i}=e;return Sl(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!a||ed.all))},sgt=(e,t,r)=>!e||!t||e===t||xc(e).some(a=>a&&(r?a===t:a.startsWith(t)||t.startsWith(a))),igt=(e,t,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?a.isOnBlur:n.isOnBlur)?!e:(r?a.isOnChange:n.isOnChange)?e:!0,ogt=(e,t)=>!h3(cr(e,t)).length&&Ys(e,t),Khe=(e,t,r)=>{const a=xc(cr(e,r));return Mn(a,"root",t[r]),Mn(e,r,a),e},P5=e=>hA(e);function oZ(e,t,r="validate"){if(P5(e)||Array.isArray(e)&&e.every(P5)||tA(e)&&!e)return{type:r,message:P5(e)?e:"",ref:t}}var wv=e=>si(e)&&!GS(e)?e:{value:e,message:""},QP=async(e,t,r,a,n,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,N=cr(r,x);if(!y||t.has(x))return{};const C=l?l[0]:o,T=k=>{n&&C.reportValidity&&(C.setCustomValidity(tA(k)?"":k||""),C.reportValidity())},_={},O=hU(o),j=gC(o),S=O||j,B=(v||AU(o))&&as(o.value)&&as(N)||VS(o)&&o.value===""||N===""||Array.isArray(N)&&!N.length,L=Ypt.bind(null,x,a,_),D=(k,R,U,H=Ah.maxLength,Q=Ah.minLength)=>{const V=k?R:U;_[x]={type:k?H:Q,message:V,ref:o,...L(k?H:Q,V)}};if(i?!Array.isArray(N)||!N.length:c&&(!S&&(B||Tl(N))||tA(N)&&!N||j&&!$he(l).isValid||O&&!qhe(l).isValid)){const{value:k,message:R}=P5(c)?{value:!!c,message:c}:wv(c);if(k&&(_[x]={type:Ah.required,message:R,ref:C,...L(Ah.required,R)},!a))return T(R),_}if(!B&&(!Tl(f)||!Tl(h))){let k,R;const U=wv(h),H=wv(f);if(!Tl(N)&&!isNaN(N)){const Q=o.valueAsNumber||N&&+N;Tl(U.value)||(k=Q>U.value),Tl(H.value)||(R=Q<H.value)}else{const Q=o.valueAsDate||new Date(N),V=W=>new Date(new Date().toDateString()+" "+W),G=o.type=="time",J=o.type=="week";hA(U.value)&&N&&(k=G?V(N)>V(U.value):J?N>U.value:Q>new Date(U.value)),hA(H.value)&&N&&(R=G?V(N)<V(H.value):J?N<H.value:Q<new Date(H.value))}if((k||R)&&(D(!!k,U.message,H.message,Ah.max,Ah.min),!a))return T(_[x].message),_}if((u||d)&&!B&&(hA(N)||i&&Array.isArray(N))){const k=wv(u),R=wv(d),U=!Tl(k.value)&&N.length>+k.value,H=!Tl(R.value)&&N.length<+R.value;if((U||H)&&(D(U,k.message,R.message),!a))return T(_[x].message),_}if(m&&!B&&hA(N)){const{value:k,message:R}=wv(m);if(GS(k)&&!N.match(k)&&(_[x]={type:Ah.pattern,message:R,ref:o,...L(Ah.pattern,R)},!a))return T(R),_}if(g){if(Vd(g)){const k=await g(N,r),R=oZ(k,C);if(R&&(_[x]={...R,...L(Ah.validate,R.message)},!a))return T(R.message),_}else if(si(g)){let k={};for(const R in g){if(!Sl(k)&&!a)break;const U=oZ(await g[R](N,r),C,R);U&&(k={...U,...L(R,U.message)},T(U.message),a&&(_[x]=k))}if(!Sl(k)&&(_[x]={ref:C,...k},!a))return _}}return T(!0),_};const lgt={mode:ed.onSubmit,reValidateMode:ed.onChange,shouldFocusError:!0};function cgt(e={}){let t={...lgt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},n=si(t.defaultValues)||si(t.values)?rs(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:rs(n),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:eZ(),state:eZ()},m=t.criteriaMode===ed.all,g=ce=>Ae=>{clearTimeout(u),u=setTimeout(ce,Ae)},x=async ce=>{if(!t.disabled&&(d.isValid||f.isValid||ce)){const Ae=t.resolver?Sl((await j()).errors):await B(a,!0);Ae!==r.isValid&&h.state.next({isValid:Ae})}},v=(ce,Ae)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ce||Array.from(l.mount)).forEach(Ne=>{Ne&&(Ae?Mn(r.validatingFields,Ne,Ae):Ys(r.validatingFields,Ne))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Sl(r.validatingFields)}))},y=(ce,Ae=[],Ne,Pe,Qe=!0,$e=!0)=>{if(Pe&&Ne&&!t.disabled){if(o.action=!0,$e&&Array.isArray(cr(a,ce))){const et=Ne(cr(a,ce),Pe.argA,Pe.argB);Qe&&Mn(a,ce,et)}if($e&&Array.isArray(cr(r.errors,ce))){const et=Ne(cr(r.errors,ce),Pe.argA,Pe.argB);Qe&&Mn(r.errors,ce,et),ogt(r.errors,ce)}if((d.touchedFields||f.touchedFields)&&$e&&Array.isArray(cr(r.touchedFields,ce))){const et=Ne(cr(r.touchedFields,ce),Pe.argA,Pe.argB);Qe&&Mn(r.touchedFields,ce,et)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=u2(n,i)),h.state.next({name:ce,isDirty:D(ce,Ae),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Mn(i,ce,Ae)},N=(ce,Ae)=>{Mn(r.errors,ce,Ae),h.state.next({errors:r.errors})},C=ce=>{r.errors=ce,h.state.next({errors:r.errors,isValid:!1})},T=(ce,Ae,Ne,Pe)=>{const Qe=cr(a,ce);if(Qe){const $e=cr(i,ce,as(Ne)?cr(n,ce):Ne);as($e)||Pe&&Pe.defaultChecked||Ae?Mn(i,ce,Ae?$e:nZ(Qe._f)):U(ce,$e),o.mount&&x()}},_=(ce,Ae,Ne,Pe,Qe)=>{let $e=!1,et=!1;const Ke={name:ce};if(!t.disabled){if(!Ne||Pe){(d.isDirty||f.isDirty)&&(et=r.isDirty,r.isDirty=Ke.isDirty=D(),$e=et!==Ke.isDirty);const Ge=bm(cr(n,ce),Ae);et=!!cr(r.dirtyFields,ce),Ge?Ys(r.dirtyFields,ce):Mn(r.dirtyFields,ce,!0),Ke.dirtyFields=r.dirtyFields,$e=$e||(d.dirtyFields||f.dirtyFields)&&et!==!Ge}if(Ne){const Ge=cr(r.touchedFields,ce);Ge||(Mn(r.touchedFields,ce,Ne),Ke.touchedFields=r.touchedFields,$e=$e||(d.touchedFields||f.touchedFields)&&Ge!==Ne)}$e&&Qe&&h.state.next(Ke)}return $e?Ke:{}},O=(ce,Ae,Ne,Pe)=>{const Qe=cr(r.errors,ce),$e=(d.isValid||f.isValid)&&tA(Ae)&&r.isValid!==Ae;if(t.delayError&&Ne?(c=g(()=>N(ce,Ne)),c(t.delayError)):(clearTimeout(u),c=null,Ne?Mn(r.errors,ce,Ne):Ys(r.errors,ce)),(Ne?!bm(Qe,Ne):Qe)||!Sl(Pe)||$e){const et={...Pe,...$e&&tA(Ae)?{isValid:Ae}:{},errors:r.errors,name:ce};r={...r,...et},h.state.next(et)}},j=async ce=>{v(ce,!0);const Ae=await t.resolver(i,t.context,tgt(ce||l.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return v(ce),Ae},S=async ce=>{const{errors:Ae}=await j(ce);if(ce)for(const Ne of ce){const Pe=cr(Ae,Ne);Pe?Mn(r.errors,Ne,Pe):Ys(r.errors,Ne)}else r.errors=Ae;return Ae},B=async(ce,Ae,Ne={valid:!0})=>{for(const Pe in ce){const Qe=ce[Pe];if(Qe){const{_f:$e,...et}=Qe;if($e){const Ke=l.array.has($e.name),Ge=Qe._f&&rgt(Qe._f);Ge&&d.validatingFields&&v([Pe],!0);const nt=await QP(Qe,l.disabled,i,m,t.shouldUseNativeValidation&&!Ae,Ke);if(Ge&&d.validatingFields&&v([Pe]),nt[$e.name]&&(Ne.valid=!1,Ae))break;!Ae&&(cr(nt,$e.name)?Ke?Khe(r.errors,nt,$e.name):Mn(r.errors,$e.name,nt[$e.name]):Ys(r.errors,$e.name))}!Sl(et)&&await B(et,Ae,Ne)}}return Ne.valid},L=()=>{for(const ce of l.unMount){const Ae=cr(a,ce);Ae&&(Ae._f.refs?Ae._f.refs.every(Ne=>!mO(Ne)):!mO(Ae._f.ref))&&le(ce)}l.unMount=new Set},D=(ce,Ae)=>!t.disabled&&(ce&&Ae&&Mn(i,ce,Ae),!bm(W(),n)),k=(ce,Ae,Ne)=>Xpt(ce,l,{...o.mount?i:as(Ae)?n:hA(ce)?{[ce]:Ae}:Ae},Ne,Ae),R=ce=>h3(cr(o.mount?i:n,ce,t.shouldUnregister?cr(n,ce,[]):[])),U=(ce,Ae,Ne={})=>{const Pe=cr(a,ce);let Qe=Ae;if(Pe){const $e=Pe._f;$e&&(!$e.disabled&&Mn(i,ce,Ghe(Ae,$e)),Qe=VS($e.ref)&&Tl(Ae)?"":Ae,Hhe($e.ref)?[...$e.ref.options].forEach(et=>et.selected=Qe.includes(et.value)):$e.refs?gC($e.ref)?$e.refs.forEach(et=>{(!et.defaultChecked||!et.disabled)&&(Array.isArray(Qe)?et.checked=!!Qe.find(Ke=>Ke===et.value):et.checked=Qe===et.value||!!Qe)}):$e.refs.forEach(et=>et.checked=et.value===Qe):AU($e.ref)?$e.ref.value="":($e.ref.value=Qe,$e.ref.type||h.state.next({name:ce,values:rs(i)})))}(Ne.shouldDirty||Ne.shouldTouch)&&_(ce,Qe,Ne.shouldTouch,Ne.shouldDirty,!0),Ne.shouldValidate&&J(ce)},H=(ce,Ae,Ne)=>{for(const Pe in Ae){if(!Ae.hasOwnProperty(Pe))return;const Qe=Ae[Pe],$e=ce+"."+Pe,et=cr(a,$e);(l.array.has(ce)||si(Qe)||et&&!et._f)&&!pg(Qe)?H($e,Qe,Ne):U($e,Qe,Ne)}},Q=(ce,Ae,Ne={})=>{const Pe=cr(a,ce),Qe=l.array.has(ce),$e=rs(Ae);Mn(i,ce,$e),Qe?(h.array.next({name:ce,values:rs(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Ne.shouldDirty&&h.state.next({name:ce,dirtyFields:u2(n,i),isDirty:D(ce,$e)})):Pe&&!Pe._f&&!Tl($e)?H(ce,$e,Ne):U(ce,$e,Ne),UP(ce,l)&&h.state.next({...r,name:ce}),h.state.next({name:o.mount?ce:void 0,values:rs(i)})},V=async ce=>{o.mount=!0;const Ae=ce.target;let Ne=Ae.name,Pe=!0;const Qe=cr(a,Ne),$e=Ge=>{Pe=Number.isNaN(Ge)||pg(Ge)&&isNaN(Ge.getTime())||bm(Ge,cr(i,Ne,Ge))},et=qv(t.mode),Ke=qv(t.reValidateMode);if(Qe){let Ge,nt;const bt=Ae.type?nZ(Qe._f):Vpt(ce),ut=ce.type===ZJ.BLUR||ce.type===ZJ.FOCUS_OUT,ze=!agt(Qe._f)&&!t.resolver&&!cr(r.errors,Ne)&&!Qe._f.deps||igt(ut,cr(r.touchedFields,Ne),r.isSubmitted,Ke,et),Tt=UP(Ne,l,ut);Mn(i,Ne,bt),ut?(!Ae||!Ae.readOnly)&&(Qe._f.onBlur&&Qe._f.onBlur(ce),c&&c(0)):Qe._f.onChange&&Qe._f.onChange(ce);const ir=_(Ne,bt,ut),Kt=!Sl(ir)||Tt;if(!ut&&h.state.next({name:Ne,type:ce.type,values:rs(i)}),ze)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?ut&&x():ut||x()),Kt&&h.state.next({name:Ne,...Tt?{}:ir});if(!ut&&Tt&&h.state.next({...r}),t.resolver){const{errors:Cr}=await j([Ne]);if($e(bt),Pe){const $r=iZ(r.errors,a,Ne),br=iZ(Cr,a,$r.name||Ne);Ge=br.error,Ne=br.name,nt=Sl(Cr)}}else v([Ne],!0),Ge=(await QP(Qe,l.disabled,i,m,t.shouldUseNativeValidation))[Ne],v([Ne]),$e(bt),Pe&&(Ge?nt=!1:(d.isValid||f.isValid)&&(nt=await B(a,!0)));Pe&&(Qe._f.deps&&J(Qe._f.deps),O(Ne,nt,Ge,ir))}},G=(ce,Ae)=>{if(cr(r.errors,Ae)&&ce.focus)return ce.focus(),1},J=async(ce,Ae={})=>{let Ne,Pe;const Qe=xc(ce);if(t.resolver){const $e=await S(as(ce)?ce:Qe);Ne=Sl($e),Pe=ce?!Qe.some(et=>cr($e,et)):Ne}else ce?(Pe=(await Promise.all(Qe.map(async $e=>{const et=cr(a,$e);return await B(et&&et._f?{[$e]:et}:et)}))).every(Boolean),!(!Pe&&!r.isValid)&&x()):Pe=Ne=await B(a);return h.state.next({...!hA(ce)||(d.isValid||f.isValid)&&Ne!==r.isValid?{}:{name:ce},...t.resolver||!ce?{isValid:Ne}:{},errors:r.errors}),Ae.shouldFocus&&!Pe&&yb(a,G,ce?Qe:l.mount),Pe},W=ce=>{const Ae={...o.mount?i:n};return as(ce)?Ae:hA(ce)?cr(Ae,ce):ce.map(Ne=>cr(Ae,Ne))},Z=(ce,Ae)=>({invalid:!!cr((Ae||r).errors,ce),isDirty:!!cr((Ae||r).dirtyFields,ce),error:cr((Ae||r).errors,ce),isValidating:!!cr(r.validatingFields,ce),isTouched:!!cr((Ae||r).touchedFields,ce)}),M=ce=>{ce&&xc(ce).forEach(Ae=>Ys(r.errors,Ae)),h.state.next({errors:ce?r.errors:{}})},F=(ce,Ae,Ne)=>{const Pe=(cr(a,ce,{_f:{}})._f||{}).ref,Qe=cr(r.errors,ce)||{},{ref:$e,message:et,type:Ke,...Ge}=Qe;Mn(r.errors,ce,{...Ge,...Ae,ref:Pe}),h.state.next({name:ce,errors:r.errors,isValid:!1}),Ne&&Ne.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},X=(ce,Ae)=>Vd(ce)?h.state.subscribe({next:Ne=>"values"in Ne&&ce(k(void 0,Ae),Ne)}):k(ce,Ae,!0),Y=ce=>h.state.subscribe({next:Ae=>{sgt(ce.name,Ae.name,ce.exact)&&ngt(Ae,ce.formState||d,xe,ce.reRenderRoot)&&ce.callback({values:{...i},...r,...Ae,defaultValues:n})}}).unsubscribe,ae=ce=>(o.mount=!0,f={...f,...ce.formState},Y({...ce,formState:f})),le=(ce,Ae={})=>{for(const Ne of ce?xc(ce):l.mount)l.mount.delete(Ne),l.array.delete(Ne),Ae.keepValue||(Ys(a,Ne),Ys(i,Ne)),!Ae.keepError&&Ys(r.errors,Ne),!Ae.keepDirty&&Ys(r.dirtyFields,Ne),!Ae.keepTouched&&Ys(r.touchedFields,Ne),!Ae.keepIsValidating&&Ys(r.validatingFields,Ne),!t.shouldUnregister&&!Ae.keepDefaultValue&&Ys(n,Ne);h.state.next({values:rs(i)}),h.state.next({...r,...Ae.keepDirty?{isDirty:D()}:{}}),!Ae.keepIsValid&&x()},ie=({disabled:ce,name:Ae})=>{(tA(ce)&&o.mount||ce||l.disabled.has(Ae))&&(ce?l.disabled.add(Ae):l.disabled.delete(Ae))},ne=(ce,Ae={})=>{let Ne=cr(a,ce);const Pe=tA(Ae.disabled)||tA(t.disabled);return Mn(a,ce,{...Ne||{},_f:{...Ne&&Ne._f?Ne._f:{ref:{name:ce}},name:ce,mount:!0,...Ae}}),l.mount.add(ce),Ne?ie({disabled:tA(Ae.disabled)?Ae.disabled:t.disabled,name:ce}):T(ce,!0,Ae.value),{...Pe?{disabled:Ae.disabled||t.disabled}:{},...t.progressive?{required:!!Ae.required,min:d2(Ae.min),max:d2(Ae.max),minLength:d2(Ae.minLength),maxLength:d2(Ae.maxLength),pattern:d2(Ae.pattern)}:{},name:ce,onChange:V,onBlur:V,ref:Qe=>{if(Qe){ne(ce,Ae),Ne=cr(a,ce);const $e=as(Qe.value)&&Qe.querySelectorAll&&Qe.querySelectorAll("input,select,textarea")[0]||Qe,et=Jpt($e),Ke=Ne._f.refs||[];if(et?Ke.find(Ge=>Ge===$e):$e===Ne._f.ref)return;Mn(a,ce,{_f:{...Ne._f,...et?{refs:[...Ke.filter(mO),$e,...Array.isArray(cr(n,ce))?[{}]:[]],ref:{type:$e.type,name:ce}}:{ref:$e}}}),T(ce,!1,void 0,$e)}else Ne=cr(a,ce,{}),Ne._f&&(Ne._f.mount=!1),(t.shouldUnregister||Ae.shouldUnregister)&&!(Gpt(l.array,ce)&&o.action)&&l.unMount.add(ce)}}},oe=()=>t.shouldFocusError&&yb(a,G,l.mount),we=ce=>{tA(ce)&&(h.state.next({disabled:ce}),yb(a,(Ae,Ne)=>{const Pe=cr(a,Ne);Pe&&(Ae.disabled=Pe._f.disabled||ce,Array.isArray(Pe._f.refs)&&Pe._f.refs.forEach(Qe=>{Qe.disabled=Pe._f.disabled||ce}))},0,!1))},K=(ce,Ae)=>async Ne=>{let Pe;Ne&&(Ne.preventDefault&&Ne.preventDefault(),Ne.persist&&Ne.persist());let Qe=rs(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:$e,values:et}=await j();r.errors=$e,Qe=rs(et)}else await B(a);if(l.disabled.size)for(const $e of l.disabled)Ys(Qe,$e);if(Ys(r.errors,"root"),Sl(r.errors)){h.state.next({errors:{}});try{await ce(Qe,Ne)}catch($e){Pe=$e}}else Ae&&await Ae({...r.errors},Ne),oe(),setTimeout(oe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Sl(r.errors)&&!Pe,submitCount:r.submitCount+1,errors:r.errors}),Pe)throw Pe},Ee=(ce,Ae={})=>{cr(a,ce)&&(as(Ae.defaultValue)?Q(ce,rs(cr(n,ce))):(Q(ce,Ae.defaultValue),Mn(n,ce,rs(Ae.defaultValue))),Ae.keepTouched||Ys(r.touchedFields,ce),Ae.keepDirty||(Ys(r.dirtyFields,ce),r.isDirty=Ae.defaultValue?D(ce,rs(cr(n,ce))):D()),Ae.keepError||(Ys(r.errors,ce),d.isValid&&x()),h.state.next({...r}))},_e=(ce,Ae={})=>{const Ne=ce?rs(ce):n,Pe=rs(Ne),Qe=Sl(ce),$e=Qe?n:Pe;if(Ae.keepDefaultValues||(n=Ne),!Ae.keepValues){if(Ae.keepDirtyValues){const et=new Set([...l.mount,...Object.keys(u2(n,i))]);for(const Ke of Array.from(et))cr(r.dirtyFields,Ke)?Mn($e,Ke,cr(i,Ke)):Q(Ke,cr($e,Ke))}else{if(dU&&as(ce))for(const et of l.mount){const Ke=cr(a,et);if(Ke&&Ke._f){const Ge=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(VS(Ge)){const nt=Ge.closest("form");if(nt){nt.reset();break}}}}if(Ae.keepFieldsRef)for(const et of l.mount)Q(et,cr($e,et));else a={}}i=t.shouldUnregister?Ae.keepDefaultValues?rs(n):{}:rs($e),h.array.next({values:{...$e}}),h.state.next({values:{...$e}})}l={mount:Ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Ae.keepIsValid||!!Ae.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:Ae.keepSubmitCount?r.submitCount:0,isDirty:Qe?!1:Ae.keepDirty?r.isDirty:!!(Ae.keepDefaultValues&&!bm(ce,n)),isSubmitted:Ae.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Qe?{}:Ae.keepDirtyValues?Ae.keepDefaultValues&&i?u2(n,i):r.dirtyFields:Ae.keepDefaultValues&&ce?u2(n,ce):Ae.keepDirty?r.dirtyFields:{},touchedFields:Ae.keepTouched?r.touchedFields:{},errors:Ae.keepErrors?r.errors:{},isSubmitSuccessful:Ae.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Ce=(ce,Ae)=>_e(Vd(ce)?ce(i):ce,Ae),de=(ce,Ae={})=>{const Ne=cr(a,ce),Pe=Ne&&Ne._f;if(Pe){const Qe=Pe.refs?Pe.refs[0]:Pe.ref;Qe.focus&&(Qe.focus(),Ae.shouldSelect&&Vd(Qe.select)&&Qe.select())}},xe=ce=>{r={...r,...ce}},ye={control:{register:ne,unregister:le,getFieldState:Z,handleSubmit:K,setError:F,_subscribe:Y,_runSchema:j,_focusError:oe,_getWatch:k,_getDirty:D,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:C,_getFieldArray:R,_reset:_e,_resetDefaultValues:()=>Vd(t.defaultValues)&&t.defaultValues().then(ce=>{Ce(ce,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:we,_subjects:h,_proxyFormState:d,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(ce){o=ce},get _defaultValues(){return n},get _names(){return l},set _names(ce){l=ce},get _formState(){return r},get _options(){return t},set _options(ce){t={...t,...ce}}},subscribe:ae,trigger:J,register:ne,handleSubmit:K,watch:X,setValue:Q,getValues:W,reset:Ce,resetField:Ee,clearErrors:M,unregister:le,setError:F,setFocus:de,getFieldState:Z};return{...ye,formControl:ye}}var om=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},pO=(e,t,r={})=>r.shouldFocus||as(r.shouldFocus)?r.focusName||`${e}.${as(r.focusIndex)?t:r.focusIndex}.`:"",gO=(e,t)=>[...e,...xc(t)],xO=e=>Array.isArray(e)?e.map(()=>{}):void 0;function vO(e,t,r){return[...e.slice(0,t),...xc(r),...e.slice(t)]}var bO=(e,t,r)=>Array.isArray(e)?(as(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],yO=(e,t)=>[...xc(t),...xc(e)];function ugt(e,t){let r=0;const a=[...e];for(const n of t)a.splice(n-r,1),r++;return h3(a).length?a:[]}var wO=(e,t)=>as(t)?[]:ugt(e,xc(t).sort((r,a)=>r-a)),NO=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},lZ=(e,t,r)=>(e[t]=r,e);function dgt(e){const t=Kpt(),{control:r=t.control,name:a,keyName:n="id",shouldUnregister:i,rules:o}=e,[l,c]=ct.useState(r._getFieldArray(a)),u=ct.useRef(r._getFieldArray(a).map(om)),d=ct.useRef(l),f=ct.useRef(!1);d.current=l,r._names.array.add(a),ct.useMemo(()=>o&&r.register(a,o),[r,o,a]),Qhe(()=>r._subjects.array.subscribe({next:({values:_,name:O})=>{if(O===a||!O){const j=cr(_,a);Array.isArray(j)&&(c(j),u.current=j.map(om))}}}).unsubscribe,[r,a]);const h=ct.useCallback(_=>{f.current=!0,r._setFieldArray(a,_)},[r,a]),m=(_,O)=>{const j=xc(rs(_)),S=gO(r._getFieldArray(a),j);r._names.focus=pO(a,S.length-1,O),u.current=gO(u.current,j.map(om)),h(S),c(S),r._setFieldArray(a,S,gO,{argA:xO(_)})},g=(_,O)=>{const j=xc(rs(_)),S=yO(r._getFieldArray(a),j);r._names.focus=pO(a,0,O),u.current=yO(u.current,j.map(om)),h(S),c(S),r._setFieldArray(a,S,yO,{argA:xO(_)})},x=_=>{const O=wO(r._getFieldArray(a),_);u.current=wO(u.current,_),h(O),c(O),!Array.isArray(cr(r._fields,a))&&Mn(r._fields,a,void 0),r._setFieldArray(a,O,wO,{argA:_})},v=(_,O,j)=>{const S=xc(rs(O)),B=vO(r._getFieldArray(a),_,S);r._names.focus=pO(a,_,j),u.current=vO(u.current,_,S.map(om)),h(B),c(B),r._setFieldArray(a,B,vO,{argA:_,argB:xO(O)})},y=(_,O)=>{const j=r._getFieldArray(a);NO(j,_,O),NO(u.current,_,O),h(j),c(j),r._setFieldArray(a,j,NO,{argA:_,argB:O},!1)},N=(_,O)=>{const j=r._getFieldArray(a);bO(j,_,O),bO(u.current,_,O),h(j),c(j),r._setFieldArray(a,j,bO,{argA:_,argB:O},!1)},C=(_,O)=>{const j=rs(O),S=lZ(r._getFieldArray(a),_,j);u.current=[...S].map((B,L)=>!B||L===_?om():u.current[L]),h(S),c([...S]),r._setFieldArray(a,S,lZ,{argA:_,argB:j},!0,!1)},T=_=>{const O=xc(rs(_));u.current=O.map(om),h([...O]),c([...O]),r._setFieldArray(a,[...O],j=>j,{},!0,!1)};return ct.useEffect(()=>{if(r._state.action=!1,UP(a,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!qv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!qv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([a]).then(_=>{const O=cr(_.errors,a),j=cr(r._formState.errors,a);(j?!O&&j.type||O&&(j.type!==O.type||j.message!==O.message):O&&O.type)&&(O?Mn(r._formState.errors,a,O):Ys(r._formState.errors,a),r._subjects.state.next({errors:r._formState.errors}))});else{const _=cr(r._fields,a);_&&_._f&&!(qv(r._options.reValidateMode).isOnSubmit&&qv(r._options.mode).isOnSubmit)&&QP(_,r._names.disabled,r._formValues,r._options.criteriaMode===ed.all,r._options.shouldUseNativeValidation,!0).then(O=>!Sl(O)&&r._subjects.state.next({errors:Khe(r._formState.errors,O,a)}))}r._subjects.state.next({name:a,values:rs(r._formValues)}),r._names.focus&&yb(r._fields,(_,O)=>{if(r._names.focus&&O.startsWith(r._names.focus)&&_.focus)return _.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,a,r]),ct.useEffect(()=>(!cr(r._formValues,a)&&r._setFieldArray(a),()=>{const _=(O,j)=>{const S=cr(r._fields,O);S&&S._f&&(S._f.mount=j)};r._options.shouldUnregister||i?r.unregister(a):_(a,!1)}),[a,r,n,i]),{swap:ct.useCallback(y,[h,a,r]),move:ct.useCallback(N,[h,a,r]),prepend:ct.useCallback(g,[h,a,r]),append:ct.useCallback(m,[h,a,r]),remove:ct.useCallback(x,[h,a,r]),insert:ct.useCallback(v,[h,a,r]),update:ct.useCallback(C,[h,a,r]),replace:ct.useCallback(T,[h,a,r]),fields:ct.useMemo(()=>l.map((_,O)=>({..._,[n]:u.current[O]||om()})),[l,n])}}function fgt(e={}){const t=ct.useRef(void 0),r=ct.useRef(void 0),[a,n]=ct.useState({isDirty:!1,isValidating:!1,isLoading:Vd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Vd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!Vd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=cgt(e);t.current={...l,formState:a}}const i=t.current.control;return i._options=e,Qhe(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),ct.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ct.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ct.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ct.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ct.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==a.isDirty&&i._subjects.state.next({isDirty:o})}},[i,a.isDirty]),ct.useEffect(()=>{e.values&&!bm(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ct.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Wpt(a,i),t.current}const HP=pt(Ar,"alternancias");async function Agt(e){return(await Yr(HP,{...e,createdAt:qa(),updatedAt:qa()})).id}async function hgt({especialidad:e,pageSize:t=10,lastDoc:r}){let a=_t(HP,Gt("createdAt","desc"),hl(t));e&&(a=_t(HP,rr("especialidad","==",e),Gt("createdAt","desc"),hl(t))),r&&(a=_t(a,Lte(r)));const n=await _r(a);return{items:n.docs.map(o=>({id:o.id,...o.data()})),lastDoc:n.docs[n.docs.length-1]}}async function mgt(e,t){const r=$t(Ar,"alternancias",e);await Ui(r,{...t,updatedAt:qa()})}async function pgt(e){const t=$t(Ar,"alternancias",e);await Ja(t)}async function ggt(e,t,r){const a=pt(Ar,"alternancias",e,t);await Yr(a,{...r,createdAt:qa()})}async function xgt(e,t){const r=pt(Ar,"alternancias",e,t);return(await _r(r)).docs.map(n=>({id:n.id,...n.data()}))}async function vgt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,a=l0(IN,r);await j_(a,t);const n=await w1(a);return await ggt(e,"evidencias",{url:n,path:r,nombre:t.name}),{url:n,path:r}}const qp=({title:e,icon:t,children:r,accent:a="indigo"})=>{const n={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return s.jsxs("div",{className:`rounded-2xl border ${n[a]} p-4 md:p-5 shadow-sm`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),s.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},Jo=({children:e,hint:t})=>s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&s.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),Kp=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return s.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},hh=({title:e,onClick:t,tone:r="neutral",children:a,type:n="button",disabled:i})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return s.jsx("button",{type:n,title:e,onClick:t,disabled:i,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:a})},bgt=({className:e})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),ygt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(null),[f,h]=w.useState([]),[m,g]=w.useState(!1),{register:x,control:v,handleSubmit:y,reset:N,watch:C,setValue:T,formState:{isSubmitting:_}}=fgt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),O=dgt({control:v,name:"actividades"}),j=["COORDINACION_TP","SUBDIRECCION"],S=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!S||j.some(F=>S.includes(F))))return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[s.jsx(JCe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const L=F=>(F||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),D=(F,X)=>{var Y;return!F||!X?[]:((Y=WEe[F])==null?void 0:Y[X])??[]},k=C("especialidad"),R=C("modulos")||[],U=w.useMemo(()=>k?GEe[k]??[]:[],[k]),H=w.useMemo(()=>k?KEe[k]??[]:[],[k]);w.useEffect(()=>{T("curso",[]),T("modulos",[]);const F=[...C("actividades")||[]].map(X=>({...X,modulo:"",oa:""}));T("actividades",F)},[k]),w.useEffect(()=>{const F=[...C("actividades")||[]].map(X=>X.modulo&&!R.includes(X.modulo)?{...X,modulo:"",oa:""}:X);T("actividades",F)},[R]);const Q=async()=>{o(!0);const{items:F}=await hgt({});r(F),o(!1)};w.useEffect(()=>{Q()},[]);const V=async F=>{a?await mgt(a,{...F}):await Agt({...F,createdBy:(e==null?void 0:e.email)||"desconocido"}),N(),n(null),await Q()},G=F=>{const X=Array.isArray(F.curso)?F.curso:F.curso?[F.curso]:[],Y=Array.isArray(F.modulos)?F.modulos.map(le=>L(le)):[],ae=Array.isArray(F.actividades)?F.actividades.map(le=>({...le,modulo:le!=null&&le.modulo?L(le.modulo):"",oa:(le==null?void 0:le.oa)||""})):[];N({...F,curso:X,modulos:Y,actividades:ae}),n(F.id),window.scrollTo({top:0,behavior:"smooth"})},J=async F=>{confirm("¿Eliminar esta alternancia?")&&(await pgt(F),await Q())},W=async(F,X)=>{await vgt(F,X),alert("Evidencia subida correctamente")},Z=async F=>{g(!0);const X=Array.isArray(F.curso)?F.curso:F.curso?[F.curso]:[],Y=Array.isArray(F.modulos)?F.modulos:[],ae=Array.isArray(F.actividades)?F.actividades.map(ie=>({fecha:(ie==null?void 0:ie.fecha)||"",tipo:(ie==null?void 0:ie.tipo)||"",actividad:(ie==null?void 0:ie.actividad)||"",lugar:(ie==null?void 0:ie.lugar)||"",evidencias:(ie==null?void 0:ie.evidencias)||"",modulo:(ie==null?void 0:ie.modulo)||"",oa:(ie==null?void 0:ie.oa)||""})):[],le={...F,curso:X,modulos:Y,actividades:ae};d(le);try{const ie=await xgt(F.id,"evidencias");h(ie)}catch{h([])}c(!0),g(!1)},M=F=>{const X=Array.from(F.currentTarget.selectedOptions).map(Y=>Y.value);T("curso",X,{shouldDirty:!0})};return s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:s.jsx(Ob,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),s.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(hh,{title:"Nuevo plan",onClick:()=>{N(),n(null)},tone:"neutral",children:[s.jsx(Oo,{className:"w-4 h-4"}),"Limpiar"]}),s.jsxs(hh,{title:"Guardar",type:"submit",tone:"success",disabled:_,children:[_?s.jsx(Di,{className:"w-4 h-4 animate-spin"}):s.jsx(gl,{className:"w-4 h-4"}),"Guardar"]})]})]})}),s.jsx(qp,{title:"Planes guardados",icon:s.jsx(Gh,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i?s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(Di,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?s.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(F=>s.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[s.jsx(wm,{className:"w-4 h-4 text-indigo-600"}),F.especialidad]}),s.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[s.jsx(Kp,{tone:"indigo",children:Array.isArray(F.curso)?F.curso.join(", "):F.curso}),s.jsx(Kp,{tone:"sky",children:F.institucion}),(Array.isArray(F.tipoAlternancia)?F.tipoAlternancia:[]).slice(0,2).map(X=>s.jsx(Kp,{tone:"emerald",children:X},X))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(hh,{title:"Ver",onClick:()=>Z(F),children:[s.jsx(bgt,{className:"w-4 h-4"})," Ver"]}),s.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[s.jsx(E1,{className:"w-4 h-4"}),s.jsx("input",{type:"file",className:"hidden",onChange:X=>X.target.files&&W(F.id,X.target.files[0])}),"Evidencia"]}),s.jsxs(hh,{title:"Editar",onClick:()=>G(F),children:[s.jsx(Iw,{className:"w-4 h-4"})," Editar"]}),s.jsxs(hh,{title:"Eliminar",onClick:()=>J(F.id),tone:"danger",children:[s.jsx(Da,{className:"w-4 h-4"})," Eliminar"]})]})]})},F.id))})}),l&&u&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),s.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[s.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:s.jsx(Ob,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Visualización detallada"})]})]}),s.jsxs(hh,{title:"Cerrar",onClick:()=>c(!1),children:[s.jsx(Oo,{className:"w-4 h-4"})," Cerrar"]})]}),s.jsxs("div",{className:"p-5 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(Jo,{children:"Especialidad"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[s.jsx(wm,{className:"w-4 h-4 text-indigo-600"})," ",u.especialidad||"-"]})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(Jo,{children:"Institución"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[s.jsx(Zv,{className:"w-4 h-4 text-sky-600"})," ",u.institucion||"-"]})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(Jo,{children:"Cursos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(u.curso||[]).map(F=>s.jsx(Kp,{tone:"sky",children:F},F))})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(Jo,{children:"Tipos de Alternancia"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(u.tipoAlternancia||[]).map(F=>s.jsx(Kp,{tone:"emerald",children:F},F))})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(Jo,{children:"Módulos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(u.modulos||[]).map(F=>s.jsx(Kp,{tone:"indigo",children:F},F))})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[s.jsx(Jo,{children:"Creado por"}),s.jsx("div",{className:"text-slate-700 text-sm",children:u.createdBy||"-"})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentación técnico‑pedagógica"}),s.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.fundamentacion||"—"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[s.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:s.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),u.actividades&&u.actividades.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Fecha"}),s.jsx("th",{className:"p-2 text-left",children:"Tipo"}),s.jsx("th",{className:"p-2 text-left",children:"Actividad"}),s.jsx("th",{className:"p-2 text-left",children:"Lugar"}),s.jsx("th",{className:"p-2 text-left",children:"Módulo"}),s.jsx("th",{className:"p-2 text-left",children:"OA"}),s.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),s.jsx("tbody",{className:"divide-y",children:u.actividades.map((F,X)=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 text-slate-700",children:F.fecha||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:F.tipo||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:F.actividad||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:F.lugar||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:F.modulo||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:F.oa||"—"}),s.jsx("td",{className:"p-2 text-slate-700",children:F.evidencias||"—"})]},X))})]})}):s.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(u.equipo||[]).length>0?s.jsx("ul",{className:"space-y-1 text-sm",children:u.equipo.map((F,X)=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700",children:F.nombre||"—"}),s.jsx("span",{className:"text-slate-500",children:F.rol||""})]},X))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(u.contrapartes||[]).length>0?s.jsx("ul",{className:"space-y-1 text-sm",children:u.contrapartes.map((F,X)=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700",children:F.nombre||"—"}),s.jsx("span",{className:"text-slate-500",children:F.rol||""})]},X))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(u.tutores||[]).length>0?s.jsx("ul",{className:"space-y-1 text-sm",children:u.tutores.map((F,X)=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-700",children:F.nombre||"—"}),s.jsx("span",{className:"text-slate-500",children:F.rol||""})]},X))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Análisis Curricular"}),s.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.analisisCurricular||"—"})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[s.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&s.jsx("span",{className:"text-sm text-slate-500",children:"Cargando…"})]}),(f||[]).length>0?s.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(F=>s.jsxs("a",{href:F.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[s.jsx(aF,{className:"w-5 h-5 text-emerald-600"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:F.nombre||"archivo"}),s.jsx("div",{className:"text-xs text-slate-500 truncate",children:F.path||""})]})]},F.id))}):s.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),s.jsxs("form",{onSubmit:y(V),className:"mt-6 space-y-5",children:[s.jsx(qp,{title:"Contexto de la Alternancia",icon:s.jsx(Zv,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Jo,{children:"Especialidad"}),s.jsxs("div",{className:"relative",children:[s.jsx(wm,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),s.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[s.jsx("option",{value:"",children:"Selecciona…"}),VEe.map(F=>s.jsx("option",{value:F,children:F},F))]})]})]}),s.jsxs("div",{children:[s.jsx(Jo,{children:"Institución"}),s.jsxs("div",{className:"relative",children:[s.jsx(Zv,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),s.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[s.jsx("option",{value:"",children:"Selecciona…"}),$Ee.map(F=>s.jsx("option",{value:F,children:F},F))]})]})]}),s.jsxs("div",{children:[s.jsx(Jo,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ei,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),s.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:M,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!k,children:k?U.map(F=>s.jsx("option",{value:F,children:F},F)):s.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(C("curso")||[]).map(F=>s.jsx(Kp,{tone:"sky",children:F},F))})]})]})}),s.jsx(qp,{title:"Módulos implicados",icon:s.jsx(__,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:k?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:H.map(F=>s.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[s.jsx("input",{type:"checkbox",value:F,className:"mt-1 accent-emerald-600",...x("modulos")}),s.jsx("span",{className:"text-sm text-slate-700",children:F})]},F))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),s.jsx(qp,{title:"Tipo de Alternancia",icon:s.jsx(rb,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:s.jsx("div",{className:"flex gap-3 flex-wrap",children:qEe.map(F=>s.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[s.jsx("input",{type:"checkbox",value:F,className:"accent-amber-600",...x("tipoAlternancia")}),s.jsx("span",{className:"text-slate-700",children:F})]},F))})}),s.jsx(qp,{title:"Fundamentación técnico‑pedagógica",icon:s.jsx(Swe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),s.jsx(qp,{title:"Plan de actividades",icon:s.jsx(Gh,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:s.jsxs("div",{className:"space-y-3",children:[O.fields.map((F,X)=>{const Y=C(`actividades.${X}.modulo`)||"",ae=D(k,Y);return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Jo,{children:"Fecha"}),s.jsx(Io,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),s.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${X}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(Jo,{children:"Tipo"}),s.jsx("input",{placeholder:"Pasantía, visita, taller...",...x(`actividades.${X}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(Jo,{children:"Actividad"}),s.jsx("input",{placeholder:"Descripción breve",...x(`actividades.${X}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Jo,{children:"Lugar"}),s.jsx(Tw,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),s.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${X}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Jo,{children:"Evidencias"}),s.jsx(aF,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),s.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${X}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(Jo,{children:"Módulo"}),s.jsxs("select",{...x(`actividades.${X}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!k||R.length===0,children:[s.jsx("option",{value:"",children:!k&&"Elige especialidad arriba"||R.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),R.map(le=>s.jsx("option",{value:le,children:le},le))]})]}),s.jsxs("div",{children:[s.jsx(Jo,{children:"Objetivo de Aprendizaje (OA)"}),s.jsxs("select",{...x(`actividades.${X}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!Y||ae.length===0,children:[s.jsx("option",{value:"",children:Y?ae.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),ae.map(le=>s.jsx("option",{value:le,children:le},le))]})]})]}),s.jsx("div",{className:"mt-3 flex justify-end",children:s.jsxs(hh,{title:"Eliminar fila",onClick:()=>O.remove(X),tone:"danger",children:[s.jsx(Da,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},F.id)}),s.jsxs(hh,{title:"Agregar actividad",onClick:()=>O.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[s.jsx(Li,{className:"w-4 h-4"})," Agregar actividad"]})]})}),s.jsx(qp,{title:"Análisis Curricular",icon:s.jsx(wm,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),s.jsx("div",{className:"flex items-center justify-end gap-2",children:s.jsxs(hh,{title:"Guardar",type:"submit",tone:"success",disabled:_,children:[_?s.jsx(Di,{className:"w-4 h-4 animate-spin"}):s.jsx(cn,{className:"w-4 h-4"}),"Guardar"]})})]})]})},zP=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],wgt={INCIPIENTE:25},Ngt=["AULA","TALLER","EMPRESA"],cZ={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Cgt="tp_especialidades",Egt="tp_modulos",jgt="tp_resultados_aprendizaje",kgt="tp_criterios_evaluacion",VP="tp_rubricas",Whe="tp_evidencias",Xhe="tp_evaluaciones_comp",$P="config_evaluacion/competencias",uZ=()=>Date.now(),Yhe=async()=>{const e=await $h($t(Ar,$P));return e.exists()?e.data():(await ii($t(Ar,$P),cZ),cZ)},Sgt=(e,t)=>{const{escalaMin:r,escalaMax:a,porcentajeAprobacion:n,notaAprobacion:i}=t;if(e<=n){const o=(i-r)/(n-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(a-i)/(100-n||1);return Number((i+o*(e-n)).toFixed(1))}},_gt=async(e,t)=>{const r=await Yhe();let a=0,n=0;Object.entries(t).forEach(([l,c])=>{n+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??wgt.INCIPIENTE;a+=d*c/100});const i=n?a/n*100:0,o=Sgt(i,r);return{puntajeTotal:a,porcentaje:i,nota:o}},Bgt=e=>{const t=_t(pt(Ar,Cgt),Gt("nombre"));return ar(t,r=>{e(r.docs.map(a=>({id:a.id,...a.data()})))})},Tgt=async e=>{const t=_t(pt(Ar,Egt),rr("especialidadId","==",e),Gt("nombre"));return(await _r(t)).docs.map(a=>({id:a.id,...a.data()}))},Igt=async e=>{const t=_t(pt(Ar,jgt),rr("moduloId","==",e),Gt("codigo"));return(await _r(t)).docs.map(a=>({id:a.id,...a.data()}))},Ogt=async e=>{const t=_t(pt(Ar,kgt),rr("raId","==",e),Gt("codigo"));return(await _r(t)).docs.map(a=>({id:a.id,...a.data()}))},Fgt=async e=>e.id?(await Ui($t(Ar,VP,e.id),{...e,updatedAt:uZ()}),e.id):(await Yr(pt(Ar,VP),{...e,updatedAt:uZ()})).id,Jhe=async e=>{const t=_t(pt(Ar,VP),rr("raId","==",e)),a=(await _r(t)).docs[0];return a?{id:a.id,...a.data()}:null},Dgt=async(e,t)=>{const r=l0(IN,t),a=await j_(r,e);return{url:await w1(a.ref),path:a.ref.fullPath}},Pgt=e=>Yr(pt(Ar,Whe),e),Rgt=(e,t)=>{const r=_t(pt(Ar,Whe),rr("raId","==",e),Gt("fecha","desc"));return ar(r,a=>{t(a.docs.map(n=>({id:n.id,...n.data()})))})},Lgt=async e=>{const t=await Jhe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:a,porcentaje:n,nota:i}=await _gt(e.ceIdScores,r);return Yr(pt(Ar,Xhe),{...e,puntajeTotal:a,porcentaje:n,nota:i})},Mgt=(e,t)=>{const r=_t(pt(Ar,Xhe),rr("raId","==",e),Gt("fecha","desc"));return ar(r,a=>{t(a.docs.map(n=>({id:n.id,...n.data()})))})},Ugt=async e=>{const t=await Yhe();await ii($t(Ar,$P),{...t,...e},{merge:!0})},Qgt=({raId:e,ces:t,rubrica:r,onSaved:a,currentUserId:n})=>{const[i,o]=w.useState(null);if(w.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:zP,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:n}:null)},[e,r,t,n]),!e)return s.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!i)return null;const l=(f,h)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=w.useMemo(()=>Object.values(i.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[i.ponderacionCE]),d=async()=>{const f=await Fgt(i);a==null||a(f)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),s.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),s.jsx("div",{className:"space-y-4",children:t.map(f=>s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),s.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:i.ponderacionCE[f.id]??0,onChange:h=>l(f.id,Number(h.target.value))}),s.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),s.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:zP.map(h=>{const m=i.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return s.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),s.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[s.jsx(gl,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar rúbrica"})]})})]})},Hgt=({raId:e,currentUser:t,evidencias:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState("AULA"),[u,d]=w.useState(null),[f,h]=w.useState(""),[m,g]=w.useState(!1);if(!e)return s.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!a)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${a}/${Date.now()}.${v}`,{url:N,path:C}=await Dgt(u,y);await Pgt({estudianteId:a,raId:e,ceId:i||void 0,url:N,tipo:zgt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:C}),d(null),h(""),n(""),o("")}finally{g(!1)}}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[s.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:a,onChange:v=>n(v.target.value)}),s.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:i,onChange:v=>o(v.target.value)}),s.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[s.jsx("option",{value:"AULA",children:"AULA"}),s.jsx("option",{value:"TALLER",children:"TALLER"}),s.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),s.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),s.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>h(v.target.value)}),s.jsxs("button",{onClick:x,disabled:m||!u||!a,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!a?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[s.jsx(E1,{className:"w-4 h-4"}),s.jsx("span",{children:"Subir evidencia"})]}),s.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>s.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[Vgt(v.tipo),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),s.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&s.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},zgt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},Vgt=e=>{switch(e){case"imagen":return s.jsx(ik,{className:"w-5 h-5 text-rose-600"});case"video":return s.jsx(TNe,{className:"w-5 h-5 text-indigo-600"});case"documento":return s.jsx(Pl,{className:"w-5 h-5 text-emerald-600"});default:return s.jsx(E1,{className:"w-5 h-5 text-slate-500"})}},dZ=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],$gt=({raId:e})=>{const[t,r]=w.useState([]);if(w.useEffect(()=>{if(!e){r([]);return}const o=Mgt(e,r);return()=>o()},[e]),!e)return s.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const a=w.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"—";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),n=w.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),i=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Os.book_new(),c=Os.json_to_sheet(o);Os.book_append_sheet(l,c,"Evaluaciones_RA"),B1(l,`evaluaciones_${e}.xlsx`)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[s.jsx(fl,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),s.jsxs("button",{onClick:i,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[s.jsx(of,{className:"w-4 h-4"}),s.jsx("span",{children:"Descargar CSV"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"h-72 border rounded-xl p-3",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:a,children:[s.jsx(Kd,{dataKey:"curso"}),s.jsx(Wd,{domain:[1,7]}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"promedio"})]})})}),s.jsx("div",{className:"h-72 border rounded-xl p-3",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(j4,{children:[s.jsx(iC,{data:n,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:n.map((o,l)=>s.jsx(Jh,{fill:dZ[l%dZ.length]},`c-${l}`))}),s.jsx(hc,{}),s.jsx(fx,{})]})})})]}),s.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},f2=({active:e,onClick:t,icon:r,label:a})=>s.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,s.jsx("span",{className:"font-medium",children:a})]}),Nv=({children:e,className:t})=>s.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),Ggt=({currentUser:e})=>{const[t,r]=w.useState("planificacion"),[a,n]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState({}),[m,g]=w.useState(null),[x,v]=w.useState([]);w.useEffect(()=>{const N=Bgt(n);return()=>N()},[]),w.useEffect(()=>{f.especialidadId?Tgt(f.especialidadId).then(o):o([]),h(N=>({...N,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),w.useEffect(()=>{f.moduloId?Igt(f.moduloId).then(c):c([]),h(N=>({...N,raId:void 0})),d([]),g(null)},[f.moduloId]),w.useEffect(()=>{if(f.raId){Ogt(f.raId).then(d),Jhe(f.raId).then(g);const N=Rgt(f.raId,v);return()=>N()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return s.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(__,{className:"w-6 h-6 text-indigo-600"}),s.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f2,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:s.jsx(Gh,{className:"w-4 h-4"}),label:"Planificar"}),s.jsx(f2,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:s.jsx(VCe,{className:"w-4 h-4"}),label:"Evaluar"}),s.jsx(f2,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:s.jsx(E1,{className:"w-4 h-4"}),label:"Evidencias"}),s.jsx(f2,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:s.jsx(fl,{className:"w-4 h-4"}),label:"Dashboard"}),s.jsx(f2,{active:t==="config",onClick:()=>r("config"),icon:s.jsx(Cre,{className:"w-4 h-4"}),label:"Config"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[s.jsx(Nv,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:N=>h({especialidadId:N.target.value}),children:[s.jsx("option",{value:"",children:"— Selecciona —"}),a.map(N=>s.jsx("option",{value:N.id,children:N.nombre},N.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:N=>h(C=>({...C,moduloId:N.target.value})),children:[s.jsx("option",{value:"",children:"— Selecciona —"}),i.map(N=>s.jsx("option",{value:N.id,children:N.nombre},N.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),s.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:N=>h(C=>({...C,raId:N.target.value})),children:[s.jsx("option",{value:"",children:"— Selecciona —"}),l.map(N=>s.jsxs("option",{value:N.id,children:[N.codigo," — ",N.enunciado.slice(0,60),N.enunciado.length>60?"…":""]},N.id))]})]})]})}),t==="planificacion"&&s.jsx(Nv,{children:s.jsx(Qgt,{raId:f.raId,ces:u,rubrica:m,onSaved:N=>{},currentUserId:e.id})}),t==="evaluar"&&s.jsxs(Nv,{children:[!y&&s.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&s.jsx(qgt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&s.jsx(Nv,{children:s.jsx(Hgt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&s.jsx(Nv,{children:s.jsx($gt,{raId:f.raId})}),t==="config"&&s.jsx(Nv,{children:s.jsx(Kgt,{})})]})]})},qgt=({raId:e,ces:t,currentUser:r})=>{const[a,n]=w.useState(""),[i,o]=w.useState(r.curso||""),[l,c]=w.useState("AULA"),[u,d]=w.useState(""),[f,h]=w.useState({}),m=(v,y,N)=>{h(C=>({...C,[v]:{nivel:y,puntaje:N}}))},g=a&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:a,curso:i,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await Lgt(v),d(""),h({}),n("")};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),s.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:a,onChange:v=>n(v.target.value),placeholder:"rut_o_uid"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),s.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:i,onChange:v=>o(v.target.value),placeholder:"p.ej. 3ºB"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),s.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:Ngt.map(v=>s.jsx("option",{value:v,children:v},v))})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[s.jsx(cn,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar evaluación"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),s.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:zP.map(y=>{var N;return s.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((N=f[v.id])==null?void 0:N.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),s.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},Kgt=()=>{const[e,t]=w.useState(60),[r,a]=w.useState(4),n=async()=>{await Ugt({porcentajeAprobacion:e,notaAprobacion:r})};return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),s.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:i=>t(Number(i.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),s.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:i=>a(Number(i.target.value))})]}),s.jsx("button",{onClick:n,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})};function Wgt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function Xgt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=Wgt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const Ygt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState({}),[l,c]=w.useState(!0),[u,d]=w.useState(!1),[f,h]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[C,T]=w.useState([]),[_,O]=w.useState(null),j=H=>{if(!H)return"";let Q=H.trim().toLowerCase();return Q=Q.replace(/°/g,"º"),Q=Q.replace(/\s+(medio|básico|basico)/g,""),Q=Q.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),Q=Q.replace(/^(\d)(?![º])/,"$1º"),Q=Q.replace(/\s+/g,"").toUpperCase(),Q};w.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const Q=j(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${Q})`);const[V,G]=await Promise.all([ai(()=>Promise.resolve().then(()=>DD),void 0).then(Z=>Z.obtenerSetsPreguntasPorCurso(Q)),ai(()=>Promise.resolve().then(()=>DD),void 0).then(Z=>Z.obtenerSetsPreguntasPorEstudiante(e.id))]),J=new Map;[...V,...G].forEach(Z=>J.set(Z.id,Z));const W=Array.from(J.values());r(W),B({porCurso:V.length,porEstudiante:G.length,total:W.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${V.length}, por estudiante: ${G.length}, total: ${W.length}`)}catch(Q){console.error("Error al cargar evaluaciones:",Q),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[S,B]=w.useState(null),L=async H=>{var Q,V;try{c(!0),o({}),v(null),g(null),h(!1),console.log(`[DEBUG] Seleccionando evaluación con ID: ${H}`);let G=await uw(H);if(console.log("[DEBUG] Evaluación completa obtenida:",G),console.log("[DEBUG] Preguntas en la evaluación:",((Q=G==null?void 0:G.preguntas)==null?void 0:Q.length)||0),G&&(G=Xgt(G),console.log("[DEBUG] Evaluación procesada con texto base asegurado"),n(G)),G!=null&&G.preguntas){const W=G.preguntas.some(Z=>Z.textoBase)||G.textoBase;if(console.log("[DEBUG] ¿La evaluación tiene texto base?",W),W){const Z=G.textoBase||((V=G.preguntas.find(M=>M.textoBase))==null?void 0:V.textoBase);console.log("[DEBUG] Texto base encontrado:",(Z==null?void 0:Z.substring(0,50))+"...")}}const J=await Que(e.id||"",H);if(console.log(`[DEBUG] Intentos existentes para esta evaluación: ${J.length}`),T(J),J.length>0){O(J[0]),h(!0);const W=await uw(H);if(W){n(W);const Z=J[0],M=W.preguntas.map(F=>{var Y;const X=((Y=Z.respuestas.find(ae=>ae.preguntaId===F.id))==null?void 0:Y.alternativaSeleccionada)||"";return{preguntaId:F.id,pregunta:F,respuestaSeleccionada:X,esCorrecta:X===F.respuestaCorrecta}});g({porcentajeLogro:Z.porcentajeLogro,nivelLogro:Z.nivelLogro,respuestasCorrectas:M.filter(F=>F.esCorrecta).length,totalPreguntas:W.preguntas.length,detalle:M})}}else{const W=await uw(H);if(W){const Z=[...W.preguntas].sort(()=>Math.random()-.5);Z.forEach(M=>{M.alternativas=[...M.alternativas].sort(()=>Math.random()-.5)}),n({...W,preguntas:Z}),N(Date.now())}}}catch(G){console.error("Error al seleccionar evaluación:",G),v("No se pudo cargar la evaluación seleccionada")}finally{c(!1)}},D=(H,Q)=>{o({...i,[H]:Q})},k=async()=>{if(a)try{const H=a.preguntas.map(Y=>Y.id),Q=Object.keys(i);if(Q.length<H.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${H.length-Q.length})`);return}d(!0);let V=0;const G=a.preguntas.map(Y=>{const ae=i[Y.id],le=ae===Y.respuestaCorrecta;return le&&V++,{preguntaId:Y.id,pregunta:Y,respuestaSeleccionada:ae,esCorrecta:le}}),J=a.preguntas.length,W=V/J*100;let Z;W>=80?Z="Adecuado":W>=50?Z="Elemental":Z="Insuficiente";const M=Date.now(),F=y?Math.floor((M-y)/1e3):0,X={setId:a.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(i).map(([Y,ae])=>{const le=a.preguntas.find(ne=>ne.id===Y),ie=le==null?void 0:le.respuestaCorrecta;return{preguntaId:Y,alternativaSeleccionadaId:String(ae),esCorrecta:String(ae)===ie}}),porcentajeAciertos:W,nivelLogro:Z,fechaEnvio:new Date().toISOString()};await Uue(X),g({porcentajeLogro:W,nivelLogro:Z,respuestasCorrectas:V,totalPreguntas:J,detalle:G}),h(!0)}catch(H){console.error("Error al enviar respuestas:",H),v("Ocurrió un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},R=H=>{const Q=Math.floor(H/60),V=H%60;return`${Q}:${V<10?"0":""}${V}`},U=H=>{switch(H){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(bA,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):s.jsx("div",{className:"space-y-6",children:a?f?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",a.titulo]}),s.jsx("button",{onClick:()=>{n(null),g(null),h(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),s.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${U((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),s.jsxs("div",{className:"mt-4",children:[s.jsx(qwe,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),s.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),s.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),s.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:s.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),s.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[s.jsx("span",{children:"0%"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100%"})]})]})}),s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),s.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((H,Q)=>s.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("h4",{className:"font-bold mb-2",children:[s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),H.pregunta.enunciado]}),s.jsx("div",{className:"ml-6 mt-3 space-y-2",children:H.pregunta.alternativas.map(V=>s.jsxs("div",{className:`flex items-start ${V.id===H.respuestaSeleccionada?V.id===H.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":V.id===H.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[s.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[V.id,")"]}),s.jsx("div",{children:V.texto}),V.id===H.respuestaSeleccionada&&V.id===H.pregunta.respuestaCorrecta&&s.jsx(cn,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),V.id===H.respuestaSeleccionada&&V.id!==H.pregunta.respuestaCorrecta&&s.jsx(nA,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),V.id!==H.respuestaSeleccionada&&V.id===H.pregunta.respuestaCorrecta&&s.jsx(cn,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},V.id))}),s.jsx("div",{className:"mt-4 text-sm",children:s.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[s.jsx("span",{className:"font-semibold",children:"Explicación:"})," ",H.pregunta.explicacion]})})]},H.preguntaId))}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx("button",{onClick:()=>{n(null),g(null),h(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:a.titulo}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[a.asignatura," - ",a.preguntas.length," preguntas"]})]}),s.jsx("button",{onClick:()=>{window.confirm("¿Está seguro que desea salir? Se perderán todas las respuestas.")&&n(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[s.jsx(Db,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[s.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),s.jsx("li",{children:"Solo tienes un intento para responder."}),s.jsx("li",{children:"Una vez enviado, podrás ver tu resultado y las respuestas correctas."}),s.jsx("li",{children:"No refresques ni cierres la página durante la evaluación."})]})]})]}),x&&s.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[s.jsx(nA,{className:"w-4 h-4 mr-2"}),x]}),(a.asignatura==="Lectura"||a.asignatura==="Competencia Lectora")&&(()=>{var Q,V;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let H=a.textoBase||((Q=a.preguntas.find(G=>G.textoBase))==null?void 0:Q.textoBase)||((V=a.preguntas[0])==null?void 0:V.textoBase);return console.log("[DEBUG] Texto base encontrado:",H?"SÍ":"NO"),H||(console.log("[WARNING] Es una evaluación de Lectura pero no tiene texto base"),a.descripcion&&a.descripcion.length>50&&(H=`⚠️ NOTA: El texto de comprensión no está disponible. La evaluación podría estar incompleta. Comunícate con tu profesor.

`+a.descripcion,console.log("[DEBUG] Usando descripción como texto base alternativo"))),H?s.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:s.jsx(Ds,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:s.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:s.jsx(uC,{content:H,context:"simce-texto-base"})})})]}):null})(),s.jsx("div",{className:"space-y-6",children:a.preguntas.map((H,Q)=>s.jsxs("div",{className:`p-4 rounded-lg border ${i[H.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[s.jsxs("h4",{className:"font-bold mb-2",children:[s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),H.enunciado]}),s.jsx("div",{className:"ml-6 mt-3 space-y-2",children:H.alternativas.map(V=>s.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${i[H.id]===V.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>D(H.id,V.id),children:[s.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${i[H.id]===V.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:i[H.id]===V.id&&s.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),s.jsxs("div",{className:"font-bold mr-2",children:[V.id,")"]}),s.jsx("div",{children:V.texto})]},V.id))}),!i[H.id]&&s.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},H.id))}),s.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[s.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[s.jsx(Ac,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:y&&s.jsxs(s.Fragment,{children:["Tiempo transcurrido: ",R(Math.floor((Date.now()-y)/1e3))]})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(i).length," de ",a.preguntas.length," respondidas"]}),s.jsx("button",{onClick:k,disabled:u||Object.keys(i).length!==a.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?s.jsxs(s.Fragment,{children:[s.jsx(bA,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Enviando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Nre,{className:"w-4 h-4"}),s.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),S&&s.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("strong",{children:"Debug:"})," Detectadas ",s.jsx("b",{children:S.porCurso})," por curso, ",s.jsx("b",{children:S.porEstudiante})," por asignación directa, ",s.jsx("b",{children:S.total})," total."]}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(aF,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):s.jsx("div",{className:"space-y-4",children:t.map(H=>s.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>L(H.id),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`p-2 rounded-md mr-4 ${H.asignatura==="Lectura"||H.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:H.asignatura==="Lectura"||H.asignatura==="Competencia Lectora"?s.jsx(Ds,{className:"w-6 h-6"}):s.jsx(t8,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:H.titulo}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:H.descripcion}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:H.asignatura}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[H.preguntas.length," preguntas"]}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(H.fechaAsignacion).toLocaleDateString()})]})]})]})},H.id))})]})})},Jgt=({currentUser:e})=>{const[t,r]=w.useState([]),[a,n]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState(null),[f,h]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState("general"),[y,N]=w.useState("todos"),C=H=>typeof(H==null?void 0:H.porcentajeAciertos)=="number"?H.porcentajeAciertos:typeof(H==null?void 0:H.porcentajeLogro)=="number"?H.porcentajeLogro:0,T=H=>{const Q=H&&(H.fechaEnvio||H.fechaRealizacion)||null;return Q?new Date(Q).toLocaleDateString():"-"},_=H=>Array.isArray(H==null?void 0:H.respuestas)?H.respuestas.filter(Q=>Q==null?void 0:Q.esCorrecta).length:typeof(H==null?void 0:H.respuestasCorrectas)=="number"?H.respuestasCorrectas:"-",O=H=>{const Q=H&&(H.tiempoRealizacion??H.duracionSegundos);if(typeof Q=="number"&&Q>0){const V=Math.floor(Q/60),G=(Q%60).toString().padStart(2,"0");return`${V}:${G}`}return"-"};w.useEffect(()=>{(async()=>{try{h(!0);const Q=await Hue(e.id||"");r(Q)}catch(Q){console.error("Error al cargar evaluaciones:",Q),g("No se pudieron cargar las evaluaciones")}finally{h(!1)}})()},[e]);const j=async H=>{try{h(!0),g(null);const Q=await uw(H);if(Q){n(Q);const V=Array.isArray(Q.cursosAsignados)?Q.cursosAsignados:[];if(V.length>0){const G=await xx(),J=Y=>{if(!Y)return"";let ae=Y.trim().toLowerCase();return ae=ae.replace(/°/g,"º"),ae=ae.replace(/\s+(medio|básico|basico)/g,""),ae=ae.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),ae=ae.replace(/^(\d)(?![º])/,"$1º"),ae=ae.replace(/\s+/g,"").toUpperCase(),ae},W=J(V[0]),Z=G.filter(Y=>Y.profile==="ESTUDIANTE"&&J(Y.curso||"")===W);c(Z);const M=Z.map(Y=>Y.id);let F=[];if(M.length>0){const{obtenerResultadosPorCurso:Y}=await ai(async()=>{const{obtenerResultadosPorCurso:ae}=await Promise.resolve().then(()=>DD);return{obtenerResultadosPorCurso:ae}},void 0);F=await Y(H,M)}else F=await FD(H);o(F);const X=await zue(H,V[0]);X&&d(X)}else{const G=await FD(H);o(G),c([]),d(null)}}}catch(Q){console.error("Error al seleccionar evaluación:",Q),g("No se pudo cargar la información de la evaluación seleccionada")}finally{h(!1)}},S=async()=>{console.log("Generando Excel...")},B=H=>{switch(H){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},L=H=>{switch(H){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},D=()=>{if(!u)return null;const{porcentajeAdecuado:H,porcentajeElemental:Q,porcentajeInsuficiente:V}=u;return s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribución por niveles de logro"}),s.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[s.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${H}%`}}),s.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${Q}%`}}),s.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${V}%`}})]}),s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),s.jsxs("span",{children:["Adecuado: ",H.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),s.jsxs("span",{children:["Elemental: ",Q.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),s.jsxs("span",{children:["Insuficiente: ",V.toFixed(1),"%"]})]})]})]})},k=()=>u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:s.jsx(Ei,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),s.jsx("div",{className:"text-2xl font-bold",children:u.totalEstudiantes})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:s.jsx(mre,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),s.jsxs("div",{className:"text-2xl font-bold",children:[u.promedioLogro.toFixed(1),"%"]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:s.jsx(bwe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),s.jsx("div",{className:`text-2xl font-bold ${B(u.nivelPredominante)}`,children:u.nivelPredominante})]})]})})]}),D(),s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadísticas por eje temático"}),s.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsx("div",{className:"space-y-4",children:u.porEjeTematico.map((H,Q)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-medium",children:H.eje}),s.jsxs("span",{className:"text-sm",children:[H.promedio.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:s.jsx("div",{className:`h-full rounded-full ${H.promedio>=80?"bg-green-500":H.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${H.promedio}%`}})})]},Q))})})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(bA,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),s.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),R=()=>{const Q=(l.length>0?l:[]).map(V=>({est:V,intento:i.find(G=>G.estudianteId===V.id)})).filter(({intento:V})=>y==="todos"?!0:V&&typeof V.nivelLogro=="string"&&V.nivelLogro.toLowerCase()===y);return s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:y,onChange:V=>N(V.target.value),children:[s.jsx("option",{value:"todos",children:"Todos los niveles"}),s.jsx("option",{value:"adecuado",children:"Adecuado"}),s.jsx("option",{value:"elemental",children:"Elemental"}),s.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),s.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),s.jsx("tbody",{children:Q.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:l.length===0?"No hay estudiantes detectados para el curso asignado o no hay intentos registrados.":"No hay datos para mostrar con los filtros seleccionados"})}):Q.map(({est:V,intento:G})=>s.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3",children:(G==null?void 0:G.estudianteNombre)||V.nombreCompleto||"—"}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:V.curso||(G==null?void 0:G.curso)||"-"}),s.jsx("td",{className:"px-4 py-3 font-semibold",children:G?C(G).toFixed(1)+"%":"—"}),s.jsx("td",{className:"px-4 py-3",children:G?s.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${L(G.nivelLogro)}`,children:G.nivelLogro}):s.jsx("span",{className:"text-slate-400",children:"—"})}),s.jsx("td",{className:"px-4 py-3",children:G?`${_(G)}/${(a==null?void 0:a.preguntas.length)||"-"}`:"—"}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:G?O(G):"—"}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:G?T(G):"—"})]},V.id))})]})})})]})},U=()=>!a||!(u!=null&&u.porPregunta)||!u.porPregunta.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(bA,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),s.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Análisis por pregunta"}),s.jsx("div",{className:"space-y-6",children:u.porPregunta.map((H,Q)=>{var G;const V=a.preguntas.find(J=>J.id===H.preguntaId);return V?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold mb-2",children:[s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),V.enunciado]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:"Eje temático:"})," ",V.ejeTematico||"No especificado"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),s.jsxs("div",{className:`text-xl font-bold ${H.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":H.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[H.porcentajeAcierto.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:s.jsx("div",{className:`h-full rounded-full ${H.porcentajeAcierto>=80?"bg-green-500":H.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${H.porcentajeAcierto}%`}})})}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribución de respuestas"}),s.jsx("div",{className:"space-y-2",children:H.distribucionRespuestas.map(J=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${J.alternativaId===V.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:J.alternativaId}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:s.jsx("div",{className:`h-full ${J.alternativaId===V.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${J.porcentaje}%`}})})}),s.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[J.porcentaje.toFixed(0),"%"]})]},J.alternativaId))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:s.jsxs("div",{className:"flex items-start",children:[s.jsxs("div",{className:"font-bold mr-2",children:[V.respuestaCorrecta,")"]}),s.jsx("div",{children:(G=V.alternativas.find(J=>J.id===V.respuestaCorrecta))==null?void 0:G.texto})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),s.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${H.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":H.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:H.porcentajeAcierto>=80?"Baja":H.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},H.preguntaId):null})})]});return f?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(bA,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando información..."})]}):s.jsx("div",{className:"space-y-6",children:a?s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:a.titulo}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[a.asignatura," • ",i.length," estudiantes evaluados"]}),Array.isArray(a.cursosAsignados)&&a.cursosAsignados.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[s.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),a.cursosAsignados.map((H,Q)=>s.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:H},H+Q))]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:S,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[s.jsx(of,{className:"w-4 h-4"}),s.jsx("span",{children:"Exportar"})]}),s.jsx("button",{onClick:()=>n(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),m&&s.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[s.jsx(nA,{className:"w-4 h-4 mr-2"}),m]}),s.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[s.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("general"),children:"Vista general"}),s.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porEstudiante"),children:"Por estudiante"}),s.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porPregunta"),children:"Por pregunta"})]}),x==="general"&&k(),x==="porEstudiante"&&R(),x==="porPregunta"&&U()]}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(wm,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas aún."})]}):s.jsx("div",{className:"space-y-4",children:t.map(H=>s.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>j(H.id),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`p-2 rounded-md mr-4 ${H.asignatura==="Lectura"||H.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:H.asignatura==="Lectura"||H.asignatura==="Competencia Lectora"?s.jsx(Ds,{className:"w-6 h-6"}):s.jsx(t8,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:H.titulo}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:H.descripcion}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:H.asignatura}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[H.preguntas.length," preguntas"]}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:(()=>{try{const Q=H.fechaCreacion,V=typeof(Q==null?void 0:Q.toDate)=="function"?Q.toDate():new Date(Q);return isNaN(V.getTime())?"-":V.toLocaleDateString()}catch{return"-"}})()})]})]})]})},H.id))})]})})},qj=({currentUser:e})=>{const[t,r]=w.useState("generador"),a=(e==null?void 0:e.profile)===Mt.PROFESORADO||(e==null?void 0:e.profile)===Mt.SUBDIRECCION||(e==null?void 0:e.profile)===Mt.COORDINACION_TP,n=(e==null?void 0:e.profile)===Mt.ESTUDIANTE;return w.useEffect(()=>{n&&r("evaluacion")},[n]),s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación SIMCE"})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex",children:[a&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[s.jsx(Iw,{className:"w-4 h-4"}),s.jsx("span",{children:"Generador de Preguntas"})]}),s.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[s.jsx(fl,{className:"w-4 h-4"}),s.jsx("span",{children:"Resultados"})]})]}),n&&s.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[s.jsx(rb,{className:"w-4 h-4"}),s.jsx("span",{children:"Mis Evaluaciones"})]})]})}),s.jsxs("div",{className:"p-6",children:[a&&t==="generador"&&s.jsx(UZe,{currentUser:e}),a&&t==="resultados"&&s.jsx(Jgt,{currentUser:e}),n&&t==="evaluacion"&&s.jsx(Ygt,{currentUser:e}),!a&&!n&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este módulo."})})]})]})]})},Zgt=["Enviada","Visada","Aceptada","Rechazada","Completada"],CO=({currentUser:e})=>{const t=e.profile===Mt.SUBDIRECCION,r=e.profile===Mt.COORDINACION_TP,[a,n]=w.useState(""),[i,o]=w.useState(ln[0]),[l,c]=w.useState(Nh[0]),[u,d]=w.useState(""),[f,h]=w.useState(30),[m,g]=w.useState(new Date().toISOString().split("T")[0]),[x,v]=w.useState(""),[y,N]=w.useState(null),[C,T]=w.useState(""),[_,O]=w.useState(null),[j,S]=w.useState(!1),[B,L]=w.useState([]),[D,k]=w.useState([]),[R,U]=w.useState("Todos"),[H,Q]=w.useState("Todas"),[V,G]=w.useState("Todos"),[J,W]=w.useState("Todos"),[Z,M]=w.useState("Todos"),[F,X]=w.useState(null),[Y,ae]=w.useState(""),[le,ie]=w.useState(!1),[ne,oe]=w.useState(null),[we,K]=w.useState(!1),[Ee,_e]=w.useState(!0),Ce=w.useMemo(()=>{const ze=new Set;return D.forEach(Tt=>Tt.solicitanteNombre&&ze.add(Tt.solicitanteNombre)),["Todos",...Array.from(ze).sort()]},[D]),de=w.useMemo(()=>{const ze=new Set;return D.forEach(Tt=>Tt.asignatura&&ze.add(Tt.asignatura)),["Todas",...Array.from(ze).sort()]},[D]),xe=w.useMemo(()=>{const ze=new Set;return D.forEach(Tt=>Tt.curso&&ze.add(Tt.curso)),["Todos",...Array.from(ze).sort()]},[D]),he=w.useMemo(()=>D.length,[D]),ye=w.useMemo(()=>D.reduce((ze,Tt)=>ze+(Number(Tt.cantidadCopias)||0),0),[D]),ce=ze=>{const Tt=new Map;for(const ir of D){const Kt=(ze(ir)||"—").trim()||"—";Tt.set(Kt,(Tt.get(Kt)||0)+1)}return Array.from(Tt.entries()).map(([ir,Kt])=>({name:ir,value:Kt})).sort((ir,Kt)=>Kt.value-ir.value)},Ae=w.useMemo(()=>ce(ze=>ze.estado||"Enviada"),[D]),Ne=w.useMemo(()=>ce(ze=>ze.nivel||"—"),[D]),Pe=w.useMemo(()=>ce(ze=>ze.asignatura||"—").slice(0,10),[D]),Qe=w.useMemo(()=>ce(ze=>ze.solicitanteNombre||"—").slice(0,10),[D]),$e=w.useMemo(()=>ce(ze=>ze.curso||"—").slice(0,10),[D]),et={Enviada:"#f59e0b",Visada:"#3b82f6",Aceptada:"#10b981",Rechazada:"#ef4444",Completada:"#059669"},Ke=["#0ea5e9","#22c55e","#f97316","#6366f1","#14b8a6","#eab308","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f43f5e"];w.useEffect(()=>{var Tt;const ze=Qfe({emailLower:(Tt=e.email)==null?void 0:Tt.toLowerCase()},L);if(t||r){const ir=Hfe({nivel:Z,curso:R,asignatura:H,docenteNombre:V,estado:J},k);return()=>{ze(),ir()}}return()=>{ze()}},[e.email,t,r,Z,R,H,V,J]);const Ge=async ze=>{if(ze.preventDefault(),!a.trim()){O("Debe indicar un título o descripción del material.");return}try{S(!0),O(null);let Tt;if(y)try{const{uploadAdjuntoMulticopia:Kt}=await ai(async()=>{const{uploadAdjuntoMulticopia:Cr}=await Promise.resolve().then(()=>$ct);return{uploadAdjuntoMulticopia:Cr}},void 0);Tt=await Kt(y,"multicopias")}catch(Kt){console.warn("No se pudo subir el adjunto:",Kt)}const ir={solicitanteId:e.id,solicitanteNombre:e.nombreCompleto,solicitanteEmail:e.email,tituloMaterial:a,asignatura:i,nivel:l,curso:u||void 0,cantidadCopias:Math.max(1,Number(f)||1),fechaEntregaDeseada:m,enlaceUrl:x||void 0,adjuntoUrl:Tt,comentarios:C||void 0,estado:"Enviada"};await Mfe(ir),n(""),c(Nh[0]),d(""),h(30),v(""),N(null),T("")}catch(Tt){O((Tt==null?void 0:Tt.message)||"No se pudo crear la solicitud.")}finally{S(!1)}},nt=()=>s.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Título o descripción del material"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:a,onChange:ze=>n(ze.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Ej: Prueba de ecuaciones lineales Unidad 2"}),s.jsx(Pl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),s.jsx("select",{value:i,onChange:ze=>o(ze.target.value),className:"w-full border rounded-md px-3 py-2",children:ln.map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nivel"}),s.jsx("select",{required:!0,value:l,onChange:ze=>c(ze.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:Nh.map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso (opcional)"}),s.jsxs("select",{value:u,onChange:ze=>d(ze.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[s.jsx("option",{value:"",children:"—"}),on.map(ze=>s.jsx("option",{value:ze,children:ze},ze))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Cantidad de copias"}),s.jsx("input",{type:"number",min:1,value:f,onChange:ze=>h(parseInt(ze.target.value)||1),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Fecha de entrega deseada"}),s.jsx("input",{type:"date",value:m,onChange:ze=>g(ze.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Enlace al material (Drive, etc.)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:x,onChange:ze=>v(ze.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"https://..."}),s.jsx(ok,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"O subir archivo (opcional)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",onChange:ze=>{var Tt;return N(((Tt=ze.target.files)==null?void 0:Tt[0])||null)},className:"block w-full text-sm text-slate-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),s.jsx(b2,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se guardará en Storage y se adjuntará a la solicitud."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Comentarios"}),s.jsx("textarea",{value:C,onChange:ze=>T(ze.target.value),rows:3,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Indicaciones adicionales"})]}),_&&s.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:_}),s.jsx("div",{className:"text-right",children:s.jsxs("button",{type:"submit",disabled:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400 shadow-sm",children:[s.jsx(Nre,{className:"h-4 w-4"})," ",j?"Enviando…":"Enviar solicitud"]})})]}),bt=()=>s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Título"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),s.jsx("th",{className:"px-4 py-2"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:B.map(ze=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm",children:ze.createdAt?new Date(ze.createdAt).toLocaleString("es-CL"):"—"}),s.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:ze.tituloMaterial}),s.jsx("td",{className:"px-4 py-2 text-sm",children:ze.asignatura}),s.jsx("td",{className:"px-4 py-2 text-sm",children:ze.nivel}),s.jsx("td",{className:"px-4 py-2 text-sm",children:ze.curso||"—"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:ze.cantidadCopias}),s.jsx("td",{className:"px-4 py-2 text-sm",children:ze.fechaEntregaDeseada}),s.jsxs("td",{className:"px-4 py-2 text-sm",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[ze.enlaceUrl&&s.jsx("a",{href:ze.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Enlace"}),ze.adjuntoUrl&&s.jsx("a",{href:ze.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:"Archivo"}),!ze.enlaceUrl&&!ze.adjuntoUrl&&s.jsx("span",{className:"text-slate-400",children:"—"})]}),ze.estado==="Rechazada"&&ze.motivoRechazo&&s.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Motivo: ",ze.motivoRechazo]})]}),s.jsx("td",{className:"px-4 py-2 text-sm",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${ze.estado==="Aceptada"?"bg-green-100 text-green-800":ze.estado==="Rechazada"?"bg-red-100 text-red-700":ze.estado==="Visada"?"bg-blue-100 text-blue-800":ze.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[ze.estado==="Aceptada"&&s.jsx(cn,{className:"h-3 w-3"}),ze.estado==="Rechazada"&&s.jsx(nA,{className:"h-3 w-3"}),ze.estado==="Visada"&&s.jsx(tb,{className:"h-3 w-3"}),ze.estado==="Completada"&&s.jsx(v2,{className:"h-3 w-3"}),ze.estado==="Enviada"&&s.jsx(b2,{className:"h-3 w-3"}),ze.estado]})}),s.jsx("td",{className:"px-4 py-2 text-sm text-right",children:(ze.estado==="Enviada"||ze.estado==="Rechazada")&&s.jsx("button",{title:"Eliminar",onClick:()=>oe(ze),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:s.jsx(Da,{className:"h-4 w-4"})})})]},ze.id))})]})}),ut=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-600 w-full md:w-auto",children:[s.jsx(FN,{className:"h-4 w-4"})," ",s.jsx("span",{className:"text-sm",children:"Filtros"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),s.jsx("select",{value:Z,onChange:ze=>M(ze.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...Nh].map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Docente"}),s.jsx("select",{value:V,onChange:ze=>G(ze.target.value),className:"border rounded-md px-3 py-1.5",children:Ce.map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),s.jsx("select",{value:H,onChange:ze=>Q(ze.target.value),className:"border rounded-md px-3 py-1.5",children:de.map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Curso"}),s.jsx("select",{value:R,onChange:ze=>U(ze.target.value),className:"border rounded-md px-3 py-1.5",children:xe.map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Estado"}),s.jsx("select",{value:J,onChange:ze=>W(ze.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...Zgt].map(ze=>s.jsx("option",{value:ze,children:ze},ze))})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-700",children:"Resumen gráfico"}),s.jsxs("button",{onClick:()=>_e(ze=>!ze),className:"text-xs px-3 py-1.5 rounded border bg-white hover:bg-slate-50",children:[Ee?"Ocultar":"Ver"," gráficos"]})]}),Ee&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"col-span-1 lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Total solicitudes"}),s.jsx("div",{className:"text-2xl font-bold",children:he})]}),s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Total copias pedidas"}),s.jsx("div",{className:"text-2xl font-bold",children:ye})]}),s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Docentes únicos"}),s.jsx("div",{className:"text-2xl font-bold",children:new Set(D.map(ze=>ze.solicitanteNombre||"—")).size})]}),s.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Asignaturas únicas"}),s.jsx("div",{className:"text-2xl font-bold",children:new Set(D.map(ze=>ze.asignatura||"—")).size})]})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por estado"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(j4,{children:[s.jsx(iC,{data:Ae,dataKey:"value",nameKey:"name",outerRadius:80,children:Ae.map((ze,Tt)=>s.jsx(Jh,{fill:et[ze.name]||Ke[Tt%Ke.length]},`estado-${Tt}`))}),s.jsx(hc,{}),s.jsx(fx,{})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por nivel"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:Ne,margin:{left:8,right:8,bottom:8},children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-20,height:50,textAnchor:"end"}),s.jsx(Wd,{allowDecimals:!1}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por asignatura (Top 10)"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:Pe,margin:{left:8,right:8,bottom:8},children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),s.jsx(Wd,{allowDecimals:!1}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por docente (Top 10)"}),s.jsx("div",{className:"h-[260px]",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:Qe,margin:{left:8,right:8,bottom:8},children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),s.jsx(Wd,{allowDecimals:!1}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por curso (Top 10)"}),s.jsx("div",{className:"h-[240px]",children:s.jsx(mc,{width:"100%",height:"100%",children:s.jsxs(Sh,{data:$e,margin:{left:8,right:8,bottom:8},children:[s.jsx(kh,{strokeDasharray:"3 3"}),s.jsx(Kd,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),s.jsx(Wd,{allowDecimals:!1}),s.jsx(hc,{}),s.jsx(fA,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Docente"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Título"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Motivo"}),s.jsx("th",{className:"px-3 py-2"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:D.map(ze=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.createdAt?new Date(ze.createdAt).toLocaleString("es-CL"):"—"}),s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.solicitanteNombre}),s.jsx("td",{className:"px-3 py-2 text-sm font-medium text-slate-800",children:ze.tituloMaterial}),s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.asignatura}),s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.nivel}),s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.curso||"—"}),s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.cantidadCopias}),s.jsx("td",{className:"px-3 py-2 text-sm",children:ze.fechaEntregaDeseada}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("div",{className:"flex gap-2 items-center",children:[ze.enlaceUrl&&s.jsxs("a",{href:ze.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline",children:[s.jsx(ok,{className:"h-4 w-4"})," Enlace"]}),ze.adjuntoUrl&&s.jsxs("a",{href:ze.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-emerald-600 hover:underline",children:[s.jsx(b2,{className:"h-4 w-4"})," Archivo"]}),!ze.enlaceUrl&&!ze.adjuntoUrl&&s.jsx("span",{className:"text-slate-400",children:"—"})]})}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${ze.estado==="Aceptada"?"bg-green-100 text-green-800":ze.estado==="Rechazada"?"bg-red-100 text-red-700":ze.estado==="Visada"?"bg-blue-100 text-blue-800":ze.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[ze.estado==="Aceptada"&&s.jsx(cn,{className:"h-3 w-3"}),ze.estado==="Rechazada"&&s.jsx(nA,{className:"h-3 w-3"}),ze.estado==="Visada"&&s.jsx(tb,{className:"h-3 w-3"}),ze.estado==="Completada"&&s.jsx(v2,{className:"h-3 w-3"}),ze.estado==="Enviada"&&s.jsx(b2,{className:"h-3 w-3"}),ze.estado]})}),s.jsx("td",{className:"px-3 py-2 text-sm max-w-[240px] truncate",title:ze.motivoRechazo||"",children:ze.motivoRechazo||"—"}),s.jsxs("td",{className:"px-3 py-2 text-sm text-right space-x-2",children:[ze.estado==="Enviada"&&s.jsxs("button",{onClick:async()=>await O2(ze.id,"Visada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:[s.jsx(tb,{className:"h-4 w-4"})," Visar"]}),(ze.estado==="Enviada"||ze.estado==="Visada")&&s.jsxs("button",{onClick:async()=>{await O2(ze.id,"Aceptada",e.nombreCompleto),await zfe(ze)},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",children:[s.jsx(cn,{className:"h-4 w-4"})," Aceptar"]}),ze.estado!=="Rechazada"&&ze.estado!=="Completada"&&s.jsxs("button",{onClick:()=>{X(ze),ae("")},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:[s.jsx(nA,{className:"h-4 w-4"})," Rechazar"]}),ze.estado==="Aceptada"&&s.jsxs("button",{onClick:async()=>await O2(ze.id,"Completada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:[s.jsx(v2,{className:"h-4 w-4"})," Completada"]}),e.id===ze.solicitanteId&&(ze.estado==="Enviada"||ze.estado==="Rechazada")&&s.jsxs("button",{title:"Eliminar",onClick:()=>oe(ze),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:[s.jsx(Da,{className:"h-4 w-4"})," Eliminar"]})]})]},ze.id))})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 shadow-xl",children:[s.jsx("h3",{className:"text-lg font-bold mb-3",children:"Motivo de rechazo"}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Indica brevemente el motivo del rechazo para que el docente pueda corregir o reenviar."}),s.jsx("textarea",{rows:4,value:Y,onChange:ze=>ae(ze.target.value),className:"w-full border-slate-300 rounded-md",placeholder:"Ej: El material no es legible o falta la portada."}),s.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[s.jsxs("button",{onClick:()=>{X(null),ae("")},className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:[s.jsx(nA,{className:"h-4 w-4"})," Cancelar"]}),s.jsx("button",{disabled:le,onClick:async()=>{if(F)try{ie(!0),await O2(F.id,"Rechazada",e.nombreCompleto,{motivoRechazo:Y||void 0}),X(null),ae("")}finally{ie(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:le?"Guardando…":s.jsxs(s.Fragment,{children:[s.jsx(nA,{className:"h-4 w-4"})," Confirmar rechazo"]})})]})]})}),ne&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl p-6 shadow-xl",children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2 text-red-700",children:[s.jsx(Da,{className:"h-5 w-5"})," Eliminar solicitud"]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:["Esta acción eliminará la solicitud “",ne.tituloMaterial,"”. Si tiene un archivo adjunto, también se intentará borrar del almacenamiento."]}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"¿Deseas continuar?"}),s.jsxs("div",{className:"mt-1 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>oe(null),className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),s.jsx("button",{disabled:we,onClick:async()=>{try{K(!0),await Vfe(ne.id,{adjuntoUrl:ne.adjuntoUrl}),oe(null)}catch{alert("No se pudo eliminar.")}finally{K(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:we?"Eliminando…":s.jsxs(s.Fragment,{children:[s.jsx(Da,{className:"h-4 w-4"})," Eliminar"]})})]})]})})]});return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(__,{className:"h-6 w-6 text-amber-600"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Multicopias"})]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Gestiona solicitudes de copias de material evaluativo y pedagógico."}),(e.profile===Mt.PROFESORADO||r)&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[s.jsx(Pl,{className:"h-5 w-5 text-amber-600"})," Nueva solicitud"]}),nt()]}),(e.profile===Mt.PROFESORADO||r)&&s.jsxs("div",{className:"mb-10",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[s.jsx(Sv,{className:"h-5 w-5 text-amber-600"})," Mis solicitudes"]}),bt()]}),t&&s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[s.jsx(v2,{className:"h-5 w-5 text-amber-600"})," Panel de Subdirección"]}),ut()]})]})};async function ext(e){const t=pt(ot,"ensayo_evaluaciones"),r={...e,createdAt:qa(),tipo:"evaluacion_ensayo",indicadores:10};return(await Yr(t,r)).id}async function txt(e){const t=pt(ot,"ensayo_evaluaciones"),r=_t(t,Gt("createdAt","desc"),hl(e==null?void 0:e.max)),a=await _r(r),n=[];a.forEach(o=>{const l=o.data();n.push({id:o.id,...l,createdAt:l.createdAt??null,tipo:l.tipo,indicadores:l.indicadores})});let i=n;return e!=null&&e.filtroCurso&&(i=i.filter(o=>(o.curso||"").toUpperCase()===e.filtroCurso.toUpperCase())),e!=null&&e.filtroAsignatura&&(i=i.filter(o=>(o.asignatura||"")===e.filtroAsignatura)),e!=null&&e.filtroProfesorId&&(i=i.filter(o=>(o.profesorId||"")===e.filtroProfesorId)),e!=null&&e.filtroCreadorId&&(i=i.filter(o=>(o.creadorId||"")===e.filtroCreadorId)),i}function GP(e){if(e!==void 0){if(e===null)return null;if(Array.isArray(e))return e.map(GP);if(typeof e=="object"){const t={};return Object.entries(e).forEach(([r,a])=>{const n=GP(a);n!==void 0&&(t[r]=n)}),t}return e}}async function rxt(e,t){const r=$t(ot,"ensayo_evaluaciones",e),a=GP({...t});await Ui(r,a)}async function axt(e){const t=$t(ot,"ensayo_evaluaciones",e);await Ja(t)}const Kj=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Wc=[1,2,3,4,5,6,7,8,9,10],qP={1:"Llega puntualmente a la evaluación.",2:"Sigue las instrucciones dadas por el/la docente respecto a su ubicación en la sala de clases.",3:"Sigue las instrucciones dadas por el/la docente respecto al inicio de la evaluación.",4:"Se mantiene en silencio mientras desarrolla la evaluación.",5:"Mantiene su celular o cualquier equipo tecnológico en silencio y guardado.",6:"Levanta la mano si requiere consultar alguna duda.",7:"Espera en silencio mientras es atendido por el/la docente para resolver sus dudas.",8:"Se observa que el/la estudiante realiza el esfuerzo por llevar a término satisfactorio su evaluación.",9:"Respeta los tiempos considerados para realizar la evaluación y se mantiene en silencio una vez finalizada.",10:"Entrega el instrumento de evaluación cuando se le solicita."},EO=({currentUser:e})=>{const[t,r]=w.useState("captura"),[a,n]=w.useState(""),[i,o]=w.useState("Lengua y Literatura"),[l,c]=w.useState(""),[u,d]=w.useState([]),[f,h]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),[C,T]=w.useState({}),[_,O]=w.useState(null),[j,S]=w.useState(!1),[B,L]=w.useState(""),[D,k]=w.useState(""),[R,U]=w.useState(""),[H,Q]=w.useState(!0),[V,G]=w.useState(""),[J,W]=w.useState(""),[Z,M]=w.useState([]),[F,X]=w.useState({}),[Y,ae]=w.useState({});w.useEffect(()=>{h(!0),xx().then(K=>d(K)).finally(()=>h(!1))},[]);const le=w.useMemo(()=>u.filter(K=>K.profile==="PROFESORADO"||K.profile==="PROFESORADO"),[u]);w.useEffect(()=>{const K=Kj(a),Ee=u.filter(Ce=>Ce.profile==="ESTUDIANTE"&&Kj(Ce.curso||"")===K).map(Ce=>({id:Ce.id,nombre:Ce.nombreCompleto}));M(Ee);const _e={};Ee.forEach(Ce=>{_e[Ce.id]={},Wc.forEach(de=>{_e[Ce.id][de]=!0})}),X(_e),ae({})},[a,u]);const ie=(K,Ee)=>{X(_e=>{var Ce;return{..._e,[K]:{..._e[K],[Ee]:!((Ce=_e[K])!=null&&Ce[Ee])}}})},ne=K=>{if(Y[K])return 0;const Ee=F[K];if(!Ee)return 0;const Ce=Wc.map(de=>Ee[de]?7:2).reduce((de,xe)=>de+xe,0)/Wc.length;return Math.round(Ce*10)/10},oe=w.useMemo(()=>{if(Z.length===0)return Wc.map(Ee=>({indicador:Ee,porcentajeOn:0,promedio:0}));const K=Z.filter(Ee=>!Y[Ee.id]);return K.length===0?Wc.map(Ee=>({indicador:Ee,porcentajeOn:0,promedio:0})):Wc.map(Ee=>{const _e=K.reduce((xe,he)=>{var ye;return xe+((ye=F[he.id])!=null&&ye[Ee]?1:0)},0),Ce=Math.round(_e/K.length*100),de=K.reduce((xe,he)=>{var ye;return xe+((ye=F[he.id])!=null&&ye[Ee]?7:2)},0)/K.length;return{indicador:Ee,porcentajeOn:Ce,promedio:Math.round(de*10)/10}})},[Z,F,Y]),we=async()=>{var K;if(!(!a||!i||!l||Z.length===0)){g(!0);try{await ext({curso:Kj(a),asignatura:i,profesorId:l,profesorNombre:((K=u.find(Ee=>Ee.id===l))==null?void 0:K.nombreCompleto)||"",creadorId:e.id,creadorNombre:e.nombreCompleto,fecha:new Date().toISOString(),resultados:Z.map(Ee=>{const _e=!!Y[Ee.id];return{estudianteId:Ee.id,estudianteNombre:Ee.nombre,indicadores:Wc.map(Ce=>{var de;return(de=F[Ee.id])!=null&&de[Ce]?7:2}),promedio:_e?null:ne(Ee.id),ausente:_e}})}),alert("Evaluación guardada")}catch(Ee){console.error("Error guardando evaluación de ensayo",Ee),alert("No se pudo guardar. Reintenta.")}finally{g(!1)}}};return w.useEffect(()=>{(async()=>{if(t==="guardados"){v(!0);try{let _e=await txt({max:200,filtroCurso:B?Kj(B):void 0,filtroAsignatura:D||void 0,filtroProfesorId:R||void 0,filtroCreadorId:H?e.id:void 0});if(V){const Ce=new Date(V+"T00:00:00");_e=_e.filter(de=>{var xe,he;return(((he=(xe=de.createdAt)==null?void 0:xe.toDate)==null?void 0:he.call(xe))||new Date(de.fecha))>=Ce})}if(J){const Ce=new Date(J+"T23:59:59");_e=_e.filter(de=>{var xe,he;return(((he=(xe=de.createdAt)==null?void 0:xe.toDate)==null?void 0:he.call(xe))||new Date(de.fecha))<=Ce})}N(_e)}finally{v(!1)}}})()},[t,e.id,B,D,R,H,V,J]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="captura"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("captura"),children:[s.jsx(Gh,{className:"w-4 h-4"})," Captura"]}),s.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="guardados"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("guardados"),children:[s.jsx(fCe,{className:"w-4 h-4"})," Guardados"]})]}),t==="guardados"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ensayos guardados"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>oxt(y),title:"Exportar CSV (aplica filtros)",children:[s.jsx(of,{className:"w-3.5 h-3.5"})," Exportar CSV"]}),s.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-700",onClick:()=>r("captura"),children:"Ir a captura"})]})]}),s.jsx(nxt,{guardados:y}),s.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),s.jsxs("select",{value:B,onChange:K=>L(K.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Todos"}),on.map(K=>s.jsx("option",{value:K,children:K},K))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),s.jsxs("select",{value:D,onChange:K=>k(K.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Todas"}),ln.map(K=>s.jsx("option",{value:K,children:K},K))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),s.jsxs("select",{value:R,onChange:K=>U(K.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Todos"}),u.filter(K=>K.profile==="PROFESORADO").map(K=>s.jsx("option",{value:K.id,children:K.nombreCompleto},K.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:H,onChange:K=>Q(K.target.checked)})," Solo mis registros"]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Desde"}),s.jsx("input",{type:"date",value:V,onChange:K=>G(K.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Hasta"}),s.jsx("input",{type:"date",value:J,onChange:K=>W(K.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),s.jsx("div",{className:"mt-3 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[s.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-slate-500",children:"Detalle"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Profesor"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Creador/a"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nº Estudiantes"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Exportar"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Acciones"})]})}),s.jsxs("tbody",{children:[x&&s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"Cargando…"})}),!x&&y.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"No hay ensayos guardados."})}),y.map(K=>{var Ee,_e,Ce;return s.jsxs(ct.Fragment,{children:[s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[s.jsx("td",{className:"px-2 py-2",children:s.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",onClick:()=>T(de=>({...de,[K.id]:!de[K.id]})),children:[C[K.id]?s.jsx(rF,{className:"w-4 h-4"}):s.jsx(k_,{className:"w-4 h-4"}),C[K.id]?"Ocultar":"Ver"]})}),s.jsx("td",{className:"px-3 py-2 text-sm",children:(((_e=(Ee=K.createdAt)==null?void 0:Ee.toDate)==null?void 0:_e.call(Ee))||new Date(K.fecha)).toLocaleString()}),s.jsx("td",{className:"px-3 py-2 text-sm",children:K.curso}),s.jsx("td",{className:"px-3 py-2 text-sm",children:K.asignatura}),s.jsx("td",{className:"px-3 py-2 text-sm",children:K.profesorNombre}),s.jsx("td",{className:"px-3 py-2 text-sm",children:K.creadorNombre}),s.jsx("td",{className:"px-3 py-2 text-sm",children:((Ce=K.resultados)==null?void 0:Ce.length)??0}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>ixt(K),title:"Exportar CSV de esta evaluación",children:[s.jsx(of,{className:"w-3.5 h-3.5"})," CSV"]})}),s.jsx("td",{className:"px-3 py-2 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>O(K),title:"Editar",children:[s.jsx(B_,{className:"w-3.5 h-3.5"})," Editar"]}),s.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-red-300 text-red-700 hover:bg-red-50",onClick:async()=>{if(confirm("¿Eliminar esta evaluación? Esta acción no se puede deshacer."))try{await axt(K.id),N(xe=>xe.filter(he=>he.id!==K.id))}catch(xe){alert("No se pudo eliminar"),console.error(xe)}},title:"Eliminar",children:[s.jsx(Da,{className:"w-3.5 h-3.5"})," Eliminar"]})]})})]}),C[K.id]&&s.jsx("tr",{className:"bg-slate-50/40 dark:bg-slate-900/30",children:s.jsx("td",{colSpan:9,className:"px-4 py-3",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ausente"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Promedio"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Indicadores"})]})}),s.jsx("tbody",{children:(K.resultados||[]).map((de,xe)=>s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/40",children:[s.jsx("td",{className:"px-3 py-1.5 whitespace-nowrap",children:de.estudianteNombre}),s.jsx("td",{className:"px-3 py-1.5",children:de.ausente?s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-slate-200 text-slate-700 text-xs",children:"Sí"}):s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 text-xs",children:"No"})}),s.jsx("td",{className:"px-3 py-1.5 font-semibold",children:de.ausente?"—":(de.promedio??0).toFixed(1)}),s.jsx("td",{className:"px-3 py-1.5",children:s.jsx("div",{className:"flex items-center gap-1",children:(de.indicadores||[]).map((he,ye)=>s.jsx("span",{className:`w-4 h-4 rounded-full border ${he>=7?"bg-emerald-500 border-emerald-600":"bg-red-400 border-red-500"}`,title:`${ye+1}: ${he.toFixed(1)}`},ye))})})]},de.estudianteId||xe))})]})})})})]},K.id)})]})]})})]})}),_&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>!j&&O(null)}),s.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 w-full max-w-2xl p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Editar evaluación"}),s.jsx("button",{className:"p-1 text-slate-500 hover:text-slate-700",onClick:()=>!j&&O(null),children:s.jsx(Oo,{className:"w-4 h-4"})})]}),s.jsxs("form",{onSubmit:async K=>{K.preventDefault(),S(!0);try{await rxt(_.id,{curso:_.curso,asignatura:_.asignatura,profesorId:_.profesorId,profesorNombre:_.profesorNombre,creadorId:_.creadorId,creadorNombre:_.creadorNombre,fecha:_.fecha}),N(Ee=>Ee.map(_e=>_e.id===_.id?{..._e,..._}:_e)),O(null)}catch(Ee){console.error(Ee),alert("No se pudo guardar cambios")}finally{S(!1)}},className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),s.jsx("select",{value:_.curso,onChange:K=>O({..._,curso:K.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:on.map(K=>s.jsx("option",{value:K,children:K},K))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),s.jsx("select",{value:_.asignatura,onChange:K=>O({..._,asignatura:K.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:ln.map(K=>s.jsx("option",{value:K,children:K},K))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),s.jsx("select",{value:_.profesorId,onChange:K=>{const Ee=K.target.value,_e=u.find(Ce=>Ce.id===Ee);O({..._,profesorId:Ee,profesorNombre:(_e==null?void 0:_e.nombreCompleto)||_.profesorNombre})},className:"w-full border rounded-md px-2 py-1 text-sm",children:u.filter(K=>K.profile==="PROFESORADO").map(K=>s.jsx("option",{value:K.id,children:K.nombreCompleto},K.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500",children:"Fecha (ISO)"}),s.jsx("input",{type:"datetime-local",value:new Date(_.fecha).toISOString().slice(0,16),onChange:K=>{const Ee=new Date(K.target.value).toISOString();O({..._,fecha:Ee})},className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-3 py-1.5 text-sm rounded-md border",onClick:()=>O(null),disabled:j,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",disabled:j,children:j?"Guardando…":"Guardar cambios"})]})]}),s.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Nota: La edición de resultados individuales no está habilitada aún en este modal."})]})]}),t==="captura"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Indicadores evaluados"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:Wc.map(K=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-xs font-bold shrink-0",children:K}),s.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:qP[K]})]},K))})]}),Z.length>0&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Desempeño del curso por indicador"}),s.jsx("div",{className:"space-y-2",children:oe.map(K=>s.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[s.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[K.indicador,". ",qP[K.indicador]]}),s.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:s.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:s.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${K.porcentajeOn}%`}})})}),s.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-between text-xs text-slate-700 dark:text-slate-200",children:[s.jsxs("span",{className:"font-medium",children:[K.porcentajeOn,"% con 7.0"]}),s.jsxs("span",{children:["Prom: ",K.promedio.toFixed(1)]})]})]},K.indicador))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso"}),s.jsxs("select",{value:a,onChange:K=>n(K.target.value),className:"w-full border rounded-md px-3 py-2",children:[s.jsx("option",{value:"",children:"Seleccione…"}),on.map(K=>s.jsx("option",{value:K,children:K},K))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),s.jsx("select",{value:i,onChange:K=>o(K.target.value),className:"w-full border rounded-md px-3 py-2",children:ln.map(K=>s.jsx("option",{value:K,children:K},K))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Profesor responsable"}),s.jsxs("select",{value:l,onChange:K=>c(K.target.value),className:"w-full border rounded-md px-3 py-2",children:[s.jsx("option",{value:"",children:"Seleccione…"}),le.map(K=>s.jsx("option",{value:K.id,children:K.nombreCompleto},K.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:we,disabled:!a||!i||!l||m,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?s.jsx(Di,{className:"w-4 h-4 animate-spin"}):s.jsx(gl,{className:"w-4 h-4"})," Guardar"]})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),Wc.map(K=>s.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500",children:K},K)),s.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-slate-500",children:"Prom."})]})}),s.jsxs("tbody",{children:[f&&s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Cargando estudiantes…"})}),!f&&Z.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Seleccione curso para listar estudiantes."})}),Z.map(K=>s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[s.jsx("td",{className:"px-4 py-2 text-sm whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Pb,{className:"w-4 h-4 text-slate-400"})," ",K.nombre]}),s.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:!!Y[K.id],onChange:Ee=>ae(_e=>({..._e,[K.id]:Ee.target.checked}))}),"Ausente"]})]})}),Wc.map(Ee=>{var Ce;const _e=((Ce=F[K.id])==null?void 0:Ce[Ee])??!0;return s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("button",{type:"button",onClick:()=>!Y[K.id]&&ie(K.id,Ee),disabled:!!Y[K.id],className:`inline-flex items-center justify-center w-7 h-7 rounded-full border transition ${Y[K.id]?"opacity-40 cursor-not-allowed bg-slate-50 border-slate-200":_e?"bg-green-100 border-green-300 text-green-700":"bg-red-50 border-red-300 text-red-600"}`,title:Y[K.id]?"Ausente":_e?"7.0":"2.0",children:_e?s.jsx(ON,{className:"w-4 h-4"}):s.jsx(cNe,{className:"w-4 h-4"})})},Ee)}),s.jsx("td",{className:"px-3 py-2 text-center font-semibold text-slate-700",children:Y[K.id]?"—":ne(K.id).toFixed(1)})]},K.id))]})]})})]})]})},nxt=({guardados:e})=>{const t=ct.useMemo(()=>{let r=e.length,a=0,n=0,i=0,o=0,l=0;const c=Array(10).fill(0),u=Array(10).fill(0);e.forEach(h=>{const m=h.resultados||[];a+=m.length,m.forEach(g=>{g.ausente?i+=1:(n+=1,typeof g.promedio=="number"&&(o+=g.promedio,l+=1),(g.indicadores||[]).forEach((x,v)=>{x>=7&&(c[v]+=1),u[v]+=1}))})});const d=l>0?Math.round(o/l*10)/10:0,f=c.map((h,m)=>{const g=u[m]||0;return g>0?Math.round(h/g*100):0});return{evaluaciones:r,estudiantes:a,presentes:n,ausentes:i,promedioGlobal:d,indicadoresPct:f}},[e]);return s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[s.jsx(A2,{label:"Evaluaciones",value:t.evaluaciones}),s.jsx(A2,{label:"Estudiantes",value:t.estudiantes}),s.jsx(A2,{label:"Presentes",value:t.presentes}),s.jsx(A2,{label:"Ausentes",value:t.ausentes}),s.jsx(A2,{label:"Prom. global",value:t.promedioGlobal.toFixed(1)})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 mb-2",children:"Porcentaje 7.0 por indicador"}),s.jsx("div",{className:"space-y-2",children:Wc.map((r,a)=>s.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[s.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[r,". ",qP[r]]}),s.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:s.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:s.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${t.indicadoresPct[a]}%`}})})}),s.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-end text-xs text-slate-700 dark:text-slate-200",children:s.jsxs("span",{className:"font-medium",children:[t.indicadoresPct[a],"%"]})})]},r))})]})]})},A2=({label:e,value:t})=>s.jsxs("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[s.jsx("div",{className:"text-xs text-slate-500",children:e}),s.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:t})]});function sxt(e){if(e==null)return"";const t=String(e).replace(/"/g,'""');return/[",\n]/.test(t)?'"'+t+'"':t}function Zhe(e,t){const r=t.map(o=>o.map(sxt).join(",")).join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}function ixt(e){var n,i;const t=["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...Wc.map(o=>`Indicador_${o}`)],r=(((i=(n=e.createdAt)==null?void 0:n.toDate)==null?void 0:i.call(n))||new Date(e.fecha)).toISOString(),a=[t];(e.resultados||[]).forEach(o=>{const l=[e.id,r,e.curso,e.asignatura,e.profesorNombre,e.creadorNombre,o.estudianteId,o.estudianteNombre,o.ausente?"SI":"NO",o.ausente?"":String(o.promedio??"")],c=(o.indicadores||[]).map(u=>typeof u=="number"?u.toFixed(1):"");a.push([...l,...c])}),Zhe(`evaluacion_${e.id}.csv`,a)}function oxt(e){const r=[["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...Wc.map(n=>`Indicador_${n}`)]];e.forEach(n=>{var o,l;const i=(((l=(o=n.createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date(n.fecha)).toISOString();(n.resultados||[]).forEach(c=>{const u=[n.id,i,n.curso,n.asignatura,n.profesorNombre,n.creadorNombre,c.estudianteId,c.estudianteNombre,c.ausente?"SI":"NO",c.ausente?"":String(c.promedio??"")],d=(c.indicadores||[]).map(f=>typeof f=="number"?f.toFixed(1):"");r.push([...u,...d])})});const a=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");Zhe(`evaluaciones_filtradas_${a}.csv`,r)}const lxt={"1º Medio":"1º","2º Medio":"2º","3º Medio":"3º","4º Medio":"4º"};function cxt(e){const t=lxt[e]||"";return on.filter(r=>r.startsWith(t))}function uxt(){const[e,t]=w.useState({}),[r,a]=w.useState(!0);w.useEffect(()=>{const i=zne(o=>{t(o||{}),a(!1)});return()=>i&&i()},[]);const n=w.useMemo(()=>Nh.map(i=>({nivel:i,cursos:cxt(i)})).filter(i=>i.cursos.length>0),[]);return s.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Horario semanal del liceo"}),r&&s.jsx("span",{className:"text-sm text-gray-500",children:"Cargando…"})]}),s.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:yA.map(i=>s.jsxs("section",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-slate-900 shadow-sm overflow-hidden",children:[s.jsx("header",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-slate-800/40",children:s.jsx("h2",{className:"text-lg font-semibold",children:i})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:n.map(({nivel:o,cursos:l})=>s.jsxs("div",{className:"p-3 md:p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"h-5 w-1.5 rounded bg-amber-500"}),s.jsx("h3",{className:"text-base md:text-lg font-medium",children:o}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length," curso(s)"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-gray-600 dark:text-gray-300",children:[s.jsx("th",{className:"px-2 py-2 font-semibold sticky left-0 bg-white dark:bg-slate-900 z-10",children:"BLOQUE"}),s.jsx("th",{className:"px-2 py-2 font-semibold",children:"INICIO"}),s.jsx("th",{className:"px-2 py-2 font-semibold",children:"FINAL"}),l.map(c=>s.jsx("th",{className:"px-2 py-2 font-semibold whitespace-nowrap",children:c},c))]})}),s.jsx("tbody",{children:Bs.map(c=>{const u=String(c.bloque);return s.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800 align-top",children:[s.jsx("td",{className:"px-2 py-2 font-medium sticky left-0 bg-white dark:bg-slate-900 z-10",children:c.bloque}),s.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.inicio}),s.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.fin}),l.map(d=>{var x,v;const f=(v=(x=e==null?void 0:e[i])==null?void 0:x[u])==null?void 0:v[d],h=(f==null?void 0:f.asignatura)||"",m=(f==null?void 0:f.profesor)||"",g=!!(h||m);return s.jsx("td",{className:`px-2 py-2 ${g?"bg-white dark:bg-slate-900":"bg-gray-50 dark:bg-slate-800/30"}`,children:s.jsxs("div",{className:"min-w-[9rem] md:min-w-[12rem] lg:min-w-[14rem] xl:min-w-[16rem]",children:[s.jsx("div",{className:"font-medium leading-5 truncate",title:h,children:h||"—"}),s.jsx("div",{className:"text-xs text-gray-500 truncate",title:m,children:m})]})},d)})]},c.bloque)})})]})})]},o))})]},i))})]})}const m3="intranet_entries",dxt=(e,t)=>{try{const r=_t(pt(Ar,m3),Gt("createdAt","desc"));return ar(r,a=>{const n=[];a.forEach(i=>n.push({id:i.id,...i.data()})),e(n)},a=>t&&t(a))}catch(r){return t&&t(r),()=>{}}},fxt=async e=>{const t=jn.currentUser;if(!t)throw new Error("No autenticado");const r={...e,creadoPor:t.email||"desconocido",createdAt:e.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};return(await Yr(pt(Ar,m3),r)).id},fZ=async(e,t)=>{const r={...t,updatedAt:new Date().toISOString()},a=JSON.parse(JSON.stringify(r));await Ui($t(Ar,m3,e),a)},Axt=async e=>{await Ja($t(Ar,m3,e))},hxt=e=>e.replace(/[^a-zA-Z0-9._-]/g,"_");function mxt(e,t){const r=Date.now(),a=hxt(t);return`${e==="image"?"intranet/images":"intranet/videos"}/${r}_${a}`}function AZ(e,t,r){return new Promise((a,n)=>{const i=mxt(t,e.name),o=l0(IN,i),l=cre(o,e,{contentType:e.type});l.on("state_changed",c=>{const u=c.bytesTransferred/c.totalBytes*100;r==null||r(Math.round(u))},n,async()=>{try{const c=await w1(l.snapshot.ref);a({url:c,path:i})}catch(c){n(c)}})})}async function pxt(e){try{await JR(l0(IN,e))}catch(t){console.warn("No se pudo eliminar del storage:",t)}}const jO={titulo:"",resumen:"",contenidoHtml:"",etiquetas:[],enlaces:[],imagenes:[],videos:[],destacado:!1,autorNombre:""},e0e=({label:e})=>s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 ring-1 ring-amber-200/60 dark:ring-amber-800/40",children:[s.jsx(nEe,{className:"w-3.5 h-3.5 mr-1.5"})," ",e]}),xN=e=>{try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return e||""}},KP=e=>{const t=xN(e);return t?`https://www.google.com/s2/favicons?sz=64&domain=${encodeURIComponent(t)}`:void 0},hZ=(e,t=28)=>e?e.length>t?e.slice(0,t-1)+"…":e:"",gxt=({draft:e,setDraft:t,newLink:r,setNewLink:a,showPreview:n,setShowPreview:i,editing:o,saveDraft:l,cancelEdit:c,imgUploadPct:u,setImgUploadPct:d,vidUploadPct:f,setVidUploadPct:h})=>{var T,_,O,j;const m=S=>{try{return new URL(S),!0}catch{return!1}},[g,x]=w.useState(!1),[v,y]=w.useState(!1),N=async S=>{const B=Array.from(S);for(const L of B){if(!/^image\/(png|jpe?g|gif)$/i.test(L.type)){alert("Formato de imagen no soportado. Usa PNG, JPG o GIF.");continue}if(L.size>10*1024*1024){alert("Imagen supera 10 MB.");continue}try{d(0);const{url:k}=await AZ(L,"image",R=>d(R));t(R=>({...R,imagenes:[...R.imagenes||[],{url:k}]}))}catch(k){alert((k==null?void 0:k.message)||"Error al subir imagen")}finally{d(null)}}},C=async S=>{const B=Array.from(S);for(const L of B){if(!/^(video\/mp4|video\/quicktime)$/i.test(L.type)){alert("Formato de video no soportado. Usa MP4 o MOV.");continue}if(L.size>500*1024*1024){alert("Video supera 500 MB.");continue}try{h(0);const{url:k}=await AZ(L,"video",R=>h(R));t(R=>({...R,videos:[...R.videos||[],{url:k}]}))}catch(k){alert((k==null?void 0:k.message)||"Error al subir video")}finally{h(null)}}};return s.jsxs("div",{className:"bg-white p-5 md:p-6 rounded-xl shadow border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:o?"Editar entrada":"Nueva entrada"}),e.destacado&&s.jsx("span",{className:"inline-flex items-center text-xs font-semibold text-amber-700 bg-amber-50 border border-amber-200 px-2 py-0.5 rounded-full",children:"Destacado"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:[s.jsx(Oo,{className:"w-4 h-4"})," Cancelar"]}),s.jsxs("button",{disabled:u!==null||f!==null,onClick:l,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[s.jsx(gl,{className:"w-4 h-4"})," Guardar"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Título"}),s.jsx("input",{value:e.titulo,onChange:S=>t({...e,titulo:S.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Título de la entrada"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Contenido principal (HTML básico o texto)"}),s.jsx("textarea",{rows:14,value:e.contenidoHtml,onChange:S=>t({...e,contenidoHtml:S.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Puedes pegar HTML limpio (sin scripts) o escribir texto plano."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Etiquetas (separadas por comas)"}),s.jsx("input",{value:(e.etiquetas||[]).join(", "),onChange:S=>t({...e,etiquetas:S.target.value.split(",").map(B=>B.trim()).filter(Boolean)}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ej: admisión, protocolos, reuniones"}),s.jsx("div",{className:"mt-2",children:!!((T=e.etiquetas)!=null&&T.length)&&s.jsx("div",{className:"flex flex-wrap gap-2",children:e.etiquetas.map(S=>s.jsx(e0e,{label:S},S))})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Enlaces externos"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mt-1",children:[s.jsx("input",{placeholder:"Título (opcional)",value:r.titulo||"",onChange:S=>a({...r,titulo:S.target.value}),className:"sm:flex-1 rounded-md border border-slate-300 px-3 py-2"}),s.jsx("input",{placeholder:"https://sitio.com/recurso",value:r.url,onChange:S=>a({...r,url:S.target.value}),className:"sm:flex-[2] rounded-md border border-slate-300 px-3 py-2"}),s.jsxs("button",{type:"button",onClick:()=>{if(!r.url||!m(r.url)){alert("Ingresa una URL válida.");return}const S=[...e.enlaces||[]];S.push({url:r.url.trim(),...r.titulo?{titulo:r.titulo.trim()}:{}}),t({...e,enlaces:S}),a({url:""})},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:[s.jsx(Li,{className:"w-4 h-4"})," Agregar enlace"]})]}),!!((_=e.enlaces)!=null&&_.length)&&s.jsx("div",{className:"mt-3 space-y-2",children:e.enlaces.map((S,B)=>s.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-2 rounded-md bg-slate-50 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 min-w-0",children:[KP(S.url)&&s.jsx("img",{src:KP(S.url),alt:S.titulo||S.url,className:"w-4 h-4 rounded"}),s.jsx("span",{className:"font-medium truncate max-w-[220px] sm:max-w-[260px]",title:S.titulo||S.url,children:S.titulo||xN(S.url)}),s.jsx("span",{className:"text-slate-400",children:"·"}),s.jsxs("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline whitespace-nowrap",children:[s.jsx(xg,{className:"w-3.5 h-3.5"})," Abrir"]})]}),s.jsx("button",{onClick:()=>t({...e,enlaces:(e.enlaces||[]).filter((L,D)=>D!==B)}),className:"p-1 rounded hover:bg-red-50 text-red-600",title:"Eliminar",children:s.jsx(Da,{className:"w-4 h-4"})})]},B))})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700",children:[s.jsx("input",{type:"checkbox",checked:!!e.destacado,onChange:S=>t({...e,destacado:S.target.checked})}),s.jsx(nF,{className:"w-4 h-4"})," Destacado"]})})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Resumen"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Opcional"})]}),s.jsx("textarea",{rows:5,value:e.resumen||"",onChange:S=>t({...e,resumen:S.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Breve síntesis para el feed"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Previsualización"}),s.jsx("button",{onClick:()=>i(S=>!S),className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",children:n?s.jsxs(s.Fragment,{children:[s.jsx(yNe,{className:"w-4 h-4"})," Ocultar"]}):s.jsxs(s.Fragment,{children:[s.jsx(tb,{className:"w-4 h-4"})," Mostrar"]})})]}),s.jsx("div",{className:"p-3 min-h-[8rem]",children:n?s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx(uC,{content:e.contenidoHtml,context:"intranet-editor-preview"})}):s.jsx("div",{className:"text-slate-500 text-sm",children:"Activa la previsualización para ver el contenido renderizado."})})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"p-3 border-b border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[s.jsx(ik,{className:"w-4 h-4"})," Imágenes"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: PNG, JPG, GIF. Máx. 10 MB."})]}),s.jsx("div",{onDragOver:S=>{S.preventDefault(),x(!0)},onDragLeave:()=>x(!1),onDrop:S=>{var B;S.preventDefault(),x(!1),(B=S.dataTransfer.files)!=null&&B.length&&N(S.dataTransfer.files)},className:`m-3 rounded-md border-2 ${g?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:s.jsxs("label",{className:"block",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:S=>{S.target.files&&N(S.target.files),S.currentTarget.value=""}}),s.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[u!==null?s.jsx(Di,{className:"w-6 h-6 animate-spin"}):s.jsx(cz,{className:"w-6 h-6"}),s.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"}),u!==null&&s.jsxs("div",{className:"w-full max-w-xs mt-1",children:[s.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(u)}%`}})}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Subiendo imagen… ",Math.round(u),"%"]})]})]})]})}),!!((O=e.imagenes)!=null&&O.length)&&s.jsx("div",{className:"px-3 pb-3 grid grid-cols-3 gap-2",children:e.imagenes.map((S,B)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:S.url,alt:S.titulo||`img-${B}`,className:"w-full h-20 object-cover rounded-md"}),s.jsx("button",{type:"button",onClick:()=>t({...e,imagenes:(e.imagenes||[]).filter((L,D)=>D!==B)}),className:"absolute top-1 right-1 p-1 rounded bg-white/90 hover:bg-white",children:s.jsx(Oo,{className:"w-3.5 h-3.5"})})]},B))})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"p-3 border-b border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[s.jsx(tu,{className:"w-4 h-4"})," Videos"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: MP4, MOV. Máx. 500 MB. También puedes pegar URLs."})]}),s.jsxs("div",{className:"m-3",children:[s.jsxs("div",{onDragOver:S=>{S.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:S=>{var B;S.preventDefault(),y(!1),(B=S.dataTransfer.files)!=null&&B.length&&C(S.dataTransfer.files)},className:`rounded-md border-2 ${v?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:[s.jsxs("label",{className:"block",children:[s.jsx("input",{type:"file",accept:"video/*",multiple:!0,className:"hidden",onChange:S=>{S.target.files&&C(S.target.files),S.currentTarget.value=""}}),s.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[f!==null?s.jsx(Di,{className:"w-6 h-6 animate-spin"}):s.jsx(cz,{className:"w-6 h-6"}),s.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"})]})]}),f!==null&&s.jsxs("div",{className:"w-full max-w-xs mt-3 mx-auto",children:[s.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(f)}%`}})}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:["Subiendo video… ",Math.round(f),"%"]})]})]}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("input",{placeholder:"https://video-ejemplo.com/archivo.mp4",className:"flex-1 rounded-md border border-slate-300 px-3 py-2",onKeyDown:S=>{const B=S.currentTarget.value.trim();if(S.key==="Enter"){if(!m(B)){alert("URL de video no válida.");return}t(L=>({...L,videos:[...L.videos||[],{url:B}]})),S.currentTarget.value=""}}}),s.jsx("button",{type:"button",onClick:S=>{var D;const B=S.currentTarget.previousSibling,L=(D=B==null?void 0:B.value)==null?void 0:D.trim();if(L){if(!m(L)){alert("URL de video no válida.");return}t(k=>({...k,videos:[...k.videos||[],{url:L}]})),B.value=""}},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Agregar URL"})]}),!!((j=e.videos)!=null&&j.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.videos.map((S,B)=>s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-slate-50 border border-slate-200 text-sm",children:[s.jsx(tu,{className:"w-4 h-4"})," ",S.titulo||xN(S.url),s.jsx("button",{type:"button",onClick:()=>t({...e,videos:(e.videos||[]).filter((L,D)=>D!==B)}),className:"ml-2 p-1 rounded hover:bg-slate-200",children:s.jsx(Oo,{className:"w-3.5 h-3.5"})})]},B))})]})]})]})]})]})},xxt=ct.memo(gxt),vxt=({currentUser:e})=>{const t=e.profile===Mt.SUBDIRECCION,r=[Mt.SUBDIRECCION,Mt.PROFESORADO,Mt.COORDINACION_TP].includes(e.profile),a=[Mt.PROFESORADO,Mt.COORDINACION_TP].includes(e.profile),[n,i]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null),[d,f]=w.useState(null),[h,m]=w.useState(jO),[g,x]=w.useState(!1),[v,y]=w.useState(!1),[N,C]=w.useState({url:""}),[T,_]=w.useState(null),[O,j]=w.useState(null),[S,B]=w.useState({order:[],colors:{},version:1}),[L,D]=w.useState(!1),[k,R]=w.useState(null),[U,H]=w.useState(null),Q=w.useMemo(()=>[{id:"auto",label:"Auto",Comp:jre},{id:"file",label:"Documento",Comp:Pl},{id:"folder",label:"Carpeta",Comp:UNe},{id:"link",label:"Enlace",Comp:ok},{id:"image",label:"Imagen",Comp:ik},{id:"video",label:"Video",Comp:tu},{id:"calendar",label:"Calendario",Comp:Io},{id:"megaphone",label:"Anuncio",Comp:wre},{id:"book",label:"Libro/Guía",Comp:Ds},{id:"users",label:"Personas",Comp:Ei},{id:"settings",label:"Ajustes",Comp:Cre},{id:"star",label:"Destacado",Comp:Ere},{id:"message",label:"Mensaje",Comp:DN},{id:"bell",label:"Notificación",Comp:Cwe},{id:"clipboard",label:"Lista",Comp:Gh},{id:"check",label:"Aprobado",Comp:ON},{id:"alert",label:"Alerta",Comp:Db},{id:"pin",label:"Pin",Comp:nF},{id:"mappin",label:"Ubicación",Comp:Tw},{id:"graduation",label:"Educación",Comp:Ym},{id:"briefcase",label:"Portafolio",Comp:Ob},{id:"building",label:"Edificio",Comp:Zv},{id:"sheet",label:"Hoja de cálculo",Comp:S_},{id:"barchart",label:"Gráfico barras",Comp:fl},{id:"piechart",label:"Gráfico torta",Comp:eb},{id:"heart",label:"Corazón",Comp:WNe},{id:"lightbulb",label:"Idea",Comp:oCe},{id:"rocket",label:"Cohete",Comp:UCe},{id:"globe",label:"Globo",Comp:VNe},{id:"map",label:"Mapa",Comp:gCe},{id:"clock",label:"Reloj",Comp:ANe},{id:"mail",label:"Correo",Comp:yre},{id:"phone",label:"Teléfono",Comp:TCe},{id:"camera",label:"Cámara",Comp:Hwe},{id:"play",label:"Reproducir",Comp:nNe}],[]),[V,G]=w.useState("auto"),[J,W]=w.useState(""),Z=K=>{H(K),G(K.iconId||"auto")},M=()=>{H(null)};w.useEffect(()=>{if(!r)return;l(!0);const K=dxt(Ee=>{i(Ee),B(_e=>{const Ce=new Set(Ee.map(ye=>ye.id)),de=_e.order.filter(ye=>Ce.has(ye)),xe={};Object.entries(_e.colors).forEach(([ye,ce])=>{Ce.has(ye)&&(xe[ye]=String(ce))});const he={..._e,order:de,colors:xe};return F(he),he}),l(!1)},Ee=>{console.error("Error al suscribirse a intranet:",Ee),u("No se pudo cargar la intranet."),l(!1)});return()=>{try{K&&K()}catch{}}},[r]),w.useEffect(()=>{if(a)try{const K=localStorage.getItem(`intranet_prefs_${e.id}`);if(K){const Ee=JSON.parse(K);Ee&&typeof Ee=="object"&&B({order:Ee.order||[],colors:Ee.colors||{},version:1})}}catch{}},[a,e.id]);const F=K=>{try{localStorage.setItem(`intranet_prefs_${e.id}`,JSON.stringify(K))}catch{}},X=(K,Ee)=>{B(_e=>{const Ce={..._e,colors:{..._e.colors}};return Ee?Ce.colors[K]=Ee:delete Ce.colors[K],F(Ce),Ce})},Y=(K,Ee)=>{B(_e=>{const Ce=n.map(Ae=>Ae.id),de=_e.order.filter(Ae=>Ce.includes(Ae)).concat(Ce.filter(Ae=>!_e.order.includes(Ae))),xe=de.indexOf(K);if(xe<0)return _e;const he=Ee==="up"?xe-1:xe+1;if(he<0||he>=de.length)return _e;const ye=de.slice();[ye[xe],ye[he]]=[ye[he],ye[xe]];const ce={..._e,order:ye,colors:_e.colors,version:_e.version};return F(ce),ce})},ae=()=>{f(null),m({...jO,autorNombre:e.nombreCompleto}),x(!0)},le=({e:K,index:Ee})=>{var ce,Ae,Ne,Pe;const _e="p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-700",Ce=S.colors[K.id],de=()=>{var Qe,$e,et;return(Qe=K.videos)!=null&&Qe.length?tu:($e=K.imagenes)!=null&&$e.length?ik:(et=K.enlaces)!=null&&et.length?xg:Pl},xe=w.useMemo(()=>{const Qe={};return Q.forEach(({id:$e,Comp:et})=>{$e!=="auto"&&(Qe[$e]=et)}),Qe},[Q]),he=K.iconId&&K.iconId!=="auto"&&xe[K.iconId]||de(),ye=a&&L;return s.jsxs("div",{className:`relative rounded-xl shadow-sm hover:shadow-md transition overflow-hidden border bg-white ${ye?"cursor-move":""} ${k===K.id?"opacity-80 ring-2 ring-blue-400":""}`,style:{borderColor:"var(--tw-colors-slate-200)",borderLeft:Ce?`6px solid ${Ce}`:void 0},draggable:ye,onDragStart:Qe=>{ye&&(R(K.id),Qe.dataTransfer.setData("text/plain",K.id),Qe.dataTransfer.effectAllowed="move")},onDragEnd:()=>R(null),onDragOver:Qe=>{ye&&(Qe.preventDefault(),Qe.dataTransfer.dropEffect="move")},onDrop:Qe=>{if(!ye)return;Qe.preventDefault();const $e=Qe.dataTransfer.getData("text/plain"),et=K.id;!$e||$e===et||(B(Ke=>{const Ge=n.map(Kt=>Kt.id),nt=Ke.order.filter(Kt=>Ge.includes(Kt)).concat(Ge.filter(Kt=>!Ke.order.includes(Kt))),bt=nt.indexOf($e),ut=nt.indexOf(et);if(bt<0||ut<0)return Ke;const ze=nt.slice(),[Tt]=ze.splice(bt,1);ze.splice(ut,0,Tt);const ir={...Ke,order:ze};return F(ir),ir}),R(null))},children:[t&&s.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-1",children:[s.jsx("button",{onClick:()=>ie(K),className:_e,title:"Editar contenido",children:s.jsx(Iw,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Z(K),className:_e,title:"Editar icono",children:s.jsx(nF,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>we(K.id),className:"p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-red-600",title:"Eliminar",children:s.jsx(Da,{className:"w-4 h-4"})})]}),a&&L&&s.jsxs("div",{className:"absolute top-2 left-2 z-20 flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>Y(K.id,"up"),title:"Subir",children:"↑"}),s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>Y(K.id,"down"),title:"Bajar",children:"↓"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[s.jsx("input",{type:"color",value:Ce||"#ffffff",onChange:Qe=>X(K.id,Qe.target.value),title:"Color"}),s.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50",onClick:()=>X(K.id,void 0),title:"Quitar color",children:"✕"})]})]}),s.jsxs("div",{className:"p-4 relative z-0",children:[s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white truncate",title:K.titulo,children:K.titulo}),s.jsxs("p",{className:"text-sm text-slate-700/80 dark:text-slate-300/90",children:[new Date(K.createdAt).toLocaleString("es-CL")," • ",K.autorNombre||K.creadoPor]})]})}),!!K.resumen&&s.jsx("p",{className:"mt-1 text-slate-800 dark:text-slate-200",children:K.resumen}),s.jsx("div",{className:"mt-3 prose prose-slate max-w-none dark:prose-invert text-sm",children:s.jsx(uC,{content:K.contenidoHtml,context:"intranet-entry"})}),!!((ce=K.etiquetas)!=null&&ce.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:K.etiquetas.map(Qe=>s.jsx(e0e,{label:Qe},Qe))}),!!((Ae=K.enlaces)!=null&&Ae.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:K.enlaces.map((Qe,$e)=>{const et=xN(Qe.url),Ke=KP(Qe.url),Ge=Qe.titulo||et||"Abrir";return s.jsxs("a",{href:Qe.url,target:"_blank",rel:"noopener noreferrer",className:"min-w-0 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800 text-sm transition max-w-full",children:[Ke&&s.jsx("img",{src:Ke,alt:et,className:"w-4 h-4 rounded shrink-0"}),s.jsx("span",{className:"font-medium truncate max-w-[180px] sm:max-w-[220px]",title:Ge,children:hZ(Ge,30)}),s.jsx(xg,{className:"w-3.5 h-3.5 shrink-0"})]},$e)})}),!!((Ne=K.imagenes)!=null&&Ne.length)&&s.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-2",children:K.imagenes.map((Qe,$e)=>s.jsx("img",{src:Qe.url,alt:Qe.titulo||`img-${$e}`,className:"w-full h-32 object-cover rounded-md"},$e))}),!!((Pe=K.videos)!=null&&Pe.length)&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:K.videos.map((Qe,$e)=>s.jsxs("a",{href:Qe.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-50 text-amber-700 ring-1 ring-amber-200 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-300 dark:ring-amber-800 text-sm transition",children:[s.jsx(tu,{className:"w-4 h-4"})," ",hZ(Qe.titulo||xN(Qe.url)||"Video",30),s.jsx(xg,{className:"w-3.5 h-3.5"})]},$e))}),s.jsx("div",{className:"mt-6 grid place-items-center pointer-events-none select-none",children:s.jsx(he,{className:"text-slate-300 w-16 h-16 md:w-20 md:h-20"})})]})]})},ie=K=>{f(K);const{id:Ee,createdAt:_e,creadoPor:Ce,...de}=K;m({...de}),x(!0)},ne=()=>{f(null),m(jO),x(!1)},oe=async()=>{try{const K={...h};if(!K.titulo||!K.contenidoHtml){alert("Título y contenido son obligatorios");return}d?await fZ(d.id,K):await fxt(K),ne(),x(!1)}catch(K){alert((K==null?void 0:K.message)||"No se pudo guardar la entrada")}},we=async K=>{var Ee,_e;if(confirm("¿Eliminar esta entrada?"))try{const Ce=n.find(xe=>xe.id===K),de=[];(Ee=Ce==null?void 0:Ce.imagenes)==null||Ee.forEach(xe=>{xe.storagePath&&de.push(xe.storagePath)}),(_e=Ce==null?void 0:Ce.videos)==null||_e.forEach(xe=>{xe.storagePath&&de.push(xe.storagePath)}),de.length&&await Promise.all(de.map(xe=>pxt(xe).catch(()=>{}))),await Axt(K)}catch(Ce){alert((Ce==null?void 0:Ce.message)||"No se pudo eliminar")}};return r?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Intranet"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Información institucional, enlaces y recursos para el profesorado y coordinación."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>D(K=>!K),className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${L?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:L?"Salir de personalización":"Personalizar"}),L&&s.jsx("button",{onClick:()=>{const K={order:[],colors:{},version:1};B(K),F(K)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border bg-white text-slate-700 border-slate-300 hover:bg-slate-50",children:"Restablecer"})]}),t&&s.jsxs("button",{onClick:ae,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600",children:[s.jsx(Li,{className:"w-4 h-4"})," Nueva entrada"]})]})]}),t&&g&&s.jsx(xxt,{draft:h,setDraft:m,newLink:N,setNewLink:C,showPreview:v,setShowPreview:y,editing:!!d,saveDraft:oe,cancelEdit:ne,imgUploadPct:T,setImgUploadPct:_,vidUploadPct:O,setVidUploadPct:j}),o?s.jsx("div",{className:"text-slate-600 dark:text-slate-300",children:"Cargando intranet..."}):n.length===0?s.jsx("div",{className:"p-8 text-center rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700",children:"Aún no hay entradas publicadas."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(()=>{const K=n.slice().sort((Ee,_e)=>+!!_e.destacado-+!!Ee.destacado);if(a){const Ee=S.order.filter(de=>K.find(xe=>xe.id===de)),_e=K.filter(de=>!Ee.includes(de.id));return[...Ee.map(de=>K.find(xe=>xe.id===de)).filter(Boolean),..._e].map((de,xe)=>s.jsx(le,{e:de,index:xe},de.id))}return K.map((Ee,_e)=>s.jsx(le,{e:Ee,index:_e},Ee.id))})()}),t&&U&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:M}),s.jsxs("div",{className:"relative w-full max-w-lg mx-4 bg-white rounded-xl shadow-xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h5",{className:"text-slate-800 font-semibold",children:"Apariencia de tarjeta (icono)"}),s.jsx("button",{onClick:M,className:"p-1 rounded hover:bg-slate-100","aria-label":"Cerrar",children:s.jsx(Oo,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Icono"}),s.jsx("input",{type:"text",value:J,onChange:K=>W(K.target.value),placeholder:"Buscar icono...",className:"w-40 rounded-md border border-slate-300 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:Q.filter(K=>K.label.toLowerCase().includes(J.toLowerCase())||K.id.includes(J.toLowerCase())).map(K=>{const Ee=K.Comp,_e=V===K.id||K.id==="auto"&&V==="auto";return s.jsxs("button",{type:"button",onClick:()=>G(K.id),className:`flex flex-col items-center justify-center gap-1 px-2 py-2 rounded-md border text-xs ${_e?"border-blue-600 bg-blue-50 text-blue-700":"border-slate-200 hover:bg-slate-50 text-slate-700"}`,title:K.label,children:[s.jsx(Ee,{className:"w-5 h-5"}),s.jsx("span",{className:"truncate w-full text-center",children:K.label})]},K.id)})})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap justify-end gap-2",children:[s.jsx("button",{onClick:M,className:"px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:"Cancelar"}),s.jsx("button",{onClick:async()=>{if(U)try{await fZ(U.id,{gradiente:null,iconId:V==="auto"?null:V}),M()}catch(K){alert((K==null?void 0:K.message)||"No se pudo guardar")}},className:"px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})]}):s.jsx("div",{className:"p-6 rounded-xl bg-white dark:bg-slate-800 border dark:border-slate-700",children:"No autorizado."})},bxt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},yxt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:a,canChangeProfile:n,unreadMessagesCount:i,refreshUnreadCount:o})=>{const l=e.profile,c=w.useMemo(()=>{const O=QEe[l]||[];return l!==Mt.ESTUDIANTE?O:O.filter(j=>{if(j.name==="Asistencia a Empresa"){const S=bxt(e.curso||"");return S.startsWith("3º")||S.startsWith("4º")}return!0})},[l,e.curso]),[u,d]=w.useState(null),[f,h]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0}),y=w.useRef([]);w.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const N=w.useCallback(O=>{d(O),window.innerWidth<768&&h(!1)},[]),C=w.useCallback(O=>{const j=c.find(S=>S.name===O);j&&N(j)},[c,N]),T=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:s.jsx(jEe,{className:"w-4 h-4"})})}),!m&&s.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),s.jsx("button",{type:"button",onClick:()=>g(O=>!O),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?s.jsx(k_,{className:"w-5 h-5 text-slate-200"}):s.jsx(Bw,{className:"w-5 h-5 text-slate-200"})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",children:l===Mt.PROFESORADO&&!m?s.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificación",items:["Intranet","Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión"]},{id:"evaluacion",title:"Evaluación",items:["Evaluación de Ensayo","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexión",items:["Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(O=>{const j=!!x[O.id],S=O.items.map(B=>c.find(L=>L.name===B)).filter(Boolean);return S.length===0?null:s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(B=>({...B,[O.id]:!B[O.id]})),"aria-expanded":j,children:[s.jsx("span",{className:"text-sm font-semibold text-white/90",children:O.title}),s.jsx(rF,{className:`w-4 h-4 text-white/70 transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsx("div",{className:"px-2 pb-2",children:S.map(B=>{const L=(u==null?void 0:u.name)===B.name;return s.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:B.name,children:[s.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},O.id)}),c.filter(O=>!["Intranet","Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(O.name)).length>0&&s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),s.jsx("div",{className:"px-2 pb-2",children:c.filter(O=>!["Intranet","Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(O.name)).map(O=>{const j=(u==null?void 0:u.name)===O.name;return s.jsxs("button",{onClick:()=>N(O),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${j?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:O.name,children:[s.jsx("span",{className:`shrink-0 ${j?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:O.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:O.name})]},O.name)})})]})]}):l===Mt.SUBDIRECCION&&!m?s.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestión",items:["Intranet","Administración","Horario del liceo","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas"]},{id:"sd_planificacion",title:"Planificación",items:["Seguimiento Curricular","Interdisciplinario","Inclusión"]},{id:"sd_reflexion",title:"Reflexión",items:["Acompañamiento docente","Análisis Taxonómico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(O=>{const j=!!x[O.id],S=O.items.map(B=>c.find(L=>L.name===B)).filter(Boolean);return S.length===0?null:s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(B=>({...B,[O.id]:!B[O.id]})),"aria-expanded":j,children:[s.jsx("span",{className:"text-sm font-semibold text-white/90",children:O.title}),s.jsx(rF,{className:`w-4 h-4 text-white/70 transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsx("div",{className:"px-2 pb-2",children:S.map(B=>{const L=(u==null?void 0:u.name)===B.name;return s.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:B.name,children:[s.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},O.id)}),c.filter(O=>!["Intranet","Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(O.name)).length>0&&s.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),s.jsx("div",{className:"px-2 pb-2",children:c.filter(O=>!["Intranet","Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(O.name)).map(O=>{const j=(u==null?void 0:u.name)===O.name;return s.jsxs("button",{onClick:()=>N(O),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${j?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:O.name,children:[s.jsx("span",{className:`shrink-0 ${j?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:O.icon}),s.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:O.name})]},O.name)})})]})]}):s.jsx("div",{className:"space-y-1",onKeyDown:O=>{var S,B,L;const j=y.current.findIndex(D=>D===document.activeElement);if(O.key==="ArrowDown"){O.preventDefault();const D=Math.min(j===-1?0:j+1,y.current.length-1);(S=y.current[D])==null||S.focus()}else if(O.key==="ArrowUp"){O.preventDefault();const D=Math.max(j===-1?0:j-1,0);(B=y.current[D])==null||B.focus()}else O.key==="Enter"&&j>=0&&((L=y.current[j])==null||L.click())},children:c.map((O,j)=>{const S=(u==null?void 0:u.name)===O.name;return s.jsxs("button",{ref:B=>y.current[j]=B,onClick:()=>N(O),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                    ${S?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?O.name:void 0,children:[s.jsx("span",{className:`shrink-0 ${S?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:O.icon}),!m&&s.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:O.name})]},O.name)})})})]}),_=()=>{if(!u)return s.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Intranet")return s.jsx(vxt,{currentUser:e});if(u.name==="Calendario Académico")return s.jsx(yYe,{profile:l});if(u.name==="Muro de Anuncios")return s.jsx(jYe,{currentUser:e});if(u.name==="Mensajería Interna")return s.jsx(Ytt,{currentUser:e,refreshUnreadCount:o});if(u.name==="Generador de Actas")return s.jsx(FYe,{});if(u.name==="Desarrollo Profesional")return s.jsx(zpt,{currentUser:e});if(l===Mt.SUBDIRECCION){if(u.name==="Dashboard")return s.jsx(jFe,{currentUser:e});if(u.name==="Administración")return s.jsx(JZe,{});if(u.name==="Horario del liceo")return s.jsx(uxt,{});if(u.name==="Multicopias")return s.jsx(CO,{currentUser:e});if(u.name==="Evaluación de Ensayo")return s.jsx(EO,{currentUser:e});if(u.name==="Seguimiento Curricular")return s.jsx(Mct,{currentUser:e});if(u.name==="Acompañamiento docente")return s.jsx(ztt,{currentUser:e});if(u.name==="Análisis Taxonómico")return s.jsx(oY,{currentUser:e});if(u.name==="SIMCE")return s.jsx(qj,{currentUser:e});if(u.name==="Interdisciplinario")return s.jsx(hX,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return s.jsx(yFe,{currentUser:e});if(u.name==="Crear horarios")return s.jsx(yDe,{});if(u.name==="Seguimiento de acciones pedagógicas")return s.jsx(XXe,{});if(u.name==="Inclusión")return s.jsx(lX,{currentUser:e})}if(l===Mt.PROFESORADO){if(u.name==="Planificación")return s.jsx(AYe,{currentUser:e});if(u.name==="Mis Acompañamientos")return s.jsx(xct,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return s.jsx(tct,{});if(u.name==="Multicopias")return s.jsx(CO,{currentUser:e});if(u.name==="Análisis Taxonómico")return s.jsx(oY,{currentUser:e});if(u.name==="SIMCE")return s.jsx(qj,{currentUser:e});if(u.name==="Interdisciplinario")return s.jsx(hX,{});if(u.name==="Inclusión")return s.jsx(lX,{currentUser:e});if(u.name==="Actividades Remotas")return s.jsx(Bet,{});if(u.name==="Evaluación de Ensayo")return s.jsx(EO,{currentUser:e});if(u.name==="Evaluación de Aprendizajes")return s.jsx(WZe,{});if(u.name==="Evaluaciones Formativas")return s.jsx(Ett,{currentUser:e});if(u.name==="Evaluación de Competencias")return s.jsx(Ggt,{currentUser:e})}if(l===Mt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return s.jsx(cet,{});if(u.name==="Asistencia Dual")return s.jsx(ctt,{});if(u.name==="Pañol")return s.jsx(vrt,{});if(u.name==="Multicopias")return s.jsx(CO,{currentUser:e});if(u.name==="Evaluación de Ensayo")return s.jsx(EO,{currentUser:e});if(u.name==="SIMCE")return s.jsx(qj,{currentUser:e});if(u.name==="Gestión de Empresas")return s.jsx(_pt,{});if(u.name==="Alternancia TP")return s.jsx(ygt,{})}if(l===Mt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return s.jsx(Qet,{currentUser:e});if(u.name==="Evaluación Formativa")return s.jsx(lct,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return s.jsx(Act,{currentUser:e});if(u.name==="SIMCE")return s.jsx(qj,{currentUser:e});if(u.name==="Asistencia a Empresa")return s.jsx(ttt,{currentUser:e})}return s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),s.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:s.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",s.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return s.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[s.jsx(aje,{currentUser:e,onLogout:t,onNavigate:C,onUserUpdate:r,onChangeProfile:a,canChangeProfile:n,toggleSidebar:()=>h(O=>!O),unreadMessagesCount:i,refreshUnreadCount:o}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&s.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),s.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:s.jsx(T,{})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:s.jsx(bCe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&s.jsx("span",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),s.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},wxt=({onSelectProfile:e,isAdminView:t=!1})=>s.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[s.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[s.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),s.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),s.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("div",{className:"mb-4 flex justify-center items-center",children:s.jsx(a8,{})}),s.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),s.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:UEe.map(r=>s.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[s.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),s.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),s.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),s.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),Nxt=()=>{const[e,t]=w.useState(null),[r,a]=w.useState(null),[n,i]=w.useState(!0),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(null),[h,m]=w.useState(null);w.useEffect(()=>{const T=new URLSearchParams(window.location.search),_=T.get("auth"),O=T.get("userId");T.get("module"),_==="success"&&O&&(m("¡Autorización de Google Slides completada exitosamente!"),setTimeout(()=>{const j=window.location.pathname;window.history.replaceState({},document.title,j),m(null)},3e3))},[]),w.useEffect(()=>{const T=XZ(jn,async _=>{if(t(_),_)try{const O=await Are(_.email);O?(a(O),O.profile===Mt.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await VB())}catch{l("Error al conectar con la base de datos."),await VB()}else a(null),f(null),u(!1),l(null);i(!1)});return()=>T()},[]);const g=async(T,_)=>{if(l(null),!T.trim()||!_.trim()){l("Por favor ingrese email y contraseña");return}try{await owe(T.trim(),_)}catch(O){switch(O.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},x=async T=>{try{await lwe(T)}catch(_){console.error("Error al enviar email de recuperación:",_)}},v=T=>{f(T),u(!1)},y=()=>{u(!0),f(null)},N=async()=>{try{await VB()}catch(T){console.error("Error al cerrar sesión:",T)}};if(n)return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-4 flex justify-center items-center",children:s.jsx(a8,{})}),s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return s.jsx(XEe,{onLoginAttempt:g,onForgotPasswordRequest:x,error:o});if(c&&r.profile===Mt.SUBDIRECCION)return s.jsx(wxt,{onSelectProfile:v,isAdminView:!0});const C=d||r.profile;return s.jsxs(s.Fragment,{children:[h&&s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"✅"}),s.jsx("span",{children:h})]}),s.jsx(yxt,{currentUser:{...r,profile:C},onLogout:N,onChangeProfile:r.profile===Mt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Mt.SUBDIRECCION})]})},t0e=document.getElementById("root");if(!t0e)throw new Error("Could not find root element to mount to");const Cxt=xme.createRoot(t0e);Cxt.render(s.jsx(ct.StrictMode,{children:s.jsx(Nxt,{})}));export{bn as _,jxt as c,Ml as g};
